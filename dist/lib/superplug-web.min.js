var r1=Object.defineProperty,Ju=n=>{throw TypeError(n)},o1=(n,e,t)=>e in n?r1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,m=(n,e,t)=>o1(n,typeof e!="symbol"?e+"":e,t),Xu=(n,e,t)=>e.has(n)||Ju("Cannot "+t),jt=(n,e,t)=>(Xu(n,e,"read from private field"),t?t.call(n):e.get(n)),eh=(n,e,t)=>e.has(n)?Ju("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),th=(n,e,t,i)=>(Xu(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);const s1="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(s1);const wl=1,_l=2,ih=4,a1=8,l1=16,c1=1,d1=4,u1=8,h1=16,m1=4,g1=1,p1=2,nh="[",vl="[!",yl="]",ao={},$t=Symbol(),QM=!1;function xl(n){console.warn("hydration_mismatch")}var Cl=Array.isArray,Al=Array.from,Ss=Object.keys,Is=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,f1=Object.getOwnPropertyDescriptors,b1=Object.prototype,k1=Array.prototype,Tl=Object.getPrototypeOf;function w1(n){return typeof n=="function"}const lo=()=>{};function rh(n){for(var e=0;e<n.length;e++)n[e]()}const $i=2,oh=4,Ps=8,Ms=16,di=32,co=64,Fn=128,Vs=256,Ht=512,gn=1024,uo=2048,xi=4096,ho=8192,sh=16384,Ls=32768,_1=1<<18,ah=1<<19,fr=Symbol("$state"),v1=Symbol("");function lh(n){return n===this.v}function y1(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function ch(n){return!y1(n,this.v)}function x1(n){throw new Error("effect_in_teardown")}function C1(){throw new Error("effect_in_unowned_derived")}function A1(n){throw new Error("effect_orphan")}function T1(){throw new Error("effect_update_depth_exceeded")}function E1(){throw new Error("hydration_failed")}function S1(n){throw new Error("props_invalid_value")}function I1(){throw new Error("state_descriptors_fixed")}function P1(){throw new Error("state_prototype_fixed")}function M1(){throw new Error("state_unsafe_local_read")}function V1(){throw new Error("state_unsafe_mutation")}let dh=!1;function ei(n){return{f:0,v:n,reactions:null,equals:lh,version:0}}function Hi(n){return L1(ei(n))}function El(n,e=!1){const t=ei(n);return e||(t.equals=ch),t}function L1(n){return ve!==null&&ve.f&$i&&(Ci===null?H1([n]):Ci.push(n)),n}function Ke(n,e){return ve!==null&&W1()&&ve.f&($i|Ms)&&(Ci===null||!Ci.includes(n))&&V1(),Sl(n,e)}function Sl(n,e){return n.equals(e)||(n.v=e,n.version=Sh(),uh(n,gn),de!==null&&de.f&Ht&&!(de.f&di)&&(yt!==null&&yt.includes(n)?(Ui(de,gn),Fs(de)):pn===null?U1([n]):pn.push(n))),e}function uh(n,e){var t=n.reactions;if(t!==null)for(var i=t.length,r=0;r<i;r++){var o=t[r],s=o.f;s&gn||(Ui(o,e),s&(Ht|Fn)&&(s&$i?uh(o,uo):Fs(o)))}}function mo(n){var e=$i|gn;de===null?e|=Fn:de.f|=ah;const t={children:null,ctx:Rt,deps:null,equals:lh,f:e,fn:n,reactions:null,v:null,version:0,parent:de};if(ve!==null&&ve.f&$i){var i=ve;(i.children??(i.children=[])).push(t)}return t}function hh(n){var e=n.children;if(e!==null){n.children=null;for(var t=0;t<e.length;t+=1){var i=e[t];i.f&$i?Il(i):jn(i)}}}function mh(n){var e,t=de;Nt(n.parent);try{hh(n),e=Ih(n)}finally{Nt(t)}return e}function gh(n){var e=mh(n),t=(_r||n.f&Fn)&&n.deps!==null?uo:Ht;Ui(n,t),n.equals(e)||(n.v=e,n.version=Sh())}function Il(n){hh(n),ko(n,0),Ui(n,ho),n.v=n.children=n.deps=n.ctx=n.reactions=null}function O1(n){de===null&&ve===null&&A1(),ve!==null&&ve.f&Fn&&C1(),Rl&&x1()}function N1(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function go(n,e,t,i=!0){var r=(n&co)!==0,o=de,s={ctx:Rt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|gn,first:null,fn:e,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(t){var a=kr;try{Ah(!0),Bs(s),s.f|=sh}catch(d){throw jn(s),d}finally{Ah(a)}}else e!==null&&Fs(s);var l=t&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&ah)===0;if(!l&&!r&&i&&(o!==null&&N1(s,o),ve!==null&&ve.f&$i)){var c=ve;(c.children??(c.children=[])).push(s)}return s}function R1(n){O1();var e=de!==null&&(de.f&di)!==0&&Rt!==null&&!Rt.m;if(e){var t=Rt;(t.e??(t.e=[])).push({fn:n,effect:de,reaction:ve})}else{var i=br(n);return i}}function ph(n){const e=go(co,n,!0);return()=>{jn(e)}}function br(n){return go(oh,n,!1)}function Pl(n){return go(Ps,n,!0)}function ae(n){return Ml(n)}function Ml(n,e=0){return go(Ps|Ms|e,n,!0)}function po(n,e=!0){return go(Ps|di,n,!0,e)}function fh(n){var e=n.teardown;if(e!==null){const t=Rl,i=ve;Th(!0),ti(null);try{e.call(null)}finally{Th(t),ti(i)}}}function bh(n){var e=n.deriveds;if(e!==null){n.deriveds=null;for(var t=0;t<e.length;t+=1)Il(e[t])}}function kh(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var i=t.next;jn(t,e),t=i}}function z1(n){for(var e=n.first;e!==null;){var t=e.next;e.f&di||jn(e),e=t}}function jn(n,e=!0){var t=!1;if((e||n.f&_1)&&n.nodes_start!==null){for(var i=n.nodes_start,r=n.nodes_end;i!==null;){var o=i===r?null:Wi(i);i.remove(),i=o}t=!0}kh(n,e&&!t),bh(n),ko(n,0),Ui(n,ho);var s=n.transitions;if(s!==null)for(const l of s)l.stop();fh(n);var a=n.parent;a!==null&&a.first!==null&&wh(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.parent=n.fn=n.nodes_start=n.nodes_end=null}function wh(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function Vl(n,e){var t=[];Ll(n,t,!0),_h(t,()=>{jn(n),e&&e()})}function _h(n,e){var t=n.length;if(t>0){var i=()=>--t||e();for(var r of n)r.out(i)}else e()}function Ll(n,e,t){if(!(n.f&xi)){if(n.f^=xi,n.transitions!==null)for(const s of n.transitions)(s.is_global||t)&&e.push(s);for(var i=n.first;i!==null;){var r=i.next,o=(i.f&Ls)!==0||(i.f&di)!==0;Ll(i,e,o?t:!1),i=r}}}function Os(n){vh(n,!0)}function vh(n,e){if(n.f&xi){bo(n)&&Bs(n),n.f^=xi;for(var t=n.first;t!==null;){var i=t.next,r=(t.f&Ls)!==0||(t.f&di)!==0;vh(t,r?e:!1),t=i}if(n.transitions!==null)for(const o of n.transitions)(o.is_global||e)&&o.in()}}const D1=typeof requestIdleCallback>"u"?n=>setTimeout(n,1):requestIdleCallback;let Ns=!1,Rs=!1,Ol=[],Nl=[];function yh(){Ns=!1;const n=Ol.slice();Ol=[],rh(n)}function xh(){Rs=!1;const n=Nl.slice();Nl=[],rh(n)}function zs(n){Ns||(Ns=!0,queueMicrotask(yh)),Ol.push(n)}function B1(n){Rs||(Rs=!0,D1(xh)),Nl.push(n)}function F1(){Ns&&yh(),Rs&&xh()}function j1(n){throw new Error("lifecycle_outside_component")}const Ch=0,$1=1;let Ds=Ch,fo=!1,kr=!1,Rl=!1;function Ah(n){kr=n}function Th(n){Rl=n}let $n=[],wr=0,ve=null;function ti(n){ve=n}let de=null;function Nt(n){de=n}let Ci=null;function H1(n){Ci=n}let yt=null,Ut=0,pn=null;function U1(n){pn=n}let Eh=0,_r=!1,Rt=null;function Sh(){return++Eh}function W1(){return!dh}function bo(n){var e,t,i=n.f;if(i&gn)return!0;if(i&uo){var r=n.deps,o=(i&Fn)!==0;if(r!==null){var s;if(i&Vs){for(s=0;s<r.length;s++)((e=r[s]).reactions??(e.reactions=[])).push(n);n.f^=Vs}for(s=0;s<r.length;s++){var a=r[s];if(bo(a)&&gh(a),o&&de!==null&&!_r&&!((t=a?.reactions)!=null&&t.includes(n))&&(a.reactions??(a.reactions=[])).push(n),a.version>n.version)return!0}}o||Ui(n,Ht)}return!1}function q1(n,e,t){throw n}function Ih(n){var e,t=yt,i=Ut,r=pn,o=ve,s=_r,a=Ci,l=Rt,c=n.f;yt=null,Ut=0,pn=null,ve=c&(di|co)?null:n,_r=!kr&&(c&Fn)!==0,Ci=null,Rt=n.ctx;try{var d=(0,n.fn)(),u=n.deps;if(yt!==null){var h;if(ko(n,Ut),u!==null&&Ut>0)for(u.length=Ut+yt.length,h=0;h<yt.length;h++)u[Ut+h]=yt[h];else n.deps=u=yt;if(!_r)for(h=Ut;h<u.length;h++)((e=u[h]).reactions??(e.reactions=[])).push(n)}else u!==null&&Ut<u.length&&(ko(n,Ut),u.length=Ut);return d}finally{yt=t,Ut=i,pn=r,ve=o,_r=s,Ci=a,Rt=l}}function G1(n,e){let t=e.reactions;if(t!==null){var i=t.indexOf(n);if(i!==-1){var r=t.length-1;r===0?t=e.reactions=null:(t[i]=t[r],t.pop())}}t===null&&e.f&$i&&(yt===null||!yt.includes(e))&&(Ui(e,uo),e.f&(Fn|Vs)||(e.f^=Vs),ko(e,0))}function ko(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)G1(n,t[i])}function Bs(n){var e=n.f;if(!(e&ho)){Ui(n,Ht);var t=de;de=n;try{e&Ms?z1(n):kh(n),bh(n),fh(n);var i=Ih(n);n.teardown=typeof i=="function"?i:null,n.version=Eh}catch(r){q1(r)}finally{de=t}}}function Ph(){wr>1e3&&(wr=0,T1()),wr++}function Mh(n){var e=n.length;if(e!==0){Ph();var t=kr;kr=!0;try{for(var i=0;i<e;i++){var r=n[i];r.f&Ht||(r.f^=Ht);var o=[];Vh(r,o),Z1(o)}}finally{kr=t}}}function Z1(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var i=n[t];!(i.f&(ho|xi))&&bo(i)&&(Bs(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?wh(i):i.fn=null))}}function K1(){if(fo=!1,wr>1001)return;const n=$n;$n=[],Mh(n),fo||(wr=0)}function Fs(n){Ds===Ch&&(fo||(fo=!0,queueMicrotask(K1)));for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(co|di)){if(!(t&Ht))return;e.f^=Ht}}$n.push(e)}function Vh(n,e){var t=n.first,i=[];e:for(;t!==null;){var r=t.f,o=(r&di)!==0,s=o&&(r&Ht)!==0;if(!s&&!(r&xi))if(r&Ps){o?t.f^=Ht:bo(t)&&Bs(t);var a=t.first;if(a!==null){t=a;continue}}else r&oh&&i.push(t);var l=t.next;if(l===null){let u=t.parent;for(;u!==null;){if(n===u)break e;var c=u.next;if(c!==null){t=c;continue e}u=u.parent}}t=l}for(var d=0;d<i.length;d++)a=i[d],e.push(a),Vh(a,e)}function Lh(n){var e=Ds,t=$n;try{Ph();const r=[];Ds=$1,$n=r,fo=!1,Mh(t);var i=n?.();return F1(),($n.length>0||r.length>0)&&Lh(),wr=0,i}finally{Ds=e,$n=t}}function V(n){var e,t=n.f,i=(t&$i)!==0;if(i&&t&ho){var r=mh(n);return Il(n),r}if(ve!==null){Ci!==null&&Ci.includes(n)&&M1();var o=ve.deps;yt===null&&o!==null&&o[Ut]===n?Ut++:yt===null?yt=[n]:yt.push(n),pn!==null&&de!==null&&de.f&Ht&&!(de.f&di)&&pn.includes(n)&&(Ui(de,gn),Fs(de))}else if(i&&n.deps===null){var s=n,a=s.parent;a!==null&&!((e=a.deriveds)!=null&&e.includes(s))&&(a.deriveds??(a.deriveds=[])).push(s)}return i&&(s=n,bo(s)&&gh(s)),n.v}function wo(n){const e=ve;try{return ve=null,n()}finally{ve=e}}const Y1=~(gn|uo|Ht);function Ui(n,e){n.f=n.f&Y1|e}function xt(n,e=!1,t){Rt={p:Rt,c:null,e:null,m:!1,s:n,x:null,l:null}}function Ct(n){const e=Rt;if(e!==null){const s=e.e;if(s!==null){var t=de,i=ve;e.e=null;try{for(var r=0;r<s.length;r++){var o=s[r];Nt(o.effect),ti(o.reaction),br(o.fn)}}finally{Nt(t),ti(i)}}Rt=e.p,e.m=!0}return{}}function Ze(n,e=null,t){if(typeof n!="object"||n===null||fr in n)return n;const i=Tl(n);if(i!==b1&&i!==k1)return n;var r=new Map,o=Cl(n),s=ei(0);o&&r.set("length",ei(n.length));var a;return new Proxy(n,{defineProperty(l,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&I1();var u=r.get(c);return u===void 0?(u=ei(d.value),r.set(c,u)):Ke(u,Ze(d.value,a)),!0},deleteProperty(l,c){var d=r.get(c);if(d===void 0)c in l&&r.set(c,ei($t));else{if(o&&typeof c=="string"){var u=r.get("length"),h=Number(c);Number.isInteger(h)&&h<u.v&&Ke(u,h)}Ke(d,$t),Oh(s)}return!0},get(l,c,d){var u;if(c===fr)return n;var h=r.get(c),g=c in l;if(h===void 0&&(!g||(u=Bn(l,c))!=null&&u.writable)&&(h=ei(Ze(g?l[c]:$t,a)),r.set(c,h)),h!==void 0){var p=V(h);return p===$t?void 0:p}return Reflect.get(l,c,d)},getOwnPropertyDescriptor(l,c){var d=Reflect.getOwnPropertyDescriptor(l,c);if(d&&"value"in d){var u=r.get(c);u&&(d.value=V(u))}else if(d===void 0){var h=r.get(c),g=h?.v;if(h!==void 0&&g!==$t)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(l,c){var d;if(c===fr)return!0;var u=r.get(c),h=u!==void 0&&u.v!==$t||Reflect.has(l,c);if(u!==void 0||de!==null&&(!h||(d=Bn(l,c))!=null&&d.writable)){u===void 0&&(u=ei(h?Ze(l[c],a):$t),r.set(c,u));var g=V(u);if(g===$t)return!1}return h},set(l,c,d,u){var h,g=r.get(c),p=c in l;if(o&&c==="length")for(var f=d;f<g.v;f+=1){var b=r.get(f+"");b!==void 0?Ke(b,$t):f in l&&(b=ei($t),r.set(f+"",b))}g===void 0?(!p||(h=Bn(l,c))!=null&&h.writable)&&(g=ei(void 0),Ke(g,Ze(d,a)),r.set(c,g)):(p=g.v!==$t,Ke(g,Ze(d,a)));var k=Reflect.getOwnPropertyDescriptor(l,c);if(k!=null&&k.set&&k.set.call(u,d),!p){if(o&&typeof c=="string"){var w=r.get("length"),_=Number(c);Number.isInteger(_)&&_>=w.v&&Ke(w,_+1)}Oh(s)}return!0},ownKeys(l){V(s);var c=Reflect.ownKeys(l).filter(h=>{var g=r.get(h);return g===void 0||g.v!==$t});for(var[d,u]of r)u.v!==$t&&!(d in l)&&c.push(d);return c},setPrototypeOf(){P1()}})}function Oh(n,e=1){Ke(n,n.v+e)}function Nh(n){return n!==null&&typeof n=="object"&&fr in n?n[fr]:n}function Q1(n,e){return Object.is(Nh(n),Nh(e))}var Rh,zh,Dh;function zl(){if(Rh===void 0){Rh=window;var n=Element.prototype,e=Node.prototype;zh=Bn(e,"firstChild").get,Dh=Bn(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function vr(n=""){return document.createTextNode(n)}function Hn(n){return zh.call(n)}function Wi(n){return Dh.call(n)}function O(n,e){if(!Ee)return Hn(n);var t=Hn(Le);if(t===null)t=Le.appendChild(vr());else if(e&&t.nodeType!==3){var i=vr();return t?.before(i),ui(i),i}return ui(t),t}function ii(n,e){if(!Ee){var t=Hn(n);return t instanceof Comment&&t.data===""?Wi(t):t}return Le}function X(n,e=1,t=!1){let i=Ee?Le:n;for(;e--;)i=Wi(i);if(!Ee)return i;var r=i.nodeType;if(t&&r!==3){var o=vr();return i?.before(o),ui(o),o}return ui(i),i}function Bh(n){n.textContent=""}let Ee=!1;function qi(n){Ee=n}let Le;function ui(n){if(n===null)throw xl(),ao;return Le=n}function _o(){return ui(Wi(Le))}function P(n){if(Ee){if(Wi(Le)!==null)throw xl(),ao;Le=n}}function J1(n=1){if(Ee){for(var e=n,t=Le;e--;)t=Wi(t);Le=t}}function Dl(){for(var n=0,e=Le;;){if(e.nodeType===8){var t=e.data;if(t===yl){if(n===0)return e;n-=1}else(t===nh||t===vl)&&(n+=1)}var i=Wi(e);e.remove(),e=i}}let Fh=!1;function jh(){Fh||(Fh=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function X1(n){var e=ve,t=de;ti(null),Nt(null);try{return n()}finally{ti(e),Nt(t)}}function $h(n,e,t,i=t){n.addEventListener(e,()=>X1(t));const r=n.__on_r;r?n.__on_r=()=>{r(),i()}:n.__on_r=i,jh()}const Hh=new Set,Bl=new Set;function Pt(n){for(var e=0;e<n.length;e++)Hh.add(n[e]);for(var t of Bl)t(n)}function js(n){var e,t=this,i=t.ownerDocument,r=n.type,o=((e=n.composedPath)==null?void 0:e.call(n))||[],s=o[0]||n.target,a=0,l=n.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(t===document||t===window)){n.__root=t;return}var d=o.indexOf(t);if(d===-1)return;c<=d&&(a=c)}if(s=o[a]||n.target,s!==t){Is(n,"currentTarget",{configurable:!0,get(){return s||i}});var u=ve,h=de;ti(null),Nt(null);try{for(var g,p=[];s!==null;){var f=s.assignedSlot||s.parentNode||s.host||null;try{var b=s["__"+r];if(b!==void 0&&!s.disabled)if(Cl(b)){var[k,...w]=b;k.apply(s,[n,...w])}else b.call(s,n)}catch(_){g?p.push(_):g=_}if(n.cancelBubble||f===t||f===null)break;s=f}if(g){for(let _ of p)queueMicrotask(()=>{throw _});throw g}}finally{n.__root=t,delete n.currentTarget,ti(u),Nt(h)}}}function ev(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function yr(n,e){var t=de;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function U(n,e){var t=(e&g1)!==0,i=(e&p1)!==0,r,o=!n.startsWith("<!>");return()=>{if(Ee)return yr(Le,null),Le;r===void 0&&(r=ev(o?n:"<!>"+n),t||(r=Hn(r)));var s=i?document.importNode(r,!0):r.cloneNode(!0);if(t){var a=Hn(s),l=s.lastChild;yr(a,l)}else yr(s,s);return s}}function xr(){if(Ee)return yr(Le,null),Le;var n=document.createDocumentFragment(),e=document.createComment(""),t=vr();return n.append(e,t),yr(e,t),n}function F(n,e){if(Ee){de.nodes_end=Le,_o();return}n!==null&&n.before(e)}const tv=["touchstart","touchmove"];function iv(n){return tv.includes(n)}let Fl=!0;function $e(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t==null?"":t+"")}function Uh(n,e){return Wh(n,e)}function nv(n,e){zl(),e.intro=e.intro??!1;const t=e.target,i=Ee,r=Le;try{for(var o=Hn(t);o&&(o.nodeType!==8||o.data!==nh);)o=Wi(o);if(!o)throw ao;qi(!0),ui(o),_o();const s=Wh(n,{...e,anchor:o});if(Le===null||Le.nodeType!==8||Le.data!==yl)throw xl(),ao;return qi(!1),s}catch(s){if(s===ao)return e.recover===!1&&E1(),zl(),Bh(t),qi(!1),Uh(n,e);throw s}finally{qi(i),ui(r)}}const Cr=new Map;function Wh(n,{target:e,anchor:t,props:i={},events:r,context:o,intro:s=!0}){zl();var a=new Set,l=u=>{for(var h=0;h<u.length;h++){var g=u[h];if(!a.has(g)){a.add(g);var p=iv(g);e.addEventListener(g,js,{passive:p});var f=Cr.get(g);f===void 0?(document.addEventListener(g,js,{passive:p}),Cr.set(g,1)):Cr.set(g,f+1)}}};l(Al(Hh)),Bl.add(l);var c=void 0,d=ph(()=>{var u=t??e.appendChild(vr());return po(()=>{if(o){xt({});var h=Rt;h.c=o}r&&(i.$$events=r),Ee&&yr(u,null),Fl=s,c=n(u,i)||{},Fl=!0,Ee&&(de.nodes_end=Le),o&&Ct()}),()=>{var h;for(var g of a){e.removeEventListener(g,js);var p=Cr.get(g);--p===0?(document.removeEventListener(g,js),Cr.delete(g)):Cr.set(g,p)}Bl.delete(l),jl.delete(c),u!==t&&((h=u.parentNode)==null||h.removeChild(u))}});return jl.set(c,d),c}let jl=new WeakMap;function rv(n){const e=jl.get(n);e&&e()}function Oe(n,e,t,i=null,r=!1){Ee&&_o();var o=n,s=null,a=null,l=null,c=r?Ls:0;Ml(()=>{if(l===(l=!!e()))return;let d=!1;if(Ee){const u=o.data===vl;l===u&&(o=Dl(),ui(o),qi(!1),d=!0)}l?(s?Os(s):s=po(()=>t(o)),a&&Vl(a,()=>{a=null})):(a?Os(a):i&&(a=po(()=>i(o))),s&&Vl(s,()=>{s=null})),d&&qi(!0)},c),Ee&&(o=Le)}function at(n,e){return e}function ov(n,e,t,i){for(var r=[],o=e.length,s=0;s<o;s++)Ll(e[s].e,r,!0);var a=o>0&&r.length===0&&t!==null;if(a){var l=t.parentNode;Bh(l),l.append(t),i.clear(),fn(n,e[0].prev,e[o-1].next)}_h(r,()=>{for(var c=0;c<o;c++){var d=e[c];a||(i.delete(d.k),fn(n,d.prev,d.next)),jn(d.e,!a)}})}function lt(n,e,t,i,r,o=null){var s=n,a={flags:e,items:new Map,first:null},l=(e&ih)!==0;if(l){var c=n;s=Ee?ui(Hn(c)):c.appendChild(vr())}Ee&&_o();var d=null,u=!1;Ml(()=>{var h=t(),g=Cl(h)?h:h==null?[]:Al(h),p=g.length;if(u&&p===0)return;u=p===0;let f=!1;if(Ee){var b=s.data===vl;b!==(p===0)&&(s=Dl(),ui(s),qi(!1),f=!0)}if(Ee){for(var k=null,w,_=0;_<p;_++){if(Le.nodeType===8&&Le.data===yl){s=Le,f=!0,qi(!1);break}var y=g[_],x=i(y,_);w=qh(Le,a,k,null,y,x,_,r,e),a.items.set(x,w),k=w}p>0&&ui(Dl())}if(!Ee){var A=ve;sv(g,a,s,r,e,(A.f&xi)!==0,i)}o!==null&&(p===0?d?Os(d):d=po(()=>o(s)):d!==null&&Vl(d,()=>{d=null})),f&&qi(!0),t()}),Ee&&(s=Le)}function sv(n,e,t,i,r,o,s){var a,l,c,d,u=(r&a1)!==0,h=(r&(wl|_l))!==0,g=n.length,p=e.items,f=e.first,b=f,k,w=null,_,y=[],x=[],A,I,M,D;if(u)for(D=0;D<g;D+=1)A=n[D],I=s(A,D),M=p.get(I),M!==void 0&&((a=M.a)==null||a.measure(),(_??(_=new Set)).add(M));for(D=0;D<g;D+=1){if(A=n[D],I=s(A,D),M=p.get(I),M===void 0){var fe=b?b.e.nodes_start:t;w=qh(fe,e,w,w===null?e.first:w.next,A,I,D,i,r),p.set(I,w),y=[],x=[],b=w.next;continue}if(h&&av(M,A,D,r),M.e.f&xi&&(Os(M.e),u&&((l=M.a)==null||l.unfix(),(_??(_=new Set)).delete(M))),M!==b){if(k!==void 0&&k.has(M)){if(y.length<x.length){var De=x[0],ce;w=De.prev;var ut=y[0],re=y[y.length-1];for(ce=0;ce<y.length;ce+=1)Gh(y[ce],De,t);for(ce=0;ce<x.length;ce+=1)k.delete(x[ce]);fn(e,ut.prev,re.next),fn(e,w,ut),fn(e,re,De),b=De,w=re,D-=1,y=[],x=[]}else k.delete(M),Gh(M,b,t),fn(e,M.prev,M.next),fn(e,M,w===null?e.first:w.next),fn(e,w,M),w=M;continue}for(y=[],x=[];b!==null&&b.k!==I;)(o||!(b.e.f&xi))&&(k??(k=new Set)).add(b),x.push(b),b=b.next;if(b===null)continue;M=b}y.push(M),w=M,b=M.next}if(b!==null||k!==void 0){for(var Ue=k===void 0?[]:Al(k);b!==null;)(o||!(b.e.f&xi))&&Ue.push(b),b=b.next;var ht=Ue.length;if(ht>0){var Jt=r&ih&&g===0?t:null;if(u){for(D=0;D<ht;D+=1)(c=Ue[D].a)==null||c.measure();for(D=0;D<ht;D+=1)(d=Ue[D].a)==null||d.fix()}ov(e,Ue,Jt,p)}}u&&zs(()=>{var We;if(_!==void 0)for(M of _)(We=M.a)==null||We.apply()}),de.first=e.first&&e.first.e,de.last=w&&w.e}function av(n,e,t,i){i&wl&&Sl(n.v,e),i&_l?Sl(n.i,t):n.i=t}function qh(n,e,t,i,r,o,s,a,l){var c=(l&wl)!==0,d=(l&l1)===0,u=c?d?El(r):ei(r):r,h=l&_l?ei(s):s,g={i:h,v:u,k:o,a:null,e:null,prev:t,next:i};try{return g.e=po(()=>a(n,u,h),Ee),g.e.prev=t&&t.e,g.e.next=i&&i.e,t===null?e.first=g:(t.next=g,t.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function Gh(n,e,t){for(var i=n.next?n.next.e.nodes_start:t,r=e?e.e.nodes_start:t,o=n.e.nodes_start;o!==i;){var s=Wi(o);r.before(o),o=s}}function fn(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function $l(n,e,t,i,r){var o;Ee&&_o();var s=(o=e.$$slots)==null?void 0:o[t],a=!1;s===!0&&(s=e.children,a=!0),s===void 0||s(n,a?()=>i:i)}function tt(n,e){zs(()=>{var t=n.getRootNode(),i=t.host?t:t.head??t.ownerDocument.head;if(!i.querySelector("#"+e.hash)){const r=document.createElement("style");r.id=e.hash,r.textContent=e.code,i.appendChild(r)}})}function $s(n){if(Ee){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var i=n.value;he(n,"value",null),n.value=i}if(n.hasAttribute("checked")){var r=n.checked;he(n,"checked",null),n.checked=r}}};n.__on_r=t,B1(t),jh()}}function he(n,e,t,i){var r=n.__attributes??(n.__attributes={});Ee&&(r[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||r[e]!==(r[e]=t)&&(e==="style"&&"__styles"in n&&(n.__styles={}),e==="loading"&&(n[v1]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Kh(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Hl(n,e,t){var i=ve,r=de;ti(null),Nt(null);try{Kh(n).includes(e)?n[e]=t:he(n,e,t)}finally{ti(i),Nt(r)}}var Zh=new Map;function Kh(n){var e=Zh.get(n.nodeName);if(e)return e;Zh.set(n.nodeName,e=[]);for(var t,i=Tl(n),r=Element.prototype;r!==i;){t=f1(i);for(var o in t)t[o].set&&e.push(o);i=Tl(i)}return e}function vo(n,e){var t=n.__className,i=lv(e);Ee&&n.className===i?n.__className=i:(t!==i||Ee&&n.className!==i)&&(e==null?n.removeAttribute("class"):n.className=i,n.__className=i)}function lv(n){return n??""}function Ar(n,e,t){if(t){if(n.classList.contains(e))return;n.classList.add(e)}else{if(!n.classList.contains(e))return;n.classList.remove(e)}}const cv=()=>performance.now(),bn={tick:n=>requestAnimationFrame(n),now:()=>cv(),tasks:new Set};function Yh(n){bn.tasks.forEach(e=>{e.c(n)||(bn.tasks.delete(e),e.f())}),bn.tasks.size!==0&&bn.tick(Yh)}function dv(n){let e;return bn.tasks.size===0&&bn.tick(Yh),{promise:new Promise(t=>{bn.tasks.add(e={c:n,f:t})}),abort(){bn.tasks.delete(e)}}}function Hs(n,e){n.dispatchEvent(new CustomEvent(e))}function uv(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Qh(n){const e={},t=n.split(";");for(const i of t){const[r,o]=i.split(":");if(!r||o===void 0)break;const s=uv(r.trim());e[s]=o.trim()}return e}const hv=n=>n;function mv(n,e,t,i){var r=(n&m1)!==0,o="both",s,a=e.inert,l,c;function d(){var f=ve,b=de;ti(null),Nt(null);try{return s??(s=t()(e,i?.()??{},{direction:o}))}finally{ti(f),Nt(b)}}var u={is_global:r,in(){e.inert=a,Hs(e,"introstart"),l=Ul(e,d(),c,1,()=>{Hs(e,"introend"),l?.abort(),l=s=void 0})},out(f){e.inert=!0,Hs(e,"outrostart"),c=Ul(e,d(),l,0,()=>{Hs(e,"outroend"),f?.()})},stop:()=>{l?.abort(),c?.abort()}},h=de;if((h.transitions??(h.transitions=[])).push(u),Fl){var g=r;if(!g){for(var p=h.parent;p&&p.f&Ls;)for(;(p=p.parent)&&!(p.f&Ms););g=!p||(p.f&sh)!==0}g&&br(()=>{wo(()=>u.in())})}}function Ul(n,e,t,i,r){var o=i===1;if(w1(e)){var s,a=!1;return zs(()=>{if(!a){var b=e({direction:o?"in":"out"});s=Ul(n,b,t,i,r)}}),{abort:()=>{a=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(t?.deactivate(),!(e!=null&&e.duration))return r(),{abort:lo,deactivate:lo,reset:lo,t:()=>i};const{delay:l=0,css:c,tick:d,easing:u=hv}=e;var h=[];if(o&&t===void 0&&(d&&d(0,1),c)){var g=Qh(c(0,1));h.push(g,g)}var p=()=>1-i,f=n.animate(h,{duration:l});return f.onfinish=()=>{var b=t?.t()??1-i;t?.abort();var k=i-b,w=e.duration*Math.abs(k),_=[];if(w>0){if(c)for(var y=Math.ceil(w/16.666666666666668),x=0;x<=y;x+=1){var A=b+k*u(x/y),I=c(A,1-A);_.push(Qh(I))}p=()=>{var M=f.currentTime;return b+k*u(M/w)},d&&dv(()=>{if(f.playState!=="running")return!1;var M=p();return d(M,1-M),!0})}f=n.animate(_,{duration:w,fill:"forwards"}),f.onfinish=()=>{p=()=>i,d?.(i,1-i),r()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=lo)},deactivate:()=>{r=lo},reset:()=>{i===0&&d?.(1,0)},t:()=>p()}}function Us(n,e,t=e){$h(n,"input",()=>{var i=Jh(n)?Xh(n.value):n.value;t(i),i!==(i=e())&&(n.value=i??"")}),Pl(()=>{var i=e();if(Ee&&n.defaultValue!==n.value){t(n.value);return}Jh(n)&&i===Xh(n.value)||n.type==="date"&&!i&&!n.value||i!==n.value&&(n.value=i??"")})}function Jh(n){var e=n.type;return e==="number"||e==="range"}function Xh(n){return n===""?null:+n}function em(n,e,t){if(n.multiple)return pv(n,e);for(var i of n.options){var r=yo(i);if(Q1(r,e)){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function gv(n,e){br(()=>{var t=new MutationObserver(()=>{var i=n.__value;em(n,i)});return t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function tm(n,e,t=e){var i=!0;$h(n,"change",()=>{var r;if(n.multiple)r=[].map.call(n.querySelectorAll(":checked"),yo);else{var o=n.querySelector(":checked");r=o&&yo(o)}t(r)}),br(()=>{var r=e();if(em(n,r,i),i&&r===void 0){var o=n.querySelector(":checked");o!==null&&(r=yo(o),t(r))}n.__value=r,i=!1}),gv(n)}function pv(n,e){for(var t of n.options)t.selected=~e.indexOf(yo(t))}function yo(n){return"__value"in n?n.__value:n.value}function im(n,e){return n===e||n?.[fr]===e}function nm(n={},e,t,i){return br(()=>{var r,o;return Pl(()=>{r=o,o=i?.()||[],wo(()=>{n!==t(...o)&&(e(n,...o),r&&im(t(...r),n)&&e(null,...r))})}),()=>{zs(()=>{o&&im(t(...o),n)&&e(null,...o)})}}),n}function fv(n){Rt===null&&j1(),R1(()=>{const e=wo(n);if(typeof e=="function")return e})}let Ws=!1;function bv(n){var e=Ws;try{return Ws=!1,[n(),Ws]}finally{Ws=e}}function kv(n){for(var e=de,t=de;e!==null&&!(e.f&(di|co));)e=e.parent;try{return Nt(e),n()}finally{Nt(t)}}function j(n,e,t,i){var r,o=(t&c1)!==0,s=!dh,a=(t&u1)!==0,l=(t&h1)!==0,c=!1,d;a?[d,c]=bv(()=>n[e]):d=n[e];var u=(r=Bn(n,e))==null?void 0:r.set,h=i,g=!0,p=!1,f=()=>(p=!0,g&&(g=!1,l?h=wo(i):h=i),h);d===void 0&&i!==void 0&&(u&&s&&S1(),d=f(),u&&u(d));var b;if(b=()=>{var A=n[e];return A===void 0?f():(g=!0,p=!1,A)},!(t&d1))return b;if(u){var k=n.$$legacy;return function(A,I){return arguments.length>0?((!I||k||c)&&u(I?b():A),A):b()}}var w=!1,_=!1,y=El(d),x=kv(()=>mo(()=>{var A=b(),I=V(y);return w?(w=!1,_=!0,I):(_=!1,y.v=A)}));return o||(x.equals=ch),function(A,I){if(arguments.length>0){const M=I?V(x):a?Ze(A):A;return x.equals(M)||(w=!0,Ke(y,M),p&&h!==void 0&&(h=M),wo(()=>V(x))),A}return V(x)}}function wv(n){return new _v(n)}var kn,hi;class _v{constructor(e){eh(this,kn),eh(this,hi);var t,i=new Map,r=(s,a)=>{var l=El(a);return i.set(s,l),l};const o=new Proxy({...e.props||{},$$events:{}},{get(s,a){return V(i.get(a)??r(a,Reflect.get(s,a)))},has(s,a){return V(i.get(a)??r(a,Reflect.get(s,a))),Reflect.has(s,a)},set(s,a,l){return Ke(i.get(a)??r(a,l),l),Reflect.set(s,a,l)}});th(this,hi,(e.hydrate?nv:Uh)(e.component,{target:e.target,anchor:e.anchor,props:o,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((t=e?.props)!=null&&t.$$host)||e.sync===!1)&&Lh(),th(this,kn,o.$$events);for(const s of Object.keys(jt(this,hi)))s==="$set"||s==="$destroy"||s==="$on"||Is(this,s,{get(){return jt(this,hi)[s]},set(a){jt(this,hi)[s]=a},enumerable:!0});jt(this,hi).$set=s=>{Object.assign(o,s)},jt(this,hi).$destroy=()=>{rv(jt(this,hi))}}$set(e){jt(this,hi).$set(e)}$on(e,t){jt(this,kn)[e]=jt(this,kn)[e]||[];const i=(...r)=>t.call(this,...r);return jt(this,kn)[e].push(i),()=>{jt(this,kn)[e]=jt(this,kn)[e].filter(r=>r!==i)}}$destroy(){jt(this,hi).$destroy()}}kn=new WeakMap,hi=new WeakMap;let rm;typeof HTMLElement=="function"&&(rm=class extends HTMLElement{constructor(n,e,t){super(),m(this,"$$ctor"),m(this,"$$s"),m(this,"$$c"),m(this,"$$cn",!1),m(this,"$$d",{}),m(this,"$$r",!1),m(this,"$$p_d",{}),m(this,"$$l",{}),m(this,"$$l_u",new Map),m(this,"$$me"),this.$$ctor=n,this.$$s=e,t&&this.attachShadow({mode:"open"})}addEventListener(n,e,t){if(this.$$l[n]=this.$$l[n]||[],this.$$l[n].push(e),this.$$c){const i=this.$$c.$on(n,e);this.$$l_u.set(e,i)}super.addEventListener(n,e,t)}removeEventListener(n,e,t){if(super.removeEventListener(n,e,t),this.$$c){const i=this.$$l_u.get(e);i&&(i(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let n=function(i){return r=>{const o=document.createElement("slot");i!=="default"&&(o.name=i),F(r,o)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const e={},t=vv(this);for(const i of this.$$s)i in t&&(i==="default"&&!this.$$d.children?(this.$$d.children=n(i),e.default=!0):e[i]=n(i));for(const i of this.attributes){const r=this.$$g_p(i.name);r in this.$$d||(this.$$d[r]=qs(r,i.value,this.$$p_d,"toProp"))}for(const i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=wv({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$host:this}}),this.$$me=ph(()=>{Pl(()=>{var i;this.$$r=!0;for(const r of Ss(this.$$c)){if(!((i=this.$$p_d[r])!=null&&i.reflect))continue;this.$$d[r]=this.$$c[r];const o=qs(r,this.$$d[r],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,o)}this.$$r=!1})});for(const i in this.$$l)for(const r of this.$$l[i]){const o=this.$$c.$on(i,r);this.$$l_u.set(r,o)}this.$$l={}}}attributeChangedCallback(n,e,t){var i;this.$$r||(n=this.$$g_p(n),this.$$d[n]=qs(n,t,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[n]:this.$$d[n]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(n){return Ss(this.$$p_d).find(e=>this.$$p_d[e].attribute===n||!this.$$p_d[e].attribute&&e.toLowerCase()===n)||n}});function qs(n,e,t,i){var r;const o=(r=t[n])==null?void 0:r.type;if(e=o==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[n])return e;if(i==="toAttribute")switch(o){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(o){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function vv(n){const e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}function it(n,e,t,i,r,o){let s=class extends rm{constructor(){super(n,t,r),this.$$p_d=e}static get observedAttributes(){return Ss(e).map(a=>(e[a].attribute||a).toLowerCase())}};return Ss(e).forEach(a=>{Is(s.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(l){var c;l=qs(a,l,e),this.$$d[a]=l;var d=this.$$c;if(d){var u=(c=Bn(d,a))==null?void 0:c.get;u?d[a]=l:d.$set({[a]:l})}}})}),i.forEach(a=>{Is(s.prototype,a,{get(){var l;return(l=this.$$c)==null?void 0:l[a]}})}),n.element=s,s}var yv=U('<button type="button"><!></button>');const xv={hash:"svelte-1bto172",code:".button.svelte-1bto172 {display:inline-block;cursor:pointer;border:0;margin-left:14px;border-radius:3em;font-weight:700;line-height:1;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;}.button--primary.svelte-1bto172 {background-color:#1ea7fd;color:white;}.button--secondary.svelte-1bto172 {box-shadow:rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;background-color:transparent;color:#333;}.button--small.svelte-1bto172 {padding:10px 16px;font-size:12px;}.button--medium.svelte-1bto172 {padding:11px 20px;font-size:14px;}.button--large.svelte-1bto172 {padding:12px 24px;font-size:16px;}"};function om(n,e){tt(n,xv);const t=j(e,"type",3,"primary"),i=j(e,"size",3,"medium");j(e,"label",3,"Button");const r=j(e,"onClick",3,void 0);var o=yv();o.__click=function(...a){var l;(l=r())==null||l.apply(this,a)};var s=O(o);$l(s,e,"default",{}),P(o),ae(()=>vo(o,`${"button button--"+i()+" button--"+t()} svelte-1bto172`)),F(n,o)}Pt(["click"]),customElements.define("ing-button",it(om,{type:{},size:{},label:{},onClick:{}},["default"],[],!0));var Cv=U('<button type="button"><!></button>');const Av={hash:"svelte-1c7d33o",code:".button.svelte-1c7d33o {cursor:pointer;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;color:#fff;background-color:#1f2937;border-color:#1f2937;box-shadow:inset 0 1px 0 rgba(255, 255, 255, .15), 0 1px 1px rgba(17, 24, 39, .075);font-weight:500;line-height:1.5;text-align:center;vertical-align:middle;user-select:none;border:.0625rem solid transparent;padding:.5rem 1rem;font-size:.875rem 14px;border-radius:.5rem;transition:color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;}.button.svelte-1c7d33o:focus {color:#fff;background-color:#2f3745;border-color:#2c3441;box-shadow:inset 0 1px 0 rgba(255,255,255,.15),0 1px 1px rgba(17,24,39,.075),0 0 0 .18rem rgba(85,94,107,.5);}.button.svelte-1c7d33o:hover {color:#fff;background-color:#1a232f;border-color:#19212c;}.button--small.svelte-1c7d33o {padding:10px 16px;font-size:14px;}.button--medium.svelte-1c7d33o {padding:11px 20px;font-size:14px;}.button--large.svelte-1c7d33o {padding:12px 24px;font-size:16px;}"};function sm(n,e){tt(n,Av),j(e,"type",3,"primary");const t=j(e,"size",3,"medium");j(e,"label",3,"Button");const i=j(e,"onClick",3,void 0);var r=Cv();r.__click=function(...s){var a;(a=i())==null||a.apply(this,s)};var o=O(r);$l(o,e,"default",{}),P(r),ae(()=>vo(r,`${"button button--"+t()} svelte-1c7d33o`)),F(n,r)}Pt(["click"]),customElements.define("ing-button-gray",it(sm,{type:{},size:{},label:{},onClick:{}},["default"],[],!0));var Tv=U('<div class="input_label svelte-1hyy719"> </div>'),Ev=U('<span class="input_icon svelte-1hyy719"><img width="16px" alt="in"></span>'),Sv=(n,e)=>{e(n)},Iv=U('<div class="input_frame svelte-1hyy719"><!> <div class="input_box svelte-1hyy719"><!> <input class="input_field svelte-1hyy719"></div></div>');const Pv={hash:"svelte-1hyy719",code:`.input_frame.svelte-1hyy719 {padding-right:24px;margin-bottom:14px;}.input_label.svelte-1hyy719 {margin-bottom:6px;}.input_box.svelte-1hyy719 {display:flex;color:#4a5073;background-color:#fff;border:0.0625rem solid #d1d7e0;border-radius:0.5rem;
    /* padding-right: 14px; */}.input_icon.svelte-1hyy719 {width:32px;position:relative;top:12px;left:9px;}.input_field.svelte-1hyy719 {box-shadow:none;width:280px;border:0.0625rem solid #d1d7e0;color:#66799e;background-color:transparent;background-clip:padding-box;appearance:none;border:transparent;height:40px;font-size:16px;border-style:none;border-radius:0.5rem;margin-left:4px;margin-right:8px;width:98%;}.input_field.svelte-1hyy719:focus {outline:none;}`};function Gs(n,e){xt(e,!0),tt(n,Pv);let t=j(e,"inputId",3,""),i=j(e,"label",3,""),r=j(e,"icon",3,""),o=j(e,"type",3,"text"),s=j(e,"placeholder",3,""),a=j(e,"input",15,""),l=j(e,"inputStyle",3,"");const c=f=>{if(f&&f.target&&e.$$host){let b="";f.target.value&&(b=f.target.value),e.$$host.innerText=b,document.dispatchEvent(new CustomEvent("InputChangedEvent",{detail:{id:e.$$host.id,input:b}})),e.$$host.dispatchEvent(new CustomEvent("inputchanged",{detail:{input:b}}))}};var d=Iv(),u=O(d);Oe(u,i,f=>{var b=Tv(),k=O(b,!0);P(b),ae(()=>$e(k,i())),F(f,b)});var h=X(u,2),g=O(h);Oe(g,r,f=>{var b=Ev(),k=O(b);P(b),ae(()=>he(k,"src",r())),F(f,b)});var p=X(g,2);$s(p),p.__input=[Sv,c],P(h),P(d),ae(()=>{he(d,"style",l()),he(p,"id",t()),he(p,"type",o()),he(p,"placeholder",s())}),Us(p,a),F(n,d),Ct()}Pt(["input"]),customElements.define("ing-input",it(Gs,{input:{reflect:!0},inputId:{},label:{},icon:{},type:{},placeholder:{},inputStyle:{}},[],[],!0));var Mv=U('<a class="svelte-hcumdc"> </a>'),Vv=(n,e,t)=>e(V(t).event),Lv=U('<button class="menu_item_button svelte-hcumdc"> </button>'),Ov=U('<div class="menu_item svelte-hcumdc"><!></div>'),Nv=U('<div class="menu_frame svelte-hcumdc"><div class="arrow svelte-hcumdc"></div> <div class="menu svelte-hcumdc"></div></div>');const Rv={hash:"svelte-hcumdc",code:'.menu_frame.svelte-hcumdc {position:fixed;top:"57px";left:calc(100vw-24);min-width:200px;min-height:200px;max-width:180px;background:#fff;box-shadow:#00000026 0 2px 10px;border:1px solid rgb(242, 242, 242);z-index:6;}.arrow.svelte-hcumdc {position:relative;top:-31px;left:163px;border:1px solid rgb(242, 242, 242);box-shadow:#00000026 -1px -1px 1px -1px;transform:rotate(45deg) translate(16px, 16px);background:#fff;height:14px;width:14px;display:block;content:"";pointer-events:none;z-index:1;}.menu.svelte-hcumdc {position:relative;top:-16px;background:#fff;min-height:140px;z-index:2;padding:14px;}.menu_item.svelte-hcumdc {height:14px;width:100%;font-size:18px;padding-bottom:12px;color:gray;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):link {text-decoration:none;color:gray;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):visited {text-decoration:none;color:#222;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):hover {text-decoration:none;color:darkgray}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):active {text-decoration:none;}.menu_item_button.svelte-hcumdc {background-color:transparent;border:0px;font-size:16px;}.menu_item_button.svelte-hcumdc:hover {color:gray;cursor:pointer;}'};function Wl(n,e){xt(e,!0),tt(n,Rv);let t=j(e,"position",19,()=>({})),i=j(e,"menuItems",19,()=>[]);function r(a){e.$$host&&a&&document.dispatchEvent(new CustomEvent(a,{detail:{}}))}var o=Nv(),s=X(O(o),2);lt(s,21,i,at,(a,l)=>{var c=Ov(),d=O(c);Oe(d,()=>V(l).url,u=>{var h=Mv(),g=O(h,!0);P(h),ae(()=>{he(h,"href",V(l).url),$e(g,V(l).title)}),F(u,h)},u=>{var h=Lv();h.__click=[Vv,r,l];var g=O(h,!0);P(h),ae(()=>$e(g,V(l).title)),F(u,h)}),P(c),F(a,c)}),P(s),P(o),ae(()=>he(o,"style",`top: ${t().top}; left: ${t().left};`)),F(n,o),Ct()}Pt(["click"]),customElements.define("mv-elegant-dropdown",it(Wl,{position:{},menuItems:{}},[],[],!0));var zv=U('<img class="msg_icon svelte-lg722a" alt="alerts"> <span class="msg_new svelte-lg722a"></span>',1),Dv=(n,e)=>{Ke(e,!V(e))},Bv=U('<span class="user svelte-lg722a"><!> <button class="user_button svelte-lg722a"><img class="user_icon svelte-lg722a" alt="profile"> <span class="user_name svelte-lg722a"> </span></button></span> <!>',1),Fv=U("<span></span>"),jv=U('<div class="header svelte-lg722a"><div style="width: 364px;"><!> <span></span></div> <div><!></div></div>');const $v={hash:"svelte-lg722a",code:'.header.svelte-lg722a {display:flex;justify-content:space-between;align-items:center;padding:26px 20px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}.msg_icon.svelte-lg722a {width:20px;margin-right:22px;}.msg_new.svelte-lg722a {background-color:red;height:7px;width:7px;border-radius:50% !important;position:relative;top:4px;left:-22px;}.user.svelte-lg722a {display:flex;position:relative;top:-6px;}.user_button.svelte-lg722a {display:flex;background-color:transparent;border:0px;}.user_button.svelte-lg722a:hover {cursor:pointer;}.user_name.svelte-lg722a {padding-top:12px;padding-left:8px;}.user_icon.svelte-lg722a {border-radius:50% !important;width:40px;}'};function ql(n,e){xt(e,!0),tt(n,$v),j(e,"title",3,"Apint.org");const t=j(e,"searchicon",3,""),i=j(e,"notificationicon",3,""),r=j(e,"supportuser",3,!1),o=j(e,"username",3,""),s=j(e,"userpic",3,"");let a="",l=Hi(!1),c=Hi(void 0);function d(){let k={},w;if(V(c)&&(w=V(c)),w){var _=w.getBoundingClientRect();k.top=(_.top+_.height+12).toString()+"px",k.left=(_.left-115).toString()+"px",console.log(k)}return k}var u=jv(),h=O(u),g=O(h);Gs(g,{get icon(){return t()},placeholder:"Search",input:a});var p=X(g,2);p.textContent=a,P(h);var f=X(h,2),b=O(f);Oe(b,r,k=>{var w=Bv(),_=ii(w),y=O(_);Oe(y,i,fe=>{var De=zv(),ce=ii(De);J1(2),ae(()=>he(ce,"src",i())),F(fe,De)});var x=X(y,2);x.__click=[Dv,l];var A=O(x),I=X(A,2),M=O(I,!0);P(I),P(x),nm(x,fe=>Ke(c,fe),()=>V(c)),P(_);var D=X(_,2);Oe(D,()=>V(l),fe=>{var De=mo(d);Wl(fe,{menuItems:[{title:"Sign out",event:"SignOutEvent"}],get position(){return V(De)}})}),ae(()=>{he(A,"src",s()),$e(M,o())}),F(k,w)},k=>{var w=xr(),_=ii(w);Oe(_,r,y=>{var x=Fv();F(y,x)},null,!0),F(k,w)}),P(f),P(u),F(n,u),Ct()}Pt(["click"]),customElements.define("ing-headerlite",it(ql,{title:{},searchicon:{},notificationicon:{},supportuser:{},username:{},userpic:{}},[],[],!0));function Hv(n){const e=n-1;return e*e*e+1}function Uv(n,{delay:e=0,duration:t=400,easing:i=Hv,axis:r="y"}={}){const o=getComputedStyle(n),s=+o.opacity,a=r==="y"?"height":"width",l=parseFloat(o[a]),c=r==="y"?["top","bottom"]:["left","right"],d=c.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),u=parseFloat(o[`padding${d[0]}`]),h=parseFloat(o[`padding${d[1]}`]),g=parseFloat(o[`margin${d[0]}`]),p=parseFloat(o[`margin${d[1]}`]),f=parseFloat(o[`border${d[0]}Width`]),b=parseFloat(o[`border${d[1]}Width`]);return{delay:e,duration:t,easing:i,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*s};${a}: ${k*l}px;padding-${c[0]}: ${k*u}px;padding-${c[1]}: ${k*h}px;margin-${c[0]}: ${k*g}px;margin-${c[1]}: ${k*p}px;border-${c[0]}-width: ${k*f}px;border-${c[1]}-width: ${k*b}px;`}}function Wv(n){return n}var qv=(n,e,t)=>e(V(t).title),Gv=U('<img alt="option" width="18px">'),Zv=U('<svg width="18px" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-pie" class="svg-inline--fa fa-chart-pie fa-w-17 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 544 512"><path fill="currentColor" d="M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"></path></svg>'),Kv=U('<span><svg class="icon icon-sm" fill="#fff" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></span>'),Yv=(n,e,t)=>e(V(t).title),Qv=U('<a><span><span class="menu_item_icon svelte-v1mgvt"></span> <span class="menu_item_text"> </span></span></a>'),Jv=U('<div class="menu_item_frame svelte-v1mgvt"></div>'),Xv=U('<a><span><span class="menu_item_icon svelte-v1mgvt"><!></span> <span class="menu_item_text"> </span> <!></span></a> <!>',1),ey=U('<div class="outer_frame svelte-v1mgvt"><div class="left_menu svelte-v1mgvt"><div class="menu_frame svelte-v1mgvt"></div></div> <div class="right_panel svelte-v1mgvt"><!> <div class="right_panel_content svelte-v1mgvt"><!></div></div></div>');const ty={hash:"svelte-v1mgvt",code:`a.svelte-v1mgvt:link {text-decoration:none;}a.svelte-v1mgvt:visited {text-decoration:none;color:#eaedf2;}a.svelte-v1mgvt:hover {text-decoration:none;color:#eaedf2;}a.svelte-v1mgvt:active {text-decoration:none;}.outer_frame.svelte-v1mgvt {position:fixed;left:0px;top:0px;display:flex;height:100vh;width:100vw;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}.left_menu.svelte-v1mgvt {display:flex;flex-flow:row nowrap;width:260px !important;min-width:260px;height:100%;background-color:#262b40 !important;color:#eaedf2;}.menu_frame.svelte-v1mgvt {margin:20px 30px 20px 30px;width:100%;}.menu_item.svelte-v1mgvt {display:block;width:100%;text-align:left;padding:10px 0px;color:#eaedf2;border-radius:.5rem;margin-bottom:8px;border:.0625rem solid transparent;}.menu_item.svelte-v1mgvt:hover {background-color:#2e3650;}.menu_item_active.svelte-v1mgvt {background-color:#2e3650;border:.0625rem solid #4c5680;}.menu_item_icon.svelte-v1mgvt {display:inline-block;margin-left:12px;margin-right:.5rem;color:#fff;position:relative;top:3px;width:18px;}.menu_item_expand.svelte-v1mgvt {float:right;width:22px;}.expanded.svelte-v1mgvt {position:relative;
    /* left: -4px; */
    /* top: -2px; */transform:rotate(90deg) translateX(-2px) translateY(4px);transition:all 0.2s ease;}.menu_item_frame.svelte-v1mgvt {width:100%;}.right_panel.svelte-v1mgvt {color:#4a5073;background-color:#f5f8fb;flex:auto;height:100%;overflow-y:auto;}.right_panel_content.svelte-v1mgvt {padding:0px 20px;}`};function am(n,e){xt(e,!0),tt(n,ty),j(e,"title",3,"Mapp"),j(e,"icon",3,"");let t=j(e,"searchicon",3,""),i=j(e,"notificationicon",3,""),r=j(e,"supportuser",3,!0),o=j(e,"username",3,""),s=j(e,"userpic",3,""),a=j(e,"activeitem",3,""),l=j(e,"menuconfig",7,void 0);typeof l()=="string"&&l(JSON.parse(l()));let c=Ze({});if(a()){c[a()]=!0;for(let w of l().items)if(w.subitems){for(let _ of w.subitems)if(_.title==a()){c[w.title]=!0;break}}}let d=w=>{let _=l().items.find(y=>y.title===w);c[w]?_&&(!_.url||_.url==="#")&&(c[w]=!c[w]):c[w]=!0};var u=ey(),h=O(u),g=O(h);lt(g,21,()=>l().items,at,(w,_)=>{var y=Xv(),x=ii(y);x.__click=[qv,d,_];var A=O(x),I=O(A),M=O(I);Oe(M,()=>V(_).icon,ut=>{var re=Gv();ae(()=>he(re,"src",V(_).icon)),F(ut,re)},ut=>{var re=Zv();F(ut,re)}),P(I);var D=X(I,2),fe=O(D,!0);P(D);var De=X(D,2);Oe(De,()=>V(_).subitems,ut=>{var re=Kv();ae(()=>vo(re,`${(c[V(_).title]?"menu_item_expand expanded":"menu_item_expand")??""} svelte-v1mgvt`)),F(ut,re)}),P(A),P(x);var ce=X(x,2);Oe(ce,()=>c[V(_).title]&&V(_).subitems,ut=>{var re=Jv();lt(re,21,()=>V(_).subitems,at,(Ue,ht)=>{var Jt=Qv();Jt.__click=[Yv,d,ht];var We=O(Jt),hn=X(O(We),2),pr=O(hn,!0);P(hn),P(We),P(Jt),ae(()=>{he(Jt,"href",V(ht).url),vo(Jt,`${(V(ht).title==a()?"menu_item menu_item_active":"menu_item")??""} svelte-v1mgvt`),$e(pr,V(ht).title)}),F(Ue,Jt)}),P(re),mv(3,re,()=>Uv,()=>({duration:300,easing:Wv})),F(ut,re)}),ae(()=>{he(x,"href",V(_).url),vo(x,`${(V(_).title==a()?"menu_item menu_item_active":"menu_item")??""} svelte-v1mgvt`),$e(fe,V(_).title)}),F(w,y)}),P(g),P(h);var p=X(h,2),f=O(p);ql(f,{get searchicon(){return t()},get notificationicon(){return i()},get supportuser(){return r()},get username(){return o()},get userpic(){return s()}});var b=X(f,2),k=O(b);$l(k,e,"default",{}),P(b),P(p),P(u),F(n,u),Ct()}Pt(["click"]),customElements.define("ing-buffet",it(am,{title:{},icon:{},searchicon:{},notificationicon:{},supportuser:{},username:{},userpic:{},activeitem:{},menuconfig:{}},["default"],[],!0));var iy=U('<div class="input_label svelte-18z4bwo"> </div>'),ny=U('<span class="input_icon svelte-18z4bwo"><img width="16px" alt=""></span>'),ry=(n,e)=>{e(n)},oy=U("<option> </option>"),sy=U('<div class="input_frame svelte-18z4bwo"><!> <div class="input_box svelte-18z4bwo"><!> <select class="input_field svelte-18z4bwo"></select></div></div>');const ay={hash:"svelte-18z4bwo",code:".input_frame.svelte-18z4bwo {padding-right:24px;margin-bottom:14px;width:280px;}.input_label.svelte-18z4bwo {margin-bottom:6px;}.input_box.svelte-18z4bwo {display:flex;color:#4a5073;background-color:#fff;border:0.0625rem solid #d1d7e0;border-radius:0.5rem;}.input_icon.svelte-18z4bwo {width:32px;position:relative;top:12px;left:9px;}.input_field.svelte-18z4bwo {box-shadow:none;width:280px;border:0.0625rem solid #d1d7e0;color:#66799e;background-color:#fff;background-clip:padding-box;appearance:none;border:transparent;height:40px;font-size:16px;border-style:none;border-radius:0.5rem;margin-left:4px;margin-right:8px;}.input_field.svelte-18z4bwo:focus {outline:none;}"};function Gl(n,e){xt(e,!0),tt(n,ay);let t=j(e,"label",3,""),i=j(e,"icon",3,""),r=j(e,"placeholder",3,""),o=j(e,"items",3,""),s=j(e,"input",15,""),a=j(e,"selectStyle",3,""),l=o().split(",");const c=f=>{if(f&&f.target&&e.$$host){let b="";f.target.value&&(b=f.target.value),e.$$host.innerText=b,document.dispatchEvent(new CustomEvent("SelectChangedEvent",{detail:{id:e.$$host.id,input:b}})),e.$$host.dispatchEvent(new CustomEvent("inputchanged",{detail:{input:b}}))}};var d=sy(),u=O(d);Oe(u,t,f=>{var b=iy(),k=O(b,!0);P(b),ae(()=>$e(k,t())),F(f,b)});var h=X(u,2),g=O(h);Oe(g,i,f=>{var b=ny(),k=O(b);P(b),ae(()=>he(k,"src",i())),F(f,b)});var p=X(g,2);p.__input=[ry,c],lt(p,21,()=>l,at,(f,b)=>{var k=oy(),w={},_=O(k,!0);P(k),ae(()=>{w!==(w=V(b))&&(k.value=(k.__value=V(b))==null?"":V(b)),$e(_,V(b))}),F(f,k)}),P(p),P(h),P(d),ae(()=>{he(d,"style",a()),he(p,"placeholder",r())}),tm(p,s),F(n,d),Ct()}Pt(["input"]),customElements.define("ing-select",it(Gl,{label:{},icon:{},placeholder:{},items:{},input:{},selectStyle:{}},[],[],!0));var ly=U('<div style="width: 100%;"><h3> </h3></div>'),cy=U('<div style="display: flex; flex-flow: row wrap;" class="card_frame svelte-nemk61"><!> <div style="width: 100%; margin: 20px 0px 10px 0px"><ing-button-gray>Submit</ing-button-gray></div></div>',2);const dy={hash:"svelte-nemk61",code:".card_frame.svelte-nemk61 {border-color:#eaedf2 !important;box-shadow:0 2px 18px rgba(0, 0, 0, 0.02) !important;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0.0625rem solid rgba(46, 54, 80, 0.125);border-radius:0.5rem;padding:12px 32px;}"};function lm(n,e){xt(e,!0),tt(n,dy);let t=j(e,"schema",7);typeof t()=="string"&&t(JSON.parse(t()));function i(){console.log(JSON.stringify(t()));let l={};for(const[c,d]of Object.entries(t().properties))l[c]=d.value;document.dispatchEvent(new CustomEvent("FormSubmitEvent",{detail:{schema:t(),object:l}}))}var r=cy(),o=O(r);Oe(o,t,l=>{var c=xr(),d=ii(c);lt(d,17,()=>Object.entries(t().properties),at,(u,h)=>{let g=()=>V(h)[0],p=()=>V(h)[1];var f=xr(),b=ii(f);Oe(b,()=>p().format=="header",k=>{var w=ly(),_=O(w),y=O(_,!0);P(_),P(w),ae(()=>$e(y,p().value)),F(k,w)},k=>{var w=xr(),_=ii(w);Oe(_,()=>p().format=="select",y=>{var x=mo(()=>"width: "+p().length+";");Gl(y,{get input(){return p().value},set input(A){p().value=A},get selectStyle(){return V(x)},get label(){return p().description},get items(){return p().value}})},y=>{var x=xr(),A=ii(x);Oe(A,()=>p().type=="string",I=>{var M=mo(()=>"width: "+p().length+";");Gs(I,{get inputId(){return g()},get inputStyle(){return V(M)},get label(){return p().description},get type(){return p().format},get placeholder(){return p().placeholder},get input(){return p().value},set input(D){p().value=D}})},null,!0),F(y,x)},!0),F(k,w)}),F(u,f)}),F(l,c)});var s=X(o,2),a=O(s);Hl(a,"size","small"),Hl(a,"id","submit-button"),Hl(a,"type","secondary"),a.__click=i,P(s),P(r),F(n,r),Ct()}Pt(["click"]),customElements.define("ing-form",it(lm,{schema:{}},[],[],!0));function uy(n,e,t,i,r,o){if(V(e)){let s=[];for(let a of t()){let l=!1;for(let c of i())if((r().length===0||r().includes(c))&&a[c].toString().toLowerCase().includes(V(e).toLowerCase())){l=!0;break}l&&s.push(a)}Ke(o,Ze(s))}else Ke(o,Ze(t()))}var hy=U('<th class="svelte-15ql2st"> </th>'),my=U('<td class="svelte-15ql2st"><a class="table_row svelte-15ql2st"> </a></td>'),gy=U('<tr class="svelte-15ql2st"></tr>'),py=U('<div class="card_frame svelte-15ql2st"><div class="filter svelte-15ql2st"><svg data-icon-name="filterIcon" viewBox="0 0 18 18" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M2 4h14v2H2V4zm2 4h10v2H4V8zm2 4h6v2H6v-2z"></path></svg> <span class="filter_input_box svelte-15ql2st">Filter <input class="filter_input svelte-15ql2st" placeholder="Value to filter for"></span></div> <table class="svelte-15ql2st"><thead class="svelte-15ql2st"><tr class="svelte-15ql2st"></tr></thead><tbody class="svelte-15ql2st"></tbody></table></div>');const fy={hash:"svelte-15ql2st",code:`.card_frame.svelte-15ql2st {border-color:#eaedf2 !important;box-shadow:0 2px 18px rgba(0, 0, 0, 0.02) !important;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0.0625rem solid rgba(46, 54, 80, 0.125);border-radius:0.5rem;padding:22px 32px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}table.svelte-15ql2st {width:100%;margin-bottom:1rem;color:#4a5073;vertical-align:top;border-color:#eaedf2;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;border-collapse:collapse;}table.svelte-15ql2st thead:where(.svelte-15ql2st) tr:where(.svelte-15ql2st) th:where(.svelte-15ql2st) {vertical-align:center;text-align:left;border-bottom:1px solid #eaedf2 !important;font-size:12px;font-weight:bold;padding-left:14px;padding-bottom:10px;}.table_row.svelte-15ql2st {padding-left:14px;padding-top:14px;padding-bottom:14px;border-bottom:1px solid #eaedf2 !important;}table.svelte-15ql2st tbody:where(.svelte-15ql2st) tr:where(.svelte-15ql2st):hover {background-color:#eff0f2;cursor:pointer;border-radius:0.5rem;}a.svelte-15ql2st:link {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:visited {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:hover {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:active {text-decoration:none;}td.svelte-15ql2st a:where(.svelte-15ql2st) {display:block;}.filter.svelte-15ql2st {margin-top:20px;margin-bottom:8px;margin-left:8px;}.filter_input_box.svelte-15ql2st {position:relative;top:-3px;font-weight:bold;font-size:14px;}.filter_input.svelte-15ql2st {width:50%;margin-left:8px;font-family:Google Sans,
      Roboto,
      Helvetica,
      Arial,
      sans-serif;padding:var(--padding);
    /* border: 2px solid gray; */border:0px;outline:none;border-radius:0px;
    /* background-color: #f1f3f4; */background-color:rgb(255, 255, 255);}`};function cm(n,e){xt(e,!0),tt(n,fy);let t=j(e,"headers",23,()=>[]),i=j(e,"headerssearchable",23,()=>[]),r=j(e,"rows",23,()=>[]),o=j(e,"linkprefix",3,""),s=j(e,"linkcolumnname",3,""),a=j(e,"update",3,void 0);typeof t()=="string"&&t(JSON.parse(t())),typeof i()=="string"&&i(JSON.parse(i())),typeof r()=="string"&&r(JSON.parse(r()));let l=Hi(Ze(r())),c=Hi("");const d=_=>{e.$$host.dispatchEvent(new CustomEvent("update",{detail:{rowIndex:_}})),a()&&a()({detail:{rowIndex:_}})};var u=py(),h=O(u),g=X(O(h),2),p=X(O(g));$s(p),p.__keyup=[uy,c,r,t,i,l],P(g),P(h);var f=X(h,2),b=O(f),k=O(b);lt(k,21,t,at,(_,y)=>{var x=hy(),A=O(x,!0);P(x),ae(()=>$e(A,V(y))),F(_,x)}),P(k),P(b);var w=X(b);lt(w,21,()=>V(l),at,(_,y,x)=>{var A=gy();A.__click=()=>{d(x)},lt(A,21,()=>Object.entries(V(y)),at,(I,M)=>{var D=my(),fe=O(D),De=O(fe,!0);P(fe),P(D),ae(()=>{he(fe,"href",o()+V(y)[s()]),$e(De,V(M)[1])}),F(I,D)}),P(A),F(_,A)}),P(w),P(f),P(u),Us(p,()=>V(c),_=>Ke(c,_)),F(n,u),Ct()}Pt(["keyup","click"]),customElements.define("ing-table",it(cm,{headers:{},headerssearchable:{},rows:{},linkprefix:{},linkcolumnname:{},update:{}},[],[],!0));var by=U('<img class="title_logo" alt="logo" width="36px" height="34px" style="padding: 6px; margin-top: 4px;">'),ky=U('<span class="title_text svelte-zwv9rr"> </span>'),wy=U('<a href="https://google.com" target="_blank" class="title svelte-zwv9rr"><!> <!></a>'),_y=(n,e,t)=>e(n,V(t).title),vy=U('<button class="menu_button svelte-zwv9rr"><img class="menu_icon svelte-zwv9rr"></button> <!>',1),yy=U('<div class="header svelte-zwv9rr"><!> <div class="right_menus svelte-zwv9rr"></div></div>');const xy={hash:"svelte-zwv9rr",code:".header.svelte-zwv9rr {display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-start;background-color:rgba(255, 255, 255, 1);height:57px;font-weight:560;color:#333;font-size:20px;padding:0px;margin:0px;position:sticky;top:0;z-index:2;border-bottom:solid 1px rgba(222, 222, 222, 1);}.title.svelte-zwv9rr {height:100%;display:flex;margin-left:12px;color:#111;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;}.title.svelte-zwv9rr:link {text-decoration:none;}.title.svelte-zwv9rr:visited {text-decoration:none;color:#222;}.title.svelte-zwv9rr:hover {text-decoration:none;color:darkgray}.title.svelte-zwv9rr:active {text-decoration:none;}.title_text.svelte-zwv9rr {display:flex;align-items:center;}.right_menus.svelte-zwv9rr {display:flex;height:100%;flex:auto;flex-flow:row-reverse;}.menu_button.svelte-zwv9rr {height:100%;display:flex;align-items:center;margin-right:18px;cursor:pointer;border:0px;background-color:transparent;}.menu_icon.svelte-zwv9rr {height:30px;width:30px;object-fit:cover;}.menu_icon.svelte-zwv9rr:hover {cursor:pointer;}.round.svelte-zwv9rr {height:40px;width:40px;border-radius:50%;}"};function Zl(n,e){xt(e,!0),tt(n,xy);let t=j(e,"title",3,""),i=j(e,"titleImageUrl",3,""),r=j(e,"headerMenus",23,()=>[]);typeof r()=="string"&&r(JSON.parse(r()));let o=Ze({}),s=Ze({});function a(g,p){g&&g.stopPropagation();for(const f of Object.keys(o))f!=p&&(o[f]=!1);o[p]?o[p]=!1:o[p]=!0}function l(g){let p={},f;if(s[g]&&(f=s[g]),f){var b=f.getBoundingClientRect();p.top=(b.top+b.height+12).toString()+"px",p.left=(b.left-150).toString()+"px",console.log(p)}else console.log("Could not find element with id: "+g);return p}function c(g){return g.toLowerCase().replaceAll(" ","_")}document.onclick=function(){for(const g of Object.keys(o))o[g]=!1};var d=yy(),u=O(d);Oe(u,()=>t()||i(),g=>{var p=wy(),f=O(p);Oe(f,i,k=>{var w=by();ae(()=>he(w,"src",i())),F(k,w)});var b=X(f,2);Oe(b,t,k=>{var w=ky(),_=O(w,!0);P(w),ae(()=>$e(_,t())),F(k,w)}),P(p),F(g,p)});var h=X(u,2);lt(h,21,r,at,(g,p)=>{var f=vy(),b=ii(f);ae(()=>he(b,"id",c(V(p).title+"_button"))),b.__click=[_y,a,p];var k=O(b);nm(k,(_,y)=>s[c(y.title+"_button")]=_,_=>s?.[c(_.title+"_button")],()=>[V(p)]),P(b);var w=X(b,2);Oe(w,()=>o[V(p).title],_=>{var y=mo(()=>l(c(V(p).title+"_button")));Wl(_,{get menuItems(){return V(p).items},get position(){return V(y)}})}),ae(()=>{he(k,"alt",V(p).title),he(k,"src",V(p).imageUrl),Ar(k,"round",V(p).imageShape==="round")}),F(g,f)}),P(h),P(d),F(n,d),Ct()}Pt(["click"]),customElements.define("mv-elegant-header",it(Zl,{title:{},titleImageUrl:{},headerMenus:{}},[],[],!0));function Cy(n,e,t,i){e.searchloadresults&&Ke(t,Ze(e.searchloadresults(i())))}function Ay(n,e,t,i){n.key==="Escape"?Ke(e,Ze([])):n.key==="Enter"&&(t.searchsubmit&&t.searchsubmit(i()),document.dispatchEvent(new CustomEvent("SearchSubmit",{detail:{text:i()}})),i(""))}var Ty=U('<div class="result svelte-ihhy65"> </div>'),Ey=U('<div class="results svelte-ihhy65"><div class="results_frame svelte-ihhy65"><div class="results_list svelte-ihhy65"></div></div></div>'),Sy=U('<div class="input_frame svelte-ihhy65"><div class="search_frame svelte-ihhy65"><div class="search_icon svelte-ihhy65"><svg width="18px" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#9aa0a6" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></div> <input class="search_input svelte-ihhy65"></div></div> <!>',1);const Iy={hash:"svelte-ihhy65",code:`.input_frame.svelte-ihhy65 {min-height:44px;background:#fff;border:1px solid #dfe1e5;box-shadow:0px 2px 8px 0px rgba(60, 64, 67, 0.25);border-radius:24px;margin:0 auto;max-width:584px;}.search_frame.svelte-ihhy65 {display:flex;flex-flow:row wrap;width:100%;flex:1;padding:0 8px 0 0;}.search_icon.svelte-ihhy65 {display:flex;align-items:center;padding-right:13px;padding-left:14px;height:46px;color:#9aa0a6;z-index:11;}.search_input.svelte-ihhy65 {display:flex;flex-wrap:wrap;flex:1;border:none;border-radius:24px;font-size:18px;width:100%;z-index:11;background-color:transparent;}.search_input.svelte-ihhy65:focus,
  .search_input.svelte-ihhy65:focus {outline:none;}.results.svelte-ihhy65 {position:absolute;margin:0px 0px 0px 0px;width:398px;border:1px solid #dfe1e5;z-index:10;background:#fff;border-radius:0px 0px 24px 24px;}.results_list.svelte-ihhy65 {margin-top:10px;background:#fff;width:100%;z-index:10;}.results_frame.svelte-ihhy65 {position:relative;top:-22px;background:#fff;border-left:1px solid #dfe1e5;border-right:1px solid #dfe1e5;width:398px;left:-1px;z-index:10;height:300px;overflow-x:hidden;}.result.svelte-ihhy65 {width:100%;padding:4px 0px 4px 16px;}.result.svelte-ihhy65:hover {cursor:pointer;background-color:#dfe1e5;}`};function Kl(n,e){xt(e,!0),tt(n,Iy);let t=j(e,"searchtext",15),i=Hi(Ze([]));document.addEventListener("SearchResults",c=>{c.detail.results&&Ke(i,Ze(c.detail.results))});var r=Sy(),o=ii(r),s=O(o),a=X(O(s),2);$s(a),a.__input=[Cy,e,i,t],a.__keyup=[Ay,i,e,t],P(s),P(o);var l=X(o,2);Oe(l,()=>V(i).length>0,c=>{var d=Ey(),u=O(d),h=O(u);lt(h,21,()=>V(i),at,(g,p)=>{var f=Ty(),b=O(f,!0);P(f),ae(()=>$e(b,V(p))),F(g,f)}),P(h),P(u),P(d),F(c,d)}),Us(a,t),F(n,r),Ct()}Pt(["input","keyup"]),customElements.define("mv-elegant-search",it(Kl,{searchtext:{},searchloadresults:{},searchsubmit:{}},[],[],!0));var Py=U('<img class="hero_image svelte-pm9u4t" alt="logo">'),My=U('<div class="hero svelte-pm9u4t"><div class="hero_logo svelte-pm9u4t"><!> <div class="hero_logo_text svelte-pm9u4t"> </div></div> <div class="hero_search svelte-pm9u4t"><!></div></div>');const Vy={hash:"svelte-pm9u4t",code:'.hero.svelte-pm9u4t {width:100%;display:flex;justify-content:center;flex-flow:row wrap;}.hero_logo.svelte-pm9u4t {display:flex;margin-top:150px;width:100%;justify-content:center;align-items:center;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:560;color:#333;font-size:20px;}.hero_image.svelte-pm9u4t {width:50px;height:50px;}.hero_logo_text.svelte-pm9u4t {padding-left:12px;}.hero_search.svelte-pm9u4t {width:400px;}'};function Yl(n,e){tt(n,Vy);let t=j(e,"height",3,"80px"),i=j(e,"title",3,""),r=j(e,"titleImageUrl",3,""),o=j(e,"searchtext",15);var s=My(),a=O(s),l=O(a);Oe(l,r,g=>{var p=Py();ae(()=>{he(p,"height",`${t()}`),he(p,"src",r())}),F(g,p)});var c=X(l,2),d=O(c,!0);P(c),P(a);var u=X(a,2),h=O(u);Kl(h,{get searchtext(){return o()},set searchtext(g){o(g)},get searchloadresults(){return e.searchloadresults},get searchsubmit(){return e.searchsubmit}}),P(u),P(s),ae(()=>{he(a,"style",`height: ${t()};`),$e(d,i())}),F(n,s)}customElements.define("mv-elegant-hero-search",it(Yl,{text:{reflect:!0},height:{},title:{},titleImageUrl:{},searchtext:{},searchloadresults:{},searchsubmit:{}},[],[],!0));function Ly(n,e,t){n.srcElement&&e(n.srcElement.value),t.onInput&&t.onInput(e())}var Oy=U('<option class="svelte-1im86kb"> </option>'),Ny=U('<div class="select svelte-1im86kb"><select name="source" id="source" class="svelte-1im86kb"></select></div>');const Ry={hash:"svelte-1im86kb",code:`.select.svelte-1im86kb,
.select.svelte-1im86kb :where(.svelte-1im86kb) {margin:0;padding:0;position:relative;box-sizing:border-box;}.select.svelte-1im86kb {position:relative;background-color:#f0f0f0;border-radius:12px;width:200px;height:40px;}.select.svelte-1im86kb select:where(.svelte-1im86kb) {font-size:1rem;font-weight:normal;width:100%;padding:10px 24px 8px 10px;border:none;background-color:transparent;appearance:none;}.select.svelte-1im86kb select:where(.svelte-1im86kb):active, .select.svelte-1im86kb select:where(.svelte-1im86kb):focus {outline:none;box-shadow:none;}.select.svelte-1im86kb:after {content:"";position:absolute;top:50%;right:8px;width:0;height:0;margin-top:-2px;border-top:5px solid #aaa;border-right:5px solid transparent;border-left:5px solid transparent;}`};function dm(n,e){xt(e,!0),tt(n,Ry);let t=j(e,"input",15),i=j(e,"options",19,()=>[]);var r=Ny(),o=O(r);o.__input=[Ly,t,e],lt(o,21,i,at,(s,a)=>{var l=Oy(),c={},d=O(l,!0);P(l),ae(()=>{c!==(c=V(a))&&(l.value=(l.__value=V(a))==null?"":V(a)),$e(d,V(a))}),F(s,l)}),P(o),P(r),tm(o,t),F(n,r),Ct()}Pt(["input"]),customElements.define("mv-elegant-select",it(dm,{input:{},onInput:{},options:{}},[],[],!0));function zy(n,e,t){e()==="CARD"?e("TABLE"):e("CARD"),t.viewselect&&t.viewselect(e())}var Dy=(n,e,t)=>e(V(t).name),By=U('<div class="icon svelte-lvweti">\u2713</div>'),Fy=U('<div class="icon svelte-lvweti"> </div>'),jy=U('<div class="filterbar_option svelte-lvweti"><!> <div class="name svelte-lvweti"> </div></div>'),$y=U('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M3 9.5H21M3 14.5H21M8 4.5V19.5M6.2 19.5H17.8C18.9201 19.5 19.4802 19.5 19.908 19.282C20.2843 19.0903 20.5903 18.7843 20.782 18.408C21 17.9802 21 17.4201 21 16.3V7.7C21 6.5799 21 6.01984 20.782 5.59202C20.5903 5.21569 20.2843 4.90973 19.908 4.71799C19.4802 4.5 18.9201 4.5 17.8 4.5H6.2C5.0799 4.5 4.51984 4.5 4.09202 4.71799C3.71569 4.90973 3.40973 5.21569 3.21799 5.59202C3 6.01984 3 6.57989 3 7.7V16.3C3 17.4201 3 17.9802 3.21799 18.408C3.40973 18.7843 3.71569 19.0903 4.09202 19.282C4.51984 19.5 5.07989 19.5 6.2 19.5Z" stroke="#d8d8d8" stroke-width="2"></path></g></svg>'),Hy=U('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#d8d8d8"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title></title><g id="Complete"><g id="grid"><g><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="14.5" y="2.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="14.5" y="14.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="2.5" y="2.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="2.5" y="14.5"></rect></g></g></g></g></svg>'),Uy=U('<div class="filterbar_frame svelte-lvweti"><div class="options svelte-lvweti"></div> <div class="filter svelte-lvweti"><button class="view_toggle svelte-lvweti"><!></button> <!></div></div>');const Wy={hash:"svelte-lvweti",code:`.filterbar_frame.svelte-lvweti {display:flex;max-width:2000px;
    /* margin: 20px 10px 0px 16px; */margin:20px auto 0px auto;}.options.svelte-lvweti {display:flex;justify-content:left;width:100%;margin-left:16px;}.filter.svelte-lvweti {display:flex;margin-right:16px;}.filterbar_option.svelte-lvweti {display:flex;min-width:20px;height:40px;font-size:14px;font-weight:700;color:rgb(51, 103, 214);margin-right:6px;margin-bottom:4px;height:20px;padding:4px 8px 6px;border-radius:44px;border-width:1px;border-style:solid;border-color:lightgray;user-select:none;}.filterbar_option_selected.svelte-lvweti {background-color:rgb(209, 227, 255);}.filterbar_option.svelte-lvweti:hover {cursor:pointer;background-color:rgb(209, 227, 255);}.icon.svelte-lvweti {color:rgb(51, 103, 214);font-size:16px;font-weight:700;display:inline-block;width:18px;margin-right:6px;}.name.svelte-lvweti {float:right;margin-top:2px;font-size:14px;font-weight:700;color:rgb(51, 103, 214);}.view_toggle.svelte-lvweti {margin-right:12px;width:44px;border:0px;background-color:transparent;}.view_toggle.svelte-lvweti:hover {cursor:pointer;}`};function um(n,e){xt(e,!0),tt(n,Wy);let t=j(e,"view",15,"card"),i=Ze({});function r(h){i[h]?i[h]=!1:i[h]=!0,e.typeselect&&e.typeselect(i)}function o(h){e.sortselect&&e.sortselect(h)}var s=Uy(),a=O(s);lt(a,21,()=>e.types,at,(h,g)=>{var p=jy();p.__click=[Dy,r,g];var f=O(p);Oe(f,()=>i[V(g).name]===!0,w=>{var _=By();F(w,_)},w=>{var _=Fy(),y=O(_,!0);P(_),ae(()=>$e(y,V(g).icon)),F(w,_)});var b=X(f,2),k=O(b,!0);P(b),P(p),ae(()=>{Ar(p,"filterbar_option_selected",i[V(g).name]),$e(k,V(g).name)}),F(h,p)}),P(a);var l=X(a,2),c=O(l);c.__click=[zy,t,e];var d=O(c);Oe(d,()=>t()==="CARD",h=>{var g=$y();F(h,g)},h=>{var g=Hy();F(h,g)}),P(c);var u=X(c,2);dm(u,{input:"Latest",get options(){return e.sorts},onInput:o}),P(l),P(s),F(n,s),Ct()}Pt(["click"]),customElements.define("mv-elegant-filtertypes",it(um,{types:{},sorts:{},typeselect:{},sortselect:{},view:{},viewselect:{}},[],[],!0));var qy=U('<img alt="type icon" class="svelte-1feueb0">'),Gy=U('<img alt="type icon" class="svelte-1feueb0">'),Zy=U('<div class="card_frame svelte-1feueb0"><div class="top_left_label svelte-1feueb0"><span class="svelte-1feueb0"> </span> <div class="top_right_icons svelte-1feueb0"></div></div> <img class="header_image svelte-1feueb0" alt="header preview"> <a class="title svelte-1feueb0"> </a> <a class="author svelte-1feueb0" target="_blank"><img alt="profile" class="svelte-1feueb0"> </a> <div class="footer svelte-1feueb0"><div class="description svelte-1feueb0"> </div> <div class="link svelte-1feueb0"><a target="_blank" class="svelte-1feueb0">Open asset \u2197</a> <div class="type_box svelte-1feueb0"></div></div></div></div>');const Ky={hash:"svelte-1feueb0",code:".card_frame.svelte-1feueb0 {display:flex;flex-wrap:wrap;width:288px;height:428px;border:1px solid var(--gm3-sys-color-surface-variant, #e1e3e1);border-radius:12px;margin:16px 16px 32px 16px;}.top_left_label.svelte-1feueb0 {display:flex;padding:12px 18px;color:#444746;width:100%;height:28px;}.top_left_label.svelte-1feueb0 span:where(.svelte-1feueb0) {white-space:nowrap;}.top_right_icons.svelte-1feueb0 {display:flex;justify-content:right;width:100%;}.top_right_icons.svelte-1feueb0 img:where(.svelte-1feueb0) {object-fit:cover;width:24px;height:24px;margin-left:4px;}.header_image.svelte-1feueb0 {width:calc(100% - 18px);margin:0px 18px;object-fit:cover;height:144px;border-radius:7px;}.title.svelte-1feueb0 {padding:12px 18px 4px;height:48px;color:#1f1f1f;font-weight:600;font-size:18px;overflow:hidden;text-overflow:ellipsis;line-height:1.5rem;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.title.svelte-1feueb0:hover {color:#7c7c7c;}.author.svelte-1feueb0 {display:flex;align-items:start;padding:0px 18px 4px;height:20px;color:#444746;font-size:.875rem;font-weight:400;line-height:1.25rem;overflow:hidden;text-overflow:ellipsis;}.author.svelte-1feueb0 img:where(.svelte-1feueb0) {border-radius:50%;object-fit:cover;width:18px;height:18px;margin-right:8px;}.author.svelte-1feueb0:hover {color:#757a79;}.footer.svelte-1feueb0 {display:flex;flex-direction:column;justify-content:space-between;min-height:134px;padding-top:9px;padding-bottom:3px;width:100%;}.description.svelte-1feueb0 {padding:3px 18px;height:54px;width:calc(100% - 36px);overflow:hidden;color:#444746;font-size:.875rem;font-weight:400;letter-spacing:0;line-height:1.25rem;outline:none;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;}.link.svelte-1feueb0 {display:flex;width:calc(100% - 36px);overflow:hidden;padding:0px 16px;padding-bottom:14px;}.link.svelte-1feueb0 a:where(.svelte-1feueb0) {color:#0b57d0;font-weight:600;font-size:.975rem;letter-spacing:0;line-height:1.25rem;white-space:nowrap;}.link.svelte-1feueb0 a:where(.svelte-1feueb0):hover {color:#82aae9;}.type_box.svelte-1feueb0 {display:flex;justify-content:right;flex-wrap:wrap;width:100%;}.type_box.svelte-1feueb0 img:where(.svelte-1feueb0) {object-fit:cover;width:24px;height:24px;margin-left:4px;}"};function hm(n,e){xt(e,!0),tt(n,Ky);let t=j(e,"item",19,()=>({dateTime:"",categories:[],imageUrl:"",title:"",authorImageUrl:"",authorName:"",authorUrl:"",description:"",link:"",types:[]}));var i=Zy(),r=O(i),o=O(r),s=O(o,!0);P(o);var a=X(o,2);lt(a,21,()=>t().categories,at,(y,x)=>{var A=qy();ae(()=>{he(A,"src",V(x).url),he(A,"title",V(x).title)}),F(y,A)}),P(a),P(r);var l=X(r,2),c=X(l,2),d=O(c,!0);P(c);var u=X(c,2),h=O(u),g=X(h);P(u);var p=X(u,2),f=O(p),b=O(f,!0);P(f);var k=X(f,2),w=O(k),_=X(w,2);lt(_,21,()=>t().types,at,(y,x)=>{var A=Gy();ae(()=>{he(A,"src",V(x).url),he(A,"title",V(x).title)}),F(y,A)}),P(_),P(k),P(p),P(i),ae(()=>{$e(s,t().dateTime),he(l,"src",t().imageUrl),he(c,"href",t().link),$e(d,t().description),he(u,"href",t().authorUrl),he(h,"src",t().authorImageUrl),$e(g,` ${t().authorName??""}`),$e(b,t().description),he(w,"href",t().link)}),F(n,i),Ct()}customElements.define("mv-elegant-card",it(hm,{item:{}},[],[],!0));var Yy=U('<div class="menu_frame svelte-1dvvvu9"></div>');const Qy={hash:"svelte-1dvvvu9",code:`.menu_frame.svelte-1dvvvu9 {max-width:2000px;margin:0px auto;display:flex;
    /* justify-content: center; */flex-wrap:wrap;}`};function mm(n,e){tt(n,Qy);let t=j(e,"items",7);typeof t()=="string"&&t(JSON.parse(t()));var i=Yy();lt(i,21,t,at,(r,o)=>{hm(r,{get item(){return V(o)}})}),P(i),F(n,i)}customElements.define("mv-elegant-cardpage",it(mm,{items:{}},[],[],!0));var Jy=(n,e,t)=>e(V(t).name),Xy=U('<div class="filterbar_option svelte-1d4e3jq"><div class="letter svelte-1d4e3jq"> </div> <div class="name svelte-1d4e3jq"> </div></div>'),e2=U('<div class="filterbar_frame svelte-1d4e3jq"></div>');const t2={hash:"svelte-1d4e3jq",code:`.filterbar_frame.svelte-1d4e3jq {display:flex;justify-content:center;}.filterbar_option.svelte-1d4e3jq {display:flex;flex-flow:row wrap;width:60px;height:100px;margin:8px;user-select:none;
    /* background-color: red; */}.letter.svelte-1d4e3jq {display:flex;align-items:center;justify-content:center;width:100%;height:52px;margin:2px 2px 0px 2px;border-radius:80%;text-align:center;font-size:22px;font-weight:bold;color:#3367d6;border-width:1px;border-style:solid;border-color:transparent;}.letter_selected.svelte-1d4e3jq {background-color:rgb(228, 228, 228);}.letter.svelte-1d4e3jq:hover {cursor:pointer;border-color:lightgray;}.name.svelte-1d4e3jq {width:100%;position:relative;top:-8px;text-align:center;color:gray;font-size:14px;}`};function gm(n,e){xt(e,!0),tt(n,t2);let t=Ze({});function i(o){t[o]?t[o]=!1:t[o]=!0,e.categoryselect&&e.categoryselect(t)}var r=e2();lt(r,21,()=>e.categories,at,(o,s)=>{var a=Xy(),l=O(a);l.__click=[Jy,i,s];var c=O(l,!0);P(l);var d=X(l,2),u=O(d,!0);P(d),P(a),ae(()=>{Ar(l,"letter_selected",t[V(s).name]),$e(c,V(s).letter),$e(u,V(s).name)}),F(o,a)}),P(r),F(n,r),Ct()}Pt(["click"]),customElements.define("mv-elegant-filtercats",it(gm,{categories:{},categoryselect:{}},[],[],!0));function i2(n,e,t,i,r){if(V(e)){let o=[];for(let s of t()){let a=!1;for(let l of i())if(l.searchable&&s[l.name]&&s[l.name].toString().toLowerCase().includes(V(e).toLowerCase())){a=!0;break}a&&o.push(s)}Ke(r,Ze(o))}else Ke(r,Ze(t()))}var n2=U('<th class="svelte-1nbcvq9"> </th>'),r2=U('<a class="table_row svelte-1nbcvq9"> </a>'),o2=U('<span class="table_row svelte-1nbcvq9"> </span>'),s2=U('<td class="svelte-1nbcvq9"><!></td>'),a2=U("<td></td>"),l2=U('<tr class="svelte-1nbcvq9"></tr>'),c2=U('<div class="frame svelte-1nbcvq9" style="container-type: inline-size;"><div class="filter svelte-1nbcvq9"><svg data-icon-name="filterIcon" viewBox="0 0 18 18" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M2 4h14v2H2V4zm2 4h10v2H4V8zm2 4h6v2H6v-2z"></path></svg> <span class="filter_input_box svelte-1nbcvq9">Filter <input class="filter_input svelte-1nbcvq9" placeholder="Value to filter for"></span></div> <table class="svelte-1nbcvq9"><thead class="svelte-1nbcvq9"><tr class="svelte-1nbcvq9"></tr></thead><tbody class="svelte-1nbcvq9"></tbody></table></div>');const d2={hash:"svelte-1nbcvq9",code:`.frame.svelte-1nbcvq9 {
    /* border-color: #eaedf2 !important; */
    /* box-shadow: 0 2px 18px rgba(0, 0, 0, 0.02) !important; */min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;
    /* border: 0.0625rem solid rgba(46, 54, 80, 0.125); */border-radius:0.5rem;padding:22px 32px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}table.svelte-1nbcvq9 {width:100%;margin-bottom:1rem;color:#4a5073;vertical-align:top;border-color:#eaedf2;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;border-collapse:collapse;}table.svelte-1nbcvq9 thead:where(.svelte-1nbcvq9) tr:where(.svelte-1nbcvq9) th:where(.svelte-1nbcvq9) {vertical-align:center;text-align:left;border-bottom:1px solid #eaedf2 !important;font-size:12px;font-weight:bold;padding-left:14px;padding-bottom:10px;}.table_row.svelte-1nbcvq9 {padding-left:14px;padding-top:14px;padding-bottom:14px;border-bottom:1px solid #eaedf2 !important;display:block;}table.svelte-1nbcvq9 tbody:where(.svelte-1nbcvq9) tr:where(.svelte-1nbcvq9):hover {background-color:#eff0f2;cursor:pointer;border-radius:0.5rem;}.table_row_selected.svelte-1nbcvq9 {background-color:#eff0f2;border-radius:0.5rem;}

  @container (width <= 768px) {.column_sm.svelte-1nbcvq9 {display:none;}
  }a.svelte-1nbcvq9:link {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:visited {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:hover {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:active {text-decoration:none;}td.svelte-1nbcvq9 a:where(.svelte-1nbcvq9) {display:block;}.filter.svelte-1nbcvq9 {margin-top:20px;margin-bottom:8px;margin-left:8px;}.filter_input_box.svelte-1nbcvq9 {position:relative;top:-3px;font-weight:bold;font-size:14px;}.filter_input.svelte-1nbcvq9 {width:50%;margin-left:8px;font-family:Google Sans,
      Roboto,
      Helvetica,
      Arial,
      sans-serif;padding:var(--padding);
    /* border: 2px solid gray; */border:0px;outline:none;border-radius:0px;
    /* background-color: #f1f3f4; */background-color:rgb(255, 255, 255);}`};function Ql(n,e){xt(e,!0),tt(n,d2);let t=j(e,"tableHeaders",23,()=>[]),i=j(e,"tableRows",23,()=>[]),r=j(e,"linkprefix",3,""),o=j(e,"linkcolumnname",3,""),s=j(e,"tableRowClick",3,void 0);if(typeof t()=="string"&&t(JSON.parse(t())),typeof i()=="string"&&i(JSON.parse(i())),(!t()||t().length===0)&&i()&&i().length>0){t([]);for(let _ of Object.keys(i()[0]))t().push({name:_,displayName:_,searchable:!0,hideNarrow:!1})}let a=Hi(Ze(i())),l=Hi(""),c=Hi(-1);const d=_=>{Ke(c,Ze(_)),s()&&s()({detail:{rowIndex:_}}),document.dispatchEvent(new CustomEvent("TableRowClick",{detail:{rowIndex:_}}))};var u=c2(),h=O(u),g=X(O(h),2),p=X(O(g));$s(p),p.__keyup=[i2,l,i,t,a],P(g),P(h);var f=X(h,2),b=O(f),k=O(b);lt(k,21,t,at,(_,y)=>{var x=n2(),A=O(x,!0);P(x),ae(()=>{Ar(x,"column_sm",V(y).hideNarrow),$e(A,V(y).displayName)}),F(_,x)}),P(k),P(b);var w=X(b);lt(w,21,()=>V(a),at,(_,y,x)=>{var A=l2();A.__click=()=>{d(x)},lt(A,21,t,at,(I,M)=>{var D=xr(),fe=ii(D);Oe(fe,()=>V(y)[V(M).name],De=>{var ce=s2(),ut=O(ce);Oe(ut,o,re=>{var Ue=r2(),ht=O(Ue,!0);P(Ue),ae(()=>{he(Ue,"href",r()+V(y)[o()]),$e(ht,V(y)[V(M).name])}),F(re,Ue)},re=>{var Ue=o2(),ht=O(Ue,!0);P(Ue),ae(()=>$e(ht,V(y)[V(M).name])),F(re,Ue)}),P(ce),ae(()=>Ar(ce,"column_sm",V(M).hideNarrow)),F(De,ce)},De=>{var ce=a2();F(De,ce)}),F(I,D)}),P(A),ae(()=>Ar(A,"table_row_selected",x===V(c))),F(_,A)}),P(w),P(f),P(u),Us(p,()=>V(l),_=>Ke(l,_)),F(n,u),Ct()}Pt(["keyup","click"]),customElements.define("mv-elegant-table",it(Ql,{tableHeaders:{},tableRows:{},linkprefix:{},linkcolumnname:{},tableRowClick:{}},[],[],!0));var u2=U("<!> <!> <!> <!> <!>",1);const h2={hash:"svelte-32ttx",code:""};function pm(n,e){tt(n,h2);let t=j(e,"title",3,""),i=j(e,"titleImageUrl",3,""),r=j(e,"headerMenus",19,()=>[]),o=j(e,"searchtext",7,""),s=j(e,"categories",19,()=>[]),a=j(e,"types",19,()=>[]),l=j(e,"sorts",19,()=>[]),c=Hi("CARD"),d=Ze([{name:"dateTime",displayName:"Date",searchable:!1},{name:"authorName",displayName:"Author",searchable:!0},{name:"title",displayName:"Title",searchable:!0}]);var u=u2(),h=ii(u);Zl(h,{get title(){return t()},get titleImageUrl(){return i()},get headerMenus(){return r()}});var g=X(h,2);Yl(g,{get title(){return t()},get titleImageUrl(){return i()},get searchtext(){return o()},set searchtext(k){o(k)},get searchloadresults(){return e.searchloadresults},get searchsubmit(){return e.searchsubmit}});var p=X(g,2);gm(p,{get categories(){return s()},get categoryselect(){return e.categoryselect}});var f=X(p,2);um(f,{get types(){return a()},get sorts(){return l()},get typeselect(){return e.typeselect},get sortselect(){return e.sortselect},get view(){return V(c)},set view(k){Ke(c,Ze(k))}});var b=X(f,2);Oe(b,()=>V(c)==="CARD",k=>{mm(k,{get items(){return e.items}})},k=>{Ql(k,{get tableHeaders(){return d},get tableRows(){return e.items},linkprefix:"",linkcolumnname:"link",update:void 0})}),F(n,u)}customElements.define("mv-elegant-buffet",it(pm,{title:{},titleImageUrl:{},headerMenus:{},searchtext:{},searchloadresults:{},searchsubmit:{},categories:{},categoryselect:{},types:{},typeselect:{},sorts:{},sortselect:{},items:{}},[],[],!0));var m2=U('<div class="lds-ring svelte-nag87b"><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div></div>');const g2={hash:"svelte-nag87b",code:`.lds-ring.svelte-nag87b {
  /* display: inline-block;
  position: relative; */display:inline-block;position:absolute;width:99%;text-align:center;height:80px;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b) {box-sizing:border-box;position:absolute;left:48%;top:42%;width:32px;height:32px;margin:8px;border:4px solid #3367d6;border-radius:50%;
  animation: svelte-nag87b-lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;border-color:#3367d6 transparent transparent transparent;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(1) {animation-delay:-0.45s;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(2) {animation-delay:-0.3s;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(3) {animation-delay:-0.15s;}
@keyframes svelte-nag87b-lds-ring {
  0% {
      transform: rotate(0deg);
  }
  100% {
      transform: rotate(360deg);
  }
}`};function fm(n,e){tt(n,g2);var t=m2();F(n,t)}customElements.define("mv-elegant-spinner",it(fm,{},[],[],!0));/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function p2(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if(i!=="default"&&!(i in n)){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(n)}let Jl;try{Jl={window,document}}catch{Jl={window:{},document:{}}}var R=Jl;function f2(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Un=f2(),W={isMac:bm(Un),isWindows:b2(Un),isGecko:k2(Un),isSafari:w2(Un),isiOS:_2(Un),isAndroid:v2(Un),isBlink:y2(Un),get isMediaForcedColors(){return!!R.window.matchMedia&&R.window.matchMedia("(forced-colors: active)").matches},get isMotionReduced(){return!!R.window.matchMedia&&R.window.matchMedia("(prefers-reduced-motion)").matches},features:{isRegExpUnicodePropertySupported:x2()}};function bm(n){return n.indexOf("macintosh")>-1}function b2(n){return n.indexOf("windows")>-1}function k2(n){return!!n.match(/gecko\/\d+/)}function w2(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function _2(n){return!!n.match(/iphone|ipad/i)||bm(n)&&navigator.maxTouchPoints>0}function v2(n){return n.indexOf("android")>-1}function y2(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function x2(){let n=!1;try{n="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function km(n,e,t,i){t=t||function(a,l){return a===l};const r=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),s=function(a,l,c){const d=wm(a,l,c);if(d===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const u=_m(a,d),h=_m(l,d),g=wm(u,h,c),p=a.length-g,f=l.length-g;return{firstIndex:d,lastIndexOld:p,lastIndexNew:f}}(r,o,t);return i?function(a,l){const{firstIndex:c,lastIndexOld:d,lastIndexNew:u}=a;if(c===-1)return Array(l).fill("equal");let h=[];return c>0&&(h=h.concat(Array(c).fill("equal"))),u-c>0&&(h=h.concat(Array(u-c).fill("insert"))),d-c>0&&(h=h.concat(Array(d-c).fill("delete"))),u<l&&(h=h.concat(Array(l-u).fill("equal"))),h}(s,o.length):function(a,l){const c=[],{firstIndex:d,lastIndexOld:u,lastIndexNew:h}=l;return h-d>0&&c.push({index:d,type:"insert",values:a.slice(d,h)}),u-d>0&&c.push({index:d+(h-d),type:"delete",howMany:u-d}),c}(o,s)}function wm(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function _m(n,e){return n.slice(e).reverse()}function Tr(n,e,t){t=t||function(f,b){return f===b};const i=n.length,r=e.length;if(i>200||r>200||i+r>300)return Tr.fastDiff(n,e,t,!0);let o,s;if(r<i){const f=n;n=e,e=f,o="delete",s="insert"}else o="insert",s="delete";const a=n.length,l=e.length,c=l-a,d={},u={};function h(f){const b=(u[f-1]!==void 0?u[f-1]:-1)+1,k=u[f+1]!==void 0?u[f+1]:-1,w=b>k?-1:1;d[f+w]&&(d[f]=d[f+w].slice(0)),d[f]||(d[f]=[]),d[f].push(b>k?o:s);let _=Math.max(b,k),y=_-f;for(;y<a&&_<l&&t(n[y],e[_]);)y++,_++,d[f].push("equal");return _}let g,p=0;do{for(g=-p;g<c;g++)u[g]=h(g);for(g=c+p;g>c;g--)u[g]=h(g);u[c]=h(c),p++}while(u[c]!==l);return d[c].slice(1)}Tr.fastDiff=km;class Gi{constructor(e,t){m(this,"source"),m(this,"name"),m(this,"path"),m(this,"stop"),m(this,"off"),m(this,"return"),this.source=e,this.name=t,this.path=[],this.stop=function i(){i.called=!0},this.off=function i(){i.called=!0}}}const At=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Tt(){const[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+At[255&n]+At[n>>8&255]+At[n>>16&255]+At[n>>24&255]+At[255&e]+At[e>>8&255]+At[e>>16&255]+At[e>>24&255]+At[255&t]+At[t>>8&255]+At[t>>16&255]+At[t>>24&255]+At[255&i]+At[i>>8&255]+At[i>>16&255]+At[i>>24&255]}const wn={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function vm(n,e){const t=wn.get(e.priority);let i=0,r=n.length;for(;i<r;){const o=i+r>>1;wn.get(n[o].priority)<t?r=o:i=o+1}n.splice(i,0,e)}class v extends Error{constructor(e,t,i){super(function(r,o){const s=new WeakSet,a=(d,u)=>{if(typeof u=="object"&&u!==null){if(s.has(u))return`[object ${u.constructor.name}]`;s.add(u)}return u},l=o?` ${JSON.stringify(o,a)}`:"",c=ym(r);return r+l+c}(e,i)),m(this,"context"),m(this,"data"),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new v(e.message,t);throw i.stack=e.stack,i}}function le(n,e){console.warn(...xm(n,e))}function C2(n,e){console.error(...xm(n,e))}function ym(n){return`
Read more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${n}`}function xm(n,e){const t=ym(n);return e?[n,e,t]:[n,t]}const Cm="45.0.0",A2=new Date(2025,3,7);if(globalThis.CKEDITOR_VERSION)throw new v("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Cm;const Er=Symbol("listeningTo"),Xl=Symbol("emitterId"),Zi=Symbol("delegations"),Am=ye(Object);function ye(n){return n?class extends n{on(e,t,i){this.listenTo(this,e,t,i)}once(e,t,i){let r=!1;this.listenTo(this,e,(o,...s)=>{r||(r=!0,o.off(),t.call(this,o,...s))},i)}off(e,t){this.stopListening(this,e,t)}listenTo(e,t,i,r={}){let o,s;this[Er]||(this[Er]={});const a=this[Er];ec(e)||Tm(e);const l=ec(e);(o=a[l])||(o=a[l]={emitter:e,callbacks:{}}),(s=o.callbacks[t])||(s=o.callbacks[t]=[]),s.push(i),function(c,d,u,h,g){d._addEventListener?d._addEventListener(u,h,g):c._addEventListener.call(d,u,h,g)}(this,e,t,i,r)}stopListening(e,t,i){const r=this[Er];let o=e&&ec(e);const s=r&&o?r[o]:void 0,a=s&&t?s.callbacks[t]:void 0;if(!(!r||e&&!s||t&&!a))if(i)ic(this,e,t,i),a.indexOf(i)!==-1&&(a.length===1?delete s.callbacks[t]:ic(this,e,t,i));else if(a){for(;i=a.pop();)ic(this,e,t,i);delete s.callbacks[t]}else if(s){for(t in s.callbacks)this.stopListening(e,t);delete r[o]}else{for(o in r)this.stopListening(r[o].emitter);delete this[Er]}}fire(e,...t){try{const i=e instanceof Gi?e:new Gi(this,e),r=i.name;let o=function(a,l){if(!a._events)return null;let c=l;do{const d=a._events[c];if(d&&d.callbacks&&d.callbacks.length)return d.callbacks;const u=c.lastIndexOf(":");c=u>-1?c.substring(0,u):""}while(c);return null}(this,r);if(i.path.push(this),o){o=o.slice();for(let a=0;a<o.length;a++){const l=o[a].callback;if(l.call(this,i,...t),i.off.called&&(delete i.off.called,this._removeEventListener(r,l)),i.stop.called)break}}const s=this[Zi];if(s){const a=s.get(r),l=s.get("*");a&&Sm(a,i,t),l&&Sm(l,i,t)}return i.return}catch(i){v.rethrowUnexpectedError(i,this)}}delegate(...e){return{to:(t,i)=>{this[Zi]||(this[Zi]=new Map),e.forEach(r=>{const o=this[Zi].get(r);o?o.set(t,i):this[Zi].set(r,new Map([[t,i]]))})}}}stopDelegating(e,t){if(this[Zi])if(e)if(t){const i=this[Zi].get(e);i&&i.delete(t)}else this[Zi].delete(e);else this[Zi].clear()}_addEventListener(e,t,i){(function(s,a){const l=Em(s);if(l[a])return;let c=a,d=null;const u=[];for(;c!==""&&!l[c];)l[c]={callbacks:[],childEvents:[]},u.push(l[c]),d&&l[c].childEvents.push(d),d=c,c=c.substr(0,c.lastIndexOf(":"));if(c!==""){for(const h of u)h.callbacks=l[c].callbacks.slice();l[c].childEvents.push(d)}})(this,e);const r=tc(this,e),o={callback:t,priority:wn.get(i.priority)};for(const s of r)vm(s,o)}_removeEventListener(e,t){const i=tc(this,e);for(const r of i)for(let o=0;o<r.length;o++)r[o].callback==t&&(r.splice(o,1),o--)}}:Am}function Tm(n,e){n[Xl]||(n[Xl]=e||Tt())}function ec(n){return n[Xl]}function Em(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function tc(n,e){const t=Em(n)[e];if(!t)return[];let i=[t.callbacks];for(let r=0;r<t.childEvents.length;r++){const o=tc(n,t.childEvents[r]);i=i.concat(o)}return i}function Sm(n,e,t){for(let[i,r]of n){r?typeof r=="function"&&(r=r(e.name)):r=e.name;const o=new Gi(e.source,r);o.path=[...e.path],i.fire(o,...t)}}function ic(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}function Sr(n){return n}function Zs(){}function nc(n){return n==null||typeof n!="object"&&typeof n!="function"}function rc(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function oc(n){if(nc(n))return n;if(Array.isArray(n)||rc(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const i=new t(n);return i.lastIndex=n.lastIndex,i}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const i=new t(n.message);return i.stack=n.stack,i.name=n.name,i.cause=n.cause,i}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const i=Object.create(e);return Object.assign(i,n)}return n}function Im(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return!(e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null)&&Object.prototype.toString.call(n)==="[object Object]"}function sc(n){return typeof n=="object"&&n!==null}function Ks(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function Ys(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ye[n]=Am.prototype[n]});const Pm="[object RegExp]",ac="[object String]",lc="[object Number]",cc="[object Boolean]",Qs="[object Arguments]",Mm="[object Symbol]",Vm="[object Date]",Lm="[object Map]",Om="[object Set]",Nm="[object Array]",Rm="[object ArrayBuffer]",Js="[object Object]",zm="[object DataView]",Dm="[object Uint8Array]",Bm="[object Uint8ClampedArray]",Fm="[object Uint16Array]",jm="[object Uint32Array]",$m="[object Int8Array]",Hm="[object Int16Array]",Um="[object Int32Array]",Wm="[object Float32Array]",qm="[object Float64Array]";function Ir(n,e,t,i=new Map,r=void 0){const o=r?.(n,e,t,i);if(o!=null)return o;if(nc(n))return n;if(i.has(n))return i.get(n);if(Array.isArray(n)){const s=new Array(n.length);i.set(n,s);for(let a=0;a<n.length;a++)s[a]=Ir(n[a],a,t,i,r);return Object.hasOwn(n,"index")&&(s.index=n.index),Object.hasOwn(n,"input")&&(s.input=n.input),s}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const s=new RegExp(n.source,n.flags);return s.lastIndex=n.lastIndex,s}if(n instanceof Map){const s=new Map;i.set(n,s);for(const[a,l]of n)s.set(a,Ir(l,a,t,i,r));return s}if(n instanceof Set){const s=new Set;i.set(n,s);for(const a of n)s.add(Ir(a,void 0,t,i,r));return s}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(rc(n)){const s=new(Object.getPrototypeOf(n)).constructor(n.length);i.set(n,s);for(let a=0;a<n.length;a++)s[a]=Ir(n[a],a,t,i,r);return s}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const s=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return i.set(n,s),Wn(s,n,t,i,r),s}if(typeof File<"u"&&n instanceof File){const s=new File([n],n.name,{type:n.type});return i.set(n,s),Wn(s,n,t,i,r),s}if(n instanceof Blob){const s=new Blob([n],{type:n.type});return i.set(n,s),Wn(s,n,t,i,r),s}if(n instanceof Error){const s=new n.constructor;return i.set(n,s),s.message=n.message,s.name=n.name,s.stack=n.stack,s.cause=n.cause,Wn(s,n,t,i,r),s}if(typeof n=="object"&&function(s){switch(Ys(s)){case Qs:case Nm:case Rm:case zm:case cc:case Vm:case Wm:case qm:case $m:case Hm:case Um:case Lm:case lc:case Js:case Pm:case Om:case ac:case Mm:case Dm:case Bm:case Fm:case jm:return!0;default:return!1}}(n)){const s=Object.create(Object.getPrototypeOf(n));return i.set(n,s),Wn(s,n,t,i,r),s}return n}function Wn(n,e,t=n,i,r){const o=[...Object.keys(e),...Ks(e)];for(let s=0;s<o.length;s++){const a=o[s],l=Object.getOwnPropertyDescriptor(n,a);(l==null||l.writable)&&(n[a]=Ir(e[a],a,t,i,r))}}function Gm(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function Zm(n,e,t){return xo(n,e,void 0,void 0,void 0,void 0,t)}function xo(n,e,t,i,r,o,s){const a=s(n,e,t,i,r,o);if(a!==void 0)return a;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return n===e;case"number":return n===e||Object.is(n,e);case"object":return Co(n,e,o,s)}return Co(n,e,o,s)}function Co(n,e,t,i){if(Object.is(n,e))return!0;let r=Ys(n),o=Ys(e);if(r===Qs&&(r=Js),o===Qs&&(o=Js),r!==o)return!1;switch(r){case ac:return n.toString()===e.toString();case lc:return Gm(n.valueOf(),e.valueOf());case cc:case Vm:case Mm:return Object.is(n.valueOf(),e.valueOf());case Pm:return n.source===e.source&&n.flags===e.flags;case"[object Function]":return n===e}const s=(t=t??new Map).get(n),a=t.get(e);if(s!=null&&a!=null)return s===e;t.set(n,e),t.set(e,n);try{switch(r){case Lm:if(n.size!==e.size)return!1;for(const[l,c]of n.entries())if(!e.has(l)||!xo(c,e.get(l),l,n,e,t,i))return!1;return!0;case Om:{if(n.size!==e.size)return!1;const l=Array.from(n.values()),c=Array.from(e.values());for(let d=0;d<l.length;d++){const u=l[d],h=c.findIndex(g=>xo(u,g,void 0,n,e,t,i));if(h===-1)return!1;c.splice(h,1)}return!0}case Nm:case Dm:case Bm:case Fm:case jm:case"[object BigUint64Array]":case $m:case Hm:case Um:case"[object BigInt64Array]":case Wm:case qm:if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let l=0;l<n.length;l++)if(!xo(n[l],e[l],l,n,e,t,i))return!1;return!0;case Rm:return n.byteLength===e.byteLength&&Co(new Uint8Array(n),new Uint8Array(e),t,i);case zm:return n.byteLength===e.byteLength&&n.byteOffset===e.byteOffset&&Co(new Uint8Array(n),new Uint8Array(e),t,i);case"[object Error]":return n.name===e.name&&n.message===e.message;case Js:{if(!(Co(n.constructor,e.constructor,t,i)||Im(n)&&Im(e)))return!1;const l=[...Object.keys(n),...Ks(n)],c=[...Object.keys(e),...Ks(e)];if(l.length!==c.length)return!1;for(let d=0;d<l.length;d++){const u=l[d],h=n[u];if(!Object.hasOwn(e,u)||!xo(h,e[u],u,n,e,t,i))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function Xs(n,e){return Zm(n,e,Zs)}function ea(n){return typeof n=="function"}function T2(n){return n!=null&&typeof n!="function"&&function(e){return Number.isSafeInteger(e)&&e>=0}(n.length)}function Km(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}function Ym(n){return Object.is(n,-0)?"-0":n.toString()}function dc(n){const e=[],t=n.length;if(t===0)return e;let i=0,r="",o="",s=!1;for(n.charCodeAt(0)===46&&(e.push(""),i++);i<t;){const a=n[i];o?a==="\\"&&i+1<t?(i++,r+=n[i]):a===o?o="":r+=a:s?a==='"'||a==="'"?o=a:a==="]"?(s=!1,e.push(r),r=""):r+=a:a==="["?(s=!0,r&&(e.push(r),r="")):a==="."?r&&(e.push(r),r=""):r+=a,i++}return r&&e.push(r),e}function _n(n,e,t){if(n==null)return t;switch(typeof e){case"string":{const i=n[e];return i===void 0?Km(e)?_n(n,dc(e),t):t:i}case"number":case"symbol":{typeof e=="number"&&(e=Ym(e));const i=n[e];return i===void 0?t:i}default:{if(Array.isArray(e))return function(r,o,s){if(o.length===0)return s;let a=r;for(let l=0;l<o.length;l++){if(a==null)return s;a=a[o[l]]}return a===void 0?s:a}(n,e,t);const i=n[e=Object.is(e?.valueOf(),-0)?"-0":String(e)];return i===void 0?t:i}}}function mi(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function ta(n,e){return function(t,i){return Ir(t,void 0,t,new Map,i)}(n,(t,i,r,o)=>{const s=e?.(t,i,r,o);if(s!=null)return s;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case lc:case ac:case cc:{const a=new n.constructor(n?.valueOf());return Wn(a,n),a}case Qs:{const a={};return Wn(a,n),a.length=n.length,a[Symbol.iterator]=n[Symbol.iterator],a}default:return}})}function Wt(n){return ta(n)}const E2=/^(?:0|[1-9]\d*)$/;function S2(n,e=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<e;case"symbol":return!1;case"string":return E2.test(n)}}function Qm(n){return n!==null&&typeof n=="object"&&Ys(n)==="[object Arguments]"}function I2(n){return function(e){return typeof e=="symbol"||e instanceof Symbol}(n)?NaN:Number(n)}function P2(n){const e=function(i){return i?(i=I2(i))===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i==i?i:0:i===0?i:0}(n),t=e%1;return t?e-t:e}function Jm(n){return typeof n=="string"||n instanceof String}function Xm(n,e,t){const i=Array.isArray(e)?e:typeof e=="string"?dc(e):[e];let r=n;for(let o=0;o<i.length-1;o++){const s=i[o],a=i[o+1];r[s]==null&&(r[s]=S2(a)?[]:{}),r=r[s]}return r[i[i.length-1]]=t,n}function M2(n,e,{signal:t,edges:i}={}){let r,o=null;const s=i!=null&&i.includes("leading"),a=i==null||i.includes("trailing"),l=()=>{o!==null&&(n.apply(r,o),r=void 0,o=null)};let c=null;const d=()=>{c!=null&&clearTimeout(c),c=setTimeout(()=>{c=null,a&&l(),h()},e)},u=()=>{c!==null&&(clearTimeout(c),c=null)},h=()=>{u(),r=void 0,o=null},g=function(...p){if(t!=null&&t.aborted)return;r=this,o=p;const f=c==null;d(),s&&f&&l()};return g.schedule=d,g.cancel=h,g.flush=()=>{u(),l()},t?.addEventListener("abort",h,{once:!0}),g}function gi(n,e=0,t={}){typeof t!="object"&&(t={});const{signal:i,leading:r=!1,trailing:o=!0,maxWait:s}=t,a=Array(2);let l;r&&(a[0]="leading"),o&&(a[1]="trailing");let c=null;const d=M2(function(...h){l=n.apply(this,h),c=null},e,{signal:i,edges:a}),u=function(...h){if(s!=null){if(c===null)c=Date.now();else if(Date.now()-c>=s)return l=n.apply(this,h),c=Date.now(),d.cancel(),d.schedule(),l}return d.apply(this,h),l};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}function Pr(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:i=!0,trailing:r=!0,signal:o}=t;return gi(n,e,{leading:i,trailing:r,signal:o,maxWait:e})}function uc(n){if(n==null)return"";if(Array.isArray(n))return n.map(uc).join(",");const e=String(n);return e==="0"&&Object.is(Number(n),-0)?"-0":e}function eg(n){return rc(n)}function V2(n){if(n==null)return[];switch(typeof n){case"object":case"function":return T2(n)?function(e){const t=function(r,o){if((r=P2(r))<1||!Number.isSafeInteger(r))return[];const s=new Array(r);for(let a=0;a<r;a++)s[a]=typeof o=="function"?o(a):a;return s}(e.length,r=>`${r}`),i=new Set(t);return function(r){return typeof Buffer<"u"&&Buffer.isBuffer(r)}(e)&&(i.add("offset"),i.add("parent")),eg(e)&&(i.add("buffer"),i.add("byteLength"),i.add("byteOffset")),[...t,...ia(e).filter(r=>!i.has(r))]}(n):function(e){const t=e?.constructor;return e===(typeof t=="function"?t.prototype:Object.prototype)}(n)?function(e){return ia(e).filter(t=>t!=="constructor")}(n):ia(n);default:return ia(Object(n))}}function ia(n){const e=[];for(const t in n)e.push(t);return e}function tg(n,...e){for(let t=0;t<e.length;t++)L2(n,e[t]);return n}function L2(n,e){const t=V2(e);for(let i=0;i<t.length;i++){const r=t[i];Gm(n[r],e[r])||(n[r]=e[r])}}function ig(n,e){const t={},i=Object.keys(n);for(let r=0;r<i.length;r++){const o=i[r],s=n[o];t[o]=e(s,o,n)}return t}function O2(n,e){switch(typeof(e=e??Sr)){case"string":case"symbol":case"number":case"object":return ig(n,(t=e,function(i){return _n(i,t)}));case"function":return ig(n,e)}var t}function Ai(n){var e;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null?!1:!!((e=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&e.writable)&&n.toString()===`[object ${i}]`}let t=n;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===t}function N2(n,...e){const t=e.slice(0,-1),i=e[e.length-1];let r=n;for(let o=0;o<t.length;o++)r=hc(r,t[o],i,new Map);return r}function hc(n,e,t,i){if(nc(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(i.has(e))return oc(i.get(e));if(i.set(e,n),Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]=e[o]??void 0}const r=[...Object.keys(e),...Ks(e)];for(let o=0;o<r.length;o++){const s=r[o];let a=e[s],l=n[s];if(Qm(a)&&(a={...a}),Qm(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Wt(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const d=[],u=Reflect.ownKeys(l);for(let h=0;h<u.length;h++){const g=u[h];d[g]=l[g]}l=d}else l=[];const c=t(l,a,s,n,e,i);c!=null?n[s]=c:Array.isArray(a)||sc(l)&&sc(a)?n[s]=hc(l,a,t,i):l==null&&Ai(a)?n[s]=hc({},a,t,i):l==null&&eg(a)?n[s]=Wt(a):l!==void 0&&a===void 0||(n[s]=a)}return n}function mc(n,...e){return N2(n,...e,Zs)}function R2(n,e){if(n==null)return!0;switch(typeof e){case"symbol":case"number":case"object":if(Array.isArray(e))return ng(n,e);if(typeof e=="number"?e=Ym(e):typeof e=="object"&&(e=Object.is(e?.valueOf(),-0)?"-0":String(e)),n?.[e]===void 0)return!0;try{return delete n[e],!0}catch{return!1}case"string":if(n?.[e]===void 0&&Km(e))return ng(n,dc(e));try{return delete n[e],!0}catch{return!1}}}function ng(n,e){const t=_n(n,e.slice(0,-1),n),i=e[e.length-1];if(t?.[i]===void 0)return!0;try{return delete t[i],!0}catch{return!1}}function vn(n){return sc(n)&&n.nodeType===1&&!Ai(n)}function z2(n,e){if(!Number.isInteger(n)||n<0)throw new Error("n must be a non-negative integer.");let t=0;return(...i)=>{if(++t>=n)return e(...i)}}function rg(n,e,t=Zs){return typeof t!="function"&&(t=Zs),Zm(n,e,(...i)=>{const r=t(...i);return r!==void 0?!!r:n instanceof Map&&e instanceof Map||n instanceof Set&&e instanceof Set?rg(Array.from(n),Array.from(e),z2(2,t)):void 0})}function og(n){return function(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}(uc(n))}const Ao=Symbol("observableProperties"),To=Symbol("boundObservables"),Eo=Symbol("boundProperties"),qn=Symbol("decoratedMethods"),sg=Symbol("decoratedOriginal"),ag=xe(ye());function xe(n){var e,t,i,r,o;return n?class extends(o=n,r=Ao,i=qn,t=Eo,e=To,o){constructor(){super(...arguments),m(this,r),m(this,i),m(this,t),m(this,e)}set(s,a){if(mi(s))return void Object.keys(s).forEach(c=>{this.set(c,s[c])},this);gc(this);const l=this[Ao];if(s in this&&!l.has(s))throw new v("observable-set-cannot-override",this);Object.defineProperty(this,s,{enumerable:!0,configurable:!0,get:()=>l.get(s),set(c){const d=l.get(s);let u=this.fire(`set:${s}`,s,c,d);u===void 0&&(u=c),d===u&&l.has(s)||(l.set(s,u),this.fire(`change:${s}`,s,u,d))}}),this[s]=a}bind(...s){if(!s.length||!lg(s))throw new v("observable-bind-wrong-properties",this);if(new Set(s).size!==s.length)throw new v("observable-bind-duplicate-properties",this);gc(this);const a=this[Eo];s.forEach(c=>{if(a.has(c))throw new v("observable-bind-rebind",this)});const l=new Map;return s.forEach(c=>{const d={property:c,to:[]};a.set(c,d),l.set(c,d)}),{to:D2,toMany:B2,_observable:this,_bindProperties:s,_to:[],_bindings:l}}unbind(...s){if(!this[Ao])return;const a=this[Eo],l=this[To];if(s.length){if(!lg(s))throw new v("observable-unbind-wrong-properties",this);s.forEach(c=>{const d=a.get(c);d&&(d.to.forEach(([u,h])=>{const g=l.get(u),p=g[h];p.delete(d),p.size||delete g[h],Object.keys(g).length||(l.delete(u),this.stopListening(u,"change"))}),a.delete(c))})}else l.forEach((c,d)=>{this.stopListening(d,"change")}),l.clear(),a.clear()}decorate(s){gc(this);const a=this[s];if(!a)throw new v("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:s});this.on(s,(l,c)=>{l.return=a.apply(this,c)}),this[s]=function(...l){return this.fire(s,l)},this[s][sg]=a,this[qn]||(this[qn]=[]),this[qn].push(s)}stopListening(s,a,l){if(!s&&this[qn]){for(const c of this[qn])this[c]=this[c][sg];delete this[qn]}super.stopListening(s,a,l)}}:ag}function gc(n){n[Ao]||(Object.defineProperty(n,Ao,{value:new Map}),Object.defineProperty(n,To,{value:new Map}),Object.defineProperty(n,Eo,{value:new Map}))}function D2(...n){const e=function(...o){if(!o.length)throw new v("observable-bind-to-parse-error",null);const s={to:[]};let a;return typeof o[o.length-1]=="function"&&(s.callback=o.pop()),o.forEach(l=>{if(typeof l=="string")a.properties.push(l);else{if(typeof l!="object")throw new v("observable-bind-to-parse-error",null);a={observable:l,properties:[]},s.to.push(a)}}),s}(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new v("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new v("observable-bind-to-extra-callback",this);var r;e.to.forEach(o=>{if(o.properties.length&&o.properties.length!==i)throw new v("observable-bind-to-properties-length",this);o.properties.length||(o.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),r=this._observable,this._to.forEach(o=>{const s=r[To];let a;s.get(o.observable)||r.listenTo(o.observable,"change",(l,c)=>{a=s.get(o.observable)[c],a&&a.forEach(d=>{cg(r,d.property)})})}),function(o){let s;o._bindings.forEach((a,l)=>{o._to.forEach(c=>{s=c.properties[a.callback?0:o._bindProperties.indexOf(l)],a.to.push([c.observable,s]),function(d,u,h,g){const p=d[To],f=p.get(h),b=f||{};b[g]||(b[g]=new Set),b[g].add(u),f||p.set(h,b)}(o._observable,a,c.observable,s)})})}(this),this._bindProperties.forEach(o=>{cg(this._observable,o)})}function B2(n,e,t){if(this._bindings.size>1)throw new v("observable-bind-to-many-not-one-binding",this);this.to(...function(i,r){const o=i.map(s=>[s,r]);return Array.prototype.concat.apply([],o)}(n,e),t)}function lg(n){return n.every(e=>typeof e=="string")}function cg(n,e){const t=n[Eo].get(e);let i;t.callback?i=t.callback.apply(n,t.to.map(r=>r[0][r[1]])):(i=t.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=i:n.set(e,i)}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{xe[n]=ag.prototype[n]});function pc(n){let e=0;for(const t of n)e++;return e}function Et(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}function qt(n){return!(!n||!n[Symbol.iterator])}function pi(n,e,t={},i=[]){const r=t&&t.xmlns,o=r?n.createElementNS(r,e):n.createElement(e);for(const s in t)o.setAttribute(s,t[s]);!Jm(i)&&qt(i)||(i=[i]);for(let s of i)Jm(s)&&(s=n.createTextNode(s)),o.appendChild(s);return o}class dg{constructor(e,t){m(this,"_config"),this._config=Object.create(null),t&&this.define(ug(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,r=!1){if(Ai(t))return void this._setObjectToTarget(e,t,r);const o=t.split(".");t=o.pop();for(const s of o)Ai(e[s])||(e[s]=Object.create(null)),e=e[s];if(Ai(i))return Ai(e[t])||(e[t]=Object.create(null)),e=e[t],void this._setObjectToTarget(e,i,r);r&&e[t]!==void 0||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const r of i){if(!Ai(e[r])){e=null;break}e=e[r]}return e?ug(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(r=>{this._setToTarget(e,r,t[r],i)})}}function ug(n){return ta(n,F2)}function F2(n){return vn(n)||typeof n=="function"?n:void 0}function yn(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}function na(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const hg=Mt(ye());function Mt(n){return n?class extends n{listenTo(e,t,i,r={}){if(yn(e)||na(e)||e instanceof R.window.EventTarget){const o={capture:!!r.useCapture,passive:!!r.usePassive},s=this._getProxyEmitter(e,o)||new j2(e,o);this.listenTo(s,t,i,r)}else super.listenTo(e,t,i,r)}stopListening(e,t,i){if(yn(e)||na(e)||e instanceof R.window.EventTarget){const r=this._getAllProxyEmitters(e);for(const o of r)this.stopListening(o,t,i)}else super.stopListening(e,t,i)}_getProxyEmitter(e,t){return function(i,r){const o=i[Er];return o&&o[r]?o[r].emitter:null}(this,mg(e,t))}_getAllProxyEmitters(e){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(t=>this._getProxyEmitter(e,t)).filter(t=>!!t)}}:hg}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Mt[n]=hg.prototype[n]});class j2 extends ye(){constructor(e,t){super(),m(this,"_domNode"),m(this,"_options"),m(this,"_domListeners"),Tm(this,mg(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),ye().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){ye().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function mg(n,e){let t=function(i){return i["data-ck-expando"]||(i["data-ck-expando"]=Tt())}(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}function gg(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function $2(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}function pg(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function fg(n){if(!n.target)return null;const e=n.target.ownerDocument,t=n.clientX,i=n.clientY;let r=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?r=e.caretRangeFromPoint(t,i):n.rangeParent&&(r=e.createRange(),r.setStart(n.rangeParent,n.rangeOffset),r.collapse(!0)),r}function Ye(n){return Object.prototype.toString.call(n)=="[object Text]"}function ra(n){return Object.prototype.toString.apply(n)=="[object Range]"}function bg(n){return n&&n.parentNode?n.offsetParent===R.document.body?null:n.offsetParent:null}const kg=["top","right","bottom","left","width","height"];class K{constructor(e){m(this,"top"),m(this,"right"),m(this,"bottom"),m(this,"left"),m(this,"width"),m(this,"height"),m(this,"_source");const t=ra(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),fc(e)||t)if(t){const i=K.getDomRangeRects(e);oa(this,K.getBoundingRect(i))}else oa(this,e.getBoundingClientRect());else if(na(e)){const{innerWidth:i,innerHeight:r}=e;oa(this,{top:0,right:i,bottom:r,left:0,width:i,height:r})}else oa(this,e)}clone(){return new K(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const i=new K(t);return i._source=this._source,i}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(wg(e))return t;let i,r=e,o=e.parentNode||e.commonAncestorContainer;for(;o&&!wg(o);){const a=((s=o)instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).overflow:"visible")==="visible";r instanceof HTMLElement&&_g(r)==="absolute"&&(i=r);const l=_g(o);if(a||i&&(l==="relative"&&a||l!=="relative")){r=o,o=o.parentNode;continue}const c=new K(o),d=t.getIntersection(c);if(!d)return null;d.getArea()<t.getArea()&&(t=d),r=o,o=o.parentNode}var s;return t}isEqual(e){for(const t of kg)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=R.window,i=this.clone().moveBy(e,t);if(fc(i._source)){const r=bg(i._source);r&&function(o,s){const a=new K(s),l=pg(s);let c=0,d=0;c-=a.left,d-=a.top,c+=s.scrollLeft,d+=s.scrollTop,c-=l.left,d-=l.top,o.moveBy(c,d)}(i,r)}return i}excludeScrollbarsAndBorders(){const e=this._source;let t,i,r;if(na(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{const o=pg(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,r==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const r of i)t.push(new K(r));else{let r=e.startContainer;Ye(r)&&(r=r.parentNode);const o=new K(r.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const r of e)i++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new K(t))}}function oa(n,e){for(const t of kg)n[t]=e[t]}function wg(n){return!!fc(n)&&n===n.ownerDocument.body}function fc(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function _g(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}const bc=class nt{constructor(e,t){m(this,"_element"),m(this,"_callback"),nt._observerInstance||nt._createObserver(),this._element=e,this._callback=t,nt._addElementCallback(e,t),nt._observerInstance.observe(e)}get element(){return this._element}destroy(){nt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){nt._elementCallbacks||(nt._elementCallbacks=new Map);let i=nt._elementCallbacks.get(e);i||(i=new Set,nt._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=nt._getElementCallbacks(e);i&&(i.delete(t),i.size||(nt._elementCallbacks.delete(e),nt._observerInstance.unobserve(e))),nt._elementCallbacks&&!nt._elementCallbacks.size&&(nt._observerInstance=null,nt._elementCallbacks=null)}static _getElementCallbacks(e){return nt._elementCallbacks?nt._elementCallbacks.get(e):null}static _createObserver(){nt._observerInstance=new R.window.ResizeObserver(e=>{for(const t of e){const i=nt._getElementCallbacks(t.target);if(i)for(const r of i)r(t)}})}};m(bc,"_observerInstance",null),m(bc,"_elementCallbacks",null);let So=bc;function vg(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function xn(n){return e=>e+n}function Io(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function yg(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}function Po(n){return n&&n.nodeType===Node.COMMENT_NODE}function H2(n){try{R.document.createAttribute(n)}catch{return!1}return!0}function Ki(n){return!!n&&(Ye(n)?Ki(n.parentElement):!!n.getClientRects&&!!n.getClientRects().length)}function kc({element:n,target:e,positions:t,limiter:i,fitInViewport:r,viewportOffsetConfig:o}){ea(e)&&(e=e()),ea(i)&&(i=i());const s=bg(n),a=function(h){h=Object.assign({top:0,bottom:0,left:0,right:0},h);const g=new K(R.window);return g.top+=h.top,g.height-=h.top,g.bottom-=h.bottom,g.height-=h.bottom,g}(o),l=new K(n),c=xg(e,a);let d;if(!c||!a.getIntersection(c))return null;const u={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(i||r){if(i){const h=xg(i,a);h&&(u.limiterRect=h)}d=function(h,g){const{elementRect:p}=g,f=p.getArea(),b=h.map(_=>new Cg(_,g)).filter(_=>!!_.name);let k=0,w=null;for(const _ of b){const{limiterIntersectionArea:y,viewportIntersectionArea:x}=_;if(y===f)return _;const A=x**2+y**2;A>k&&(k=A,w=_)}return w}(t,u)}else d=new Cg(t[0],u);return d}function xg(n,e){const t=new K(n).getVisible();return t?t.getIntersection(e):null}class Cg{constructor(e,t){m(this,"name"),m(this,"config"),m(this,"_positioningFunctionCoordinates"),m(this,"_options"),m(this,"_cachedRect"),m(this,"_cachedAbsoluteRect");const i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;const{left:r,top:o,name:s,config:a}=i;this.name=s,this.config=a,this._positioningFunctionCoordinates={left:r,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=this._rect.toAbsoluteRect()),this._cachedAbsoluteRect}}function Ag(n){const e=n.parentNode;e&&e.removeChild(n)}function U2({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:r}){const o=wc(n);let s=o,a=null;for(e=function(l){return typeof l=="number"?{top:l,bottom:l,left:l,right:l}:l}(e);s;){let l;l=G2(s==o?n:a),q2({parent:l,getRect:()=>_c(n,s),alignToTop:i,ancestorOffset:t,forceScroll:r});let c=_c(n,s);const d=_c(l,s);if(c.height>d.height){const u=c.getIntersection(d);u&&(c=u)}if(W2({window:s,rect:c,viewportOffset:e,alignToTop:i,forceScroll:r}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}function W2({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:r}){const o=e.clone().moveBy(0,r.bottom),s=e.clone().moveBy(0,-r.top),a=new K(n).excludeScrollbarsAndBorders(),l=t&&i,c=[s,o].every(p=>a.contains(p));let{scrollX:d,scrollY:u}=n;const h=d,g=u;l?u-=a.top-e.top+r.top:c||(Eg(s,a)?u-=a.top-e.top+r.top:Tg(o,a)&&(u+=t?e.top-a.top-r.top:e.bottom-a.bottom+r.bottom)),c||(Sg(e,a)?d-=a.left-e.left+r.left:Ig(e,a)&&(d+=e.right-a.right+r.right)),d==h&&u===g||n.scrollTo(d,u)}function q2({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:r=0,limiterElement:o}){const s=wc(n),a=t&&i;let l,c,d;const u=o||s.document.body;for(;n!=u;)c=e(),l=new K(n).excludeScrollbarsAndBorders(),d=l.contains(c),a?n.scrollTop-=l.top-c.top+r:d||(Eg(c,l)?n.scrollTop-=l.top-c.top+r:Tg(c,l)&&(n.scrollTop+=t?c.top-l.top-r:c.bottom-l.bottom+r)),d||(Sg(c,l)?n.scrollLeft-=l.left-c.left+r:Ig(c,l)&&(n.scrollLeft+=c.right-l.right+r)),n=n.parentNode}function Tg(n,e){return n.bottom>e.bottom}function Eg(n,e){return n.top<e.top}function Sg(n,e){return n.left<e.left}function Ig(n,e){return n.right>e.right}function wc(n){return ra(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function G2(n){if(ra(n)){let e=n.commonAncestorContainer;return Ye(e)&&(e=e.parentNode),e}return n.parentNode}function _c(n,e){const t=wc(n),i=new K(n);if(t===e)return i;{let r=t;for(;r!=e;){const o=r.frameElement,s=new K(o).excludeScrollbarsAndBorders();i.moveBy(s.left,s.top),r=r.parent}}return i}const Z2={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},K2={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Pg={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},ie=X2(),Y2=Object.fromEntries(Object.entries(ie).map(([n,e])=>{let t;return t=e in Pg?Pg[e]:n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function Gn(n){let e;if(typeof n=="string"){if(e=ie[n.toLowerCase()],!e)throw new v("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?ie.alt:0)+(n.ctrlKey?ie.ctrl:0)+(n.shiftKey?ie.shift:0)+(n.metaKey?ie.cmd:0);return e}function Mo(n){return typeof n=="string"&&(n=function(e){return e.split("+").map(t=>t.trim())}(n)),n.map(e=>typeof e=="string"?function(t){if(t.endsWith("!"))return Gn(t.slice(0,-1));const i=Gn(t);return(W.isMac||W.isiOS)&&i==ie.ctrl?ie.cmd:i}(e):e).reduce((e,t)=>t+e,0)}function sa(n,e){let t=Mo(n);const i=W.isMac||W.isiOS;return Object.entries(i?Z2:K2).reduce((r,[o,s])=>(t&ie[o]&&(t&=~ie[o],r+=s),r),"")+(t?Y2[t]:"")}function Q2(n){return n==ie.arrowright||n==ie.arrowleft||n==ie.arrowup||n==ie.arrowdown}function aa(n,e){const t=e==="ltr";switch(n){case ie.arrowleft:return t?"left":"right";case ie.arrowright:return t?"right":"left";case ie.arrowup:return"up";case ie.arrowdown:return"down"}}function J2(n,e){const t=aa(n,e);return t==="down"||t==="right"}function X2(){const n={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++)n[String.fromCharCode(e).toLowerCase()]=e;for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}const ex=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function Mg(n){return ex.includes(n)?"rtl":"ltr"}function Ne(n){return Array.isArray(n)?n:[n]}function tx(n,e,t=1,i){if(typeof t!="number")throw new v("translation-service-quantity-not-a-number",null,{quantity:t});const r=i||R.window.CKEDITOR_TRANSLATIONS,o=function(d){return Object.keys(d).length}(r);o===1&&(n=Object.keys(r)[0]);const s=e.id||e.string;if(o===0||!function(d,u,h){return!!h[d]&&!!h[d].dictionary[u]}(n,s,r))return t!==1?e.plural:e.string;const a=r[n].dictionary,l=r[n].getPluralForm||(d=>d===1?0:1),c=a[s];return typeof c=="string"?c:c[Number(l(t))]}R.window.CKEDITOR_TRANSLATIONS||(R.window.CKEDITOR_TRANSLATIONS={});class ix{constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){m(this,"uiLanguage"),m(this,"uiLanguageDirection"),m(this,"contentLanguage"),m(this,"contentLanguageDirection"),m(this,"t"),m(this,"translations"),this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Mg(this.uiLanguage),this.contentLanguageDirection=Mg(this.contentLanguage),this.translations=function(r){return Array.isArray(r)?r.reduce((o,s)=>mc(o,s)):r}(i),this.t=(r,o)=>this._t(r,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=Ne(t),typeof e=="string"&&(e={string:e});const i=e.plural?t[0]:1;return function(r,o){return r.replace(/%(\d+)/g,(s,a)=>a<o.length?o[a]:s)}(tx(this.uiLanguage,e,i,this.translations),t)}}class ot extends ye(){constructor(e={},t={}){super(),m(this,"_items"),m(this,"_itemMap"),m(this,"_idProperty"),m(this,"_bindToCollection"),m(this,"_bindToExternalToInternalMap"),m(this,"_bindToInternalToExternalMap"),m(this,"_skippedIndexesFromExternal");const i=qt(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new v("collection-add-item-invalid-index",this);let i=0;for(const r of e){const o=this._getItemIdBeforeAdding(r),s=t+i;this._items.splice(s,0,r),this._itemMap.set(o,r),this.fire("add",r,s),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else{if(typeof e!="number")throw new v("collection-get-invalid-arg",this);t=this._items[e]}return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=e[this._idProperty];return t&&this._itemMap.has(t)}}getIndex(e){let t;return t=typeof e=="string"?this._itemMap.get(e):e,t?this._items.indexOf(t):-1}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new v("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(r,o,s)=>{const a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{const c=e(o);if(!c)return void this._skippedIndexesFromExternal.push(s);let d=s;for(const u of this._skippedIndexesFromExternal)s>u&&d--;for(const u of t._skippedIndexesFromExternal)d>=u&&d++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,d);for(let u=0;u<t._skippedIndexesFromExternal.length;u++)d<=t._skippedIndexesFromExternal[u]&&t._skippedIndexesFromExternal[u]++}};for(const r of t)i(0,r,t.getIndex(r));this.listenTo(t,"add",i),this.listenTo(t,"remove",(r,o,s)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(s<c&&l.push(c-1),s>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],typeof i!="string")throw new v("collection-add-invalid-id",this);if(this.get(i))throw new v("collection-add-item-already-exists",this)}else e[t]=i=Tt();return i}_remove(e){let t,i,r,o=!1;const s=this._idProperty;if(typeof e=="string"?(i=e,r=this._itemMap.get(i),o=!r,r&&(t=this._items.indexOf(r))):typeof e=="number"?(t=e,r=this._items[t],o=!r,r&&(i=r[s])):(r=e,i=r[s],t=this._items.indexOf(r),o=t==-1||!this._itemMap.get(i)),o)throw new v("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const a=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(a),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Ce(n){const e=n.next();return e.done?null:e.value}class ge extends Mt(xe()){constructor(){super(),m(this,"_elements",new Set),m(this,"_externalViews",new Set),m(this,"_blurTimeout",null),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(Lg(e))this._addElement(e);else if(Vg(e))this._addView(e);else{if(!e.element)throw new v("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){Lg(e)?this._removeElement(e):Vg(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new v("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const t=this.externalViews.find(i=>function(r,o){return Og(r,o)?!0:!!o.focusTracker.externalViews.find(s=>Og(r,s))}(e,i));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(e=>e.contains(document.activeElement))||this.externalViews.find(e=>e.focusTracker.isFocused&&!e.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function Vg(n){return"focusTracker"in n&&n.focusTracker instanceof ge}function Lg(n){return vn(n)}function Og(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}class Ie{constructor(){m(this,"_listener"),this._listener=new(Mt())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+Gn(i),i)})}set(e,t,i={}){const r=Mo(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(s,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),s.stop()}),s.return=!0)},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Gn(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}function fi(n){return qt(n)?new Map(n):function(e){const t=new Map;for(const i in e)t.set(i,e[i]);return t}(n)}function Ng(n,e,t){const i=n.length,r=e.length;for(let o=i-1;o>=t;o--)n[o+r]=n[o];for(let o=0;o<r;o++)n[t+o]=e[o]}function vc(n,e){let t;function i(...r){i.cancel(),t=setTimeout(()=>n(...r),e)}return i.cancel=()=>{clearTimeout(t)},i}function yc(n){try{if(!n.startsWith("ey"))return null;const e=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(e)}catch{return null}}function nx(n){const e=Array.isArray(n)?n:[n],t=function(){const o=[];for(let s=0;s<256;s++){let a=s;for(let l=0;l<8;l++)1&a?a=3988292384^a>>>1:a>>>=1;o[s]=a}return o}();let i=-1;const r=e.map(o=>Array.isArray(o)?o.join(""):String(o)).join("");for(let o=0;o<r.length;o++)i=i>>>8^t[255&(i^r.charCodeAt(o))];return i=~i>>>0,i.toString(16).padStart(8,"0")}function rx(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function ox(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function sx(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function xc(n,e){return ox(n.charAt(e-1))&&sx(n.charAt(e))}function Cc(n,e){return rx(n.charAt(e))}const ax=lx();function Rg(n,e){const t=String(n).matchAll(ax);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function lx(){const n=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")].map(t=>t.source).join("|")+")";return new RegExp(`${n}|${e}(?:\u200D${e})*`,"ug")}class C extends xe(){constructor(e){super(),m(this,"editor"),m(this,"_disableStack",new Set),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",zg,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",zg),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function zg(n){n.return=!1,n.stop()}class G extends xe(){constructor(e){super(),m(this,"editor"),m(this,"_isEnabledBasedOnSelection"),m(this,"_affectsData"),m(this,"_disableStack"),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const i=e.model.document.selection,r=i.getFirstPosition().root.rootName!="$graveyard"&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Dg,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Dg),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function Dg(n){n.return=!1,n.stop()}class Bg extends G{constructor(){super(...arguments),m(this,"_childCommandsDefinitions",[])}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){vm(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}class Fg extends ye(){constructor(e,t=[],i=[]){super(),m(this,"_context"),m(this,"_plugins",new Map),m(this,"_availablePlugins"),m(this,"_contextPlugins"),this._context=e,this._availablePlugins=new Map;for(const r of t)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(const[r,o]of i)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new v("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const r=this,o=this._context;(function p(f,b=new Set){f.forEach(k=>{l(k)&&(b.has(k)||(b.add(k),k.pluginName&&!r._availablePlugins.has(k.pluginName)&&r._availablePlugins.set(k.pluginName,k),k.requires&&p(k.requires,b)))})})(e),h(e);const s=[...function p(f,b=new Set){return f.map(k=>l(k)?k:r._availablePlugins.get(k)).reduce((k,w)=>b.has(w)?k:(b.add(w),w.requires&&(h(w.requires,w),p(w.requires,b).forEach(_=>k.add(_))),k.add(w)),new Set)}(e.filter(p=>!d(p,t)))];(function(p,f){for(const b of f){if(typeof b!="function")throw new v("plugincollection-replace-plugin-invalid-type",null,{pluginItem:b});const k=b.pluginName;if(!k)throw new v("plugincollection-replace-plugin-missing-name",null,{pluginItem:b});if(b.requires&&b.requires.length)throw new v("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:k});const w=r._availablePlugins.get(k);if(!w)throw new v("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:k});const _=p.indexOf(w);if(_===-1){if(r._contextPlugins.has(w))return;throw new v("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:k})}if(w.requires&&w.requires.length)throw new v("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:k});p.splice(_,1,b),r._availablePlugins.set(k,b)}})(s,i);const a=function(p){return p.map(f=>{let b=r._contextPlugins.get(f);return b=b||new f(o),r._add(f,b),b})}(s);return g(a,"init").then(()=>g(a,"afterInit")).then(()=>a);function l(p){return typeof p=="function"}function c(p){return l(p)&&!!p.isContextPlugin}function d(p,f){return f.some(b=>b===p||u(p)===b||u(b)===p)}function u(p){return l(p)?p.pluginName||p.name:p}function h(p,f=null){p.map(b=>l(b)?b:r._availablePlugins.get(b)||b).forEach(b=>{(function(k,w){if(!l(k))throw w?new v("plugincollection-soft-required",o,{missingPlugin:k,requiredBy:u(w)}):new v("plugincollection-plugin-not-found",o,{plugin:k})})(b,f),function(k,w){if(c(w)&&!c(k))throw new v("plugincollection-context-required",o,{plugin:u(k),requiredBy:u(w)})}(b,f),function(k,w){if(w&&d(k,t))throw new v("plugincollection-required",o,{plugin:u(k),requiredBy:u(w)})}(b,f)})}function g(p,f){return p.reduce((b,k)=>k[f]?r._contextPlugins.has(k)?b:b.then(k[f].bind(k)):b,Promise.resolve())}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy!="function"||this._contextPlugins.has(t)||e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new v("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}class la{constructor(e){m(this,"config"),m(this,"plugins"),m(this,"locale"),m(this,"t"),m(this,"editors"),m(this,"_contextOwner",null);const{translations:t,...i}=e||{};this.config=new dg(i,this.constructor.defaultConfig);const r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new Fg(this,r);const o=this.config.get("language")||{};this.locale=new ix({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new ot}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new v("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new v("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new v("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}m(la,"defaultConfig"),m(la,"builtinPlugins");class jg extends xe(){constructor(e){super(),m(this,"context"),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}const Vo=new WeakMap;let $g=!1;function Ac({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:r=!1}){const o=n.document;function s(a){const l={text:a,isDirectHost:i,keepOnFocus:r,hostElement:i?e:null};Vo.get(o).set(e,l),n.change(c=>Ec([[e,l]],c))}Vo.has(o)||(Vo.set(o,new Map),o.registerPostFixer(a=>Ec(Vo.get(o),a)),o.on("change:isComposing",()=>{n.change(a=>Ec(Vo.get(o),a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>s(c)),e.placeholder?s(e.placeholder):t&&s(t),t&&function(){$g||le("enableplaceholder-deprecated-text-option"),$g=!0}()}function Hg(n,e){return!e.hasClass("ck-placeholder")&&(n.addClass("ck-placeholder",e),!0)}function Tc(n,e){return!!e.hasClass("ck-placeholder")&&(n.removeClass("ck-placeholder",e),!0)}function Ug(n,e){if(!n.isAttached()||function(r){for(const o of r.getChildren())if(!o.is("uiElement"))return!0;return!1}(n))return!1;const t=n.document,i=t.selection.anchor;return(!t.isComposing||!i||i.parent!==n)&&(!!e||!t.isFocused||!!i&&i.parent!==n)}function Ec(n,e){const t=[];let i=!1;for(const[r,o]of n)o.isDirectHost&&(t.push(r),Wg(e,r,o)&&(i=!0));for(const[r,o]of n){if(o.isDirectHost)continue;const s=cx(r);s&&(t.includes(s)||(o.hostElement=s,Wg(e,r,o)&&(i=!0)))}return i}function Wg(n,e,t){const{text:i,isDirectHost:r,hostElement:o}=t;let s=!1;return o.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,o),s=!0),(r||e.childCount==1)&&Ug(o,t.keepOnFocus)?Hg(n,o)&&(s=!0):Tc(n,o)&&(s=!0),s}function cx(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}let Zn=class{is(){throw new Error("is() method is abstract")}},Kn=class extends ye(Zn){constructor(n){super(),m(this,"document"),m(this,"parent"),this.document=n,this.parent=null}get index(){let n;if(!this.parent)return null;if((n=this.parent.getChildIndex(this))==-1)throw new v("view-node-not-found-in-parent",this);return n}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.root.is("rootElement")}getPath(){const n=[];let e=this;for(;e.parent;)n.unshift(e.index),e=e.parent;return n}getAncestors(n={}){const e=[];let t=n.includeSelf?this:this.parent;for(;t;)e[n.parentFirst?"push":"unshift"](t),t=t.parent;return e}getCommonAncestor(n,e={}){const t=this.getAncestors(e),i=n.getAncestors(e);let r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const e=this.getPath(),t=n.getPath(),i=Et(e,t);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<t[i]}}isAfter(n){return this!=n&&this.root===n.root&&!this.isBefore(n)}_remove(){this.parent._removeChildren(this.index)}_fireChange(n,e,t){this.fire(`change:${n}`,e,t),this.parent&&this.parent._fireChange(n,e,t)}toJSON(){const n=oc(this);return delete n.parent,n}};Kn.prototype.is=function(n){return n==="node"||n==="view:node"};let bt=class Zu extends Kn{constructor(e,t){super(e),m(this,"_textData"),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Zu&&(this===e||this.data===e.data)}_clone(){return new Zu(this.document,this.data)}};bt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let Yi=class extends Zn{constructor(n,e,t){if(super(),m(this,"textNode"),m(this,"data"),m(this,"offsetInText"),this.textNode=n,e<0||e>n.data.length)throw new v("view-textproxy-wrong-offsetintext",this);if(t<0||e+t>n.data.length)throw new v("view-textproxy-wrong-length",this);this.data=n.data.substring(e,e+t),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(n={}){const e=[];let t=n.includeSelf?this.textNode:this.parent;for(;t!==null;)e[n.parentFirst?"push":"unshift"](t),t=t.parent;return e}};Yi.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class bl{constructor(){m(this,"_consumables",new Map)}add(e,t){let i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new dx(e),this._consumables.set(e,i)),i.add(t?Lo(t):e._getConsumables()))}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(Lo(t))}consume(e,t){if(e.is("$text")||e.is("documentFragment"))return!!this.test(e,t)&&(this._consumables.set(e,!1),!0);const i=this._consumables.get(e);return i!==void 0&&i.consume(Lo(t))}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(Lo(t)))}static createFrom(e,t){if(t||(t=new bl),e.is("$text"))t.add(e);else if(e.is("element")||e.is("documentFragment")){t.add(e);for(const i of e.getChildren())bl.createFrom(i,t)}return t}}class dx{constructor(e){m(this,"element"),m(this,"_canConsumeName",null),m(this,"_attributes",new Map),this.element=e}add(e){e.name&&(this._canConsumeName=!0);for(const[t,i]of e.attributes)if(i){let r=this._attributes.get(t);r&&typeof r!="boolean"||(r=new Map,this._attributes.set(t,r)),r.set(i,!0)}else{if(t=="style"||t=="class")throw new v("viewconsumable-invalid-attribute",this);this._attributes.set(t,!0)}}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const[t,i]of e.attributes){const r=this._attributes.get(t);if(r===void 0)return null;if(r===!1)return!1;if(r!==!0){if(i){const o=r.get(i);if(o===void 0)return null;if(!o)return!1}else for(const o of r.values())if(!o)return!1}}return!0}consume(e){if(!this.test(e))return!1;e.name&&(this._canConsumeName=!1);for(const[t,i]of e.attributes){const r=this._attributes.get(t);if(typeof r=="boolean")for(const[o]of this.element._getConsumables(t,i).attributes)this._attributes.set(o,!1);else if(i)for(const[,o]of this.element._getConsumables(t,i).attributes)r.set(o,!1);else for(const o of r.keys())r.set(o,!1)}return!0}revert(e){e.name&&(this._canConsumeName=!0);for(const[t,i]of e.attributes){const r=this._attributes.get(t);if(r!==!1){if(r!==void 0&&r!==!0)if(i)r.get(i)===!1&&r.set(i,!0);else for(const o of r.keys())r.set(o,!0)}else this._attributes.set(t,!0)}}}function Lo(n){const e=[];return"attributes"in n&&n.attributes&&Sc(e,n.attributes),"classes"in n&&n.classes&&Sc(e,n.classes,"class"),"styles"in n&&n.styles&&Sc(e,n.styles,"style"),{name:n.name||!1,attributes:e}}function Sc(n,e,t){if(typeof e!="string")for(const i of e)Array.isArray(i)?n.push(i):n.push(t?[t,i]:[i]);else n.push(t?[t,e]:[e])}class Gt{constructor(...e){m(this,"_patterns",[]),this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const r=this._isElementMatching(t,i);if(r)return{element:t,pattern:i,match:r}}return null}matchAll(...e){const t=[];for(const i of e)for(const r of this._patterns){const o=this._isElementMatching(i,r);o&&t.push({element:i,pattern:r,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e=="function"||!t||t instanceof RegExp?null:t}_isElementMatching(e,t){if(typeof t=="function"){const o=t(e);return o&&typeof o=="object"?Lo(o):o}const i={};if(t.name&&(i.name=function(o,s){return o instanceof RegExp?!!s.match(o):o===s}(t.name,e.name),!i.name))return null;const r=[];return t.attributes&&!function(o,s,a){let l;return typeof o!="object"||o instanceof RegExp||Array.isArray(o)?l=["class","style"]:(o.style!==void 0&&le("matcher-pattern-deprecated-attributes-style-key",o),o.class!==void 0&&le("matcher-pattern-deprecated-attributes-class-key",o)),s._collectAttributesMatch(Ic(o),a,l)}(t.attributes,e,r)||t.classes&&!function(o,s,a){return s._collectAttributesMatch(Ic(o,"class"),a)}(t.classes,e,r)||t.styles&&!function(o,s,a){return s._collectAttributesMatch(Ic(o,"style"),a)}(t.styles,e,r)?null:(r.length&&(i.attributes=r),i)}}function ca(n,e){return n===!0||n===e||n instanceof RegExp&&!!String(e).match(n)}function Ic(n,e){if(Array.isArray(n))return n.map(i=>typeof i!="object"||i instanceof RegExp?e?[e,i,!0]:[i,!0]:(i.key!==void 0&&i.value!==void 0||le("matcher-pattern-missing-key-or-value",i),e?[e,i.key,i.value]:[i.key,i.value]));if(typeof n!="object"||n instanceof RegExp)return[e?[e,n,!0]:[n,!0]];const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e?[e,i,n[i]]:[i,n[i]]);return t}class Oo{constructor(e){m(this,"_styles"),m(this,"_cachedStyleNames",null),m(this,"_cachedExpandedStyleNames",null),m(this,"_styleProcessor"),this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=function(i){let r=null,o=0,s=0,a=null;const l=new Map;if(i==="")return l;i.charAt(i.length-1)!=";"&&(i+=";");for(let c=0;c<i.length;c++){const d=i.charAt(c);if(r===null)switch(d){case":":a||(a=i.substr(o,c-o),s=c+1);break;case'"':case"'":r=d;break;case";":{const u=i.substr(s,c-s);a&&l.set(a.trim(),u.trim()),a=null,o=c+1;break}}else d===r&&(r=null)}return l}(e);for(const[i,r]of t)this._styleProcessor.toNormalizedForm(i,r,this._styles);return this}has(e){if(this.isEmpty)return!1;const t=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(t)}set(e,t){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,mi(e))for(const[i,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){for(const t of Ne(e)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const i=Pc(t);R2(this._styles,i),delete this._styles[t],this._cleanEmptyObjectsOnPath(i)}}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!mi(this._styles[e]))return this._styles[e];const t=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(t)?t[1]:void 0}getStyleNames(e=!1){return this.isEmpty?[]:e?(this._cachedExpandedStyleNames||(this._cachedExpandedStyleNames=this._styleProcessor.getStyleNames(this._styles)),this._cachedExpandedStyleNames):(this._cachedStyleNames||(this._cachedStyleNames=this.getStylesEntries().map(([t])=>t)),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.getStyleNames())if(!e.has(t)||e.getAsString(t)!==this.getAsString(t))return!1;return!0}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_clone(){const e=new this.constructor(this._styleProcessor);return e.set(this.getNormalized()),e}_getTokensMatch(e,t){const i=[];for(const r of this.getStyleNames(!0))if(ca(e,r)){if(t===!0){i.push(r);continue}ca(t,this.getAsString(r))&&i.push(r)}return i.length?i:void 0}_getConsumables(e){const t=[];if(e){t.push(e);for(const i of this._styleProcessor.getRelatedStyles(e))t.push(i)}else for(const i of this.getStyleNames()){for(const r of this._styleProcessor.getRelatedStyles(i))t.push(r);t.push(i)}return t}_canMergeFrom(e){for(const t of e.getStyleNames())if(this.has(t)&&this.getAsString(t)!==e.getAsString(t))return!1;return!0}_mergeFrom(e){for(const t of e.getStyleNames())this.has(t)||this.set(t,e.getAsString(t))}_isMatching(e){for(const t of e.getStyleNames())if(!this.has(t)||this.getAsString(t)!==e.getAsString(t))return!1;return!0}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const i=t.splice(0,t.length-1).join("."),r=_n(this._styles,i);r&&!Object.keys(r).length&&this.remove(i)}}class ux{constructor(){m(this,"_normalizers"),m(this,"_extractors"),m(this,"_reducers"),m(this,"_consumables"),this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(mi(t))Mc(i,Pc(e),t);else if(this._normalizers.has(e)){const r=this._normalizers.get(e),{path:o,value:s}=r(t);Mc(i,o,s)}else Mc(i,e,t)}getNormalized(e,t){if(!e)return mc({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return _n(t,i);const r=i(e,t);if(r)return r}return _n(t,Pc(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=new Set;for(const i of this._consumables.keys()){const r=this.getNormalized(i,e);r&&(typeof r!="object"||Object.keys(r).length)&&t.add(i)}for(const i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function Pc(n){return n.replace("-",".")}function Mc(n,e,t){let i=t;mi(t)&&(i=mc({},_n(n,e),t)),Xm(n,e,i)}class Vc{constructor(){m(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(e){return this._set.has(e)}keys(){return Array.from(this._set.keys())}setTo(e){this.clear();for(const t of e.split(/\s+/))t&&this._set.add(t);return this}set(e){for(const t of Ne(e))t&&this._set.add(t)}remove(e){for(const t of Ne(e))this._set.delete(t)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.keys())if(!e.has(t))return!1;return!0}_clone(){const e=new this.constructor;return e._set=new Set(this._set),e}_getTokensMatch(e){const t=[];if(e===!0){for(const i of this._set.keys())t.push(i);return t}if(typeof e=="string"){for(const i of e.split(/\s+/)){if(!this._set.has(i))return;t.push(i)}return t}for(const i of this._set.keys())i.match(e)&&t.push(i);return t.length?t:void 0}_getConsumables(e){return e?[e]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(e){for(const t of e._set.keys())this._set.has(t)||this._set.add(t)}_isMatching(e){for(const t of e._set.keys())if(!this._set.has(t))return!1;return!0}}let Qi=class Q0 extends Kn{constructor(e,t,i,r){super(e),m(this,"name"),m(this,"_unsafeAttributesToRender",[]),m(this,"_attrs"),m(this,"_children"),m(this,"_customProperties",new Map),this.name=t,this._attrs=this._parseAttributes(i),this._children=[],r&&this._insertChild(0,r)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,t]of this._attrs.entries())yield[e,String(t)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,t){return!!this._attrs.has(e)&&(t===void 0||(Mr(this.name,e)||No(this.name,e)?this._attrs.get(e).has(t):this._attrs.get(e)===t))}isSimilar(e){if(!(e instanceof Q0))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[t,i]of this._attrs){const r=e._attrs.get(t);if(r===void 0)return!1;if(typeof i=="string"||typeof r=="string"){if(r!==i)return!1}else if(!i.isSimilar(r))return!1}return!0}hasClass(...e){for(const t of e)if(!this._classes||!this._classes.has(t))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],t=e[Symbol.iterator]();return Object.assign(e,{next:t.next.bind(t)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const t of e)if(!this._styles||!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Gt(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",t=this._styles&&String(this._styles),i=Array.from(this._attrs).filter(([r])=>r!="style"&&r!="class").map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const r of this.getChildren())t.push(r._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this,{index:e});let i=0;const r=function(o,s){if(typeof s=="string")return[new bt(o,s)];qt(s)||(s=[s]);const a=[];for(const l of s)typeof l=="string"?a.push(new bt(o,l)):l instanceof Yi?a.push(new bt(o,l.data)):a.push(l);return a}(this.document,t);for(const o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this,{index:e});for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t,i=!0){if(this._fireChange("attributes",this),Mr(this.name,e)||No(this.name,e)){let r=this._attrs.get(e);r||(r=Mr(this.name,e)?new Oo(this.document.stylesProcessor):new Vc,this._attrs.set(e,r)),i?r.setTo(String(t)):Mr(this.name,e)?Array.isArray(t)?r.set(t[0],t[1]):r.set(t):r.set(typeof t=="string"?t.split(/\s+/):t)}else this._attrs.set(e,String(t))}_removeAttribute(e,t){if(this._fireChange("attributes",this),t!==void 0&&(Mr(this.name,e)||No(this.name,e))){const i=this._attrs.get(e);return!!i&&(No(this.name,e)&&typeof t=="string"&&(t=t.split(/\s+/)),i.remove(t),!!i.isEmpty&&this._attrs.delete(e))}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,t){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,t],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,t,i){for(const[r,o,s]of e){let a=!1,l=!1;for(const[c,d]of this._attrs)if(!(i&&i.includes(c)||!ca(r,c)))if(a=!0,typeof d=="string"){if(ca(o,d))t.push([c]),l=!0;else if(!(r instanceof RegExp))return!1}else{const u=d._getTokensMatch(o,s||!0);if(u){l=!0;for(const h of u)t.push([c,h])}else if(!(r instanceof RegExp))return!1}if(!a||!l)return!1}return!0}_getConsumables(e,t){const i=[];if(e){const r=this._attrs.get(e);if(r!==void 0)if(typeof r=="string")i.push([e]);else for(const o of r._getConsumables(t))i.push([e,o])}else for(const[r,o]of this._attrs)if(typeof o=="string")i.push([r]);else for(const s of o._getConsumables())i.push([r,s]);return{name:!e,attributes:i}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[t,i]of e._attrs){const r=this._attrs.get(t);if(r!==void 0){if(typeof r=="string"||typeof i=="string"){if(r!==i)return!1}else if(!r._canMergeFrom(i))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[t,i]of e._attrs){const r=this._attrs.get(t);r===void 0||typeof r=="string"||typeof i=="string"?this._setAttribute(t,i):r._mergeFrom(i)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[t,i]of e._attrs){const r=this._attrs.get(t);if(r===void 0)return!1;if(typeof r=="string"||typeof i=="string"){if(r!==i)return!1}else if(!r._isMatching(i))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[t,i]of e._attrs){const r=this._attrs.get(t);typeof r=="string"||typeof i=="string"?this._attrs.delete(t):(r.remove(i.keys()),r.isEmpty&&this._attrs.delete(t))}}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const t=fi(e);for(const[i,r]of t)if(r===null)t.delete(i);else if(Mr(this.name,i)){const o=r instanceof Oo?r._clone():new Oo(this.document.stylesProcessor).setTo(String(r));t.set(i,o)}else if(No(this.name,i)){const o=r instanceof Vc?r._clone():new Vc().setTo(String(r));t.set(i,o)}else typeof r!="string"&&t.set(i,String(r));return t}};function No(n,e){return e=="class"||n=="a"&&e=="rel"}function Mr(n,e){return e=="style"}Qi.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Ro extends Qi{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=hx}}function hx(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}Ro.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class da extends xe(Ro){constructor(e,t,i,r){super(e,t,i,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}da.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const qg=Symbol("rootName");class Gg extends da{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(qg)}set rootName(e){this._setCustomProperty(qg,e)}set _name(e){this.name=e}}Gg.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let Yn=class{constructor(n={}){if(m(this,"direction"),m(this,"boundaries"),m(this,"singleCharacters"),m(this,"shallow"),m(this,"ignoreElementEnd"),m(this,"_position"),m(this,"_boundaryStartParent"),m(this,"_boundaryEndParent"),!n.boundaries&&!n.startPosition)throw new v("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new v("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=z._createAt(n.startPosition):this._position=z._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,t;do t=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=t)}jumpTo(n){this._boundaryStartParent&&n.isBefore(this.boundaries.start)?n=this.boundaries.start:this._boundaryEndParent&&n.isAfter(this.boundaries.end)&&(n=this.boundaries.end),this._position=n.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,t=n.parent;if(t.parent===null&&n.offset===t.childCount)return{done:!0,value:void 0};if(t===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(t&&t.is("view:$text")){if(n.isAtEnd)return this._position=z._createAfter(t),this._next();i=t.data[n.offset]}else i=t.getChild(n.offset);if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(t===this._boundaryEndParent?this.boundaries.end.offset:t.data.length)-n.offset;const o=new Yi(t,n.offset,r);return n.offset+=r,this._position=n,this._formatReturnValue("text",o,e,n,r)}if(i&&i.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}else n=new z(i,0);return this._position=n,this._formatReturnValue("elementStart",i,e,n,1)}if(i&&i.is("view:$text")){if(this.singleCharacters)return n=new z(i,0),this._position=n,this._next();let r,o=i.data.length;return i==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new Yi(i,0,o),n=z._createAfter(r)):(r=new Yi(i,0,i.data.length),n.offset++),this._position=n,this._formatReturnValue("text",r,e,n,o)}return n=z._createAfter(t),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",t,e,n)}_previous(){let n=this.position.clone();const e=this.position,t=n.parent;if(t.parent===null&&n.offset===0)return{done:!0,value:void 0};if(t==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(t.is("view:$text")){if(n.isAtStart)return this._position=z._createBefore(t),this._previous();i=t.data[n.offset-1]}else i=t.getChild(n.offset-1);if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const s=t===this._boundaryStartParent?this.boundaries.start.offset:0;r=n.offset-s}n.offset-=r;const o=new Yi(t,n.offset,r);return this._position=n,this._formatReturnValue("text",o,e,n,r)}if(i&&i.is("view:element"))return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",i,e,n,1)):(n=new z(i,i.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,n));if(i&&i.is("view:$text")){if(this.singleCharacters)return n=new z(i,i.data.length),this._position=n,this._previous();let r,o=i.data.length;if(i==this._boundaryStartParent){const s=this.boundaries.start.offset;r=new Yi(i,s,i.data.length-s),o=r.data.length,n=z._createBefore(r)}else r=new Yi(i,0,i.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",r,e,n,o)}return n=z._createBefore(t),this._position=n,this._formatReturnValue("elementStart",t,e,n,1)}_formatReturnValue(n,e,t,i,r){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction!="forward"||this.boundaries&&this.boundaries.end.isEqual(this.position)?t=z._createAfter(e.textNode):(i=z._createAfter(e.textNode),this._position=i)),e.offsetInText===0&&(this.direction!="backward"||this.boundaries&&this.boundaries.start.isEqual(this.position)?t=z._createBefore(e.textNode):(i=z._createBefore(e.textNode),this._position=i))),{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:r}}}},z=class an extends Zn{constructor(e,t){super(),m(this,"parent"),m(this,"offset"),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof da);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){const t=an._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Yn(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const r=Et(t,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Yn(e)}clone(){return new an(this.parent,this.offset)}static _createAt(e,t){if(e instanceof an)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new v("view-createpositionat-offset-required",i)}return new an(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new an(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new v("view-position-after-root",e,{root:e});return new an(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new an(e.textNode,e.offsetInText);if(!e.parent)throw new v("view-position-before-root",e,{root:e});return new an(e.parent,e.index)}};z.prototype.is=function(n){return n==="position"||n==="view:position"};let se=class Rn extends Zn{constructor(e,t=null){super(),m(this,"start"),m(this,"end"),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new Yn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(ua,{direction:"backward"}),t=this.end.getLastMatchingPosition(ua);return e.parent.is("$text")&&e.isAtStart&&(e=z._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=z._createAfter(t.parent)),new Rn(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(ua);if(e.isAfter(this.end)||e.isEqual(this.end))return new Rn(e,e);let t=this.end.getLastMatchingPosition(ua,{direction:"backward"});const i=e.nodeAfter,r=t.nodeBefore;return i&&i.is("$text")&&(e=new z(i,0)),r&&r.is("$text")&&(t=new z(r,r.data.length)),new Rn(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&r}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Rn(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Rn(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Rn(t,i)}return null}getWalker(e={}){return e.boundaries=this,new Yn(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Rn(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Yn(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Yn(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,r){return new this(new z(e,t),new z(i,r))}static _createFromPositionAndShift(e,t){const i=e,r=e.getShiftedBy(t);return t>0?new this(i,r):new this(r,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(z._createBefore(e),t)}};function ua(n){return!(!n.item.is("attributeElement")&&!n.item.is("uiElement"))}se.prototype.is=function(n){return n==="range"||n==="view:range"};let Ji=class J0 extends ye(Zn){constructor(...e){super(),m(this,"_ranges"),m(this,"_lastRangeBackward"),m(this,"_isFake"),m(this,"_fakeSelectionLabel"),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const r of e._ranges)if(t.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=pc(this.getRanges());if(t!=pc(e.getRanges()))return!1;if(t==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let r=!1;for(let o of e.getRanges())if(o=o.getTrimmed(),i.start.isEqual(o.start)&&i.end.isEqual(o.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(r);else if(t instanceof J0||t instanceof Lc)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof se)this._setRanges([t],r&&r.backward),this._setFakeOptions(r);else if(t instanceof z)this._setRanges([new se(t)]),this._setFakeOptions(r);else if(t instanceof Kn){const o=!!r&&!!r.backward;let s;if(i===void 0)throw new v("view-selection-setto-required-second-parameter",this);s=i=="in"?se._createIn(t):i=="on"?se._createOn(t):new se(z._createAt(t,i)),this._setRanges([s],o),this._setFakeOptions(r)}else{if(!qt(t))throw new v("view-selection-setto-not-selectable",this);this._setRanges(t,r&&r.backward),this._setFakeOptions(r)}this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new v("view-selection-setfocus-no-ranges",this);const i=z._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new se(i,r),!0):this._addRange(new se(r,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof se))throw new v("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new v("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new se(e.start,e.end))}};Ji.prototype.is=function(n){return n==="selection"||n==="view:selection"};let Lc=class extends ye(Zn){constructor(...n){super(),m(this,"_selection"),this._selection=new Ji,this._selection.delegate("change").to(this),n.length&&this._selection.setTo(...n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(n){return this._selection.isEqual(n)}isSimilar(n){return this._selection.isSimilar(n)}_setTo(...n){this._selection.setTo(...n)}_setFocus(n,e){this._selection.setFocus(n,e)}};Lc.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class Vr extends Gi{constructor(e,t,i){super(e,t),m(this,"startRange"),m(this,"_eventPhase"),m(this,"_currentTarget"),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Oc=Symbol("bubbling contexts");function Nc(n){return class extends n{fire(e,...t){try{const i=e instanceof Gi?e:new Gi(this,e),r=Rc(this);if(!r.size)return;if(zo(i,"capturing",this),Lr(r,"$capture",i,...t))return i.return;const o=i.startRange||this.selection.getFirstRange(),s=o?o.getContainedElement():null,a=!!s&&!!Zg(r,s);let l=s||function(c){if(!c)return null;const d=c.start.parent,u=c.end.parent,h=d.getPath(),g=u.getPath();return h.length>g.length?d:u}(o);if(zo(i,"atTarget",l),!a){if(Lr(r,"$text",i,...t))return i.return;zo(i,"bubbling",l)}for(;l;){if(l.is("rootElement")){if(Lr(r,"$root",i,...t))return i.return}else if(l.is("element")&&Lr(r,l.name,i,...t))return i.return;if(Lr(r,l,i,...t))return i.return;l=l.parent,zo(i,"bubbling",l)}return zo(i,"bubbling",this),Lr(r,"$document",i,...t),i.return}catch(i){v.rethrowUnexpectedError(i,this)}}_addEventListener(e,t,i){const r=Ne(i.context||"$document"),o=Rc(this);for(const s of r){let a=o.get(s);a||(a=new(ye()),o.set(s,a)),this.listenTo(a,e,t,i)}}_removeEventListener(e,t){const i=Rc(this);for(const r of i.values())this.stopListening(r,e,t)}}}{const n=Nc(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Nc[e]=n.prototype[e]})}function zo(n,e,t){n instanceof Vr&&(n._eventPhase=e,n._currentTarget=t)}function Lr(n,e,t,...i){const r=typeof e=="string"?n.get(e):Zg(n,e);return!!r&&(r.fire(t,...i),t.stop.called)}function Zg(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function Rc(n){return n[Oc]||(n[Oc]=new Map),n[Oc]}let ha=class extends Nc(xe()){constructor(n){super(),m(this,"selection"),m(this,"roots"),m(this,"stylesProcessor"),m(this,"_postFixers",new Set),this.selection=new Lc,this.roots=new ot({idProperty:"rootName"}),this.stylesProcessor=n,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(n="main"){return this.roots.get(n)}registerPostFixer(n){this._postFixers.add(n)}destroy(){this.roots.forEach(n=>n.destroy()),this.stopListening()}_callPostFixers(n){let e=!1;do for(const t of this._postFixers)if(e=t(n),e)break;while(e)}};class Qn extends Qi{constructor(e,t,i,r){super(e,t,i,r),m(this,"_priority",10),m(this,"_id",null),m(this,"_clonesGroup",null),this.getFillerOffset=mx}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new v("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}_canMergeAttributesFrom(e){return this.id===null&&e.id===null&&this.priority===e.priority&&super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id===null&&e.id===null&&this.priority===e.priority&&super._canSubtractAttributesOf(e)}}m(Qn,"DEFAULT_PRIORITY",10);function mx(){if(zc(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(zc(n)>1)return null;n=n.parent}return!n||zc(n)>1?null:this.childCount}function zc(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}Qn.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Dc extends Qi{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=gx}_insertChild(e,t){if(t&&(t instanceof Kn||Array.from(t).length>0))throw new v("view-emptyelement-cannot-add",[this,t]);return 0}}function gx(){return null}Dc.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class ma extends Qi{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=fx}_insertChild(e,t){if(t&&(t instanceof Kn||Array.from(t).length>0))throw new v("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}function px(n){n.document.on("arrowKey",(e,t)=>function(i,r,o){if(r.keyCode==ie.arrowright){const s=r.domTarget.ownerDocument.defaultView.getSelection(),a=s.rangeCount==1&&s.getRangeAt(0).collapsed;if(a||r.shiftKey){const l=s.focusNode,c=s.focusOffset,d=o.domPositionToView(l,c);if(d===null)return;let u=!1;const h=d.getLastMatchingPosition(g=>(g.item.is("uiElement")&&(u=!0),!(!g.item.is("uiElement")&&!g.item.is("attributeElement"))));if(u){const g=o.viewPositionToDom(h);a?s.collapse(g.parent,g.offset):s.extend(g.parent,g.offset)}}}}(0,t,n.domConverter),{priority:"low"})}function fx(){return null}ma.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Bc extends Qi{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=bx}_insertChild(e,t){if(t&&(t instanceof Kn||Array.from(t).length>0))throw new v("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}function bx(){return null}Bc.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let Jn=class extends ye(Zn){constructor(n,e){super(),m(this,"document"),m(this,"_children",[]),m(this,"_customProperties",new Map),this.document=n,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(n){return this._customProperties.get(n)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(n){return this._insertChild(this.childCount,n)}getChild(n){return this._children[n]}getChildIndex(n){return this._children.indexOf(n)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(n,e){this._fireChange("children",this,{index:n});let t=0;const i=function(r,o){return typeof o=="string"?[new bt(r,o)]:(qt(o)||(o=[o]),Array.from(o).map(s=>typeof s=="string"?new bt(r,s):s instanceof Yi?new bt(r,s.data):s))}(this.document,e);for(const r of i)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(n,0,r),n++,t++;return t}_removeChildren(n,e=1){this._fireChange("children",this,{index:n});for(let t=n;t<n+e;t++)this._children[t].parent=null;return this._children.splice(n,e)}_fireChange(n,e,t){this.fire(`change:${n}`,e,t)}_setCustomProperty(n,e){this._customProperties.set(n,e)}_removeCustomProperty(n){return this._customProperties.delete(n)}};Jn.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};class Fc{constructor(e){m(this,"document"),m(this,"_cloneGroups",new Map),m(this,"_slotFactory",null),this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new Jn(this.document,e)}createText(e){return new bt(this.document,e)}createAttributeElement(e,t,i={}){const r=new Qn(this.document,e,t);return typeof i.priority=="number"&&(r._priority=i.priority),i.id&&(r._id=i.id),i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createContainerElement(e,t,i={},r={}){let o=null;Ai(i)?r=i:o=i;const s=new Ro(this.document,e,t,o);return r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createEditableElement(e,t,i={}){const r=new da(this.document,e,t);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createEmptyElement(e,t,i={}){const r=new Dc(this.document,e,t);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createUIElement(e,t,i){const r=new ma(this.document,e,t);return i&&(r.render=i),r}createRawElement(e,t,i,r={}){const o=new Bc(this.document,e,t);return i&&(o.render=i),r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}setAttribute(e,t,i,r){r!==void 0?r._setAttribute(e,t,i):i._setAttribute(e,t)}removeAttribute(e,t,i){i!==void 0?i._removeAttribute(e,t):t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Ai(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof z?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new v("view-writer-break-non-container-element",this.document);if(!t.parent)throw new v("view-writer-break-root",this.document);if(e.isAtStart)return z._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(z._createAfter(t),i);const r=new se(e,z._createAt(t,"end")),o=new z(i,0);this.move(r,o)}return z._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const s=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new z(s,a))}const r=i.getChild(t-1),o=i.getChild(t);if(!r||!o)return e;if(r.is("$text")&&o.is("$text"))return Yg(r,o);if(r.is("attributeElement")&&o.is("attributeElement")&&r.isSimilar(o)){const s=r.childCount;return r._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new z(r,s))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new v("view-writer-merge-containers-invalid-position",this.document);const r=t.getChild(t.childCount-1),o=r instanceof bt?z._createAt(r,"end"):z._createAt(t,"end");return this.move(se._createIn(i),z._createAt(t,"end")),this.remove(se._createOn(i)),o}insert(e,t){Qg(t=qt(t)?[...t]:[t],this.document);const i=t.reduce((s,a)=>{const l=s[s.length-1],c=!a.is("uiElement");return l&&l.breakAttributes==c?l.nodes.push(a):s.push({breakAttributes:c,nodes:[a]}),s},[]);let r=null,o=e;for(const{nodes:s,breakAttributes:a}of i){const l=this._insertNodes(o,s,a);r||(r=l.start),o=l.end}return r?new se(r,o):new se(e)}remove(e){const t=e instanceof se?e:se._createOn(e);if(Do(t,this.document),t.isCollapsed)return new Jn(this.document);const{start:i,end:r}=this._breakAttributesRange(t,!0),o=i.parent,s=r.offset-i.offset,a=o._removeChildren(i.offset,s);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new Jn(this.document,a)}clear(e,t){Do(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of i){const o=r.item;let s;if(o.is("element")&&t.isSimilar(o))s=se._createOn(o);else if(!r.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(s=se._createIn(a))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let i;if(t.isAfter(e.end)){const r=(t=this._breakAttributes(t,!0)).parent,o=r.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=r.childCount-o}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof Qn))throw new v("view-writer-wrap-invalid-attribute",this.document);if(Do(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&(i=r.parent,!Array.from(i.getChildren()).some(s=>!s.is("uiElement")))&&(r=r.getLastMatchingPosition(s=>s.item.is("uiElement"))),r=this._wrapPosition(r,t);const o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new se(r)}return this._wrapRange(e,t);var i}unwrap(e,t){if(!(t instanceof Qn))throw new v("view-writer-unwrap-invalid-attribute",this.document);if(Do(e,this.document),e.isCollapsed)return e;const{start:i,end:r}=this._breakAttributesRange(e,!0),o=i.parent,s=this._unwrapChildren(o,i.offset,r.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;const l=this.mergeAttributes(s.end);return new se(a,l)}rename(e,t){const i=new Ro(this.document,e,t.getAttributes());return this.insert(z._createAfter(t),i),this.move(se._createIn(t),z._createAt(i,0)),this.remove(se._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new se(e,t)}createRangeOn(e){return se._createOn(e)}createRangeIn(e){return se._createIn(e)}createSelection(...e){return new Ji(...e)}createSlot(e="children"){if(!this._slotFactory)throw new v("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let r,o;if(r=i?jc(e):e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new v("view-writer-invalid-position-container",this.document);o=i?this._breakAttributes(e,!0):e.parent.is("$text")?$c(e):e;const s=r._insertChild(o.offset,t);for(const d of t)this._addToClonedElementsGroup(d);const a=o.getShiftedBy(s),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const c=this.mergeAttributes(a);return new se(l,c)}_wrapChildren(e,t,i,r){let o=t;const s=[];for(;o<i;){const l=e.getChild(o),c=l.is("$text"),d=l.is("attributeElement");if(d&&l._canMergeAttributesFrom(r))l._mergeAttributesFrom(r),s.push(new z(e,o));else if(c||!d||kx(r,l)){const u=r._clone();l._remove(),u._appendChild(l),e._insertChild(o,u),this._addToClonedElementsGroup(u),s.push(new z(e,o))}else this._wrapChildren(l,0,l.childCount,r);o++}let a=0;for(const l of s)l.offset-=a,l.offset!=t&&(this.mergeAttributes(l).isEqual(l)||(a++,i--));return se._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,r){let o=t;const s=[];for(;o<i;){const l=e.getChild(o);if(l.is("attributeElement"))if(l.isSimilar(r)){const c=l.getChildren(),d=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),s.push(new z(e,o),new z(e,o+d)),o+=d,i+=d-1}else l._canSubtractAttributesOf(r)?(l._subtractAttributesOf(r),s.push(new z(e,o),new z(e,o+1)),o++):(this._unwrapChildren(l,0,l.childCount,r),o++);else o++}let a=0;for(const l of s)l.offset-=a,!(l.offset==t||l.offset==i)&&(this.mergeAttributes(l).isEqual(l)||(a++,i--));return se._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:r}=this._breakAttributesRange(e,!0),o=i.parent,s=this._wrapChildren(o,i.offset,r.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;const l=this.mergeAttributes(s.end);return new se(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return Kg(e.clone());e.parent.is("$text")&&(e=$c(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const r=new se(e,e.getShiftedBy(1));this.wrap(r,t);const o=new z(i.parent,i.index);i._remove();const s=o.nodeBefore,a=o.nodeAfter;return s&&s.is("view:$text")&&a&&a.is("view:$text")?Yg(s,a):Kg(o)}_breakAttributesRange(e,t=!1){const i=e.start,r=e.end;if(Do(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new se(l,l)}const o=this._breakAttributes(r,t),s=o.parent.childCount,a=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-s,new se(a,o)}_breakAttributes(e,t=!1){const i=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new v("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new v("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new v("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&Hc(r.parent)||Hc(r))return e.clone();if(r.is("$text"))return this._breakAttributes($c(e),t);if(i==r.childCount){const o=new z(r.parent,r.index+1);return this._breakAttributes(o,t)}if(i===0){const o=new z(r.parent,r.index);return this._breakAttributes(o,t)}{const o=r.index+1,s=r._clone();r.parent._insertChild(o,s),this._addToClonedElementsGroup(s);const a=r.childCount-i,l=r._removeChildren(i,a);s._appendChild(l);const c=new z(r.parent,o);return this._breakAttributes(c,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const r of e.getChildren())this._addToClonedElementsGroup(r);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const r of e.getChildren())this._removeFromClonedElementsGroup(r);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function jc(n){let e=n.parent;for(;!Hc(e);){if(!e)return;e=e.parent}return e}function kx(n,e){return n.priority<e.priority||!(n.priority>e.priority)&&n.getIdentity()<e.getIdentity()}function Kg(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new z(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new z(t,0):n}function $c(n){if(n.offset==n.parent.data.length)return new z(n.parent.parent,n.parent.index+1);if(n.offset===0)return new z(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new bt(n.root.document,e)),new z(n.parent.parent,n.parent.index+1)}function Yg(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new z(n,t)}const wx=[bt,Qn,Ro,Dc,Bc,ma];function Qg(n,e){for(const t of n){if(!wx.some(i=>t instanceof i))throw new v("view-writer-insert-invalid-node-type",e);t.is("$text")||Qg(t.getChildren(),e)}}function Hc(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Do(n,e){const t=jc(n.start),i=jc(n.end);if(!t||!i||t!==i)throw new v("view-writer-invalid-range-container",e)}const Jg=n=>n.createTextNode("\xA0"),Xg=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},ep=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},Bo="\u2060".repeat(7);function Zt(n){return typeof n=="string"?n.substr(0,7)===Bo:Ye(n)&&n.data.substr(0,7)===Bo}function Or(n){return n.data.length==7&&Zt(n)}function tp(n){const e=typeof n=="string"?n:n.data;return Zt(n)?e.slice(7):e}function _x(n,e){if(e.keyCode==ie.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset;Zt(i)&&r<=7&&t.collapse(i,0)}}}let vx=class extends xe(){constructor(n,e){super(),m(this,"domDocuments",new Set),m(this,"domConverter"),m(this,"markedAttributes",new Set),m(this,"markedChildren",new Set),m(this,"markedTexts",new Set),m(this,"selection"),m(this,"_inlineFiller",null),m(this,"_fakeSelectionContainer",null),this.domConverter=n,this.selection=e,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),W.isBlink&&!W.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(n,e){if(n==="text")this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if(n==="attributes")this.markedAttributes.add(e);else{if(n!=="children")throw new v("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}render(){if(this.isComposing&&!W.isAndroid)return;let n=null;const e=!(W.isBlink&&!W.isAndroid)||!this.isSelecting;for(const t of this.markedChildren)this._updateChildrenMappings(t);e?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?n=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(n=this.selection.getFirstPosition(),this.markedChildren.add(n.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(n=this.domConverter.domPositionToView(this._inlineFiller),n&&n.parent.is("$text")&&(n=z._createBefore(n.parent)));for(const t of this.markedAttributes)this._updateAttrs(t);for(const t of this.markedChildren)this._updateChildren(t,{inlineFillerPosition:n});for(const t of this.markedTexts)!this.markedChildren.has(t.parent)&&this.domConverter.mapViewToDom(t.parent)&&this._updateText(t,{inlineFillerPosition:n});if(e)if(n){const t=this.domConverter.viewPositionToDom(n),i=t.parent.ownerDocument;Zt(t.parent)?this._inlineFiller=t.parent:this._inlineFiller=ip(i,t.parent,t.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(n){const e=this.domConverter.mapViewToDom(n);if(!e)return;const t=Array.from(e.childNodes),i=Array.from(this.domConverter.viewChildrenToDom(n,{withChildren:!1})),r=this._diffNodeLists(t,i),o=this._findUpdateActions(r,t,i,yx);if(o.indexOf("update")!==-1){const s={equal:0,insert:0,delete:0};for(const a of o)if(a==="update"){const l=s.equal+s.insert,c=s.equal+s.delete,d=n.getChild(l);!d||d.is("uiElement")||d.is("rawElement")||this._updateElementMappings(d,t[c]),Ag(i[l]),s.equal++}else s[a]++}}_updateElementMappings(n,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,n),this.markedChildren.add(n),this.markedAttributes.add(n)}_getInlineFillerPosition(){const n=this.selection.getFirstPosition();return n.parent.is("$text")?z._createBefore(n.parent):n}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(n);return!!(e&&Ye(e.parent)&&Zt(e.parent))}_removeInlineFiller(){const n=this._inlineFiller;if(!Zt(n))throw new v("view-renderer-filler-was-lost",this);Or(n)?n.remove():n.data=n.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),e=n.parent,t=n.offset;if(!this.domConverter.mapViewToDom(e.root)||!e.is("element")||!function(o){if(o.getAttribute("contenteditable")=="false")return!1;const s=o.findAncestor(a=>a.hasAttribute("contenteditable"));return!s||s.getAttribute("contenteditable")=="true"}(e))return!1;const i=n.nodeBefore,r=n.nodeAfter;return!(i instanceof bt||r instanceof bt)&&!!(t!==e.getFillerOffset()||i&&i.is("element","br"))&&(!W.isAndroid||!i&&!r)}_updateText(n,e){const t=this.domConverter.findCorrespondingDomText(n);let i=this.domConverter.viewToDom(n).data;const r=e.inlineFillerPosition;r&&r.parent==n.parent&&r.offset==n.index&&(i=Bo+i),this._updateTextNode(t,i)}_updateAttrs(n){const e=this.domConverter.mapViewToDom(n);if(e){for(const t of Array.from(e.attributes)){const i=t.name;n.hasAttribute(i)||this.domConverter.removeDomElementAttribute(e,i)}for(const t of n.getAttributeKeys())this.domConverter.setDomElementAttribute(e,t,n.getAttribute(t),n)}}_updateChildren(n,e){const t=this.domConverter.mapViewToDom(n);if(!t)return;if(W.isAndroid){let d=null;for(const u of Array.from(t.childNodes)){if(d&&Ye(d)&&Ye(u)){t.normalize();break}d=u}}const i=e.inlineFillerPosition,r=t.childNodes,o=Array.from(this.domConverter.viewChildrenToDom(n,{bind:!0}));i&&i.parent===n&&ip(t.ownerDocument,o,i.offset);const s=this._diffNodeLists(r,o),a=this._findUpdateActions(s,r,o,xx);let l=0;const c=new Set;for(const d of a)d==="delete"?(c.add(r[l]),Ag(r[l])):d!=="equal"&&d!=="update"||l++;l=0;for(const d of a)d==="insert"?(yg(t,l,o[l]),l++):d==="update"?(this._updateTextNode(r[l],o[l].data),l++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(o[l])),l++);for(const d of c)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(n,e){return Tr(n=function(t,i){const r=Array.from(t);return r.length==0||!i||r[r.length-1]==i&&r.pop(),r}(n,this._fakeSelectionContainer),e,Cx.bind(null,this.domConverter))}_findUpdateActions(n,e,t,i){if(n.indexOf("insert")===-1||n.indexOf("delete")===-1)return n;let r=[],o=[],s=[];const a={equal:0,insert:0,delete:0};for(const l of n)l==="insert"?s.push(t[a.equal+a.insert]):l==="delete"?o.push(e[a.equal+a.delete]):(r=r.concat(Tr(o,s,i).map(c=>c==="equal"?"update":c)),r.push("equal"),o=[],s=[]),a[l]++;return r.concat(Tr(o,s,i).map(l=>l==="equal"?"update":l))}_updateTextNode(n,e){const t=n.data;t!=e&&(W.isAndroid&&this.isComposing&&t.replace(/\u00A0/g," ")==e.replace(/\u00A0/g," ")||this._updateTextNodeInternal(n,e))}_updateTextNodeInternal(n,e){const t=km(n.data,e);for(const i of t)i.type==="insert"?n.insertData(i.index,i.values.join("")):n.deleteData(i.index,i.howMany)}_markDescendantTextToSync(n){if(n){if(n.is("$text"))this.markedTexts.add(n);else if(n.is("element"))for(const e of n.getChildren())this._markDescendantTextToSync(e)}}_updateSelection(){if(W.isBlink&&!W.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0)return this._removeDomSelection(),void this._removeFakeSelection();const n=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&n&&(this.selection.isFake?this._updateFakeSelection(n):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(n)):this.isComposing&&W.isAndroid||this._updateDomSelection(n))}_updateFakeSelection(n){const e=n.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(o){const s=o.createElement("div");return s.className="ck-fake-selection-container",Object.assign(s.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),s.textContent="\xA0",s}(e));const t=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(t,this.selection),!this._fakeSelectionNeedsUpdate(n))return;t.parentElement&&t.parentElement==n||n.appendChild(t),t.textContent=this.selection.fakeSelectionLabel||"\xA0";const i=e.getSelection(),r=e.createRange();i.removeAllRanges(),r.selectNodeContents(t),i.addRange(r)}_updateDomSelection(n){const e=n.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const t=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);e.setBaseAndExtent(t.parent,t.offset,i.parent,i.offset),W.isGecko&&function(r,o){let s=r.parent,a=r.offset;if(Ye(s)&&Or(s)&&(a=Io(s)+1,s=s.parentNode),s.nodeType!=Node.ELEMENT_NODE||a!=s.childNodes.length-1)return;const l=s.childNodes[a];l&&l.tagName=="BR"&&o.addRange(o.getRangeAt(0))}(i,e)}_domSelectionNeedsUpdate(n){if(!this.domConverter.isDomSelectionCorrect(n))return!0;const e=n&&this.domConverter.domSelectionToView(n);return(!e||!this.selection.isEqual(e))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(n){const e=this._fakeSelectionContainer,t=n.ownerDocument.getSelection();return!e||e.parentElement!==n||t.anchorNode!==e&&!e.contains(t.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const n of this.domDocuments){const e=n.getSelection();if(e.rangeCount){const t=n.activeElement,i=this.domConverter.mapDomToView(t);t&&i&&e.removeAllRanges()}}}_removeFakeSelection(){const n=this._fakeSelectionContainer;n&&n.remove()}_updateFocus(){if(this.isFocused){const n=this.selection.editableElement;n&&this.domConverter.focus(n)}}};function ip(n,e,t){const i=e instanceof Array?e:e.childNodes,r=i[t];if(Ye(r))return r.data=Bo+r.data,r;{const o=n.createTextNode(Bo);return Array.isArray(e)?i.splice(t,0,o):yg(e,t,o),o}}function yx(n,e){return yn(n)&&yn(e)&&!Ye(n)&&!Ye(e)&&!Po(n)&&!Po(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function xx(n,e){return yn(n)&&yn(e)&&Ye(n)&&Ye(e)}function Cx(n,e,t){return e===t||(Ye(e)&&Ye(t)?e.data===t.data:!(!n.isBlockFiller(e)||!n.isBlockFiller(t)))}const Ax=ep(R.document),Tx=Jg(R.document),Ex=Xg(R.document),ga="data-ck-unsafe-attribute-",np="data-ck-unsafe-element";class pa{constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){m(this,"document"),m(this,"renderingMode"),m(this,"blockFillerMode"),m(this,"preElements"),m(this,"blockElements"),m(this,"inlineObjectElements"),m(this,"unsafeElements"),m(this,"_domDocument"),m(this,"_domToViewMapping",new WeakMap),m(this,"_viewToDomMapping",new WeakMap),m(this,"_fakeSelectionMapping",new WeakMap),m(this,"_rawContentElementMatcher",new Gt),m(this,"_inlineObjectElementMatcher",new Gt),m(this,"_elementsWithTemporaryCustomProperties",new Set),this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?R.document:R.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Ji(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"||!(e=e.toLowerCase()).startsWith("on")&&(e!=="srcdoc"||!t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&(i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"||!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data")return void(e.innerHTML=t);const i=new DOMParser().parseFromString(t,"text/html"),r=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)r.appendChild(o[0]);const s=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=s.nextNode();)a.push(l);for(const c of a){for(const u of c.getAttributeNames())this.setDomElementAttribute(c,u,c.getAttribute(u));const d=c.tagName.toLowerCase();this._shouldRenameElement(d)&&(lp(d),c.replaceWith(this._createReplacementDomElement(d,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(r)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}{const i=e;if(this.mapViewToDom(i)){if(!i.getCustomProperty("editingPipeline:doNotReuseOnce"))return this.mapViewToDom(i);this._elementsWithTemporaryCustomProperties.add(i)}let r;if(i.is("documentFragment"))r=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(r,i);else{if(i.is("uiElement"))return r=i.name==="$comment"?this._domDocument.createComment(i.getCustomProperty("$rawContent")):i.render(this._domDocument,this),t.bind&&this.bindElements(r,i),r;this._shouldRenameElement(i.name)?(lp(i.name),r=this._createReplacementDomElement(i.name)):r=i.hasAttribute("xmlns")?this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(r,this),t.bind&&this.bindElements(r,i);for(const o of i.getAttributeKeys())this.setDomElementAttribute(r,o,i.getAttribute(o),i)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(i,t))r instanceof HTMLTemplateElement?r.content.appendChild(o):r.appendChild(o);return r}}setDomElementAttribute(e,t,i,r){const o=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);o||le("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),H2(t)?(e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(ga+t)&&o&&e.removeAttribute(ga+t),e.setAttribute(o?t:ga+t,i)):le("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i})}removeDomElementAttribute(e,t){t!=np&&(e.removeAttribute(t),e.removeAttribute(ga+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let r=0;for(const o of e.getChildren()){i===r&&(yield this._getBlockFiller());const s=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!Ce(o.getAttributes());if(s&&this.renderingMode=="data")if(o.is("rawElement")){const a=this._domDocument.createElement(o.name);o.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(o,t);else s&&le("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t);r++}i===r&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),r=this._domDocument.createRange();return r.setStart(t.parent,t.offset),r.setEnd(i.parent,i.offset),r}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let r=e.offset;return Zt(i)&&(r+=7),{parent:i,offset:r}}{let i,r,o;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;o=i.childNodes[0]}else{const s=e.nodeBefore;if(r=s.is("$text")?this.findCorrespondingDomText(s):this.mapViewToDom(s),!r)return null;i=r.parentNode,o=r.nextSibling}return Ye(o)&&Zt(o)?{parent:o,offset:7}:{parent:i,offset:r?Io(r)+1:0}}}domToView(e,t={}){const i=[],r=this._domToView(e,t,i),o=r.next().value;return o?(r.next(),this._processDomInlineNodes(null,i,t),this.blockFillerMode=="br"&&sp(o)||o.is("$text")&&o.data.length==0?null:o):null}*domChildrenToView(e,t={},i=[]){let r=[];r=e instanceof HTMLTemplateElement?[...e.content.childNodes]:[...e.childNodes];for(let o=0;o<r.length;o++){const s=r[o],a=this._domToView(s,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),this.blockFillerMode=="br"&&sp(l)||(yield l),a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(function(r){if(!W.isGecko||!r.rangeCount)return!1;const o=r.getRangeAt(0).startContainer;try{Object.prototype.toString.call(o)}catch{return!0}return!1}(e))return new Ji([]);if(e.rangeCount===1){let r=e.getRangeAt(0).startContainer;Ye(r)&&(r=r.parentNode);const o=this.fakeSelectionToView(r);if(o)return o}const t=this.isDomSelectionBackward(e),i=[];for(let r=0;r<e.rangeCount;r++){const o=e.getRangeAt(r),s=this.domRangeToView(o);s&&i.push(s)}return new Ji(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new se(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Io(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return z._createBefore(i);if(Ye(e)){if(Or(e))return this.domPositionToView(e.parentNode,Io(e));const r=this.findCorrespondingViewText(e);let o=t;return r?(Zt(e)&&(o-=7,o=o<0?0:o),new z(r,o)):null}if(t===0){const r=this.mapDomToView(e);if(r)return new z(r,0)}else{const r=e.childNodes[t-1];if(Ye(r)&&Or(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,Io(r));const o=Ye(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(o&&o.parent)return new z(o.parent,o.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Or(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const r=this.mapDomToView(i);if(r){const o=r.nextSibling;return o instanceof bt?o:null}}else{const r=this.mapDomToView(e.parentNode);if(r){const o=r.getChild(0);return o instanceof bt?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(!t||t.ownerDocument.activeElement===t)return;const{scrollX:i,scrollY:r}=R.window,o=[];rp(t,s=>{const{scrollLeft:a,scrollTop:l}=s;o.push([a,l])}),t.focus(),rp(t,s=>{const[a,l]=o.shift();s.scrollLeft=a,s.scrollTop=l}),R.window.scrollTo(i,r)}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Ax):!!ap(e,this.blockElements)||e.isEqualNode(Ex)||function(t,i){return t.isEqualNode(Tx)&&op(t,i)&&t.parentNode.childNodes.length===1}(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=gg(e);for(t.pop();t.length;){const i=t.pop(),r=this._domToViewMapping.get(i);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Jg(this._domDocument);case"markedNbsp":return Xg(this._domDocument);case"br":return ep(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Ye(e)&&Zt(e)&&t<7||this.isElement(e)&&Zt(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement")}*_domToView(e,t,i){if(this.blockFillerMode!="br"&&ap(e,this.blockElements))return null;const r=this.getHostViewElement(e);if(r)return r;if(Po(e)&&t.skipComments)return null;if(Ye(e)){if(Or(e))return null;{const o=e.data;if(o==="")return null;const s=new bt(this.document,o);return i.push(s),s}}{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&i.push(o),o;if(this.isDocumentFragment(e))o=new Jn(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)o._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||i.push(o),o;if(Po(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const s=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,s))o._appendChild(a);if(this._isInlineObjectElement(o))i.push(o),this._processDomInlineNodes(null,s,t);else for(const a of s)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let r=!1;for(let o=0;o<t.length;o++){const s=t[o];if(!s.is("$text")){r=!1;continue}let a,l=!1;if(this._isPreFormatted(s))a=tp(s.data);else{a=s.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=o>0?t[o-1]:null,d=o+1<t.length?t[o+1]:null,u=!c||c.is("element")&&c.name=="br"||r,h=!d&&!Zt(s.data);i.withChildren!==!1&&(u&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=tp(a),this.blockFillerMode!="br"&&s.parent&&(Ix(s.parent,a)?(a="",s.parent.parent&&(s.parent.parent._setCustomProperty("$hasBlockFiller",!0),s.parent._remove())):Sx(s.parent,a,this.blockElements)&&(a="",s.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const g=d&&d.is("element")&&d.name!="br",p=d&&d.is("$text")&&d.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!d||g||p)&&(a=a.replace(/\u00A0$/," ")),(u||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&s.parent?(s._remove(),t.splice(o,1),o--):(s._data=a,r=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);!(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i))&&i||(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),r=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";t.charAt(t.length-2)!=" "&&i&&!r||(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(function(t,i){return t.getAncestors().some(r=>r.is("element")&&i.includes(r.name))}(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(t.is("element")&&t.hasStyle("white-space")&&t.getStyle("white-space")!=="inherit")return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const i=new Yn({startPosition:t?z._createAfter(e):z._createBefore(e),direction:t?"forward":"backward"});for(const{item:r}of i){if(r.is("$textProxy"))return r;if(!r.is("element")||!r.getCustomProperty("dataPipeline:transparentRendering")){if(r.is("element","br"))return null;if(this._isInlineObjectElement(r))return r;if(r.is("containerElement"))return null}}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return!!e.is("element")&&(e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e))}_createViewElement(e,t){if(Po(e))return new ma(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Qi(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(np,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const r of t.getAttributeNames())i.setAttribute(r,t.getAttribute(r))}return i}}function rp(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function op(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Sx(n,e,t){return e=="\xA0"&&n&&n.is("element")&&n.childCount==1&&t.includes(n.name)}function Ix(n,e){return e=="\xA0"&&n&&n.is("element","span")&&n.childCount==1&&n.hasAttribute("data-cke-filler")}function sp(n){return n.is("element","br")&&n.hasAttribute("data-cke-filler")}function ap(n,e){return n.tagName==="BR"&&op(n,e)&&n.parentNode.childNodes.length===1}function lp(n){n==="script"&&le("domconverter-unsafe-script-element-detected"),n==="style"&&le("domconverter-unsafe-style-element-detected")}class bi extends Mt(){constructor(e){super(),m(this,"view"),m(this,"document"),m(this,"_isEnabled",!1),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!(!e||e.nodeType!==1)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Nr{constructor(e,t,i){m(this,"view"),m(this,"document"),m(this,"domEvent"),m(this,"domTarget"),this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,tg(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Ti extends bi{constructor(){super(...arguments),m(this,"useCapture",!1),m(this,"usePassive",!1)}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(t=>{this.listenTo(e,t,(i,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Nr(this.view,t,i))}}class Px extends Ti{constructor(){super(...arguments),m(this,"domEventType",["keydown","keyup"])}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Gn(this)}};this.fire(e.type,e,t)}}class Mx extends bi{constructor(e){super(e),m(this,"_fireSelectionChangeDoneDebounced"),this._fireSelectionChangeDoneDebounced=gi(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Ji(t.getRanges(),{backward:t.isBackward,fake:!1});e!=ie.arrowleft&&e!=ie.arrowup||i.setTo(i.getFirstPosition()),e!=ie.arrowright&&e!=ie.arrowdown||i.setTo(i.getLastPosition());const r={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}let cp=class extends bi{constructor(n){super(n),m(this,"domConverter"),m(this,"_config"),m(this,"_domElements"),m(this,"_mutationObserver"),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=n.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(n){this._domElements.add(n),this.isEnabled&&this._mutationObserver.observe(n,this._config)}stopObserving(n){if(this._domElements.delete(n),this.isEnabled){this._mutationObserver.disconnect();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}}enable(){super.enable();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(n){if(n.length===0)return;const e=this.domConverter,t=new Set,i=new Set;for(const o of n){const s=e.mapDomToView(o.target);s&&(s.is("uiElement")||s.is("rawElement")||o.type!=="childList"||this._isBogusBrMutation(o)||i.add(s))}for(const o of n){const s=e.mapDomToView(o.target);if((!s||!s.is("uiElement")&&!s.is("rawElement"))&&o.type==="characterData"){const a=e.findCorrespondingViewText(o.target);a&&!i.has(a.parent)?t.add(a):!a&&Zt(o.target)&&i.add(e.mapDomToView(o.target.parentNode))}}const r=[];for(const o of t)r.push({type:"text",node:o});for(const o of i){const s=e.mapViewToDom(o);rg(Array.from(o.getChildren()),Array.from(e.domChildrenToView(s,{withChildren:!1})),Vx)||r.push({type:"children",node:o})}r.length&&this.document.fire("mutations",{mutations:r})}_isBogusBrMutation(n){let e=null;return n.nextSibling===null&&n.removedNodes.length===0&&n.addedNodes.length==1&&(e=this.domConverter.domToView(n.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}};function Vx(n,e){if(!Array.isArray(n))return n===e||!(!n.is("$text")||!e.is("$text"))&&n.data===e.data}class fa extends Ti{constructor(e){super(e),m(this,"_renderTimeoutId",null),m(this,"_isFocusChanging",!1),m(this,"domEventType",["focus","blur"]),this.useCapture=!0;const t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(i,r)=>this._handleBlur(r)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const t=this.document.selection.editableElement;t!==null&&t!==e.target||(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Lx extends bi{constructor(e){super(e),m(this,"mutationObserver"),m(this,"focusObserver"),m(this,"selection"),m(this,"domConverter"),m(this,"_documents",new WeakSet),m(this,"_fireSelectionChangeDoneDebounced"),m(this,"_clearInfiniteLoopInterval"),m(this,"_documentIsSelectingInactivityTimeoutDebounced"),m(this,"_loopbackCounter",0),m(this,"_pendingSelectionChange",new Set),this.mutationObserver=e.getObserver(cp),this.focusObserver=e.getObserver(fa),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=gi(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=gi(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(t,i,r)=>{if(r&&this._pendingSelectionChange.size){for(const o of Array.from(this._pendingSelectionChange))this._handleSelectionChange(o);this._pendingSelectionChange.clear()}})}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(e,"keydown",i,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",i,{priority:"highest",useCapture:!0}),this._documents.has(t)||(this.listenTo(t,"mouseup",i,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!W.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(t);if(i.rangeCount!=0)if(this.view.hasDomSelection=!0,this.focusObserver.flush(),this.view.document.isFocused){if(this._pendingSelectionChange.delete(e),!this.selection.isEqual(i)||!this.domConverter.isDomSelectionCorrect(t))if(++this._loopbackCounter>60)this._reportInfiniteLoop();else if(this.selection.isSimilar(i))this.view.forceRender();else{const r={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}else this._pendingSelectionChange.add(e);else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class Ox extends Ti{constructor(e){super(e),m(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}class dp{constructor(e,t={}){m(this,"_files"),m(this,"_native"),this._files=t.cacheFiles?up(e):null,this._native=e}get files(){return this._files||(this._files=up(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function up(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class Nx extends Ti{constructor(){super(...arguments),m(this,"domEventType","beforeinput")}onDomEvent(e){const t=e.getTargetRanges(),i=this.view,r=i.document;let o=null,s=null,a=[];if(e.dataTransfer&&(o=new dp(e.dataTransfer)),e.data!==null?s=e.data:o&&(s=o.getData("text/plain")),r.selection.isFake)a=Array.from(r.selection.getRanges());else if(t.length)a=t.map(l=>{const c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),d=i.domConverter.domPositionToView(l.endContainer,l.endOffset);return c?i.createRange(c,d):d?i.createRange(d):void 0}).filter(l=>!!l);else if(W.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(W.isAndroid&&e.inputType=="insertCompositionText"&&s&&s.endsWith(`
`))this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});else if(e.inputType=="insertText"&&s&&s.includes(`
`)){const l=s.split(/\n{1,2}/g);let c=a;for(let d=0;d<l.length;d++){const u=l[d];u!=""&&(this.fire(e.type,e,{data:u,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[r.selection.getFirstRange()]),d+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[r.selection.getFirstRange()])}}else this.fire(e.type,e,{data:s,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}class Rx extends bi{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&Q2(i.keyCode)){const r=new Vr(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,i),r.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class zx extends bi{constructor(e){super(e);const t=this.document;t.on("keydown",(i,r)=>{if(!this.isEnabled||r.keyCode!=ie.tab||r.ctrlKey)return;const o=new Vr(t,"tab",t.selection.getFirstRange());t.fire(o,r),o.stop.called&&i.stop()})}observe(){}stopObserving(){}}let Dx=class extends xe(){constructor(n){super(),m(this,"document"),m(this,"domConverter"),m(this,"domRoots",new Map),m(this,"_renderer"),m(this,"_initialDomRootAttributes",new WeakMap),m(this,"_observers",new Map),m(this,"_writer"),m(this,"_ongoingChange",!1),m(this,"_postFixersInProgress",!1),m(this,"_renderingDisabled",!1),m(this,"_hasChangedSinceTheLastRendering",!1),this.document=new ha(n),this.domConverter=new pa(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new vx(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Fc(this.document),this.addObserver(cp),this.addObserver(fa),this.addObserver(Lx),this.addObserver(Px),this.addObserver(Mx),this.addObserver(Ox),this.addObserver(Rx),this.addObserver(Nx),this.addObserver(zx),this.document.on("arrowKey",_x,{priority:"low"}),px(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),W.isiOS&&this.listenTo(this.document,"blur",(e,t)=>{this.domConverter.mapDomToView(t.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(e,{mutations:t})=>{t.forEach(i=>this._renderer.markToSync(i.type,i.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(n,e="main"){const t=this.document.getRoot(e);t._name=n.tagName.toLowerCase();const i={};for(const{name:o,value:s}of Array.from(n.attributes))i[o]=s,o==="class"?this._writer.addClass(s.split(" "),t):t.hasAttribute(o)||this._writer.setAttribute(o,s,t);this._initialDomRootAttributes.set(n,i);const r=()=>{this._writer.setAttribute("contenteditable",(!t.isReadOnly).toString(),t),t.isReadOnly?this._writer.addClass("ck-read-only",t):this._writer.removeClass("ck-read-only",t)};r(),this.domRoots.set(e,n),this.domConverter.bindElements(n,t),this._renderer.markToSync("children",t),this._renderer.markToSync("attributes",t),this._renderer.domDocuments.add(n.ownerDocument),t.on("change:children",(o,s)=>this._renderer.markToSync("children",s)),t.on("change:attributes",(o,s)=>this._renderer.markToSync("attributes",s)),t.on("change:text",(o,s)=>this._renderer.markToSync("text",s)),t.on("change:isReadOnly",()=>this.change(r)),t.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(n,e)}detachDomRoot(n){const e=this.domRoots.get(n);Array.from(e.attributes).forEach(({name:i})=>e.removeAttribute(i));const t=this._initialDomRootAttributes.get(e);for(const i in t)e.setAttribute(i,t[i]);this.domRoots.delete(n),this.domConverter.unbindDomElement(e);for(const i of this._observers.values())i.stopObserving(e)}getDomRoot(n="main"){return this.domRoots.get(n)}addObserver(n){let e=this._observers.get(n);if(e)return e;e=new n(this),this._observers.set(n,e);for(const[t,i]of this.domRoots)e.observe(i,t);return e.enable(),e}getObserver(n){return this._observers.get(n)}disableObservers(){for(const n of this._observers.values())n.disable()}enableObservers(){for(const n of this._observers.values())n.enable()}scrollToTheSelection({alignToTop:n,forceScroll:e,viewportOffset:t=20,ancestorOffset:i=20}={}){const r=this.document.selection.getFirstRange();if(!r)return;const o=Wt({alignToTop:n,forceScroll:e,viewportOffset:t,ancestorOffset:i});typeof t=="number"&&(t={top:t,bottom:t,left:t,right:t});const s={target:this.domConverter.viewRangeToDom(r),viewportOffset:t,ancestorOffset:i,alignToTop:n,forceScroll:e};this.fire("scrollToTheSelection",s,o),U2(s)}focus(){if(!this.document.isFocused){const n=this.document.selection.editableElement;n&&(this.domConverter.focus(n),this.forceRender())}}change(n){if(this.isRenderingInProgress||this._postFixersInProgress)throw new v("cannot-change-view-tree",this);try{if(this._ongoingChange)return n(this._writer);this._ongoingChange=!0;const e=n(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(e){v.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(fa).flush(),this.change(()=>{})}destroy(){for(const n of this._observers.values())n.destroy();this.document.destroy(),this.stopListening()}createPositionAt(n,e){return z._createAt(n,e)}createPositionAfter(n){return z._createAfter(n)}createPositionBefore(n){return z._createBefore(n)}createRange(n,e){return new se(n,e)}createRangeOn(n){return se._createOn(n)}createRangeIn(n){return se._createIn(n)}createSelection(...n){return new Ji(...n)}_disableRendering(n){this._renderingDisabled=n,n==0&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};class Cn{is(){throw new Error("is() method is abstract")}}class ki extends Cn{constructor(e,t,i){if(super(),m(this,"textNode"),m(this,"data"),m(this,"offsetInText"),this.textNode=e,t<0||t>e.offsetSize)throw new v("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new v("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ki.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class Xi{constructor(e){if(m(this,"direction"),m(this,"boundaries"),m(this,"singleCharacters"),m(this,"shallow"),m(this,"ignoreElementEnd"),m(this,"_position"),m(this,"_boundaryStartParent"),m(this,"_boundaryEndParent"),m(this,"_visitedParent"),!e||!e.boundaries&&!e.startPosition)throw new v("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new v("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=S._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,r,o;do r=this.position,o=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=r,this._visitedParent=o)}jumpTo(e){this._boundaryStartParent&&e.isBefore(this.boundaries.start)?e=this.boundaries.start:this._boundaryEndParent&&e.isAfter(this.boundaries.end)&&(e=this.boundaries.end),this._position=e.clone(),this._visitedParent=e.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const r=Fo(t,i),o=r||hp(t,i,r);if(o&&o.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t.path.push(0),this._visitedParent=o;return this._position=t,Xn("elementStart",o,e,t,1)}if(o&&o.is("model:$text")){let s;if(this.singleCharacters)s=1;else{let c=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),s=c-t.offset}const a=t.offset-o.startOffset,l=new ki(o,a,s);return t.offset+=s,this._position=t,Xn("text",l,e,t,s)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Xn("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const r=t.parent,o=Fo(t,r),s=o||mp(t,r,o);if(s&&s.is("model:element"))return t.offset--,this.shallow?(this._position=t,Xn("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this._position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():Xn("elementEnd",s,e,t));if(s&&s.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let d=s.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=t.offset-d}const l=t.offset-s.startOffset,c=new ki(s,l-a,a);return t.offset-=a,this._position=t,Xn("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,Xn("elementStart",i,e,t,1)}}function Xn(n,e,t,i,r){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:r}}}class S extends Cn{constructor(e,t,i="toNone"){if(super(),m(this,"root"),m(this,"path"),m(this,"stickiness"),!e.is("element")&&!e.is("documentFragment"))throw new v("model-position-root-invalid",e);if(!Array.isArray(t)||t.length===0)throw new v("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new v("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new v("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Fo(this,this.parent)}get nodeAfter(){const e=this.parent;return hp(this,e,Fo(this,e))}get nodeBefore(){const e=this.parent;return mp(this,e,Fo(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=Et(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Xi(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=Et(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const r=this.path[i]-e.path[i];if(r<-1||r>1)return!1;if(r===1)return gp(e,this,i);if(r===-1)return gp(this,e,i)}return this.path.length===e.path.length||(this.path.length>e.path.length?Uc(this.path,t):Uc(e.path,t))}hasSameParentAs(e){return this.root!==e.root?!1:Et(this.getParentPath(),e.getParentPath())=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=S._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange;let i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?S._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){const i=S._createAt(this);if(this.root!=e.root)return i;if(Et(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(Et(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;i.path[r]-=t}}return i}_getTransformedByInsertion(e,t){const i=S._createAt(this);if(this.root!=e.root)return i;if(Et(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(Et(e.getParentPath(),this.getParentPath())=="prefix"){const r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return S._createAt(this);const r=this._getTransformedByDeletion(e,i);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):r._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,r=S._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e.is("model:position"))return new S(e.root,e.path,e.stickiness);{const r=e;if(t=="end")t=r.maxOffset;else{if(t=="before")return this._createBefore(r,i);if(t=="after")return this._createAfter(r,i);if(t!==0&&!t)throw new v("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new v("model-position-parent-incorrect",[this,e]);const o=r.getPath();return o.push(t),new this(r.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new v("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new v("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new S(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new v("model-position-fromjson-no-root",t,{rootName:e.root});return new S(t.getRoot(e.root),e.path,e.stickiness)}}function Fo(n,e){const t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function hp(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function mp(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function gp(n,e,t){return t+1!==n.path.length&&!!Uc(e.path,t+1)&&!!function(i,r){let o=i.parent,s=i.path.length-1,a=0;for(;s>=r;){if(i.path[s]+a!==o.maxOffset)return!1;a=1,s--,o=o.parent}return!0}(n,t+1)}function Uc(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}S.prototype.is=function(n){return n==="position"||n==="model:position"};class T extends Cn{constructor(e,t){super(),m(this,"start"),m(this,"end"),this.start=S._createAt(e),this.end=t?S._createAt(t):S._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Xi({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return Et(this.start.getParentPath(),this.end.getParentPath())=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&r}containsItem(e){const t=S._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new T(this.start,e.start)),this.containsPosition(e.end)&&t.push(new T(e.end,this.end))):t.push(new T(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new T(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(i=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new T(r,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=S._createAt(this.start);let r=i.parent;for(;i.path.length>t+1;){const o=r.maxOffset-i.offset;o!==0&&e.push(new T(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],s=o-i.offset;s!==0&&e.push(new T(i,i.getShiftedBy(s))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Xi(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Xi(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Xi(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new T(this.start,this.end)]}getTransformedByOperations(e){const t=[new T(this.start,this.end)];for(const i of e)for(let r=0;r<t.length;r++){const o=t[r].getTransformedByOperation(i);t.splice(r,1,...o),r+=o.length-1}for(let i=0;i<t.length;i++){const r=t[i];for(let o=i+1;o<t.length;o++){const s=t[o];(r.containsRange(s)||s.containsRange(r)||r.isEqual(s))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,r,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new T(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new T(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=S._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new T(t,i)):new T(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new T(this.start,e),new T(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const r=new T(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,t),r.end=r.end._getTransformedByInsertion(e,t),[r]}}_getTransformedByMove(e,t,i,r=!1){if(this.isCollapsed){const u=this.start._getTransformedByMove(e,t,i);return[new T(u)]}const o=T._createFromPositionAndShift(e,i),s=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const u=this.start._getTransformedByMove(e,t,i),h=this.end._getTransformedByMove(e,t,i);return[new T(u,h)]}let a;const l=this.getDifference(o);let c=null;const d=this.getIntersection(o);if(l.length==1?c=new T(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new T(this.start,this.end._getTransformedByDeletion(e,i))),a=c?c._getTransformedByInsertion(s,i,d!==null||r):[],d){const u=new T(d.start._getCombined(o.start,s),d.end._getCombined(o.start,s));a.length==2?a.splice(1,0,u):a.push(u)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return i==null&&r==null?null:(i==null&&(i=e),r==null&&(r=e),new T(i,r))}static _createFromPositionAndShift(e,t){const i=e,r=e.getShiftedBy(t);return t>0?new this(i,r):new this(r,i)}static _createIn(e){return new this(S._createAt(e,0),S._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(S._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new v("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,s)=>o.start.isAfter(s.start)?1:-1);const i=e.indexOf(t),r=new this(t.start,t.end);for(let o=i-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=S._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=S._createAt(e[o].end);return r}static fromJSON(e,t){return new this(S.fromJSON(e.start,t),S.fromJSON(e.end,t))}}T.prototype.is=function(n){return n==="range"||n==="model:range"};class pp extends ye(){constructor(){super(),m(this,"_modelToViewMapping",new WeakMap),m(this,"_viewToModelMapping",new WeakMap),m(this,"_viewToModelLengthCallbacks",new Map),m(this,"_markerNameToElements",new Map),m(this,"_elementToMarkerNames",new Map),m(this,"_deferredBindingRemovals",new Map),m(this,"_unboundMarkerNames",new Set),m(this,"_cache",new Bx),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new v("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(i),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=S._createAt(r,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const r=this._elementToMarkerNames.get(e);r&&(r.delete(t),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new T(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new se(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const r of t)if(r.is("attributeElement"))for(const o of r.getElementsWithSameId())i.add(o);else i.add(r);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e)return this._toModelOffset(e.parent,e.index,i)+this._toModelOffset(e,t,e);if(e.is("$text"))return t;let r=0;for(let o=0;o<t;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){const t=[e];let i=0;for(;t.length>0;){const r=t.pop(),o=r.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(r.name);if(o)i+=o(r);else if(this._viewToModelMapping.has(r))i+=1;else if(r.is("$text"))i+=r.data.length;else{if(r.is("uiElement"))continue;for(const s of r.getChildren())t.push(s)}}return i}findPositionIn(e,t){if(t===0)return this._moveViewPositionToTextNode(new z(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const i=this._cache.getClosest(e,t);return this._findPositionStartingFrom(i.viewPosition,i.modelOffset,t,e,!0)}return this._findPositionStartingFrom(new z(e,0),0,t,e,!1)}_findPositionStartingFrom(e,t,i,r,o){let s,a=e.parent,l=e.offset;if(a.is("$text"))return new z(a,i-t);let c=t,d=0;for(;c<i;)if(s=a.getChild(l),s)d=this.getModelLength(s),c+=d,l++,o&&this._cache.save(a,l,r,c);else{if(a==r)throw new v("mapping-model-offset-not-found",this,{modelOffset:i,viewContainer:r});l=a.parent.getChildIndex(a)+1,a=a.parent}return c==i?this._moveViewPositionToTextNode(new z(a,l)):this._findPositionStartingFrom(new z(s,0),c-d,i,r,o)}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t&&t.is("view:$text")?new z(t,t.data.length):i&&i.is("view:$text")?new z(i,0):e}}class Bx extends ye(){constructor(){super(...arguments),m(this,"_cachedMapping",new WeakMap),m(this,"_nodeToCacheListIndex",new WeakMap),m(this,"_invalidateOnChildrenChangeCallback",(e,t,i)=>{this._clearCacheInsideParent(t,i.index)}),m(this,"_invalidateOnTextChangeCallback",(e,t)=>{this._clearCacheStartingBefore(t)})}save(e,t,i,r){const o=this._cachedMapping.get(i),s=o.cacheMap.get(r);if(s){const c=e.getChild(t-1),d=s.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(s.viewPosition.nodeBefore):0;return void this._nodeToCacheListIndex.set(c,d)}const a={viewPosition:new z(e,t),modelOffset:r};o.maxModelOffset=r>o.maxModelOffset?r:o.maxModelOffset,o.cacheMap.set(r,a);let l=o.cacheList.length-1;for(;l>=0&&o.cacheList[l].modelOffset>r;)l--;if(o.cacheList.splice(l+1,0,a),t>0){const c=e.getChild(t-1);this._nodeToCacheListIndex.set(c,l+1)}}getClosest(e,t){const i=this._cachedMapping.get(e);let r;i?t>i.maxModelOffset?r=i.cacheList[i.cacheList.length-1]:r=i.cacheMap.get(t)||this._findInCacheList(i.cacheList,t):r=this.startTracking(e);const o=this._hoistViewPosition(r.viewPosition);return{modelOffset:r.modelOffset,viewPosition:o}}_hoistViewPosition(e){for(;e.parent.parent&&!this._cachedMapping.has(e.parent)&&e.isAtEnd;){const t=e.parent.parent,i=t.getChildIndex(e.parent)+1;e=new z(t,i)}return e}startTracking(e){const t={viewPosition:new z(e,0),modelOffset:0},i={maxModelOffset:0,cacheList:[t],cacheMap:new Map([[0,t]])};return this._cachedMapping.set(e,i),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),t}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,t){if(t==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheStartingBefore(e);else{const i=e.getChild(t-1);this._clearCacheStartingBefore(i)}}_clearCacheAll(e){const t=this._cachedMapping.get(e);t.maxModelOffset>0&&(t.maxModelOffset=0,t.cacheList.length=1,t.cacheMap.clear(),t.cacheMap.set(0,t.cacheList[0]))}_clearCacheStartingBefore(e){const t=this._nodeToCacheListIndex.get(e);if(t===void 0){const r=e.parent;return void(this._cachedMapping.has(r)||this._clearCacheStartingBefore(r))}let i=e.parent;for(;!this._cachedMapping.has(i);)i=i.parent;this._clearCacheFromIndex(i,t)}_clearCacheFromIndex(e,t){t===0&&(t=1);const i=this._cachedMapping.get(e),r=i.cacheList[t-1];if(!r)return;i.maxModelOffset=r.modelOffset;const o=i.cacheList.splice(t);for(const s of o){i.cacheMap.delete(s.modelOffset);const a=s.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(a)}}_findInCacheList(e,t){let i=0,r=e.length-1,o=r-i>>1,s=e[o];for(;i<r;)s.modelOffset<t?i=o+1:r=o-1,o=i+(r-i>>1),s=e[o];return s.modelOffset<=t?s:e[o-1]}}class Fx{constructor(){m(this,"_consumable",new Map),m(this,"_textProxyRegistry",new Map)}add(e,t){t=ba(t),e instanceof ki&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=ba(t),e instanceof ki&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=ba(t),e instanceof ki&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const r=i.get(t);return r===void 0?null:r}revert(e,t){t=ba(t),e instanceof ki&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i!==!0&&null}verifyAllConsumed(e){const t=[];for(const[i,r]of this._consumable)for(const[o,s]of r){const a=o.split(":")[0];s&&e==a&&t.push({event:o,item:i.name||i.description})}if(t.length)throw new v("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const r=i.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,r=e.parent,o=Symbol("$textProxy:"+e.data);let s,a;return s=this._textProxyRegistry.get(t),s||(s=new Map,this._textProxyRegistry.set(t,s)),a=s.get(i),a||(a=new Map,s.set(i,a)),a.set(r,o),o}}function ba(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class fp extends ye(){constructor(e){super(),m(this,"_conversionApi"),m(this,"_firedEventsMap"),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const r=this._createConversionApi(i,e.getRefreshedItems());for(const s of e.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,r);const o=this._reduceChanges(e.getChanges());for(const s of o)s.type==="insert"?this._convertInsert(T._createFromPositionAndShift(s.position,s.length),r):s.type==="reinsert"?this._convertReinsert(T._createFromPositionAndShift(s.position,s.length),r):s.type==="remove"?this._convertRemove(s.position,s.length,s.name,r):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const s of r.mapper.flushUnboundMarkerNames()){const a=t.get(s).getRange();this._convertMarkerRemove(s,a,r),this._convertMarkerAdd(s,a,r)}for(const s of e.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,t,i,r={}){const o=this._createConversionApi(i,void 0,r);this._convertInsert(e,o);for(const[s,a]of t)this._convertMarkerAdd(s,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const r=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},r);const o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;const s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,s),this.fire("selection",{selection:e},r),e.isCollapsed){for(const a of s)if(r.consumable.test(e,"addMarker:"+a.name)){const l=a.getRange();if(!jx(e.getFirstPosition(),a,r.mapper))continue;const c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,r)}for(const a of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+a)){const l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,r)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const r of e.getWalker({shallow:!0}))this._testAndFire("insert",bp(r),t)}_convertRemove(e,t,i,r){this.fire(`remove:${i}`,{position:e,length:t},r)}_convertAttribute(e,t,i,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const s of e){const a={item:s.item,range:T._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:i,attributeNewValue:r};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const r of i.map(bp))this._testAndFire("insert",{...r,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const r=`addMarker:${e}`;if(i.consumable.add(t,r),this.fire(r,{markerName:e,markerRange:t},i),i.consumable.consume(t,r)){this._addConsumablesForRange(i.consumable,t,r);for(const o of t.getItems()){if(!i.consumable.test(o,r))continue;const s={item:o,range:T._createOn(o),markerName:e,markerRange:t};this.fire(r,s,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const i of t){const r=i.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(const o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,i){for(const r of t.getItems())e.add(r,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const r of i)e.add(t,"addMarker:"+r.name);for(const r of t.getAttributeKeys())e.add(t,"attribute:"+r);return e}_testAndFire(e,t,i){const r=function(l,c){const d=c.item.is("element")?c.item.name:"$text";return`${l}:${d}`}(e,t),o=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(i),a=s.get(o);if(a){if(a.has(r))return;a.add(r)}else s.set(o,new Set([r]));this.fire(r,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:T._createOn(e)};for(const r of i.item.getAttributeKeys())i.attributeKey=r,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(r),this._testAndFire(`attribute:${r}`,i,t)}_createConversionApi(e,t=new Set,i={}){const r={...this._conversionApi,consumable:new Fx,writer:e,options:i,convertItem:o=>this._convertInsert(T._createOn(o),r),convertChildren:o=>this._convertInsert(T._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!t.has(r.mapper.toModelElement(o))};return this._firedEventsMap.set(r,new Map),r}}function jx(n,e,t){const i=e.getRange(),r=Array.from(n.getAncestors());return r.shift(),r.reverse(),!r.some(o=>{if(i.containsItem(o))return!!t.toViewElement(o).getCustomProperty("addHighlight")})}function bp(n){return{item:n.item,range:T._createFromPositionAndShift(n.previousPosition,n.length)}}let er=class extends Cn{constructor(n){super(),m(this,"parent",null),m(this,"_attrs"),m(this,"_index",null),m(this,"_startOffset",null),this._attrs=fi(n)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.parent!==null&&this.root.isAttached()}getPath(){const n=[];let e=this;for(;e.parent;)n.unshift(e.startOffset),e=e.parent;return n}getAncestors(n={}){const e=[];let t=n.includeSelf?this:this.parent;for(;t;)e[n.parentFirst?"push":"unshift"](t),t=t.parent;return e}getCommonAncestor(n,e={}){const t=this.getAncestors(e),i=n.getAncestors(e);let r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const e=this.getPath(),t=n.getPath(),i=Et(e,t);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<t[i]}}isAfter(n){return this!=n&&this.root===n.root&&!this.isBefore(n)}hasAttribute(n){return this._attrs.has(n)}getAttribute(n){return this._attrs.get(n)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const n={};return this._attrs.size&&(n.attributes=Array.from(this._attrs).reduce((e,t)=>(e[t[0]]=t[1],e),{})),n}_clone(n){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(n,e){this._attrs.set(n,e)}_setAttributesTo(n){this._attrs=fi(n)}_removeAttribute(n){return this._attrs.delete(n)}_clearAttributes(){this._attrs.clear()}};er.prototype.is=function(n){return n==="node"||n==="model:node"};class Qt extends ye(Cn){constructor(...e){super(),m(this,"_lastRangeBackward",!1),m(this,"_attrs",new Map),m(this,"_ranges",[]),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const r of e._ranges)if(t.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new T(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new T(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new T(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof Qt)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof T)this._setRanges([t],!!r&&!!r.backward);else if(t instanceof S)this._setRanges([new T(t)]);else if(t instanceof er){const o=!!r&&!!r.backward;let s;if(i=="in")s=T._createIn(t);else if(i=="on")s=T._createOn(t);else{if(i===void 0)throw new v("model-selection-setto-required-second-parameter",[this,t]);s=new T(S._createAt(t,i))}this._setRanges([s],o)}else{if(!qt(t))throw new v("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,r&&!!r.backward)}}_setRanges(e,t=!1){const i=Array.from(e),r=i.some(o=>{if(!(o instanceof T))throw new v("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(s=>!s.isEqual(o))});(i.length!==this._ranges.length||r)&&(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new v("model-selection-setfocus-no-ranges",[this,e]);const i=S._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new T(i,r)),this._lastRangeBackward=!0):(this._pushRange(new T(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=wp(t.start,e);Hx(i,t)&&(yield i);const r=t.getWalker();for(const s of r){const a=s.item;s.type=="elementEnd"&&$x(a,e,t)?yield a:s.type=="elementStart"&&a.is("model:element")&&a.root.document.model.schema.isBlock(a)&&r.jumpTo(S._createAt(a,"end"))}const o=wp(t.end,e);Ux(o,t)&&(yield o)}}containsEntireContent(e=this.anchor.root){const t=S._createAt(e,0),i=S._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new T(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new v("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function kp(n,e){return!e.has(n)&&(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function $x(n,e,t){return kp(n,e)&&Wc(n,t)}function wp(n,e){const t=n.parent.root.document.model.schema,i=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(s=>!r&&(r=t.isLimit(s),!r&&kp(s,e)));return i.forEach(s=>e.add(s)),o}function Wc(n,e){const t=function(i){const r=i.root.document.model.schema;let o=i.parent;for(;o;){if(r.isBlock(o))return o;o=o.parent}}(n);return t?!e.containsRange(T._createOn(t),!0):!0}function Hx(n,e){return!!n&&(!(!e.isCollapsed&&!n.isEmpty)||!e.start.isTouching(S._createAt(n,n.maxOffset))&&Wc(n,e))}function Ux(n,e){return!!n&&(!(!e.isCollapsed&&!n.isEmpty)||!e.end.isTouching(S._createAt(n,0))&&Wc(n,e))}Qt.prototype.is=function(n){return n==="selection"||n==="model:selection"};class Lt extends ye(T){constructor(e,t){super(e,t),Wx.call(this)}detach(){this.stopListening()}toRange(){return new T(this.start,this.end)}static fromRange(e){return new Lt(e.start,e.end)}}function Wx(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&qx.call(this,t)},{priority:"low"})}function qx(n){const e=this.getTransformedByOperation(n),t=T._createFromRanges(e),i=!t.isEqual(this),r=function(s,a){switch(a.type){case"insert":return s.containsPosition(a.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(a.sourcePosition)||s.start.isEqual(a.sourcePosition)||s.containsPosition(a.targetPosition);case"split":return s.containsPosition(a.splitPosition)||s.containsPosition(a.insertionPosition)}return!1}(this,n);let o=null;if(i){t.root.rootName=="$graveyard"&&(o=n.type=="remove"?n.sourcePosition:n.deletionPosition);const s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}Lt.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};class He extends er{constructor(e,t){super(t),m(this,"_data"),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new He(this.data,this.getAttributes())}static fromJSON(e){return new He(e.data,e.attributes)}}He.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};const ka="selection:";class wi extends ye(Cn){constructor(e){super(),m(this,"_selection"),this._selection=new Gx(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return ka+e}static _isStoreAttributeKey(e){return e.startsWith(ka)}}wi.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class Gx extends Qt{constructor(e){super(),m(this,"markers",new ot({idProperty:"name"})),m(this,"_model"),m(this,"_document"),m(this,"_attributePriority",new Map),m(this,"_selectionRestorePosition",null),m(this,"_hasChangedRange",!1),m(this,"_overriddenGravityRegister",new Set),m(this,"_observedMarkers",new Set),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const r=i[0];r.isDocumentOperation&&r.type!="marker"&&r.type!="rename"&&r.type!="noop"&&(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(t,i)=>{(function(r,o){const s=r.document.differ;for(const a of s.getChanges()){if(a.type!="insert")continue;const l=a.position.parent;a.length===l.maxOffset&&r.enqueueChange(o,c=>{const d=Array.from(l.getAttributeKeys()).filter(u=>u.startsWith(ka));for(const u of d)c.removeAttribute(u,l)})}})(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Tt();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new v("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new v("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Lt.fromRange(e);return t.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const r of this._model.markers){const o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const s=r.getRange();for(const a of this.getRanges())s.containsRange(a,!a.isCollapsed)&&e.push(r)}const i=Array.from(this.markers);for(const r of e)this.markers.has(r)||(this.markers.add(r),t=!0);for(const r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1;const o=Array.from(this.markers),s=this.markers.has(e);if(t){let a=!1;for(const l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!s?(this.markers.add(e),r=!0):!a&&s&&(this.markers.remove(e),r=!0)}else s&&(this.markers.remove(e),r=!0);r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=fi(this._getSurroundingAttributes()),i=fi(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,s]of this._attributePriority)s=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const r=[];for(const[o,s]of this.getAttributes())i.has(o)&&i.get(o)===s||r.push(o);for(const[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,i=!0){const r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"?!1:super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return(i!="low"||this._attributePriority.get(e)!="normal")&&(this._attributePriority.set(e,i),!!super.hasAttribute(e)&&(this._attrs.delete(e),!0))}_setAttributesTo(e){const t=new Set;for(const[i,r]of this.getAttributes())e.get(i)!==r&&this._removeAttribute(i,!1);for(const[i,r]of e)this._setAttribute(i,r,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(ka)&&(yield[t.substr(10),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=jo(r,t)),i||(i=jo(o,t)),!this.isGravityOverridden&&!i){let s=r;for(;s&&!i;)s=s.previousSibling,i=jo(s,t)}if(!i){let s=o;for(;s&&!i;)s=s.nextSibling,i=jo(s,t)}i||(i=this.getStoredAttributes())}else{const r=this.getFirstRange();for(const o of r){if(o.item.is("element")&&t.isObject(o.item)){i=jo(o.item,t);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function jo(n,e){if(!n)return null;if(n instanceof ki||n instanceof He)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[i,r]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,r]);return t}class $o{constructor(e){m(this,"_nodes",[]),m(this,"_offsetToNode",[]),e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new v("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[e];if(!t)throw new v("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){const i=[];for(const o of t){if(!(o instanceof er))throw new v("model-nodelist-insertnodes-not-node",this);i.push(o)}let r=this.indexToOffset(e);Ng(this._nodes,i,e),Ng(this._offsetToNode,function(o){const s=[];let a=0;for(const l of o)for(let c=0;c<l.offsetSize;c++)s[a++]=l;return s}(i),r);for(let o=e;o<this._nodes.length;o++)this._nodes[o]._index=o,this._nodes[o]._startOffset=r,r+=this._nodes[o].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e);const r=this._nodes.splice(e,t),o=r[r.length-1],s=o.startOffset+o.offsetSize-i;this._offsetToNode.splice(i,s);for(const a of r)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return r}_removeNodesArray(e){if(e.length==0)return;for(const i of e)i._index=null,i._startOffset=null;this._nodes=this._nodes.filter(i=>i.index!==null),this._offsetToNode=this._offsetToNode.filter(i=>i.index!==null);let t=0;for(let i=0;i<this._nodes.length;i++)this._nodes[i]._index=i,this._nodes[i]._startOffset=t,t+=this._nodes[i].offsetSize}toJSON(){return this._nodes.map(e=>e.toJSON())}}class ze extends er{constructor(e,t,i){super(t),m(this,"name"),m(this,"_children",new $o),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?function(i){const r=[];for(const o of i)r.push(o._clone(!0));return r}(this._children):void 0;return new ze(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(r){if(typeof r=="string")return[new He(r)];qt(r)||(r=[r]);const o=[];for(const s of r)typeof s=="string"?o.push(new He(s)):s instanceof ki?o.push(new He(s.data,s.getAttributes())):o.push(s);return o}(t);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const r of i)r.parent=null;return i}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const t of e)t.parent=null}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(ze.fromJSON(i)):t.push(He.fromJSON(i))}return new ze(e.name,e.attributes,t)}}ze.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};class _p{constructor(e){m(this,"_dispatchers"),this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class Zx extends _p{elementToElement(e){return this.add(function(t){const i=xp(t.model),r=Ho(t.view,"container");return i.attributes.length&&(i.children=!0),o=>{o.on(`insert:${i.name}`,Yx(r,Ep(i)),{priority:t.converterPriority||"normal"}),(i.children||i.attributes.length)&&o.on("reduceChanges",Tp(i),{priority:"low"})}}(e))}elementToStructure(e){return this.add(function(t){const i=xp(t.model),r=Ho(t.view,"container");return i.children=!0,o=>{if(o._conversionApi.schema.checkChild(i.name,"$text"))throw new v("conversion-element-to-structure-disallowed-text",o,{elementName:i.name});var s,a;o.on(`insert:${i.name}`,(s=r,a=Ep(i),(l,c,d)=>{if(!a(c.item,d.consumable,{preflight:!0}))return;const u=new Map;d.writer._registerSlotFactory(function(p,f,b){return(k,w)=>{const _=k.createContainerElement("$slot");let y=null;if(w==="children")y=Array.from(p.getChildren());else{if(typeof w!="function")throw new v("conversion-slot-mode-unknown",b.dispatcher,{modeOrFilter:w});y=Array.from(p.getChildren()).filter(x=>w(x))}return f.set(_,y),_}}(c.item,u,d));const h=s(c.item,d,c);if(d.writer._clearSlotFactory(),!h)return;(function(p,f,b){const k=Array.from(f.values()).flat(),w=new Set(k);if(w.size!=k.length)throw new v("conversion-slot-filter-overlap",b.dispatcher,{element:p});if(w.size!=p.childCount)throw new v("conversion-slot-filter-incomplete",b.dispatcher,{element:p})})(c.item,u,d),a(c.item,d.consumable);const g=d.mapper.toViewPosition(c.range.start);d.mapper.bindElements(c.item,h),d.writer.insert(g,h),d.convertAttributes(c.item),function(p,f,b,k){b.mapper.on("modelToViewPosition",y,{priority:"highest"});let w=null,_=null;for([w,_]of f)Sp(p,_,b,k),b.writer.move(b.writer.createRangeIn(w),b.writer.createPositionBefore(w)),b.writer.remove(w);function y(x,A){const I=A.modelPosition.nodeAfter,M=_.indexOf(I);M<0||(A.viewPosition=A.mapper.findPositionIn(w,M))}b.mapper.off("modelToViewPosition",y)}(h,u,d,{reconversion:c.reconversion})}),{priority:t.converterPriority||"normal"}),o.on("reduceChanges",Tp(i),{priority:"low"})}}(e))}attributeToElement(e){return this.add(function(t){t=Wt(t);let i=t.model;typeof i=="string"&&(i={key:i});let r=`attribute:${i.key}`;if(i.name&&(r+=":"+i.name),i.values)for(const s of i.values)t.view[s]=Ho(t.view[s],"attribute");else t.view=Ho(t.view,"attribute");const o=Cp(t);return s=>{s.on(r,Kx(o),{priority:t.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=Wt(t);let i=t.model;typeof i=="string"&&(i={key:i});let r=`attribute:${i.key}`;if(i.name&&(r+=":"+i.name),i.values)for(const s of i.values)t.view[s]=Ap(t.view[s]);else t.view=Ap(t.view);const o=Cp(t);return s=>{var a;s.on(r,(a=o,(l,c,d)=>{if(!d.consumable.test(c.item,l.name))return;const u=a(c.attributeOldValue,d,c),h=a(c.attributeNewValue,d,c);if(!u&&!h)return;d.consumable.consume(c.item,l.name);const g=d.mapper.toViewElement(c.item),p=d.writer;if(!g)throw new v("conversion-attribute-to-attribute-on-text",d.dispatcher,c);if(c.attributeOldValue!==null&&u){let f=u.value;u.key=="style"&&(f=typeof u.value=="string"?new Oo(p.document.stylesProcessor).setTo(u.value).getStylesEntries().map(([b])=>b):Object.keys(u.value)),p.removeAttribute(u.key,f,g)}if(c.attributeNewValue!==null&&h){let f=h.value;h.key=="style"&&typeof h.value=="string"&&(f=Object.fromEntries(new Oo(p.document.stylesProcessor).setTo(h.value).getStylesEntries())),p.setAttribute(h.key,f,!1,g)}}),{priority:t.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(t){const i=Ho(t.view,"ui");return r=>{r.on(`addMarker:${t.model}`,Qx(i),{priority:t.converterPriority||"normal"}),r.on(`removeMarker:${t.model}`,(o,s,a)=>{const l=a.mapper.markerNameToElements(s.markerName);if(l){for(const c of l)a.mapper.unbindElementFromMarkerName(c,s.markerName),a.writer.clear(a.writer.createRangeOn(c),c);a.writer.clearClonedElementsGroup(s.markerName),o.stop()}},{priority:t.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add(function(t){return i=>{var r;i.on(`addMarker:${t.model}`,(r=t.view,(o,s,a)=>{if(!s.item||!(s.item instanceof Qt||s.item instanceof wi||s.item.is("$textProxy")))return;const l=qc(r,s,a);if(!l||!a.consumable.consume(s.item,o.name))return;const c=a.writer,d=vp(c,l),u=c.document.selection;if(s.item instanceof Qt||s.item instanceof wi)c.wrap(u.getFirstRange(),d);else{const h=a.mapper.toViewRange(s.range),g=c.wrap(h,d);for(const p of g.getItems())if(p.is("attributeElement")&&p.isSimilar(d)){a.mapper.bindElementToMarker(p,s.markerName);break}}}),{priority:t.converterPriority||"normal"}),i.on(`addMarker:${t.model}`,function(o){return(s,a,l)=>{if(!a.item||!(a.item instanceof ze))return;const c=qc(o,a,l);if(!c||!l.consumable.test(a.item,s.name))return;const d=l.mapper.toViewElement(a.item);if(d&&d.getCustomProperty("addHighlight")){l.consumable.consume(a.item,s.name);for(const u of T._createIn(a.item))l.consumable.consume(u.item,s.name);d.getCustomProperty("addHighlight")(d,c,l.writer),l.mapper.bindElementToMarker(d,a.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${t.model}`,function(o){return(s,a,l)=>{if(a.markerRange.isCollapsed)return;const c=qc(o,a,l);if(!c)return;const d=vp(l.writer,c),u=l.mapper.markerNameToElements(a.markerName);if(u){for(const h of u)l.mapper.unbindElementFromMarkerName(h,a.markerName),h.is("attributeElement")?l.writer.unwrap(l.writer.createRangeOn(h),d):h.getCustomProperty("removeHighlight")(h,c.id,l.writer);l.writer.clearClonedElementsGroup(a.markerName),s.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(e))}markerToData(e){return this.add(function(t){t=Wt(t);const i=t.model;let r=t.view;return r||(r=o=>({group:i,name:o.substr(t.model.length+1)})),o=>{var s;o.on(`addMarker:${i}`,(s=r,(a,l,c)=>{const d=s(l.markerName,c);if(!d)return;const u=l.markerRange;c.consumable.consume(u,a.name)&&(yp(u,!1,c,l,d),yp(u,!0,c,l,d),a.stop())}),{priority:t.converterPriority||"normal"}),o.on(`removeMarker:${i}`,function(a){return(l,c,d)=>{const u=a(c.markerName,d);if(!u)return;const h=d.mapper.markerNameToElements(c.markerName);if(h){for(const p of h)d.mapper.unbindElementFromMarkerName(p,c.markerName),p.is("containerElement")?(g(`data-${u.group}-start-before`,p),g(`data-${u.group}-start-after`,p),g(`data-${u.group}-end-before`,p),g(`data-${u.group}-end-after`,p)):d.writer.clear(d.writer.createRangeOn(p),p);d.writer.clearClonedElementsGroup(c.markerName),l.stop()}function g(p,f){if(f.hasAttribute(p)){const b=new Set(f.getAttribute(p).split(","));b.delete(u.name),b.size==0?d.writer.removeAttribute(p,f):d.writer.setAttribute(p,Array.from(b).join(","),f)}}}}(r),{priority:t.converterPriority||"normal"})}}(e))}}function vp(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function Kx(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const r=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!r&&!o)return;i.consumable.consume(t.item,e.name);const s=i.writer,a=s.document.selection;if(t.item instanceof Qt||t.item instanceof wi)s.wrap(a.getFirstRange(),o);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&r&&(l=s.unwrap(l,r)),t.attributeNewValue!==null&&o&&s.wrap(l,o)}}}function Yx(n,e=Xx){return(t,i,r)=>{if(!e(i.item,r.consumable,{preflight:!0}))return;const o=n(i.item,r,i);if(!o)return;e(i.item,r.consumable);const s=r.mapper.toViewPosition(i.range.start);r.mapper.bindElements(i.item,o),r.writer.insert(s,o),r.convertAttributes(i.item),Sp(o,i.item.getChildren(),r,{reconversion:i.reconversion})}}function Qx(n){return(e,t,i)=>{t.isOpening=!0;const r=n(t,i);t.isOpening=!1;const o=n(t,i);if(!r||!o)return;const s=t.markerRange;if(s.isCollapsed&&!i.consumable.consume(s,e.name))return;for(const c of s)if(!i.consumable.consume(c.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(s.start),r),i.mapper.bindElementToMarker(r,t.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function yp(n,e,t,i,r){const o=e?n.start:n.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||a){let l,c;e&&s||!e&&!a?(l=s,c=!0):(l=a,c=!1);const d=t.mapper.toViewElement(l);if(d)return void function(u,h,g,p,f,b){const k=`data-${b.group}-${h?"start":"end"}-${g?"before":"after"}`,w=u.hasAttribute(k)?u.getAttribute(k).split(","):[];w.unshift(b.name),p.writer.setAttribute(k,w.join(","),u),p.mapper.bindElementToMarker(u,f.markerName)}(d,e,c,t,i,r)}(function(l,c,d,u,h){const g=`${h.group}-${c?"start":"end"}`,p=h.name?{name:h.name}:null,f=d.writer.createUIElement(g,p);d.writer.insert(l,f),d.mapper.bindElementToMarker(f,u.markerName)})(t.mapper.toViewPosition(o),e,t,i,r)}function xp(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?Ne(n.attributes):[],children:!!n.children}}function Ho(n,e){return typeof n=="function"?n:(t,i)=>function(r,o,s){typeof r=="string"&&(r={name:r});let a;const l=o.writer,c=Object.assign({},r.attributes);if(s=="container")a=l.createContainerElement(r.name,c);else if(s=="attribute"){const d={priority:r.priority||Qn.DEFAULT_PRIORITY};a=l.createAttributeElement(r.name,c,d)}else a=l.createUIElement(r.name,c);if(r.styles){const d=Object.keys(r.styles);for(const u of d)l.setStyle(u,r.styles[u],a)}if(r.classes){const d=r.classes;if(typeof d=="string")l.addClass(d,a);else for(const u of d)l.addClass(u,a)}return a}(n,i,e)}function Cp(n){return n.model.values?(e,t,i)=>{const r=n.view[e];return r?r(e,t,i):null}:n.view}function Ap(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function qc(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Tp(n){const e=function(t){return(i,r)=>{if(!i.is("element",t.name))return!1;if(r.type=="attribute"){if(t.attributes.includes(r.attributeKey))return!0}else if(t.children)return!0;return!1}}(n);return(t,i)=>{const r=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const o of i.changes){const s=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(s&&e(s,o)){if(!i.reconvertedElements.has(s)){i.reconvertedElements.add(s);const a=S._createBefore(s);let l=r.length;for(let c=r.length-1;c>=0;c--){const d=r[c],u=(d.type=="attribute"?d.range.start:d.position).compareWith(a);if(u=="before"||d.type=="remove"&&u=="same")break;l=c}r.splice(l,0,{type:"remove",name:s.name,position:a,length:1},{type:"reinsert",name:s.name,position:a,length:1})}}else r.push(o)}i.changes=r}}function Ep(n){return(e,t,i={})=>{const r=["insert"];for(const o of n.attributes)e.hasAttribute(o)&&r.push(`attribute:${o}`);return!!r.every(o=>t.test(e,o))&&(i.preflight||r.forEach(o=>t.consume(e,o)),!0)}}function Sp(n,e,t,i){for(const r of e)Jx(n.root,r,t,i)||t.convertItem(r)}function Jx(n,e,t,i){const{writer:r,mapper:o}=t;if(!i.reconversion)return!1;const s=o.toViewElement(e);return!(!s||s.root==n)&&!!t.canReuseView(s)&&(r.move(r.createRangeOn(s),o.toViewPosition(S._createBefore(e))),!0)}function Xx(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function Ip(n){const{schema:e,document:t}=n.model;for(const i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function Pp(n,e,t){const i=t.createContext(n);return!!t.checkChild(i,"paragraph")&&!!t.checkChild(i.push("paragraph"),e)}function Mp(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class e5 extends _p{elementToElement(e){return this.add(Vp(e))}elementToAttribute(e){return this.add(function(t){t=Wt(t),Lp(t);const i=Op(t,!1),r=Gc(t.view),o=r?`element:${r}`:"element";return s=>{s.on(o,i,{priority:t.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=Wt(t);let i=null;(typeof t.view=="string"||t.view.key)&&(i=function(o){typeof o.view=="string"&&(o.view={key:o.view});const s=o.view.key,a=o.view.value===void 0?/[\s\S]*/:o.view.value;let l;return s=="class"||s=="style"?l={[s=="class"?"classes":"styles"]:a}:l={attributes:{[s]:a}},o.view.name&&(l.name=o.view.name),o.view=l,s}(t)),Lp(t,i);const r=Op(t,!0);return o=>{o.on("element",r,{priority:t.converterPriority||"low"})}}(e))}elementToMarker(e){return this.add(function(t){const i=function(r){return(o,s)=>{const a=typeof r=="string"?r:r(o,s);return s.writer.createElement("$marker",{"data-name":a})}}(t.model);return Vp({...t,model:i})}(e))}dataToMarker(e){return this.add(function(t){t=Wt(t),t.model||(t.model=s=>s?t.view+":"+s:t.view);const i={view:t.view,model:t.model},r=Zc(Np(i,"start")),o=Zc(Np(i,"end"));return s=>{s.on(`element:${t.view}-start`,r,{priority:t.converterPriority||"normal"}),s.on(`element:${t.view}-end`,o,{priority:t.converterPriority||"normal"});const a=wn.low,l=wn.highest,c=wn.get(t.converterPriority)/l;s.on("element",function(d){return(u,h,g)=>{const p=`data-${d.view}`;function f(b,k){for(const w of k){const _=d.model(w,g),y=g.writer.createElement("$marker",{"data-name":_});g.writer.insert(y,b),h.modelCursor.isEqual(b)?h.modelCursor=h.modelCursor.getShiftedBy(1):h.modelCursor=h.modelCursor._getTransformedByInsertion(b,1),h.modelRange=h.modelRange._getTransformedByInsertion(b,1)[0]}}(g.consumable.test(h.viewItem,{attributes:p+"-end-after"})||g.consumable.test(h.viewItem,{attributes:p+"-start-after"})||g.consumable.test(h.viewItem,{attributes:p+"-end-before"})||g.consumable.test(h.viewItem,{attributes:p+"-start-before"}))&&(h.modelRange||Object.assign(h,g.convertChildren(h.viewItem,h.modelCursor)),g.consumable.consume(h.viewItem,{attributes:p+"-end-after"})&&f(h.modelRange.end,h.viewItem.getAttribute(p+"-end-after").split(",")),g.consumable.consume(h.viewItem,{attributes:p+"-start-after"})&&f(h.modelRange.end,h.viewItem.getAttribute(p+"-start-after").split(",")),g.consumable.consume(h.viewItem,{attributes:p+"-end-before"})&&f(h.modelRange.start,h.viewItem.getAttribute(p+"-end-before").split(",")),g.consumable.consume(h.viewItem,{attributes:p+"-start-before"})&&f(h.modelRange.start,h.viewItem.getAttribute(p+"-start-before").split(",")))}}(i),{priority:a+c})}}(e))}}function Vp(n){const e=Zc(n=Wt(n)),t=Gc(n.view),i=t?`element:${t}`:"element";return r=>{r.on(i,e,{priority:n.converterPriority||"normal"})}}function Gc(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function Zc(n){const e=new Gt(n.view);return(t,i,r)=>{const o=e.match(i.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!r.consumable.test(i.viewItem,s))return;const a=function(l,c,d){return l instanceof Function?l(c,d):d.writer.createElement(l)}(n.model,i.viewItem,r);a&&r.safeInsert(a,i.modelCursor)&&(r.consumable.consume(i.viewItem,s),r.convertChildren(i.viewItem,a),r.updateConversionResult(a,i))}}function Lp(n,e=null){const t=e===null||(o=>o.getAttribute(e)),i=typeof n.model!="object"?n.model:n.model.key,r=typeof n.model!="object"||n.model.value===void 0?t:n.model.value;n.model={key:i,value:r}}function Op(n,e){const t=new Gt(n.view);return(i,r,o)=>{if(!r.modelRange&&e)return;const s=t.match(r.viewItem);if(!s||(function(c,d){const u=typeof c=="function"?c(d):c;return typeof u=="object"&&!Gc(u)?!1:!u.classes&&!u.attributes&&!u.styles}(n.view,r.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(r.viewItem,s.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(r.viewItem,o,r):n.model.value;l!==null&&(r.modelRange||Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor)),function(c,d,u,h){let g=!1;for(const p of Array.from(c.getItems({shallow:u})))h.schema.checkAttribute(p,d.key)&&(g=!0,p.hasAttribute(d.key)||h.writer.setAttribute(d.key,d.value,p));return g}(r.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(r.viewItem,{name:!0})&&(s.match.name=!0),o.consumable.consume(r.viewItem,s.match)))}}function Np(n,e){return{view:`${n.view}-${e}`,model:(t,i)=>{const r=t.getAttribute("name"),o=n.model(r,i);return i.writer.createElement("$marker",{"data-name":o})}}}function t5(n){n.document.registerPostFixer(e=>function(t,i){const r=i.document.selection,o=i.schema,s=[];let a=!1;for(const l of r.getRanges()){const c=Rp(l,o);c&&!c.isEqual(l)?(s.push(c),a=!0):s.push(l)}return a&&t.setSelection(function(l){const c=[...l],d=new Set;let u=1;for(;u<c.length;){const h=c[u],g=c.slice(0,u);for(const[p,f]of g.entries())if(!d.has(p)){if(h.isEqual(f))d.add(p);else if(h.isIntersecting(f)){d.add(p),d.add(u);const b=h.getJoined(f);c.push(b)}}u++}return c.filter((h,g)=>!d.has(g))}(s),{backward:r.isBackward}),!1}(e,n))}function Rp(n,e){return n.isCollapsed?function(t,i){const r=t.start,o=i.getNearestSelectionRange(r);if(!o){const a=r.getAncestors().reverse().find(l=>i.isObject(l));return a?T._createOn(a):null}if(!o.isCollapsed)return o;const s=o.start;return r.isEqual(s)?null:new T(s)}(n,e):function(t,i){const{start:r,end:o}=t,s=i.checkChild(r,"$text"),a=i.checkChild(o,"$text"),l=i.getLimitElement(r),c=i.getLimitElement(o);if(l===c){if(s&&a)return null;if(function(h,g,p){const f=h.nodeAfter&&!p.isLimit(h.nodeAfter)||p.checkChild(h,"$text"),b=g.nodeBefore&&!p.isLimit(g.nodeBefore)||p.checkChild(g,"$text");return f||b}(r,o,i)){const h=r.nodeAfter&&i.isSelectable(r.nodeAfter)?null:i.getNearestSelectionRange(r,"forward"),g=o.nodeBefore&&i.isSelectable(o.nodeBefore)?null:i.getNearestSelectionRange(o,"backward"),p=h?h.start:r,f=g?g.end:o;return new T(p,f)}}const d=l&&!l.is("rootElement"),u=c&&!c.is("rootElement");if(d||u){const h=r.nodeAfter&&o.nodeBefore&&r.nodeAfter.parent===o.nodeBefore.parent,g=d&&(!h||!Dp(r.nodeAfter,i)),p=u&&(!h||!Dp(o.nodeBefore,i));let f=r,b=o;return g&&(f=S._createBefore(zp(l,i))),p&&(b=S._createAfter(zp(c,i))),new T(f,b)}return null}(n,e)}function zp(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function Dp(n,e){return n&&e.isSelectable(n)}class i5 extends xe(){constructor(e,t){super(),m(this,"model"),m(this,"view"),m(this,"mapper"),m(this,"downcastDispatcher"),this.model=e,this.view=new Dx(t),this.mapper=new pp,this.downcastDispatcher=new fp({mapper:this.mapper,schema:e.schema});const i=this.model.document,r=i.selection,o=this.model.markers;var s,a,l;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(c=>{this.downcastDispatcher.convertChanges(i.differ,o,c),this.downcastDispatcher.convertSelection(r,o,c)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(c,d){return(u,h)=>{const g=h.newSelection,p=[];for(const b of g.getRanges())p.push(d.toModelRange(b));const f=c.createSelection(p,{backward:g.isBackward});f.isEqual(c.document.selection)||c.change(b=>{b.setSelection(f)})}}(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",(s=this.mapper,a=this.model.schema,l=this.view,(c,d)=>{if(!l.document.isComposing||W.isAndroid)for(let u=0;u<d.targetRanges.length;u++){const h=d.targetRanges[u],g=s.toModelRange(h),p=Rp(g,a);p&&!p.isEqual(g)&&(d.targetRanges[u]=s.toViewRange(p))}}),{priority:"high"}),this.downcastDispatcher.on("insert:$text",(c,d,u)=>{if(!u.consumable.consume(d.item,c.name))return;const h=u.writer,g=u.mapper.toViewPosition(d.range.start),p=h.createText(d.item.data);h.insert(g,p)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(c,d,u)=>{u.convertAttributes(d.item),d.reconversion||!d.item.is("element")||d.item.isEmpty||u.convertChildren(d.item)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(c,d,u)=>{const h=u.mapper.toViewPosition(d.position),g=d.position.getShiftedBy(d.length),p=u.mapper.toViewPosition(g,{isPhantom:!0}),f=u.writer.createRange(h,p),b=u.writer.remove(f.getTrimmed());for(const k of u.writer.createRangeIn(b).getItems())u.mapper.unbindViewElement(k,{defer:!0})},{priority:"low"}),this.downcastDispatcher.on("cleanSelection",(c,d,u)=>{const h=u.writer,g=h.document.selection;for(const p of g.getRanges())p.isCollapsed&&p.end.parent.isAttached()&&u.writer.mergeAttributes(p.start);h.setSelection(null)}),this.downcastDispatcher.on("selection",(c,d,u)=>{const h=d.selection;if(h.isCollapsed||!u.consumable.consume(h,"selection"))return;const g=[];for(const p of h.getRanges())g.push(u.mapper.toViewRange(p));u.writer.setSelection(g,{backward:h.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(c,d,u)=>{const h=d.selection;if(!h.isCollapsed||!u.consumable.consume(h,"selection"))return;const g=u.writer,p=h.getFirstPosition(),f=u.mapper.toViewPosition(p),b=g.breakAttributes(f);g.setSelection(b)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(c=>{if(c.rootName=="$graveyard")return null;const d=new Gg(this.view.document,c.name);return d.rootName=c.rootName,this.mapper.bindElements(c,d),d})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new v("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}class n5 extends xe(){constructor(){super(),m(this,"_sourceDefinitions",{}),m(this,"_attributeProperties",Object.create(null)),m(this,"_customChildChecks",new Map),m(this,"_customAttributeChecks",new Map),m(this,"_genericCheckSymbol",Symbol("$generic")),m(this,"_compiledDefinitions"),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new zn(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new zn(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new v("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new v("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t=typeof e=="string"?e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!(!t||!t.isBlock)}isLimit(e){const t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject)}isObject(e){const t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}isInline(e){const t=this.getDefinition(e);return!(!t||!t.isInline)}isSelectable(e){const t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject)}isContent(e){const t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(e,t)}checkAttribute(e,t){const i=this.getDefinition(e.last);if(!i)return!1;const r=this._evaluateAttributeChecks(e,t);return r!==void 0?r:i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof S){const i=e.nodeBefore,r=e.nodeAfter;if(!(i instanceof ze))throw new v("schema-check-merge-no-element-before",this);if(!(r instanceof ze))throw new v("schema-check-merge-no-element-after",this);return this.checkMerge(i,r)}if(this.isLimit(e)||this.isLimit(t))return!1;for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,r=this._customChildChecks.get(i)||[];r.push(e),this._customChildChecks.set(i,r)}addAttributeCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,r=this._customAttributeChecks.get(i)||[];r.push(e),this._customAttributeChecks.set(i,r)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof S?t=e.parent:t=(e instanceof T?[e]:Array.from(e.getRanges())).reduce((i,r)=>{const o=r.getCommonAncestor();return i?i.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const i=[...e.getFirstPosition().getAncestors(),new He("",e.getAttributes())];return this.checkAttribute(i,t)}{const i=e.getRanges();for(const r of i)for(const o of r)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=function*(i){for(const r of i)yield*r.getMinimalFlatRanges()}(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new T(e);let i,r;const o=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;t!="both"&&t!="backward"||(i=new Xi({boundaries:T._createIn(o),startPosition:e,direction:"backward"})),t!="both"&&t!="forward"||(r=new Xi({boundaries:T._createIn(o),startPosition:e}));for(const s of function*(a,l){let c=!1;for(;!c;){if(c=!0,a){const d=a.next();d.done||(c=!1,yield{walker:a,value:d.value})}if(l){const d=l.next();d.done||(c=!1,yield{walker:l,value:d.value})}}}(i,r)){const a=s.walker==i?"elementEnd":"elementStart",l=s.value;if(l.type==a&&this.isObject(l.item))return T._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new T(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const r=i.model;for(const[o,s]of Object.entries(t))r.schema.checkAttribute(e,o)&&i.setAttribute(o,s,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))Bp(this,i,t);else{const r=T._createIn(i).getPositions();for(const o of r)Bp(this,o.nodeBefore||o.parent,t)}}getAttributesWithProperty(e,t,i){const r={};for(const[o,s]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(i!==void 0&&i!==a[t]||(r[o]=s))}return r}createContext(e){return new zn(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const o of i)e[o]=r5(t[o],o);const r=Object.values(e);for(const o of r)o5(e,o),s5(e,o),a5(e,o),l5(e,o);for(const o of r)c5(e,o);for(const o of r)d5(e,o);for(const o of r)u5(e,o);for(const o of r)h5(e,o);for(const o of r)m5(e,o);this._compiledDefinitions=function(o){const s={};for(const a of Object.values(o))s[a.name]={name:a.name,isBlock:!!a.isBlock,isContent:!!a.isContent,isInline:!!a.isInline,isLimit:!!a.isLimit,isObject:!!a.isObject,isSelectable:!!a.isSelectable,allowIn:Array.from(a.allowIn).filter(l=>!!o[l]),allowChildren:Array.from(a.allowChildren).filter(l=>!!o[l]),allowAttributes:Array.from(a.allowAttributes)};return s}(e)}_checkContextMatch(e,t){const i=e.last;let r=this._evaluateChildChecks(e,t);if(r=r!==void 0?r:t.allowIn.includes(i.name),!r)return!1;const o=this.getDefinition(i),s=e.trimLast();return!!o&&(s.length==0||this._checkContextMatch(s,o))}_evaluateChildChecks(e,t){const i=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(t.name)||[];for(const o of[...i,...r]){const s=o(e,t);if(s!==void 0)return s}}_evaluateAttributeChecks(e,t){const i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(t)||[];for(const o of[...i,...r]){const s=o(e,t);if(s!==void 0)return s}}*_getValidRangesForRange(e,t){let i=e.start,r=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(T._createIn(o),t)),this.checkAttribute(o,t)||(i.isEqual(r)||(yield new T(i,r)),i=S._createAfter(o)),r=S._createAfter(o);i.isEqual(r)||(yield new T(i,r))}findOptimalInsertionRange(e,t){const i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new T(S._createAt(i,t)):T._createOn(i);const r=Ce(e.getSelectedBlocks());if(!r)return new T(e.focus);if(r.isEmpty)return new T(S._createAt(r,0));const o=S._createAfter(r);return e.focus.isTouching(o)?new T(o):new T(S._createBefore(r))}}class zn{constructor(e){if(m(this,"_items"),e instanceof zn)return e;let t;t=typeof e=="string"?[e]:Array.isArray(e)?e:e.getAncestors({includeSelf:!0}),this._items=t.map(g5)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new zn([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new zn([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function r5(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return function(i,r){for(const o of i){const s=Object.keys(o).filter(a=>a.startsWith("is"));for(const a of s)r[a]=!!o[a]}}(n,t),Ei(n,t,"allowIn"),Ei(n,t,"allowChildren"),Ei(n,t,"disallowIn"),Ei(n,t,"disallowChildren"),Ei(n,t,"allowContentOf"),Ei(n,t,"allowWhere"),Ei(n,t,"allowAttributes"),Ei(n,t,"disallowAttributes"),Ei(n,t,"allowAttributesOf"),Ei(n,t,"inheritTypesFrom"),function(i,r){for(const o of i){const s=o.inheritAllFrom;s&&(r.allowContentOf.add(s),r.allowWhere.add(s),r.allowAttributesOf.add(s),r.inheritTypesFrom.add(s))}}(n,t),t}function o5(n,e){for(const t of e.allowIn){const i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function s5(n,e){for(const t of e.allowChildren){const i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function a5(n,e){for(const t of e.disallowIn){const i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function l5(n,e){for(const t of e.disallowChildren){const i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function c5(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function d5(n,e){for(const t of e.allowContentOf){const i=n[t];i&&(i.disallowChildren.forEach(r=>{e.allowChildren.has(r)||(e.disallowChildren.add(r),n[r].disallowIn.add(e.name))}),i.allowChildren.forEach(r=>{e.disallowChildren.has(r)||(e.allowChildren.add(r),n[r].allowIn.add(e.name))}))}}function u5(n,e){for(const t of e.allowWhere){const i=n[t];i&&(i.disallowIn.forEach(r=>{e.allowIn.has(r)||(e.disallowIn.add(r),n[r].disallowChildren.add(e.name))}),i.allowIn.forEach(r=>{e.disallowIn.has(r)||(e.allowIn.add(r),n[r].allowChildren.add(e.name))}))}}function h5(n,e){for(const t of e.allowAttributesOf){const i=n[t];if(!i)return;i.allowAttributes.forEach(r=>{e.disallowAttributes.has(r)||e.allowAttributes.add(r)})}}function m5(n,e){for(const t of e.inheritTypesFrom){const i=n[t];if(i){const r=Object.keys(i).filter(o=>o.startsWith("is"));for(const o of r)o in e||(e[o]=i[o])}}}function Ei(n,e,t){for(const i of n){let r=i[t];typeof r=="string"&&(r=[r]),Array.isArray(r)&&r.forEach(o=>e[t].add(o))}}function g5(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute:e=>n.getAttribute(e)}}function Bp(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}class p5 extends ye(){constructor(e){super(),m(this,"conversionApi"),m(this,"_splitParts",new Map),m(this,"_cursorParents",new Map),m(this,"_modelCursor",null),m(this,"_emptyElementsToKeep",new Set),this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(s,a){let l;for(const c of new zn(s)){const d={};for(const h of c.getAttributeKeys())d[h]=c.getAttribute(h);const u=a.createElement(c.name,d);l&&a.insert(u,l),l=S._createAt(u,0)}return l}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=bl.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(r){this._removeEmptyElements();const s=this._modelCursor.parent,a=s._removeChildren(0,s.childCount);o._insertChild(0,a),o.markers=function(l,c){const d=new Set,u=new Map,h=T._createIn(l).getItems();for(const g of h)g.is("element","$marker")&&d.add(g);for(const g of d){const p=g.getAttribute("data-name"),f=c.createPositionBefore(g);u.has(p)?u.get(p).end=f.clone():u.set(p,new T(f.clone())),c.remove(g)}return u}(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof T))throw new v("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:S._createAt(t,0);const r=new T(i);for(const o of Array.from(e.getChildren())){const s=this._convertItem(o,i);s.modelRange instanceof T&&(r.end=s.modelRange.end,i=s.modelCursor)}return{modelRange:r,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return!!i&&(this.conversionApi.writer.insert(e,i.position),!0)}_updateConversionResult(e,t){const i=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(i[i.length-1])));const o=this._cursorParents.get(e);t.modelCursor=o?r.createPositionAt(o,0):t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:r}=this.conversionApi;let o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return Pp(t,e,i)?{position:Mp(t,r)}:null;const s=this.conversionApi.writer.split(t,o),a=[];for(const c of s.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const d=a.pop(),u=c.item;this._registerSplitPair(d,u)}const l=s.range.end.parent;return this._cursorParents.set(e,l),{position:s.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const t of this._splitParts.keys())if(t.isEmpty&&!this._emptyElementsToKeep.has(t)){const i=e.get(t.parent)||[];i.push(t),this._splitParts.delete(t),e.set(t.parent,i)}for(const[t,i]of e)t._removeChildrenArray(i);e.size&&this._removeEmptyElements()}}class f5{getHtml(e){const t=R.document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class Fp{constructor(e){m(this,"domParser"),m(this,"domConverter"),m(this,"htmlWriter"),m(this,"skipComments",!0),this.domParser=new DOMParser,this.domConverter=new pa(e,{renderingMode:"data"}),this.htmlWriter=new f5}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)i.appendChild(r[0]);return i}}class b5 extends ye(){constructor(e,t){super(),m(this,"model"),m(this,"mapper"),m(this,"downcastDispatcher"),m(this,"upcastDispatcher"),m(this,"viewDocument"),m(this,"stylesProcessor"),m(this,"htmlProcessor"),m(this,"processor"),m(this,"_viewWriter"),this.model=e,this.mapper=new pp,this.downcastDispatcher=new fp({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;const s=o.writer,a=o.mapper.toViewPosition(r.range.start),l=s.createText(r.item.data);s.insert(a,l)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(i,r,o)=>{o.convertAttributes(r.item),r.reconversion||!r.item.is("element")||r.item.isEmpty||o.convertChildren(r.item)},{priority:"lowest"}),this.upcastDispatcher=new p5({schema:e.schema}),this.viewDocument=new ha(t),this.stylesProcessor=t,this.htmlProcessor=new Fp(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Fc(this.viewDocument),this.upcastDispatcher.on("text",(i,r,{schema:o,consumable:s,writer:a})=>{let l=r.modelCursor;if(!s.test(r.viewItem))return;if(!o.checkChild(l,"$text")){if(!Pp(l,"$text",o)||r.viewItem.data.trim().length==0)return;l=Mp(l,a)}s.consume(r.viewItem);const c=a.createText(r.viewItem.data);a.insert(c,l),r.modelRange=a.createRange(l,l.getShiftedBy(c.offsetSize)),r.modelCursor=r.modelRange.end},{priority:"lowest"}),this.upcastDispatcher.on("element",(i,r,o)=>{if(!r.modelRange&&o.consumable.consume(r.viewItem,{name:!0})){const{modelRange:s,modelCursor:a}=o.convertChildren(r.viewItem,r.modelCursor);r.modelRange=s,r.modelCursor=a}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(i,r,o)=>{if(!r.modelRange&&o.consumable.consume(r.viewItem,{name:!0})){const{modelRange:s,modelCursor:a}=o.convertChildren(r.viewItem,r.modelCursor);r.modelRange=s,r.modelCursor=a}},{priority:"lowest"}),xe().prototype.decorate.call(this,"init"),xe().prototype.decorate.call(this,"set"),xe().prototype.decorate.call(this,"get"),xe().prototype.decorate.call(this,"toView"),xe().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},Ip)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new v("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(t);return r.isAttached()||le("datacontroller-get-detached-root",this),i!=="empty"||this.model.hasContent(r,{ignoreWhitespaces:!0})?this.stringify(r,e):""}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const o=T._createIn(e),s=new Jn(i);this.mapper.bindElements(e,s);const a=e.is("documentFragment")?e.markers:function(l){const c=[],d=l.root.document;if(!d)return new Map;const u=T._createIn(l);for(const h of d.model.markers){const g=h.getRange(),p=g.isCollapsed,f=g.start.isEqual(u.start)||g.end.isEqual(u.end);if(p&&f)c.push([h.name,g]);else{const b=u.getIntersection(g);b&&c.push([h.name,b])}}return c.sort(([h,g],[p,f])=>{if(g.end.compareWith(f.start)!=="after")return 1;if(g.start.compareWith(f.end)!=="before")return-1;switch(g.start.compareWith(f.start)){case"before":return 1;case"after":return-1;default:switch(g.end.compareWith(f.end)){case"before":return 1;case"after":return-1;default:return p.localeCompare(h)}}}),new Map(c)}(e);return this.downcastDispatcher.convert(o,a,r,t),s}init(e){if(this.model.document.version)throw new v("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new v("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const r of Object.keys(t)){const o=this.model.document.getRoot(r);i.insert(this.parse(t[r],o),o,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new v("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(i)){const s=this.model.document.getRoot(o);r.remove(r.createRangeIn(s)),r.insert(this.parse(i[o],s),s,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}class k5{constructor(e,t){m(this,"_helpers",new Map),m(this,"_downcast"),m(this,"_upcast"),this._downcast=Ne(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ne(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new v("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new v("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of Kc(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of Kc(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of Kc(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new v("conversion-group-exists",this);const r=i?new Zx(t):new e5(t);this._helpers.set(e,r)}}function*Kc(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],r=n.upcastAlso?n.upcastAlso[e]:void 0;yield*jp(t,i,r)}else yield*jp(n.model,n.view,n.upcastAlso)}function*jp(n,e,t){if(yield{model:n,view:e},t)for(const i of Ne(t))yield{model:n,view:i}}class Kt{constructor(e){m(this,"baseVersion"),m(this,"isDocumentOperation"),m(this,"batch"),this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function Yc(n,e){const t=Hp(e),i=t.reduce((s,a)=>s+a.offsetSize,0),r=n.parent;qo(n);const o=n.index;return r._insertChild(o,t),Wo(r,o+t.length),Wo(r,o),new T(n,n.getShiftedBy(i))}function $p(n){if(!n.isFlat)throw new v("operation-utils-remove-range-not-flat",this);const e=n.start.parent;qo(n.start),qo(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return Wo(e,n.start.index),t}function Uo(n,e){if(!n.isFlat)throw new v("operation-utils-move-range-not-flat",this);const t=$p(n);return Yc(e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),t)}function Hp(n){const e=[];(function t(i){if(typeof i=="string")e.push(new He(i));else if(i instanceof ki)e.push(new He(i.data,i.getAttributes()));else if(i instanceof er)e.push(i);else if(qt(i))for(const r of i)t(r)})(n);for(let t=1;t<e.length;t++){const i=e[t],r=e[t-1];i instanceof He&&r instanceof He&&Up(i,r)&&(e.splice(t-1,2,new He(r.data+i.data,r.getAttributes())),t--)}return e}function Wo(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&Up(t,i)){const r=new He(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,r)}}function qo(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,r=e.index;t._removeChildren(r,1);const o=new He(e.data.substr(0,i),e.getAttributes()),s=new He(e.data.substr(i),e.getAttributes());t._insertChild(r,[o,s])}}function Up(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const r of t){if(r[1]!==e.getAttribute(r[0]))return!1;i.next()}return i.next().done}class pe extends Kt{constructor(e,t,i,r){super(r),m(this,"sourcePosition"),m(this,"howMany"),m(this,"targetPosition"),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[T._createFromPositionAndShift(this.sourcePosition,this.howMany),T._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new pe(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new pe(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new v("move-operation-nodes-do-not-exist",this);if(e===t&&i<r&&r<i+this.howMany)throw new v("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Et(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new v("move-operation-node-into-itself",this)}}_execute(){Uo(T._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=S.fromJSON(e.sourcePosition,t),r=S.fromJSON(e.targetPosition,t);return new this(i,e.howMany,r,e.baseVersion)}}class ft extends Kt{constructor(e,t,i){super(i),m(this,"position"),m(this,"nodes"),m(this,"shouldReceiveAttributes"),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new $o(Hp(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new $o([...this.nodes].map(i=>i._clone(!0))),t=new ft(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new S(e,[0]);return new pe(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new v("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new $o([...e].map(t=>t._clone(!0))),Yc(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const o of e.nodes)o.name?i.push(ze.fromJSON(o)):i.push(He.fromJSON(o));const r=new ft(S.fromJSON(e.position,t),i,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class Me extends Kt{constructor(e,t,i,r,o){super(o),m(this,"splitPosition"),m(this,"howMany"),m(this,"insertionPosition"),m(this,"graveyardPosition"),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new S(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new T(this.splitPosition,e)}get affectedSelectable(){const e=[T._createFromPositionAndShift(this.splitPosition,0),T._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(T._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Me(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new S(e,[0]);return new et(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new v("split-operation-position-invalid",this);if(!e.parent)throw new v("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new v("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new v("split-operation-graveyard-position-invalid",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Uo(T._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const t=e._clone();Yc(this.insertionPosition,t)}Uo(new T(S._createAt(e,this.splitPosition.offset),S._createAt(e,e.maxOffset)),this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new S(e.root,t,"toPrevious")}static fromJSON(e,t){const i=S.fromJSON(e.splitPosition,t),r=S.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?S.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,r,o,e.baseVersion)}}class et extends Kt{constructor(e,t,i,r,o){super(o),m(this,"sourcePosition"),m(this,"howMany"),m(this,"targetPosition"),m(this,"graveyardPosition"),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new S(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new T(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[T._createOn(e),T._createFromPositionAndShift(this.targetPosition,0),T._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new et(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new S(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Me(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new v("merge-operation-source-position-invalid",this);if(!t.parent)throw new v("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new v("merge-operation-how-many-invalid",this)}_execute(){const e=this.sourcePosition.parent;Uo(T._createIn(e),this.targetPosition),Uo(T._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=S.fromJSON(e.sourcePosition,t),r=S.fromJSON(e.targetPosition,t),o=S.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,r,o,e.baseVersion)}}class Ot extends Kt{constructor(e,t,i,r,o,s){super(s),m(this,"name"),m(this,"oldRange"),m(this,"newRange"),m(this,"affectsData"),m(this,"_markers"),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Ot(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ot(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Ot(e.name,e.oldRange?T.fromJSON(e.oldRange,t):null,e.newRange?T.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class rt extends Kt{constructor(e,t,i,r,o){super(o),m(this,"range"),m(this,"key"),m(this,"oldValue"),m(this,"newValue"),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new rt(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new rt(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new v("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Xs(e.getAttribute(this.key),this.oldValue))throw new v("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new v("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Xs(this.oldValue,this.newValue)||function(e,t,i){qo(e.start),qo(e.end);for(const r of e.getItems({shallow:!0})){const o=r.is("$textProxy")?r.textNode:r;i!==null?o._setAttribute(t,i):o._removeAttribute(t),Wo(o.parent,o.index)}Wo(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new rt(T.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class dt extends Kt{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new dt(this.baseVersion)}getReversed(){return new dt(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ft extends Kt{constructor(e,t,i,r){super(r),m(this,"position"),m(this,"oldName"),m(this,"newName"),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ft(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ft(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(!(e instanceof ze))throw new v("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new v("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Ft(S.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class un extends Kt{constructor(e,t,i,r,o){super(o),m(this,"root"),m(this,"key"),m(this,"oldValue"),m(this,"newValue"),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new un(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new un(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new v("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new v("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new v("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new v("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new un(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Di extends Kt{constructor(e,t,i,r,o){super(o),m(this,"rootName"),m(this,"elementName"),m(this,"isAdd"),m(this,"_document"),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)&&(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Di(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Di(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new Di(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}const ni={};ni[rt.className]=rt,ni[ft.className]=ft,ni[Ot.className]=Ot,ni[pe.className]=pe,ni[dt.className]=dt,ni[Kt.className]=Kt,ni[Ft.className]=Ft,ni[un.className]=un,ni[Di.className]=Di,ni[Me.className]=Me,ni[et.className]=et;class w5{static fromJSON(e,t){return ni[e.__className].fromJSON(e,t)}}const Qc=new Map;function me(n,e,t){let i=Qc.get(n);i||(i=new Map,Qc.set(n,i)),i.set(e,t)}function _5(n){return[n]}function Wp(n,e,t={}){const i=function(r,o){const s=Qc.get(r);return s&&s.has(o)?s.get(o):_5}(n.constructor,e.constructor);try{return i(n=n.clone(),e,t)}catch(r){throw r}}function v5(n,e,t){n=n.slice(),e=e.slice();const i=new y5(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const r=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:r};const o=new WeakMap;for(const l of n)o.set(l,0);const s={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=o.get(l);if(c==e.length){a++;continue}const d=e[c],u=Wp(l,d,i.getContext(l,d,!0)),h=Wp(d,l,i.getContext(d,l,!1));i.updateRelation(l,d),i.setOriginalOperations(u,l),i.setOriginalOperations(h,d);for(const g of u)o.set(g,c+h.length);n.splice(a,1,...u),e.splice(c,1,...h)}return Gp(n),Gp(e),t.padWithNoOps,qp(n,s.nextBaseVersionB),qp(e,s.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:r}}class y5{constructor(e,t,i=!1){m(this,"originalOperations"),m(this,"_history"),m(this,"_useRelations"),m(this,"_forceWeakRemove"),m(this,"_relations"),this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const r of e)this.originalOperations.set(r,i||r)}updateRelation(e,t){if(e instanceof pe)t instanceof et?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof pe&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Me){if(t instanceof et)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof pe)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=T._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const r=i.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:r,offset:o})}}}else if(e instanceof et)t instanceof et?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Me?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof pe&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ot){const i=e.newRange;if(!i)return;if(t instanceof et){const r=i.start.isEqual(t.targetPosition),o=i.start.isEqual(t.deletionPosition),s=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(r||o||s||a)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:s,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),r=this._history.getUndoneOperation(i);if(!r)return null;const o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(r)||null}_setRelation(e,t,i){const r=this.originalOperations.get(e),o=this.originalOperations.get(t);let s=this._relations.get(r);s||(s=new Map,this._relations.set(r,s)),s.set(o,i)}}function qp(n,e){for(const t of n)t.baseVersion=e++}function Gp(n){const e=new Map;for(let t=0;t<n.length;t++){const i=n[t];i instanceof Ot&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(const{op:t,ranges:i}of e.values())i.length?t.newRange=T._createFromRanges(i):t.newRange=null}function Zp(n,e,t){const i=n.nodes.getNode(0).getAttribute(e);if(i==t)return null;const r=new T(n.position,n.position.getShiftedBy(n.howMany));return new rt(r,e,i,t,0)}function Kp(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Rr(n,e){const t=[];for(let i=0;i<n.length;i++){const r=n[i],o=new pe(r.start,r.end.offset-r.start.offset,e,0);t.push(o);for(let s=i+1;s<n.length;s++)n[s]=n[s]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}me(rt,rt,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(o=>new rt(o,n.key,n.oldValue,n.newValue,0)),r=n.range.getIntersection(e.range);return r&&t.aIsStrong&&i.push(new rt(r,e.key,e.newValue,n.newValue,0)),i.length==0?[new dt(0)]:i}return[n]}),me(rt,ft,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const t=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(i=>new rt(i,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const i=Zp(e,n.key,n.oldValue);i&&t.unshift(i)}return t}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]}),me(rt,et,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(T._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(r=>new rt(r,n.key,n.oldValue,n.newValue,n.baseVersion))}),me(rt,pe,(n,e)=>function(t,i){const r=T._createFromPositionAndShift(i.sourcePosition,i.howMany);let o=null,s=[];r.containsRange(t,!0)?o=t:t.start.hasSameParentAs(r.start)?(s=t.getDifference(r),o=t.getIntersection(r)):s=[t];const a=[];for(let l of s){l=l._getTransformedByDeletion(i.sourcePosition,i.howMany);const c=i.getMovedRangeStart(),d=l.start.hasSameParentAs(c),u=l._getTransformedByInsertion(c,i.howMany,d);a.push(...u)}return o&&a.push(o._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany,!1)[0]),a}(n.range,e).map(t=>new rt(t,n.key,n.oldValue,n.newValue,n.baseVersion))),me(rt,Me,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new T(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]}),me(ft,rt,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=Zp(n,e.key,e.newValue);i&&t.push(i)}return t}),me(ft,ft,(n,e,t)=>(n.position.isEqual(e.position)&&t.aIsStrong||(n.position=n.position._getTransformedByInsertOperation(e)),[n])),me(ft,pe,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),me(ft,Me,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n])),me(ft,et,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n])),me(Ot,ft,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n])),me(Ot,Ot,(n,e,t)=>{if(n.name==e.name){if(!t.aIsStrong)return[new dt(0)];n.oldRange=e.newRange?e.newRange.clone():null}return[n]}),me(Ot,et,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n])),me(Ot,pe,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=T._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let r=1;r<i.length;r++){const o=n.clone();o.oldRange=null,o.newRange=i[r],o.baseVersion=-1,t.push(o)}}return t}),me(Ot,Me,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=S._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=S._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=S._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=S._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]}),me(et,ft,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n])),me(et,et,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition)){if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new S(e.graveyardPosition.root,i),n.howMany=0,[n]}return[new dt(0)]}if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",r=e.targetPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&t.aIsStrong){const o=e.targetPosition._getTransformedByMergeOperation(e),s=n.targetPosition._getTransformedByMergeOperation(e);return[new pe(o,n.howMany,s,0)]}return[new dt(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),n.graveyardPosition.isEqual(e.graveyardPosition)&&t.aIsStrong||(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),me(et,pe,(n,e,t)=>{const i=T._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new dt(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])}),me(et,Me,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}),me(pe,ft,(n,e)=>{const t=T._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=t.start,n.howMany=t.end.offset-t.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]}),me(pe,pe,(n,e,t)=>{const i=T._createFromPositionAndShift(n.sourcePosition,n.howMany),r=T._createFromPositionAndShift(e.sourcePosition,e.howMany);let o,s=t.aIsStrong,a=!t.aIsStrong;if(t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?a=!0:t.abRelation!="insertAfter"&&t.baRelation!="insertBefore"||(a=!1),o=n.targetPosition.isEqual(e.targetPosition)&&a?n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Kp(n,e)&&Kp(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(r,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Rr([i],o);if(r.containsPosition(n.targetPosition)&&r.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Rr([i],o);const l=Et(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(l=="prefix"||l=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Rr([i],o);n.type!="remove"||e.type=="remove"||t.aWasUndone||t.forceWeakRemove?n.type=="remove"||e.type!="remove"||t.bWasUndone||t.forceWeakRemove||(s=!1):s=!0;const c=[],d=i.getDifference(r);for(const h of d){h.start=h.start._getTransformedByDeletion(e.sourcePosition,e.howMany),h.end=h.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=Et(h.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",p=h._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);c.push(...p)}const u=i.getIntersection(r);return u!==null&&s&&(u.start=u.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),u.end=u.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),c.length===0?c.push(u):c.length==1?r.start.isBefore(i.start)||r.start.isEqual(i.start)?c.unshift(u):c.push(u):c.splice(1,0,u)),c.length===0?[new dt(n.baseVersion)]:Rr(c,o)}),me(pe,Me,(n,e,t)=>{let i=n.targetPosition.clone();n.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&t.abRelation!="moveTargetAfter"||(i=n.targetPosition._getTransformedBySplitOperation(e));const r=T._createFromPositionAndShift(n.sourcePosition,n.howMany);if(r.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(r.start.hasSameParentAs(e.splitPosition)&&r.containsPosition(e.splitPosition)){let s=new T(e.splitPosition,r.end);return s=s._getTransformedBySplitOperation(e),Rr([new T(r.start,e.splitPosition),s],i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const o=[r._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const s=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);n.howMany>1&&s&&!t.aWasUndone&&o.push(T._createFromPositionAndShift(e.insertionPosition,1))}return Rr(o,i)}),me(pe,et,(n,e,t)=>{const i=T._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type!="remove"||t.forceWeakRemove){if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new dt(0)]}else if(!t.aWasUndone){const o=[];let s=e.graveyardPosition.clone(),a=e.targetPosition._getTransformedByMergeOperation(e);const l=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(o.push(new pe(n.sourcePosition,n.howMany-1,l,0)),s=s._getTransformedByMove(n.sourcePosition,l,n.howMany-1),a=a._getTransformedByMove(n.sourcePosition,l,n.howMany-1));const c=e.deletionPosition._getCombined(n.sourcePosition,l),d=new pe(s,1,c,0),u=d.getMovedRangeStart().path.slice();u.push(0);const h=new S(d.targetPosition.root,u);a=a._getTransformedByMove(s,c,1);const g=new pe(a,e.howMany,h,0);return o.push(d),o.push(g),o}}const r=T._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]}),me(Ft,ft,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n])),me(Ft,et,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n])),me(Ft,pe,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),me(Ft,Ft,(n,e,t)=>{if(n.position.isEqual(e.position)){if(!t.aIsStrong)return[new dt(0)];n.oldName=e.newName}return[n]}),me(Ft,Me,(n,e)=>{if(Et(n.position.path,e.splitPosition.getParentPath())=="same"&&!e.graveyardPosition){const t=new Ft(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,t]}return n.position=n.position._getTransformedBySplitOperation(e),[n]}),me(un,un,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new dt(0)];n.oldValue=e.newValue}return[n]}),me(Di,Di,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new dt(0)]:[n]),me(Me,ft,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n])),me(Me,et,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const r=new S(e.graveyardPosition.root,i),o=Me.getInsertionPosition(new S(e.graveyardPosition.root,i)),s=new Me(r,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Me.getInsertionPosition(n.splitPosition),n.graveyardPosition=s.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[s,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Me.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),me(Me,pe,(n,e,t)=>{const i=T._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const o=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){const s=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new S(a.root,l);return[new pe(s,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const r=n.splitPosition.isEqual(e.targetPosition);if(r&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=Me.getInsertionPosition(n.splitPosition),[n];if(r&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:s}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(s),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=Me.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=Me.getInsertionPosition(n.splitPosition),[n]}),me(Me,Me,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new dt(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new dt(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",r=e.splitPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&t.aIsStrong){const o=[];return e.howMany&&o.push(new pe(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&o.push(new pe(n.splitPosition,n.howMany,n.moveTargetPosition,0)),o}return[new dt(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const r=new S(e.insertionPosition.root,i);return[n,new pe(n.insertionPosition,1,r,0)]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=Me.getInsertionPosition(n.splitPosition),[n]});class Qe extends ye(S){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new v("model-liveposition-root-not-rootelement",e);x5.call(this)}detach(){this.stopListening()}toPosition(){return new S(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function x5(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&C5.call(this,t)},{priority:"low"})}function C5(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}Qe.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};class zr{constructor(e={}){m(this,"operations"),m(this,"isUndoable"),m(this,"isLocal"),m(this,"isUndo"),m(this,"isTyping"),typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},le("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:r=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=r,this.isTyping=o}get type(){return le("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.isDocumentOperation&&(e.batch=this,this.operations.push(e)),e}}const Yp=class Ku{constructor(e){m(this,"_markerCollection"),m(this,"_changesInElement",new Map),m(this,"_elementsSnapshots",new Map),m(this,"_elementChildrenSnapshots",new Map),m(this,"_elementState",new Map),m(this,"_changedMarkers",new Map),m(this,"_changedRoots",new Map),m(this,"_changeCount",0),m(this,"_cachedChanges",null),m(this,"_cachedChangesWithGraveyard",null),m(this,"_refreshedItems",new Set),this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),r=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),r||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const o=T._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const s of o.getItems({shallow:!0}))this._setElementState(s,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=T._createFromPositionAndShift(t.position,1);for(const r of this._markerCollection.getMarkersIntersectingRange(i)){const o=r.getData();this.bufferMarkerChange(r.name,o,o)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);const r=T._createFromPositionAndShift(t.splitPosition,t.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const r=t.graveyardPosition.parent;this._markInsert(r,t.graveyardPosition.offset,1),this._setElementState(i,"move");const o=t.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,t.targetPosition.offset,i.maxOffset);const s=T._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of s.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let r=this._changedMarkers.get(e);r?r.newMarkerData=i:(r={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,r)),r.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,r=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(i||r||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const r=this._changesInElement.get(i).sort((d,u)=>d.offset===u.offset?d.type!=u.type?d.type=="remove"?-1:1:0:d.offset<u.offset?-1:1),o=this._elementChildrenSnapshots.get(i),s=Jp(i.getChildren()),a=T5(o.length,r);let l=0,c=0;for(const d of a)if(d==="i"){const u=this._getDiffActionForNode(s[l].node,"insert"),h=this._elementsSnapshots.get(s[l].node),g=this._getInsertDiff(i,l,u,s[l],h);t.push(g),l++}else if(d==="r"){const u=this._getDiffActionForNode(o[c].node,"remove"),h=this._getRemoveDiff(i,l,u,o[c]);t.push(h),c++}else if(d==="a"){const u=o[c].attributes,h=s[l].attributes;let g;if(s[l].name=="$text")g=new T(S._createAt(i,l),S._createAt(i,l+1));else{const f=i.offsetToIndex(l);g=new T(S._createAt(i,l),S._createAt(i.getChild(f),0))}const p=this._getAttributesDiff(g,u,h);t.push(...p),l++,c++}else l++,c++}t.sort((i,r)=>i.position.root!=r.position.root?i.position.root.rootName<r.position.root.rootName?-1:1:i.position.isEqual(r.position)?i.changeCount-r.changeCount:i.position.isBefore(r.position)?-1:1);for(let i=1,r=0;i<t.length;i++){const o=t[r],s=t[i],a=o.type=="remove"&&s.type=="remove"&&o.name=="$text"&&s.name=="$text"&&o.position.isEqual(s.position),l=o.type=="insert"&&s.type=="insert"&&o.name=="$text"&&s.name=="$text"&&o.position.parent==s.position.parent&&o.position.offset+o.length==s.position.offset,c=o.type=="attribute"&&s.type=="attribute"&&o.position.parent==s.position.parent&&o.range.isFlat&&s.range.isFlat&&o.position.offset+o.length==s.position.offset&&o.attributeKey==s.attributeKey&&o.attributeOldValue==s.attributeOldValue&&o.attributeNewValue==s.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[i]=null):r=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(E5),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=T._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const r=i.getData();this.bufferMarkerChange(i.name,r,r)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const i=t.getData();this.bufferMarkerChange(t.name,{...i,range:null},i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e))return void this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});const i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,r){const o=this._changedRoots.get(e)||{name:e},s=o.attributes||{};if(s[t]){const a=s[t];r===a.oldValue?delete s[t]:a.newValue=r}else s[t]={oldValue:i,newValue:r};Object.entries(s).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=s,this._changedRoots.set(e,o))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const r={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const r={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let r=0;r<i.length;r++)i[r].howMany<1&&(i.splice(r,1),r--)}_setElementState(e,t){if(!e.is("element"))return;const i=Ku._statesPriority.indexOf(this._elementState.get(e));Ku._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const i=this._elementState.get(e);return i&&i!="move"?i:t}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=Jp(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const r=e.offset+e.howMany,o=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){const s=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:r,howMany:s-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(r<=i.offset)i.offset-=e.howMany;else if(r<=o)if(e.offset<i.offset){const s=r-i.offset;i.offset=e.offset,i.howMany-=s,e.nodesToHandle-=s}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){const s=o-e.offset;i.howMany-=s,e.nodesToHandle-=s}}if(i.type=="remove"&&(r<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(r<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const s=r-i.offset;i.offset=e.offset,i.howMany-=s}else if(e.offset<o)if(r<=o){const s=i.howMany;i.howMany=e.offset-i.offset;const a=s-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=o-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&r>i.offset){if(r>o){const s={type:"attribute",offset:o,howMany:r-o,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(r>o?(e.nodesToHandle=r-o,e.offset=o):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&r>i.offset){const s={type:"attribute",offset:i.offset,howMany:r-i.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&r<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&r>=o&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,r,o){const s={type:"insert",position:S._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&o&&(s.before={name:o.name,attributes:new Map(o.attributes)}),s}_getRemoveDiff(e,t,i,r){return{type:"remove",action:i,position:S._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const r=[];i=new Map(i);for(const[o,s]of t){const a=i.has(o)?i.get(o):null;a!==s&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:s,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(o)}for(const[o,s]of i)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return r}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),r=e.startOffset;if(i){for(const o of i)if(o.type=="insert"&&r>=o.offset&&r<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const r=new T(S._createAt(e,t),S._createAt(e,t+i));for(const o of r.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}};m(Yp,"_statesPriority",[void 0,"refresh","rename","move"]);let A5=Yp;function Qp(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function Jp(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(Qp(t));else e.push(Qp(t));return e}function T5(n,e){const t=[];let i=0,r=0;for(const o of e){if(o.offset>i){for(let s=0;s<o.offset-i;s++)t.push("e");r+=o.offset-i}if(o.type=="insert"){for(let s=0;s<o.howMany;s++)t.push("i");i=o.offset+o.howMany}else if(o.type=="remove"){for(let s=0;s<o.howMany;s++)t.push("r");i=o.offset,r+=o.howMany}else{if(o.howMany>1500)for(let s=0;s<o.howMany;s++)t.push("a");else t.push(..."a".repeat(o.howMany).split(""));i=o.offset+o.howMany,r+=o.howMany}}if(r<n)for(let o=0;o<n-r-i;o++)t.push("e");return t}function E5(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class S5{constructor(){m(this,"_operations",[]),m(this,"_undoPairs",new Map),m(this,"_undoneOperations",new Set),m(this,"_baseVersionToOperationIndex",new Map),m(this,"_version",0),m(this,"_gaps",new Map)}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new v("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let r=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),r>a&&r<l&&(r=a-1);if(r<i.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let s=this._baseVersionToOperationIndex.get(r);return s===void 0&&(s=this._operations.length-1),this._operations.slice(o,s+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class wa extends ze{constructor(e,t,i="main"){super(t),m(this,"rootName"),m(this,"_document"),m(this,"_isAttached",!0),m(this,"_isLoaded",!0),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}wa.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const Xp="$graveyard";class I5 extends ye(){constructor(e){super(),m(this,"model"),m(this,"history"),m(this,"selection"),m(this,"roots"),m(this,"differ"),m(this,"isReadOnly"),m(this,"_postFixers"),m(this,"_hasSelectionChangedFromTheLastChangeBlock"),this.model=e,this.history=new S5,this.selection=new wi(this),this.roots=new ot({idProperty:"rootName"}),this.differ=new A5(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Xp),this.listenTo(e,"applyOperation",(t,i)=>{const r=i[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const r=i[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,r,o,s)=>{const a={...i.getData(),range:o};this.differ.bufferMarkerChange(i.name,s,a),r===null&&i.on("change",(l,c)=>{const d=i.getData();this.differ.bufferMarkerChange(i.name,{...d,range:c},d)})}),this.registerPostFixer(t=>{let i=!1;for(const r of this.roots)r.isAttached()||r.isEmpty||(t.remove(t.createRangeIn(r)),i=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(t.removeMarker(r),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(Xp)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new v("model-document-createroot-name-exists",this,{name:t});const i=new wa(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=oc(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,r=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&ef(e.start)&&ef(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function ef(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!xc(t,i)&&!Cc(t,i)}return!0}class P5 extends ye(){constructor(){super(...arguments),m(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof Dr?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,r=!1){const o=e instanceof Dr?e.name:e;if(o.includes(","))throw new v("markercollection-incorrect-marker-name",this);const s=this._markers.get(o);if(s){const c=s.getData(),d=s.getRange();let u=!1;return d.isEqual(t)||(s._attachLiveRange(Lt.fromRange(t)),u=!0),i!=s.managedUsingOperations&&(s._managedUsingOperations=i,u=!0),typeof r=="boolean"&&r!=s.affectsData&&(s._affectsData=r,u=!0),u&&this.fire(`update:${o}`,s,d,t,c),s}const a=Lt.fromRange(t),l=new Dr(o,a,i,r);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,{...l.getData(),range:null}),l}_remove(e){const t=e instanceof Dr?e.name:e,i=this._markers.get(t);return!!i&&(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0)}_refresh(e){const t=e instanceof Dr?e.name:e,i=this._markers.get(t);if(!i)throw new v("markercollection-refresh-marker-not-exists",this);const r=i.getRange();this.fire(`update:${t}`,i,r,r,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Dr extends ye(Cn){constructor(e,t,i,r){super(),m(this,"name"),m(this,"_managedUsingOperations"),m(this,"_affectsData"),m(this,"_liveRange"),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new v("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Dr.prototype.is=function(n){return n==="marker"||n==="model:marker"};class M5 extends Kt{constructor(e,t){super(null),m(this,"sourcePosition"),m(this,"howMany"),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new v("detach-operation-on-document-node",this)}_execute(){$p(T._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class zi extends Cn{constructor(e){super(),m(this,"markers",new Map),m(this,"_children",new $o),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(ze.fromJSON(i)):t.push(He.fromJSON(i));return new zi(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=function(r){return typeof r=="string"?[new He(r)]:(qt(r)||(r=[r]),Array.from(r).map(o=>typeof o=="string"?new He(o):o instanceof ki?new He(o.data,o.getAttributes()):o))}(t);for(const r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const r of i)r.parent=null;return i}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const t of e)t.parent=null}}zi.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};class V5{constructor(e,t){m(this,"model"),m(this,"batch"),this.model=e,this.batch=t}createText(e,t){return new He(e,t)}createElement(e,t){return new ze(e,t)}createDocumentFragment(){return new zi}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof He&&e.data=="")return;const r=S._createAt(t,i);if(e.parent){if(rf(e.root,r.root))return void this.move(T._createOn(e),r);if(e.root.document)throw new v("model-writer-insert-forbidden-move",this);this.remove(e)}const o=r.root.document?r.root.document.version:null,s=e instanceof zi?e._removeChildren(0,e.childCount):e,a=new ft(r,s,o);if(e instanceof He&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),e instanceof zi)for(const[l,c]of e.markers){const d=S._createAt(c.root,0),u={range:new T(c.start._getCombined(d,r),c.end._getCombined(d,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(l)?this.updateMarker(l,u):this.addMarker(l,u)}}insertText(e,t,i,r){t instanceof zi||t instanceof ze||t instanceof S?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,r)}insertElement(e,t,i,r){t instanceof zi||t instanceof ze||t instanceof S?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof zi||t instanceof ze?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof zi||t instanceof ze?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof T){const r=i.getMinimalFlatRanges();for(const o of r)tf(this,e,t,o)}else nf(this,e,t,i)}setAttributes(e,t){for(const[i,r]of fi(e))this.setAttribute(i,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof T){const i=t.getMinimalFlatRanges();for(const r of i)tf(this,e,null,r)}else nf(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const r of i.getAttributeKeys())this.removeAttribute(r,i)};if(e instanceof T)for(const i of e.getItems())t(i);else t(e)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof T))throw new v("writer-move-invalid-range",this);if(!e.isFlat)throw new v("writer-move-range-not-flat",this);const r=S._createAt(t,i);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!rf(e.root,r.root))throw new v("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,s=new pe(e.start,e.end.offset-e.start.offset,r,o);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();const t=(e instanceof T?e:T._createOn(e)).getMinimalFlatRanges().reverse();for(const i of t)this._addOperationForAffectedMarkers("move",i),L5(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof ze))throw new v("writer-merge-no-element-before",this);if(!(i instanceof ze))throw new v("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(T._createIn(i),S._createAt(t,"end")),this.remove(i)}_merge(e){const t=S._createAt(e.nodeBefore,"end"),i=S._createAt(e.nodeAfter,0),r=e.root.document.graveyard,o=new S(r,[0]),s=e.root.document.version,a=new et(i,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof ze))throw new v("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,r=new Ft(S._createBefore(e),e.name,t,i);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let i,r,o=e.parent;if(!o.parent)throw new v("writer-split-element-no-parent",this);if(t||(t=o.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new v("writer-split-invalid-limit-element",this);do{const s=o.root.document?o.root.document.version:null,a=o.maxOffset-e.offset,l=Me.getInsertionPosition(e),c=new Me(e,a,l,null,s);this.batch.addOperation(c),this.model.applyOperation(c),i||r||(i=o,r=e.parent.nextSibling),o=(e=this.createPositionAfter(e.parent)).parent}while(o!==t);return{position:e,range:new T(S._createAt(i,"end"),S._createAt(r,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new v("writer-wrap-range-not-flat",this);const i=t instanceof ze?t:new ze(t);if(i.childCount>0)throw new v("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new v("writer-wrap-element-attached",this);this.insert(i,e.start);const r=new T(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,S._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new v("writer-unwrap-element-no-parent",this);this.move(T._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new v("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,r=t.range,o=t.affectsData!==void 0&&t.affectsData;if(this.model.markers.has(e))throw new v("writer-addmarker-marker-exists",this);if(!r)throw new v("writer-addmarker-no-range",this);return i?(Go(this,e,null,r,o),this.model.markers.get(e)):this.model.markers._set(e,r,i,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,r=this.model.markers.get(i);if(!r)throw new v("writer-updatemarker-marker-not-exists",this);if(!t)return le("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),void this.model.markers._refresh(r);const o=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",a=s?t.affectsData:r.affectsData;if(!o&&!t.range&&!s)throw new v("writer-updatemarker-wrong-options",this);const l=r.getRange(),c=t.range?t.range:l;o&&t.usingOperation!==r.managedUsingOperations?t.usingOperation?Go(this,i,null,c,a):(Go(this,i,l,null,a),this.model.markers._set(i,c,void 0,a)):r.managedUsingOperations?Go(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new v("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations)return void this.model.markers._remove(t);Go(this,t,i.getRange(),null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new v("writer-addroot-root-exists",this);const r=this.model.document,o=new Di(e,t,!0,r,r.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new v("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const i=this.model.document,r=new Di(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(r),this.model.applyOperation(r)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,r]of fi(e))this._setSelectionAttribute(i,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const r=wi._getStoreAttributeKey(e);this.setAttribute(r,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=wi._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new v("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const r=i.getRange();let o=!1;if(e==="move"){const s=t;o=s.containsPosition(r.start)||s.start.isEqual(r.start)||s.containsPosition(r.end)||s.end.isEqual(r.end)}else{const s=t,a=s.nodeBefore,l=s.nodeAfter,c=r.start.parent==a&&r.start.isAtEnd,d=r.end.parent==l&&r.end.offset==0,u=r.end.nodeAfter==l,h=r.start.nodeAfter==l;o=c||d||u||h}o&&this.updateMarker(i.name,{range:r})}}}function tf(n,e,t,i){const r=n.model,o=r.document;let s,a,l,c=i.start;for(const u of i.getWalker({shallow:!0}))l=u.item.getAttribute(e),s&&a!=l&&(a!=t&&d(),c=s),s=u.nextPosition,a=l;function d(){const u=new T(c,s),h=u.root.document?o.version:null,g=new rt(u,e,a,t,h);n.batch.addOperation(g),r.applyOperation(g)}s instanceof S&&s!=c&&a!=t&&d()}function nf(n,e,t,i){const r=n.model,o=r.document,s=i.getAttribute(e);let a,l;if(s!=t){if(i.root===i){const c=i.document?o.version:null;l=new un(i,e,s,t,c)}else{a=new T(S._createBefore(i),n.createPositionAfter(i));const c=a.root.document?o.version:null;l=new rt(a,e,s,t,c)}n.batch.addOperation(l),r.applyOperation(l)}}function Go(n,e,t,i,r){const o=n.model,s=o.document,a=new Ot(e,t,i,o.markers,!!r,s.version);n.batch.addOperation(a),o.applyOperation(a)}function L5(n,e,t,i){let r;if(n.root.document){const o=i.document,s=new S(o.graveyard,[0]);r=new pe(n,e,s,o.version)}else r=new M5(n,e);t.addOperation(r),i.applyOperation(r)}function rf(n,e){return n===e||n instanceof wa&&e instanceof wa}function O5(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const r=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&function(c,d){const u=c.getLimitElement(d);if(!d.containsEntireContent(u))return!1;const h=d.getFirstRange();return h.start.parent==h.end.parent?!1:c.checkChild(u,"paragraph")}(r,e))return void function(c,d){const u=c.model.schema.getLimitElement(d);c.remove(c.createRangeIn(u)),af(c,c.createPositionAt(u,0),d)}(o,e);const s={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(s,r.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=function(c){const d=c.root.document.model,u=c.start;let h=c.end;if(d.hasContent(c,{ignoreMarkers:!0})){const g=function(p){const f=p.parent,b=f.root.document.model.schema,k=f.getAncestors({parentFirst:!0,includeSelf:!0});for(const w of k){if(b.isLimit(w))return null;if(b.isBlock(w))return w}}(h);if(g&&h.isTouching(d.createPositionAt(g,0))){const p=d.createSelection(c);d.modifySelection(p,{direction:"backward"});const f=p.getLastPosition(),b=d.createRange(f,h);d.hasContent(b,{ignoreMarkers:!0})||(h=f)}}return[Qe.fromPosition(u,"toPrevious"),Qe.fromPosition(h,"toNext")]}(i);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(function(c,d,u){const h=c.model;if(!Jc(c.model.schema,d,u))return;const[g,p]=function(f,b){const k=f.getAncestors(),w=b.getAncestors();let _=0;for(;k[_]&&k[_]==w[_];)_++;return[k[_],w[_]]}(d,u);!g||!p||(!h.hasContent(g,{ignoreMarkers:!0})&&h.hasContent(p,{ignoreMarkers:!0})?sf(c,d,u,g.parent):of(c,d,u,g.parent))}(o,a,l),r.removeDisallowedAttributes(a.parent.getChildren(),o)),lf(o,e,a),!t.doNotAutoparagraph&&function(c,d){const u=c.checkChild(d,"$text"),h=c.checkChild(d,"paragraph");return!u&&h}(r,a)&&af(o,a,e,s),a.detach(),l.detach()})}function of(n,e,t,i){const r=e.parent,o=t.parent;if(r!=i&&o!=i){for(e=n.createPositionAfter(r),(t=n.createPositionBefore(o)).isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){const s=t.parent;t=n.createPositionBefore(s),n.remove(s)}Jc(n.model.schema,e,t)&&of(n,e,t,i)}}function sf(n,e,t,i){const r=e.parent,o=t.parent;if(r!=i&&o!=i){for(e=n.createPositionAfter(r),(t=n.createPositionBefore(o)).isEqual(e)||n.insert(r,t);e.parent.isEmpty;){const s=e.parent;e=n.createPositionBefore(s),n.remove(s)}t=n.createPositionBefore(o),function(s,a){const l=a.nodeBefore,c=a.nodeAfter;l.name!=c.name&&s.rename(l,c.name),s.clearAttributes(l),s.setAttributes(Object.fromEntries(c.getAttributes()),l),s.merge(a)}(n,t),Jc(n.model.schema,e,t)&&sf(n,e,t,i)}}function Jc(n,e,t){const i=e.parent,r=t.parent;return i!=r&&!n.isLimit(i)&&!n.isLimit(r)&&function(o,s,a){const l=new T(o,s);for(const c of l.getWalker())if(a.isLimit(c.item))return!1;return!0}(e,t,n)}function af(n,e,t,i={}){const r=n.createElement("paragraph");n.model.schema.setAllowedAttributes(r,i,n),n.insert(r,e),lf(n,t,n.createPositionAt(r,0))}function lf(n,e,t){e instanceof wi?n.setSelection(t):e.setTo(t)}function cf(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let r=i;for(;r.parent&&r.isEmpty;){const o=e.createRangeOn(r);r=r.parent,e.remove(o)}})}class N5{constructor(e,t,i){m(this,"model"),m(this,"writer"),m(this,"position"),m(this,"canMergeWith"),m(this,"schema"),m(this,"_documentFragment"),m(this,"_documentFragmentPosition"),m(this,"_firstNode",null),m(this,"_lastNode",null),m(this,"_lastAutoParagraph",null),m(this,"_filterAttributesOf",[]),m(this,"_affectedStart",null),m(this,"_affectedEnd",null),m(this,"_nodeToSelect",null),this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new v("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?T._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new T(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){this._checkAndSplitToAllowedPosition(e)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this.schema.isObject(e)||this._handleDisallowedNode(e)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Qe.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new v("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Qe.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Qe.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof ze)||!this._canMergeLeft(e))return;const t=Qe._createBefore(e);t.stickiness="toNext";const i=Qe.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Qe._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Qe._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof ze)||!this._canMergeRight(e))return;const t=Qe._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new v("insertcontent-invalid-insertion-position",this);this.position=S._createAt(t.nodeBefore,"end");const i=Qe.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Qe._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Qe._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof ze&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof ze&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function R5(n,e,t,i={}){if(!n.schema.isObject(e))throw new v("insertobject-element-not-an-object",n,{object:e});const r=t||n.document.selection;let o=r;i.findOptimalPosition&&n.schema.isBlock(e)&&(o=n.createSelection(n.schema.findOptimalInsertionRange(r,i.findOptimalPosition)));const s=Ce(r.getSelectedBlocks()),a={};return s&&Object.assign(a,n.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),n.change(l=>{o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let c=e;const d=o.anchor.parent;!n.schema.checkChild(d,e)&&n.schema.checkChild(d,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const u=n.insertContent(c,o);return u.isCollapsed||i.setSelection&&function(h,g,p,f){const b=h.model;if(p=="on")return void h.setSelection(g,"on");if(p!="after")throw new v("insertobject-invalid-place-parameter-value",b);let k=g.nextSibling;if(b.schema.isInline(g))return void h.setSelection(g,"after");!(k&&b.schema.checkChild(k,"$text"))&&b.schema.checkChild(g.parent,"paragraph")&&(k=h.createElement("paragraph"),b.schema.setAllowedAttributes(k,f,h),b.insertContent(k,h.createPositionAfter(g))),k&&h.setSelection(k,0)}(l,e,i.setSelection,a),u})}function z5(n,e){const{isForward:t,walker:i,unit:r,schema:o,treatEmojiAsSingleUnit:s}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?function(d,u){let h=d.position.textNode;for(h||(h=u?d.position.nodeAfter:d.position.nodeBefore);h&&h.is("$text");){const g=d.position.offset-h.startOffset;if(F5(h,g,u))h=u?d.position.nodeAfter:d.position.nodeBefore;else{if(B5(h.data,g,u))break;d.next()}}return d.position}(i,t):function(d,u,h){const g=d.position.textNode;if(g){const p=g.data;let f=d.position.offset-g.startOffset;for(;xc(p,f)||u=="character"&&Cc(p,f)||h&&Rg(p,f);)d.next(),f=d.position.offset-g.startOffset}return d.position}(i,r,s);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return S._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l))return void i.skip(()=>!0);if(o.checkChild(c,"$text"))return c}}function D5(n,e){const t=n.root,i=S._createAt(t,e?"end":0);return e?new T(n,i):new T(i,n)}function B5(n,e,t){const i=e+(t?0:-1);return' ,.?!:;"-()'.includes(n.charAt(i))}function F5(n,e,t){return e===(t?n.offsetSize:0)}let j5=class extends xe(){constructor(){super(),m(this,"markers"),m(this,"document"),m(this,"schema"),m(this,"_pendingChanges"),m(this,"_currentWriter"),this.markers=new P5,this.document=new I5(this),this.schema=new n5,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(n=>this.decorate(n)),this.on("applyOperation",(n,e)=>{e[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),t5(this),this.document.registerPostFixer(Ip),this.on("insertContent",(n,[e,t])=>{n.return=function(i,r,o){return i.change(s=>{const a=o||i.document.selection;a.isCollapsed||i.deleteContent(a,{doNotAutoparagraph:!0});const l=new N5(i,s,a.anchor),c=[];let d;if(r.is("documentFragment")){if(r.markers.size){const g=[];for(const[p,f]of r.markers){const{start:b,end:k}=f,w=b.isEqual(k);g.push({position:b,name:p,isCollapsed:w},{position:k,name:p,isCollapsed:w})}g.sort(({position:p},{position:f})=>p.isBefore(f)?1:-1);for(const{position:p,name:f,isCollapsed:b}of g){let k=null,w=null;const _=p.parent===r&&p.isAtStart,y=p.parent===r&&p.isAtEnd;_||y?b&&(w=_?"start":"end"):(k=s.createElement("$marker"),s.insert(k,p)),c.push({name:f,element:k,collapsed:w})}}d=r.getChildren()}else d=[r];l.handleNodes(d);let u=l.getSelectionRange();if(r.is("documentFragment")&&c.length){const g=u?Lt.fromRange(u):null,p={};for(let f=c.length-1;f>=0;f--){const{name:b,element:k,collapsed:w}=c[f],_=!p[b];if(_&&(p[b]=[]),k){const y=s.createPositionAt(k,"before");p[b].push(y),s.remove(k)}else{const y=l.getAffectedRange();if(!y){w&&p[b].push(l.position);continue}w?p[b].push(y[w]):p[b].push(_?y.start:y.end)}}for(const[f,[b,k]]of Object.entries(p))b&&k&&b.root===k.root&&b.root.document&&!s.model.markers.has(f)&&s.addMarker(f,{usingOperation:!0,affectsData:!0,range:new T(b,k)});g&&(u=g.toRange(),g.detach())}u&&(a instanceof wi?s.setSelection(u):a.setTo(u));const h=l.getAffectedRange()||i.createRange(a.anchor);return l.destroy(),h})}(this,e,t)}),this.on("insertObject",(n,[e,t,i])=>{n.return=R5(this,e,t,i)}),this.on("canEditAt",n=>{const e=!this.document.isReadOnly;n.return=e,e||n.stop()})}change(n){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new zr,callback:n}),this._runPendingChanges()[0]):n(this._currentWriter)}catch(e){v.rethrowUnexpectedError(e,this)}}enqueueChange(n,e){try{n?typeof n=="function"?(e=n,n=new zr):n instanceof zr||(n=new zr(n)):n=new zr,this._pendingChanges.push({batch:n,callback:e}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(t){v.rethrowUnexpectedError(t,this)}}applyOperation(n){n._execute()}insertContent(n,e,t,...i){const r=Xc(e,t);return this.fire("insertContent",[n,r,t,...i])}insertObject(n,e,t,i,...r){const o=Xc(e,t);return this.fire("insertObject",[n,o,i,i,...r])}deleteContent(n,e){O5(this,n,e)}modifySelection(n,e){(function(t,i,r={}){const o=t.schema,s=r.direction!="backward",a=r.unit?r.unit:"character",l=!!r.treatEmojiAsSingleUnit,c=i.focus,d=new Xi({boundaries:D5(c,s),singleCharacters:!0,direction:s?"forward":"backward"}),u={walker:d,schema:o,isForward:s,unit:a,treatEmojiAsSingleUnit:l};let h;for(;h=d.next();){if(h.done)return;const g=z5(u,h.value);if(g)return void(i instanceof wi?t.change(p=>{p.setSelectionFocus(g)}):i.setFocus(g))}})(this,n,e)}getSelectedContent(n){return function(e,t){return e.change(i=>{const r=i.createDocumentFragment(),o=t.getFirstRange();if(!o||o.isCollapsed)return r;const s=o.start.root,a=o.start.getCommonPath(o.end),l=s.getNodeByPath(a);let c;c=o.start.parent==o.end.parent?o:i.createRange(i.createPositionAt(l,o.start.path[a.length]),i.createPositionAt(l,o.end.path[a.length]+1));const d=c.end.offset-c.start.offset;for(const u of c.getItems({shallow:!0}))u.is("$textProxy")?i.appendText(u.data,u.getAttributes(),r):i.append(i.cloneElement(u,!0),r);if(c!=o){const u=o._getTransformedByMove(c.start,i.createPositionAt(r,0),d)[0],h=i.createRange(i.createPositionAt(r,0),u.start);cf(i.createRange(u.end,i.createPositionAt(r,"end")),i),cf(h,i)}return r})}(this,n)}hasContent(n,e={}){const t=n instanceof T?n:T._createIn(n);if(t.isCollapsed)return!1;const{ignoreWhitespaces:i=!1,ignoreMarkers:r=!1}=e;if(!r){for(const o of this.markers.getMarkersIntersectingRange(t))if(o.affectsData)return!0}for(const o of t.getItems())if(this.schema.isContent(o)&&(!o.is("$textProxy")||!i||o.data.search(/\S/)!==-1))return!0;return!1}canEditAt(n){const e=Xc(n);return this.fire("canEditAt",[e])}createPositionFromPath(n,e,t){return new S(n,e,t)}createPositionAt(n,e){return S._createAt(n,e)}createPositionAfter(n){return S._createAfter(n)}createPositionBefore(n){return S._createBefore(n)}createRange(n,e){return new T(n,e)}createRangeIn(n){return T._createIn(n)}createRangeOn(n){return T._createOn(n)}createSelection(...n){return new Qt(...n)}createBatch(n){return new zr(n)}createOperationFromJSON(n){return w5.fromJSON(n,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const n=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const e=this._pendingChanges[0].batch;this._currentWriter=new V5(this,e);const t=this._pendingChanges[0].callback(this._currentWriter);n.push(t),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return n}};function Xc(n,e){if(n)return n instanceof Qt||n instanceof wi?n:n instanceof er?e||e===0?new Qt(n,e):n.is("rootElement")?new Qt(n,"in"):new Qt(n,"on"):new Qt(n)}class $5 extends Ti{constructor(){super(...arguments),m(this,"domEventType","click")}onDomEvent(e){this.fire(e.type,e)}}class _a extends Ti{constructor(){super(...arguments),m(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(e){this.fire(e.type,e)}}class H5 extends Ti{constructor(){super(...arguments),m(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(e){this.fire(e.type,e)}}class Si{constructor(e){m(this,"document"),this.document=e}createDocumentFragment(e){return new Jn(this.document,e)}createElement(e,t,i){return new Qi(this.document,e,t,i)}createText(e){return new bt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const r=i.getChildIndex(e);return this.removeChildren(r,1,i),this.insertChild(r,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Qi(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Ai(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new se(e,t)}createRangeOn(e){return se._createOn(e)}createRangeIn(e){return se._createIn(e)}createSelection(...e){return new Ji(...e)}}const U5=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,W5=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,q5=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,G5=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Z5=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,K5=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,Y5=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function Q5(n){return n.startsWith("#")?U5.test(n):n.startsWith("rgb")?W5.test(n)||q5.test(n):n.startsWith("hsl")?G5.test(n)||Z5.test(n):Y5.has(n.toLowerCase())}const J5=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function X5(n){return J5.test(n)}const eC=/^[+-]?[0-9]*([.][0-9]+)?%$/;function tC(n){return eC.test(n)}const iC=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function nC(n){return iC.includes(n)}const rC=["center","top","bottom","left","right"];function oC(n){return rC.includes(n)}const sC=["fixed","scroll","local"];function aC(n){return sC.includes(n)}const lC=/^url\(/;function cC(n){return lC.test(n)}function dC(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=df(n),t=e[0],i=e[2]||t,r=e[1]||t;return{top:t,bottom:i,right:r,left:e[3]||r}}function uC(n){return e=>{const{top:t,right:i,bottom:r,left:o}=e,s=[];return[t,i,o,r].every(a=>!!a)?s.push([n,hC(e)]):(t&&s.push([n+"-top",t]),i&&s.push([n+"-right",i]),r&&s.push([n+"-bottom",r]),o&&s.push([n+"-left",o])),s}}function hC({top:n,right:e,bottom:t,left:i}){const r=[];return i!==e?r.push(n,e,t,i):t!==n?r.push(n,e,t):e!==n?r.push(n,e):r.push(n),r.join(" ")}function mC(n){return e=>({path:n,value:dC(e)})}function df(n){const e=n.trim().slice(0,1500).matchAll(K5);return Array.from(e).map(t=>t[0])}function gC(n){n.setNormalizer("background",e=>{const t={},i=df(e);for(const r of i)nC(r)?(t.repeat=t.repeat||[],t.repeat.push(r)):oC(r)?(t.position=t.position||[],t.position.push(r)):aC(r)?t.attachment=r:Q5(r)?t.color=r:cC(r)&&(t.image=r);return{path:"background",value:t}}),n.setNormalizer("background-color",e=>({path:"background.color",value:e})),n.setReducer("background",e=>{const t=[];return t.push(["background-color",e.color]),t}),n.setStyleRelation("background",["background-color"])}function pC(n){n.setNormalizer("margin",mC("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",uC("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}class uf{constructor(e){if(m(this,"crashes",[]),m(this,"state","initializing"),m(this,"_crashNumberLimit"),m(this,"_now",Date.now),m(this,"_minimumNonErrorTimePeriod"),m(this,"_boundErrorHandler"),m(this,"_listeners"),this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){const i=this._listeners[e]||[];for(const r of i)r.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function ed(n,e=new Set){const t=[n],i=new Set;let r=0;for(;t.length>r;){const o=t[r++];if(!i.has(o)&&fC(o)&&!e.has(o))if(i.add(o),Symbol.iterator in o)try{for(const s of o)t.push(s)}catch{}else for(const s in o)s!=="defaultValue"&&t.push(o[s])}return i}function fC(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n==null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function hf(n,e,t=new Set){if(n===e&&typeof(i=n)=="object"&&i!==null)return!0;var i;const r=ed(n,t),o=ed(e,t);for(const s of r)if(o.has(s))return!0;return!1}class mf extends uf{constructor(e,t={}){super(t),m(this,"_editor",null),m(this,"_lifecyclePromise",null),m(this,"_throttledSave"),m(this,"_data"),m(this,"_lastDocumentVersion"),m(this,"_elementOrData"),m(this,"_initUsingData",!0),m(this,"_editables",{}),m(this,"_config"),m(this,"_excludedProps"),this._throttledSave=Pr(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,r)=>e.create(i,r)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],i=this._config.rootsAttributes||{},r={};for(const[s,a]of Object.entries(this._data.roots))a.isLoaded?(e[s]="",r[s]=i[s]||{}):t.push(s);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:r,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(bC),this._initUsingData?this.create(e,o,o.context):vn(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,r=i.has("CommentsRepository")&&i.get("CommentsRepository"),o=i.has("TrackChanges")&&i.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{s.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(s.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return r&&(s.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(s.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return hf(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return ta(e,(t,i)=>vn(t)||i==="context"?t:void 0)}}class bC{constructor(e){m(this,"editor"),m(this,"_data"),this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const i=e.createElement(t.name,t.attributes);if(t.children)for(const r of t.children)i._appendChild(this._createNode(e,r));return i}return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:r,attributes:o}])=>{const s=JSON.parse(r),a=JSON.parse(o),l=t.model.document.getRoot(i);for(const[c,d]of a)e.setAttribute(c,d,l);for(const c of s){const d=this._createNode(e,c);e.insert(d,l,"end")}}),Object.entries(this._data.markers).forEach(([i,r])=>{const{document:o}=t.model,{rangeJSON:{start:s,end:a},...l}=r,c=o.getRoot(s.root),d=e.createPositionFromPath(c,s.path,s.stickiness),u=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(d,u);e.addMarker(i,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{const r=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(i.threadId)&&o.getCommentThread(i.threadId).remove(),o.addCommentThread({channelId:r,...i})}),t.forEach(i=>{const r=this.editor.plugins.get("TrackChangesEditing");r.hasSuggestion(i.id)?r.getSuggestion(i.id).attributes=i.attributes:r.addSuggestionData(i)})}}const Zo=Symbol("MainQueueId");class kC extends uf{constructor(e,t={}){super(t),m(this,"_watchdogs",new Map),m(this,"_watchdogConfig"),m(this,"_context",null),m(this,"_contextProps",new Set),m(this,"_actionQueues",new wC),m(this,"_contextConfig"),m(this,"_item"),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Zo,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=gf(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return r=new mf(null,this._watchdogConfig),r.setCreator(i.creator),r._setExcludedProperties(this._contextProps),i.destructor&&r.setDestructor(i.destructor),this._watchdogs.set(i.id,r),r.on("error",(o,{error:s,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:s}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{const c=()=>{r.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};r.on("restart",c)}))}),r.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){const t=gf(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{const r=this._getWatchdog(i);return this._watchdogs.delete(i),r.destroy()})))}destroy(){return this._actionQueues.enqueue(Zo,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Zo,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=ed(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return hf(this._context,e.context)}}class wC{constructor(){m(this,"_onEmptyCallbacks",[]),m(this,"_queues",new Map),m(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const i=e===Zo;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Zo),this._queues.get(e)])).then(t),o=r.catch(()=>{});return this._queues.set(e,o),r.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(s=>s())})}}function gf(n){return Array.isArray(n)?n:[n]}class _C{constructor(){m(this,"_commands"),this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new v("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class vC extends Ie{constructor(e){super(),m(this,"editor"),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const r=t;t=(o,s)=>{this.editor.execute(r),s()}}super.set(e,t,i)}}const td="contentEditing",pf="common";class yC{constructor(e){m(this,"keystrokeInfos",new Map),m(this,"_editor"),this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:td,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const r=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&r.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:r}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:r}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:pf}),r&&r.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:e,...o})})}addKeystrokeInfoGroup({categoryId:e=td,id:t,label:i,keystrokes:r}){const o=this.keystrokeInfos.get(e);if(!o)throw new v("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:i,keystrokes:r||[]})}addKeystrokeInfos({categoryId:e=td,groupId:t=pf,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new v("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const r=this.keystrokeInfos.get(e);if(!r.groups.has(t))throw new v("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});r.groups.get(t).keystrokes.push(...i)}}function xC(n){return Object.getPrototypeOf(n).constructor.editorName}function id(n){if(!n)return;const e=Array.isArray(n)?{items:n}:n,t=function r(o){return o.flatMap(s=>typeof s=="string"?[s]:r(s.items))}(e.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:(i=t,i.filter(r=>r!=="|"&&r!=="-"))};var i}function CC(){let n="unknown",e="unknown";return W.isMac?n="mac":W.isWindows?n="windows":W.isiOS?n="ios":W.isAndroid&&(n="android"),W.isGecko?e="gecko":W.isBlink?e="blink":W.isSafari&&(e="safari"),{os:n,browser:e}}function AC(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",Tt()),localStorage.getItem("__ckeditor-session-id")}function TC(){return R.window.CKEDITOR_PAGE_SESSION_ID=R.window.CKEDITOR_PAGE_SESSION_ID||Tt(),R.window.CKEDITOR_PAGE_SESSION_ID}class Br extends xe(){constructor(e={}){if(super(),m(this,"accessibility"),m(this,"commands"),m(this,"config"),m(this,"conversion"),m(this,"data"),m(this,"editing"),m(this,"locale"),m(this,"model"),m(this,"plugins"),m(this,"keystrokes"),m(this,"t"),m(this,"_context"),m(this,"_readOnlyLocks"),"sanitizeHtml"in e)throw new v("editor-config-sanitizehtml-not-supported");const t=this.constructor,{translations:i,...r}=t.defaultConfig||{},{translations:o=i,...s}=e,a=e.language||r.language;this._context=e.context||new la({language:a,translations:o}),this._context._addEditor(this,!e.context);const l=Array.from(t.builtinPlugins||[]);this.config=new dg(s,r),this.config.define("plugins",l),this.config.define(this._context._getEditorConfig()),function(d){let u=d.get("licenseKey");if(!u&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(u=window.CKEDITOR_GLOBAL_LICENSE_KEY,d.set("licenseKey",u)),!u)throw new v("license-key-missing")}(this.config),this.plugins=new Fg(this,l,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new _C,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new j5,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const c=new ux;this.data=new b5(this.model,c),this.editing=new i5(this.model,c),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new k5([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new vC(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new yC(this),function(d){const u=d.config.get("licenseKey"),h=window[Symbol.for("cke distribution")]||"sh";function g(k){d.enableReadOnlyMode(Symbol("invalidLicense")),d._showLicenseError(k)}if(u=="GPL")return void(h=="cloud"&&g("distributionChannel"));const p=function(k){const w=k.split(".");return w.length!=3?null:w[1]}(u);if(!p)return void g("invalid");const f=yc(p);if(!f||!function(k){return["exp","jti","vc"].every(w=>w in k)}(f))return void g("invalid");if(f.distributionChannel&&!Ne(f.distributionChannel).includes(h))return void g("distributionChannel");if(nx(function(k){return Object.getOwnPropertyNames(k).sort().filter(w=>w!="vc"&&k[w]!=null).map(w=>k[w])}(f))!=f.vc.toLowerCase())return void g("invalid");if(new Date(1e3*f.exp)<A2)return void g("expired");const b=f.licensedHosts;if(b&&b.length>0&&!function(k){const{hostname:w}=new URL(window.location.href);if(k.includes(w))return!0;const _=w.split(".");return k.filter(y=>y.includes("*")).map(y=>y.split(".")).filter(y=>y.length<=_.length).map(y=>Array(_.length-y.length).fill(y[0]==="*"?"*":"").concat(y)).some(y=>_.every((x,A)=>y[A]===x||y[A]==="*"))}(b))return void g("domainLimit");if(["evaluation","trial"].includes(f.licenseType)&&1e3*f.exp<Date.now())return void g("expired");if(["development","evaluation","trial"].includes(f.licenseType)){const{licenseType:k}=f,w=k[0].toUpperCase()+k.slice(1),_=k==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${w} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`\u26A0\uFE0F You are using ${_} ${k} license of CKEditor 5`+(k==="trial"?" which is for evaluation purposes only":"")+". For production usage, please obtain a production license at https://portal.ckeditor.com/")}if(["evaluation","trial"].includes(f.licenseType)){const k=f.licenseType,w=setTimeout(()=>{g(`${k}Limit`)},6e5);d.on("destroy",()=>{clearTimeout(w)})}f.usageEndpoint&&d.once("ready",()=>{const k={requestId:Tt(),requestTime:Math.round(Date.now()/1e3),license:u,editor:EC(d)};d._sendUsageRequest(f.usageEndpoint,k).then(w=>{const{status:_,message:y}=w;y&&console.warn(y),_!="ok"&&g("usageLimit")},()=>{C2("license-key-validation-endpoint-not-reachable",{url:f.usageEndpoint})})},{priority:"high"})}(this)}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new v("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new v("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new v("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),i,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){v.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}_showLicenseError(e,t){setTimeout(()=>{if(e=="invalid")throw new v("invalid-license-key");if(e=="expired")throw new v("license-key-expired");if(e=="domainLimit")throw new v("license-key-domain-limit");if(e=="featureNotAllowed")throw new v("license-key-plugin-not-allowed",null,{pluginName:t});if(e=="evaluationLimit")throw new v("license-key-evaluation-limit");if(e=="trialLimit")throw new v("license-key-trial-limit");if(e=="developmentLimit")throw new v("license-key-development-limit");if(e=="usageLimit")throw new v("license-key-usage-limit");if(e=="distributionChannel")throw new v("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,t){const i=new Headers({"Content-Type":"application/json"}),r=await fetch(new URL(e),{method:"POST",headers:i,body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP Response: ${r.status}`);return r.json()}}m(Br,"defaultConfig"),m(Br,"builtinPlugins"),m(Br,"Context",la),m(Br,"EditorWatchdog",mf),m(Br,"ContextWatchdog",kC);function EC(n){const e=function(t){return{sessionId:AC(),pageSessionId:TC(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:xC(t),plugins:(i=t.plugins,Array.from(i).filter(([r])=>!!r.pluginName).map(([r])=>{const{pluginName:o,isContextPlugin:s,isOfficialPlugin:a,isPremiumPlugin:l}=r;return{isContext:!!s,isOfficial:!!a,isPremium:!!l,name:o}})),distribution:{channel:window[Symbol.for("cke distribution")]||"sh"},env:CC(),integration:Object.create(null),menuBar:{isVisible:!!t.config.get("menuBar.isVisible")},language:{ui:t.locale.uiLanguage,content:t.locale.contentLanguage},toolbar:{main:id(t.config.get("toolbar")),block:id(t.config.get("blockToolbar")),balloon:id(t.config.get("balloonToolbar"))}};var i}(n);return n.fire("collectUsageData",{setUsageData:function(t,i){if(_n(e,t)!==void 0)throw new v("editor-usage-data-path-already-set",{path:t});Xm(e,t,i)}}),e}function SC(n){if(!ea(n.updateSourceElement))throw new v("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(function(t){return!!t&&t.tagName.toLowerCase()==="textarea"}(e)&&e.form){let t;const i=e.form,r=()=>n.updateSourceElement();ea(i.submit)&&(t=i.submit,i.submit=()=>{r(),t.apply(i)}),i.addEventListener("submit",r),n.on("destroy",()=>{i.removeEventListener("submit",r),t&&(i.submit=t)})}}function nd(n){return class extends n{constructor(){super(...arguments),m(this,"sourceElement")}updateSourceElement(e){if(!this.sourceElement)throw new v("editor-missing-sourceelement",this);const t=this.config.get("updateSourceElementOnDestroy"),i=this.sourceElement instanceof HTMLTextAreaElement;if(!t&&!i)return void vg(this.sourceElement,"");const r=typeof e=="string"?e:this.data.get();vg(this.sourceElement,r)}}}function IC(n,e){if(e.ckeditorInstance)throw new v("editor-source-element-already-used",n);e.ckeditorInstance=n,n.once("destroy",()=>{delete e.ckeditorInstance})}nd.updateSourceElement=nd(Object).prototype.updateSourceElement;class va extends jg{constructor(){super(...arguments),m(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new ot({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new v("pendingactions-add-invalid-message",this);const t=new(xe());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class PC extends xe(){constructor(){super(),m(this,"total"),m(this,"_reader"),m(this,"_data");const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((i,r)=>{t.onload=()=>{const o=t.result;this._data=o,i(o)},t.onerror=()=>{r("error")},t.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}class An extends C{constructor(){super(...arguments),m(this,"loaders",new ot),m(this,"_loadersMap",new Map),m(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[va]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return le("filerepository-no-upload-adapter"),null;const t=new ff(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(const r of this.loaders)i+=r.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(const r of this.loaders)r.uploadTotal&&(i+=r.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){const t=e instanceof ff?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,r)=>{i===t&&this._loadersMap.delete(r)})}_updatePendingAction(){const e=this.editor.plugins.get(va);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=r=>`${t("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}class ff extends xe(){constructor(e,t){super(),m(this,"id"),m(this,"_filePromiseWrapper"),m(this,"_adapter"),m(this,"_reader"),this.id=Tt(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new PC,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,r)=>r?i/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new v("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new v("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((i,r)=>{t.rejecter=r,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,i(o)}).catch(o=>{t.isFulfilled=!0,r(o)})}),t}}class MC extends C{static get requires(){return[An]}static get pluginName(){return"Base64UploadAdapter"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(An).createUploadAdapter=e=>new VC(e)}}let VC=class{constructor(n){m(this,"loader"),m(this,"reader"),this.loader=n}upload(){return new Promise((n,e)=>{const t=this.reader=new window.FileReader;t.addEventListener("load",()=>{n({default:t.result})}),t.addEventListener("error",i=>{e(i)}),t.addEventListener("abort",()=>{e()}),this.loader.file.then(i=>{t.readAsDataURL(i)})})}abort(){this.reader.abort()}};const rd=["left","right","center","justify"];function bf(n){return rd.includes(n)}function kf(n,e){return e.contentLanguageDirection=="rtl"?n==="right":n==="left"}function wf(n){const e=n.map(i=>{let r;return r=typeof i=="string"?{name:i}:i,r}).filter(i=>{const r=rd.includes(i.name);return r||le("alignment-config-name-not-recognized",{option:i}),r}),t=e.filter(i=>!!i.className).length;if(t&&t<e.length)throw new v("alignment-config-classnames-are-missing",{configuredOptions:n});return e.forEach((i,r,o)=>{const s=o.slice(r+1);if(s.some(a=>a.name==i.name))throw new v("alignment-config-name-already-defined",{option:i,configuredOptions:n});if(i.className&&s.some(a=>a.className==i.className))throw new v("alignment-config-classname-already-defined",{option:i,configuredOptions:n})}),e}const od="alignment";class LC extends G{refresh(){const e=this.editor.locale,t=Ce(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.isEnabled&&t.hasAttribute("alignment")?this.value=t.getAttribute("alignment"):this.value=e.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,i=t.locale,r=t.model,o=r.document,s=e.value;r.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");kf(s,i)||c===s||!s?function(d,u){for(const h of d)u.removeAttribute(od,h)}(l,a):function(d,u,h){for(const g of d)u.setAttribute(od,h,g)}(l,a,s)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,od)}}class OC extends C{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("alignment",{options:rd.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,i=e.model.schema,r=wf(e.config.get("alignment.options")).filter(l=>bf(l.name)&&!kf(l.name,t)),o=r.some(l=>!!l.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?e.conversion.attributeToAttribute(function(l){const c={};for(const d of l)c[d.name]={key:"class",value:d.className};return{model:{key:"alignment",values:l.map(d=>d.name)},view:c}}(r)):e.conversion.for("downcast").attributeToAttribute(function(l){const c={};for(const{name:d}of l)c[d]={key:"style",value:{"text-align":d}};return{model:{key:"alignment",values:l.map(d=>d.name)},view:c}}(r));const s=function(l){const c=[];for(const{name:d}of l)c.push({view:{key:"style",value:{"text-align":d}},model:{key:"alignment",value:d}});return c}(r);for(const l of s)e.conversion.for("upcast").attributeToAttribute(l);const a=function(l){const c=[];for(const{name:d}of l)c.push({view:{key:"align",value:d},model:{key:"alignment",value:d}});return c}(r);for(const l of a)e.conversion.for("upcast").attributeToAttribute(l);e.commands.add("alignment",new LC(e))}}class St extends ot{constructor(e=[]){super(e,{idProperty:"viewUid"}),m(this,"_parentElement"),this.on("add",(t,i,r)=>{this._renderViewIntoCollectionParent(i,r)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!e.every(t=>typeof t=="string"))throw new v("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const r of e)i.delegate(r).to(t);this.on("add",(i,r)=>{for(const o of e)r.delegate(o).to(t)}),this.on("remove",(i,r)=>{for(const o of e)r.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}class ri extends ye(){constructor(e){super(),m(this,"ns"),m(this,"tag"),m(this,"text"),m(this,"attributes"),m(this,"children"),m(this,"eventListeners"),m(this,"_isRendered"),m(this,"_revertData"),Object.assign(this,xf(yf(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new v("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){yield*function*e(t){if(t.children)for(const i of t.children)xa(i)?yield i:sd(i)&&(yield*e(i))}(this)}static bind(e,t){return{to:(i,r)=>new NC({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:r}),if:(i,r,o)=>new _f({observable:e,emitter:t,attribute:i,valueIfTrue:r,callback:o})}}static extend(e,t){if(e._isRendered)throw new v("template-extend-render",[this,e]);Ef(e,xf(yf(t)))}_renderNode(e){let t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new v("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),ya(this.text)?this._bindToObservable({schema:this.text,updater:RC(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,i=e.revertData;for(const r in this.attributes){const o=t.getAttribute(r),s=this.attributes[r];i&&(i.attributes[r]=o);const a=Sf(s)?s[0].ns:null;if(ya(s)){const l=Sf(s)?s[0].value:s;i&&If(r)&&l.unshift(o),this._bindToObservable({schema:l,updater:zC(t,r,a),data:e})}else if(r=="style"&&typeof s[0]!="string")this._renderStyleAttribute(s[0],e);else{i&&o&&If(r)&&s.unshift(o);const l=s.map(c=>c&&c.value||c).reduce((c,d)=>c.concat(d),[]).reduce(Af,"");Fr(l)||t.setAttributeNS(a,r,l)}}}_renderStyleAttribute(e,t){const i=t.node;for(const r in e){const o=e[r];ya(o)?this._bindToObservable({schema:[o],updater:DC(i,r),data:t}):i.style[r]=o}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying;let o=0;for(const s of this.children)if(ad(s)){if(!r){s.setParent(t);for(const a of s)i.appendChild(a.element)}}else if(xa(s))r||(s.isRendered||s.render(),i.appendChild(s.element));else if(yn(s))i.appendChild(s);else if(r){const a={children:[],bindings:[],attributes:{}};e.revertData.children.push(a),s._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:a})}else i.appendChild(s.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map(r=>{const[o,s]=t.split("@");return r.activateDomEventListener(o,s,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const r=i.revertData;vf(e,t,i);const o=e.filter(s=>!Fr(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,i));r&&r.bindings.push(o)}_revertTemplateFromNode(e,t){for(const r of t.bindings)for(const o of r)o();if(t.text)return void(e.textContent=t.text);const i=e;for(const r in t.attributes){const o=t.attributes[r];o===null?i.removeAttribute(r):i.setAttribute(r,o)}for(let r=0;r<t.children.length;++r)this._revertTemplateFromNode(i.childNodes[r],t.children[r])}}class Ko{constructor(e){m(this,"attribute"),m(this,"observable"),m(this,"emitter"),m(this,"callback"),this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const r=()=>vf(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}}class NC extends Ko{constructor(e){super(e),m(this,"eventNameOrFunction"),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){const r=(o,s)=>{t&&!s.target.matches(t)||(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(i.node,e,r),()=>{this.emitter.stopListening(i.node,e,r)}}}class _f extends Ko{constructor(e){super(e),m(this,"valueIfTrue"),this.valueIfTrue=e.valueIfTrue}getValue(e){return!Fr(super.getValue(e))&&(this.valueIfTrue||!0)}}function ya(n){return!!n&&(n.value&&(n=n.value),Array.isArray(n)?n.some(ya):n instanceof Ko)}function vf(n,e,{node:t}){const i=function(o,s){return o.map(a=>a instanceof Ko?a.getValue(s):a)}(n,t);let r;r=n.length==1&&n[0]instanceof _f?i[0]:i.reduce(Af,""),Fr(r)?e.remove():e.set(r)}function RC(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function zC(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function DC(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function yf(n){return ta(n,e=>{if(e&&(e instanceof Ko||sd(e)||xa(e)||ad(e)))return e})}function xf(n){if(typeof n=="string"?n=function(e){return{text:[e]}}(n):n.text&&function(e){e.text=Ne(e.text)}(n),n.on&&(n.eventListeners=function(e){for(const t in e)Cf(e,t);return e}(n.on),delete n.on),!n.text){n.attributes&&function(t){for(const i in t)t[i].value&&(t[i].value=Ne(t[i].value)),Cf(t,i)}(n.attributes);const e=[];if(n.children)if(ad(n.children))e.push(n.children);else for(const t of n.children)sd(t)||xa(t)||yn(t)?e.push(t):e.push(new ri(t));n.children=e}return n}function Cf(n,e){n[e]=Ne(n[e])}function Af(n,e){return Fr(e)?n:Fr(n)?e:`${n} ${e}`}function Tf(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function Ef(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),Tf(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),Tf(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new v("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)Ef(n.children[t++],i)}}function Fr(n){return!n&&n!==0}function xa(n){return n instanceof N}function sd(n){return n instanceof ri}function ad(n){return n instanceof St}function Sf(n){return mi(n[0])&&n[0].ns}function If(n){return n=="class"||n=="style"}class N extends Mt(xe()){constructor(e){super(),m(this,"element"),m(this,"isRendered"),m(this,"locale"),m(this,"t"),m(this,"template"),m(this,"_viewCollections"),m(this,"_unboundChildren"),m(this,"_bindTemplate"),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new ot,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=ri.bind(this,this)}createCollection(e){const t=new St(e);return this._viewCollections.add(t),t}registerChild(e){qt(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){qt(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new ri(e)}extendTemplate(e){ri.extend(this.template,e)}render(){if(this.isRendered)throw new v("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}function Tn({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:r}){n.listenTo(document,"mousedown",(o,s)=>{if(!e())return;const a=typeof s.composedPath=="function"?s.composedPath():[],l=typeof i=="function"?i():i;for(const c of l)if(c.contains(s.target)||a.includes(c))return;t()},r)}function Yo(n){return class extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...e){super(...e),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}}function jr({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}function Qo({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:r}){const o=typeof i=="number"?()=>i:i;function s(c){return d=>{const u=t.find(p=>p.element===e.focusedElement),h=t.getIndex(u),g=c(h,t);t.get(g).focus(),d.stopPropagation(),d.preventDefault()}}function a(c,d){return c===d-1?0:c+1}function l(c,d){return c===0?d-1:c-1}n.set("arrowright",s((c,d)=>r==="rtl"?l(c,d.length):a(c,d.length))),n.set("arrowleft",s((c,d)=>r==="rtl"?a(c,d.length):l(c,d.length))),n.set("arrowup",s((c,d)=>{let u=c-o();return u<0&&(u=c+o()*Math.floor(d.length/o()),u>d.length-1&&(u-=o())),u})),n.set("arrowdown",s((c,d)=>{let u=c+o();return u>d.length-1&&(u=c%o()),u}))}var Pf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',BC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',FC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Mf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',jC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Vf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',ld='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',cd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',$C='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Lf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Of='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',HC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',UC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',WC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',qC='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',GC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',Ca='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',ZC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>',dd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',KC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',YC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',Nf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',Rf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',QC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',JC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',XC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',eA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',tA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',zf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',iA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',Df='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',nA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',rA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',oA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',sA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',aA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',lA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',cA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',dA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>',uA='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',hA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',mA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',gA='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',pA='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',Bf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',ud='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',hd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',fA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',Ff='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',md='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',jf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',$f='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Hf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',bA='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',kA='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',wA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',_A='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',vA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',Uf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',yA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',xA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',CA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',AA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',TA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',tr='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',EA=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,SA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',Wf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',IA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>',PA='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',MA='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',VA=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,LA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>',OA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',NA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>',RA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>',zA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',DA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',BA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',qf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',FA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',jA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',gd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',$A='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',HA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',Gf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',UA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';const Zf=class X0 extends N{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!e)throw new v("ui-iconview-invalid-svg",this);const t=e.getAttribute("viewBox");t&&(this.viewBox=t);for(const{name:i,value:r}of Array.from(e.attributes))X0.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}};m(Zf,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let Ii=Zf;class Kf extends N{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class $ extends N{constructor(e,t=new Kf){super(e),m(this,"children"),m(this,"labelView"),m(this,"iconView"),m(this,"keystrokeView"),m(this,"_focusDelayed",null);const i=this.bindTemplate,r=Tt();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new Ii,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s),i.if("isVisible","ck-hidden",s=>!s),i.to("isOn",s=>s?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",s=>s||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,s=>!s),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(s=>{this.isEnabled?this.fire("execute"):s.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!(!a||Yf(l))&&String(!!s)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!(!a||!Yf(l))&&String(!!s)),W.isSafari&&(this._focusDelayed||(this._focusDelayed=vc(()=>this.focus(),0)),o.on.mousedown=i.to(()=>{this._focusDelayed()}),o.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,t,i,r)=>{i&&!r?this.children.add(this.iconView,0):!i&&r&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new N;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>sa(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=sa(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}function Yf(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class ir extends N{constructor(e,t={}){super(e),m(this,"children"),m(this,"iconView");const i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new Ii,this.iconView.content=t.icon,this.children.add(this.iconView));const r=new N(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(r)}}class ct extends ye(){constructor(e){if(super(),m(this,"focusables"),m(this,"focusTracker"),m(this,"keystrokeHandler"),m(this,"actions"),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(const r of i)e.keystrokeHandler.set(r,(o,s)=>{this[t](),s()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(pd)||null}get last(){return this.focusables.filter(pd).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{const r=t.element===this.focusTracker.focusedElement;return r&&(e=i),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;e&&this.focusables.getIndex(e)===this.current||e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;e&&this.focusables.getIndex(e)===this.current||e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",i=>{const r=t();this.focusNext(),r!==t()&&i.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",i=>{const r=t();this.focusPrevious(),r!==t()&&i.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const i=this.current;if(i===null)return this[e===1?"first":"last"];let r=this.focusables.get(i),o=(i+t+e)%t;do{const s=this.focusables.get(o);if(pd(s)){r=s;break}o=(o+t+e)%t}while(o!==i);return r}}function pd(n){return $r(n)&&Ki(n.element)}function $r(n){return!(!("focus"in n)||typeof n.focus!="function")}function Qf(n){return $r(n)&&"focusCycler"in n&&n.focusCycler instanceof ct}function WA(n){return class extends n{constructor(...e){super(...e),m(this,"_onDragBound",this._onDrag.bind(this)),m(this,"_onDragEndBound",this._onDragEnd.bind(this)),m(this,"_lastDraggingCoordinates",{x:0,y:0}),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(R.document,"mouseup",this._onDragEndBound),this.listenTo(R.document,"touchend",this._onDragEndBound),this.listenTo(R.document,"mousemove",this._onDragBound),this.listenTo(R.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(R.document,"mouseup",this._onDragEndBound),this.stopListening(R.document,"touchend",this._onDragEndBound),this.stopListening(R.document,"mousemove",this._onDragBound),this.stopListening(R.document,"touchmove",this._onDragBound)}_onDragStart(e,t){if(!this._isHandleElementPressed(t))return;this._attachDragListeners();let i=0,r=0;t instanceof MouseEvent?(i=t.clientX,r=t.clientY):(i=t.touches[0].clientX,r=t.touches[0].clientY),this._lastDraggingCoordinates={x:i,y:r},this.isDragging=!0}_onDrag(e,t){if(!this.isDragging)return void this._detachDragListeners();let i=0,r=0;t instanceof MouseEvent?(i=t.clientX,r=t.clientY):(i=t.touches[0].clientX,r=t.touches[0].clientY),t.preventDefault(),this.fire("drag",{deltaX:Math.round(i-this._lastDraggingCoordinates.x),deltaY:Math.round(r-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:i,y:r}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(e){return!!this.dragHandleElement&&(this.dragHandleElement===e.target||e.target instanceof HTMLElement&&this.dragHandleElement.contains(e.target))}}}class qA extends N{constructor(e){super(e),m(this,"children"),m(this,"keystrokes"),m(this,"focusCycler"),m(this,"_focusTracker"),m(this,"_focusables"),this.children=this.createCollection(),this.keystrokes=new Ie,this._focusTracker=new ge,this._focusables=new St,this.focusCycler=new ct({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const i=new $(this.locale);let r;for(r in i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i),t)r!="onExecute"&&r!="onCreate"&&i.set(r,t[r]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class GA extends N{constructor(e){super(e),m(this,"children"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const oi={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},Jf=xn("px"),Xf=class e1 extends WA(N){constructor(e,{getCurrentDomRoot:t,getViewportOffset:i,keystrokeHandlerOptions:r}){super(e),m(this,"parts"),m(this,"headerView"),m(this,"closeButtonView"),m(this,"actionsView"),m(this,"contentView"),m(this,"keystrokes"),m(this,"focusTracker"),m(this,"wasMoved",!1),m(this,"_getCurrentDomRoot"),m(this,"_getViewportOffset"),m(this,"_focusables"),m(this,"_focusCycler");const o=this.bindTemplate,s=e.t;this.set("className",""),this.set("ariaLabel",s("Editor dialog")),this.set("isModal",!1),this.set("position",oi.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=i,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Ie,this.focusTracker=new ge,this._focusables=new St,this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",a=>!a),o.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",a=>Jf(a)),left:o.to("_left",a=>Jf(a)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),t())}),this.on("drag",(e,{deltaX:t,deltaY:i})=>{this.wasMoved=!0,this.moveBy(t,i)}),this.listenTo(R.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(R.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,i)=>{i&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:i=!0,content:r,actionButtons:o}){t&&(this.headerView=new ir(this.locale,{icon:e}),i&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),r&&(r instanceof N&&(r=[r]),this.contentView=new GA(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),o&&(this.actionsView=new qA(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const i=this._getViewportRect(),r=this._getDialogRect();e+r.width>i.right&&(e=i.right-r.width),e<i.left&&(e=i.left),t<i.top&&(t=i.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t,i=this.position;this._getCurrentDomRoot()?t=this._getVisibleDomRootRect(e):i=oi.SCREEN_CENTER;const r=e1.defaultOffset,o=this._getDialogRect();switch(i){case oi.EDITOR_TOP_SIDE:if(t){const s=this.locale.contentLanguageDirection==="ltr"?t.right-o.width-r:t.left+r;this.moveTo(s,t.top+r)}else this._moveOffScreen();break;case oi.EDITOR_CENTER:t?this.moveTo(Math.round(t.left+t.width/2-o.width/2),Math.round(t.top+t.height/2-o.height/2)):this._moveOffScreen();break;case oi.SCREEN_CENTER:this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break;case oi.EDITOR_TOP_CENTER:t?this.moveTo(Math.round(t.left+t.width/2-o.width/2),t.top+r):this._moveOffScreen();break;case oi.EDITOR_BOTTOM_CENTER:t?this.moveTo(Math.round(t.left+t.width/2-o.width/2),t.bottom-o.height-r):this._moveOffScreen();break;case oi.EDITOR_ABOVE_CENTER:t?this.moveTo(Math.round(t.left+t.width/2-o.width/2),t.top-o.height-r):this._moveOffScreen();break;case oi.EDITOR_BELOW_CENTER:t?this.moveTo(Math.round(t.left+t.width/2-o.width/2),t.bottom+r):this._moveOffScreen()}}_getVisibleDomRootRect(e){let t=new K(this._getCurrentDomRoot()).getVisible();return t?(t=e.getIntersection(t),t||null):null}_getDialogRect(){return new K(this.element.firstElementChild)}_getViewportRect(){const e=new K(R.window);if(this.isModal)return e;const t={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)$r(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),Qf(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const e=new $(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:cd}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}};m(Xf,"defaultOffset",15);let ZA=Xf;const eb=class ln extends C{constructor(e){super(e),m(this,"view"),m(this,"_onHide");const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),ln._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{ln._visibleDialogPlugin&&ln._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,i)=>{this.isOpen&&!this.view.isModal&&(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),i())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const i of t)i.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:i,hasCloseButton:r=!0,content:o,actionButtons:s,className:a,isModal:l,position:c,onHide:d,keystrokeHandlerOptions:u}){const h=this.editor;this.view=new ZA(h.locale,{getCurrentDomRoot:()=>h.editing.view.getDomRoot(h.model.document.selection.anchor.root.rootName),getViewportOffset:()=>h.ui.viewportOffset,keystrokeHandlerOptions:u});const g=this.view;g.on("close",()=>{this.hide()}),h.ui.view.body.add(g),h.keystrokes.listenTo(g.element),c||(c=l?oi.SCREEN_CENTER:oi.EDITOR_CENTER),l&&this._lockBodyScroll(),g.set({position:c,_isVisible:!0,className:a,isModal:l}),g.setupParts({icon:t,title:i,hasCloseButton:r,content:o,actionButtons:s}),this.id=e,d&&(this._onHide=d),this.isOpen=!0,ln._visibleDialogPlugin=this}hide(){ln._visibleDialogPlugin&&ln._visibleDialogPlugin.fire(`hide:${ln._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.isModal&&this._unlockBodyScroll(),t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,ln._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};m(eb,"_visibleDialogPlugin");let Jo=eb;class Hr extends ${constructor(e,t=new Kf){super(e,t),m(this,"_checkIconHolderView",new KA),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,i)=>{const{children:r,_checkIconHolderView:o}=this;i?r.add(o,0):r.remove(o)})}}class KA extends N{constructor(){super(),m(this,"children"),m(this,"_checkIconView",this._createCheckIconView());const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,i)=>{const{children:r,_checkIconView:o}=this;i&&!r.has(o)?r.add(o):!i&&r.has(o)&&r.remove(o)})}_createCheckIconView(){const e=new Ii;return e.content=Lf,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class Se extends Hr{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class fd extends N{constructor(e){super(e),m(this,"id"),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Tt()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class YA extends N{constructor(e,t){super(e);const i=e.t,r=new fd;r.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":r.id,role:"document",tabindex:-1},children:[pi(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),r]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const i=[pi(document,"h3",{},t.label),...Array.from(t.groups.values()).map(r=>this._createGroup(r)).flat()];return t.description&&i.splice(1,0,pi(document,"p",{},t.description)),pi(document,"section",{},i)})}_createGroup(e){const t=e.keystrokes.sort((r,o)=>r.label.localeCompare(o.label)).map(r=>this._createGroupRow(r)).flat(),i=[pi(document,"dl",{},t)];return e.label&&i.unshift(pi(document,"h4",{},e.label)),i}_createGroupRow(e){const t=this.locale.t,i=pi(document,"dt"),r=pi(document,"dd"),o=function(a){return typeof a=="string"?[[a]]:typeof a[0]=="string"?[a]:a}(e.keystroke),s=[];for(const a of o)s.push(a.map(QA).join(""));return i.innerHTML=e.label,r.innerHTML=s.join(", ")+(e.mayRequireFn&&W.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,r]}}function QA(n){return sa(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}class JA extends C{constructor(){super(...arguments),m(this,"contentView",null)}static get requires(){return[Jo]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const i=this._createButton($);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const i=this._createButton(Se);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){const t=this.editor,i=t.plugins.get("Dialog"),r=new e(t.locale);return r.set({keystroke:"Alt+0",icon:Pf,isToggleable:!0}),r.on("execute",()=>this._toggleDialog()),r.bind("isOn").to(i,"id",o=>o==="accessibilityHelp"),r}_setupRootLabels(){const e=this.editor,t=e.editing.view,i=e.t;function r(o,s){const a=[s.getAttribute("aria-label"),i("Press %0 for help.",[sa("Alt+0")])].filter(l=>l).join(". ");o.setAttribute("aria-label",a,s)}e.ui.on("ready",()=>{t.change(o=>{for(const s of t.document.roots)r(o,s)}),e.on("addRoot",(o,s)=>{const a=e.editing.view.document.getRoot(s.rootName);t.change(l=>r(l,a))},{priority:"low"})})}_toggleDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new YA(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:Pf,hasCloseButton:!0,content:this.contentView})}}const tb=class Ri extends St{constructor(e,t=[]){super(t),m(this,"locale"),m(this,"_bodyCollectionContainer"),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new ri({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),Ri._bodyWrapper&&Ri._bodyWrapper.isConnected||(Ri._bodyWrapper=pi(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Ri._bodyWrapper)),Ri._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Ri._bodyWrapper&&!Ri._bodyWrapper.childElementCount&&(Ri._bodyWrapper.remove(),delete Ri._bodyWrapper)}};m(tb,"_bodyWrapper");let XA=tb;class Xo extends ${constructor(e){super(e),m(this,"toggleSwitchView"),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new N;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class ib extends nb($){}class eT extends nb(Hr){}function nb(n){return class extends n{constructor(...e){super(...e),m(this,"buttonView"),m(this,"_fileInputView"),this.buttonView=this,this._fileInputView=new tT(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}}class tT extends N{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{var i,r;(r=(i=this.element)==null?void 0:i.files)!=null&&r.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class rb extends N{constructor(e,t){super(e),m(this,"buttonView"),m(this,"children");const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new $(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:Ca}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}function iT(n,e){const t=n.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(r=>{const o=i[r.label];return o&&o!=r.label&&(r.label=o),r})}function nT(n){return n.map(rT).filter(e=>!!e)}function rT(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder!==void 0&&n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}class ob extends ${constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=WC,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",i=>W.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class sb extends N{constructor(e,t){super(e),m(this,"columns"),m(this,"items"),m(this,"focusTracker"),m(this,"keystrokes");const i=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t?.columns||5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this.items.on("add",(o,s)=>{s.isOn=s.color===this.selectedColor}),i.forEach(o=>{const s=new ob;s.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),s.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(s)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",(o,s,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){var e;super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,i)=>{this.focusTracker.add(i.element)}),this.items.on("remove",(t,i)=>{this.focusTracker.remove(i.element)}),this.keystrokes.listenTo(this.element),Qo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:(e=this.locale)==null?void 0:e.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var bd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ab={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function lb(n){var e,t,i=[],r=1;if(typeof n=="string")if(bd[n])i=bd[n].slice(),t="rgb";else if(n==="transparent")r=0,t="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var o=n.slice(1);r=1,(l=o.length)<=4?(i=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],l===4&&(r=parseInt(o[3]+o[3],16)/255)):(i=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],l===8&&(r=parseInt(o[6]+o[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),t="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var s=e[1],a=s==="rgb";t=o=s.replace(/a$/,"");var l=o==="cmyk"?4:o==="gray"?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(c,d){if(/%$/.test(c))return d===l?parseFloat(c)/100:o==="rgb"?255*parseFloat(c)/100:parseFloat(c);if(o[d]==="h"){if(/deg$/.test(c))return parseFloat(c);if(ab[c]!==void 0)return ab[c]}return parseFloat(c)}),s===o&&i.push(1),r=a||i[l]===void 0?1:i[l],i=i.slice(0,l)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(i=n.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),t=n.match(/([a-z])/gi).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(i=[n[0],n[1],n[2]],t="rgb",r=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(t="rgb",i=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(t="hsl",i=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),r=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(r/=100)):(t="rgb",i=[n>>>16,(65280&n)>>>8,255&n]);return{space:t,values:i,alpha:r}}const es=bd,cb={};for(const n of Object.keys(es))cb[es[n]]=n;const q={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var db=q;for(const n of Object.keys(q)){if(!("channels"in q[n]))throw new Error("missing channels property: "+n);if(!("labels"in q[n]))throw new Error("missing channel labels property: "+n);if(q[n].labels.length!==q[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=q[n];delete q[n].channels,delete q[n].labels,Object.defineProperty(q[n],"channels",{value:e}),Object.defineProperty(q[n],"labels",{value:t})}function oT(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}q.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r;let a,l;o===r?a=0:e===o?a=(t-i)/s:t===o?a=2+(i-e)/s:i===o&&(a=4+(e-t)/s),a=Math.min(60*a,360),a<0&&(a+=360);const c=(r+o)/2;return l=o===r?0:c<=.5?s/(o+r):s/(2-o-r),[a,100*l,100*c]},q.rgb.hsv=function(n){let e,t,i,r,o;const s=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(s,a,l),d=c-Math.min(s,a,l),u=function(h){return(c-h)/6/d+.5};return d===0?(r=0,o=0):(o=d/c,e=u(s),t=u(a),i=u(l),s===c?r=i-t:a===c?r=1/3+e-i:l===c&&(r=2/3+t-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*o,100*c]},q.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const r=q.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,100*o,100*i]},q.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i);return[100*((1-e-r)/(1-r)||0),100*((1-t-r)/(1-r)||0),100*((1-i-r)/(1-r)||0),100*r]},q.rgb.keyword=function(n){const e=cb[n];if(e)return e;let t,i=1/0;for(const r of Object.keys(es)){const o=oT(n,es[r]);o<i&&(i=o,t=r)}return t},q.keyword.rgb=function(n){return es[n]},q.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;return e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,[100*(.4124*e+.3576*t+.1805*i),100*(.2126*e+.7152*t+.0722*i),100*(.0193*e+.1192*t+.9505*i)]},q.rgb.lab=function(n){const e=q.rgb.xyz(n);let t=e[0],i=e[1],r=e[2];return t/=95.047,i/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,[116*i-16,500*(t-i),200*(i-r)]},q.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let r,o,s;if(t===0)return s=255*i,[s,s,s];r=i<.5?i*(1+t):i+t-i*t;const a=2*i-r,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(r-a)*o:2*o<1?r:3*o<2?a+(r-a)*(2/3-o)*6:a,l[c]=255*s;return l},q.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,r=t;const o=Math.max(i,.01);return i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o,[e,100*(i===0?2*r/(o+r):2*t/(i+t)),100*((i+t)/2)]},q.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),l=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];case 5:return[i,s,a]}},q.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01);let o,s;s=(2-t)*i;const a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,100*o,100*s]},q.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const r=t+i;let o;r>1&&(t/=r,i/=r);const s=Math.floor(6*e),a=1-i;o=6*e-s,1&s&&(o=1-o);const l=t+o*(a-t);let c,d,u;switch(s){default:case 6:case 0:c=a,d=l,u=t;break;case 1:c=l,d=a,u=t;break;case 2:c=t,d=a,u=l;break;case 3:c=t,d=l,u=a;break;case 4:c=l,d=t,u=a;break;case 5:c=a,d=t,u=l}return[255*c,255*d,255*u]},q.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r))]},q.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let r,o,s;return r=3.2406*e+-1.5372*t+-.4986*i,o=-.9689*e+1.8758*t+.0415*i,s=.0557*e+-.204*t+1.057*i,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*r,255*o,255*s]},q.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];return e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,[116*t-16,500*(e-t),200*(t-i)]},q.lab.xyz=function(n){let e,t,i;t=(n[0]+16)/116,e=n[1]/500+t,i=t-n[2]/200;const r=t**3,o=e**3,s=i**3;return t=r>.008856?r:(t-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,e*=95.047,t*=100,i*=108.883,[e,t,i]},q.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let r;return r=360*Math.atan2(i,t)/2/Math.PI,r<0&&(r+=360),[e,Math.sqrt(t*t+i*i),r]},q.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI;return[e,t*Math.cos(i),t*Math.sin(i)]},q.rgb.ansi16=function(n,e=null){const[t,i,r]=n;let o=e===null?q.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s},q.hsv.ansi16=function(n){return q.rgb.ansi16(q.hsv.rgb(n),n[2])},q.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)},q.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=.5*(1+~~(n>50));return[(1&e)*t*255,(e>>1&1)*t*255,(e>>2&1)*t*255]},q.ansi256.rgb=function(n){if(n>=232){const t=10*(n-232)+8;return[t,t,t]}let e;return n-=16,[Math.floor(n/36)/5*255,Math.floor((e=n%36)/6)/5*255,e%6/5*255]},q.rgb.hex=function(n){const e=(((255&Math.round(n[0]))<<16)+((255&Math.round(n[1]))<<8)+(255&Math.round(n[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},q.hex.rgb=function(n){const e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(r=>r+r).join(""));const i=parseInt(t,16);return[i>>16&255,i>>8&255,255&i]},q.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o;let a,l;return a=s<1?o/(1-s):0,l=s<=0?0:r===e?(t-i)/s%6:r===t?2+(i-e)/s:4+(e-t)/s,l/=6,l%=1,[360*l,100*s,100*a]},q.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],100*i,100*r]},q.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],100*i,100*r]},q.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[255*i,255*i,255*i];const r=[0,0,0],o=e%1*6,s=o%1,a=1-s;let l=0;switch(Math.floor(o)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=a,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=a,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=a}return l=(1-t)*i,[255*(t*r[0]+l),255*(t*r[1]+l),255*(t*r[2]+l)]},q.hcg.hsv=function(n){const e=n[1]/100,t=e+n[2]/100*(1-e);let i=0;return t>0&&(i=e/t),[n[0],100*i,100*t]},q.hcg.hsl=function(n){const e=n[1]/100,t=n[2]/100*(1-e)+.5*e;let i=0;return t>0&&t<.5?i=e/(2*t):t>=.5&&t<1&&(i=e/(2*(1-t))),[n[0],100*i,100*t]},q.hcg.hwb=function(n){const e=n[1]/100,t=e+n[2]/100*(1-e);return[n[0],100*(t-e),100*(1-t)]},q.hwb.hcg=function(n){const e=n[1]/100,t=1-n[2]/100,i=t-e;let r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],100*i,100*r]},q.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]},q.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]},q.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]},q.gray.hsl=function(n){return[0,0,n[0]]},q.gray.hsv=q.gray.hsl,q.gray.hwb=function(n){return[0,100,n[0]]},q.gray.cmyk=function(n){return[0,0,0,n[0]]},q.gray.lab=function(n){return[n[0],0,0]},q.gray.hex=function(n){const e=255&Math.round(n[0]/100*255),t=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(t.length)+t},q.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const Aa=db;function sT(n){const e=function(){const i={},r=Object.keys(Aa);for(let o=r.length,s=0;s<o;s++)i[r[s]]={distance:-1,parent:null};return i}(),t=[n];for(e[n].distance=0;t.length;){const i=t.pop(),r=Object.keys(Aa[i]);for(let o=r.length,s=0;s<o;s++){const a=r[s],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function aT(n,e){return function(t){return e(n(t))}}function lT(n,e){const t=[e[n].parent,n];let i=Aa[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=aT(Aa[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}const kd=db,cT=function(n){const e=sT(n),t={},i=Object.keys(e);for(let r=i.length,o=0;o<r;o++){const s=i[o];e[s].parent!==null&&(t[s]=lT(s,e))}return t},nr={};Object.keys(kd).forEach(n=>{nr[n]={},Object.defineProperty(nr[n],"channels",{value:kd[n].channels}),Object.defineProperty(nr[n],"labels",{value:kd[n].labels});const e=cT(n);Object.keys(e).forEach(t=>{const i=e[t];nr[n][t]=function(r){const o=function(...s){const a=s[0];if(a==null)return a;a.length>1&&(s=a);const l=r(s);if(typeof l=="object")for(let c=l.length,d=0;d<c;d++)l[d]=Math.round(l[d]);return l};return"conversion"in r&&(o.conversion=r.conversion),o}(i),nr[n][t].raw=function(r){const o=function(...s){const a=s[0];return a==null?a:(a.length>1&&(s=a),r(s))};return"conversion"in r&&(o.conversion=r.conversion),o}(i)})});var ub=p2({__proto__:null,default:nr},[nr]);function hb(n,e){if(!n)return"";const t=mb(n);if(!t)return"";if(t.space===e)return n;if(i=t,!Object.keys(ub).includes(i.space))return"";var i;const r=ub[t.space][e];return r?function(o,s){switch(s){case"hex":return`#${o}`;case"rgb":return`rgb(${o[0]}, ${o[1]}, ${o[2]})`;case"hsl":return`hsl(${o[0]}, ${o[1]}%, ${o[2]}%)`;case"hwb":return`hwb(${o[0]}, ${o[1]}, ${o[2]})`;case"lab":return`lab(${o[0]}% ${o[1]} ${o[2]})`;case"lch":return`lch(${o[0]}% ${o[1]} ${o[2]})`;default:return""}}(r(t.space==="hex"?t.hexValue:t.values),e):""}function mb(n){if(n.startsWith("#")){const t=lb(n);return{space:"hex",values:t.values,hexValue:n,alpha:t.alpha}}const e=lb(n);return e.space?e:null}class Pi extends N{constructor(e,t){super(e),m(this,"fieldView"),m(this,"labelView"),m(this,"statusView"),m(this,"fieldWrapperChildren");const i=`ck-labeled-field-view-${Tt()}`,r=`ck-labeled-field-view-status-${Tt()}`;this.fieldView=t(this,i,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,a)=>s||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new fd(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new N(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",r=>!r)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}class dT extends N{constructor(e){super(e),m(this,"focusTracker"),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new ge,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(e){this.element.value=e||e===0?e:""}}class gb extends dT{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class uT extends gb{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class hT extends gb{constructor(e,{min:t,max:i,step:r}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",r),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class mT extends N{constructor(e){super(e),m(this,"children");const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():le("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}const wd=class Yu extends N{constructor(e,t,i){super(e),m(this,"buttonView"),m(this,"panelView"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"listView"),m(this,"toolbarView"),m(this,"menuView");const r=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ie,this.focusTracker=new ge,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,i,r)=>{if(r)if(this.panelPosition==="auto"){const o=Yu._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(t,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(t,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:r,northEast:o,northWest:s,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:d}=Yu.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,r,a,l,e,o,s,c,d,t]:[r,i,l,a,e,s,o,d,c,t]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};m(wd,"defaultPanelPositions",{south:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),southMiddleEast:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/4,name:"sme"}),southMiddleWest:(n,e)=>({top:n.bottom,left:n.left-3*(e.width-n.width)/4,name:"smw"}),north:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/2,name:"n"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),northMiddleEast:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/4,name:"nme"}),northMiddleWest:(n,e)=>({top:n.top-e.height,left:n.left-3*(e.width-n.width)/4,name:"nmw"})}),m(wd,"_getOptimalPosition",kc);let gT=wd;class pb extends ${constructor(e){super(e),m(this,"arrowView"),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Ii;return e.content=Ca,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class si extends N{constructor(e){super(e),m(this,"children");const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class Ta extends N{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class Ea extends N{constructor(e,t=new fd){super(e),m(this,"labelView"),m(this,"items"),m(this,"children");const i=this.bindTemplate,r=new rr(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:t.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof Ta));e&&e.focus()}}}class rr extends N{constructor(e){super(e),m(this,"focusables"),m(this,"items"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"_focusCycler"),m(this,"_listItemGroupToChangeListeners",new WeakMap);const t=this.bindTemplate;this.focusables=new St,this.items=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this._focusCycler=new ct({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Ea?this._registerFocusableItemsGroup(e):e instanceof si&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const i of t.removed)i instanceof Ea?this._deregisterFocusableItemsGroup(i):i instanceof si&&this._deregisterFocusableListItem(i);for(const i of Array.from(t.added).reverse())i instanceof Ea?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(const r of i.removed)this._deregisterFocusableListItem(r);for(const r of Array.from(i.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((r,o)=>{const s=t!==void 0?t+o:void 0;this._registerFocusableListItem(r,s)});const i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const fb=xn("px"),pT={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},or=class so extends N{constructor(e){super(e),m(this,"content"),m(this,"_pinWhenIsVisibleCallback"),m(this,"_resizeObserver");const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",i=>`ck-balloon-panel_${i}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",fb),left:t.to("left",fb)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const t=Sa(e.target);if(t&&!Ki(t))return!1;this.show();const i=so.defaultPositions,r=Object.assign({},{element:this.element,positions:[i.southArrowNorth,i.southArrowNorthMiddleWest,i.southArrowNorthMiddleEast,i.southArrowNorthWest,i.southArrowNorthEast,i.northArrowSouth,i.northArrowSouthMiddleWest,i.northArrowSouthMiddleEast,i.northArrowSouthWest,i.northArrowSouthEast,i.viewportStickyNorth],limiter:R.document.body,fitInViewport:!0},e),o=so._getOptimalPosition(r)||pT,s=parseInt(o.left),a=parseInt(o.top),l=o.name,c=o.config||{},{withArrow:d=!0}=c;return this.top=a,this.left=s,this.position=l,this.withArrow=d,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let t=Sa(e.target);const i=e.limiter?Sa(e.limiter):R.document.body;if(this.listenTo(R.document,"scroll",(r,o)=>{const s=o.target,a=t&&s.contains(t),l=i&&s.contains(i);!a&&!l&&t&&i||this.attachTo(e)},{useCapture:!0}),this.listenTo(R.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(t&&Ye(t)&&(t=t.parentElement),t)){const r=()=>{Ki(t)||this.unpin()};this._resizeObserver=new So(t,r)}return!0}_stopPinning(){this.stopListening(R.document,"scroll"),this.stopListening(R.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:t=so.arrowSideOffset,heightOffset:i=so.arrowHeightOffset,stickyVerticalOffset:r=so.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(l,c)=>({top:s(l,c),left:l.left-t,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(l,c)=>({top:s(l,c),left:l.left-.25*c.width-t,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(l,c)=>({top:s(l,c),left:l.left-c.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(l,c)=>({top:s(l,c),left:l.left-.75*c.width+t,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(l,c)=>({top:s(l,c),left:l.left-c.width+t,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(l,c)=>({top:s(l,c),left:l.left+l.width/2-t,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(l,c)=>({top:s(l,c),left:l.left+l.width/2-.25*c.width-t,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(l,c)=>({top:s(l,c),left:l.left+l.width/2-c.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(l,c)=>({top:s(l,c),left:l.left+l.width/2-.75*c.width+t,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(l,c)=>({top:s(l,c),left:l.left+l.width/2-c.width+t,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(l,c)=>({top:s(l,c),left:l.right-t,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(l,c)=>({top:s(l,c),left:l.right-.25*c.width-t,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(l,c)=>({top:s(l,c),left:l.right-c.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(l,c)=>({top:s(l,c),left:l.right-.75*c.width+t,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(l,c)=>({top:s(l,c),left:l.right-c.width+t,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:l=>({top:a(l),left:l.left-t,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.left-.25*c.width-t,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(l,c)=>({top:a(l),left:l.left-c.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.left-.75*c.width+t,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(l,c)=>({top:a(l),left:l.left-c.width+t,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:l=>({top:a(l),left:l.left+l.width/2-t,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.left+l.width/2-.25*c.width-t,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.left+l.width/2-.75*c.width+t,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width+t,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:l=>({top:a(l),left:l.right-t,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.right-.25*c.width-t,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(l,c)=>({top:a(l),left:l.right-c.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.right-.75*c.width+t,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(l,c)=>({top:a(l),left:l.right-c.width+t,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(l,c)=>({top:l.top+l.height/2-c.height/2,left:l.left-c.width-i,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(l,c)=>({top:l.top+l.height/2-c.height/2,left:l.right+i,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(l,c,d,u)=>{const h=u||d;return l.getIntersection(h)?h.height-l.height>r?null:{top:h.top+r,left:l.left+l.width/2-c.width/2,name:"arrowless",config:{withArrow:!1,...o}}:null}};function s(l,c){return l.top-c.height-i}function a(l){return l.bottom+i}}};m(or,"arrowSideOffset",25),m(or,"arrowHeightOffset",10),m(or,"stickyVerticalOffset",20),m(or,"_getOptimalPosition",kc),m(or,"defaultPositions",or.generatePositions());let kt=or;function Sa(n){return vn(n)?n:ra(n)?n.commonAncestorContainer:typeof n=="function"?Sa(n()):null}class _d extends N{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class fT extends N{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function vd(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const yd={alignLeft:Mf,bold:Vf,importExport:tA,paragraph:yA,plus:TA,text:jA,threeVerticalDots:gd,pilcrow:AA,dragIndicator:GC};class ts extends N{constructor(e,t){super(e),m(this,"options"),m(this,"items"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"itemsView"),m(this,"children"),m(this,"focusables"),m(this,"_focusCycler"),m(this,"_behavior");const i=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new bT(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new ct({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const s=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact"),i.if("isGrouping","ck-toolbar_grouping"),i.if("isVertical","ck-toolbar_vertical")];var a;this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:i.to("role"),"aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:(a=this,a.bindTemplate.to(l=>{l.target===a.element&&l.preventDefault()}))}}),this._behavior=this.options.shouldGroupWhenFull?new kb(this):new bb(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new kb(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new bb(this),this._behavior.render(this)))}_buildItemsFromConfig(e,t,i){const r=vd(e),o=i||r.removeItems;return this._cleanItemsConfiguration(r.items,t,o).map(s=>mi(s)?this._createNestedToolbarDropdown(s,t,o):s==="|"?new _d:s==="-"?new fT:t.create(s)).filter(s=>!!s)}_cleanItemsConfiguration(e,t,i){const r=e.filter((o,s,a)=>o==="|"||i.indexOf(o)===-1&&(o==="-"?!this.options.shouldGroupWhenFull||(le("toolbarview-line-break-ignored-when-grouping-items",a),!1):!(!mi(o)&&!t.has(o))||(le("toolbarview-item-unavailable",{item:o}),!1)));return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){const t=s=>s!=="-"&&s!=="|",i=e.length,r=e.findIndex(t);if(r===-1)return[];const o=i-e.slice().reverse().findIndex(t);return e.slice(r,o).filter((s,a,l)=>t(s)?!0:!(a>0&&l[a-1]===s))}_createNestedToolbarDropdown(e,t,i){let{label:r,icon:o,items:s,tooltip:a=!0,withText:l=!1}=e;if(s=this._cleanItemsConfiguration(s,t,i),!s.length)return null;const c=mt(this.locale);return r||le("toolbarview-nested-toolbar-dropdown-missing-label",e),c.class="ck-toolbar__nested-toolbar-dropdown",c.buttonView.set({label:r,tooltip:a,withText:!!l}),o!==!1?c.buttonView.icon=yd[o]||o||gd:c.buttonView.withText=!0,is(c,()=>c.toolbarView._buildItemsFromConfig(s,t,i)),c}}class bT extends N{constructor(e){super(e),m(this,"children"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class bb{constructor(e){m(this,"type","static"),e.isGrouping=!1,e.itemsView.children.bindTo(e.items).using(t=>t),e.focusables.bindTo(e.items).using(t=>$r(t)?t:null)}render(){}destroy(){}}class kb{constructor(e){m(this,"type","dynamic"),m(this,"view"),m(this,"viewChildren"),m(this,"viewFocusables"),m(this,"viewItemsView"),m(this,"viewFocusTracker"),m(this,"viewLocale"),m(this,"ungroupedItems"),m(this,"groupedItems"),m(this,"groupedItemsDropdown"),m(this,"resizeObserver",null),m(this,"cachedPadding",null),m(this,"shouldUpdateGroupingOnNextResize",!1),m(this,"viewElement"),this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.view.isGrouping=!0,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{const r=i.index,o=Array.from(i.added);for(const s of i.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=r;s<r+o.length;s++){const a=o[s-r];s>this.ungroupedItems.length?this.groupedItems.add(a,s-this.ungroupedItems.length):this.ungroupedItems.add(a,s)}this._updateGrouping()})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const e=this.view;if(e.items.length){for(let t=0;t<e.items.length;t++){const i=[...e.items][t];this.ungroupedItems.add(i,t)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Ki(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new K(e.lastChild),r=new K(e);if(!this.cachedPadding){const o=R.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[s])}return t==="ltr"?i.right>r.right-this.cachedPadding:i.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new So(this.viewElement,t=>{e&&e===t.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new _d),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=mt(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",is(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:gd}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{$r(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class sr extends N{constructor(e,t){super(e),m(this,"children"),m(this,"actionView"),m(this,"arrowView"),m(this,"keystrokes"),m(this,"focusTracker");const i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Ie,this.focusTracker=new ge,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new $;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new $,t=e.bindTemplate;return e.icon=Ca,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function mt(n,e=pb){const t=typeof e=="function"?new e(n):e,i=new mT(n),r=new gT(n,t,i);return t.bind("isEnabled").to(r),t instanceof sr?t.arrowView.bind("isOn").to(r,"isOpen"):t.bind("isOn").to(r,"isOpen"),function(o){(function(s){Tn({emitter:s,activator:()=>s.isRendered&&s.isOpen,callback:()=>{s.isOpen=!1},contextElements:()=>[s.element,...vb(s.focusTracker).filter(a=>!s.element.contains(a))]})})(o),function(s){s.on("execute",a=>{a.source instanceof Xo||(s.isOpen=!1)})}(o),function(s){s.focusTracker.on("change:isFocused",(a,l,c)=>{!c&&s.isOpen&&(s.isOpen=!1)})}(o),function(s){s.keystrokes.set("arrowdown",(a,l)=>{s.isOpen&&(s.panelView.focus(),l())}),s.keystrokes.set("arrowup",(a,l)=>{s.isOpen&&(s.panelView.focusLast(),l())})}(o),function(s){s.on("change:isOpen",(a,l,c)=>{c||s.focusTracker.elements.some(d=>d.contains(R.document.activeElement))&&s.buttonView.focus()})}(o),function(s){s.on("change:isOpen",(a,l,c)=>{c&&s.panelView.focus()},{priority:"low"})}(o)}(r),r}function is(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?wb(n,e,t):n.once("change:isOpen",()=>wb(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&Ia(n,()=>n.toolbarView.items.find(i=>i.isOn))}function wb(n,e,t){const i=n.locale,r=i.t,o=n.toolbarView=new ts(i),s=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||r("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),s instanceof St?o.items.bindTo(s).using(a=>a):o.items.addMany(s),n.panelView.children.add(o),n.focusTracker.add(o),o.items.delegate("execute").to(n)}function En(n,e,t={}){n.isOpen?_b(n,e,t):n.once("change:isOpen",()=>_b(n,e,t),{priority:"highest"}),Ia(n,()=>n.listView.items.find(i=>i instanceof si&&i.children.first.isOn))}function _b(n,e,t){const i=n.locale,r=n.listView=new rr(i),o=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel,r.role=t.role,yb(n,r.items,o,i),n.panelView.children.add(r),r.items.delegate("execute").to(n)}function Ia(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():le("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:wn.low-10})}function vb(n){return[...n.elements,...n.externalViews.flatMap(e=>vb(e.focusTracker))]}function yb(n,e,t,i){e.on("change",()=>{const r=[...e].reduce((s,a)=>(a instanceof si&&a.children.first instanceof Hr&&s.push(a.children.first),s),[]),o=r.some(s=>s.isToggleable);r.forEach(s=>{s.hasCheckSpace=o})}),e.bindTo(t).using(r=>{if(r.type==="separator")return new Ta(i);if(r.type==="group"){const o=new Ea(i);return o.set({label:r.label}),yb(n,o.items,r.items,i),o.items.delegate("execute").to(n),o}if(r.type==="button"||r.type==="switchbutton"){const o=r.model.role==="menuitemcheckbox"||r.model.role==="menuitemradio",s=new si(i);let a;return r.type==="button"?(a=new Hr(i),a.set({isToggleable:o})):a=new Xo(i),a.bind(...Object.keys(r.model)).to(r.model),a.delegate("execute").to(s),s.children.add(a),s}return null})}const Sn=(n,e,t)=>{const i=new uT(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},xb=(n,e,t)=>{const i=new hT(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},kT=(n,e,t)=>{const i=mt(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isEnabled").to(n),i},ns=(n,e=0,t=1)=>n>t?t:n<e?e:n,wt=(n,e=0,t=Math.pow(10,e))=>Math.round(t*n)/t,xd=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?wt(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?wt(parseInt(n.substring(6,8),16)/255,2):1}),Cd=n=>{const{h:e,s:t,l:i}=(({h:r,s:o,v:s,a})=>{const l=(200-o)*s/100;return{h:wt(r),s:wt(l>0&&l<200?o*s/100/(l<=100?l:200-l)*100:0),l:wt(l/2),a:wt(a,2)}})(n);return`hsl(${e}, ${t}%, ${i}%)`},wT=({h:n,s:e,v:t,a:i})=>{n=n/360*6,e/=100,t/=100;const r=Math.floor(n),o=t*(1-e),s=t*(1-(n-r)*e),a=t*(1-(1-n+r)*e),l=r%6;return{r:wt(255*[t,s,o,o,a,t][l]),g:wt(255*[a,t,t,s,o,o][l]),b:wt(255*[o,o,a,t,t,s][l]),a:wt(i,2)}},Pa=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},_T=({r:n,g:e,b:t,a:i})=>{const r=i<1?Pa(wt(255*i)):"";return"#"+Pa(n)+Pa(e)+Pa(t)+r},vT=({r:n,g:e,b:t,a:i})=>{const r=Math.max(n,e,t),o=r-Math.min(n,e,t),s=o?r===n?(e-t)/o:r===e?2+(t-n)/o:4+(n-e)/o:0;return{h:wt(60*(s<0?s+6:s)),s:wt(r?o/r*100:0),v:wt(r/255*100),a:i}},Cb=(n,e)=>{if(n===e)return!0;for(const t in n)if(n[t]!==e[t])return!1;return!0},Ab={},Tb=n=>{let e=Ab[n];return e||(e=document.createElement("template"),e.innerHTML=n,Ab[n]=e),e},Ad=(n,e,t)=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let Ur=!1;const Td=n=>"touches"in n,Eb=(n,e)=>{const t=Td(e)?e.touches[0]:e,i=n.el.getBoundingClientRect();Ad(n.el,"move",n.getMove({x:ns((t.pageX-(i.left+window.pageXOffset))/i.width),y:ns((t.pageY-(i.top+window.pageYOffset))/i.height)}))};class Sb{constructor(e,t,i,r){const o=Tb(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const s=e.querySelector(`[part=${t}]`);s.addEventListener("mousedown",this),s.addEventListener("touchstart",this),s.addEventListener("keydown",this),this.el=s,this.xy=r,this.nodes=[s.firstChild,s]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(Ur?"touchmove":"mousemove",this),t(Ur?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!(t=>!(Ur&&!Td(t)||(Ur||(Ur=Td(t)),0)))(e)||!Ur&&e.button!=0)return;this.el.focus(),Eb(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),Eb(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":((t,i)=>{const r=i.keyCode;r>40||t.xy&&r<37||r<33||(i.preventDefault(),Ad(t.el,"move",t.getMove({x:r===39?.01:r===37?-.01:r===34?.05:r===33?-.05:r===35?1:r===36?-1:0,y:r===40?.01:r===38?-.01:0},!0)))})(this,e)}}style(e){e.forEach((t,i)=>{for(const r in t)this.nodes[i].style.setProperty(r,t[r])})}}class yT extends Sb{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:e/360*100+"%",color:Cd({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${wt(e)}`)}getMove(e,t){return{h:t?ns(this.h+360*e.x,0,360):360*e.x}}}class xT extends Sb{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:100-e.v+"%",left:`${e.s}%`,color:Cd(e)},{"background-color":Cd({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${wt(e.s)}%, Brightness ${wt(e.v)}%`)}getMove(e,t){return{s:t?ns(this.hsva.s+100*e.x,0,100):100*e.x,v:t?ns(this.hsva.v-100*e.y,0,100):Math.round(100-100*e.y)}}}const Ma=Symbol("same"),Ed=Symbol("color"),Ib=Symbol("hsva"),Sd=Symbol("update"),Pb=Symbol("parts"),Mb=Symbol("css"),Vb=Symbol("sliders");class CT extends HTMLElement{static get observedAttributes(){return["color"]}get[Mb](){return[':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',"[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}get[Vb](){return[xT,yT]}get color(){return this[Ed]}set color(e){if(!this[Ma](e)){const t=this.colorModel.toHsva(e);this[Sd](t),this[Ed]=e}}constructor(){super();const e=Tb(`<style>${this[Mb].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[Pb]=this[Vb].map(i=>new i(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){const r=this.colorModel.fromAttr(i);this[Ma](r)||(this.color=r)}handleEvent(e){const t=this[Ib],i={...t,...e.detail};let r;this[Sd](i),Cb(i,t)||this[Ma](r=this.colorModel.fromHsva(i))||(this[Ed]=r,Ad(this,"color-changed",{value:r}))}[Ma](e){return this.color&&this.colorModel.equal(e,this.color)}[Sd](e){this[Ib]=e,this[Pb].forEach(t=>t.update(e))}}const AT={defaultColor:"#000",toHsva:n=>vT(xd(n)),fromHsva:({h:n,s:e,v:t})=>_T(wT({h:n,s:e,v:t,a:1})),equal:(n,e)=>n.toLowerCase()===e.toLowerCase()||Cb(xd(n),xd(e)),fromAttr:n=>n};class TT extends CT{get colorModel(){return AT}}class ET extends N{constructor(e,t={}){super(e),m(this,"hexInputRow"),m(this,"_debounceColorPickerEvent"),m(this,"_config"),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const i=this.createCollection();t.hideInput||i.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:i}),this._config=t,this._debounceColorPickerEvent=gi(r=>{this.set("color",r),this.fire("colorSelected",{color:this.color})},150,{leading:!0}),this.on("set:color",(r,o,s)=>{r.return=hb(s,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Id(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Id(this.color)!=Id(this._hexColor)&&(this.color=this._hexColor)})}render(){var e,t;if(super.render(),e="hex-color-picker",t=TT,customElements.get(e)===void 0&&customElements.define(e,t),this.picker=R.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const i=document.createElement("style");i.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(i)}this.picker.addEventListener("color-changed",i=>{const r=i.detail.value;this._debounceColorPickerEvent(r)})}focus(){!this._config.hideInput&&(W.isGecko||W.isiOS||W.isSafari||W.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const e=[...this.picker.shadowRoot.children].filter(t=>t.getAttribute("role")==="slider").map(t=>new ST(t));this.slidersView=this.createCollection(),e.forEach(t=>{this.slidersView.add(t)})}_createInputRow(){const e=this._createColorInput();return new PT(this.locale,e)}_createColorInput(){const e=new Pi(this.locale,Sn),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",i=>e.isFocused?e.fieldView.value:i.startsWith("#")?i.substring(1):i),e.fieldView.on("input",()=>{const i=e.fieldView.element.value;if(i){const r=Lb(i);r&&this._debounceColorPickerEvent(r)}}),e}isValid(){const{t:e}=this.locale;return!!this._config.hideInput||(this.resetValidationStatus(),!!this.hexInputRow.getParsedColor()||(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Id(n){let e=function(t){if(!t)return"";const i=mb(t);return i?i.space==="hex"?i.hexValue:hb(t,"hex"):"#000"}(n);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class ST extends N{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class IT extends N{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class PT extends N{constructor(e,t){super(e),m(this,"children"),m(this,"inputView"),this.inputView=t,this.children=this.createCollection([new IT,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return Lb(this.inputView.fieldView.element.value)}}function Lb(n){if(!n)return null;const e=n.trim().replace(/^#/,"");return[3,4,6,8].includes(e.length)&&/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?`#${e}`:null}class MT extends xe(ot){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(i=>i.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}class VT extends N{constructor(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e),m(this,"items"),m(this,"colorDefinitions"),m(this,"focusTracker"),m(this,"columns"),m(this,"documentColors"),m(this,"documentColorsCount"),m(this,"staticColorsGrid"),m(this,"documentColorsGrid"),m(this,"colorPickerButtonView"),m(this,"removeColorButtonView"),m(this,"_focusables"),m(this,"_documentColorsLabel"),m(this,"_removeButtonLabel"),m(this,"_colorPickerLabel");const d=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new MT,this.documentColorsCount=s,this._focusables=c,this._removeButtonLabel=r,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",d.if("isVisible","ck-hidden",u=>!u)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const i=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const o of i.getRoots()){const s=e.createRangeIn(o);for(const a of s.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=ri.bind(this.documentColors,this.documentColors),t=new N(this.locale);t.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new $,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:UC,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new $;return e.set({withText:!0,icon:dd,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new sb(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,i)=>{this.fire("execute",{value:i.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=ri.bind(this.documentColors,this.documentColors),t=new sb(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{var r;const o=new ob;return o.set({color:i.color,hasBorder:(r=i.options)==null?void 0:r.hasBorder}),i.label&&o.set({label:i.label,tooltip:!0}),o.on("execute",()=>{this.fire("execute",{value:i.color,source:"documentColorsGrid"})}),o}),this.documentColors.on("change:isEmpty",(i,r,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class LT extends N{constructor(e,{focusTracker:t,focusables:i,keystrokes:r,colorPickerViewConfig:o}){super(e),m(this,"items"),m(this,"colorPickerView"),m(this,"saveButtonView"),m(this,"cancelButtonView"),m(this,"actionBarView"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"_focusables"),m(this,"_colorPickerViewConfig"),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._colorPickerViewConfig=o;const s=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",s.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();const e=new ET(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,i,r)=>{e.color=r}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const i=new N,r=this.createCollection();return r.add(e),r.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:r}),i}_createActionButtons(){const e=this.locale,t=e.t,i=new $(e),r=new $(e);return i.set({icon:Lf,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),r.set({icon:cd,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),r.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:i,cancelButtonView:r}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}class Ob extends N{constructor(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"items"),m(this,"colorGridsFragmentView"),m(this,"colorPickerFragmentView"),m(this,"_focusCycler"),m(this,"_focusables"),m(this,"_colorPickerViewConfig"),this.items=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this._focusables=new St,this._colorPickerViewConfig=l,this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new VT(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:o,documentColorsCount:s,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new LT(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,d,u)=>{this.colorGridsFragmentView.set("selectedColor",u),this.colorPickerFragmentView.set("selectedColor",u)}),this.colorGridsFragmentView.on("change:selectedColor",(c,d,u)=>{this.set("selectedColor",u)}),this.colorPickerFragmentView.on("change:selectedColor",(c,d,u)=>{this.set("selectedColor",u)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){this.colorPickerFragmentView.colorPickerView&&!this._isColorPickerFragmentVisible&&(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class OT{constructor(e){m(this,"editor"),m(this,"_components",new Map),this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(Pd(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new v("componentfactory-item-missing",this,{name:e});return this._components.get(Pd(e)).callback(this.editor.locale)}has(e){return this._components.has(Pd(e))}}function Pd(n){return String(n).toLowerCase()}const Nb="ck-tooltip",Va=class Bt extends Mt(){constructor(e){if(super(),m(this,"tooltipTextView"),m(this,"balloonPanelView"),m(this,"_currentElementWithTooltip",null),m(this,"_currentTooltipPosition",null),m(this,"_mutationObserver",null),m(this,"_pinTooltipDebounced"),m(this,"_unpinTooltipDebounced"),m(this,"_watchdogExcluded"),Bt._editors.add(e),Bt._instance)return Bt._instance;Bt._instance=this,this.tooltipTextView=new N(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new kt(e.locale),this.balloonPanelView.class=Nb,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=function(t){const i=new MutationObserver(()=>{t()});return{attach(r){i.observe(r,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){i.disconnect()}}}(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=gi(this._pinTooltip,600),this._unpinTooltipDebounced=gi(this._unpinTooltip,400),this.listenTo(R.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(R.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(R.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(R.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(R.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(R.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Bt._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Bt._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Bt._instance=null)}static getPositioningFunctions(e){const t=Bt.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const i=Md(t);i?i!==this._currentElementWithTooltip?(this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")||i.matches("[data-cke-tooltip-instant]")?this._pinTooltip(i,Vd(i)):this._pinTooltipDebounced(i,Vd(i))):this._unpinTooltipDebounced.cancel():e.name==="focus"&&this._unpinTooltip()}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!vn(t))return;const r=this.balloonPanelView.element,o=r&&(r===i||r.contains(i)),s=!o&&t===r;if(o)return void this._unpinTooltipDebounced.cancel();if(!s&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const a=Md(t),l=Md(i);(s||a&&a!==l)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||a&&a.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:r}){this._unpinTooltip();const o=Ce(Bt._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[Nb,r].filter(s=>s).join(" "),this.balloonPanelView.pin({target:e,positions:Bt.getPositioningFunctions(i)}),this._mutationObserver.attach(e);for(const s of Bt._editors)this.listenTo(s.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Bt._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=Vd(this._currentElementWithTooltip);Ki(this._currentElementWithTooltip)&&e.text?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Bt.getPositioningFunctions(e.position)}):this._unpinTooltip()}};m(Va,"defaultBalloonPositions",kt.generatePositions({heightOffset:5,sideOffset:13})),m(Va,"_editors",new Set),m(Va,"_instance",null);let NT=Va;function Md(n){return vn(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Vd(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}class Rb extends Mt(){constructor(e,t={}){super(),m(this,"editor"),m(this,"_balloonView",null),m(this,"_showBalloonThrottled",Pr(()=>this._showBalloon(),50,{leading:!0})),m(this,"_lastFocusedEditableElement",null),m(this,"_balloonClass"),this.editor=e,this._balloonClass=t.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(t,i,r)=>{this._updateLastFocusedEditableElement(),r?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(t,i,r)=>{this._updateLastFocusedEditableElement(),r&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,t=new kt,i=this._createBadgeContent();return t.content.add(i),this._balloonClass&&(t.class=this._balloonClass),e.ui.view.body.add(t),t}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),t=e.side==="right"?zb(this._lastFocusedEditableElement,i=e,(r,o)=>r.left+r.width-o.width-i.horizontalOffset):function(r,o){return zb(r,o,s=>s.left+o.horizontalOffset)}(this._lastFocusedEditableElement,e);var i;return{target:this._lastFocusedEditableElement,positions:[t]}}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i)return void(this._lastFocusedEditableElement=null);const r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=r[0]}}function zb(n,e,t){return(i,r)=>{const o=new K(n);if(o.width<350||o.height<50)return null;let s;s=e.position==="inside"?o.bottom-r.height:o.bottom-r.height/2,s-=e.verticalOffset;const a=t(o,r),l=i.clone().moveTo(a,s).getIntersection(r.clone().moveTo(a,s)).getVisible();return!l||l.getArea()<r.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}class RT extends Rb{constructor(e){super(e,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const e=this.editor;if(e.config.get("ui.poweredBy.forceVisible"))return!0;const t=e.config.get("licenseKey");if(t=="GPL")return!0;const i=yc(t.split(".")[1]);return!i||!i.whiteLabel}_createBadgeContent(){return new zT(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const e=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},i=t.position||e.position,r=i==="inside"?5:e.verticalOffset;return{position:i,side:t.side||e.side,label:t.label===void 0?"Powered by":t.label,verticalOffset:t.verticalOffset!==void 0?t.verticalOffset:r,horizontalOffset:t.horizontalOffset!==void 0?t.horizontalOffset:e.horizontalOffset,forceVisible:!!t.forceVisible}}}class zT extends N{constructor(e,t){super(e);const i=new Ii,r=this.bindTemplate;i.set({content:EA,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:r.to(o=>o.preventDefault())}}]})}}class DT extends Rb{constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"}),m(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const e=Db(this.editor.config.get("licenseKey"));return!!(e&&this.licenseTypeMessage[e])}_createBadgeContent(){const e=Db(this.editor.config.get("licenseKey"));return new BT(this.editor.locale,this.licenseTypeMessage[e])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{};return{position:t.position||e.position,side:(t.side||e.side)==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class BT extends N{constructor(e,t){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[t]}]})}}function Db(n){if(n=="GPL")return"GPL";const e=yc(n.split(".")[1]);return e?e.licenseType||"production":null}const Bb={POLITE:"polite",ASSERTIVE:"assertive"};class FT{constructor(e){m(this,"editor"),m(this,"view"),this.editor=e,e.once("ready",()=>{for(const t of Object.values(Bb))this.announce("",t)})}announce(e,t=Bb.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new jT(i.locale),i.ui.view.body.add(this.view));const{politeness:r,isUnsafeHTML:o}=typeof t=="string"?{politeness:t}:t;let s=this.view.regionViews.find(a=>a.politeness===r);s||(s=new $T(i,r),this.view.regionViews.add(s)),s.announce({announcement:e,isUnsafeHTML:o})}}class jT extends N{constructor(e){super(e),m(this,"regionViews"),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class $T extends N{constructor(e,t){super(e.locale),m(this,"politeness"),m(this,"_domConverter"),m(this,"_pruneAnnouncementsInterval"),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;const i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}}class Mi extends si{constructor(e,t){super(e);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const Wr={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(n.isFocusBorderEnabled||n.isOpen){if(n.isOpen)for(const t of n.menus){const i=e.path[0],r=i instanceof Mi&&i.children.first===t;t.isOpen=(e.path.includes(t)||r)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";function t(i,r){const o=n.children.getIndex(i),s=i.isOpen,a=n.children.length,l=n.children.get((o+a+r)%a);i.isOpen=!1,s&&(l.isOpen=!0),l.buttonView.focus()}n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)})},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(r=>e.source.parentMenuView===r.parentMenuView&&e.source!==r&&r.isOpen).forEach(r=>{r.isOpen=!1})})},closeOnClickOutside(n){Tn({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,r)=>{r||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},In={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isEnabled&&n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement===n.buttonView.element&&n.isEnabled&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{i||e.source!==n.parentMenuView||(n.isOpen=!1)})}},HT={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-5,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-5,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+5,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+5,name:"wn"})},UT=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function WT(n){let e;return e="items"in n&&n.items?{items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n}:{items:Wt(UT),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n},e}function qT({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){const r=Wt(n);return Fb(n,r,i),function(o,s){const a=s.removeItems,l=[];s.items=s.items.filter(({menuId:c})=>!a.includes(c)||(l.push(c),!1)),qr(s.items,c=>{c.groups=c.groups.filter(({groupId:d})=>!a.includes(d)||(l.push(d),!1));for(const d of c.groups)d.items=d.items.filter(u=>{const h=Hb(u);return!a.includes(h)||(l.push(h),!1)})});for(const c of a)l.includes(c)||le("menu-bar-item-could-not-be-removed",{menuBarConfig:o,itemName:c})}(n,r),Fb(n,r,r.addItems),function(o,s,a){qr(s.items,l=>{for(const c of l.groups)c.items=c.items.filter(d=>{const u=typeof d=="string"&&!a.has(d);return u&&!s.isUsingDefaultConfig&&le("menu-bar-item-unavailable",{menuBarConfig:o,parentMenuConfig:Wt(l),componentName:d}),!u})})}(n,r,t),$b(n,r),function(o,s){const a=s.t,l={File:a({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:a({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:a({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:a({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:a({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:a({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:a({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:a({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:a({string:"Font",id:"MENU_BAR_MENU_FONT"})};qr(o.items,c=>{c.label in l&&(c.label=l[c.label])})}(r,e),r}function Fb(n,e,t){const i=[];if(t.length!=0){for(const o of t){const s=ZT(o.position),a=KT(o.position);if(typeof(r=o)=="object"&&"menu"in r)if(a){const l=e.items.findIndex(c=>c.menuId===a);l!=-1?s==="before"?(e.items.splice(l,0,o.menu),i.push(o)):s==="after"&&(e.items.splice(l+1,0,o.menu),i.push(o)):jb(e,o.menu,a,s)&&i.push(o)}else s==="start"?(e.items.unshift(o.menu),i.push(o)):s==="end"&&(e.items.push(o.menu),i.push(o));else GT(o)?qr(e.items,l=>{if(l.menuId===a)s==="start"?(l.groups.unshift(o.group),i.push(o)):s==="end"&&(l.groups.push(o.group),i.push(o));else{const c=l.groups.findIndex(d=>d.groupId===a);c!==-1&&(s==="before"?(l.groups.splice(c,0,o.group),i.push(o)):s==="after"&&(l.groups.splice(c+1,0,o.group),i.push(o)))}}):jb(e,o.item,a,s)&&i.push(o)}var r;for(const o of t)i.includes(o)||le("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:o})}}function jb(n,e,t,i){let r=!1;return qr(n.items,o=>{for(const{groupId:s,items:a}of o.groups){if(r)return;if(s===t)i==="start"?(a.unshift(e),r=!0):i==="end"&&(a.push(e),r=!0);else{const l=a.findIndex(c=>Hb(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),r=!0):i==="after"&&(a.splice(l+1,0,e),r=!0))}}}),r}function $b(n,e){const t=e.isUsingDefaultConfig;let i=!1;e.items=e.items.filter(r=>!!r.groups.length||(Ld(n,r,t),!1)),e.items.length?(qr(e.items,r=>{r.groups=r.groups.filter(o=>!!o.items.length||(i=!0,!1));for(const o of r.groups)o.items=o.items.filter(s=>!(Ub(s)&&!s.groups.length)||(Ld(n,s,t),i=!0,!1))}),i&&$b(n,e)):Ld(n,n,t)}function Ld(n,e,t){t||le("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function qr(n,e){if(Array.isArray(n))for(const i of n)t(i);function t(i){e(i);for(const r of i.groups)for(const o of r.items)Ub(o)&&t(o)}}function GT(n){return typeof n=="object"&&"group"in n}function ZT(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function KT(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function Hb(n){return typeof n=="string"?n:n.menuId}function Ub(n){return typeof n=="object"&&"menuId"in n}class YT extends xe(){constructor(e){super(),m(this,"editor"),m(this,"componentFactory"),m(this,"focusTracker"),m(this,"tooltipManager"),m(this,"poweredBy"),m(this,"evaluationBadge"),m(this,"ariaLiveAnnouncer"),m(this,"isReady",!1),m(this,"_editableElementsMap",new Map),m(this,"_focusableToolbarDefinitions",[]),m(this,"_extraMenuBarElements",[]),m(this,"_lastFocusedForeignElement",null);const t=e.editing.view;this.editor=e,this.componentFactory=new OT(e),this.focusTracker=new ge,this.tooltipManager=new NT(e),this.poweredBy=new RT(e),this.evaluationBadge=new DT(e),this.ariaLiveAnnouncer=new FT(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}initMenuBar(e){const t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);const i=WT(this.editor.config.get("menuBar")||{});e.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const e=this.editor;let t;e.keystrokes.set("Alt+F10",(i,r)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();o&&t||(t=this._getFocusableCandidateToolbarDefinitions());for(let s=0;s<t.length;s++){const a=t.shift();if(t.push(a),a!==o&&this._focusFocusableCandidateToolbar(a)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(i,r)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:i,options:r}=t;(Ki(i.element)||r.beforeFocus)&&e.push(t)}return e.sort((t,i)=>Wb(t)-Wb(i)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),!!Ki(t.element)&&(t.focus(),!0)}_handleScrollToTheSelection(e,t){const i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const t of e)this.focusTracker.add(t.element);e.on("add",(t,i)=>{this.focusTracker.add(i.element)}),e.on("remove",(t,i)=>{this.focusTracker.remove(i.element)})}}function Wb(n){const{toolbarView:e,options:t}=n;let i=10;return Ki(e.element)&&i--,t.isContextual&&(i-=2),i}class QT extends N{constructor(e){super(e),m(this,"body"),m(this,"menuBarView"),m(this,"toolbar"),this.body=new XA(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class JT extends N{constructor(e,t,i){super(e),m(this,"name",null),m(this,"_editingView"),m(this,"_editableElement"),m(this,"_hasExternalElement"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;function t(i){e.change(r=>{const o=e.document.getRoot(i.name);r.addClass(i.isFocused?"ck-focused":"ck-blurred",o),r.removeClass(i.isFocused?"ck-blurred":"ck-focused",o)})}e.isRenderingInProgress?function i(r){e.once("change:isRenderingInProgress",(o,s,a)=>{a?i(r):t(r)})}(this):t(this)}}class XT extends JT{constructor(e,t,i,r={}){super(e,t,i),m(this,"_options"),this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(t=>{const i=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){const e=this.locale.t,t=this._options.label,i=this._editableElement,r=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[r];if(typeof t=="function")return t(this);if(i){const o=i.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}}class La extends N{constructor(e,t={}){super(e),m(this,"children");const i=this.bindTemplate;this.set("class",["ck","ck-form__row",...Ne(t.class||[])]),this.children=this.createCollection(),t.children&&t.children.forEach(r=>this.children.add(r)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:i.to("class",r=>r.join(" ")),role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}class qb extends jg{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class en extends xe(){constructor(e,t){super(),t&&tg(this,t),e&&this.set(e)}}const Oa=xn("px");class Vi extends C{constructor(e){super(e),m(this,"positionLimiter"),m(this,"visibleStack"),m(this,"_viewToStack",new Map),m(this,"_idToStack",new Map),m(this,"_view",null),m(this,"_rotatorView",null),m(this,"_fakePanelsView",null),this.positionLimiter=()=>{const t=this.editor.editing.view,i=t.document.selection.editableElement;return i?t.domConverter.mapViewToDom(i.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new v("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new v("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new v("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new kt(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(t=>t[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new eE(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,r)=>!r&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,r)=>{if(r<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new tE(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}}class eE extends N{constructor(e){super(e),m(this,"focusTracker"),m(this,"buttonPrevView"),m(this,"buttonNextView"),m(this,"content");const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new ge,this.buttonPrevView=this._createButtonView(t("Previous"),tr),this.buttonNextView=this._createButtonView(t("Next"),Bf),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new $(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class tE extends N{constructor(e,t){super(e),m(this,"content"),m(this,"_balloonPanelView");const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:i.to("top",Oa),left:i.to("left",Oa),width:i.to("width",Oa),height:i.to("height",Oa)}},children:this.content}),this.on("change:numberOfPanels",(r,o,s,a)=>{s>a?this._addPanels(s-a):this._removePanels(a-s),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new N;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:r}=new K(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:r})}}}class iE extends Pi{constructor(e,t){const i=e.t,r=Object.assign({},{showResetButton:!0,showIcon:!0,creator:Sn},t);super(e,r.creator),m(this,"iconView"),m(this,"resetButtonView"),m(this,"_viewConfig"),this.label=t.label,this._viewConfig=r,this._viewConfig.showIcon&&(this.iconView=new Ii,this.iconView.content=hA,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new $(e),this.resetButtonView.set({label:i("Clear"),icon:cd,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",o=>!o),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}class Gb extends N{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",t=>!t)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}class nE extends N{constructor(e){super(e),m(this,"focusTracker"),m(this,"children"),m(this,"_focusCycler"),this.children=this.createCollection(),this.focusTracker=new ge,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new ct({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class rE extends N{constructor(e,t){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"resultsView"),m(this,"filteredView"),m(this,"infoView"),m(this,"queryView"),m(this,"focusCycler"),m(this,"_config"),this._config=t,this.filteredView=t.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new ge,this.keystrokes=new Ie,this.resultsView=new nE(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),t.infoView&&t.infoView.instance?this.infoView=t.infoView.instance:(this.infoView=new Gb,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new ct({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(i,{resultsCount:r,totalItemsCount:o})=>{this.resultsCount=r,this.totalItemsCount=o}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",t.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=t=>t.stopPropagation();for(const t of this.focusableChildren)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search(""),this.filteredView.element.scrollTo(0,0)}search(e){const t=e?new RegExp(og(e),"ig"):null,i=this.filteredView.filter(t);this.fire("search",{query:e,...i})}_createSearchTextQueryView(){const e=new iE(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,t=this.infoView;function i(r,{query:o,resultsCount:s,totalItemsCount:a}){return typeof r=="function"?r(o,s,a):r}this.on("search",(r,o)=>{if(o.resultsCount)t.set({isVisible:!1});else{const s=this._config.infoView&&this._config.infoView.text;let a,l;o.totalItemsCount?s!=null&&s.notFound?(a=s.notFound.primary,l=s.notFound.secondary):(a=e("No results found"),l=""):s!=null&&s.noSearchableItems?(a=s.noSearchableItems.primary,l=s.noSearchableItems.secondary):(a=e("No searchable items"),l=""),t.set({primaryText:i(a,o),secondaryText:i(l,o),isVisible:!0})}})}}const oE=xn("px");class sE extends C{constructor(e){super(e),m(this,"toolbarView"),m(this,"focusTracker"),m(this,"_balloonConfig"),m(this,"_resizeObserver",null),m(this,"_balloon"),m(this,"_fireSelectionChangeDebounced"),this._balloonConfig=vd(e.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new ge,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=e.plugins.get(Vi),this._fireSelectionChangeDebounced=gi(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[Vi]}init(){const e=this.editor,t=e.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(i,r,o)=>{const s=this._balloon.visibleView===this.toolbarView;!o&&s?this.hide():o&&this.show()}),this.listenTo(t,"change:range",(i,r)=>{(r.directChange||t.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(e,"ready",()=>{const i=e.ui.view.editable.element;this._resizeObserver=new So(i,r=>{this.toolbarView.maxWidth=oE(.9*r.contentRect.width)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const e=this.editor.locale.t,t=!this._balloonConfig.shouldNotGroupWhenFull,i=new ts(this.editor.locale,{shouldGroupWhenFull:t,isFloating:!0});return i.ariaLabel=e("Editor contextual toolbar"),i.render(),i}show(e=!1){const t=this.editor,i=t.model.document.selection,r=t.model.schema;this._balloon.hasView(this.toolbarView)||i.isCollapsed&&!e||function(o,s){return o.rangeCount===1?!1:[...o.getRanges()].every(a=>{const l=a.getContainedElement();return l&&s.isSelectable(l)})}(i,r)||Array.from(this.toolbarView.items).every(o=>o.isEnabled!==void 0&&!o.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:e,focusTracker:t}=this,{editing:i}=e;i.view.addObserver(class extends bi{observe(r){t.add(r)}stopObserving(r){t.remove(r)}})}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document,i=t.selection,r=t.selection.isBackward;return{target:()=>{const o=r?i.getFirstRange():i.getLastRange(),s=K.getDomRangeRects(e.domConverter.viewRangeToDom(o));return r?s[0]:(s.length>1&&s[s.length-1].width===0&&s.pop(),s[s.length-1])},positions:this._getBalloonPositions(r)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(e){const t=W.isSafari&&W.isiOS?kt.generatePositions({heightOffset:Math.max(kt.arrowHeightOffset,Math.round(20/R.window.visualViewport.scale))}):kt.defaultPositions;return e?[t.northWestArrowSouth,t.northWestArrowSouthWest,t.northWestArrowSouthEast,t.northWestArrowSouthMiddleEast,t.northWestArrowSouthMiddleWest,t.southWestArrowNorth,t.southWestArrowNorthWest,t.southWestArrowNorthEast,t.southWestArrowNorthMiddleWest,t.southWestArrowNorthMiddleEast]:[t.southEastArrowNorth,t.southEastArrowNorthEast,t.southEastArrowNorthWest,t.southEastArrowNorthMiddleEast,t.southEastArrowNorthMiddleWest,t.northEastArrowSouth,t.northEastArrowSouthEast,t.northEastArrowSouthWest,t.northEastArrowSouthMiddleEast,t.northEastArrowSouthMiddleWest]}}const Zb=xn("px");class aE extends ${constructor(e){super(e);const t=this.bindTemplate;this.isVisible=!1,this.isToggleable=!0,this.set("top",0),this.set("left",0),this.extendTemplate({attributes:{class:"ck-block-toolbar-button",style:{top:t.to("top",i=>Zb(i)),left:t.to("left",i=>Zb(i))}}})}}const rs=xn("px");class lE extends C{constructor(e){super(e),m(this,"toolbarView"),m(this,"panelView"),m(this,"buttonView"),m(this,"_resizeObserver",null),m(this,"_blockToolbarConfig"),this._blockToolbarConfig=vd(this.editor.config.get("blockToolbar")),this.toolbarView=this._createToolbarView(),this.panelView=this._createPanelView(),this.buttonView=this._createButtonView(),Tn({emitter:this.panelView,contextElements:[this.panelView.element,this.buttonView.element],activator:()=>this.panelView.isVisible,callback:()=>this._hidePanel()})}static get pluginName(){return"BlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=t("Click to edit block"),r=t("Drag to move"),o=t("Edit block"),s=e.plugins.has("DragDropBlockToolbar"),a=s?`${i}
${r}`:o;this.buttonView.label=a,s&&(this.buttonView.element.dataset.ckeTooltipClass="ck-tooltip_multi-line"),this.listenTo(e.model.document.selection,"change:range",(l,c)=>{c.directChange&&this._hidePanel()}),this.listenTo(e.ui,"update",()=>this._updateButton()),this.listenTo(e,"change:isReadOnly",()=>this._updateButton(),{priority:"low"}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>this._updateButton()),this.listenTo(this.buttonView,"change:isVisible",(l,c,d)=>{d?this.buttonView.listenTo(window,"resize",()=>this._updateButton()):(this.buttonView.stopListening(window,"resize"),this._hidePanel())}),this._repositionButtonOnScroll(),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this._showPanel(),afterBlur:()=>this._hidePanel()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._blockToolbarConfig,this.editor.ui.componentFactory);for(const l of this.toolbarView.items)l.on("execute",()=>this._hidePanel(!0),{priority:"high"})})}destroy(){super.destroy(),this.panelView.destroy(),this.buttonView.destroy(),this.toolbarView.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_createToolbarView(){const e=this.editor.locale.t,t=!this._blockToolbarConfig.shouldNotGroupWhenFull,i=new ts(this.editor.locale,{shouldGroupWhenFull:t,isFloating:!0});return i.ariaLabel=e("Editor block content toolbar"),i}_createPanelView(){const e=this.editor,t=new kt(e.locale);return t.content.add(this.toolbarView),t.class="ck-toolbar-container",e.ui.view.body.add(t),this.toolbarView.keystrokes.set("Esc",(i,r)=>{this._hidePanel(!0),r()}),t}_createButtonView(){const e=this.editor,t=e.t,i=new aE(e.locale),r=this._blockToolbarConfig.icon,o=yd[r]||r||yd.dragIndicator;return i.set({label:t("Edit block"),icon:o,withText:!1}),i.bind("isOn").to(this.panelView,"isVisible"),i.bind("tooltip").to(this.panelView,"isVisible",s=>!s),this.listenTo(i,"execute",()=>{this.panelView.isVisible?this._hidePanel(!0):this._showPanel()}),this.listenTo(i,"change:isEnabled",(s,a,l)=>{!l&&this.panelView.isVisible&&this._hidePanel(!1)}),e.ui.view.body.add(i),i}_updateButton(){const e=this.editor,t=e.model,i=e.editing.view;if(!e.ui.focusTracker.isFocused)return void this._hideButton();if(!e.model.canEditAt(e.model.document.selection))return void this._hideButton();const r=Array.from(t.document.selection.getSelectedBlocks())[0];if(!r||Array.from(this.toolbarView.items).every(s=>!s.isEnabled))return void this._hideButton();const o=i.domConverter.mapViewToDom(e.editing.mapper.toViewElement(r));this.buttonView.isVisible=!0,this._setupToolbarResize(),this._attachButtonToElement(o),this.panelView.isVisible&&this._showPanel()}_hideButton(){this.buttonView.isVisible=!1}_showPanel(){if(!this.buttonView.isVisible)return;const e=this.panelView.isVisible;this.panelView.show();const t=this._getSelectedEditableElement();this.toolbarView.maxWidth=this._getToolbarMaxWidth(t),this.panelView.pin({target:this.buttonView.element,limiter:t}),e||this.toolbarView.items.get(0).focus()}_getSelectedEditableElement(){const e=this.editor.model.document.selection.getFirstRange().root.rootName;return this.editor.ui.getEditableElement(e)}_hidePanel(e){this.panelView.isVisible=!1,e&&this.editor.editing.view.focus()}_repositionButtonOnScroll(){const{buttonView:e}=this;let t=!1;const i=(r,o)=>{if(t)return;const s=this._getSelectedEditableElement();(o.target===R.document||gg(s).includes(o.target))&&(t=!0,R.window.requestAnimationFrame(()=>{this._updateButton(),t=!1}))};e.on("change:isVisible",(r,o,s)=>{s?e.listenTo(R.document,"scroll",i,{useCapture:!0,usePassive:!0}):e.stopListening(R.document,"scroll",i)})}_attachButtonToElement(e){const t=this.buttonView.element,i=this._getSelectedEditableElement(),r=window.getComputedStyle(e),o=new K(i),s=parseInt(r.paddingTop,10),a=parseInt(r.lineHeight,10)||1.2*parseInt(r.fontSize,10),l=new K(t),c=new K(e);let d;d=this.editor.locale.uiLanguageDirection==="ltr"?o.left-l.width:o.right;const u=c.top+s+(a-l.height)/2;l.moveTo(d,u);const h=l.toAbsoluteRect();this.buttonView.top=h.top,this.buttonView.left=h.left,this._clipButtonToViewport(this.buttonView,i)}_clipButtonToViewport(e,t){const i=new K(e.element),r=new K(t).getVisible(),o=(...a)=>{e.element.style.clipPath=a.length?`polygon(${a.join(",")})`:""},s=a=>{e.isEnabled=!a,e.element.style.pointerEvents=a?"none":""};if(r&&r.bottom<i.bottom){const a=Math.min(i.height,i.bottom-r.bottom);s(a>=i.height),o("0 0","100% 0",`100% calc(100% - ${rs(a)})`,`0 calc(100% - ${rs(a)}`)}else if(r&&r.top>i.top){const a=Math.min(i.height,r.top-i.top);s(a>=i.height),o(`0 ${rs(a)}`,`100% ${rs(a)}`,"100% 100%","0 100%")}else s(!1),o()}_setupToolbarResize(){const e=this._getSelectedEditableElement();this._blockToolbarConfig.shouldNotGroupWhenFull||(this._resizeObserver&&this._resizeObserver.element!==e&&(this._resizeObserver.destroy(),this._resizeObserver=null),this._resizeObserver||(this._resizeObserver=new So(e,()=>{this.toolbarView.maxWidth=this._getToolbarMaxWidth(e)})))}_getToolbarMaxWidth(e){const t=new K(e),i=new K(this.buttonView.element),r=this.editor.locale.uiLanguageDirection==="rtl"?i.left-t.right+i.width:t.left-i.left;return rs(t.width+r)}}class cE extends Hr{constructor(e){super(e),m(this,"arrowView");const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Ii;return e.content=Ca,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class dE extends N{constructor(e){super(e),m(this,"children");const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}const Kb=class t1 extends N{constructor(e){super(e),m(this,"buttonView"),m(this,"panelView"),m(this,"focusTracker"),m(this,"keystrokes");const t=this.bindTemplate;this.buttonView=new cE(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new dE(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ie,this.focusTracker=new ge,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",i=>!i),t.if("parentMenuView","ck-menu-bar__menu_top-level",i=>!i)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),In.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(In.openOnButtonClick(this),In.openOnArrowRightKey(this),In.closeOnArrowLeftKey(this),In.openAndFocusOnEnterKeyPress(this),In.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),In.openAndFocusPanelOnArrowDownKey(this),In.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,i)=>{if(!i)return;const r=t1._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:i,northWest:r,westSouth:o,eastSouth:s,westNorth:a,eastNorth:l}=HT;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[s,l,o,a]:[e,t,i,r]:this.parentMenuView?[o,a,s,l]:[t,e,r,i]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};m(Kb,"_getOptimalPosition",kc);let Yt=Kb;class tn extends rr{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const i=Yb(t);return i&&i.isToggleable});this.items.forEach(t=>{const i=Yb(t);i&&(i.hasCheckSpace=e)})}}function Yb(n){return n instanceof si?n.children.map(e=>function(t){return typeof t=="object"&&"buttonView"in t&&t.buttonView instanceof $}(e)?e.buttonView:e).find(e=>e instanceof Hr):null}class Qb extends eT{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const Jb=["mouseenter","arrowleft","arrowright","change:isOpen"];class uE extends N{constructor(e){super(e),m(this,"children"),m(this,"menus",[]);const t=e.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,i=[]){const r=qT({normalizedConfig:e,locale:this.locale,componentFactory:t,extraItems:i}).items.map(o=>this._createMenu({componentFactory:t,menuDefinition:o}));this.children.addMany(r)}render(){super.render(),Wr.toggleMenusAndFocusItemsOnHover(this),Wr.closeMenusWhenTheBarCloses(this),Wr.closeMenuWhenAnotherOnTheSameLevelOpens(this),Wr.focusCycleMenusOnArrows(this),Wr.closeOnClickOutside(this),Wr.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,t=null){t?(e.delegate(...Jb).to(t),e.parentMenuView=t):e.delegate(...Jb).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){const r=this.locale,o=new Yt(r);return this.registerMenu(o,i),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{const s=new tn(r);s.ariaLabel=t.label,o.panelView.children.add(s),s.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){const r=this.locale,o=[];for(const s of e.groups){for(const a of s.items){const l=new Mi(r,t);if(mi(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{const c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}o.push(l)}s!==e.groups[e.groups.length-1]&&o.push(new Ta(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){const r=i.create(e);return r instanceof Yt||r instanceof Se||r instanceof Qb?(this._registerMenuTree(r,t),r.on("execute",()=>{this.close()}),r):(le("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,t){if(!(e instanceof Yt))return void e.delegate("mouseenter").to(t);this.registerMenu(e,t);const i=e.panelView.children.filter(o=>o instanceof tn)[0];if(!i)return void e.delegate("mouseenter").to(t);const r=i.items.filter(o=>o instanceof si);for(const o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}const os=new Map([["left",Mf],["right",jC],["center",BC],["justify",FC]]);class hE extends C{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const e=wf(this.editor.config.get("alignment.options"));e.map(t=>t.name).filter(bf).forEach(t=>this._addButton(t)),this._addToolbarDropdown(e),this._addMenuBarMenu(e)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,t=>this._createButton(t,e))}_createButton(e,t,i={}){const r=this.editor,o=r.commands.get("alignment"),s=new $(e);return s.set({label:this.localizedOptionTitles[t],icon:os.get(t),tooltip:!0,isToggleable:!0,...i}),s.bind("isEnabled").to(o),s.bind("isOn").to(o,"value",a=>a===t),this.listenTo(s,"execute",()=>{r.execute("alignment",{value:t}),r.editing.view.focus()}),s}_addToolbarDropdown(e){const t=this.editor;t.ui.componentFactory.add("alignment",i=>{const r=mt(i),o=i.uiLanguageDirection==="rtl"?"w":"e",s=i.t;is(r,()=>e.map(c=>this._createButton(i,c.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:s("Text alignment toolbar")}),r.buttonView.set({label:s("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const a=i.contentLanguageDirection==="rtl"?os.get("right"):os.get("left"),l=t.commands.get("alignment");return r.buttonView.bind("icon").to(l,"value",c=>os.get(c)||a),r.bind("isEnabled").to(l,"isEnabled"),this.listenTo(r,"execute",()=>{t.editing.view.focus()}),r})}_addMenuBarMenu(e){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",i=>{const r=t.commands.get("alignment"),o=i.t,s=new Yt(i),a=new tn(i);s.bind("isEnabled").to(r),a.set({ariaLabel:o("Text alignment"),role:"menu"}),s.buttonView.set({label:o("Text alignment")});for(const l of e){const c=new Mi(i,s),d=new Se(i);d.delegate("execute").to(s),d.set({label:this.localizedOptionTitles[l.name],icon:os.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),d.on("execute",()=>{t.execute("alignment",{value:l.name}),t.editing.view.focus()}),d.bind("isOn").to(r,"value",u=>u===l.name),d.bind("isEnabled").to(r,"isEnabled"),c.children.add(d),a.items.add(c)}return s.panelView.children.add(a),s})}}class mE extends C{static get requires(){return[OC,hE]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}class Xb{constructor(e,t=20){m(this,"model"),m(this,"limit"),m(this,"_isLocked"),m(this,"_size"),m(this,"_batch",null),m(this,"_changeCallback"),m(this,"_selectionChangeCallback"),this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,r)=>{r.isLocal&&r.isUndoable&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){this.isLocked&&!e||(this._batch=null,this._size=0)}}class gE extends G{constructor(e,t){super(e),m(this,"_buffer"),this._buffer=new Xb(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,r=e.text||"",o=r.length;let s=i.selection;if(e.selection?s=e.selection:e.range&&(s=t.createSelection(e.range)),!t.canEditAt(s))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();const c=Array.from(i.selection.getAttributes());t.deleteContent(s),r&&t.insertContent(l.createText(r,c),s),a?l.setSelection(a):s.is("documentSelection")||l.setSelection(s),this._buffer.unlock(),this._buffer.input(o)})}}const ek=["insertText","insertReplacementText"],pE=[...ek,"insertCompositionText"];class fE extends bi{constructor(e){super(e),m(this,"focusObserver"),this.focusObserver=e.getObserver(fa);const t=W.isAndroid?pE:ek,i=e.document;i.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{data:s,targetRanges:a,inputType:l,domEvent:c}=o;if(!t.includes(l))return;this.focusObserver.flush();const d=new Gi(i,"insertText");i.fire(d,new Nr(e,c,{text:s,selection:e.createSelection(a)})),d.stop.called&&r.stop()}),W.isAndroid||i.on("compositionend",(r,{data:o,domEvent:s})=>{this.isEnabled&&o&&i.fire("insertText",new Nr(e,s,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class tk extends C{constructor(){super(...arguments),m(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=e.editing.view,r=e.editing.mapper,o=t.document.selection;this._compositionQueue=new bE(e),i.addObserver(fE);const s=new gE(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",s),e.commands.add("input",s),this.listenTo(i.document,"insertText",(a,l)=>{i.document.isComposing||l.preventDefault(),W.isAndroid&&i.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:c,selection:d}=l;let u;u=d?Array.from(d.getRanges()).map(p=>r.toModelRange(p)):Array.from(o.getRanges());let h=c;if(W.isAndroid){const p=Array.from(u[0].getItems()).reduce((f,b)=>f+(b.is("$textProxy")?b.data:""),"");if(p&&(p.length<=h.length?h.startsWith(p)&&(h=h.substring(p.length),u[0].start=u[0].start.getShiftedBy(p.length)):p.startsWith(h)&&(u[0].start=u[0].start.getShiftedBy(h.length),h="")),h.length==0&&u[0].isCollapsed)return}const g={text:h,selection:t.createSelection(u)};W.isAndroid&&i.document.isComposing?this._compositionQueue.push(g):(e.execute("insertText",g),i.scrollToTheSelection())}),W.isAndroid?this.listenTo(i.document,"keydown",(a,l)=>{!o.isCollapsed&&l.keyCode==229&&i.document.isComposing&&ik(t,s)}):this.listenTo(i.document,"compositionstart",()=>{o.isCollapsed||ik(t,s)}),W.isAndroid?(this.listenTo(i.document,"mutations",(a,{mutations:l})=>{if(i.document.isComposing)for(const{node:c}of l){const d=kE(c,r),u=r.toModelElement(d);if(this._compositionQueue.isComposedElement(u))return void this._compositionQueue.flush("mutations")}}),this.listenTo(i.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(i.document,"compositionend",()=>{const a=[];for(const l of this._compositionQueue.flushComposedElements()){const c=r.toViewElement(l);c&&a.push({type:"children",node:c})}a.length&&i.document.fire("mutations",{mutations:a})},{priority:"lowest"})):this.listenTo(i.document,"compositionend",()=>{i.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class bE{constructor(e){m(this,"editor"),m(this,"flushDebounced",gi(()=>this.flush("timeout"),50)),m(this,"_queue",[]),m(this,"_compositionElements",new Set),this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){const t={text:e.text};if(e.selection){t.selectionRanges=[];for(const i of e.selection.getRanges())t.selectionRanges.push(Lt.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const i=e.selectionRanges.map(r=>function(o){const s=o.toRange();return o.detach(),s.root.rootName=="$graveyard"?null:s}(r)).filter(r=>!!r);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){const t=this.editor,i=t.model,r=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=t.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const s=this.shift();t.execute("insertText",s)}o.unlock()}),r.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){const e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}}function ik(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function kE(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}class nk extends G{constructor(e,t){super(e),m(this,"direction"),m(this,"_buffer"),this.direction=t,this._buffer=new Xb(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();const o=r.createSelection(e.selection||i.selection);if(!t.canEditAt(o))return;const s=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(s))return void this._replaceEntireContentWithParagraph(r);if(this._shouldReplaceFirstBlockWithParagraph(o,s))return void this.editor.execute("paragraph",{selection:o});if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=pc(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,i=t.document.selection,r=t.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(r))||!t.schema.checkChild(r,"paragraph"))return!1;const o=r.getChild(0);return!o||!o.is("element","paragraph")}_replaceEntireContentWithParagraph(e){const t=this.editor.model,i=t.document.selection,r=t.schema.getLimitElement(i),o=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(o,r),e.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const r=e.getFirstPosition(),o=i.schema.getLimitElement(r),s=o.getChild(0);return r.parent==s&&!!e.containsEntireContent(s)&&!!i.schema.checkChild(o,"paragraph")&&s.name!="paragraph"}}const rk="word",Pn="selection",Gr="backward",ss="forward",ok={deleteContent:{unit:Pn,direction:Gr},deleteContentBackward:{unit:"codePoint",direction:Gr},deleteWordBackward:{unit:rk,direction:Gr},deleteHardLineBackward:{unit:Pn,direction:Gr},deleteSoftLineBackward:{unit:Pn,direction:Gr},deleteContentForward:{unit:"character",direction:ss},deleteWordForward:{unit:rk,direction:ss},deleteHardLineForward:{unit:Pn,direction:ss},deleteSoftLineForward:{unit:Pn,direction:ss}};class wE extends bi{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;const{targetRanges:s,domEvent:a,inputType:l}=o,c=ok[l];if(!c)return;const d={direction:c.direction,unit:c.unit,sequence:i};d.unit==Pn&&(d.selectionToRemove=e.createSelection(s[0])),l==="deleteContentBackward"&&(W.isAndroid&&(d.sequence=1),function(h){if(h.length!=1||h[0].isCollapsed)return!1;const g=h[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let p=0;for(const{nextPosition:f,item:b}of g){if(f.parent.is("$text")){const k=f.parent.data,w=f.offset;if(xc(k,w)||Cc(k,w)||Rg(k,w))continue;p++}else(b.is("containerElement")||b.is("emptyElement"))&&p++;if(p>1)return!0}return!1}(s)&&(d.unit=Pn,d.selectionToRemove=e.createSelection(s)));const u=new Vr(t,"delete",s[0]);t.fire(u,new Nr(e,a,d)),u.stop.called&&r.stop()}),W.isBlink&&function(r){const o=r.view,s=o.document;let a=null,l=!1;function c(u){return u==ie.backspace||u==ie.delete}function d(u){return u==ie.backspace?Gr:ss}s.on("keydown",(u,{keyCode:h})=>{a=h,l=!1}),s.on("keyup",(u,{keyCode:h,domEvent:g})=>{const p=s.selection,f=r.isEnabled&&h==a&&c(h)&&!p.isCollapsed&&!l;if(a=null,f){const b=p.getFirstRange(),k=new Vr(s,"delete",b),w={unit:Pn,direction:d(h),selectionToRemove:p};s.fire(k,new Nr(o,g,w))}}),s.on("beforeinput",(u,{inputType:h})=>{const g=ok[h];c(a)&&g&&g.direction==d(a)&&(l=!0)},{priority:"high"}),s.on("beforeinput",(u,{inputType:h,data:g})=>{a==ie.delete&&h=="insertText"&&g=="\x7F"&&u.stop()},{priority:"high"})}(this)}observe(){}stopObserving(){}}class Li extends C{constructor(){super(...arguments),m(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,r=e.model.document;t.addObserver(wE),this._undoOnBackspace=!1;const o=new nk(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new nk(e,"backward")),this.listenTo(i,"delete",(s,a)=>{i.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:d,unit:u}=a,h=l==="forward"?"deleteForward":"delete",g={sequence:c};if(u=="selection"){const p=Array.from(d.getRanges()).map(f=>e.editing.mapper.toModelRange(f));g.selection=e.model.createSelection(p)}else g.unit=u;e.execute(h,g),t.scrollToTheSelection()},{priority:"low"}),this.listenTo(i,"keydown",(s,a)=>{if(i.isComposing||a.keyCode!=ie.backspace||!r.selection.isCollapsed)return;const l=e.model.schema.getLimitElement(r.selection);e.model.createPositionAt(l,0).isTouching(r.selection.getFirstPosition())&&a.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(s,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Na extends C{static get requires(){return[tk,Li]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}function sk(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((i,{item:r})=>r.is("$text")||r.is("$textProxy")?i+r.data:(t=e.createPositionAfter(r),""),""),range:e.createRange(t,n.end)}}class ak extends xe(){constructor(e,t){super(),m(this,"model"),m(this,"testCallback"),m(this,"_hasMatch"),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const e=this.model.document;this.listenTo(e.selection,"change:range",(t,{directChange:i})=>{i&&(e.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))}),this.listenTo(e,"change:data",(t,i)=>{!i.isUndo&&i.isLocal&&this._evaluateTextBeforeSelection("data",{batch:i})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,r=i.document.selection,o=i.createRange(i.createPositionAt(r.focus.parent,0),r.focus),{text:s,range:a}=sk(o,i),l=this.testCallback(s);if(!l&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!l,l){const c=Object.assign(t,{text:s,range:a});typeof l=="object"&&Object.assign(c,l),this.fire(`matched:${e}`,c)}}}class Ra extends C{constructor(e){super(e),m(this,"attributes"),m(this,"_overrideUid"),m(this,"_isNextGravityRestorationSkipped",!1),this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=e.editing.view,r=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",(s,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==ie.arrowright,c=a.keyCode==ie.arrowleft;if(!l&&!c)return;const d=r.contentLanguageDirection;let u=!1;u=d==="ltr"&&l||d==="rtl"&&c?this._handleForwardMovement(a):this._handleBackwardMovement(a),u===!0&&s.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(s,a)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!a.directChange&&ai(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model,r=i.document.selection,o=r.getFirstPosition();return!this._isGravityOverridden&&(!o.isAtStart||!nn(r,t))&&!!ai(o,t)&&(e&&ls(e),nn(r,t)&&ai(o,t,!0)?as(i,t):this._overrideGravity(),!0)}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,r=i.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(e&&ls(e),this._restoreGravity(),ai(o,t,!0)?as(i,t):za(i,t,o),!0):o.isAtStart?!!nn(r,t)&&(e&&ls(e),za(i,t,o),!0):!nn(r,t)&&ai(o,t,!0)?(e&&ls(e),za(i,t,o),!0):!!lk(o,t)&&(o.isAtEnd&&!nn(r,t)&&ai(o,t)?(e&&ls(e),za(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}_enableClickingAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,r=e.editing.view.document;e.editing.view.addObserver(_a),e.editing.view.addObserver(H5);let o=!1,s=!1;this.listenTo(r,"touchstart",()=>{s=!1,o=!0}),this.listenTo(r,"mousedown",()=>{s=!0}),this.listenTo(r,"selectionChange",()=>{const a=this.attributes;if(!s&&!o||(s=!1,o=!1,!i.isCollapsed)||!nn(i,a))return;const l=i.getFirstPosition();ai(l,a)&&(l.isAtStart||ai(l,a,!0)?as(t,a):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const e=this.editor.model,t=e.document.selection,i=this.attributes;this.listenTo(e,"insertContent",()=>{const r=t.getFirstPosition();nn(t,i)&&ai(r,i)&&as(e,i)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,r=e.editing.view;let o=!1,s=!1;this.listenTo(r.document,"delete",(a,l)=>{o=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;const a=i.getFirstPosition();s=nn(i,this.attributes)&&!lk(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,s||e.model.enqueueChange(()=>{const a=i.getFirstPosition();nn(i,this.attributes)&&ai(a,this.attributes)&&(a.isAtStart||ai(a,this.attributes,!0)?as(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function nn(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function za(n,e,t){const i=t.nodeBefore;n.change(r=>{if(i){const o=[],s=n.schema.isObject(i)&&n.schema.isInline(i);for(const[a,l]of i.getAttributes())!n.schema.checkAttribute("$text",a)||s&&n.schema.getAttributeProperties(a).copyFromObject===!1||o.push([a,l]);r.setSelectionAttribute(o)}else r.removeSelectionAttribute(e)})}function as(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function ls(n){n.preventDefault()}function lk(n,e){return ai(n.getShiftedBy(-1),e)}function ai(n,e,t=!1){const{nodeBefore:i,nodeAfter:r}=n;for(const o of e){const s=i?i.getAttribute(o):void 0,a=r?r.getAttribute(o):void 0;if((!t||s!==void 0&&a!==void 0)&&a!==s)return!0}return!1}function Da(n,e,t,i){return i.createRange(ck(n,e,t,!0,i),ck(n,e,t,!1,i))}function ck(n,e,t,i,r){let o=n.textNode||(i?n.nodeBefore:n.nodeAfter),s=null;for(;o&&o.getAttribute(e)==t;)s=o,o=i?o.previousSibling:o.nextSibling;return s?r.createPositionAt(s,i?"before":"after"):n}function dk(n,e,t,i){const r=n.editing.view,o=new Set;r.document.registerPostFixer(s=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=Da(a.getFirstPosition(),e,a.getAttribute(e),n.model),d=n.editing.mapper.toViewRange(c);for(const u of d.getItems())u.is("element",t)&&!u.hasClass(i)&&(s.addClass(i,u),o.add(u),l=!0)}return l}),n.conversion.for("editingDowncast").add(s=>{function a(){r.change(l=>{for(const c of o.values())l.removeClass(i,c),o.delete(c)})}s.on("insert",a,{priority:"highest"}),s.on("remove",a,{priority:"highest"}),s.on("attribute",a,{priority:"highest"}),s.on("selection",a,{priority:"highest"})})}function Mn(n,e,t,i){let r,o=null;typeof i=="function"?r=i:(o=n.commands.get(i),r=()=>{n.execute(i)}),n.model.document.on("change:data",(s,a)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const l=Ce(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),d=c[0];if(c.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const u=d.position.parent;if(u.is("element","codeBlock")||u.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||o&&o.value===!0)return;const h=u.getChild(0),g=n.model.createRangeOn(h);if(!g.containsRange(l)&&!l.end.isEqual(g.end))return;const p=t.exec(h.data.substr(0,l.end.offset));p&&n.model.enqueueChange(f=>{const b=f.createPositionAt(u,0),k=f.createPositionAt(u,p[0].length),w=new Lt(b,k);if(r({match:p})!==!1){f.remove(w);const _=n.model.document.selection.getFirstRange(),y=f.createRangeIn(u);!u.isEmpty||y.isEqual(_)||y.containsRange(_,!0)||f.remove(u)}w.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}function Zr(n,e,t,i){let r,o;t instanceof RegExp?r=t:o=t,o=o||(s=>{let a;const l=[],c=[];for(;(a=r.exec(s))!==null&&!(a&&a.length<4);){let{index:d,1:u,2:h,3:g}=a;const p=u+h+g;d+=a[0].length-p.length;const f=[d,d+u.length],b=[d+u.length+h.length,d+u.length+h.length+g.length];l.push(f),l.push(b),c.push([d+u.length,d+u.length+h.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(s,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const d=Array.from(l.document.differ.getChanges()),u=d[0];if(d.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const h=c.focus,g=h.parent,{text:p,range:f}=function(_,y){let x=_.start;return{text:Array.from(_.getItems()).reduce((A,I)=>!I.is("$text")&&!I.is("$textProxy")||I.getAttribute("code")?(x=y.createPositionAfter(I),""):A+I.data,""),range:y.createRange(x,_.end)}}(l.createRange(l.createPositionAt(g,0),h),l),b=o(p),k=uk(f.start,b.format,l),w=uk(f.start,b.remove,l);k.length&&w.length&&l.enqueueChange(_=>{if(i(_,k)!==!1){for(const y of w.reverse())_.remove(y);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function uk(n,e,t){return e.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>t.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}class _E extends C{static get requires(){return[Li]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&Mn(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&Mn(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&Mn(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&Mn(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=Ba(this.editor,"bold");Zr(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Zr(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=Ba(this.editor,"italic");Zr(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Zr(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=Ba(this.editor,"code");Zr(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=Ba(this.editor,"strikethrough");Zr(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const i=t[7],r=new RegExp(`^(#{${i}})\\s$`);Mn(this.editor,this,r,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Mn(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&Mn(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Mn(this.editor,this,/^---$/,"horizontalLine")}}function Ba(n,e){return(t,i)=>{if(!n.commands.get(e).isEnabled)return!1;const r=n.model.schema.getValidRanges(i,e);for(const o of r)t.setAttribute(e,!0,o);t.removeSelectionAttribute(e)}}class vE extends C{constructor(e){super(e),m(this,"adapter"),m(this,"_debouncedSave"),m(this,"_lastDocumentVersion"),m(this,"_savePromise"),m(this,"_domEmitter"),m(this,"_config"),m(this,"_pendingActions"),m(this,"_makeImmediateSave"),m(this,"_action",null);const t=e.config.get("autosave")||{},i=t.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=gi(this._save.bind(this),i),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Mt()),this._config=t,this._pendingActions=e.plugins.get(va),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[va]}init(){const e=this.editor,t=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(t,"change:data",(i,r)=>{this._saveCallbacks.length&&r.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"}),this._domEmitter.listenTo(window,"beforeunload",(i,r)=>{this._pendingActions.hasAny&&(r.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}class ar extends G{constructor(e,t){super(e),m(this,"attributeKey"),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,r=e.forceValue===void 0?!this.value:e.forceValue;t.change(o=>{if(i.isCollapsed)r?o.setSelectionAttribute(this.attributeKey,!0):o.removeSelectionAttribute(this.attributeKey);else{const s=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const a of s)r?o.setAttribute(this.attributeKey,r,a):o.removeAttribute(this.attributeKey,a)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const r of i.getRanges())for(const o of r.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const Kr="bold";class yE extends C{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Kr}),e.model.schema.setAttributeProperties(Kr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Kr,view:"strong",upcastAlso:["b",i=>{const r=i.getStyle("font-weight");return r&&(r=="bold"||Number(r)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Kr,new ar(e,Kr)),e.keystrokes.set("CTRL+B",Kr),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function lr({editor:n,commandName:e,plugin:t,icon:i,label:r,keystroke:o}){return s=>{const a=n.commands.get(e),l=new s(n.locale);return l.set({label:r,icon:i,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof Se?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}const Od="bold";class xE extends C{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Od,plugin:this,icon:Vf,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(Od,()=>i($)),e.ui.componentFactory.add("menuBar:"+Od,()=>i(Se))}}class CE extends C{static get requires(){return[yE,xE]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const cr="code";class AE extends C{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ra]}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:cr}),e.model.schema.setAttributeProperties(cr,{isFormatting:!0,copyOnEnter:!1}),e.conversion.attributeToElement({model:cr,view:"code"}),e.commands.add(cr,new ar(e,cr)),e.plugins.get(Ra).registerAttribute(cr),dk(e,cr,"code","ck-code_selected"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}const Nd="code";class TE extends C{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Nd,plugin:this,icon:HC,label:t("Code")});e.ui.componentFactory.add(Nd,()=>i($)),e.ui.componentFactory.add("menuBar:"+Nd,()=>i(Se))}}class EE extends C{static get requires(){return[AE,TE]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const Yr="italic";class SE extends C{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Yr}),e.model.schema.setAttributeProperties(Yr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Yr,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Yr,new ar(e,Yr)),e.keystrokes.set("CTRL+I",Yr),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const Rd="italic";class IE extends C{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Rd,plugin:this,icon:iA,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(Rd,()=>i($)),e.ui.componentFactory.add("menuBar:"+Rd,()=>i(Se))}}class PE extends C{static get requires(){return[SE,IE]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const cs="strikethrough";class ME extends C{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:cs}),e.model.schema.setAttributeProperties(cs,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:cs,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(cs,new ar(e,cs)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}const zd="strikethrough";class VE extends C{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:zd,plugin:this,icon:OA,keystroke:"CTRL+SHIFT+X",label:t("Strikethrough")});e.ui.componentFactory.add(zd,()=>i($)),e.ui.componentFactory.add("menuBar:"+zd,()=>i(Se))}}class LE extends C{static get requires(){return[ME,VE]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const ds="subscript";class OE extends C{static get pluginName(){return"SubscriptEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ds}),e.model.schema.setAttributeProperties(ds,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ds,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),e.commands.add(ds,new ar(e,ds))}}const Dd="subscript";class NE extends C{static get pluginName(){return"SubscriptUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Dd,plugin:this,icon:NA,label:t("Subscript")});e.ui.componentFactory.add(Dd,()=>i($)),e.ui.componentFactory.add("menuBar:"+Dd,()=>i(Se))}}class RE extends C{static get requires(){return[OE,NE]}static get pluginName(){return"Subscript"}static get isOfficialPlugin(){return!0}}const us="superscript";class zE extends C{static get pluginName(){return"SuperscriptEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:us}),e.model.schema.setAttributeProperties(us,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:us,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),e.commands.add(us,new ar(e,us))}}const Bd="superscript";class DE extends C{static get pluginName(){return"SuperscriptUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Bd,plugin:this,icon:RA,label:t("Superscript")});e.ui.componentFactory.add(Bd,()=>i($)),e.ui.componentFactory.add("menuBar:"+Bd,()=>i(Se))}}class BE extends C{static get requires(){return[zE,DE]}static get pluginName(){return"Superscript"}static get isOfficialPlugin(){return!0}}const hs="underline";class FE extends C{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:hs}),e.model.schema.setAttributeProperties(hs,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:hs,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(hs,new ar(e,hs)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const Fd="underline";class jE extends C{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=lr({editor:e,commandName:Fd,plugin:this,icon:HA,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(Fd,()=>i($)),e.ui.componentFactory.add("menuBar:"+Fd,()=>i(Se))}}class $E extends C{static get requires(){return[FE,jE]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}function*hk(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class HE extends G{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,r=t.schema,o=i.isCollapsed,s=i.getFirstRange(),a=s.start.parent,l=s.end.parent;if(r.isLimit(a)||r.isLimit(l))return o||a!=l||t.deleteContent(i),!1;if(o){const c=hk(e.model.schema,i.getAttributes());return mk(e,s.start),e.setSelectionAttribute(c),!0}{const c=!(s.start.isAtStart&&s.end.isAtEnd),d=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(d)return mk(e,i.focus),!0;e.setSelection(l,0)}}return!1}}function mk(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}const UE={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class gk extends bi{constructor(e){super(e);const t=this.document;let i=!1;t.on("keydown",(r,o)=>{i=o.shiftKey}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;let s=o.inputType;W.isSafari&&i&&s=="insertParagraph"&&(s="insertLineBreak");const a=o.domEvent,l=UE[s];if(!l)return;const c=new Vr(t,"enter",o.targetRanges[0]);t.fire(c,new Nr(e,a,{isSoft:l.isSoft})),c.stop.called&&r.stop()})}observe(){}stopObserving(){}}class Fa extends C{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,r=this.editor.t;t.addObserver(gk),e.commands.add("enter",new HE(e)),this.listenTo(i,"enter",(o,s)=>{i.isComposing||s.preventDefault(),s.isSoft||(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class WE extends G{execute(){const e=this.editor.model,t=e.document;e.change(i=>{(function(r,o,s){const a=s.isCollapsed,l=s.getFirstRange(),c=l.start.parent,d=l.end.parent,u=c==d;if(a){const h=hk(r.schema,s.getAttributes());pk(r,o,l.end),o.removeSelectionAttribute(s.getAttributeKeys()),o.setSelectionAttribute(h)}else{const h=!(l.start.isAtStart&&l.end.isAtEnd);r.deleteContent(s,{leaveUnmerged:h}),u?pk(r,o,s.focus):h&&o.setSelection(d,0)}})(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=function(i,r){if(r.rangeCount>1)return!1;const o=r.anchor;if(!o||!i.checkChild(o,"softBreak"))return!1;const s=r.getFirstRange(),a=s.start.parent,l=s.end.parent;return!((jd(a,i)||jd(l,i))&&a!==l)}(e.schema,t.selection)}}function pk(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function jd(n,e){return!n.is("rootElement")&&(e.isLimit(n)||jd(n.parent,e))}class fk extends C{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.conversion,r=e.editing.view,o=r.document,s=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),r.addObserver(gk),e.commands.add("shiftEnter",new WE(e)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}class qE extends G{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,r=t.document.selection,o=Array.from(r.getSelectedBlocks()),s=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(s){const l=o.filter(c=>ja(c)||kk(i,c));this._applyQuote(a,l)}else this._removeQuote(a,o.filter(ja))})}_getValue(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!ja(e))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ce(e.getSelectedBlocks());return!!i&&kk(t,i)}_removeQuote(e,t){bk(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd)return void e.unwrap(i.start.parent);if(i.start.isAtStart){const o=e.createPositionBefore(i.start.parent);return void e.move(i,o)}i.end.isAtEnd||e.split(i.end);const r=e.createPositionAfter(i.end.parent);e.move(i,r)})}_applyQuote(e,t){const i=[];bk(e,t).reverse().forEach(r=>{let o=ja(r.start);o||(o=e.createElement("blockQuote"),e.wrap(r,o)),i.push(o)}),i.reverse().reduce((r,o)=>r.nextSibling==o?(e.merge(e.createPositionAfter(r)),r):o)}}function ja(n){return n.parent.name=="blockQuote"?n.parent:null}function bk(n,e){let t,i=0;const r=[];for(;i<e.length;){const o=e[i],s=e[i+1];t||(t=n.createPositionBefore(o)),s&&o.nextSibling==s||(r.push(n.createRange(t,n.createPositionAfter(o))),t=null),i++}return r}function kk(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}class GE extends C{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Fa,Li]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new qE(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(s=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return s.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return s.unwrap(c),!0;if(c.is("element")){const d=s.createRangeIn(c);for(const u of d.getItems())if(u.is("element","blockQuote")&&!t.checkChild(s.createPositionBefore(u),u))return s.unwrap(u),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return s.remove(c),!0}return!1});const i=this.editor.editing.view.document,r=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",(s,a)=>{!r.isCollapsed||!o.value||r.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),s.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(s,a)=>{if(a.direction!="backward"||!r.isCollapsed||!o.value)return;const l=r.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),s.stop())},{context:"blockquote"})}}class ZE extends C{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(Se);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get("blockQuote"),o=new e(t.locale),s=i.t;return o.set({label:s("Block quote"),icon:SA,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value"),this.listenTo(o,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),o}}class KE extends C{static get requires(){return[GE,ZE]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}class YE extends ye(){constructor(){super(...arguments),m(this,"_stack",[])}add(e,t){const i=this._stack,r=i[0];this._insertDescriptor(e);const o=i[0];r===o||$d(r,o)||this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}remove(e,t){const i=this._stack,r=i[0];this._removeDescriptor(e);const o=i[0];r===o||$d(r,o)||this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex(o=>o.id===e.id);if($d(e,t[i]))return;i>-1&&t.splice(i,1);let r=0;for(;t[r]&&QE(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex(r=>r.id===e);i>-1&&t.splice(i,1)}}function $d(n,e){return n&&e&&n.priority==e.priority&&$a(n.classes)==$a(e.classes)}function QE(n,e){return n.priority>e.priority||!(n.priority<e.priority)&&$a(n.classes)>$a(e.classes)}function $a(n){return Array.isArray(n)?n.sort().join(","):n}const JE="ck-widget",wk="ck-widget_selected";function Je(n){return!!n.is("element")&&!!n.getCustomProperty("widget")}function Ha(n,e,t={}){if(!n.is("containerElement"))throw new v("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(JE,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=n3,e.setCustomProperty("widgetLabel",[],n),t.label&&t3(n,t.label),t.hasSelectionHandle&&function(i,r){const o=r.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(s){const a=this.toDomElement(s),l=new Ii;return l.set("content",qC),l.render(),a.appendChild(l.element),a});r.insert(r.createPositionAt(i,0),o),r.addClass(["ck-widget_with-selection-handle"],i)}(n,e),_k(n,e),n}function XE(n,e,t){if(e.classes&&t.addClass(Ne(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function e3(n,e,t){if(e.classes&&t.removeClass(Ne(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function _k(n,e,t=XE,i=e3){const r=new YE;r.on("change:top",(o,s)=>{s.oldDescriptor&&i(n,s.oldDescriptor,s.writer),s.newDescriptor&&t(n,s.newDescriptor,s.writer)}),e.setCustomProperty("addHighlight",(o,s,a)=>r.add(s,a),n),e.setCustomProperty("removeHighlight",(o,s,a)=>r.remove(s,a),n)}function t3(n,e){n.getCustomProperty("widgetLabel").push(e)}function i3(n){return n.getCustomProperty("widgetLabel").reduce((e,t)=>typeof t=="function"?e?e+". "+t():t():e?e+". "+t:t,"")}function vk(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),t.withAriaRole!==!1&&e.setAttribute("role","textbox",n),e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,r,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(i,r,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),_k(n,e),n}function Hd(n,e){const t=n.getSelectedElement();if(t){const i=Vn(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function n3(){return null}function Ud(n){const e=s=>{const{width:a,paddingLeft:l,paddingRight:c}=s.ownerDocument.defaultView.getComputedStyle(s);return parseFloat(a)-(parseFloat(l)||0)-(parseFloat(c)||0)},t=n.parentElement;if(!t)return 0;let i=e(t),r=0,o=t;for(;isNaN(i);){if(o=o.parentElement,++r>5)return 0;i=e(o)}return i}function r3(n,e=new K(n)){const t=Ud(n);return t?e.width/t*100:0}const rn="widget-type-around";function dr(n,e,t){return!!n&&Je(n)&&!t.isInline(e)}function Vn(n){return n.getAttribute(rn)}const yk=["before","after"],o3=new DOMParser().parseFromString(PA,"image/svg+xml").firstChild,xk="ck-widget__type-around_disabled";class s3 extends C{constructor(){super(...arguments),m(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Fa,Li]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,r,o)=>{t.change(s=>{for(const a of t.document.roots)o?s.removeClass(xk,a):s.addClass(xk,a)}),o||e.model.change(s=>{s.removeSelectionAttribute(rn)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,r=i.editing.view,o=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,i,r){this.listenTo(e,t,(...o)=>{this.isEnabled&&i(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){const e=this.editor.model.document.selection,t=Vn(e);if(!t)return!1;const i=e.getSelectedElement();return this._insertParagraph(i,t),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,r={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,s,a)=>{const l=a.mapper.toViewElement(s.item);l&&dr(l,s.item,t)&&(function(c,d,u){const h=c.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(g){const p=this.toDomElement(g);return function(f,b){for(const k of yk){const w=new ri({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${k}`],title:b[k],"aria-hidden":"true"},children:[f.ownerDocument.importNode(o3,!0)]});f.appendChild(w.render())}}(p,d),function(f){const b=new ri({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});f.appendChild(b.render())}(p),p});c.insert(c.createPositionAt(u,"end"),h)}(a.writer,r,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,r=t.schema,o=e.editing.view;function s(a){return`ck-widget_type-around_show-fake-caret_${a}`}this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Je,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(rn)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=i.getSelectedElement();a&&dr(e.editing.mapper.toViewElement(a),a,r)||e.model.change(l=>{l.removeSelectionAttribute(rn)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const d=c.writer;if(this._currentFakeCaretModelElement){const p=c.mapper.toViewElement(this._currentFakeCaretModelElement);p&&(d.removeClass(yk.map(s),p),this._currentFakeCaretModelElement=null)}const u=l.selection.getSelectedElement();if(!u)return;const h=c.mapper.toViewElement(u);if(!dr(h,u,r))return;const g=Vn(l.selection);g&&(d.addClass(s(g),h),this._currentFakeCaretModelElement=u)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(d=>{d.removeSelectionAttribute(rn)})})}_handleArrowKeyPress(e,t){const i=this.editor,r=i.model,o=r.document.selection,s=r.schema,a=i.editing.view,l=J2(t.keyCode,i.locale.contentLanguageDirection),c=a.document.selection.getSelectedElement();let d;dr(c,i.editing.mapper.toModelElement(c),s)?d=this._handleArrowKeyPressOnSelectedWidget(l):o.isCollapsed?d=this._handleArrowKeyPressWhenSelectionNextToAWidget(l):t.shiftKey||(d=this._handleArrowKeyPressWhenNonCollapsedSelection(l)),d&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const t=this.editor.model,i=Vn(t.document.selection);return t.change(r=>i?i!==(e?"after":"before")?(r.removeSelectionAttribute(rn),!0):!1:(r.setSelectionAttribute(rn,e?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,r=i.schema,o=t.plugins.get("Widget"),s=o._getObjectElementNextToSelection(e);return!!dr(t.editing.mapper.toViewElement(s),s,r)&&(i.change(a=>{o._setSelectionOverElement(s),a.setSelectionAttribute(rn,e?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,i=t.model,r=i.schema,o=t.editing.mapper,s=i.document.selection,a=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter;return!!dr(o.toViewElement(a),a,r)&&(i.change(l=>{l.setSelection(a,"on"),l.setSelectionAttribute(rn,e?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,r)=>{const o=r.domTarget.closest(".ck-widget__type-around__button");if(!o)return;const s=function(c){return c.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(o),a=function(c,d){const u=c.closest(".ck-widget");return d.mapDomToView(u)}(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,s),r.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;const s=t.getSelectedElement(),a=e.editing.mapper.toViewElement(s),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:dr(a,s,l)&&(this._insertParagraph(s,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),r.stop())},{context:Je})}_enableInsertingParagraphsOnTypingKeystroke(){const e=this.editor.editing.view.document;this._listenToIfEnabled(e,"insertText",(t,i)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(i.selection=e.selection)},{priority:"high"}),W.isAndroid?this._listenToIfEnabled(e,"keydown",(t,i)=>{i.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(e,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,r=i.schema;this._listenToIfEnabled(t.document,"delete",(o,s)=>{if(o.eventPhase!="atTarget")return;const a=Vn(i.document.selection);if(!a)return;const l=s.direction,c=i.document.selection.getSelectedElement(),d=l=="forward";if(a==="before"===d)e.execute("delete",{selection:i.createSelection(c,"on")});else{const u=r.getNearestSelectionRange(i.createPositionAt(c,a),l);if(u)if(u.isCollapsed){const h=i.createSelection(u.start);if(i.modifySelection(h,{direction:l}),h.focus.isEqual(u.start)){const g=function(p,f){let b=f;for(const k of f.getAncestors({parentFirst:!0})){if(k.childCount>1||p.isLimit(k))break;b=k}return b}(r,u.start.parent);i.deleteContent(i.createSelection(g,"on"),{doNotAutoparagraph:!0})}else i.change(g=>{g.setSelection(u),e.execute(d?"deleteForward":"delete")})}else i.change(h=>{h.setSelection(u),e.execute(d?"deleteForward":"delete")})}s.preventDefault(),o.stop()},{context:Je})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,s])=>{if(s&&!s.is("documentSelection"))return;const a=Vn(i);return a?(r.stop(),t.change(l=>{const c=i.getSelectedElement(),d=t.createPositionAt(c,a),u=l.createSelection(d),h=t.insertContent(o,u);return l.setSelection(u),h})):void 0},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,t=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(i,r)=>{const[,o,s={}]=r;if(o&&!o.is("documentSelection"))return;const a=Vn(t);a&&(s.findOptimalPosition=a,r[3]=s)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,t=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(i,[r])=>{r&&!r.is("documentSelection")||Vn(t)&&i.stop()},{priority:"high"})}}function a3(n){const e=n.model;return(t,i)=>{const r=i.keyCode==ie.arrowup,o=i.keyCode==ie.arrowdown,s=i.shiftKey,a=e.document.selection;if(!r&&!o)return;const l=o;if(s&&function(d,u){return!d.isCollapsed&&d.isBackward==u}(a,l))return;const c=function(d,u,h){const g=d.model;if(h){const p=u.isCollapsed?u.focus:u.getLastPosition(),f=Ck(g,p,"forward");if(!f)return null;const b=g.createRange(p,f),k=Ak(g.schema,b,"backward");return k?g.createRange(p,k):null}{const p=u.isCollapsed?u.focus:u.getFirstPosition(),f=Ck(g,p,"backward");if(!f)return null;const b=g.createRange(f,p),k=Ak(g.schema,b,"forward");return k?g.createRange(k,p):null}}(n,a,l);if(c){if(c.isCollapsed&&(a.isCollapsed||s))return;(c.isCollapsed||function(d,u,h){const g=d.model,p=d.view.domConverter;if(h){const _=g.createSelection(u.start);g.modifySelection(_),_.focus.isAtEnd||u.start.isEqual(_.focus)||(u=g.createRange(_.focus,u.end))}const f=d.mapper.toViewRange(u),b=p.viewRangeToDom(f),k=K.getDomRangeRects(b);let w;for(const _ of k)if(w!==void 0){if(Math.round(_.top)>=w)return!1;w=Math.max(w,Math.round(_.bottom))}else w=Math.round(_.bottom);return!0}(n,c,l))&&(e.change(d=>{const u=l?c.end:c.start;if(s){const h=e.createSelection(a.anchor);h.setFocus(u),d.setSelection(h)}else d.setSelection(u)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function Ck(n,e,t){const i=n.schema,r=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:s,item:a,type:l}of r.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return s;if(l==o&&i.isBlock(a))return null}return null}function Ak(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:r}of e.getWalker({direction:t}))if(n.checkChild(r,"$text"))return r;return null}class Qr extends C{constructor(){super(...arguments),m(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[s3,Li]}init(){const e=this.editor,t=e.editing.view,i=t.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{const l=a.writer,c=s.selection;if(c.isCollapsed)return;const d=c.getSelectedElement();if(!d)return;const u=e.editing.mapper.toViewElement(d);Je(u)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(u),{fake:!0,label:i3(u)})}),this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const l=a.writer,c=l.document.selection;let d=null;for(const u of c.getRanges())for(const h of u){const g=h.item;Je(g)&&!l3(g,d)&&(l.addClass(wk,g),this._previouslySelected.add(g),d=g)}},{priority:"low"}),t.addObserver(_a),this.listenTo(i,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(i,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Je,"$text"]}),this.listenTo(i,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(i,"arrowKey",a3(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(o,s)=>{this._handleDelete(s.direction=="forward")&&(s.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(i,"tab",(o,s)=>{o.eventPhase=="atTarget"&&(s.shiftKey||this._selectFirstNestedEditable()&&(s.preventDefault(),o.stop()))},{context:Je,priority:"low"}),this.listenTo(i,"tab",(o,s)=>{s.shiftKey&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(i,"keydown",(o,s)=>{s.keystroke==ie.esc&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const i=this.editor,r=i.editing.view,o=r.document;let s=t.target;if(!s)return;if(t.domEvent.detail>=3)return void(this._selectBlockContent(s)&&t.preventDefault());if(!Je(s)){const l=function(c){let d=c;for(;d;){if(d.is("editableElement")||Je(d))return d;d=d.parent}return null}(s);if(!l)return;if(Je(l))s=l;else{const c=function(d,u){const h=fg(u.domEvent);let g=null;if(g=h?d.domConverter.domRangeToView(h):d.createRange(d.createPositionAt(u.target,0)),!g)return null;const p=g.start;if(!p.parent)return null;let f=p.parent;return p.parent.is("editableElement")&&(p.isAtEnd&&p.nodeBefore?f=p.nodeBefore:p.isAtStart&&p.nodeAfter&&(f=p.nodeAfter)),f.is("$text")?f.parent:f}(r,t);if(!c||!Je(c))return;s=c}}W.isAndroid&&t.preventDefault(),o.isFocused||r.focus();const a=i.editing.mapper.toModelElement(s);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,i=t.model,r=t.editing.mapper,o=i.schema,s=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=function(l,c){for(const d of l.getAncestors({includeSelf:!0,parentFirst:!0})){if(c.checkChild(d,"$text"))return d;if(c.isLimit(d)&&!c.isObject(d))break}return null}(r.toModelElement(s),i.schema);return!!a&&(i.change(l=>{const c=o.isLimit(a)?null:function(h,g){const p=new Xi({startPosition:h});for(const{item:f}of p){if(g.isLimit(f)||!f.is("element"))return null;if(g.checkChild(f,"$text"))return f}return null}(l.createPositionAfter(a),o),d=l.createPositionAt(a,0),u=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(d,u))}),!0)}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,r=this.editor.model,o=r.schema,s=r.document.selection,a=s.getSelectedElement(),l=aa(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",d=l=="up"||l=="down";if(a&&o.isObject(a)){const h=c?s.getLastPosition():s.getFirstPosition(),g=o.getNearestSelectionRange(h,c?"forward":"backward");return void(g&&(r.change(p=>{p.setSelection(g)}),t.preventDefault(),e.stop()))}if(!s.isCollapsed&&!t.shiftKey){const h=s.getFirstPosition(),g=s.getLastPosition(),p=h.nodeAfter,f=g.nodeBefore;return void((p&&o.isObject(p)||f&&o.isObject(f))&&(r.change(b=>{b.setSelection(c?g:h)}),t.preventDefault(),e.stop()))}if(!s.isCollapsed)return;const u=this._getObjectElementNextToSelection(c);if(u&&o.isObject(u)){if(o.isInline(u)&&d)return;this._setSelectionOverElement(u),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,r=i.schema,o=i.document.selection.getSelectedElement();o&&r.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const t=this.editor.model.document.selection;if(!this.editor.model.canEditAt(t)||!t.isCollapsed)return;const i=this._getObjectElementNextToSelection(e);return i?(this.editor.model.change(r=>{let o=t.anchor.parent;for(;o.isEmpty;){const s=o;o=s.parent,r.remove(s)}this._setSelectionOverElement(i)}),!0):void 0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,r=t.document.selection,o=t.createSelection(r);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;const s=e?o.focus.nodeBefore:o.focus.nodeAfter;return s&&i.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(wk,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,t=this.editor.editing.view.document;for(const i of t.selection.getFirstRange().getItems())if(i.is("editableElement")){const r=e.editing.mapper.toModelElement(i);if(!r)continue;const o=e.model.createPositionAt(r,0),s=e.model.schema.getNearestSelectionRange(o,"forward");return e.model.change(a=>{a.setSelection(s)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,i=e.editing.view.document.selection.getFirstPosition().parent,r=(i.is("$text")?i.parent:i).findAncestor(Je);if(!r)return!1;const o=t.toModelElement(r);return!!o&&(e.model.change(s=>{s.setSelection(o,"on")}),!0)}}function l3(n,e){return!!e&&Array.from(n.getAncestors()).includes(e)}class Ua extends C{constructor(){super(...arguments),m(this,"_toolbarDefinitions",new Map),m(this,"_balloon")}static get requires(){return[Vi]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{(function(r){const o=r.getSelectedElement();return!(!o||!Je(o))})(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:r,balloonClassName:o="ck-toolbar-container",positions:s}){if(!i.length)return void le("widget-toolbar-no-items",{toolbarId:e});const a=this.editor,l=a.t,c=new ts(a.locale);if(c.ariaLabel=t||l("Widget toolbar"),this._toolbarDefinitions.has(e))throw new v("widget-toolbar-duplicated",this,{toolbarId:e});const d={view:c,getRelatedElement:r,balloonClassName:o,itemsConfig:i,positions:s,initialized:!1};a.ui.addToolbar(c,{isContextual:!0,beforeFocus:()=>{const u=r(a.editing.view.document.selection);u&&this._showToolbar(d,u)},afterBlur:()=>{this._hideToolbar(d)}}),this._toolbarDefinitions.set(e,d)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const r of this._toolbarDefinitions.values()){const o=r.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&o)if(this.editor.ui.focusTracker.isFocused){const s=o.getAncestors().length;s>e&&(e=s,t=o,i=r)}else this._isToolbarVisible(r)&&this._hideToolbar(r);else this._isToolbarInBalloon(r)&&this._hideToolbar(r)}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?Tk(this.editor,t,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:Ek(this.editor,t,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){const r=i.getRelatedElement(this.editor.editing.view.document.selection);Tk(this.editor,r,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function Tk(n,e,t){const i=n.plugins.get("ContextualBalloon"),r=Ek(n,e,t);i.updatePosition(r)}function Ek(n,e,t){const i=n.editing.view,r=kt.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:t||[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.viewportStickyNorth]}}class c3 extends xe(){constructor(e){super(),m(this,"_referenceCoordinates"),m(this,"_options"),m(this,"_originalWidth"),m(this,"_originalHeight"),m(this,"_originalWidthPercents"),m(this,"_aspectRatio"),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){const r=new K(t);this.activeHandlePosition=function(s){const a=["top-left","top-right","bottom-right","bottom-left"];for(const l of a)if(s.classList.contains(d3(l)))return l}(e),this._referenceCoordinates=function(s,a){const l=new K(s),c=a.split("-"),d={x:c[1]=="right"?l.right:l.left,y:c[0]=="bottom"?l.bottom:l.top};return d.x+=s.ownerDocument.defaultView.scrollX,d.y+=s.ownerDocument.defaultView.scrollY,d}(t,function(s){const a=s.split("-"),l={top:"bottom",bottom:"top",left:"right",right:"left"};return`${l[a[0]]}-${l[a[1]]}`}(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=r3(i,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function d3(n){return`ck-widget__resizer__handle-${n}`}class u3 extends N{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,r)=>i!==null&&r!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,r,o)=>e.unit==="px"?`${i}\xD7${r}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,r,o)=>r<50||o<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class Sk extends xe(){constructor(e){super(),m(this,"_state"),m(this,"_sizeView"),m(this,"_options"),m(this,"_viewResizerWrapper",null),m(this,"_initialViewWidth"),this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(e=>{e.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(e=>{e.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(i=>{const r=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(o){const s=this.toDomElement(o);return e._appendHandles(s),e._appendSizeUI(s),s});i.insert(i.createPositionAt(t,"end"),r),i.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=r,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new c3(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(l=>{const c=this._options.unit||"%",d=(c==="%"?t.widthPercents:t.width)+c;l.setStyle("width",d,this._options.viewElement)});const i=this._getHandleHost(),r=new K(i),o=Math.round(r.width),s=Math.round(r.height),a=new K(i);t.width=Math.round(a.width),t.height=Math.round(a.height),this.redraw(r),this.state.update({...t,handleHostWidth:o,handleHostHeight:s})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!((i=t)&&i.ownerDocument&&i.ownerDocument.contains(i)))return;var i;const r=t.parentElement,o=this._getHandleHost(),s=this._viewResizerWrapper,a=[s.getStyle("width"),s.getStyle("height"),s.getStyle("left"),s.getStyle("top")];let l;if(r.isSameNode(o)){const c=e||new K(o);l=[c.width+"px",c.height+"px",void 0,void 0]}else l=[o.offsetWidth+"px",o.offsetHeight+"px",o.offsetLeft+"px",o.offsetTop+"px"];Et(a,l)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:l[0],height:l[1],left:l[2],top:l[3]},s)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(e=>{e.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i={x:(r=e).pageX,y:r.pageY};var r;const o=!this._options.isCentered||this._options.isCentered(this),s={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};o&&t.activeHandlePosition.endsWith("-right")&&(s.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),o&&(s.x*=2);let a=Math.abs(t.originalWidth+s.x),l=Math.abs(t.originalHeight+s.y);return(a/t.aspectRatio>l?"width":"height")=="width"?l=a/t.aspectRatio:a=l*t.aspectRatio,{width:Math.round(a),height:Math.round(l),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const r of t)e.appendChild(new ri({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(i=r,`ck-widget__resizer__handle-${i}`)}}).render());var i}_appendSizeUI(e){this._sizeView=new u3,this._sizeView.render(),e.appendChild(this._sizeView.element)}}class Wd extends C{constructor(){super(...arguments),m(this,"_resizers",new Map),m(this,"_observer"),m(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,t=R.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(_a),this._observer=new(Mt()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Pr(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(R.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{const r=i.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new Sk(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const o=i.get("WidgetToolbarRepository");t.on("begin",()=>{o.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{o.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{o.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;Sk.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}class ms extends Ti{constructor(e){super(e),m(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const t=this.document;function i(r){return(o,s)=>{s.preventDefault();const a=s.dropRange?[s.dropRange]:null,l=new Gi(t,r);t.fire(l,{dataTransfer:s.dataTransfer,method:o.name,targetRanges:a,target:s.target,domEvent:s.domEvent}),l.stop.called&&s.stopPropagation()}}this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"})}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",r={dataTransfer:new dp(t,{cacheFiles:i})};if(e.type=="drop"||e.type=="dragover"){const o=fg(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}}function h3(n){return((n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}const Ik=["figcaption","li"],Pk=["ol","ul"];function Mk(n,e){if(e.is("$text")||e.is("$textProxy"))return e.data;if(e.is("element","img")&&e.hasAttribute("alt"))return e.getAttribute("alt");if(e.is("element","br"))return`
`;let t="",i=null;for(const r of e.getChildren())t+=m3(r,i)+Mk(n,r),i=r;if(e.is("rawElement")){const r=document.createElement("div");e.render(r,n),t+=Vk(r)}return t}function Vk(n){let e="";if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.tagName==="BR")return`
`;for(const t of n.childNodes)e+=Vk(t);return e}function m3(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||Pk.includes(n.name)&&Pk.includes(e.name)?`

`:n.is("containerElement")||e.is("containerElement")?Ik.includes(n.name)||Ik.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:"":""}class gs extends C{constructor(){super(...arguments),m(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{const o=r.model.document.selection;r.setSelection(t);const s=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),a=i(r),l=this._removeFakeMarkersInsideElement(r,a);for(const[c,d]of Object.entries(s)){l[c]||(l[c]=r.createRangeIn(a));for(const u of d)r.remove(u)}a.markers.clear();for(const[c,d]of Object.entries(l))a.markers.set(c,d);return r.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,t){const i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{const o=this._insertFakeMarkersElements(r,i),s=t(r),a=this._removeFakeMarkersInsideElement(r,s);for(const l of Object.values(o).flat())r.remove(l);for(const[l,c]of Object.entries(a))r.model.markers.has(l)||r.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return s})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const r=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;const{allowedActions:r}=i;return r==="all"||r.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){const r=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,t,i){const r=Array.from(t.getRanges()),o=new Set(r.flatMap(s=>Array.from(e.model.markers.getMarkersIntersectingRange(s))));return Array.from(o).filter(s=>{if(!this._isMarkerCopyable(s.name,i))return!1;const{copyPartiallySelected:a}=this._getMarkerClipboardConfig(s.name);if(!a){const l=s.getRange();return r.some(c=>c.containsRange(l,!0))}return!0}).map(s=>({name:i==="dragstart"?this._getUniqueMarkerName(s.name):s.name,range:s.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([r,o])=>{if(!this._hasMarkerConfiguration(r))return[{name:r,range:o}];if(this._isMarkerCopyable(r,t)){const s=this._getMarkerClipboardConfig(r),a=i.markers.has(r)&&i.markers.get(r).getRange().root.rootName==="$graveyard";return(s.duplicateOnPaste||a)&&(r=this._getUniqueMarkerName(r)),[{name:r,range:o}]}return[]})}_insertFakeMarkersElements(e,t){const i={},r=t.flatMap(o=>{const{start:s,end:a}=o.range;return[{position:s,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:s})=>o.isBefore(s)?1:-1);for(const{position:o,marker:s,type:a}of r){const l=e.createElement("$marker",{"data-name":s.name,"data-type":a});i[s.name]||(i[s.name]=[]),i[s.name].push(l),e.insert(l,o)}return i}_removeFakeMarkersInsideElement(e,t){return O2(this._getAllFakeMarkersFromElement(e,t).reduce((i,r)=>{const o=r.markerElement&&e.createPositionBefore(r.markerElement);let s=i[r.name],a=!1;return s!=null&&s.start&&s!=null&&s.end&&(this._getMarkerClipboardConfig(r.name).duplicateOnPaste?i[this._getUniqueMarkerName(r.name)]=i[r.name]:a=!0,s=null),a||(i[r.name]={...s,[r.type]:o}),r.markerElement&&e.remove(r.markerElement),i},{}),i=>new T(i.start||e.createPositionFromPath(t,[0]),i.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const i=Array.from(e.createRangeIn(t)).flatMap(({item:s})=>{if(!s.is("element","$marker"))return[];const a=s.getAttribute("data-name"),l=s.getAttribute("data-type");return[{markerElement:s,name:a,type:l}]}),r=[],o=[];for(const s of i)s.type==="end"&&(i.some(a=>a.name===s.name&&a.type==="start")||r.push({markerElement:null,name:s.name,type:"start"})),s.type==="start"&&(i.some(a=>a.name===s.name&&a.type==="end")||o.unshift({markerElement:null,name:s.name,type:"end"}));return[...r,...i,...o]}_getUniqueMarkerName(e){const t=e.split(":"),i=Tt().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}}class Vt extends C{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[gs]}init(){this.editor.editing.view.addObserver(ms),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){const r=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:i})})}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,r=i.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(r,"clipboardInput",(s,a)=>{a.method!="paste"||e.model.canEditAt(e.model.document.selection)||s.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(s,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let h="";l.getData("text/html")?h=function(g){return g.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(p,f)=>f.length==1?" ":f).replace(/<!--[\s\S]*?-->/g,"")}(l.getData("text/html")):l.getData("text/plain")&&(h=h3(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(h)}const d=new Gi(this,"inputTransformation"),u=l.getData("application/ckeditor5-editor-id")||null;this.fire(d,{content:c,dataTransfer:l,sourceEditorId:u,targetRanges:a.targetRanges,method:a.method}),d.stop.called&&s.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(s,a)=>{if(a.content.isEmpty)return;const l=this.editor.data.toModel(a.content,"$clipboardHolder");l.childCount!=0&&(s.stop(),t.change(()=>{this.fire("contentInsertion",{content:l,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(s,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,i=e.editing.view.document,r=(o,s)=>{const a=s.dataTransfer;s.preventDefault(),this._fireOutputTransformationEvent(a,t.selection,o.name)};this.listenTo(i,"copy",r,{priority:"low"}),this.listenTo(i,"cut",(o,s)=>{e.model.canEditAt(e.model.document.selection)?r(o,s):s.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,s)=>{const a=e.data.toView(s.content,{isClipboardPipeline:!0});i.fire("clipboardOutput",{dataTransfer:s.dataTransfer,content:a,method:s.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(o,s)=>{s.content.isEmpty||(s.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(s.content)),s.dataTransfer.setData("text/plain",Mk(e.data.htmlProcessor.domConverter,s.content)),s.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),s.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}const qd=xn("px");class g3 extends N{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>qd(t)),top:e.to("top",t=>qd(t)),width:e.to("width",t=>qd(t))}}})}}class Wa extends C{constructor(){super(...arguments),m(this,"removeDropMarkerDelayed",vc(()=>this.removeDropMarker(),40)),m(this,"_updateDropMarkerThrottled",Pr(e=>this._updateDropMarker(e),40)),m(this,"_reconvertMarkerThrottled",Pr(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0)),m(this,"_dropTargetLineView",new g3),m(this,"_domEmitter",new(Mt())),m(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,r,o,s){this.removeDropMarkerDelayed.cancel();const a=Lk(this.editor,e,t,i,r,o,s);if(a)return s&&s.containsRange(a)?this.removeDropMarker():void this._updateDropMarkerThrottled(a)}getFinalDropRange(e,t,i,r,o,s){const a=Lk(this.editor,e,t,i,r,o,s);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change(r=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const i=this.toDomElement(t);return i.append("\u2060",t.createElement("span"),"\u2060"),i})}_updateDropTargetLine(e){const t=this.editor.editing,i=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,s=i?t.mapper.toViewElement(i):null,a=s?t.view.domConverter.mapViewToDom(s):null,l=r?t.mapper.toViewElement(r):null,c=l?t.view.domConverter.mapViewToDom(l):null,d=t.mapper.toViewElement(o);if(!d)return;const u=t.view.domConverter.mapViewToDom(d),h=this._getScrollableRect(d),{scrollX:g,scrollY:p}=R.window,f=a?new K(a):null,b=c?new K(c):null,k=new K(u).excludeScrollbarsAndBorders(),w=f?f.bottom:k.top,_=b?b.top:k.bottom,y=R.window.getComputedStyle(u),x=w<=_?(w+_)/2:_;if(h.top<x&&x<h.bottom){const A=k.left+parseFloat(y.paddingLeft),I=k.right-parseFloat(y.paddingRight),M=Math.max(A+g,h.left),D=Math.min(I+g,h.right);this._dropTargetLineView.set({isVisible:!0,left:M,top:x+p,width:D-M})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{i=function(o){let s=o;do{s=s.parentElement;const a=R.window.getComputedStyle(s).overflowY;if(a=="auto"||a=="scroll")break}while(s.tagName!="BODY");return s}(this.editor.editing.view.domConverter.mapViewToDom(e)),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const r=new So(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:r})}return new K(i).excludeScrollbarsAndBorders()}}function Lk(n,e,t,i,r,o,s){const a=n.model,l=n.editing.mapper;let c=Nk(n,e);for(;c;){if(!o){if(a.schema.checkChild(c,"$text")){if(t){const d=t[0].start,u=l.toModelPosition(d);if(!s||Array.from(s.getItems({shallow:!0})).every(h=>a.schema.checkChild(u,h))){if(a.schema.checkChild(u,"$text"))return a.createRange(u);if(d)return qa(n,Nk(n,d.parent),i,r)}}}else if(a.schema.isInline(c))return qa(n,c,i,r)}if(a.schema.isBlock(c))return qa(n,c,i,r);if(a.schema.checkChild(c,"$block")){const d=Array.from(c.getChildren()).filter(g=>g.is("element")&&!p3(n,g));let u=0,h=d.length;if(h==0)return a.createRange(a.createPositionAt(c,"end"));for(;u<h-1;){const g=Math.floor((u+h)/2);Ok(n,d[g],i,r)=="before"?h=g:u=g}return qa(n,d[u],i,r)}c=c.parent}return null}function p3(n,e){const t=n.editing.mapper,i=n.editing.view.domConverter,r=t.toViewElement(e);if(!r)return!0;const o=i.mapViewToDom(r);return R.window.getComputedStyle(o).float!="none"}function qa(n,e,t,i){const r=n.model;return r.createRange(r.createPositionAt(e,Ok(n,e,t,i)))}function Ok(n,e,t,i){const r=n.editing.mapper,o=n.editing.view.domConverter,s=r.toViewElement(e),a=o.mapViewToDom(s),l=new K(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function Nk(n,e){const t=n.editing.mapper,i=n.editing.view,r=t.toModelElement(e);if(r)return r;const o=i.createPositionBefore(e),s=t.findMappedViewAncestor(o);return t.toModelElement(s)}class f3 extends C{constructor(){super(...arguments),m(this,"_isBlockDragging",!1),m(this,"_domEmitter",new(Mt()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),W.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const t=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(t,"dragstart",(i,r)=>this._handleBlockDragStart(r)),this._domEmitter.listenTo(R.document,"dragover",(i,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(R.document,"drop",(i,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(R.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&t.setAttribute("draggable","true"),this.on("change:isEnabled",(i,r,o)=>{t.setAttribute("draggable",o?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,i=t.document.selection,r=this.editor.editing.view,o=Array.from(i.getSelectedBlocks()),s=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(s)),this._isBlockDragging=!0,r.focus(),r.getObserver(ms).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,r=document.elementFromPoint(t,i),o=this.editor.editing.view;r&&r.closest(".ck-editor__editable")&&o.getObserver(ms).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class b3 extends C{constructor(){super(...arguments),m(this,"_draggedRange"),m(this,"_draggingUid"),m(this,"_draggableElement"),m(this,"_clearDraggableAttributesDelayed",vc(()=>this._clearDraggableAttributes(),40)),m(this,"_blockMode",!1),m(this,"_domEmitter",new(Mt())),m(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt,Qr,Wa,f3]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(ms),t.addObserver(_a),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,r,o)=>{o||this._finalizeDragging(!1)}),W.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=e.editing.view,r=i.document,o=e.plugins.get(Wa);this.listenTo(r,"dragstart",(s,a)=>{var l;if((l=a.target)!=null&&l.is("editableElement")||(this._prepareDraggedRange(a.target),!this._draggedRange))return void a.preventDefault();this._draggingUid=Tt(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,c,"dragstart");const{dataTransfer:d,domTarget:u,domEvent:h}=a,{clientX:g}=h;this._updatePreview({dataTransfer:d,domTarget:u,clientX:g}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(s,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(R.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(s,a)=>{if(!this.isEnabled)return void(a.dataTransfer.dropEffect="none");const{clientX:l,clientY:c}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),W.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),s.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,t=e.editing.view.document,i=e.plugins.get(Wa);this.listenTo(t,"clipboardInput",(r,o)=>{if(o.method!="drop")return;const{clientX:s,clientY:a}=o.domEvent,l=i.getFinalDropRange(o.target,o.targetRanges,s,a,this._blockMode,this._draggedRange);if(!l)return this._finalizeDragging(!1),void r.stop();if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Rk(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(l,!0))return this._finalizeDragging(!1),void r.stop();o.targetRanges=[e.editing.mapper.toViewRange(l)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Vt);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const r=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const r=Rk(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(r,o)=>{if(W.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=zk(o.target);if(W.isBlink&&!e.isReadOnly&&!s&&!i.selection.isCollapsed){const a=i.selection.getSelectedElement();a&&Je(a)||(s=i.selection.editableElement)}s&&(t.change(a=>{a.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(i,"mouseup",()=>{W.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,i=t.model;t.plugins.get(Wa).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(r=>{const o=i.createSelection(this._draggedRange);i.deleteContent(o,{doNotAutoparagraph:!0});const s=o.getFirstPosition().parent;s.isEmpty&&!i.schema.checkChild(s,"$text")&&i.schema.checkChild(s,"paragraph")&&r.insertElement("paragraph",s,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,i=t.model,r=i.document.selection,o=e?zk(e):null;if(o){const c=t.editing.mapper.toModelElement(o);this._draggedRange=Lt.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;const s=Array.from(r.getSelectedBlocks()),a=r.getFirstRange();if(s.length==0)return void(this._draggedRange=Lt.fromRange(a));const l=Dk(i,s);if(s.length>1)this._draggedRange=Lt.fromRange(l),this._blockMode=!0;else if(s.length==1){const c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=Lt.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){const r=this.editor.editing.view,o=r.document.selection.editableElement,s=r.domConverter.mapViewToDom(o),a=R.window.getComputedStyle(s);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=pi(R.document,"div",{style:"position: fixed; left: -999999px;"}),R.document.body.appendChild(this._previewContainer));const l=new K(s);if(s.contains(t))return;const c=parseFloat(a.paddingLeft),d=pi(R.document,"div");d.className="ck ck-content",d.style.width=a.width,d.style.paddingLeft=`${l.left-i+c}px`,W.isiOS&&(d.style.backgroundColor="white"),r.domConverter.setContentOf(d,e.getData("text/html")),e.setDragImage(d,0,0),this._previewContainer.appendChild(d)}}function Rk(n){return W.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function zk(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Je);if(Je(n))return n;const e=n.findAncestor(t=>Je(t)||t.is("editableElement"));return Je(e)?e:null}function Dk(n,e){const t=e[0],i=e[e.length-1],r=t.getCommonAncestor(i),o=n.createPositionBefore(t),s=n.createPositionAfter(i);if(r&&r.is("element")&&!n.schema.isLimit(r)){const a=n.createRangeOn(r),l=o.isTouching(a.start),c=s.isTouching(a.end);if(l&&c)return Dk(n,[r])}return n.createRange(o,s)}class k3 extends C{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt]}init(){const e=this.editor,t=e.model,i=e.editing.view,r=t.document.selection;i.addObserver(ms),e.plugins.get(Vt).on("contentInsertion",(o,s)=>{(function(a,l){let c=l.createRangeIn(a);if(a.childCount==1){const d=a.getChild(0);d.is("element")&&l.schema.isBlock(d)&&!l.schema.isObject(d)&&!l.schema.isLimit(d)&&(c=l.createRangeIn(d))}for(const d of c.getItems())if(!l.schema.isInline(d)||Array.from(d.getAttributeKeys()).find(u=>l.schema.getAttributeProperties(u).isFormatting))return!1;return!0})(s.content,t)&&t.change(a=>{const l=Array.from(r.getAttributes()).filter(([d])=>t.schema.getAttributeProperties(d).isFormatting);r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0}),l.push(...r.getAttributes());const c=a.createRangeIn(s.content);for(const d of c.getItems())for(const u of l)t.schema.checkAttribute(d,u[0])&&a.setAttribute(u[0],u[1],d)})})}}class Gd extends C{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gs,Vt,b3,k3]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}const Zd=/^data:(\S*?);base64,/;class JM extends ye(){constructor(e,t,i){if(super(),m(this,"file"),m(this,"xhr"),m(this,"_token"),m(this,"_apiAddress"),!e)throw new v("fileuploader-missing-file",null);if(!t)throw new v("fileuploader-missing-token",null);if(!i)throw new v("fileuploader-missing-api-address",null);this.file=function(r){var o;return typeof r!="string"?!1:!!((o=r.match(Zd))!=null&&o.length)}(e)?function(r,o=512){try{const s=r.match(Zd)[1],a=atob(r.replace(Zd,"")),l=[];for(let c=0;c<a.length;c+=o){const d=a.slice(c,c+o),u=new Array(d.length);for(let h=0;h<d.length;h++)u[h]=d.charCodeAt(h);l.push(new Uint8Array(u))}return new Blob(l,{type:s})}catch{throw new v("fileuploader-decoding-image-data-error",null)}}(e):e,this._token=t,this._apiAddress=i}onProgress(e){return this.on("progress",(t,i)=>e(i)),this}onError(e){return this.once("error",(t,i)=>e(i)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,t=i=>()=>this.fire("error",i);e.addEventListener("error",t("Network Error")),e.addEventListener("abort",t("Abort")),e.upload&&e.upload.addEventListener("progress",i=>{i.lengthComputable&&this.fire("progress",{total:i.total,uploaded:i.loaded})}),e.addEventListener("load",()=>{const i=e.status,r=e.response;if(i<200||i>299)return this.fire("error",r.message||r.error)})}_sendRequest(){const e=new FormData,t=this.xhr;return e.append("file",this.file),new Promise((i,r)=>{t.addEventListener("load",()=>{const o=t.status,s=t.response;return o<200||o>299?s.message?r(new v("fileuploader-uploading-data-failed",this,{message:s.message})):r(s.error):i(s)}),t.addEventListener("error",()=>r(new Error("Network Error"))),t.addEventListener("abort",()=>r(new Error("Abort"))),t.send(e)})}}function Ga(n){const e=n.t,t=n.config.get("codeBlock.languages");for(const i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function Za(n,e,t){const i={};for(const r of n)e==="class"?i[r[e].split(" ").shift()]=r[t]:i[r[e]]=r[t];return i}function Kd(n){return n.data.match(/^(\s*)/)[0]}function Yd(n){const e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];const i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:r}of i){let o=r.is("$textProxy")?r.textNode:r;const s=o.parent;if(!s.is("element","codeBlock")||o.is("element","softBreak"))continue;for(;o.previousSibling&&!o.previousSibling.is("element","softBreak");)o=o.previousSibling;const a=o.is("$text")?o.startOffset+Kd(o).length:o.startOffset,l=n.createPositionAt(s,a);t.every(c=>!c.isEqual(l))&&t.push(l)}return t}function Bk(n){const e=Ce(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function Fk(n,e){return!e.is("rootElement")&&!n.isLimit(e)&&n.checkChild(e.parent,"codeBlock")}function jk(n,e,t,i){const r=Za(e,"language","label"),o=t.getAttribute("language");if(o in r){const s=r[o];return n(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",s)}return n(i==="enter"?"Entering code snippet":"Leaving code snippet")}function $k(n,e){for(n.textNode&&(n=e.createPositionBefore(n.textNode));n.nodeBefore&&!n.nodeBefore.is("element","softBreak");)n=e.createPositionBefore(n.nodeBefore);const t=n.nodeAfter;return t&&t.is("$text")?t:null}class w3 extends G{constructor(e){super(e),m(this,"_lastLanguage"),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor,i=t.model,r=i.document.selection,o=Ga(t)[0],s=Array.from(r.getSelectedBlocks()),a=e.forceValue==null?!this.value:e.forceValue,l=function(c,d,u){return c.language?c.language:c.usePreviousLanguageChoice&&d?d:u}(e,this._lastLanguage,o.language);i.change(c=>{a?this._applyCodeBlock(c,s,l):this._removeCodeBlock(c,s)})}_getValue(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());return!!(e!=null&&e.is("element","codeBlock"))&&e.getAttribute("language")}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=Ce(e.getSelectedBlocks());return!!i&&Fk(t,i)}_applyCodeBlock(e,t,i){this._lastLanguage=i;const r=this.editor.model.schema,o=t.filter(s=>Fk(r,s));for(const s of o)e.rename(s,"codeBlock"),e.setAttribute("language",i,s),r.removeDisallowedAttributes([s],e),Array.from(s.getChildren()).filter(a=>!r.checkChild(s,a)).forEach(a=>e.remove(a));o.reverse().forEach((s,a)=>{const l=o[a+1];s.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(s)))})}_removeCodeBlock(e,t){const i=t.filter(r=>r.is("element","codeBlock"));for(const r of i){const o=e.createRangeOn(r);for(const s of Array.from(o.getItems()).reverse())if(s.is("element","softBreak")&&s.parent.is("element","codeBlock")){const{position:a}=e.split(e.createPositionBefore(s)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(s)}e.rename(r,"paragraph"),e.removeAttribute("language",r)}}}class _3 extends G{constructor(e){super(e),m(this,"_indentSequence"),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model;e.change(t=>{const i=Yd(e);for(const r of i){const o=t.createText(this._indentSequence);e.insertContent(o,r)}})}_checkEnabled(){return!!this._indentSequence&&Bk(this.editor.model.document.selection)}}class v3 extends G{constructor(e){super(e),m(this,"_indentSequence"),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model;e.change(()=>{const t=Yd(e);for(const i of t){const r=Hk(e,i,this._indentSequence);r&&e.deleteContent(e.createSelection(r))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return!!Bk(e.document.selection)&&Yd(e).some(t=>Hk(e,t,this._indentSequence))}}function Hk(n,e,t){const i=$k(e,n);if(!i)return null;const r=Kd(i),o=r.lastIndexOf(t);if(o+t.length!==r.length||o===-1)return null;const{parent:s,startOffset:a}=i;return n.createRange(n.createPositionAt(s,a+o),n.createPositionAt(s,a+o+t.length))}function Uk(n,e,t=!1){const i=Za(e,"language","class"),r=Za(e,"language","label");return(o,s,a)=>{const{writer:l,mapper:c,consumable:d}=a;if(!d.consume(s.item,"insert"))return;const u=s.item.getAttribute("language"),h=c.toViewPosition(n.createPositionBefore(s.item)),g={};t&&(g["data-language"]=r[u],g.spellcheck="false");const p=i[u]?{class:i[u]}:void 0,f=l.createContainerElement("code",p),b=l.createContainerElement("pre",g,f);l.insert(h,b),c.bindElements(s.item,f)}}const Wk="paragraph";class y3 extends C{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[fk]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const e=this.editor,t=e.model.schema,i=e.model,r=e.editing.view,o=Ga(e);e.commands.add("codeBlock",new w3(e)),e.commands.add("indentCodeBlock",new _3(e)),e.commands.add("outdentCodeBlock",new v3(e)),this.listenTo(r.document,"tab",(s,a)=>{const l=a.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(l).isEnabled&&(e.execute(l),a.stopPropagation(),a.preventDefault(),s.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((s,a)=>{const l=s.getItem(s.length-2);if(t.getAttributeProperties(a).isFormatting&&l&&l.name=="codeBlock")return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",Uk(i,o,!0)),e.data.downcastDispatcher.on("insert:codeBlock",Uk(i,o)),e.data.downcastDispatcher.on("insert:softBreak",function(s){return(a,l,c)=>{if(l.item.parent.name!=="codeBlock")return;const{writer:d,mapper:u,consumable:h}=c;if(!h.consume(l.item,"insert"))return;const g=u.toViewPosition(s.createPositionBefore(l.item));d.insert(g,d.createText(`
`))}}(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",function(s,a){const l=Za(a,"class","language"),c=a[0].language;return(d,u,h)=>{const g=u.viewItem,p=g.parent;if(!p||!p.is("element","pre")||u.modelCursor.findAncestor("codeBlock"))return;const{consumable:f,writer:b}=h;if(!f.test(g,{name:!0}))return;const k=b.createElement("codeBlock"),w=[...g.getClassNames()];w.length||w.push("");for(const _ of w){const y=l[_];if(y){b.setAttribute("language",y,k);break}}k.hasAttribute("language")||b.setAttribute("language",c,k),h.convertChildren(g,k),h.safeInsert(k,u.modelCursor)&&(f.consume(g,{name:!0}),h.updateConversionResult(k,u))}}(0,o)),e.data.upcastDispatcher.on("text",(s,a,{consumable:l,writer:c})=>{let d=a.modelCursor;if(!l.test(a.viewItem)||!d.findAncestor("codeBlock"))return;l.consume(a.viewItem);const u=a.viewItem.data.split(`
`).map(g=>c.createText(g)),h=u[u.length-1];for(const g of u)if(c.insert(g,d),d=d.getShiftedBy(g.offsetSize),g!==h){const p=c.createElement("softBreak");c.insert(p,d),d=c.createPositionAfter(p)}a.modelRange=c.createRange(a.modelCursor,d),a.modelCursor=d}),e.data.upcastDispatcher.on("element:pre",(s,a,{consumable:l})=>{const c=a.viewItem;if(c.findAncestor("pre"))return;const d=Array.from(c.getChildren()),u=d.find(h=>h.is("element","code"));if(u)for(const h of d)h!==u&&h.is("$text")&&l.consume(h,{name:!0})},{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(s,a)=>{let l=i.createRange(i.document.selection.anchor);if(a.targetRanges&&(l=e.editing.mapper.toModelRange(a.targetRanges[0])),!l.start.parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/plain"),d=new Si(e.editing.view.document);a.content=function(u,h){const g=u.createDocumentFragment(),p=h.split(`
`),f=p.reduce((b,k,w)=>(b.push(k),w<p.length-1&&b.push(u.createElement("br")),b),[]);return u.appendChild(f,g),g}(d,c)}),e.plugins.has("ClipboardPipeline")&&e.plugins.get(Vt).on("contentInsertion",(s,a)=>{const l=e.model,c=l.document.selection;c.anchor.parent.is("element","codeBlock")&&l.change(d=>{const u=d.createRangeIn(a.content);for(const h of[...u.getItems()])h.is("node")&&!t.checkChild(c.anchor,h)&&d.remove(h)})}),this.listenTo(i,"getSelectedContent",(s,[a])=>{const l=a.anchor;!a.isCollapsed&&l.parent.is("element","codeBlock")&&l.hasSameParentAs(a.focus)&&i.change(c=>{const d=s.return;if(l.parent.is("element")&&(d.childCount>1||a.containsEntireContent(l.parent))){const h=c.createElement("codeBlock",l.parent.getAttributes());c.append(d,h);const g=c.createDocumentFragment();return c.append(h,g),void(s.return=g)}const u=d.getChild(0);t.checkAttribute(u,"code")&&c.setAttribute("code",!0,u)})})}afterInit(){const e=this.editor,t=e.commands,i=t.get("indent"),r=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),r&&r.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(o,s)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(function(a,l){const c=a.model,d=c.document,u=a.editing.view,h=d.selection.getLastPosition(),g=h.nodeAfter;return l||!d.selection.isCollapsed||!h.isAtStart||!ur(g)?!1:(a.model.change(p=>{a.execute("enter");const f=d.selection.anchor.parent.previousSibling;p.rename(f,Wk),p.setSelection(f,"in"),a.model.schema.removeDisallowedAttributes([f],p),p.remove(g)}),u.scrollToTheSelection(),!0)}(e,s.isSoft)||function(a,l){const c=a.model,d=c.document,u=a.editing.view,h=d.selection.getLastPosition(),g=h.nodeBefore;let p;if(l||!d.selection.isCollapsed||!h.isAtEnd||!g||!g.previousSibling)return!1;if(ur(g)&&ur(g.previousSibling))p=c.createRange(c.createPositionBefore(g.previousSibling),c.createPositionAfter(g));else if(Qd(g)&&ur(g.previousSibling)&&ur(g.previousSibling.previousSibling))p=c.createRange(c.createPositionBefore(g.previousSibling.previousSibling),c.createPositionAfter(g));else{if(!(Qd(g)&&ur(g.previousSibling)&&Qd(g.previousSibling.previousSibling)&&g.previousSibling.previousSibling&&ur(g.previousSibling.previousSibling.previousSibling)))return!1;p=c.createRange(c.createPositionBefore(g.previousSibling.previousSibling.previousSibling),c.createPositionAfter(g))}return a.model.change(f=>{f.remove(p),a.execute("enter");const b=d.selection.anchor.parent;f.rename(b,Wk),a.model.schema.removeDisallowedAttributes([b],f)}),u.scrollToTheSelection(),!0}(e,s.isSoft)||function(a){const l=a.model,c=l.document;let d;const u=$k(c.selection.getLastPosition(),l);u&&u.is("$text")&&(d=Kd(u)),a.model.change(h=>{a.execute("shiftEnter"),d&&h.insertText(d,c.selection.anchor)})}(e),s.preventDefault(),o.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:e,ui:t,t:i}=this.editor,r=Ga(this.editor);let o=null;e.document.selection.on("change:range",()=>{const s=e.document.selection.focus.parent;t&&o!==s&&s.is("element")&&(o&&o.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(jk(i,r,o,"leave")),s.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(jk(i,r,s,"enter")),o=s)})}}function Qd(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function ur(n){return n&&n.is("element","softBreak")}class x3 extends C{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=e.ui.componentFactory,r=Ga(e),o=this._getLanguageListItemDefinitions(r),s=e.commands.get("codeBlock");i.add("codeBlock",a=>{const l=mt(a,sr),c=l.buttonView,d=t("Insert code block");return c.set({label:d,tooltip:!0,icon:Of,isToggleable:!0}),c.bind("isOn").to(s,"value",u=>!!u),c.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),l.on("execute",u=>{e.execute("codeBlock",{language:u.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(s),En(l,o,{role:"menu",ariaLabel:d}),l}),i.add("menuBar:codeBlock",a=>{const l=new Yt(a);l.buttonView.set({role:"menuitem",label:t("Code block"),icon:Of}),l.bind("isEnabled").to(s);const c=new tn(a);c.set({ariaLabel:t("Insert code block")});for(const d of o){const u=new Mi(a,l),h=new Se(a);h.bind(...Object.keys(d.model)).to(d.model),h.set({isToggleable:!0,role:"menuitemcheckbox"}),h.delegate("execute").to(l),h.on("execute",()=>{e.execute("codeBlock",{language:d.model._codeBlockLanguage,forceValue:s.value!=d.model._codeBlockLanguage}),e.editing.view.focus()}),u.children.add(h),c.items.add(u)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(e){const t=this.editor.commands.get("codeBlock"),i=new ot;for(const r of e){const o={type:"button",model:new en({_codeBlockLanguage:r.language,label:r.label,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(t,"value",s=>s===o.model._codeBlockLanguage),i.add(o)}return i}}class C3 extends C{static get requires(){return[y3,x3]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}class A3 extends YT{constructor(e,t){super(e),m(this,"view"),this.view=t}get element(){return this.view.editable.element}init(){const e=this.editor,t=this.view,i=e.editing.view,r=t.editable,o=i.document.getRoot();r.name=o.rootName,t.render();const s=r.element;this.setEditableElement(r.name,s),r.bind("isFocused").to(this.focusTracker),i.attachDomRoot(s),this._initPlaceholder(),this.initMenuBar(this.view.menuBarView),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),r=e.config.get("placeholder");if(r){const o=typeof r=="string"?r:r[i.rootName];o&&(i.placeholder=o)}Ac({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}}class T3 extends QT{constructor(e,t,i,r){super(e),m(this,"editable"),m(this,"menuBarView"),this.editable=new XT(e,t,i,{label:r}),this.menuBarView=new uE(e),this.menuBarView.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}})}render(){super.render(),this.registerChild(this.editable),this.registerChild(this.menuBarView)}}class E3 extends nd(Br){constructor(e,t={}){if(!Ka(e)&&t.initialData!==void 0)throw new v("editor-create-initial-data",null);super(t),m(this,"ui"),this.config.get("initialData")===void 0&&this.config.set("initialData",function(o){return Ka(o)?$2(o):o}(e)),Ka(e)&&(this.sourceElement=e,IC(this,e));const i=this.config.get("plugins");i.push(sE),this.config.set("plugins",i),this.config.define("balloonToolbar",this.config.get("toolbar")),this.model.document.createRoot();const r=new T3(this.locale,this.editing.view,this.sourceElement,this.config.get("label"));this.ui=new A3(this,r),SC(this)}static get editorName(){return"BalloonEditor"}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then(()=>{this.sourceElement&&this.updateSourceElement(e)})}static create(e,t={}){return new Promise(i=>{if(Ka(e)&&e.tagName==="TEXTAREA")throw new v("editor-wrong-element",null);const r=new this(e,t);i(r.initPlugins().then(()=>r.ui.init()).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}}function Ka(n){return vn(n)}var Jd,S3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qk={exports:{}};Jd=qk,((n,e)=>{Jd.exports?Jd.exports=e():n.fuzzysort=e()})(S3,n=>{var e=L=>{typeof L=="number"?L=""+L:typeof L!="string"&&(L="");var E=p(L);return r(L,{_targetLower:E._lower,_targetLowerCodes:E.lowerCodes,_bitflags:E.bitflags})};class t{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((E,B)=>E-B)}set indexes(E){return this._indexes=E}highlight(E,B){return((J,Y="<b>",Z="</b>")=>{for(var ke=typeof Y=="function"?Y:void 0,we=J.target,ne=we.length,oe=J.indexes,Te="",qe=0,Be=0,be=!1,Ve=[],Fe=0;Fe<ne;++Fe){var st=we[Fe];if(oe[Be]===Fe){if(++Be,be||(be=!0,ke?(Ve.push(Te),Te=""):Te+=Y),Be===oe.length){ke?(Te+=st,Ve.push(ke(Te,qe++)),Te="",Ve.push(we.substr(Fe+1))):Te+=st+Z+we.substr(Fe+1);break}}else be&&(be=!1,ke?(Ve.push(ke(Te,qe++)),Te=""):Te+=Z);Te+=st}return ke?Ve:Te})(this,E,B)}get score(){return o(this._score)}set score(E){this._score=s(E)}}class i extends Array{get score(){return o(this._score)}set score(E){this._score=s(E)}}var r=(L,E)=>{const B=new t;return B.target=L,B.obj=E.obj??We,B._score=E._score??ce,B._indexes=E._indexes??[],B._targetLower=E._targetLower??"",B._targetLowerCodes=E._targetLowerCodes??We,B._nextBeginningIndexes=E._nextBeginningIndexes??We,B._bitflags=E._bitflags??0,B},o=L=>L===ce?0:L>1?L:Math.E**(-2*((1-L)**.04307-1)),s=L=>L===0?ce:L>1?L:1-Math.pow(Math.log(L)/-2+1,1/.04307),a=L=>{typeof L=="number"?L=""+L:typeof L!="string"&&(L=""),L=L.trim();var E=p(L),B=[];if(E.containsSpace){var J=L.split(/\s+/);J=[...new Set(J)];for(var Y=0;Y<J.length;Y++)if(J[Y]!==""){var Z=p(J[Y]);B.push({lowerCodes:Z.lowerCodes,_lower:J[Y].toLowerCase(),containsSpace:!1})}}return{lowerCodes:E.lowerCodes,_lower:E._lower,containsSpace:E.containsSpace,bitflags:E.bitflags,spaceSearches:B}},l=L=>{if(L.length>999)return e(L);var E=b.get(L);return E!==void 0||(E=e(L),b.set(L,E)),E},c=L=>{if(L.length>999)return a(L);var E=k.get(L);return E!==void 0||(E=a(L),k.set(L,E)),E},d=(L,E)=>{var B=[];B.total=L.length;var J=E?.limit||De;if(E!=null&&E.key)for(var Y=0;Y<L.length;Y++){var Z=L[Y];if((oe=D(Z,E.key))!=We){fe(oe)||(oe=l(oe));var ke=r(oe.target,{_score:oe._score,obj:Z});if(B.push(ke),B.length>=J)return B}}else if(E!=null&&E.keys)for(Y=0;Y<L.length;Y++){Z=L[Y];for(var we=new i(E.keys.length),ne=E.keys.length-1;ne>=0;--ne)(oe=D(Z,E.keys[ne]))?(fe(oe)||(oe=l(oe)),oe._score=ce,oe._indexes.len=0,we[ne]=oe):we[ne]=hn;if(we.obj=Z,we._score=ce,B.push(we),B.length>=J)return B}else for(Y=0;Y<L.length;Y++){var oe;if((oe=L[Y])!=We&&(fe(oe)||(oe=l(oe)),oe._score=ce,oe._indexes.len=0,B.push(oe),B.length>=J))return B}return B},u=(L,E,B=!1,J=!1)=>{if(B===!1&&L.containsSpace)return h(L,E,J);for(var Y=L._lower,Z=L.lowerCodes,ke=Z[0],we=E._targetLowerCodes,ne=Z.length,oe=we.length,Te=0,qe=0,Be=0;;){if(ke===we[qe]){if(w[Be++]=qe,++Te===ne)break;ke=Z[Te]}if(++qe>=oe)return We}Te=0;var be=!1,Ve=0,Fe=E._nextBeginningIndexes;Fe===We&&(Fe=E._nextBeginningIndexes=f(E.target));var st=0;if((qe=w[0]===0?0:Fe[w[0]-1])!==oe)for(;;)if(qe>=oe){if(Te<=0||++st>200)break;--Te;var Bi=_[--Ve];qe=Fe[Bi]}else if(Z[Te]===we[qe]){if(_[Ve++]=qe,++Te===ne){be=!0;break}++qe}else qe=Fe[qe];var je=ne<=1?-1:E._targetLower.indexOf(Y,w[0]),Xt=!!~je,_e=!!Xt&&(je===0||E._nextBeginningIndexes[je-1]===je);if(Xt&&!_e){for(var ue=0;ue<Fe.length;ue=Fe[ue])if(!(ue<=je)){for(var yi=0;yi<ne&&Z[yi]===E._targetLowerCodes[ue+yi];yi++);if(yi===ne){je=ue,_e=!0;break}}}var Ge=mn=>{for(var Fi=0,Qu=0,ji=1;ji<ne;++ji)mn[ji]-mn[ji-1]!=1&&(Fi-=mn[ji],++Qu);if(Fi-=(mn[ne-1]-mn[0]-(ne-1)+12)*Qu,mn[0]!==0&&(Fi-=mn[0]*mn[0]*.2),be){var kl=1;for(ji=Fe[0];ji<oe;ji=Fe[ji])++kl;kl>24&&(Fi*=10*(kl-24))}else Fi*=1e3;return Fi-=(oe-ne)/2,Xt&&(Fi/=1+ne*ne*1),_e&&(Fi/=1+ne*ne*1),Fi-=(oe-ne)/2};if(be)if(_e){for(ue=0;ue<ne;++ue)w[ue]=je+ue;vt=w,Dn=Ge(w)}else vt=_,Dn=Ge(_);else{if(Xt)for(var ue=0;ue<ne;++ue)w[ue]=je+ue;var vt,Dn=Ge(vt=w)}for(E._score=Dn,ue=0;ue<ne;++ue)E._indexes[ue]=vt[ue];E._indexes.len=ne;const te=new t;return te.target=E.target,te._score=E._score,te._indexes=E._indexes,te},h=(L,E,B)=>{for(var J=new Set,Y=0,Z=We,ke=0,we=L.spaceSearches,ne=we.length,oe=0,Te=()=>{for(let _e=oe-1;_e>=0;_e--)E._nextBeginningIndexes[y[2*_e+0]]=y[2*_e+1]},qe=!1,Be=0;Be<ne;++Be){A[Be]=ce;var be=we[Be];if(Z=u(be,E),B){if(Z===We)continue;qe=!0}else if(Z===We)return Te(),We;if(Be!==ne-1){var Ve=Z._indexes,Fe=!0;for(let _e=0;_e<Ve.len-1;_e++)if(Ve[_e+1]-Ve[_e]!=1){Fe=!1;break}if(Fe){var st=Ve[Ve.len-1]+1,Bi=E._nextBeginningIndexes[st-1];for(let _e=st-1;_e>=0&&Bi===E._nextBeginningIndexes[_e];_e--)E._nextBeginningIndexes[_e]=st,y[2*oe+0]=_e,y[2*oe+1]=Bi,oe++}}Y+=Z._score/ne,A[Be]=Z._score/ne,Z._indexes[0]<ke&&(Y-=2*(ke-Z._indexes[0])),ke=Z._indexes[0];for(var je=0;je<Z._indexes.len;++je)J.add(Z._indexes[je])}if(B&&!qe)return We;Te();var Xt=u(L,E,!0);if(Xt!==We&&Xt._score>Y){if(B)for(Be=0;Be<ne;++Be)A[Be]=Xt._score/ne;return Xt}B&&(Z=E),Z._score=Y,Be=0;for(let _e of J)Z._indexes[Be++]=_e;return Z._indexes.len=Be,Z},g=L=>L.replace(new RegExp("\\p{Script=Latin}+","gu"),E=>E.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),p=L=>{for(var E=(L=g(L)).length,B=L.toLowerCase(),J=[],Y=0,Z=!1,ke=0;ke<E;++ke){var we=J[ke]=B.charCodeAt(ke);we!==32?Y|=1<<(we>=97&&we<=122?we-97:we>=48&&we<=57?26:we<=127?30:31):Z=!0}return{lowerCodes:J,bitflags:Y,containsSpace:Z,_lower:B}},f=L=>{for(var E=(L=g(L)).length,B=(we=>{for(var ne=we.length,oe=[],Te=0,qe=!1,Be=!1,be=0;be<ne;++be){var Ve=we.charCodeAt(be),Fe=Ve>=65&&Ve<=90,st=Fe||Ve>=97&&Ve<=122||Ve>=48&&Ve<=57,Bi=Fe&&!qe||!Be||!st;qe=Fe,Be=st,Bi&&(oe[Te++]=be)}return oe})(L),J=[],Y=B[0],Z=0,ke=0;ke<E;++ke)Y>ke?J[ke]=Y:(Y=B[++Z],J[ke]=Y===void 0?E:Y);return J},b=new Map,k=new Map,w=[],_=[],y=[],x=[],A=[],I=[],M=[],D=(L,E)=>{var B=L[E];if(B!==void 0)return B;if(typeof E=="function")return E(L);var J=E;Array.isArray(E)||(J=E.split("."));for(var Y=J.length,Z=-1;L&&++Z<Y;)L=L[J[Z]];return L},fe=L=>typeof L=="object"&&typeof L._bitflags=="number",De=1/0,ce=-De,ut=[];ut.total=0;var re,Ue,ht,Jt,We=null,hn=e(""),pr=(re=[],Ue=0,Jt=L=>{for(var E=0,B=re[E],J=1;J<Ue;){var Y=J+1;E=J,Y<Ue&&re[Y]._score<re[J]._score&&(E=Y),re[E-1>>1]=re[E],J=1+(E<<1)}for(var Z=E-1>>1;E>0&&B._score<re[Z]._score;Z=(E=Z)-1>>1)re[E]=re[Z];re[E]=B},(ht={}).add=L=>{var E=Ue;re[Ue++]=L;for(var B=E-1>>1;E>0&&L._score<re[B]._score;B=(E=B)-1>>1)re[E]=re[B];re[E]=L},ht.poll=L=>{if(Ue!==0){var E=re[0];return re[0]=re[--Ue],Jt(),E}},ht.peek=L=>{if(Ue!==0)return re[0]},ht.replaceTop=L=>{re[0]=L,Jt()},ht);return{single:(L,E)=>{if(!L||!E)return We;var B=c(L);fe(E)||(E=l(E));var J=B.bitflags;return(J&E._bitflags)!==J?We:u(B,E)},go:(L,E,B)=>{if(!L)return B!=null&&B.all?d(E,B):ut;var J=c(L),Y=J.bitflags,Z=J.containsSpace,ke=s(B?.threshold||0),we=B?.limit||De,ne=0,oe=0,Te=E.length;function qe(te){ne<we?(pr.add(te),++ne):(++oe,te._score>pr.peek()._score&&pr.replaceTop(te))}if(B!=null&&B.key)for(var Be=B.key,be=0;be<Te;++be){var Ve=E[be];(Ge=D(Ve,Be))&&(fe(Ge)||(Ge=l(Ge)),(Y&Ge._bitflags)===Y&&(vt=u(J,Ge))!==We&&(vt._score<ke||(vt.obj=Ve,qe(vt))))}else if(B!=null&&B.keys){var Fe=B.keys,st=Fe.length;e:for(be=0;be<Te;++be){Ve=E[be];for(var Bi=0,je=0;je<st;++je)Be=Fe[je],(Ge=D(Ve,Be))?(fe(Ge)||(Ge=l(Ge)),I[je]=Ge,Bi|=Ge._bitflags):I[je]=hn;if((Y&Bi)===Y){if(Z)for(let te=0;te<J.spaceSearches.length;te++)x[te]=ce;for(je=0;je<st;++je)if((Ge=I[je])!==hn)if(M[je]=u(J,Ge,!1,Z),M[je]!==We){if(Z)for(let te=0;te<J.spaceSearches.length;te++)A[te]>-1e3&&x[te]>ce&&(yi=(x[te]+A[te])/4)>x[te]&&(x[te]=yi),A[te]>x[te]&&(x[te]=A[te])}else M[je]=hn;else M[je]=hn;if(Z){for(let te=0;te<J.spaceSearches.length;te++)if(x[te]===ce)continue e}else{var Xt=!1;for(let te=0;te<st;te++)if(M[te]._score!==ce){Xt=!0;break}if(!Xt)continue}var _e=new i(st);for(let te=0;te<st;te++)_e[te]=M[te];if(Z){var ue=0;for(let te=0;te<J.spaceSearches.length;te++)ue+=x[te]}else{ue=ce;for(let te=0;te<st;te++){var yi;(vt=_e[te])._score>-1e3&&ue>ce&&(yi=(ue+vt._score)/4)>ue&&(ue=yi),vt._score>ue&&(ue=vt._score)}}if(_e.obj=Ve,_e._score=ue,B?.scoreFn){if(!(ue=B.scoreFn(_e)))continue;ue=s(ue),_e._score=ue}ue<ke||qe(_e)}}}else for(be=0;be<Te;++be){var Ge,vt;(Ge=E[be])&&(fe(Ge)||(Ge=l(Ge)),(Y&Ge._bitflags)===Y&&(vt=u(J,Ge))!==We&&(vt._score<ke||qe(vt)))}if(ne===0)return ut;var Dn=new Array(ne);for(be=ne-1;be>=0;--be)Dn[be]=pr.poll();return Dn.total=ne+oe,Dn},prepare:e,cleanup:()=>{b.clear(),k.clear()}}});var I3=qk.exports;function P3(n){const e=function(){try{return document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{return null}}();if(!e)return!1;const t=20,i=Math.floor(12.5);e.font=i+"px Arial, Sans-Serif",e.textBaseline="top",e.canvas.width=40,e.canvas.height=25,e.clearRect(0,0,40,25),e.fillStyle="#FF0000",e.fillText(n,0,22),e.fillStyle="#0000FF",e.fillText(n,t,22);const r=e.getImageData(0,0,t,25).data,o=r.length;let s=0;for(;s<o&&!r[s+3];s+=4);if(s>=o)return!1;const a=t+s/4%t,l=Math.floor(s/4/t),c=e.getImageData(a,l,1,1).data;return r[s]===c[0]&&r[s+2]===c[2]&&!(e.measureText(n).width>=t)}const M3={0:"default",1:"light",2:"medium-light",3:"medium",4:"medium-dark",5:"dark"},V3={"\u{1FAE9}":16,"\u{1FAE8}":15.1,"\u{1FAE0}":14,"\u{1F636}\u200D\u{1F32B}\uFE0F":13.1,"\u{1F9D1}\u200D\u{1F4BB}":12.1,"\u{1F970}":11,"\u{1F92A}":5,"\u2695\uFE0F":4,"\u{1F923}":3,"\u{1F44B}\u{1F3FD}":2,"\u{1F600}":1,"\u{1F610}":.7,"\u{1F602}":.6},Gk=class i1 extends C{static get pluginName(){return"EmojiUtils"}static get isOfficialPlugin(){return!0}isEmojiSupported(e,t,i){return e.version<=t&&(!this.hasZwj(e.emoji)||this.isEmojiZwjSupported(e,i))}getEmojiSupportedVersionByOs(){for(const[e,t]of Object.entries(V3))if(i1._isEmojiSupported(e))return t;return 0}hasZwj(e){return e.includes("\u200D")}isEmojiZwjSupported(e,t){return this.getNodeWidth(t,e.emoji)<43.2}getNodeWidth(e,t){const i=document.createElement("span");i.textContent=t,e.appendChild(i);const r=i.offsetWidth;return e.removeChild(i),r}createEmojiWidthTestingContainer(){const e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.whiteSpace="nowrap",e.style.fontSize="24px",e}normalizeEmojiSkinTone(e){const t={...e,skins:{default:e.emoji}};return e.skins&&e.skins.forEach(i=>{const r=M3[i.tone];t.skins[r]=i.emoji}),t}isEmojiCategoryAllowed(e){return e.group!==2}};m(Gk,"_isEmojiSupported",P3);let L3=Gk;const Zk=class fl extends C{constructor(e){super(e),m(this,"_items"),m(this,"_url"),m(this,"_repositoryPromise"),e.config.define("emoji",{version:void 0,skinTone:"default",definitionsUrl:void 0,useCustomFont:!1}),this._url=this._getUrl(),this._repositoryPromise=new Promise(t=>{this._repositoryPromiseResolveCallback=t}),this._items=null}static get requires(){return[L3]}static get pluginName(){return"EmojiRepository"}static get isOfficialPlugin(){return!0}async init(){return this._warnAboutCdnUse(),await this._loadAndCacheEmoji(),this._items=this._getItems(),this._items?this._repositoryPromiseResolveCallback(!0):(le("emoji-repository-empty"),this._repositoryPromiseResolveCallback(!1))}getEmojiByQuery(e){return this._items?e.split(/\s/).filter(Boolean).some(t=>t.length>=2)?I3.go(e,this._items,{threshold:.6,keys:["emoticon","annotation",t=>e.split(/\s/).filter(Boolean).flatMap(i=>{var r;return(r=t.tags)==null?void 0:r.filter(o=>o.startsWith(i))}).join()]}).map(t=>t.obj):[]:[]}getEmojiCategories(){const e=this._getItems();if(!e)return[];const{t}=this.editor.locale,i=[{title:t("Smileys & Expressions"),icon:"\u{1F604}",groupId:0},{title:t("Gestures & People"),icon:"\u{1F44B}",groupId:1},{title:t("Animals & Nature"),icon:"\u{1F43B}",groupId:3},{title:t("Food & Drinks"),icon:"\u{1F34E}",groupId:4},{title:t("Travel & Places"),icon:"\u{1F698}",groupId:5},{title:t("Activities"),icon:"\u{1F3C0}",groupId:6},{title:t("Objects"),icon:"\u{1F4A1}",groupId:7},{title:t("Symbols"),icon:"\u{1F535}",groupId:8},{title:t("Flags"),icon:"\u{1F3C1}",groupId:9}],r=function(o,s){const a={};for(let l=0;l<o.length;l++){const c=o[l],d=s(c);Object.hasOwn(a,d)||(a[d]=[]),a[d].push(c)}return a}(e,o=>o.group);return i.map(o=>({...o,items:r[o.groupId]}))}getSkinTones(){const{t:e}=this.editor.locale;return[{id:"default",icon:"\u{1F44B}",tooltip:e("Default skin tone")},{id:"light",icon:"\u{1F44B}\u{1F3FB}",tooltip:e("Light skin tone")},{id:"medium-light",icon:"\u{1F44B}\u{1F3FC}",tooltip:e("Medium Light skin tone")},{id:"medium",icon:"\u{1F44B}\u{1F3FD}",tooltip:e("Medium skin tone")},{id:"medium-dark",icon:"\u{1F44B}\u{1F3FE}",tooltip:e("Medium Dark skin tone")},{id:"dark",icon:"\u{1F44B}\u{1F3FF}",tooltip:e("Dark skin tone")}]}isReady(){return this._repositoryPromise}_getUrl(){const{definitionsUrl:e,version:t}=this.editor.config.get("emoji");if(!e||e==="cdn"){const i=new URL("https://cdn.ckeditor.com/ckeditor5/data/emoji/{version}/en.json".replace("{version}",(t||16).toString()));return i.searchParams.set("editorVersion",Cm),i}return t&&le("emoji-repository-redundant-version"),new URL(e)}_warnAboutCdnUse(){const e=this.editor,t=e.config.get("emoji"),i=e.config.get("licenseKey"),r=window[Symbol.for("cke distribution")];i!=="GPL"&&r!=="cloud"&&(t&&t.definitionsUrl||le("emoji-repository-cdn-use"))}_getItems(){const e=fl._results[this._url.href];return e&&e.length?e:null}async _loadAndCacheEmoji(){if(fl._results[this._url.href])return;const e=await fetch(this._url,{cache:"force-cache"}).then(t=>t.ok?t.json():[]).catch(()=>[]);fl._results[this._url.href]=this._normalizeEmoji(e)}_normalizeEmoji(e){const t=this.editor,i=t.config.get("emoji.useCustomFont"),r=t.plugins.get("EmojiUtils"),o=e.filter(c=>r.isEmojiCategoryAllowed(c));if(i)return o.map(c=>r.normalizeEmojiSkinTone(c));const s=r.getEmojiSupportedVersionByOs(),a=r.createEmojiWidthTestingContainer();document.body.appendChild(a);const l=o.filter(c=>r.isEmojiSupported(c,s,a)).map(c=>r.normalizeEmojiSkinTone(c));return a.remove(),l}};m(Zk,"_results",{});let Kk=Zk;const Jr=":",Xd=":__EMOJI_SHOW_ALL:",eu=":__EMOJI_HINT:";class O3 extends C{constructor(e){super(e),m(this,"_emojiDropdownLimit"),m(this,"_skinTone"),this.editor.config.define("emoji",{dropdownLimit:6}),this._emojiDropdownLimit=e.config.get("emoji.dropdownLimit"),this._skinTone=e.config.get("emoji.skinTone"),this._setupMentionConfiguration(e)}static get requires(){return[Kk,Na,"Mention"]}static get pluginName(){return"EmojiMention"}static get isOfficialPlugin(){return!0}_setupMentionConfiguration(e){const t=e.config.get("mergeFields.prefix"),i=e.config.get("mention.feeds"),r=!!t&&t[0]===Jr;if(i.filter(s=>!s._isEmojiMarker).some(s=>s.marker===Jr)||r)return void le("emoji-config-marker-already-used",{marker:Jr});if(i.some(s=>s._isEmojiMarker))return;const o={_isEmojiMarker:!0,marker:Jr,dropdownLimit:this._emojiDropdownLimit,itemRenderer:this._customItemRendererFactory(this.editor.t),feed:this._queryEmojiCallbackFactory()};this.editor.config.set("mention.feeds",[...i,o])}async init(){const e=this.editor;this.emojiPickerPlugin=e.plugins.has("EmojiPicker")?e.plugins.get("EmojiPicker"):null,this.emojiRepositoryPlugin=e.plugins.get("EmojiRepository"),this._isEmojiRepositoryAvailable=await this.emojiRepositoryPlugin.isReady(),this._isEmojiRepositoryAvailable&&e.once("ready",this._overrideMentionExecuteListener.bind(this))}_customItemRendererFactory(e){return t=>{const i=document.createElement("button");i.classList.add("ck"),i.classList.add("ck-button"),i.classList.add("ck-button_with-text"),i.id=`mention-list-item-id${t.id.slice(0,-1)}`,i.type="button",i.tabIndex=-1;const r=document.createElement("span");return r.classList.add("ck"),r.classList.add("ck-button__label"),i.appendChild(r),t.id===eu?(i.classList.add("ck-list-item-button"),i.classList.add("ck-disabled"),r.textContent=e("Keep on typing to see the emoji.")):t.id===Xd?r.textContent=e("Show all emoji..."):r.textContent=`${t.text} ${t.id}`,i}}_overrideMentionExecuteListener(){const e=this.editor;e.commands.get("mention").on("execute",(t,i)=>{const r=i[0];if(r.marker===Jr&&(t.stop(),r.mention.id!==eu))if(r.mention.id===Xd){const o=[...r.range.getItems()].filter(a=>a.is("$textProxy")).map(a=>a.data).reduce((a,l)=>a+l,"");e.model.change(a=>{e.model.deleteContent(a.createSelection(r.range))});const s=this.emojiPickerPlugin;s.showUI(o.slice(1)),setTimeout(()=>{s.emojiPickerView.focus()})}else e.execute("insertText",{text:r.mention.text,range:r.range})},{priority:"high"})}_queryEmojiCallbackFactory(){return e=>{if(e.startsWith(" "))return[];if(e.startsWith(Jr))return[];if(!this._isEmojiRepositoryAvailable)return[];const t=this.emojiRepositoryPlugin.getEmojiByQuery(e).map(r=>{let o=r.skins[this._skinTone]||r.skins.default;return this.emojiPickerPlugin&&(o=r.skins[this.emojiPickerPlugin.skinTone]||r.skins.default),{id:`:${r.annotation}:`,text:o}});if(!this.emojiPickerPlugin)return t.slice(0,this._emojiDropdownLimit);const i={id:e.length>1?Xd:eu};return[...t.slice(0,this._emojiDropdownLimit-1),i]}}}class N3 extends G{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=t.checkChild(i.getFirstPosition(),"$text")}execute(e=""){this.editor.plugins.get("EmojiPicker").showUI(e)}}class R3 extends N{constructor(e,{categoryName:t,emojiCategories:i,getEmojiByQuery:r,skinTone:o}){super(e),m(this,"tiles"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"emojiCategories"),m(this,"cachedTiles"),m(this,"_getEmojiByQuery"),this.set("isEmpty",!0),this.set("categoryName",t),this.set("skinTone",o),this.tiles=this.createCollection(),this.cachedTiles=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this._getEmojiByQuery=r,this.emojiCategories=i;const s=this.bindTemplate;this.setTemplate({tag:"div",children:[{tag:"div",attributes:{role:"grid",class:["ck","ck-emoji__grid"]},children:this.tiles}],attributes:{role:"tabpanel",class:["ck","ck-emoji__tiles",s.if("isEmpty","ck-hidden",a=>a)]}}),Qo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>R.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy(),this.focusTracker.destroy()}focus(){const e=this.tiles.first;e&&e.focus()}filter(e){const{matchingItems:t,allItems:i}=e?this._getItemsByQuery(e.source):this._getItemsByCategory();return this._updateGrid(t),this.set("isEmpty",t.length===0),{resultsCount:t.length,totalItemsCount:i.length}}_getItemsByQuery(e){return{matchingItems:this._getEmojiByQuery(e),allItems:this.emojiCategories.flatMap(t=>t.items)}}_getItemsByCategory(){const e=this.emojiCategories.find(i=>i.title===this.categoryName),{items:t}=e;return{matchingItems:t,allItems:t}}_updateGrid(e){[...this.tiles].forEach(t=>{this.focusTracker.remove(t),this.tiles.remove(t)}),e.map(t=>{const i=t.skins[this.skinTone]||t.skins.default;return this.cachedTiles.get(i)||this._createTile(i,t.annotation)}).forEach(t=>{this.tiles.add(t),this.focusTracker.add(t)})}_createTile(e,t){const i=new $(this.locale);return i.viewUid=e,i.extendTemplate({attributes:{class:["ck-emoji__tile"]}}),i.set({label:e,tooltip:t,withText:!0,ariaLabel:t,ariaLabelledBy:void 0}),i.on("execute",()=>{this.fire("execute",{name:t,emoji:e})}),this.cachedTiles.add(i),i}}class z3 extends N{constructor(e,{emojiCategories:t,categoryName:i}){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"focusCycler"),m(this,"buttonViews"),this.buttonViews=this.createCollection(t.map(r=>this._createCategoryButton(r))),this.focusTracker=new ge,this.keystrokes=new Ie,this.focusCycler=new ct({focusables:this.buttonViews,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__categories-list"],role:"tablist"},children:this.buttonViews}),this.on("change:categoryName",(r,o,s,a)=>{const l=this.buttonViews.find(c=>c.tooltip===a);l&&(l.isOn=!1),this.buttonViews.find(c=>c.tooltip===s).isOn=!0}),this.set("categoryName",i)}render(){super.render(),this.buttonViews.forEach(e=>{this.focusTracker.add(e)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),this.buttonViews.destroy()}focus(){this.buttonViews.first.focus()}enableCategories(){this.buttonViews.forEach(e=>{e.isEnabled=!0})}disableCategories(){this.buttonViews.forEach(e=>{e.set({class:"",isEnabled:!1,isOn:!1})})}_createCategoryButton(e){const t=new $,i=t.bindTemplate;return t.extendTemplate({attributes:{"aria-selected":i.to("isOn",r=>r.toString()),class:["ck-emoji__category-item"]}}),t.set({ariaLabel:e.title,label:e.icon,role:"tab",tooltip:e.title,withText:!0,ariaLabelledBy:void 0}),t.on("execute",()=>{this.categoryName=e.title}),t.on("change:isEnabled",()=>{t.isEnabled&&t.tooltip===this.categoryName&&(t.isOn=!0)}),t}}class D3 extends N{constructor(e,{gridView:t,resultsView:i}){super(e),m(this,"inputView"),m(this,"gridView"),this.gridView=t;const r=e.t;this.inputView=new rE(this.locale,{queryView:{label:r("Find an emoji (min. 2 characters)"),creator:Sn},filteredView:this.gridView,infoView:{instance:i}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search"],tabindex:"-1"},children:[this.inputView.queryView]}),this.inputView.delegate("search").to(this)}destroy(){super.destroy(),this.inputView.destroy()}search(e){const t=e?new RegExp(og(e),"ig"):null,i=this.gridView.filter(t);this.inputView.fire("search",{query:e,...i})}setInputValue(e){e?this.inputView.queryView.fieldView.value=e:this.inputView.queryView.fieldView.reset()}getInputValue(){return this.inputView.queryView.fieldView.element.value}focus(){this.inputView.focus()}}class B3 extends N{constructor(e,{skinTone:t,skinTones:i}){super(e),m(this,"dropdownView"),m(this,"_skinTones"),this.set("skinTone",t),this._skinTones=i;const r=(0,e.t)("Select skin tone"),o=mt(e),s=new ot;for(const{id:a,icon:l,tooltip:c}of this._skinTones){const d={type:"button",model:new en({value:a,label:l,ariaLabel:c,tooltip:c,tooltipPosition:"e",role:"menuitemradio",withText:!0,ariaLabelledBy:void 0})};d.model.bind("isOn").to(this,"skinTone",u=>u===a),s.add(d)}En(o,s,{ariaLabel:r,role:"menu"}),o.buttonView.set({label:this._getSkinTone().icon,ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),this.dropdownView=o,this.listenTo(o,"execute",a=>{this.skinTone=a.source.value}),o.buttonView.bind("label").to(this,"skinTone",()=>this._getSkinTone().icon),o.buttonView.bind("ariaLabel").to(this,"skinTone",()=>`${this._getSkinTone().tooltip}, ${r}`),this.setTemplate({tag:"div",attributes:{class:["ck","ck-emoji__skin-tone"]},children:[o]})}focus(){this.dropdownView.buttonView.focus()}_getSkinTone(){return this._skinTones.find(e=>e.id===this.skinTone)}}class F3 extends N{constructor(e,{emojiCategories:t,getEmojiByQuery:i,skinTone:r,skinTones:o}){super(e),m(this,"items"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"focusCycler"),m(this,"searchView"),m(this,"toneView"),m(this,"categoriesView"),m(this,"gridView"),m(this,"infoView");const s=t[0].title;this.gridView=new R3(e,{categoryName:s,emojiCategories:t,getEmojiByQuery:i,skinTone:r}),this.infoView=new Gb,this.searchView=new D3(e,{gridView:this.gridView,resultsView:this.infoView}),this.categoriesView=new z3(e,{emojiCategories:t,categoryName:s}),this.toneView=new B3(e,{skinTone:r,skinTones:o}),this.items=this.createCollection([this.searchView,this.toneView,this.categoriesView,this.gridView,this.infoView]),this.focusTracker=new ge,this.keystrokes=new Ie,this.focusCycler=new ct({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[{tag:"div",children:[this.searchView,this.toneView],attributes:{class:["ck","ck-emoji__search"]}},this.categoriesView,this.gridView,{tag:"div",children:[this.infoView],attributes:{class:["ck","ck-search__results"]}}],attributes:{tabindex:"-1",class:["ck","ck-emoji","ck-search"]}}),this._setupEventListeners()}render(){super.render(),this.focusTracker.add(this.searchView.element),this.focusTracker.add(this.toneView.element),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.focusTracker.add(this.infoView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.searchView.focus()}_setupEventListeners(){const e=this.locale.t;this.searchView.on("search",(t,i)=>{i.query?this.categoriesView.disableCategories():this.categoriesView.enableCategories()}),this.searchView.on("search",(t,i)=>{i.query.length===1?this.infoView.set({primaryText:e("Keep on typing to see the emoji."),secondaryText:e("The query must contain at least two characters."),isVisible:!0}):i.resultsCount?this.infoView.set({isVisible:!1}):this.infoView.set({primaryText:e('No emojis were found matching "%0".',i.query),secondaryText:e("Please try a different phrase or check the spelling."),isVisible:!0})}),this.searchView.on("search",()=>{this.fire("update"),this.gridView.element.scrollTo(0,0)}),this.categoriesView.on("change:categoryName",(t,i,r)=>{this.gridView.categoryName=r,this.searchView.search("")}),this.toneView.on("change:skinTone",(t,i,r)=>{this.gridView.skinTone=r,this.searchView.search(this.searchView.getInputValue())})}}class j3 extends N{constructor(e){super(e),m(this,"backButtonView"),m(this,"focusTracker",new ge),m(this,"keystrokes",new Ie),m(this,"children"),m(this,"_focusables",new St),m(this,"_focusCycler"),this.backButtonView=this._createBackButton(),this.children=this.createCollection([this._createHeaderView()]),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form","ck-emoji-picker-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),[...this.children.filter($r),this.backButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element),Qf(e)&&this._focusCycler.chain(e.focusCycler)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createHeaderView(){const e=this.locale.t,t=new ir(this.locale,{label:e("Emoji picker")});return t.children.add(this.backButtonView,0),t}}const Ln="emoji-picker";class $3 extends C{static get requires(){return[Kk,Vi,Jo,Na]}static get pluginName(){return"EmojiPicker"}static get isOfficialPlugin(){return!0}async init(){const e=this.editor;if(this.balloonPlugin=e.plugins.get("ContextualBalloon"),this.emojiRepositoryPlugin=e.plugins.get("EmojiRepository"),!await this.emojiRepositoryPlugin.isReady())return;const t=new N3(e);e.commands.add("emoji",t),e.ui.componentFactory.add("emoji",()=>{const i=this._createButton($,t);return i.set({tooltip:!0}),i}),e.ui.componentFactory.add("menuBar:emoji",()=>this._createButton(Se,t)),this._setupConversion()}destroy(){super.destroy(),this.emojiPickerView&&this.emojiPickerView.destroy()}get skinTone(){return this.emojiPickerView?this.emojiPickerView.gridView.skinTone:this.editor.config.get("emoji.skinTone")}showUI(e=""){this._showFakeVisualSelection(),this.emojiPickerView||(this.emojiPickerView=this._createEmojiPickerView()),e&&this.emojiPickerView.searchView.setInputValue(e),this.emojiPickerView.searchView.search(e),this.emojiPickerFormView||(this.emojiPickerFormView=this._createEmojiPickerFormView()),this.balloonPlugin.hasView(this.emojiPickerFormView)||(this.emojiPickerFormView.backButtonView.isVisible=!!this.balloonPlugin.visibleView,this.balloonPlugin.add({view:this.emojiPickerFormView,position:this._getBalloonPositionData(),balloonClassName:"ck-emoji-picker-balloon"})),this.emojiPickerView.focus()}_createButton(e,t){const i=new e(this.editor.locale),r=this.editor.locale.t;return i.bind("isEnabled").to(t,"isEnabled"),i.set({label:r("Emoji"),icon:ZC,isToggleable:!0}),i.on("execute",()=>{this.editor.editing.view.scrollToTheSelection(),this.showUI()}),i}_createEmojiPickerView(){const e=new F3(this.editor.locale,{emojiCategories:this.emojiRepositoryPlugin.getEmojiCategories(),skinTone:this.editor.config.get("emoji.skinTone"),skinTones:this.emojiRepositoryPlugin.getSkinTones(),getEmojiByQuery:t=>this.emojiRepositoryPlugin.getEmojiByQuery(t)});return this.listenTo(e.gridView,"execute",(t,i)=>{const r=this.editor,o=i.emoji;this._hideUI(),r.execute("insertText",{text:o})}),e}_createEmojiPickerFormView(){const e=new j3(this.editor.locale);return e.children.add(this.emojiPickerView),this.listenTo(this.emojiPickerView,"update",()=>{this.balloonPlugin.visibleView===e&&this.balloonPlugin.updatePosition()}),this.listenTo(e,"cancel",()=>{this._hideUI()}),e.keystrokes.set("Esc",(t,i)=>{this._hideUI(),i()}),Tn({emitter:e,contextElements:[this.balloonPlugin.view.element],callback:()=>{this._hideUI(!1)},activator:()=>this.balloonPlugin.visibleView===e}),e}_hideUI(e=!0){this.balloonPlugin.remove(this.emojiPickerFormView),this.emojiPickerView.searchView.setInputValue(""),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection()}_setupConversion(){const e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:Ln,view:{classes:["ck-fake-emoji-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ln,view:(t,{writer:i})=>{if(!t.markerRange.isCollapsed)return null;const r=i.createUIElement("span");return i.addClass(["ck-fake-emoji-selection","ck-fake-emoji-selection_collapsed"],r),r}})}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;return{target:()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange())}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(Ln))t.updateMarker(Ln,{range:i});else if(i.start.isAtEnd){const r=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(Ln,{usingOperation:!1,affectsData:!1,range:t.createRange(r,i.end)})}else t.addMarker(Ln,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ln)&&e.change(t=>{t.removeMarker(Ln)})}}class H3 extends C{static get requires(){return[O3,$3]}static get pluginName(){return"Emoji"}static get isOfficialPlugin(){return!0}}class U3 extends G{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Yk(e.schema,i))do if(i=i.parent,!i)return;while(!Yk(e.schema,i));e.change(r=>{r.setSelection(i,"in")})}}function Yk(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}const W3=Mo("Ctrl+A");class q3 extends C{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=e.editing.view.document;e.commands.add("selectAll",new U3(e)),this.listenTo(i,"keydown",(r,o)=>{Gn(o)===W3&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}class G3 extends C{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Se))}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get("selectAll"),o=new e(t.locale),s=i.t;return o.set({label:s("Select all"),icon:MA,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}}class Z3 extends C{static get requires(){return[q3,G3]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}class Qk extends G{constructor(e){super(e),m(this,"_stack",[]),m(this,"_createdBatches",new WeakSet),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]={...i[1]};const r=i[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const r=this.editor.model,o=r.document,s=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(const c of a){const d=c.filter(u=>u.root!=o.graveyard).filter(u=>!Y3(u,l));d.length&&(K3(d),s.push(d[0]))}s.length&&r.change(c=>{c.setSelection(s,{backward:t})})}_undo(e,t){const i=this.editor.model,r=i.document;this._createdBatches.add(t);const o=e.operations.slice().filter(s=>s.isDocumentOperation);o.reverse();for(const s of o){const a=s.baseVersion+1,l=Array.from(r.history.getOperations(a)),c=v5([s.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let d of c){const u=d.affectedSelectable;u&&!i.canEditAt(u)&&(d=new dt(d.baseVersion)),t.addOperation(d),i.applyOperation(d),r.history.setOperationAsUndone(s,d)}}}}function K3(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const t=n[e-1].getJoined(n[e],!0);t&&(e--,n.splice(e,2,t))}}function Y3(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}class Q3 extends Qk{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(i.batch,r);const o=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,o)}),this.fire("revert",i.batch,r),this.refresh()}}class J3 extends Qk{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(i);this._restoreSelection(e.selection.ranges,e.selection.isBackward,r),this._undo(e.batch,t)}),this.refresh()}}class X3 extends C{constructor(){super(...arguments),m(this,"_undoCommand"),m(this,"_redoCommand"),m(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;this._undoCommand=new Q3(e),this._redoCommand=new J3(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,r)=>{const o=r[0];if(!o.isDocumentOperation)return;const s=o.batch,a=this._redoCommand.createdBatches.has(s),l=this._undoCommand.createdBatches.has(s);this._batchRegistry.has(s)||(this._batchRegistry.add(s),s.isUndoable&&(a?this._undoCommand.addBatch(s):l||(this._undoCommand.addBatch(s),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class e4 extends C{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,r=t.uiLanguageDirection=="ltr"?Gf:Wf,o=t.uiLanguageDirection=="ltr"?Wf:Gf;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",r),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,i,r){const o=this.editor;o.ui.componentFactory.add(e,()=>{const s=this._createButton($,e,t,i,r);return s.set({tooltip:!0}),s}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(Se,e,t,i,r))}_createButton(e,t,i,r,o){const s=this.editor,a=s.locale,l=s.commands.get(t),c=new e(a);return c.set({label:i,icon:o,keystroke:r}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{s.execute(t),s.editing.view.focus()}),c}}class tu extends C{static get requires(){return[X3,e4]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}class t4 extends C{static get requires(){return[JA,Gd,Fa,Z3,fk,Na,tu]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}class Ya extends G{constructor(e,t){super(e),m(this,"attributeKey"),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,i=t.document.selection,r=e.value,o=e.batch,s=a=>{if(i.isCollapsed)r?a.setSelectionAttribute(this.attributeKey,r):a.removeSelectionAttribute(this.attributeKey);else{const l=t.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const c of l)r?a.setAttribute(this.attributeKey,r,c):a.removeAttribute(this.attributeKey,c)}};o?t.enqueueChange(o,a=>{s(a)}):t.change(a=>{s(a)})}}const zt="fontSize",Dt="fontFamily",Oi="fontColor",on="fontBackgroundColor";function Jk(n,e){const t={model:{key:n,values:[]},view:{},upcastAlso:{}};for(const i of e)t.model.values.push(i.model),t.view[i.model]=i.view,i.upcastAlso&&(t.upcastAlso[i.model]=i.upcastAlso);return t}function Xk(n){return e=>e.getStyle(n).replace(/\s/g,"")}function ew(n){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${n}:${e}`},{priority:7})}class i4 extends Ya{constructor(e){super(e,Dt)}}function tw(n){return n.map(n4).filter(e=>e!==void 0)}function n4(n){return typeof n=="object"?n:n==="default"?{title:"Default",model:void 0}:typeof n=="string"?function(e){const t=e.replace(/"|'/g,"").split(","),i=t[0],r=t.map(r4).join(", ");return{title:i,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}(n):void 0}function r4(n){return(n=n.trim()).indexOf(" ")>0&&(n=`'${n}'`),n}class o4 extends C{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(Dt,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Dt}),e.model.schema.setAttributeProperties(Dt,{isFormatting:!0,copyOnEnter:!0});const t=tw(e.config.get("fontFamily.options")).filter(r=>r.model),i=Jk(Dt,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Dt,new i4(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Dt,view:(t,{writer:i})=>i.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Dt,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Dt,value:e=>e.getAttribute("face")}})}}class s4 extends C{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),r=e.commands.get(Dt),o=t("Font Family"),s=function(a,l){const c=new ot;for(const d of a){const u={type:"button",model:new en({commandName:Dt,commandParam:d.model,label:d.title,role:"menuitemradio",withText:!0})};u.model.bind("isOn").to(l,"value",h=>h===d.model||!(!h||!d.model)&&h.split(",")[0].replace(/'/g,"").toLowerCase()===d.model.toLowerCase()),d.view&&typeof d.view!="string"&&d.view.styles&&u.model.set("labelStyle",`font-family: ${d.view.styles["font-family"]}`),c.add(u)}return c}(i,r);e.ui.componentFactory.add(Dt,a=>{const l=mt(a);return En(l,s,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:Nf,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(r),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Dt}`,a=>{const l=new Yt(a);l.buttonView.set({label:o,icon:Nf}),l.bind("isEnabled").to(r);const c=new tn(a);for(const d of s){const u=new Mi(a,l),h=new Se(a);h.set({role:"menuitemradio",isToggleable:!0}),h.bind(...Object.keys(d.model)).to(d.model),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(d.model.commandName,{value:d.model.commandParam}),e.editing.view.focus()}),u.children.add(h),c.items.add(u)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t;return tw(e.config.get(Dt).options).map(i=>(i.title==="Default"&&(i.title=t("Default")),i))}}class a4 extends C{static get requires(){return[o4,s4]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class l4 extends Ya{constructor(e){super(e,zt)}}function iu(n){return n.map(e=>function(t){if(typeof t=="number"&&(t=String(t)),typeof t=="object"&&(i=t,i.title&&i.model&&i.view))return nu(t);var i;const r=function(o){return typeof o=="string"?iw[o]:iw[o.model]}(t);if(r)return nu(r);if(t==="default")return{model:void 0,title:"Default"};if(!function(o){let s;if(typeof o=="object"){if(!o.model)throw new v("font-size-invalid-definition",null,o);s=parseFloat(o.model)}else s=parseFloat(o);return isNaN(s)}(t))return function(o){return typeof o=="string"&&(o={title:o,model:`${parseFloat(o)}px`}),o.view={name:"span",styles:{"font-size":o.model}},nu(o)}(t)}(e)).filter(e=>e!==void 0)}const iw={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function nu(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}const nw=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class c4 extends C{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(zt,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:zt}),e.model.schema.setAttributeProperties(zt,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),i=iu(this.editor.config.get("fontSize.options")).filter(o=>o.model),r=Jk(zt,i);t?(this._prepareAnyValueConverters(r),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(zt,new l4(e))}_prepareAnyValueConverters(e){const t=this.editor,i=e.model.values.filter(r=>!X5(String(r))&&!tC(String(r)));if(i.length)throw new v("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:zt,view:(r,{writer:o})=>{if(r)return o.createAttributeElement("span",{style:"font-size:"+r},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:zt,value:r=>r.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:zt,value:e=>{const t=e.getAttribute("size"),i=t[0]==="-"||t[0]==="+";let r=parseInt(t,10);i&&(r=3+r);const o=nw.length-1,s=Math.min(Math.max(r,0),o);return nw[s]}}})}}class d4 extends C{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),r=e.commands.get(zt),o=t("Font Size"),s=function(a,l){const c=new ot;for(const d of a){const u={type:"button",model:new en({commandName:zt,commandParam:d.model,label:d.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};d.view&&typeof d.view!="string"&&(d.view.styles&&u.model.set("labelStyle",`font-size:${d.view.styles["font-size"]}`),d.view.classes&&u.model.set("class",`${u.model.class} ${d.view.classes}`)),u.model.bind("isOn").to(l,"value",h=>h===d.model),c.add(u)}return c}(i,r);e.ui.componentFactory.add(zt,a=>{const l=mt(a);return En(l,s,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:Rf,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(r),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${zt}`,a=>{const l=new Yt(a);l.buttonView.set({label:o,icon:Rf}),l.bind("isEnabled").to(r);const c=new tn(a);for(const d of s){const u=new Mi(a,l),h=new Se(a);h.set({role:"menuitemradio",isToggleable:!0}),h.bind(...Object.keys(d.model)).to(d.model),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(d.model.commandName,{value:d.model.commandParam}),e.editing.view.focus()}),u.children.add(h),c.items.add(u)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return iu(e.config.get(zt).options).map(r=>{const o=i[r.title];return o&&o!=r.title&&(r=Object.assign({},r,{title:o})),r})}}class u4 extends C{static get requires(){return[c4,d4]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(e){return iu(e)}}class h4 extends Ya{constructor(e){super(e,Oi)}}class m4 extends C{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(Oi,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Oi,value:Xk("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Oi,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Oi,view:ew("color")}),e.commands.add(Oi,new h4(e)),e.model.schema.extend("$text",{allowAttributes:Oi}),e.model.schema.setAttributeProperties(Oi,{isFormatting:!0,copyOnEnter:!0})}}class rw extends C{constructor(e,{commandName:t,componentName:i,icon:r,dropdownLabel:o}){super(e),m(this,"commandName"),m(this,"componentName"),m(this,"icon"),m(this,"dropdownLabel"),m(this,"columns"),this.commandName=t,this.componentName=i,this.icon=r,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,i=t.t,r=e.commands.get(this.commandName),o=e.config.get(this.componentName),s=iT(t,nT(o.colors)),a=o.documentColors,l=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,c=>{const d=mt(c);let u=!1;const h=function({dropdownView:g,colors:p,columns:f,removeButtonLabel:b,colorPickerLabel:k,documentColorsLabel:w,documentColorsCount:_,colorPickerViewConfig:y}){const x=g.locale,A=new Ob(x,{colors:p,columns:f,removeButtonLabel:b,colorPickerLabel:k,documentColorsLabel:w,documentColorsCount:_,colorPickerViewConfig:y});return g.colorSelectorView=A,g.panelView.children.add(A),A}({dropdownView:d,colors:s.map(g=>({label:g.label,color:g.model,options:{hasBorder:g.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:a!==0?i("Document colors"):"",documentColorsCount:a===void 0?this.columns:a,colorPickerViewConfig:!!l&&(o.colorPicker||{})});return h.bind("selectedColor").to(r,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(r),h.on("execute",(g,p)=>{d.isOpen&&e.execute(this.commandName,{value:p.value,batch:this._undoStepBatch}),p.source!=="colorPicker"&&e.editing.view.focus(),p.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),h.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),h.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(g,p,f)=>{u||(u=!0,d.colorSelectorView.appendUI()),f&&(a!==0&&h.updateDocumentColors(e.model,this.componentName),h.updateSelectedColors(),h.showColorGridsFragment())}),Ia(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(g=>g.isOn)),d}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,c=>{const d=new Yt(c);d.buttonView.set({label:this.dropdownLabel,icon:this.icon}),d.bind("isEnabled").to(r);let u=!1;const h=new Ob(c,{colors:s.map(g=>({label:g.label,color:g.model,options:{hasBorder:g.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:a!==0?i("Document colors"):"",documentColorsCount:a===void 0?this.columns:a,colorPickerViewConfig:!1});return h.bind("selectedColor").to(r,"value"),h.delegate("execute").to(d),h.on("execute",(g,p)=>{e.execute(this.commandName,{value:p.value,batch:this._undoStepBatch}),e.editing.view.focus()}),d.on("change:isOpen",(g,p,f)=>{u||(u=!0,h.appendUI()),f&&(a!==0&&h.updateDocumentColors(e.model,this.componentName),h.updateSelectedColors(),h.showColorGridsFragment())}),d.panelView.children.add(h),d})}}class g4 extends rw{constructor(e){const t=e.locale.t;super(e,{commandName:Oi,componentName:Oi,icon:YC,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class p4 extends C{static get requires(){return[m4,g4]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class f4 extends Ya{constructor(e){super(e,on)}}class b4 extends C{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(on,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(gC),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:on,value:Xk("background-color")}}),e.conversion.for("downcast").attributeToElement({model:on,view:ew("background-color")}),e.commands.add(on,new f4(e)),e.model.schema.extend("$text",{allowAttributes:on}),e.model.schema.setAttributeProperties(on,{isFormatting:!0,copyOnEnter:!0})}}class k4 extends rw{constructor(e){const t=e.locale.t;super(e,{commandName:on,componentName:on,icon:KC,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class w4 extends C{static get requires(){return[b4,k4]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class _4 extends G{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=Ce(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&ow(t,e.schema)}execute(e={}){const t=this.editor.model,i=t.document,r=e.selection||i.selection;t.canEditAt(r)&&t.change(o=>{const s=r.getSelectedBlocks();for(const a of s)!a.is("element","paragraph")&&ow(a,t.schema)&&o.rename(a,"paragraph")})}}function ow(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}class v4 extends G{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,i=e.attributes;let r=e.position;return t.canEditAt(r)?t.change(o=>{if(r=this._findPositionToInsertParagraph(r,o),!r)return null;const s=o.createElement("paragraph");return i&&t.schema.setAllowedAttributes(s,i,o),t.insertContent(s,r),o.setSelection(s,"in"),o.createPositionAt(s,0)}):null}_findPositionToInsertParagraph(e,t){const i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;const r=i.schema.findAllowedParent(e,"paragraph");if(!r)return null;const o=e.parent,s=i.schema.checkChild(o,"$text");return o.isEmpty||s&&e.isAtEnd?i.createPositionAfter(o):!o.isEmpty&&s&&e.isAtStart?i.createPositionBefore(o):t.split(e,r).position}}const sw=class n1 extends C{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new _4(e)),e.commands.add("insertParagraph",new v4(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:r})=>n1.paragraphLikeElements.has(i.name)?i.isEmpty?null:r.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}};m(sw,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let aw=sw;class y4 extends G{constructor(e,t){super(e),m(this,"modelElements"),this.modelElements=t}refresh(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>lw(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,i=t.document,r=e.value;t.change(o=>{const s=Array.from(i.selection.getSelectedBlocks()).filter(a=>lw(a,r,t.schema));for(const a of s)a.is("element",r)||o.rename(a,r)})}}function lw(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}const cw="paragraph";class x4 extends C{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[aw]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const r of t)r.model!=="paragraph"&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),i.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new y4(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(r,o)=>{const s=e.model.document.selection.getFirstPosition().parent;i.some(a=>s.is("element",a.model))&&!s.is("element",cw)&&s.childCount===0&&o.writer.rename(s,cw)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:wn.low+1})}}function C4(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{const r=t[i.title];return r&&r!=i.title&&(i.title=r),i})}class A4 extends C{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=C4(e),r=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",s=>{const a={},l=new ot,c=e.commands.get("heading"),d=e.commands.get("paragraph"),u=[c];for(const g of i){const p={type:"button",model:new en({label:g.title,class:g.class,role:"menuitemradio",withText:!0})};g.model==="paragraph"?(p.model.bind("isOn").to(d,"value"),p.model.set("commandName","paragraph"),u.push(d)):(p.model.bind("isOn").to(c,"value",f=>f===g.model),p.model.set({commandName:"heading",commandValue:g.model})),l.add(p),a[g.model]=g.title}const h=mt(s);return En(h,l,{ariaLabel:o,role:"menu"}),h.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(u,"isEnabled",(...g)=>g.some(p=>p)),h.buttonView.bind("label").to(c,"value",d,"value",(g,p)=>{const f=p?"paragraph":g;return typeof f=="boolean"?r:a[f]?a[f]:r}),h.buttonView.bind("ariaLabel").to(c,"value",d,"value",(g,p)=>{const f=p?"paragraph":g;return typeof f=="boolean"?o:a[f]?`${a[f]}, ${o}`:o}),this.listenTo(h,"execute",g=>{const{commandName:p,commandValue:f}=g.source;e.execute(p,f?{value:f}:void 0),e.editing.view.focus()}),h}),e.ui.componentFactory.add("menuBar:heading",s=>{const a=new Yt(s),l=e.commands.get("heading"),c=e.commands.get("paragraph"),d=[l],u=new tn(s);a.set({class:"ck-heading-dropdown"}),u.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(u);for(const h of i){const g=new Mi(s,a),p=new Se(s);g.children.add(p),u.items.add(g),p.set({isToggleable:!0,label:h.title,role:"menuitemradio",class:h.class}),p.delegate("execute").to(a),p.on("execute",()=>{const f=h.model==="paragraph"?"paragraph":"heading";e.execute(f,{value:h.model}),e.editing.view.focus()}),h.model==="paragraph"?(p.bind("isOn").to(c,"value"),d.push(c)):p.bind("isOn").to(l,"value",f=>f===h.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...h)=>h.some(g=>g)),a})}}class T4 extends C{static get requires(){return[x4,A4]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}const dw=new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);class E4 extends C{constructor(){super(...arguments),m(this,"_bodyPlaceholder",new Map)}static get pluginName(){return"Title"}static get isOfficialPlugin(){return!0}static get requires(){return["Paragraph"]}init(){const e=this.editor,t=e.model;t.schema.register("title",{isBlock:!0,allowIn:"$root"}),t.schema.register("title-content",{isBlock:!0,allowIn:"title",allowAttributes:["alignment"]}),t.schema.extend("$text",{allowIn:"title-content"}),t.schema.addAttributeCheck(i=>{if(i.endsWith("title-content $text"))return!1}),e.editing.mapper.on("modelToViewPosition",uw(e.editing.view)),e.data.mapper.on("modelToViewPosition",uw(e.editing.view)),e.conversion.for("downcast").elementToElement({model:"title-content",view:"h1"}),e.conversion.for("downcast").add(i=>i.on("insert:title",(r,o,s)=>{s.consumable.consume(o.item,r.name)})),e.data.upcastDispatcher.on("element:h1",ru,{priority:"high"}),e.data.upcastDispatcher.on("element:h2",ru,{priority:"high"}),e.data.upcastDispatcher.on("element:h3",ru,{priority:"high"}),t.document.registerPostFixer(i=>this._fixTitleContent(i)),t.document.registerPostFixer(i=>this._fixTitleElement(i)),t.document.registerPostFixer(i=>this._fixBodyElement(i)),t.document.registerPostFixer(i=>this._fixExtraParagraph(i)),this._attachPlaceholders(),this._attachTabPressHandling()}getTitle(e={}){const t=e.rootName?e.rootName:void 0,i=this._getTitleElement(t).getChild(0);return this.editor.data.stringify(i,e)}getBody(e={}){const t=this.editor,i=t.data,r=t.model,o=e.rootName?e.rootName:void 0,s=t.model.document.getRoot(o),a=t.editing.view,l=new Fc(a.document),c=r.createRangeIn(s),d=l.createDocumentFragment(),u=r.createPositionAfter(s.getChild(0)),h=r.createRange(u,r.createPositionAt(s,"end")),g=new Map;for(const p of r.markers){const f=h.getIntersection(p.getRange());f&&g.set(p.name,f)}return i.mapper.clearBindings(),i.mapper.bindElements(s,d),i.downcastDispatcher.convert(c,g,l,e),l.remove(l.createRangeOn(d.getChild(0))),t.data.processor.toData(d)}_getTitleElement(e){const t=this.editor.model.document.getRoot(e);for(const i of t.getChildren())if(hw(i))return i}_fixTitleContent(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const r=this._getTitleElement(i);if(!r||r.maxOffset===1)continue;const o=Array.from(r.getChildren());o.shift();for(const s of o)e.move(e.createRangeOn(s),r,"after"),e.rename(s,"paragraph");t=!0}return t}_fixTitleElement(e){let t=!1;const i=this.editor.model;for(const r of this.editor.model.document.getRoots()){const o=Array.from(r.getChildren()).filter(hw),s=o[0],a=r.getChild(0);if(a.is("element","title"))o.length>1&&(mw(o,e,i),t=!0);else if(s||dw.has(a.name))dw.has(a.name)?S4(a,e,i):e.move(e.createRangeOn(s),r,0),mw(o,e,i),t=!0;else{const l=e.createElement("title");e.insert(l,r),e.insertElement("title-content",l),t=!0}}return t}_fixBodyElement(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const r=this.editor.model.document.getRoot(i);if(r.childCount<2){const o=e.createElement("paragraph");e.insert(o,r,1),this._bodyPlaceholder.set(i,o),t=!0}}return t}_fixExtraParagraph(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const r=this.editor.model.document.getRoot(i),o=this._bodyPlaceholder.get(i);P4(o,r)&&(this._bodyPlaceholder.delete(i),e.remove(o),t=!0)}return t}_attachPlaceholders(){const e=this.editor,t=e.t,i=e.editing.view,r=e.sourceElement,o=e.config.get("title.placeholder")||t("Type your title"),s=e.config.get("placeholder")||r&&r.tagName.toLowerCase()==="textarea"&&r.getAttribute("placeholder")||t("Type or paste your content here.");e.editing.downcastDispatcher.on("insert:title-content",(l,c,d)=>{const u=d.mapper.toViewElement(c.item);u.placeholder=o,Ac({view:i,element:u,keepOnFocus:!0})});const a=new Map;i.document.registerPostFixer(l=>{let c=!1;for(const d of i.document.roots){if(d.isEmpty)continue;const u=d.getChild(1),h=a.get(d.rootName);u!==h&&(h&&(Tc(l,h),l.removeAttribute("data-placeholder",h)),l.setAttribute("data-placeholder",s,u),a.set(d.rootName,u),c=!0),c=Ug(u,!0)&&d.childCount===2&&u.name==="p"?!!Hg(l,u)||c:!!Tc(l,u)||c}return c})}_attachTabPressHandling(){const e=this.editor,t=e.model;e.keystrokes.set("TAB",(i,r)=>{t.change(o=>{const s=t.document.selection,a=Array.from(s.getSelectedBlocks());if(a.length===1&&a[0].is("element","title-content")){const l=s.getFirstPosition().root.getChild(1);o.setSelection(l,0),r()}})}),e.keystrokes.set("SHIFT + TAB",(i,r)=>{t.change(o=>{const s=t.document.selection;if(!s.isCollapsed)return;const a=Ce(s.getSelectedBlocks()),l=s.getFirstPosition(),c=e.model.document.getRoot(l.root.rootName),d=c.getChild(0);a===c.getChild(1)&&l.isAtStart&&(o.setSelection(d.getChild(0),0),r())})})}}function ru(n,e,t){const i=e.modelCursor,r=e.viewItem;if(!i.isAtStart||!i.parent.is("element","$root")||!t.consumable.consume(r,{name:!0}))return;const o=t.writer,s=o.createElement("title"),a=o.createElement("title-content");o.append(a,s),o.insert(s,i),t.convertChildren(r,a),t.updateConversionResult(s,e)}function uw(n){return(e,t)=>{const i=t.modelPosition.parent;if(!i.is("element","title"))return;const r=i.parent,o=t.mapper.toViewElement(r);t.viewPosition=n.createPositionAt(o,0),e.stop()}}function hw(n){return n.is("element","title")}function S4(n,e,t){const i=e.createElement("title");e.insert(i,n,"before"),e.insert(n,i,0),e.rename(n,"title-content"),t.schema.removeDisallowedAttributes([n],e)}function mw(n,e,t){let i=!1;for(const r of n)r.index!==0&&(I4(r,e,t),i=!0);return i}function I4(n,e,t){const i=n.getChild(0);i.isEmpty?e.remove(n):(e.move(e.createRangeOn(i),n,"before"),e.rename(i,"paragraph"),e.remove(n),t.schema.removeDisallowedAttributes([i],e))}function P4(n,e){return!(!n||!n.is("element","paragraph")||n.childCount)&&!(e.childCount<=2||e.getChild(e.childCount-1)!==n)}class M4 extends G{refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){const t=this.editor.model,i=t.document.selection,r=e.value;t.change(o=>{if(i.isCollapsed){const s=i.getFirstPosition();if(i.hasAttribute("highlight")){const a=u=>u.item.hasAttribute("highlight")&&u.item.getAttribute("highlight")===this.value,l=s.getLastMatchingPosition(a,{direction:"backward"}),c=s.getLastMatchingPosition(a),d=o.createRange(l,c);r&&this.value!==r?(s.isEqual(c)||o.setAttribute("highlight",r,d),o.setSelectionAttribute("highlight",r)):(s.isEqual(c)||o.removeAttribute("highlight",d),o.removeSelectionAttribute("highlight"))}else r&&o.setSelectionAttribute("highlight",r)}else{const s=t.schema.getValidRanges(i.getRanges(),"highlight");for(const a of s)r?o.setAttribute("highlight",r,a):o.removeAttribute("highlight",a)}})}}class V4 extends C{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});const t=e.config.get("highlight.options");e.conversion.attributeToElement(function(i){const r={model:{key:"highlight",values:[]},view:{}};for(const o of i)r.model.values.push(o.model),r.view[o.model]={name:"mark",classes:o.class};return r}(t)),e.commands.add("highlight",new M4(e))}}class L4 extends C{get localizedOptionTitles(){const e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.config.get("highlight.options");for(const t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e),this._addMenuBarButton(e)}_addRemoveHighlightButton(){const e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),dd,null,i=>{i.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(e){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,Qa(e.type),e.model,function(i){i.bind("isEnabled").to(t,"isEnabled"),i.bind("isOn").to(t,"value",r=>r===e.model),i.iconView.fillColor=e.color,i.isToggleable=!0})}_addButton(e,t,i,r,o){const s=this.editor;s.ui.componentFactory.add(e,a=>{const l=new $(a),c=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return l.set({label:c,icon:i,tooltip:!0}),l.on("execute",()=>{s.execute("highlight",{value:r}),s.editing.view.focus()}),o(l),l})}_addDropdown(e){const t=this.editor,i=t.t,r=t.ui.componentFactory,o=e[0],s=e.reduce((a,l)=>(a[l.model]=l,a),{});r.add("highlight",a=>{const l=t.commands.get("highlight"),c=mt(a,sr),d=c.buttonView;d.set({label:i("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),d.bind("icon").to(l,"value",h=>Qa(u(h,"type"))),d.bind("color").to(l,"value",h=>u(h,"color")),d.bind("commandValue").to(l,"value",h=>u(h,"model")),d.bind("isOn").to(l,"value",h=>!!h),d.delegate("execute").to(c);function u(h,g){const p=h&&h!==d.lastExecuted?h:d.lastExecuted;return s[p][g]}return c.bind("isEnabled").to(l,"isEnabled"),is(c,()=>{const h=e.map(g=>{const p=r.create("highlight:"+g.model);return this.listenTo(p,"execute",()=>{c.buttonView.set({lastExecuted:g.model})}),p});return h.push(new _d),h.push(r.create("removeHighlight")),h},{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:i("Text highlight toolbar")}),function(h){h.buttonView.actionView.iconView.bind("fillColor").to(h.buttonView,"color")}(c),d.on("execute",()=>{t.execute("highlight",{value:d.commandValue})}),this.listenTo(c,"execute",()=>{t.editing.view.focus()}),c})}_addMenuBarButton(e){const t=this.editor,i=t.t,r=t.commands.get("highlight");t.ui.componentFactory.add("menuBar:highlight",o=>{const s=new Yt(o);s.buttonView.set({label:i("Highlight"),icon:Qa("marker")}),s.bind("isEnabled").to(r),s.buttonView.iconView.fillColor="transparent";const a=new tn(o);for(const d of e){const u=new Mi(o,s),h=new Se(o);h.set({label:d.title,icon:Qa(d.type),role:"menuitemradio",isToggleable:!0}),h.iconView.fillColor=d.color,h.delegate("execute").to(s),h.bind("isOn").to(r,"value",g=>g===d.model),h.on("execute",()=>{t.execute("highlight",{value:d.model}),t.editing.view.focus()}),u.children.add(h),a.items.add(u)}a.items.add(new Ta(o));const l=new Mi(o,s),c=new Se(o);return c.set({label:i("Remove highlight"),icon:dd}),c.delegate("execute").to(s),c.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),l.children.add(c),a.items.add(l),s.panelView.children.add(a),s})}}function Qa(n){return n==="marker"?mA:CA}class O4 extends C{static get requires(){return[V4,L4]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}class N4 extends G{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=function(r,o,s){const a=function(l,c){const d=Hd(l,c),u=d.start.parent;return u.isEmpty&&!u.is("element","$root")?u.parent:u}(r,s);return o.checkChild(a,"horizontalLine")}(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("horizontalLine");e.insertObject(i,null,null,{setSelection:"after"})})}}class R4 extends C{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.t,r=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),r.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:s})=>s.createEmptyElement("hr")}),r.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:s})=>{const a=i("Horizontal line"),l=s.createContainerElement("div",null,s.createEmptyElement("hr"));return s.addClass("ck-horizontal-line",l),s.setCustomProperty("hr",!0,l),function(c,d,u){return d.setCustomProperty("horizontalLine",!0,c),Ha(c,d,{label:u})}(l,s,a)}}),r.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new N4(e))}}class z4 extends C{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(Se))}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get("horizontalLine"),o=new e(t.locale),s=i.t;return o.set({label:s("Horizontal line"),icon:QC}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),o}}class D4 extends C{static get requires(){return[R4,z4,Qr]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}function gw(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function pw(n,e){const t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?i&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:r(o):null;function r(o){const s={name:!0};return o.hasAttribute("src")&&(s.attributes=["src"]),s}}function ou(n,e){const t=Ce(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function Ja(n){return n&&n.endsWith("px")?parseInt(n):null}function Xa(n){const e=Ja(n.getStyle("width")),t=Ja(n.getStyle("height"));return!(!e||!t)}const B4=/^(image|image-inline)$/;class _t extends C{constructor(){super(...arguments),m(this,"_domEmitter",new(Mt()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null,r={}){const o=this.editor,s=o.model,a=s.document.selection,l=fw(o,t||a,i);e={...Object.fromEntries(a.getAttributes()),...e};for(const c in e)s.schema.checkAttribute(l,c)||delete e[c];return s.change(c=>{const{setImageSizes:d=!0}=r,u=c.createElement(l,e);return s.insertObject(u,t,null,{setSelection:"on",findOptimalPosition:t||l=="imageInline"?void 0:"auto"}),u.parent?(d&&this.setImageNaturalSizeAttributes(u),u):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(i=>{const r=new R.window.Image;this._domEmitter.listenTo(r,"load",()=>{e.getAttribute("width")||e.getAttribute("height")||this.editor.model.enqueueChange(i.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let r=t.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:B4})}isImageAllowed(){const e=this.editor.model.document.selection;return function(t,i){if(fw(t,i,null)=="imageBlock"){const r=function(o,s){const a=Hd(o,s),l=a.start.parent;return l.isEmpty&&!l.is("element","$root")?l.parent:l}(i,t.model);if(t.model.schema.checkChild(r,"imageBlock"))return!0}else if(t.model.schema.checkChild(i.focus,"imageInline"))return!0;return!1}(this.editor,e)&&function(t){return[...t.focus.getAncestors()].every(i=>!i.is("element","imageBlock"))}(e)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),Ha(e,t,{label:()=>{const r=this.findViewImgElement(e).getAttribute("alt");return r?`${r} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Je(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function fw(n,e,t){const i=n.model.schema,r=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(r==="inline"?"imageInline":r!=="auto"?"imageBlock":e.is("selection")?ou(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const F4=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class j4 extends C{constructor(e){super(e),m(this,"_timeoutId"),m(this,"_positionToInsert"),this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Gd,_t,tu,Li]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const r=t.selection.getFirstRange(),o=Qe.fromPosition(r.start);o.stickiness="toPrevious";const s=Qe.fromPosition(r.end);s.stickiness="toNext",t.once("change:data",()=>{this._embedImageBetweenPositions(o,s),o.detach(),s.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(R.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,t){const i=this.editor,r=new Lt(e,t),o=r.getWalker({ignoreElementEnd:!0}),s=Object.fromEntries(i.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let l="";for(const c of o)c.item.is("$textProxy")&&(l+=c.item.data);l=l.trim(),l.match(F4)?(this._positionToInsert=Qe.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!i.commands.get("insertImage").isEnabled)return void r.detach();i.model.change(c=>{let d;this._timeoutId=null,c.remove(r),r.detach(),this._positionToInsert.root.rootName!=="$graveyard"&&(d=this._positionToInsert.toPosition()),a.insertImage({...s,src:l},d),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get("Delete").requestUndoOnBackspace()},100)):r.detach()}}class $4 extends G{refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),r=t.model,o=i.getClosestSelectedImageElement(r.document.selection);r.change(s=>{s.setAttribute("alt",e.newValue,o)})}}class H4 extends C{static get requires(){return[_t]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new $4(this.editor))}}class U4 extends N{constructor(e){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"labeledInput"),m(this,"backButtonView"),m(this,"saveButtonView"),m(this,"children"),m(this,"_focusables"),m(this,"_focusCycler"),this.focusTracker=new ge,this.keystrokes=new Ie,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new La(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new St,this.keystrokes.set("Esc",(t,i)=>{this.fire("cancel"),i()}),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),jr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new $(this.locale);return t.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ir(this.locale,{label:e("Text Alternative")});return t.children.add(this.backButtonView,0),t}_createLabeledInputView(){const e=this.locale.t,t=new Pi(this.locale,Sn);return t.label=e("Text alternative"),t.class="ck-labeled-field-view_full-width",t}}function su(n){const e=n.editing.view,t=kt.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class W4 extends C{constructor(){super(...arguments),m(this,"_balloon"),m(this,"_form")}static get requires(){return[Vi]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{const r=e.commands.get("imageTextAlternative"),o=new $(i);return o.set({label:t("Change image text alternative"),icon:FA,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>!!s),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,t=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Yo(U4))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{i.getClosestSelectedImageWidget(t.selection)?this._isVisible&&function(r){const o=r.plugins.get("ContextualBalloon");if(r.plugins.get("ImageUtils").getClosestSelectedImageWidget(r.editing.view.document.selection)){const s=su(r);o.updatePosition(s)}}(e):this._hideForm(!0)}),Tn({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:su(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class au extends C{static get requires(){return[H4,W4]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function bw(n,e){const t=(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;const s=o.writer,a=o.mapper.toViewElement(r.item),l=n.findViewImgElement(a);r.attributeNewValue===null?(s.removeAttribute("srcset",l),s.removeAttribute("sizes",l)):r.attributeNewValue&&(s.setAttribute("srcset",r.attributeNewValue,l),s.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${e}`,t)}}function el(n,e,t){const i=(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;const a=s.writer,l=s.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)};return r=>{r.on(`attribute:${t}:${e}`,i)}}class lu extends bi{observe(e){this.listenTo(e,"load",(t,i)=>{const r=i.target;this.checkShouldIgnoreEventFromTarget(r)||r.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}class q4 extends G{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&le("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&le("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=Ne(e.source),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((s,a)=>{const l=i.getSelectedElement();if(typeof s=="string"&&(s={src:s}),a&&l&&r.isImage(l)){const c=this.editor.model.createPositionAfter(l);r.insertImage({...s,...o},c,e.imageType)}else e.breakBlock?r.insertImage({...s,...o},i.getFirstPosition(),e.imageType):r.insertImage({...s,...o},null,e.imageType)})}}class G4 extends G{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(t),this.value=this.isEnabled?t.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(r=>{r.setAttribute("src",e.source,t),this.cleanupImage(r,t),i.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}class kw extends C{static get requires(){return[_t]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(lu),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new q4(e),r=new G4(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",r),e.commands.add("imageInsert",i)}}class ww extends C{static get requires(){return[_t]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils"),r=e==="imageBlock"?"figure":"img";function o(s,a,l,c,d=!1){s.on(`attribute:${a}:${e}`,(u,h,g)=>{if(!g.consumable.consume(h.item,u.name))return;const p=g.writer,f=g.mapper.toViewElement(h.item),b=i.findViewImgElement(f);h.attributeNewValue!==null?p.setAttribute(l,h.attributeNewValue,b):p.removeAttribute(l,b);const k=h.item.getAttribute("width"),w=h.item.getAttribute("height"),_=k&&w;if(_&&d&&p.setAttribute("loading","lazy",b),h.item.hasAttribute("sources"))return;const y=h.item.hasAttribute("resizedWidth");(e!=="imageInline"||y||c)&&_&&p.setStyle("aspect-ratio",`${k}/${w}`,b)})}t.conversion.for("upcast").attributeToAttribute({view:{name:r,styles:{width:/.+/}},model:{key:"width",value:s=>Xa(s)?Ja(s.getStyle("width")):null}}).attributeToAttribute({view:{name:r,key:"width"},model:"width"}).attributeToAttribute({view:{name:r,styles:{height:/.+/}},model:{key:"height",value:s=>Xa(s)?Ja(s.getStyle("height")):null}}).attributeToAttribute({view:{name:r,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(s=>{o(s,"width","width",!0,!0),o(s,"height","height",!0,!0)}),t.conversion.for("dataDowncast").add(s=>{o(s,"width","width",!1),o(s,"height","height",!1)})}}class _w extends G{constructor(e,t){super(e),m(this,"_modelElementName"),this._modelElementName=t}refresh(){const e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t)}execute(e={}){const t=this.editor,i=this.editor.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(i.document.selection),s=Object.fromEntries(o.getAttributes());return s.src||s.uploadId?i.change(a=>{const{setImageSizes:l=!0}=e,c=Array.from(i.markers).filter(h=>h.getRange().containsItem(o)),d=r.insertImage(s,i.createSelection(o,"on"),this._modelElementName,{setImageSizes:l});if(!d)return null;const u=a.createRangeOn(d);for(const h of c){const g=h.getRange(),p=g.root.rootName!="$graveyard"?g.getJoined(u,!0):u;a.updateMarker(h,{range:p})}return{oldElement:o,newElement:d}}):null}}class vw extends C{static get requires(){return[_t]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("editingDowncast").add(r=>{r.on("attribute:placeholder",(o,s,a)=>{if(!a.consumable.test(s.item,o.name)||!s.item.is("element","imageBlock")&&!s.item.is("element","imageInline"))return;a.consumable.consume(s.item,o.name);const l=a.writer,c=a.mapper.toViewElement(s.item),d=i.findViewImgElement(c);s.attributeNewValue?(l.addClass("image_placeholder",d),l.setStyle("background-image",`url(${s.attributeNewValue})`,d),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,d)):(l.removeClass("image_placeholder",d),l.removeStyle("background-image",d))})})}_setupLoadListener(){const e=this.editor,t=e.model,i=e.editing,r=i.view,o=e.plugins.get("ImageUtils");r.addObserver(lu),this.listenTo(r.document,"imageLoaded",(s,a)=>{const l=r.domConverter.mapDomToView(a.target);if(!l)return;const c=o.getImageWidgetFromImageView(l);if(!c)return;const d=i.mapper.toModelElement(c);d&&d.hasAttribute("placeholder")&&t.enqueueChange({isUndoable:!1},u=>{u.removeAttribute("placeholder",d)})})}}class yw extends C{static get requires(){return[kw,ww,_t,vw,Vt]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new _w(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,r=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>gw(s)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>r.toImageWidget(gw(s),s,t("image widget"))}),i.for("downcast").add(el(r,"imageBlock","src")).add(el(r,"imageBlock","alt")).add(bw(r,"imageBlock")),i.for("upcast").elementToElement({view:pw(e,"imageBlock"),model:(o,{writer:s})=>s.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(function(o){const s=(a,l,c)=>{if(!c.consumable.test(l.viewItem,{name:!0,classes:"image"}))return;const d=o.findViewImgElement(l.viewItem);if(!d||!c.consumable.test(d,{name:!0}))return;c.consumable.consume(l.viewItem,{name:!0,classes:"image"});const u=Ce(c.convertItem(d,l.modelCursor).modelRange.getItems());u?(c.convertChildren(l.viewItem,u),c.updateConversionResult(u,l)):c.consumable.revert(l.viewItem,{name:!0,classes:"image"})};return a=>{a.on("element:figure",s)}}(r))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(r.isInlineImageView))return;c=a.targetRanges?e.editing.mapper.toModelRange(a.targetRanges[0]):t.document.selection.getFirstRange();const d=t.createSelection(c);if(ou(t.schema,d)==="imageBlock"){const u=new Si(i.document),h=l.map(g=>u.createElement("figure",{class:"image"},g));a.content=u.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageBlock")&&r.setImageNaturalSizeAttributes(d)})})}}class Z4 extends N{constructor(e,t=[]){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"_focusables"),m(this,"_focusCycler"),m(this,"children"),this.focusTracker=new ge,this.keystrokes=new Ie,this._focusables=new St,this.children=this.createCollection(),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const i of t)this.children.add(i),this._focusables.add(i),i instanceof rb&&this._focusables.addMany(i.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),jr({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ps extends C{constructor(e){super(e),m(this,"dropdownView"),m(this,"_integrations",new Map),e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[_t]}init(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=i.isImage(t.getSelectedElement())});const r=o=>this._createToolbarComponent(o);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o=>this._createMenuBarComponent(o))}registerIntegration({name:e,observable:t,buttonViewCreator:i,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:s=!1,override:a=!1}){this._integrations.has(e)&&!a&&le("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:i,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:s})}_createToolbarComponent(e){const t=this.editor,i=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o;const s=r[0];if(r.length==1){if(!s.requiresForm)return s.buttonViewCreator(!0);o=s.buttonViewCreator(!0)}else{const c=s.buttonViewCreator(!1);o=new sr(e,c),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",d=>i(d?"Replace image":"Insert image"))}const a=this.dropdownView=mt(e,o),l=r.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(d=>d)),a.once("change:isOpen",()=>{const c=r.flatMap(({formViewCreator:u})=>u(r.length==1)),d=new Z4(t.locale,c);a.panelView.children.add(d)}),a}_createMenuBarComponent(e){const t=e.t,i=this._prepareIntegrations();if(!i.length)return null;const r=i.flatMap(({menuBarButtonViewCreator:a})=>a(i.length==1)),o=new Yt(e),s=new tn(e);o.panelView.children.add(s),o.buttonView.set({icon:JC,label:t("Image")});for(const a of r){const l=new Mi(e,o);l.children.add(a),s.items.add(l),a.delegate("execute").to(o)}return o}_prepareIntegrations(){const e=this.editor.config.get("image.insert.integrations"),t=[];if(!e.length)return le("image-insert-integrations-not-specified"),t;for(const i of e)this._integrations.has(i)?t.push(this._integrations.get(i)):["upload","assetManager","url"].includes(i)||le("image-insert-unknown-integration",{item:i});return t.length||le("image-insert-integrations-not-registered"),t}}class K4 extends C{static get requires(){return[yw,Qr,au,ps]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class Y4 extends C{static get requires(){return[kw,ww,_t,vw,Vt]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new _w(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,r=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>s.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:s})=>r.toImageWidget(function(a){return a.createContainerElement("span",{class:"image-inline"},a.createEmptyElement("img"))}(s),s,t("image widget"))}),i.for("downcast").add(el(r,"imageInline","src")).add(el(r,"imageInline","alt")).add(bw(r,"imageInline")),i.for("upcast").elementToElement({view:pw(e,"imageInline"),model:(o,{writer:s})=>s.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(r.isBlockImageView))return;c=a.targetRanges?e.editing.mapper.toModelRange(a.targetRanges[0]):t.document.selection.getFirstRange();const d=t.createSelection(c);if(ou(t.schema,d)==="imageInline"){const u=new Si(i.document),h=l.map(g=>g.childCount===1?(Array.from(g.getAttributes()).forEach(p=>u.setAttribute(...p,r.findViewImgElement(g))),g.getChild(0)):g);a.content=u.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageInline")&&r.setImageNaturalSizeAttributes(d)})})}}class Q4 extends C{static get requires(){return[Y4,Qr,au,ps]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class xw extends C{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[_t]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),i=e.getFirstPosition().findAncestor("caption");return i&&t.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}class J4 extends G{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),i=e.plugins.get("ImageUtils");if(!e.plugins.has(yw))return this.isEnabled=!1,void(this.value=!1);const r=e.model.document.selection,o=r.getSelectedElement();if(!o){const s=t.getCaptionFromModelSelection(r);return this.isEnabled=!!s,void(this.value=!!s)}this.isEnabled=i.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,t)})}_showImageCaption(e,t){const i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let s=i.getSelectedElement();const a=r._getSavedCaption(s);o.isInlineImage(s)&&(this.editor.execute("imageTypeBlock"),s=i.getSelectedElement());const l=a||e.createElement("caption");e.append(l,s),t&&e.setSelection(l,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,r=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let s,a=i.getSelectedElement();a?s=o.getCaptionFromImageModelElement(a):(s=o.getCaptionFromModelSelection(i),a=s.parent),r._saveCaption(a,s),e.setSelection(a,"on"),e.remove(s)}}class X4 extends C{constructor(e){super(e),m(this,"_savedCaptionsMap"),this._savedCaptionsMap=new WeakMap}static get requires(){return[_t,xw]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new J4(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:s=>r.matchImageCaptionViewElement(s),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>i.isBlockImage(s.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>{if(!i.isBlockImage(s.parent))return null;const l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),l.placeholder=o("Enter image caption"),Ac({view:t,element:l,keepOnFocus:!0});const c=s.parent.getAttribute("alt");return vk(l,a,{label:c?o("Caption for image: %0",[c]):o("Caption for the image")})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),s=a=>{if(!a.return)return;const{oldElement:l,newElement:c}=a.return;if(!l)return;if(t.isBlockImage(l)){const u=i.getCaptionFromImageModelElement(l);if(u)return void this._saveCaption(c,u)}const d=this._getSavedCaption(l);d&&this._saveCaption(c,d)};r&&this.listenTo(r,"execute",s,{priority:"low"}),o&&this.listenTo(o,"execute",s,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?ze.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,i=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const s of o){if(s.attributeKey!=="alt")continue;const a=s.range.start.nodeAfter;if(i.isBlockImage(a)){const l=r.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}}class eS extends C{static get requires(){return[xw]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageCaptionUtils"),r=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const s=e.commands.get("toggleImageCaption"),a=new $(o);return a.set({icon:$C,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(s,"value","isEnabled"),a.bind("label").to(s,"value",l=>r(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=i.getCaptionFromModelSelection(e.model.document.selection);if(l){const c=e.editing.mapper.toViewElement(l);t.scrollToTheSelection(),t.change(d=>{d.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}}class tS extends C{static get requires(){return[X4,eS]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function Cw(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function iS(n){return new Promise((e,t)=>{const i=n.getAttribute("src");fetch(i).then(r=>r.blob()).then(r=>{const o=Aw(r,i),s=o.replace("image/",""),a=new File([r],`image.${s}`,{type:o});e(a)}).catch(r=>r&&r.name==="TypeError"?function(o){return function(s){return new Promise((a,l)=>{const c=R.document.createElement("img");c.addEventListener("load",()=>{const d=R.document.createElement("canvas");d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),d.toBlob(u=>u?a(u):l())}),c.addEventListener("error",()=>l()),c.src=s})}(o).then(s=>{const a=Aw(s,o),l=a.replace("image/","");return new File([s],`image.${l}`,{type:a})})}(i).then(e).catch(t):t(r))})}function Aw(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class nS extends C{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),s=Cw(o),a=new e(t.locale),l=i.t;return a.set({acceptedType:o.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:XC}),a.bind("isEnabled").to(r),a.on("done",(c,d)=>{const u=Array.from(d).filter(h=>s.test(h.type));u.length&&(t.execute("uploadImage",{file:u}),t.editing.view.focus())}),a}_createToolbarButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),r=this._createButton(ib);return r.tooltip=!0,r.bind("label").to(t,"isImageSelected",i,"isAccessAllowed",(o,s)=>e(s?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),r}_createDropdownButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(ib);return i.withText=!0,i.bind("label").to(t,"isImageSelected",r=>e(r?"Replace from computer":"Upload from computer")),i.on("execute",()=>{t.dropdownView.isOpen=!1}),i}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createButton(Qb);switch(i.withText=!0,e){case"standalone":i.label=t("Image from computer");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("From computer")}return i}}class rS extends C{constructor(e){super(e),m(this,"placeholder"),m(this,"uploadStatusChange",(t,i,r)=>{const o=this.editor,s=i.item,a=s.getAttribute("uploadId");if(!r.consumable.consume(i.item,t.name))return;const l=o.plugins.get("ImageUtils"),c=o.plugins.get(An),d=a?i.attributeNewValue:null,u=this.placeholder,h=o.editing.mapper.toViewElement(s),g=r.writer;if(d=="reading")return Tw(h,g),void Ew(l,u,h,g);if(d=="uploading"){const p=c.loaders.get(a);return Tw(h,g),void(p?(Sw(h,g),function(f,b,k,w){const _=function(y){const x=y.createUIElement("div",{class:"ck-progress-bar"});return y.setCustomProperty("progressBar",!0,x),x}(b);b.insert(b.createPositionAt(f,"end"),_),k.on("change:uploadedPercent",(y,x,A)=>{w.change(I=>{I.setStyle("width",A+"%",_)})})}(h,g,p,o.editing.view),function(f,b,k,w){if(w.data){const _=f.findViewImgElement(b);k.setAttribute("src",w.data,_)}}(l,h,g,p)):Ew(l,u,h,g))}d=="complete"&&c.loaders.get(a)&&function(p,f,b){const k=f.createUIElement("div",{class:"ck-image-upload-complete-icon"});f.insert(f.createPositionAt(p,"end"),k),setTimeout(()=>{b.change(w=>w.remove(w.createRangeOn(k)))},3e3)}(h,g,o.editing.view),function(p,f){Pw(p,f,"progressBar")}(h,g),Sw(h,g),function(p,f){f.removeClass("ck-appear",p)}(h,g)}),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function Tw(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function Ew(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);const r=n.findViewImgElement(t);r.getAttribute("src")!==e&&i.setAttribute("src",e,r),Iw(t,"placeholder")||i.insert(i.createPositionAfter(r),function(o){const s=o.createUIElement("div",{class:"ck-upload-placeholder-loader"});return o.setCustomProperty("placeholder",!0,s),s}(i))}function Sw(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),Pw(n,e,"placeholder")}function Iw(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function Pw(n,e,t){const i=Iw(n,t);i&&e.remove(e.createRangeOn(i))}class oS extends G{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=Ne(e.file),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((s,a)=>{const l=i.getSelectedElement();if(a&&l&&r.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(s,o,c)}else this._uploadImage(s,o)})}_uploadImage(e,t,i){const r=this.editor,o=r.plugins.get(An).createLoader(e),s=r.plugins.get("ImageUtils");o&&s.insertImage({...t,uploadId:o.id},i)}}class sS extends C{constructor(e){super(e),m(this,"_uploadImageElements"),m(this,"_uploadedImages",new Map),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[An,qb,Vt,_t]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.document,i=e.conversion,r=e.plugins.get(An),o=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline"),a=Cw(e.config.get("image.upload.types")),l=new oS(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(c=>c.on("element:img",(d,u,h)=>{if(!h.consumable.test(u.viewItem,{attributes:["data-ck-upload-id"]}))return;const g=u.viewItem.getAttribute("data-ck-upload-id");if(!g)return;const[p]=Array.from(u.modelRange.getItems({shallow:!0})),f=r.loaders.get(g);p&&(h.writer.setAttribute("uploadId",g,p),h.consumable.consume(u.viewItem,{attributes:["data-ck-upload-id"]}),f&&f.data&&h.writer.setAttribute("uploadStatus",f.status,p))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(c,d)=>{if(u=d.dataTransfer,Array.from(u.types).includes("text/html")&&u.getData("text/html")!=="")return;var u;const h=Array.from(d.dataTransfer.files).filter(g=>!!g&&a.test(g.type));if(h.length&&(c.stop(),e.model.change(g=>{d.targetRanges&&g.setSelection(d.targetRanges.map(p=>e.editing.mapper.toModelRange(p))),e.execute("uploadImage",{file:h})}),!e.commands.get("uploadImage").isAccessAllowed)){const g=e.plugins.get("Notification"),p=e.locale.t;g.showWarning(p("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(s,"inputTransformation",(c,d)=>{const u=Array.from(e.editing.view.createRangeIn(d.content)).map(g=>g.item).filter(g=>function(p,f){return!(!p.isInlineImageView(f)||!f.getAttribute("src")||!f.getAttribute("src").match(/^data:image\/\w+;base64,/g)&&!f.getAttribute("src").match(/^blob:/g))}(o,g)&&!g.getAttribute("uploadProcessed")).map(g=>({promise:iS(g),imageElement:g}));if(!u.length)return;const h=new Si(e.editing.view.document);for(const g of u){h.setAttribute("uploadProcessed",!0,g.imageElement);const p=r.createLoader(g.promise);p&&(h.setAttribute("src","",g.imageElement),h.setAttribute("uploadId",p.id,g.imageElement))}}),e.editing.view.document.on("dragover",(c,d)=>{d.preventDefault()}),t.on("change",()=>{const c=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),d=new Set;for(const u of c)if(u.type=="insert"&&u.name!="$text"){const h=u.position.nodeAfter,g=u.position.root.rootName=="$graveyard";for(const p of aS(e,h)){const f=p.getAttribute("uploadId");if(!f)continue;const b=r.loaders.get(f);b?g?d.has(f)||Array.from(this._uploadImageElements.get(f)).every(k=>k.root.rootName=="$graveyard")&&b.abort():(d.add(f),this._uploadImageElements.has(f)?this._uploadImageElements.get(f).add(p):this._uploadImageElements.set(f,new Set([p])),b.status=="idle"&&this._readAndUpload(b)):!g&&this._uploadedImages.has(f)&&e.model.enqueueChange({isUndoable:!1},k=>{k.setAttribute("uploadStatus","complete",p),this.fire("uploadComplete",{data:this._uploadedImages.get(f),imageElement:p})})}}}),this.on("uploadComplete",(c,{imageElement:d,data:u})=>{const h=u.urls?u.urls:u;this.editor.model.change(g=>{g.setAttribute("src",h.default,d),this._parseAndSetSrcsetAttributeOnImage(h,d,g),o.setImageNaturalSizeAttributes(d)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const t=this.editor,i=t.model,r=t.locale.t,o=t.plugins.get(An),s=t.plugins.get(qb),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},d=>{const u=l.get(e.id);for(const h of u)d.setAttribute("uploadStatus","reading",h)}),e.read().then(()=>{const d=e.upload();t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Uploading image"));for(const u of l.get(e.id)){if(W.isSafari){const h=t.editing.mapper.toViewElement(u),g=a.findViewImgElement(h);t.editing.view.once("render",()=>{if(!g.parent)return;const p=t.editing.view.domConverter.mapViewToDom(g.parent);if(!p)return;const f=p.style.display;p.style.display="none",p._ckHack=p.offsetHeight,p.style.display=f})}i.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",u)})}return d}).then(d=>{i.enqueueChange({isUndoable:!1},u=>{for(const h of l.get(e.id))u.setAttribute("uploadStatus","complete",h),this.fire("uploadComplete",{data:d,imageElement:h});t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this._uploadedImages.set(e.id,d)}),c()}).catch(d=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw d;e.status=="error"&&d&&s.showWarning(d,{title:r("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},u=>{for(const h of l.get(e.id))h.root.rootName!=="$graveyard"&&u.remove(h)}),c()});function c(){i.enqueueChange({isUndoable:!1},d=>{for(const u of l.get(e.id))d.removeAttribute("uploadId",u),d.removeAttribute("uploadStatus",u);l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let r=0;const o=Object.keys(e).filter(s=>{const a=parseInt(s,10);if(!isNaN(a))return r=Math.max(r,a),!0}).map(s=>`${e[s]} ${s}w`).join(", ");if(o!=""){const s={srcset:o};t.hasAttribute("width")||t.hasAttribute("height")||(s.width=r),i.setAttributes(s,t)}}_registerConverters(e){const{conversion:t,plugins:i}=this.editor,r=i.get(An),o=i.get(_t);t.for("dataDowncast").add(s=>{s.on(`attribute:uploadId:${e}`,(a,l,c)=>{if(!c.consumable.test(l.item,a.name))return;const d=r.loaders.get(l.attributeNewValue);if(!d||!d.data)return null;const u=c.mapper.toViewElement(l.item),h=o.findViewImgElement(u);h&&(c.consumable.consume(l.item,a.name),c.writer.setAttribute("data-ck-upload-id",d.id,h))})})}}function aS(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}class Mw extends C{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[sS,nS,rS]}}class lS extends N{constructor(e){super(e),m(this,"urlInputView"),m(this,"keystrokes"),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Ie,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),jr({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,t=e.t,i=new Pi(e,Sn);return i.bind("label").to(this,"isImageSelected",r=>t(r?"Update image URL":"Insert image via URL")),i.bind("isEnabled").to(this),i.fieldView.inputMode="url",i.fieldView.placeholder="https://example.com/image.png",i.fieldView.bind("value").to(this,"imageURLInputValue",r=>r||""),i.fieldView.on("input",()=>{this.imageURLInputValue=i.fieldView.element.value.trim()}),i}focus(){this.urlInputView.focus()}}class cS extends C{constructor(){super(...arguments),m(this,"_imageInsertUI"),m(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ps,Jo]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const t=new e(this.editor.locale);return t.icon=eA,t.on("execute",()=>{this._showModal()}),t}_createToolbarButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton($);return t.tooltip=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert image via URL")),t}_createDropdownButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton($);return t.withText=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert via URL")),t}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createInsertUrlButton(Se);switch(i.withText=!0,e){case"standalone":i.label=t("Image via URL");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("Via URL")}return i}_createInsertUrlView(){const e=this.editor,t=e.locale,i=e.commands.get("replaceImageSource"),r=e.commands.get("insertImage"),o=new lS(t);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([r,i],"isEnabled",(...s)=>s.some(a=>a)),o}_showModal(){const e=this.editor,t=e.locale.t,i=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const r=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=r.value||"",i.show({id:"insertImageViaUrl",title:t("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:t("Cancel"),withText:!0,onExecute:()=>i.hide()},{label:this._imageInsertUI.isImageSelected?t("Save"):t("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class Vw extends C{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[cS,ps]}}class dS extends C{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[Mw,Vw,ps]}}class uS extends G{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!t,t&&t.hasAttribute("resizedWidth")?this.value={width:t.getAttribute("resizedWidth"),height:null}:this.value=null}execute(e){const t=this.editor,i=t.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},o&&i.change(s=>{s.setAttribute("resizedWidth",e.width,o),s.removeAttribute("resizedHeight",o),r.setImageNaturalSizeAttributes(o)})}}class Lw extends C{static get requires(){return[_t]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new uS(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(r=>r.on(`attribute:resizedWidth:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(s.item);s.attributeNewValue!==null?(l.setStyle("width",s.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:r=>({key:"style",value:{height:r}})}),t.conversion.for("editingDowncast").add(r=>r.on(`attribute:resizedHeight:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(s.item),d=e==="imageInline"?i.findViewImgElement(c):c;s.attributeNewValue!==null?l.setStyle("height",s.attributeNewValue,d):l.removeStyle("height",d)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:r=>Xa(r)?null:r.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:r=>Xa(r)?null:r.getStyle("height")}})}}const cu={small:vA,medium:_A,large:wA,custom:bA,original:kA};class hS extends C{constructor(e){super(e),m(this,"_resizeUnit"),this._resizeUnit=e.config.get("image.resizeUnit")}static get requires(){return[Lw]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const r of t)this._registerImageResizeButton(r);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:r,icon:o}=e;t.ui.componentFactory.add(i,s=>{const a=new $(s),l=t.commands.get("resizeImage"),c=this._getOptionLabelValue(e,!0);if(!cu[o])throw new v("imageresizebuttons-missing-icon",t,e);if(a.set({label:c,icon:cu[o],tooltip:c,isToggleable:!0}),a.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&fs(e)){const d=t.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{d._showForm(this._resizeUnit)})}else{const d=r?r+this._resizeUnit:null;a.bind("isOn").to(l,"value",l,"isEnabled",du(d)),this.listenTo(a,"execute",()=>{t.execute("resizeImage",{width:d})})}return a})}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,r=e.find(s=>!s.value),o=s=>{const a=t.commands.get("resizeImage"),l=mt(s,pb),c=l.buttonView,d=i("Resize image");return c.set({tooltip:d,commandValue:r.value,icon:cu.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:d,ariaLabelledBy:void 0}),c.bind("label").to(a,"value",u=>u&&u.width?u.width:this._getOptionLabelValue(r)),l.bind("isEnabled").to(this),En(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list"),role:"menu"}),this.listenTo(l,"execute",u=>{"onClick"in u.source?u.source.onClick():(t.execute(u.source.commandName,{width:u.source.commandValue}),t.editing.view.focus())}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const i=this.editor.t;return e.label?e.label:t?fs(e)?i("Custom image size"):e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):fs(e)?i("Custom"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const{editor:i}=this,r=new ot,o=e.map(s=>fs(s)?{...s,valueWithUnits:"custom"}:s.value?{...s,valueWithUnits:`${s.value}${this._resizeUnit}`}:{...s,valueWithUnits:null});for(const s of o){let a=null;if(i.plugins.has("ImageCustomResizeUI")&&fs(s)){const l=i.plugins.get("ImageCustomResizeUI");a={type:"button",model:new en({label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{l._showForm(this._resizeUnit)}})};const c=Object.values(o).map(d=>d.valueWithUnits);a.model.bind("isOn").to(t,"value",t,"isEnabled",mS(c))}else a={type:"button",model:new en({commandName:"resizeImage",commandValue:s.valueWithUnits,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(t,"value",t,"isEnabled",du(s.valueWithUnits));a.model.bind("isEnabled").to(t,"isEnabled"),r.add(a)}return r}}function fs(n){return n.value==="custom"}function du(n){return(e,t)=>!(e===void 0||!t)&&(n===null&&e===n||e!==null&&e.width===n)}function mS(n){return(e,t)=>!n.some(i=>du(i)(e,t))}const uu="image_resized";class gS extends C{static get requires(){return[Wd,_t]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils");t.addObserver(lu),this.listenTo(t.document,"imageLoaded",(r,o)=>{if(!o.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;const s=e.editing.view.domConverter,a=s.domToView(o.target),l=i.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(Wd).getResizerByViewElement(l);if(c)return void c.redraw();const d=e.editing.mapper,u=d.toModelElement(l);c=e.plugins.get(Wd).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:u,viewElement:l,editor:e,getHandleHost:h=>h.querySelector("img"),getResizeHost:()=>s.mapViewToDom(d.toViewElement(u)),isCentered:()=>u.getAttribute("imageStyle")=="alignCenter",onCommit(h){t.change(g=>{g.removeClass(uu,l)}),e.execute("resizeImage",{width:h})}}),c.on("updateSize",()=>{l.hasClass(uu)||t.change(g=>{g.addClass(uu,l)});const h=u.name==="imageInline"?a:l;h.getStyle("height")&&t.change(g=>{g.removeStyle("height",h)})}),c.bind("isEnabled").to(this)})}}function Ow(n){if(!n)return null;const[,e,t]=n.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:t}}function Nw(n,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/n*100,unit:"%"}}function Rw(n){const{editing:e}=n,t=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!t)return null;const i=e.mapper.toViewElement(t);return{model:t,view:i,dom:e.view.domConverter.mapViewToDom(i)}}class pS extends N{constructor(e,t,i){super(e),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"unit"),m(this,"backButtonView"),m(this,"saveButtonView"),m(this,"labeledInput"),m(this,"children"),m(this,"_focusables"),m(this,"_focusCycler"),m(this,"_validators"),this.focusTracker=new ge,this.keystrokes=new Ie,this.unit=t,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new La(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new St,this._validators=i,this.keystrokes.set("Esc",(r,o)=>{this.fire("cancel"),o()}),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),jr({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new $(this.locale);return t.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ir(this.locale,{label:e("Image Resize")});return t.children.add(this.backButtonView,0),t}_createLabeledInputView(){const e=this.locale.t,t=new Pi(this.locale,xb);return t.label=e("Resize image (in %0)",this.unit),t.class="ck-labeled-field-view_full-width",t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){const{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}}class fS extends C{constructor(){super(...arguments),m(this,"_balloon"),m(this,"_form")}static get requires(){return[Vi]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Yo(pS))(t.locale,e,function(i){const r=i.t;return[o=>o.rawSize.trim()===""?r("The value must not be empty."):o.parsedSize===null?r("The value should be a plain number."):void 0]}(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),Tn({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const t=this.editor,i=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:su(t)});const r=function(a,l){const c=Rw(a);if(!c)return null;const d=Ow(c.model.getAttribute("resizedWidth")||null);return d?d.unit===l?d:Nw(Ud(c.dom),{value:new K(c.dom).width},l):null}(t,e),o=r?r.value.toFixed(1):"",s=function(a,l){const c=Rw(a);if(!c)return null;const d=Ud(c.dom),u=Ow(window.getComputedStyle(c.dom).minWidth)||{value:1};return{unit:l,lower:Math.max(.1,Nw(d,u,l).value),upper:l==="px"?d:100}}(t,e);i.fieldView.value=i.fieldView.element.value=o,s&&Object.assign(i.fieldView,{min:s.lower.toFixed(1),max:Math.ceil(s.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class bS extends C{static get requires(){return[Lw,gS,fS,hS]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class kS extends G{constructor(e,t){super(e),m(this,"_defaultStyles"),m(this,"_styles"),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(const r of i.modelElements)this._defaultStyles[r]=i.name;return[i.name,i]}))}refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,r=t.plugins.get("ImageUtils");i.change(o=>{const s=e.value,{setImageSizes:a=!0}=e;let l=r.getClosestSelectedImageElement(i.document.selection);s&&this.shouldConvertImageType(s,l)&&(this.editor.execute(r.isBlockImage(l)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),l=r.getClosestSelectedImageElement(i.document.selection)),!s||this._styles.get(s).isDefault?o.removeAttribute("imageStyle",l):o.setAttribute("imageStyle",s,l),a&&r.setImageNaturalSizeAttributes(l)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}const tl={get inline(){return{name:"inline",title:"In line",icon:jf,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:Ff,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:$f,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:hd,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:md,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:Hf,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:hd,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:md,modelElements:["imageBlock"],className:"image-style-side"}}},zw={full:fA,left:$f,right:Hf,center:hd,inlineLeft:Ff,inlineRight:md,inline:jf},Dw=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Bw(n){le("image-style-configuration-definition-invalid",n)}var hu={normalizeStyles:function(n){return(n.configuredStyles.options||[]).map(e=>function(t){return t=typeof t=="string"?tl[t]?{...tl[t]}:{name:t}:function(i,r){const o={...r};for(const s in i)Object.prototype.hasOwnProperty.call(r,s)||(o[s]=i[s]);return o}(tl[t.name],t),typeof t.icon=="string"&&(t.icon=zw[t.icon]||t.icon),t}(e)).filter(e=>function(t,{isBlockPluginLoaded:i,isInlinePluginLoaded:r}){const{modelElements:o,name:s}=t;if(!(o&&o.length&&s))return Bw({style:t}),!1;{const a=[i?"imageBlock":null,r?"imageInline":null];if(!o.some(l=>a.includes(l)))return le("image-style-missing-dependency",{style:t,missingPlugins:o.map(l=>l==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}(e,n))},getDefaultStylesConfiguration:function(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...Dw]:[]},warnInvalidStyle:Bw,DEFAULT_OPTIONS:tl,DEFAULT_ICONS:zw,DEFAULT_DROPDOWN_DEFINITIONS:Dw};function Fw(n,e){for(const t of e)if(t.name===n)return t}class jw extends C{constructor(){super(...arguments),m(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[_t]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=hu,i=this.editor,r=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(r,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),i.commands.add("imageStyle",new kS(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,r=i.model.schema,o=(s=this.normalizedStyles,(l,c,d)=>{if(!d.consumable.consume(c.item,l.name))return;const u=Fw(c.attributeNewValue,s),h=Fw(c.attributeOldValue,s),g=d.mapper.toViewElement(c.item),p=d.writer;h&&p.removeClass(h.className,g),u&&p.addClass(u.className,g)});var s;const a=function(l){const c={imageInline:l.filter(d=>!d.isDefault&&d.modelElements.includes("imageInline")),imageBlock:l.filter(d=>!d.isDefault&&d.modelElements.includes("imageBlock"))};return(d,u,h)=>{if(!u.modelRange)return;const g=u.viewItem,p=Ce(u.modelRange.getItems());if(p&&h.schema.checkAttribute(p,"imageStyle"))for(const f of c[p.name])h.consumable.consume(g,{classes:f.className})&&h.writer.setAttribute("imageStyle",f.name,p)}}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",a,{priority:"low"})),t&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",a,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(_t),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let s=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!i.isImage(l))continue;const c=l.getAttribute("imageStyle");if(!c)continue;const d=r.get(c);d&&d.modelElements.includes(l.name)||(o.removeAttribute("imageStyle",l),s=!0)}return s})}}class wS extends C{static get requires(){return[jw]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=$w(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const o of i)this._createButton(o);const r=$w([...t.filter(mi),...hu.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,i)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,r=>{let o;const{defaultItem:s,items:a,title:l}=e,c=a.filter(g=>t.find(({name:p})=>Hw(p)===g)).map(g=>{const p=i.create(g);return g===s&&(o=p),p});a.length!==c.length&&hu.warnInvalidStyle({dropdown:e});const d=mt(r,sr),u=d.buttonView,h=u.arrowView;return is(d,c,{enableActiveItemFocusOnDropdownOpen:!0}),u.set({label:Uw(l,o.label),class:null,tooltip:!0}),h.unbind("label"),h.set({label:l}),u.bind("icon").toMany(c,"isOn",(...g)=>{const p=g.findIndex(Sr);return p<0?o.icon:c[p].icon}),u.bind("label").toMany(c,"isOn",(...g)=>{const p=g.findIndex(Sr);return Uw(l,p<0?o.label:c[p].label)}),u.bind("isOn").toMany(c,"isOn",(...g)=>g.some(Sr)),u.bind("class").toMany(c,"isOn",(...g)=>g.some(Sr)?"ck-splitbutton_flatten":void 0),u.on("execute",()=>{c.some(({isOn:g})=>g)?d.isOpen=!d.isOpen:o.fire("execute")}),d.bind("isEnabled").toMany(c,"isEnabled",(...g)=>g.some(Sr)),this.listenTo(d,"execute",()=>{this.editor.editing.view.focus()}),d})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(Hw(t),i=>{const r=this.editor.commands.get("imageStyle"),o=new $(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>s===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function $w(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function Hw(n){return`imageStyle:${n}`}function Uw(n,e){return(n?n+": ":"")+e}class _S extends C{static get requires(){return[jw,wS]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class vS extends C{static get requires(){return[Ua,_t]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Ua),r=e.plugins.get("ImageUtils");var o;i.register("image",{ariaLabel:t("Image toolbar"),items:(o=e.config.get("image.toolbar")||[],o.map(s=>mi(s)?s.name:s)),getRelatedElement:s=>r.getClosestSelectedImageWidget(s)})}}class yS extends C{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.commands.add("indent",new Bg(e)),e.commands.add("outdent",new Bg(e))}}class xS extends C{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,r=t.uiLanguageDirection=="ltr"?zf:Uf,o=t.uiLanguageDirection=="ltr"?Uf:zf;this._defineButton("indent",i("Increase indent"),r),this._defineButton("outdent",i("Decrease indent"),o)}_defineButton(e,t,i){const r=this.editor;r.ui.componentFactory.add(e,()=>{const o=this._createButton($,e,t,i);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(Se,e,t,i))}_createButton(e,t,i,r){const o=this.editor,s=o.commands.get(t),a=new e(o.locale);return a.set({label:i,icon:r}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>{o.execute(t),o.editing.view.focus()}),a}}class CS extends C{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[yS,xS]}}class il extends G{constructor(e,t){super(e),m(this,"_indentBehavior"),this._indentBehavior=t}refresh(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());e&&this._isIndentationChangeAllowed(e)?this.isEnabled=this._indentBehavior.checkEnabled(e.getAttribute("blockIndent")):this.isEnabled=!1}execute(){const e=this.editor.model,t=this._getBlocksToChange();e.change(i=>{for(const r of t){const o=r.getAttribute("blockIndent"),s=this._indentBehavior.getNextIndent(o);s?i.setAttribute("blockIndent",s,r):i.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){const e=this.editor.model.document.selection;return Array.from(e.getSelectedBlocks()).filter(t=>this._isIndentationChangeAllowed(t))}_isIndentationChangeAllowed(e){const t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("ListUtils").isListItemBlock(e):!1}}class Ww{constructor(e){m(this,"isForward"),m(this,"offset"),m(this,"unit"),this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){const t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){const t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const i=t+(this.isForward?this.offset:-this.offset);return i>0?i+this.unit:void 0}}class qw{constructor(e){m(this,"isForward"),m(this,"classes"),this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){const t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){const t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i]}}const AS=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class TS extends C{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new il(e,new qw({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new il(e,new qw({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(pC),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new il(e,new Ww({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new il(e,new Ww({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const e=this.editor,t=e.model.schema,i=e.commands.get("indent"),r=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(s=>s.model)||AS).forEach(s=>{t.isRegistered(s)&&t.extend(s,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),r.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const e=this.editor.conversion,t=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[t]:/[\s\S]+/}},model:{key:"blockIndent",value:i=>{if(!i.is("element","li"))return i.getStyle(t)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:i=>({key:"style",value:{[t]:i}})})}_setupConversionUsingClasses(e){const t={model:{key:"blockIndent",values:[]},view:{}};for(const i of e)t.model.values.push(i),t.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(t)}}class ES{constructor(){m(this,"_definitions",new Set)}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,r)=>{if(!r.consumable.test(i.item,"attribute:linkHref")||!i.item.is("selection")&&!r.schema.isInline(i.item))return;const o=r.writer,s=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(s.getFirstRange(),l):o.wrap(r.mapper.toViewRange(i.range),l):o.unwrap(r.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:r,mapper:o})=>{const s=o.toViewElement(i.item),a=Array.from(s.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const c=fi(l.attributes);if(l.callback(i.attributeNewValue)){for(const[d,u]of c)d==="class"?r.addClass(u,a):r.setAttribute(d,u,a);l.classes&&r.addClass(l.classes,a);for(const d in l.styles)r.setStyle(d,l.styles[d],a)}else{for(const[d,u]of c)d==="class"?r.removeClass(u,a):r.removeAttribute(d,a);l.classes&&r.removeClass(l.classes,a);for(const d in l.styles)r.removeStyle(d,a)}}})}}}const SS=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,IS=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,PS=/^((\w+:(\/{2,})?)|(\W))/i,MS=["https?","ftps?","mailto"],bs="Ctrl+K";function Gw(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function Zw(n,e=MS){const t=String(n),i=e.join("|");return function(r,o){return!!r.replace(SS,"").match(o)}(t,new RegExp(`${"^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))".replace("<protocols>",i)}`,"i"))?t:"#"}function mu(n,e){return!!n&&e.checkAttribute(n.name,"linkHref")}function gu(n,e){const t=(i=n,IS.test(i)?"mailto:":e);var i;const r=!!t&&!Kw(n);return n&&r?t+n:n}function Kw(n){return PS.test(n)}function pu(n){let e="";for(const t of n.getItems()){if(!t.is("$text")&&!t.is("$textProxy"))return;e+=t.data}return e}class VS extends G{constructor(){super(...arguments),m(this,"manualDecorators",new ot),m(this,"automaticDecorators",new ES)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||Ce(t.getSelectedBlocks());mu(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,t={},i){const r=this.editor.model,o=r.document.selection,s=[],a=[];for(const l in t)t[l]?s.push(l):a.push(l);r.change(l=>{const c=h=>{l.setAttribute("linkHref",e,h),s.forEach(g=>l.setAttribute(g,!0,h)),a.forEach(g=>l.removeAttribute(g,h))},d=(h,g)=>{const p=pu(h);if(!p)return h;let f=i;if(f||(f=g&&g==p?e:p),f!=p){const b=function(w,_){const y=Tr(w,_),x={equal:0,insert:0,delete:0},A=[];let I="",M="";for(const D of[...y,null])D=="insert"?M+=_[x.equal+x.insert]:D=="delete"?I+=w[x.equal+x.delete]:(I.length||M.length)&&(A.push({offset:x.equal,actual:I,expected:M}),I="",M=""),D&&x[D]++;return A}(p,f);let k=0;for(const{offset:w,actual:_,expected:y}of b){const x=w+k,A=l.createRange(h.start.getShiftedBy(x),h.start.getShiftedBy(x+_.length)),I=LS(A,h).getAttributes(),M=Array.from(I).filter(([fe])=>r.schema.getAttributeProperties(fe).isFormatting),D=l.createText(y,M);c(D),r.insertContent(D,A),k+=y.length}return l.createRange(h.start,h.start.getShiftedBy(f.length))}},u=h=>{const{plugins:g}=this.editor;if(l.setSelection(h.end),g.has("TwoStepCaretMovement"))g.get("TwoStepCaretMovement")._handleForwardMovement();else for(const p of["linkHref",...s,...a])l.removeSelectionAttribute(p)};if(o.isCollapsed){const h=o.getFirstPosition();if(o.hasAttribute("linkHref")){const g=o.getAttribute("linkHref"),p=Da(h,"linkHref",g,r),f=d(p,g);c(f||p),f&&u(f)}else if(e!==""){const g=fi(o.getAttributes());g.set("linkHref",e),s.forEach(p=>{g.set(p,!0)}),u(r.insertContent(l.createText(i||e,g),h))}}else{const h=Array.from(o.getRanges()),g=r.schema.getValidRanges(h,"linkHref"),p=[];for(const k of o.getSelectedBlocks())r.schema.checkAttribute(k,"linkHref")&&p.push(l.createRangeOn(k));const f=p.slice();for(const k of g)this._isRangeToUpdate(k,p)&&f.push(k);const b=h.map(k=>({start:Qe.fromPosition(k.start,"toPrevious"),end:Qe.fromPosition(k.end,"toNext")}));for(let k of f)k=d(k,(k.start.textNode||k.start.nodeAfter).getAttribute("linkHref"))||k,c(k);l.setSelection(b.map(k=>{const w=k.start.toPosition(),_=k.end.toPosition();return k.start.detach(),k.end.detach(),r.createRange(w,_)}))}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,r=i.getSelectedElement();return mu(r,t.schema)?r.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}}function LS(n,e){if(!n.isCollapsed)return Ce(n.getItems());const t=n.start;return t.textNode?t.textNode:!t.nodeBefore||t.isEqual(e.start)?t.nodeAfter:t.nodeBefore}class OS extends G{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();mu(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,r=e.commands.get("link");t.change(o=>{const s=i.isCollapsed?[Da(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of s)if(o.removeAttribute("linkHref",a),r)for(const l of r.manualDecorators)o.removeAttribute(l.id,a)})}}class NS extends xe(){constructor({id:e,label:t,attributes:i,classes:r,styles:o,defaultValue:s}){super(),m(this,"id"),m(this,"defaultValue"),m(this,"label"),m(this,"attributes"),m(this,"classes"),m(this,"styles"),this.id=e,this.set("value",void 0),this.defaultValue=s,this.label=t,this.attributes=i,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const Yw="automatic",RS=/^(https?:)?\/\//;class Xr extends C{constructor(e){super(e),m(this,"_linkOpeners",[]),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ra,tk,Vt]}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Gw}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>Gw(Zw(r,t),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new VS(e)),e.commands.add("unlink",new OS(e));const i=function(r,o){const s={"Open in a new tab":r("Open in a new tab"),Downloadable:r("Downloadable")};return o.forEach(a=>("label"in a&&s[a.label]&&(a.label=s[a.label]),a)),o}(e.t,function(r){const o=[];if(r)for(const[a,l]of Object.entries(r)){const c=Object.assign({},l,{id:`link${s=a,function(d){return d.substring(0,1).toUpperCase()+d.substring(1)}(uc(s))}`});o.push(c)}var s;return o}(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(r=>r.mode===Yw)),this._enableManualDecorators(i.filter(r=>r.mode==="manual")),e.plugins.get(Ra).registerAttribute("linkHref"),dk(e,"linkHref","a","ck-link_selected"),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:Yw,callback:r=>!!r&&RS.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(r=>{t.model.schema.extend("$text",{allowAttributes:r.id});const o=new NS(r);i.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(s,{writer:a,schema:l},{item:c})=>{if((c.is("selection")||l.isInline(c))&&s){const d=a.createAttributeElement("a",o.attributes,{priority:5});o.classes&&a.addClass(o.classes,d);for(const u in o.styles)a.setStyle(u,o.styles[u],d);return a.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const e=this.editor,t=e.editing.view.document,i=r=>{this._linkOpeners.some(o=>o(r))||function(o){window.open(o,"_blank","noopener")}(r)};this.listenTo(t,"click",(r,o)=>{if(!(W.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let s=o.domTarget;if(s.tagName.toLowerCase()!="a"&&(s=s.closest("a")),!s)return;const a=s.getAttribute("href");a&&(r.stop(),o.preventDefault(),i(a))},{context:"$capture"}),this.listenTo(t,"keydown",(r,o)=>{const s=e.commands.get("link").value;s&&o.keyCode===ie.enter&&o.altKey&&(r.stop(),i(s))})}_enableSelectionAttributesFixer(){const e=this.editor.model,t=e.document.selection;this.listenTo(t,"change:attribute",(i,{attributeKeys:r})=>{r.includes("linkHref")&&!t.hasAttribute("linkHref")&&e.change(o=>{var s;(function(a,l){a.removeSelectionAttribute("linkHref");for(const c of l)a.removeSelectionAttribute(c)})(o,(s=e.schema,s.getDefinition("$text").allowAttributes.filter(a=>a.startsWith("link"))))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(r,o)=>{t.change(s=>{const a=s.createRangeIn(o.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=gu(l.getAttribute("linkHref"),i);s.setAttribute("linkHref",c,l)}})})}}class zS extends ${constructor(e){super(e);const t=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:t.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:t.to(i=>{if(this.href){const r=()=>i.preventDefault();this.fire("navigate",this.href,r)}})}}),this.template.tag="a"}}class DS extends N{constructor(e,t){super(e),m(this,"focusTracker",new ge),m(this,"keystrokes",new Ie),m(this,"backButtonView"),m(this,"saveButtonView"),m(this,"displayedTextInputView"),m(this,"urlInputView"),m(this,"children"),m(this,"providersListChildren"),m(this,"_validators"),m(this,"_focusables",new St),m(this,"_focusCycler"),this._validators=t,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),jr({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new $(this.locale);return t.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ir(this.locale,{label:e("Link")});return t.children.add(this.backButtonView,0),t}_createProvidersListView(){const e=new rr(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(t=>{const i=new si(this.locale);return i.children.add(t),i}),e}_createDisplayedTextInput(){const e=this.locale.t,t=new Pi(this.locale,Sn);return t.label=e("Displayed text"),t.class="ck-labeled-field-view_full-width",t}_createUrlInput(){const e=this.locale.t,t=new Pi(this.locale,Sn);return t.fieldView.inputMode="url",t.label=e("Link URL"),t.class="ck-labeled-field-view_full-width",t}_createFormChildren(){this.children.add(new La(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new La(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class BS extends N{constructor(e){super(e),m(this,"focusTracker",new ge),m(this,"keystrokes",new Ie),m(this,"backButtonView"),m(this,"listView"),m(this,"listChildren"),m(this,"emptyListInformation"),m(this,"children"),m(this,"_focusables",new St),m(this,"_focusCycler"),this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(t,i,r)=>{r?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(t,i)=>{this.fire("cancel"),i()}),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new rr(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(t=>{const i=new si(this.locale);return i.children.add(t),i}),e}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createHeaderView(){const e=new ir(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new N(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class FS extends N{constructor(e){super(e),m(this,"focusTracker",new ge),m(this,"keystrokes",new Ie),m(this,"backButtonView"),m(this,"children"),m(this,"listChildren"),m(this,"_focusables",new St),m(this,"_focusCycler"),this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new ct({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(t,i)=>{this.fire("back"),i()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,t=new $(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:tr,tooltip:!0}),t.delegate("execute").to(this,"back"),t}_createHeaderView(){const e=this.locale.t,t=new ir(this.locale,{label:e("Link properties")});return t.children.add(this.backButtonView,0),t}_createListView(){const e=new rr(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(t=>{const i=new si(this.locale);return i.children.add(t),i}),e}}class jS extends ${constructor(e){super(e),m(this,"arrowView"),this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Ii;return e.content=Bf,e}}const Ni="link-ui";class Qw extends C{constructor(){super(...arguments),m(this,"toolbarView",null),m(this,"formView",null),m(this,"linkProviderItemsView",null),m(this,"propertiesView",null),m(this,"_balloon"),m(this,"_linksProviders",new ot)}static get requires(){return[Vi,Xr]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver($5),this._balloon=e.plugins.get(Vi),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ni,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ni,view:(i,{writer:r})=>{if(!i.markerRange.isCollapsed)return null;const o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:bs},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const t=this._linksProviders.filter(i=>(i.order||0)<=(e.order||0)).length;this._linksProviders.add(e,t)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,t=new ts(e.locale),i=e.commands.get("link");t.class="ck-link-toolbar";let r=e.config.get("link.toolbar");return i.manualDecorators.length||(r=r.filter(o=>o!=="linkProperties")),t.fillFromConfig(r,e.ui.componentFactory),t.keystrokes.set("Esc",(o,s)=>{this._hideUI(),s()}),t.keystrokes.set(bs,(o,s)=>{this._addFormView(),s()}),e.ui.addToolbar(t,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),t}_createFormView(){const e=this.editor,t=e.locale.t,i=e.commands.get("link"),r=e.config.get("link.defaultProtocol"),o=new(Yo(DS))(e.locale,function(s){const a=s.t,l=s.config.get("link.allowCreatingEmptyLinks");return[c=>{if(!l&&!c.url.length)return a("Link URL must not be empty.")}]}(e));return o.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",s=>s!==void 0),o.urlInputView.bind("isEnabled").to(i,"isEnabled"),o.saveButtonView.bind("isEnabled").to(i,"isEnabled"),o.saveButtonView.bind("label").to(i,"value",s=>t(s?"Update":"Insert")),this.listenTo(o,"submit",()=>{if(o.isValid()){const s=gu(o.urlInputView.fieldView.element.value,r),a=o.displayedTextInputView.fieldView.element.value;e.execute("link",s,this._getDecoratorSwitchesState(),a!==this.selectedLinkableText?a:void 0),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(s,a)=>{this._closeFormView(),a()}),o.providersListChildren.bindTo(this._linksProviders).using(s=>this._createLinksListProviderButton(s)),o}_createLinkProviderListView(e){return e.getListItems().map(({href:t,label:i,icon:r})=>{const o=new $;return o.set({label:i,icon:r,tooltip:!1,withText:!0}),o.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=t,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),o})}_createLinkProviderItemsView(e){const t=this.editor,i=t.locale.t,r=new BS(t.locale),{emptyListPlaceholder:o,label:s}=e;return r.emptyListPlaceholder=o||i("No links available"),r.title=s,this.listenTo(r,"cancel",()=>{t.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),r}_createPropertiesView(){const e=this.editor,t=this.editor.commands.get("link"),i=new(Yo(FS))(e.locale);return this.listenTo(i,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),i.listChildren.bindTo(t.manualDecorators).using(r=>{const o=new Xo(e.locale);return o.set({label:r.label,withText:!0}),o.bind("isOn").toMany([r,t],"value",(s,a)=>a===void 0&&s===void 0?!!r.defaultValue:!!s),o.on("execute",()=>{r.set("value",!o.isOn),e.execute("link",t.value,this._getDecoratorSwitchesState())}),o}),i}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((t,i)=>{const r=e.value===void 0&&i.value===void 0?i.defaultValue:i.value;return{...t,[i.id]:!!r}},{})}_registerEditingOpeners(){this.editor.plugins.get(Xr)._registerLinkOpener(e=>{const t=this._getLinkProviderLinkByHref(e);if(!t)return!1;const{item:i,provider:r}=t;return!!r.navigate&&r.navigate(i)})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Se);return t.set({role:"menuitemcheckbox"}),t}),e.ui.componentFactory.add("linkPreview",t=>{const i=new zS(t),r=e.config.get("link.allowedProtocols"),o=e.commands.get("link"),s=t.t;i.bind("isEnabled").to(o,"value",l=>!!l),i.bind("href").to(o,"value",l=>l&&Zw(l,r));const a=l=>{if(!l)return i.label=void 0,i.icon=void 0,void(i.tooltip=s("Open link in new tab"));const c=this._getLinkProviderLinkByHref(l);if(c){const{label:d,tooltip:u,icon:h}=c.item;i.label=d,i.tooltip=u||!1,i.icon=h}else i.label=l,i.icon=void 0,i.tooltip=s("Open link in new tab")};return a(o.value),this.listenTo(o,"change:value",(l,c,d)=>{a(d)}),this.listenTo(i,"navigate",(l,c,d)=>{const u=this._getLinkProviderLinkByHref(c);if(!u)return;const{provider:h,item:g}=u,{navigate:p}=h;p&&p(g)&&(l.stop(),d())}),i}),e.ui.componentFactory.add("unlink",t=>{const i=e.commands.get("unlink"),r=new $(t),o=t.t;return r.set({label:o("Unlink"),icon:UA,tooltip:!0}),r.bind("isEnabled").to(i),this.listenTo(r,"execute",()=>{e.execute("unlink"),this._hideUI()}),r}),e.ui.componentFactory.add("editLink",t=>{const i=e.commands.get("link"),r=new $(t),o=t.t;return r.set({label:o("Edit link"),icon:xA,tooltip:!0}),r.bind("isEnabled").to(i),this.listenTo(r,"execute",()=>{this._addFormView()}),r}),e.ui.componentFactory.add("linkProperties",t=>{const i=e.commands.get("link"),r=new $(t),o=t.t;return r.set({label:o("Link properties"),icon:VA,tooltip:!0}),r.bind("isEnabled").to(i,"isEnabled",i,"value",i,"manualDecorators",(s,a,l)=>s&&!!a&&l.length>0),this.listenTo(r,"execute",()=>{this._addPropertiesView()}),r})}_createLinksListProviderButton(e){const t=this.editor.locale,i=new jS(t);return i.set({label:e.label}),this.listenTo(i,"execute",()=>{this._showLinksProviderView(e)}),i}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get("link"),o=new e(t.locale),s=i.t;return o.set({label:s("Link"),icon:Df,keystroke:bs,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>{t.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(bs,(i,r)=>{r(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Tn({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),this._isToolbarInPanel||this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),this._arePropertiesInPanel||(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const t=this.editor;this._isUIInPanel&&(this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&t.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),r=s();const o=()=>{const a=this._getSelectedLinkElement(),l=s();i&&!a||!i&&l!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,r=l};function s(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;if(this.editor.model.markers.has(Ni)){const i=this.editor.editing.mapper.markerNameToElements(Ni);if(i){const r=Array.from(i),o=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));return{target:e.domConverter.viewRangeToDom(o)}}}return{target:()=>{const i=this._getSelectedLinkElement();return i?e.domConverter.mapViewToDom(i):e.domConverter.viewRangeToDom(t.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Je(i))return fu(t.getFirstPosition());{const r=t.getFirstRange().getTrimmed(),o=fu(r.start),s=fu(r.end);return o&&o==s&&e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_getSelectedLinkableText(){const e=this.editor.model,t=this.editor.editing,i=this._getSelectedLinkElement();if(!i)return pu(e.document.selection.getFirstRange());const r=t.view.createRangeOn(i);return pu(t.mapper.toModelRange(r))}_getLinkProviderLinkByHref(e){if(!e)return null;for(const t of this._linksProviders){const i=t.getItem?t.getItem(e):t.getListItems().find(r=>r.href===e);if(i)return{provider:t,item:i}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(Ni))t.updateMarker(Ni,{range:i});else if(i.start.isAtEnd){const r=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(Ni,{usingOperation:!1,affectsData:!1,range:t.createRange(r,i.end)})}else t.addMarker(Ni,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ni)&&e.change(t=>{t.removeMarker(Ni)})}}function fu(n){return n.getAncestors().find(e=>{return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t})||null}const Jw=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Xw extends C{static get requires(){return[Li,Xr]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?Da(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const i=this.editor.model,r=i.document.selection,o=r.getFirstPosition(),s=r.getLastPosition();let a=t.getJoined(this._expandLinkRange(i,o)||t);a&&(a=a.getJoined(this._expandLinkRange(i,s)||t)),a&&(a.start.isBefore(o)||a.end.isAfter(s))&&e.setSelection(a)}_enablePasteLinking(){const e=this.editor,t=e.model,i=t.document.selection,r=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");r.on("inputTransformation",(s,a)=>{if(!this.isEnabled||!o.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const d=c.match(Jw);d&&d[2]===c&&(t.change(u=>{this._selectEntireLinks(u,l),o.execute(c)}),s.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new ak(e.model,i=>{let r=i;if(!function(s){return s.length>4&&s[s.length-1]===" "&&s[s.length-2]!==" "}(r))return;r=r.slice(0,-1),"!.:,;?".includes(r[r.length-1])&&(r=r.slice(0,-1));const o=e_(r);return o?{url:o,removedTrailingCharacters:i.length-r.length}:void 0});t.on("matched:data",(i,r)=>{const{batch:o,range:s,url:a,removedTrailingCharacters:l}=r;if(!o.isTyping)return;const c=s.end.getShiftedBy(-l),d=c.getShiftedBy(-a.length),u=e.model.createRange(d,c);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{const r=t.document.selection.getFirstPosition();if(!r.parent.previousSibling)return;const o=t.createRangeIn(r.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{const r=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:r}=sk(e,t),o=e_(i);if(o){const s=t.createRange(r.end.getShiftedBy(-o.length),r.end);this._applyAutoLink(o,s)}}_applyAutoLink(e,t){const i=this.editor.model,r=gu(e,this.editor.config.get("link.defaultProtocol"));this.isEnabled&&function(o,s){return s.schema.checkAttributeInSelection(s.createSelection(o),"linkHref")}(t,i)&&Kw(r)&&!function(o){const s=o.start.nodeAfter;return!!s&&s.hasAttribute("linkHref")}(t)&&this._persistAutoLink(r,t)}_persistAutoLink(e,t){const i=this.editor.model,r=this.editor.plugins.get("Delete");i.enqueueChange(o=>{o.setAttribute("linkHref",e,t),i.enqueueChange(()=>{r.requestUndoOnBackspace()})})}}function e_(n){const e=Jw.exec(n);return e?e[2]:null}class $S extends C{static get requires(){return[Xr,Qw,Xw]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class HS extends C{static get requires(){return["ImageEditing","ImageUtils",Xr]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(function(i){const r=i.plugins.has("ImageInlineEditing"),o=i.plugins.get("ImageUtils");return s=>{s.on("element:a",(a,l,c)=>{const d=l.viewItem,u=o.findViewImgElement(d);if(!u)return;const h=u.findAncestor(b=>o.isBlockImageView(b));if(r&&!h)return;const g={attributes:["href"]};if(!c.consumable.consume(d,g))return;const p=d.getAttribute("href");if(!p)return;let f=l.modelCursor.parent;if(!f.is("element","imageBlock")){const b=c.convertItem(u,l.modelCursor);l.modelRange=b.modelRange,l.modelCursor=b.modelCursor,f=l.modelCursor.nodeBefore}f&&f.is("element","imageBlock")&&c.writer.setAttribute("linkHref",p,f)},{priority:"high"})}}(e)),e.conversion.for("downcast").add(function(i){const r=i.plugins.get("ImageUtils");return o=>{o.on("attribute:linkHref:imageBlock",(s,a,l)=>{if(!l.consumable.consume(a.item,s.name))return;const c=l.mapper.toViewElement(a.item),d=l.writer,u=Array.from(c.getChildren()).find(p=>p.is("element","a")),h=r.findViewImgElement(c),g=h.parent.is("element","picture")?h.parent:h;if(u)a.attributeNewValue?d.setAttribute("href",a.attributeNewValue,u):(d.move(d.createRangeOn(g),d.createPositionAt(c,0)),d.remove(u));else{const p=d.createContainerElement("a",{href:a.attributeNewValue});d.insert(d.createPositionAt(c,0),p),d.move(d.createRangeOn(g),d.createPositionAt(p,0))}},{priority:"high"})}}(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,t=e.commands.get("link").automaticDecorators;t.length&&e.conversion.for("downcast").add(t.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const i of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:i.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:i.id}),e.conversion.for("downcast").add(US(i)),e.conversion.for("upcast").add(WS(e,i))}}function US(n){return e=>{e.on(`attribute:${n.id}:imageBlock`,(t,i,r)=>{const o=r.mapper.toViewElement(i.item),s=Array.from(o.getChildren()).find(a=>a.is("element","a"));if(s)if(n.value!==void 0){for(const[a,l]of fi(n.attributes))r.writer.setAttribute(a,l,s);n.classes&&r.writer.addClass(n.classes,s);for(const a in n.styles)r.writer.setStyle(a,n.styles[a],s)}else{for(const a in n.attributes)r.writer.removeAttribute(a,s);n.classes&&r.writer.removeClass(n.classes,s);for(const a in n.styles)r.writer.removeStyle(a,s)}})}}function WS(n,e){const t=n.plugins.has("ImageInlineEditing"),i=n.plugins.get("ImageUtils");return r=>{r.on("element:a",(o,s,a)=>{const l=s.viewItem,c=i.findViewImgElement(l);if(!c)return;const d=c.findAncestor(g=>i.isBlockImageView(g));if(t&&!d)return;const u=new Gt(e._createPattern()).match(l);if(!u||!a.consumable.consume(l,u.match))return;const h=s.modelCursor.nodeBefore||s.modelCursor.parent;a.writer.setAttribute(e.id,!0,h)},{priority:"high"})}}class qS extends C{static get requires(){return[Xr,Qw,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(i,r)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(r.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",i=>{const r=new $(i),o=e.plugins.get("LinkUI"),s=e.commands.get("link");return r.set({isEnabled:!0,label:t("Link image"),icon:Df,keystroke:bs,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",a=>!!a),this.listenTo(r,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addToolbarView():o._showUI(!0)}),r})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}class GS extends C{static get requires(){return[HS,qS]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}class li{constructor(e,t){m(this,"_startElement"),m(this,"_referenceIndent"),m(this,"_isForward"),m(this,"_includeSelf"),m(this,"_sameAttributes"),m(this,"_sameIndent"),m(this,"_lowerIndent"),m(this,"_higherIndent"),this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=Ne(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){return Ce(new this(e,t)[Symbol.iterator]())}*[Symbol.iterator](){const e=[];for(const{node:t}of new ks(this._getStartNode(),this._isForward?"forward":"backward")){const i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(r=>t.getAttribute(r)!==this._startElement.getAttribute(r)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class ks{constructor(e,t="forward"){m(this,"_node"),m(this,"_isForward"),m(this,"_previousNodesByIndent",[]),m(this,"_previous",null),m(this,"_previousNodeIndent",null),this._node=e,this._isForward=t==="forward"}[Symbol.iterator](){return this}next(){if(!Pe(this._node))return{done:!0,value:void 0};const e=this._node.getAttribute("listIndent");let t=null;if(this._previous){const r=this._previousNodeIndent;e>r?this._previousNodesByIndent[r]=this._previous:e<r?(t=this._previousNodesByIndent[e]||null,this._previousNodesByIndent.length=e):t=this._previous}const i={node:this._node,previous:this._previous,previousNodeInList:t};return this._previous=this._node,this._previousNodeIndent=e,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:i,done:!1}}}class ZS{constructor(e){m(this,"_listHead"),this._listHead=e}[Symbol.iterator](){return new ks(this._listHead)}}class eo{static next(){return Tt()}}function Pe(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function to(n,e={}){return[...On(n,{...e,direction:"backward"}),...On(n,{...e,direction:"forward"})]}function On(n,e={}){const t=e.direction=="forward",i=Array.from(new li(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?i:i.reverse()}function t_(n,e){const t=new li(n,{sameIndent:!0,sameAttributes:"listType",...e}),i=new li(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...i]}function sn(n){return!li.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function i_(n){return!li.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function ws(n,e={}){n=Ne(n);const t=e.withNested!==!1,i=new Set;for(const r of n)for(const o of to(r,{higherIndent:t}))i.add(o);return hr(i)}function nl(n){n=Ne(n);const e=new Set;for(const t of n)for(const i of t_(t))e.add(i);return hr(e)}function bu(n,e){const t=On(n,{direction:"forward"}),i=eo.next();for(const r of t)e.setAttribute("listItemId",i,r);return t}function ku(n,e,t){const i={};for(const[o,s]of e.getAttributes())o.startsWith("list")&&(i[o]=s);const r=On(n,{direction:"forward"});for(const o of r)t.setAttributes(i,o);return r}function wu(n,e,{expand:t,indentBy:i=1}={}){n=Ne(n);const r=t?ws(n):n;for(const o of r){const s=o.getAttribute("listIndent")+i;s<0?rl(o,e):e.setAttribute("listIndent",s,o)}return r}function rl(n,e){n=Ne(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function _s(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return!!e&&!n.some(t=>t.getAttribute("listItemId")!=e)}function hr(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function vs(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function _u(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function ol(n){return n=="numbered"||n=="customNumbered"}function KS(n,e,t){return On(e,{direction:"forward"}).pop().index>n.index?ku(n,e,t):[]}class n_ extends G{constructor(e,t){super(e),m(this,"_direction"),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=r_(e.document.selection);e.change(i=>{const r=[];_s(t)&&!sn(t[0])?(this._direction=="forward"&&r.push(...wu(t,i)),r.push(...bu(t[0],i))):this._direction=="forward"?r.push(...wu(t,i,{expand:!0})):r.push(...function(o,s){const a=ws(o=Ne(o)),l=new Set,c=Math.min(...a.map(u=>u.getAttribute("listIndent"))),d=new Map;for(const u of a)d.set(u,li.first(u,{lowerIndent:!0}));for(const u of a){if(l.has(u))continue;l.add(u);const h=u.getAttribute("listIndent")-1;if(h<0)rl(u,s);else{if(u.getAttribute("listIndent")==c){const g=KS(u,d.get(u),s);for(const p of g)l.add(p);if(g.length)continue}s.setAttribute("listIndent",h,u)}}return hr(l)}(t,i));for(const o of r){if(!o.hasAttribute("listType"))continue;const s=li.first(o,{sameIndent:!0});s&&i.setAttribute("listType",s.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",hr(new Set(e)))}_checkEnabled(){let e=r_(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||_s(e)&&!sn(e[0]))return!0;e=ws(e),t=e[0];const i=li.first(t,{sameIndent:!0});return!!i&&i.getAttribute("listType")==t.getAttribute("listType")}}function r_(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!Pe(i));return t!=-1&&(e.length=t),e}class ys extends G{constructor(e,t,i={}){super(e),m(this,"type"),m(this,"_listWalkerOptions"),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,r=vs(t),o=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||_u(a,t.schema)),s=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(s){const l=o[o.length-1],c=On(l,{direction:"forward"}),d=[];c.length>1&&d.push(...bu(c[1],a)),d.push(...rl(o,a)),d.push(...function(u,h){const g=[];let p=Number.POSITIVE_INFINITY;for(const{node:f}of new ks(u.nextSibling)){const b=f.getAttribute("listIndent");if(b==0)break;b<p&&(p=b);const k=b-p;h.setAttribute("listIndent",k,f),g.push(f)}return g}(l,a)),this._fireAfterExecute(d)}else if((r||i.selection.isCollapsed)&&Pe(o[0])){const l=t_(r||o[0],this._listWalkerOptions);for(const c of l)a.setAttributes({...e.additionalAttributes,listType:this.type},c);this._fireAfterExecute(l)}else{const l=[];for(const c of o)if(c.hasAttribute("listType"))for(const d of ws(c,{withNested:!1}))d.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},d),l.push(d));else!c.is("element","listItem")&&_u(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:eo.next(),listType:this.type},c),l.push(c);this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",hr(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,i=e.document.selection,r=Array.from(i.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(const o of r)if(t.checkAttribute(o,"listType")||_u(o,t))return!0;return!1}}class o_ extends G{constructor(e,t){super(e),m(this,"_direction"),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,i=t.document.selection,r=[];t.change(o=>{const{firstElement:s,lastElement:a}=this._getMergeSubjectElements(i,e),l=s.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),d=a.getAttribute("listItemId");if(l!=c){const h=(u=a,Array.from(new li(u,{direction:"forward",higherIndent:!0})));r.push(...wu([a,...h],o,{indentBy:l-c,expand:l<c}))}var u;if(e){let h=i;i.isCollapsed&&(h=o.createSelection(o.createRange(o.createPositionAt(s,"end"),o.createPositionAt(a,0)))),t.deleteContent(h,{doNotResetEntireContent:i.isCollapsed});const g=h.getLastPosition().parent,p=g.nextSibling;r.push(g),p&&p!==a&&p.getAttribute("listItemId")==d&&r.push(...ku(p,g,o))}else r.push(...ku(a,s,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",hr(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,i=vs(e);if(t.isCollapsed||i){const r=i||t.getFirstPosition().parent;if(!Pe(r))return!1;const o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||_s([r,o]))return!1}else{const r=t.getLastPosition(),o=t.getFirstPosition();if(r.parent===o.parent||!Pe(r.parent))return!1}return!0}_getMergeSubjectElements(e,t){const i=vs(this.editor.model);let r,o;if(e.isCollapsed||i){const s=i||e.getFirstPosition().parent,a=sn(s);this._direction=="backward"?(o=s,r=a&&!t?li.first(s,{sameIndent:!0,lowerIndent:!0}):s.previousSibling):(r=s,o=s.nextSibling)}else r=e.getFirstPosition().parent,o=e.getLastPosition().parent;return{firstElement:r,lastElement:o}}}class s_ extends G{constructor(e,t){super(e),m(this,"_direction"),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(e=>{const t=bu(this._getStartBlock(),e);this._fireAfterExecute(t)})}_fireAfterExecute(e){this.fire("afterExecute",hr(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&Pe(t)&&!sn(t)}_getStartBlock(){const e=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?e:e.nextSibling}}class YS extends C{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return nl(e)}isFirstBlockOfListItem(e){return sn(e)}isListItemBlock(e){return Pe(e)}expandListBlocksToCompleteItems(e,t={}){return ws(e,t)}isNumberedListType(e){return ol(e)}}function QS(n){return n.is("element","ol")||n.is("element","ul")}function vu(n){return n.is("element","li")}function JS(n,e,t,i=l_(t,e)){return n.createAttributeElement(a_(t),null,{priority:2*e/100-100,id:i})}function XS(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function a_(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function l_(n,e){return`list-${n}-${e}`}function _i(n,e,t){const i=n.nodeBefore;if(Pe(i)){let r=i;for(const{node:o}of new ks(r,"backward"))if(r=o,t.has(r)||(t.add(r),e.has(i)))return;e.add(r)}else{const r=n.nodeAfter;Pe(r)&&e.add(r)}}function eI(){return(n,e,t)=>{const{writer:i,schema:r}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(u=>r.checkAttribute(u,"listItemId"));if(!o.length)return;const s=eo.next(),a=function(u){let h=0,g=u.parent;for(;g;){if(vu(g))h++;else{const p=g.previousSibling;p&&vu(p)&&h++}g=g.parent}return h}(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=o[0].getAttribute("listType");c&&(l=c);const d={listItemId:s,listIndent:a,listType:l};for(const u of o)u.hasAttribute("listItemId")||i.setAttributes(d,u);o.length>1&&o[1].getAttribute("listItemId")!=d.listItemId&&t.keepEmptyElement(o[0])}}function c_(n,e,t,{dataPipeline:i}={}){const r=function(o){return(s,a)=>{const l=[];for(const c of o)s.hasAttribute(c)&&l.push(`attribute:${c}`);return!!l.every(c=>a.test(s,c)!==!1)&&(l.forEach(c=>a.consume(s,c)),!0)}}(n);return(o,s,a)=>{const{writer:l,mapper:c,consumable:d}=a,u=s.item;if(!n.includes(s.attributeKey)||!r(u,d))return;const h=function(p,f,b){const k=b.createRangeOn(p);return f.toViewRange(k).getTrimmed().end.nodeBefore}(u,c,t);u_(h,l,c),function(p,f){let b=p.parent;for(;b.is("attributeElement")&&["ul","ol","li"].includes(b.name);){const k=b.parent;f.unwrap(f.createRangeOn(p),b),b=k}}(h,l);const g=function(p,f,b,k,{dataPipeline:w}){let _=k.createRangeOn(f);if(!sn(p))return _;for(const y of b){if(y.scope!="itemMarker")continue;const x=y.createElement(k,p,{dataPipeline:w});if(!x||(k.setCustomProperty("listItemMarker",!0,x),y.canInjectMarkerIntoElement&&y.canInjectMarkerIntoElement(p)?k.insert(k.createPositionAt(f,0),x):(k.insert(_.start,x),_=k.createRange(k.createPositionBefore(x),k.createPositionAfter(f))),!y.createWrapperElement||!y.canWrapElement))continue;const A=y.createWrapperElement(k,p,{dataPipeline:w});k.setCustomProperty("listItemWrapper",!0,A),y.canWrapElement(p)?_=k.wrap(_,A):(_=k.wrap(k.createRangeOn(x),A),_=k.createRange(_.start,k.createPositionAfter(f)))}return _}(u,h,e,l,{dataPipeline:i});(function(p,f,b,k){if(!p.hasAttribute("listIndent"))return;const w=p.getAttribute("listIndent");let _=p;for(let y=w;y>=0;y--){const x=XS(k,y,_.getAttribute("listItemId")),A=JS(k,y,_.getAttribute("listType"));for(const I of b)I.scope!="list"&&I.scope!="item"||!_.hasAttribute(I.attributeName)||I.setAttributeOnDowncast(k,_.getAttribute(I.attributeName),I.scope=="list"?A:x);if(f=k.wrap(f,x),f=k.wrap(f,A),y==0||(_=li.first(_,{lowerIndent:!0}),!_))break}})(u,g,e,l)}}function d_(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!h_(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const r=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}function u_(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const i=[];r(e.createPositionBefore(n).getWalker({direction:"backward"})),r(e.createRangeIn(n).getWalker());for(const o of i)e.remove(o);function r(o){for(const{item:s}of o){if(s.is("element")&&t.toModelElement(s))break;s.is("element")&&s.getCustomProperty("listItemMarker")&&i.push(s)}}}function h_(n,e,t=to(n)){if(!Pe(n))return!1;for(const i of n.getAttributeKeys())if(!i.startsWith("selection:")&&i!="htmlEmptyBlock"&&!e.includes(i))return!1;return t.length<2}const sl=["listType","listIndent","listItemId"];class xs extends C{constructor(e){super(e),m(this,"_downcastStrategies",[]),e.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Fa,Li,YS,Vt]}init(){const e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new v("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:sl}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const r of sl)t.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new ys(e,"numbered")),e.commands.add("bulletedList",new ys(e,"bulleted")),e.commands.add("customNumberedList",new ys(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new ys(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new n_(e,"forward")),e.commands.add("outdentList",new n_(e,"backward")),e.commands.add("splitListItemBefore",new s_(e,"before")),e.commands.add("splitListItemAfter",new s_(e,"after")),i&&(e.commands.add("mergeListItemBackward",new o_(e,"backward")),e.commands.add("mergeListItemForward",new o_(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList"),{priority:"high"}),i&&i.registerChildCommand(e.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...sl,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{const s=e.model.document.selection;vs(e.model)||e.model.change(()=>{const a=s.getFirstPosition();if(s.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const l=a.parent;if(!Pe(l))return;if(li.first(l,{sameAttributes:"listType",sameIndent:!0})||l.getAttribute("listIndent")!==0){if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:m_(e.model,"backward")})}else i_(l)||e.execute("splitListItemAfter"),e.execute("outdentList");o.preventDefault(),r.stop()}else{if(s.isCollapsed&&!s.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:m_(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,i=e.commands,r=i.get("enter");this.listenTo(e.editing.view.document,"enter",(o,s)=>{const a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&Pe(l)&&l.isEmpty&&!s.isSoft){const c=sn(l),d=i_(l);c&&d?(e.execute("outdentList"),s.preventDefault(),o.stop()):c&&!d?(e.execute("splitListItemAfter"),s.preventDefault(),o.stop()):d&&(e.execute("splitListItemBefore"),s.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{const o=i.get("splitListItemBefore");o.refresh(),o.isEnabled&&to(e.model.document.selection.getLastPosition().parent).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{const r=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,i=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(c,{writer:d})=>d.createElement(o,{listType:""})}).elementToElement({view:"p",model:(c,{writer:d})=>c.parent&&c.parent.is("element","li")?d.createElement(o,{listType:""}):null,converterPriority:"high"}).add(c=>{c.on("element:li",eI())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:d_(i),converterPriority:"high"}).add(c=>{var d;c.on("attribute",c_(i,this._downcastStrategies,t)),c.on("remove",(d=t.schema,(u,h,g)=>{const{writer:p,mapper:f}=g,b=u.name.split(":")[1];if(!d.checkAttribute(b,"listItemId"))return;const k=f.toViewPosition(h.position),w=h.position.getShiftedBy(h.length),_=f.toViewPosition(w,{isPhantom:!0}),y=p.createRange(k,_).getTrimmed().end.nodeBefore;y&&u_(y,p,f)}))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:d_(i,{dataPipeline:!0}),converterPriority:"high"}).add(c=>{c.on("attribute",c_(i,this._downcastStrategies,t,{dataPipeline:!0}))});const s=(a=this._downcastStrategies,l=e.editing.view,(c,d)=>{if(d.modelPosition.offset>0)return;const u=d.modelPosition.parent;if(!Pe(u)||!a.some(b=>b.scope=="itemMarker"&&b.canInjectMarkerIntoElement&&b.canInjectMarkerIntoElement(u)))return;const h=d.mapper.toViewElement(u),g=l.createRangeIn(h),p=g.getWalker();let f=g.start;for(const{item:b}of p){if(b.is("element")&&d.mapper.toModelElement(b)||b.is("$textProxy"))break;b.is("element")&&b.getCustomProperty("listItemMarker")&&(f=l.createPositionAfter(b),p.skip(({previousPosition:k})=>!k.isEqual(f)))}d.viewPosition=f});var a,l;e.editing.mapper.on("modelToViewPosition",s),e.data.mapper.on("modelToViewPosition",s),this.listenTo(t.document,"change:data",function(c,d,u,h){return()=>{const b=c.document.differ.getChanges(),k=[],w=new Set,_=new Set,y=new Set;for(const x of b)if(x.type=="insert"&&x.name!="$text")_i(x.position,w,y),x.attributes.has("listItemId")?_.add(x.position.nodeAfter):_i(x.position.getShiftedBy(x.length),w,y);else if(x.type=="remove"&&x.attributes.has("listItemId"))_i(x.position,w,y);else if(x.type=="attribute"){const A=x.range.start.nodeAfter;u.includes(x.attributeKey)?(_i(x.range.start,w,y),x.attributeNewValue===null?(_i(x.range.start.getShiftedBy(1),w,y),p(A)&&k.push(A)):_.add(A)):Pe(A)&&p(A)&&k.push(A)}for(const x of w.values())k.push(...g(x,_));for(const x of new Set(k))d.reconvertItem(x)};function g(b,k){const w=[],_=new Set,y=[];for(const{node:x,previous:A}of new ks(b)){if(_.has(x))continue;const I=x.getAttribute("listIndent");A&&I<A.getAttribute("listIndent")&&(y.length=I+1),y[I]=Object.fromEntries(Array.from(x.getAttributes()).filter(([D])=>u.includes(D)));const M=On(x,{direction:"forward"});for(const D of M)_.add(D),(p(D,M)||f(D,y,k))&&w.push(D)}return w}function p(b,k){const w=d.mapper.toViewElement(b);if(!w)return!1;if(h.fire("checkElement",{modelElement:b,viewElement:w}))return!0;if(!b.is("element","paragraph")&&!b.is("element","listItem"))return!1;const _=h_(b,u,k);return!(!_||!w.is("element","p"))||!(_||!w.is("element","span"))}function f(b,k,w){if(w.has(b))return!1;const _=d.mapper.toViewElement(b);let y=k.length-1;for(let x=_.parent;!x.is("editableElement");x=x.parent){const A=vu(x),I=QS(x);if(!I&&!A)continue;const M="checkAttributes:"+(A?"item":"list");if(h.fire(M,{viewElement:x,modelAttributes:k[y]}))break;if(I&&(y--,y<0))return!1}return!0}}(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(c,{viewElement:d,modelAttributes:u})=>{d.id!=u.listItemId&&(c.return=!0,c.stop())}),this.on("checkAttributes:list",(c,{viewElement:d,modelAttributes:u})=>{d.name==a_(u.listType)&&d.id==l_(u.listType,u.listIndent)||(c.return=!0,c.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>function(r,o,s,a){const l=r.document.differ.getChanges(),c=new Set,d=new Set,u=a.editor.config.get("list.multiBlock");let h=!1;for(const p of l){if(p.type=="insert"&&p.name!="$text"){const f=p.position.nodeAfter;if(!r.schema.checkAttribute(f,"listItemId"))for(const b of Array.from(f.getAttributeKeys()))s.includes(b)&&(o.removeAttribute(b,f),h=!0);_i(p.position,d,c),p.attributes.has("listItemId")||_i(p.position.getShiftedBy(p.length),d,c);for(const{item:b,previousPosition:k}of r.createRangeIn(f))Pe(b)&&_i(k,d,c)}else p.type=="remove"?_i(p.position,d,c):p.type=="attribute"&&s.includes(p.attributeKey)&&(_i(p.range.start,d,c),p.attributeNewValue===null&&_i(p.range.start.getShiftedBy(1),d,c));if(!u&&p.type=="attribute"&&sl.includes(p.attributeKey)){const f=p.range.start.nodeAfter;p.attributeNewValue===null&&f&&f.is("element","listItem")?(o.rename(f,"paragraph"),h=!0):p.attributeOldValue===null&&f&&f.is("element")&&f.name!="listItem"&&(o.rename(f,"listItem"),h=!0)}}const g=new Set;for(const p of d.values())h=a.fire("postFixer",{listNodes:new ZS(p),listHead:p,writer:o,seenIds:g})||h;return h}(e,i,t,this)),this.on("postFixer",(i,{listNodes:r,writer:o})=>{i.return=function(s,a){let l=0,c=-1,d=null,u=!1;for(const{node:h}of s){const g=h.getAttribute("listIndent");if(g>l){let p;d===null?(d=g-l,p=l):(d>g&&(d=g),p=g-d),p>c+1&&(p=c+1),a.setAttribute("listIndent",p,h),u=!0,c=p}else d=null,l=g+1,c=g}return u}(r,o)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:r,writer:o,seenIds:s})=>{i.return=function(a,l,c){const d=new Set;let u=!1;for(const{node:h}of a){if(d.has(h))continue;let g=h.getAttribute("listType"),p=h.getAttribute("listItemId");if(l.has(p)&&(p=eo.next()),l.add(p),h.is("element","listItem"))h.getAttribute("listItemId")!=p&&(c.setAttribute("listItemId",p,h),u=!0);else for(const f of On(h,{direction:"forward"}))d.add(f),f.getAttribute("listType")!=g&&(p=eo.next(),g=f.getAttribute("listType")),f.getAttribute("listItemId")!=p&&(c.setAttribute("listItemId",p,f),u=!0)}return u}(r,s,o)||i.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",function(i){return(r,[o,s])=>{const a=o.is("documentFragment")?Array.from(o.getChildren()):[o];if(!a.length)return;const l=(s?i.createSelection(s):i.document.selection).getFirstPosition();let c;if(Pe(l.parent))c=l.parent;else{if(!Pe(l.nodeBefore)||!Pe(l.nodeAfter))return;c=l.nodeBefore}i.change(d=>{const u=c.getAttribute("listType"),h=c.getAttribute("listIndent"),g=a[0].getAttribute("listIndent")||0,p=Math.max(h-g,0);for(const f of a){const b=Pe(f);c.is("element","listItem")&&f.is("element","paragraph")&&d.rename(f,"listItem"),d.setAttributes({listIndent:(b?f.getAttribute("listIndent"):0)+p,listItemId:b?f.getAttribute("listItemId"):eo.next(),listType:u},f)}})}}(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,r)=>{e.change(o=>{const s=Array.from(r.content.getChildren()),a=s[s.length-1];if(s.length>1&&a.is("element")&&a.isEmpty&&s.slice(0,-1).every(Pe)&&o.remove(a),r.method=="copy"||r.method=="cut"){const l=Array.from(r.content.getChildren());_s(l)&&rl(l,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function m_(n,e){const t=n.document.selection;if(!t.isCollapsed)return!vs(n);if(e==="forward")return!0;const i=t.getFirstPosition().parent,r=i.previousSibling;return!n.schema.isObject(r)&&(!!r.isEmpty||_s([i,r]))}function yu(n,e,t,i){n.ui.componentFactory.add(e,()=>{const r=g_($,n,e,t,i);return r.set({tooltip:!0,isToggleable:!0}),r}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{const r=g_(Se,n,e,t,i);return r.set({role:"menuitemcheckbox",isToggleable:!0}),r})}function g_(n,e,t,i,r){const o=e.commands.get(t),s=new n(e.locale);return s.set({label:i,icon:r}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{e.execute(t),e.editing.view.focus()}),s}class tI extends C{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||yu(this.editor,"numberedList",e("Numbered List"),ud),this.editor.ui.componentFactory.has("bulletedList")||yu(this.editor,"bulletedList",e("Bulleted List"),ld)}}class iI extends C{static get requires(){return[xs,tI]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class nI extends G{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const t=this.editor.model,i=t.document;let r=Array.from(i.selection.getSelectedBlocks()).filter(o=>Pe(o)&&ol(o.getAttribute("listType")));r=nl(r),t.change(o=>{for(const s of r)o.setAttribute("listStart",e>=0?e:1,s)})}_getValue(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());return e&&Pe(e)&&ol(e.getAttribute("listType"))?e.getAttribute("listStart"):null}}const p_={},f_={},b_={},k_=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of k_)p_[n]=t,f_[n]=e,e&&(b_[e]=n);function w_(){return k_.map(n=>n.listStyle)}function xu(n){return p_[n]||null}function __(n){return b_[n]||null}function Cu(n){return f_[n]||null}function rI(n){switch(n){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return n}}class oI extends G{constructor(e,t,i){super(e),m(this,"defaultType"),m(this,"_supportedTypes"),this.defaultType=t,this._supportedTypes=i}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document;t.change(r=>{this._tryToConvertItemsToList(e);let o=Array.from(i.selection.getSelectedBlocks()).filter(s=>s.hasAttribute("listType"));if(o.length){o=nl(o);for(const s of o)r.setAttribute("listStyle",e.type||this.defaultType,s)}})}isStyleTypeSupported(e){return!this._supportedTypes||this._supportedTypes.includes(e)}_getValue(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());return Pe(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedList"),i=e.commands.get("bulletedList");return t.isEnabled||i.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const t=xu(e.type);if(!t)return;const i=this.editor,r=`${t}List`;i.commands.get(r).value||i.execute(r)}}class sI extends G{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const t=this.editor.model,i=t.document;let r=Array.from(i.selection.getSelectedBlocks()).filter(o=>Pe(o)&&o.getAttribute("listType")=="numbered");r=nl(r),t.change(o=>{for(const s of r)o.setAttribute("listReversed",!!e.reversed,s)})}_getValue(){const e=Ce(this.editor.model.document.selection.getSelectedBlocks());return Pe(e)&&e.getAttribute("listType")=="numbered"?e.getAttribute("listReversed"):null}}function v_(n){return(e,t,i)=>{const{writer:r,schema:o,consumable:s}=i;if(s.test(t.viewItem,n.viewConsumables)===!1)return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor));let a=!1;for(const l of t.modelRange.getItems({shallow:!0}))o.checkAttribute(l,n.attributeName)&&n.appliesToListItem(l)&&(l.hasAttribute(n.attributeName)||(r.setAttribute(n.attributeName,n.getAttributeOnUpcast(t.viewItem),l),a=!0));a&&s.consume(t.viewItem,n.viewConsumables)}}class aI extends C{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return w_()}getListTypeFromListStyleType(e){return xu(e)}getListStyleTypeFromTypeAttribute(e){return __(e)}getTypeAttributeFromListStyleType(e){return Cu(e)}}function y_(n){const{startIndex:e,reversed:t,styles:i}=n;return{styles:lI(i),startIndex:e||!1,reversed:t||!1}}function lI(n){const e={listTypes:["bulleted","numbered"],useAttribute:!1};return n===!0||(n?Array.isArray(n)||typeof n=="string"?e.listTypes=Ne(n):(e.listTypes=n.listTypes?Ne(n.listTypes):e.listTypes,e.useAttribute=!!n.useAttribute,n.listStyleTypes&&(e.listStyleTypes=n.listStyleTypes)):e.listTypes=[]),e}const Cs="default";class cI extends C{static get requires(){return[xs,aI]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const e=this.editor,t=e.model,i=e.plugins.get(xs),r=function(o){const s=[],a=y_(o);if(o.styles){const l=a.styles.useAttribute;s.push({attributeName:"listStyle",defaultValue:Cs,viewConsumables:{styles:"list-style-type"},addCommand(c){let d=w_();l&&(d=d.filter(u=>!!Cu(u))),c.commands.add("listStyle",new oI(c,Cs,d))},appliesToListItem:c=>c.getAttribute("listType")=="numbered"||c.getAttribute("listType")=="bulleted",hasValidAttribute(c){if(!this.appliesToListItem(c))return!c.hasAttribute("listStyle");if(!c.hasAttribute("listStyle"))return!1;const d=c.getAttribute("listStyle");return d==Cs||xu(d)==c.getAttribute("listType")},setAttributeOnDowncast(c,d,u){if(d&&d!==Cs){if(!l)return void c.setStyle("list-style-type",d,u);{const h=Cu(d);if(h)return void c.setAttribute("type",h,u)}}c.removeStyle("list-style-type",u),c.removeAttribute("type",u)},getAttributeOnUpcast(c){const d=c.getStyle("list-style-type");if(d)return rI(d);const u=c.getAttribute("type");return u?__(u):Cs}})}return o.reversed&&s.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(l){l.commands.add("listReversed",new sI(l))},appliesToListItem:l=>l.getAttribute("listType")=="numbered",hasValidAttribute(l){return this.appliesToListItem(l)==l.hasAttribute("listReversed")},setAttributeOnDowncast(l,c,d){c?l.setAttribute("reversed","reversed",d):l.removeAttribute("reversed",d)},getAttributeOnUpcast:l=>l.hasAttribute("reversed")}),o.startIndex&&s.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(l){l.commands.add("listStart",new nI(l))},appliesToListItem:l=>ol(l.getAttribute("listType")),hasValidAttribute(l){return this.appliesToListItem(l)==l.hasAttribute("listStart")},setAttributeOnDowncast(l,c,d){c==0||c>1?l.setAttribute("start",c,d):l.removeAttribute("start",d)},getAttributeOnUpcast(l){const c=l.getAttribute("start");return c>=0?c:1}}),s}(e.config.get("list.properties"));for(const o of r)o.addCommand(e),t.schema.extend("$listItem",{allowAttributes:o.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(s,a,l){o.setAttributeOnDowncast(s,a,l)}});e.conversion.for("upcast").add(o=>{for(const s of r)o.on("element:ol",v_(s)),o.on("element:ul",v_(s))}),i.on("checkAttributes:list",(o,{viewElement:s,modelAttributes:a})=>{for(const l of r)l.getAttributeOnUpcast(s)!=a[l.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(e.commands.get("indentList"),"afterExecute",(o,s)=>{t.change(a=>{for(const l of s)for(const c of r)c.appliesToListItem(l)&&a.setAttribute(c.attributeName,c.defaultValue,l)})}),i.on("postFixer",(o,{listNodes:s,writer:a})=>{for(const{node:l}of s)for(const c of r)c.hasValidAttribute(l)||(c.appliesToListItem(l)?a.setAttribute(c.attributeName,c.defaultValue,l):a.removeAttribute(c.attributeName,l),o.return=!0)}),i.on("postFixer",(o,{listNodes:s,writer:a})=>{for(const{node:l,previousNodeInList:c}of s)if(c&&c.getAttribute("listType")==l.getAttribute("listType"))for(const d of r){const{attributeName:u}=d;if(!d.appliesToListItem(l))continue;const h=c.getAttribute(u);l.getAttribute(u)!=h&&(a.setAttribute(u,h,l),o.return=!0)}})}}class x_ extends N{constructor(e,{enabledProperties:t,styleButtonViews:i,styleGridAriaLabel:r}){super(e),m(this,"children"),m(this,"stylesView",null),m(this,"additionalPropertiesCollapsibleView",null),m(this,"startIndexFieldView",null),m(this,"reversedSwitchButtonView",null),m(this,"focusTracker",new ge),m(this,"keystrokes",new Ie),m(this,"focusables",new St),m(this,"focusCycler");const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new ct({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i&&i.length?(this.stylesView=this._createStylesView(i,r),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(t.startIndex||t.reversed)&&(this._addNumberedListPropertyViews(t),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);Qo({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>R.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,t){const i=new N(this.locale);return i.children=i.createCollection(),i.children.addMany(e),i.setTemplate({tag:"div",attributes:{"aria-label":t,class:["ck","ck-list-styles-list"]},children:i.children}),i.children.delegate("execute").to(this),i.focus=function(){for(const r of this.children)if(r instanceof $&&r.isOn)return void r.focus();this.children.first.focus()},i.focusTracker=new ge,i.keystrokes=new Ie,i.render(),i.keystrokes.listenTo(i.element),i}_addNumberedListPropertyViews(e){const t=this.locale.t,i=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),i.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),i.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new rb(this.locale,i),this.additionalPropertiesCollapsibleView.set({label:t("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(i,"isEnabled",(...r)=>r.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(r,o,s)=>{s||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(i)}_createStartIndexField(){const e=this.locale.t,t=new Pi(this.locale,xb);return t.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const i=t.fieldView.element,r=i.valueAsNumber;Number.isNaN(r)?t.errorText=e("Invalid start index value."):i.checkValidity()?this.fire("listStart",{startIndex:r}):t.errorText=e("Start index must be greater than 0.")}),t}_createReversedSwitchButton(){const e=this.locale.t,t=new Xo(this.locale);return t.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),t.delegate("execute").to(this,"listReversed"),t}}class dI extends C{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=e.config.get("list.properties"),r=y_(i),o=r.styles.listTypes;if(o.includes("bulleted")){const s=[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:sA},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:nA},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:cA}],a=t("Bulleted List"),l=t("Bulleted list styles toolbar"),c="bulletedList";e.ui.componentFactory.add(c,C_({editor:e,normalizedConfig:r,parentCommandName:c,buttonLabel:a,buttonIcon:ld,styleGridAriaLabel:l,styleDefinitions:s})),e.ui.componentFactory.add(`menuBar:${c}`,T_({editor:e,normalizedConfig:r,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:s}))}if(o.includes("numbered")||i.startIndex||i.reversed){const s=[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:oA},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:rA},{label:t("Toggle the lower\u2013roman list style"),tooltip:t("Lower\u2013roman"),type:"lower-roman",icon:lA},{label:t("Toggle the upper\u2013roman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:uA},{label:t("Toggle the lower\u2013latin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:aA},{label:t("Toggle the upper\u2013latin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:dA}],a=t("Numbered List"),l=t("Numbered list styles toolbar"),c="numberedList";e.ui.componentFactory.add(c,C_({editor:e,normalizedConfig:r,parentCommandName:c,buttonLabel:a,buttonIcon:ud,styleGridAriaLabel:l,styleDefinitions:s})),o.includes("numbered")&&e.ui.componentFactory.add(`menuBar:${c}`,T_({editor:e,normalizedConfig:r,parentCommandName:c,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:s}))}}}function C_({editor:n,normalizedConfig:e,parentCommandName:t,buttonLabel:i,buttonIcon:r,styleGridAriaLabel:o,styleDefinitions:s}){const a=n.commands.get(t);return l=>{const c=mt(l,sr),d=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",d.on("execute",()=>{n.execute(t),n.editing.view.focus()}),d.set({label:i,icon:r,tooltip:!0,isToggleable:!0}),d.bind("isOn").to(a,"value",u=>!!u),c.once("change:isOpen",()=>{const u=function({editor:h,normalizedConfig:g,dropdownView:p,parentCommandName:f,styleDefinitions:b,styleGridAriaLabel:k}){const w=h.locale,_={...g,...f!="numberedList"?{startIndex:!1,reversed:!1}:null},y=f.replace("List","");let x=null;if(g.styles.listTypes.includes(y)){const I=h.commands.get("listStyle"),M=A_({editor:h,parentCommandName:f,listStyleCommand:I}),D=g.styles.listStyleTypes;let fe=b;if(D){const ce=D[y];ce&&(fe=b.filter(ut=>ce.includes(ut.type)))}const De=E_(I);x=fe.filter(De).map(M)}const A=new x_(w,{styleGridAriaLabel:k,enabledProperties:_,styleButtonViews:x});if(g.styles.listTypes.includes(y)&&Ia(p,()=>A.stylesView.children.find(I=>I.isOn)),_.startIndex){const I=h.commands.get("listStart");A.startIndexFieldView.bind("isEnabled").to(I),A.startIndexFieldView.fieldView.bind("value").to(I),A.on("listStart",(M,D)=>h.execute("listStart",D))}if(_.reversed){const I=h.commands.get("listReversed");A.reversedSwitchButtonView.bind("isEnabled").to(I),A.reversedSwitchButtonView.bind("isOn").to(I,"value",M=>!!M),A.on("listReversed",()=>{const M=I.value;h.execute("listReversed",{reversed:!M})})}return A.delegate("execute").to(p),A}({editor:n,normalizedConfig:e,dropdownView:c,parentCommandName:t,styleGridAriaLabel:o,styleDefinitions:s});c.panelView.children.add(u)}),c.on("execute",()=>{n.editing.view.focus()}),c}}function A_({editor:n,listStyleCommand:e,parentCommandName:t}){const i=n.locale,r=n.commands.get(t);return({label:o,type:s,icon:a,tooltip:l})=>{const c=new $(i);return c.set({label:o,icon:a,tooltip:l}),c.bind("isOn").to(e,"value",d=>d===s),c.on("execute",()=>{r.value?e.value===s?n.execute(t):e.value!==s&&n.execute("listStyle",{type:s}):n.model.change(()=>{n.execute("listStyle",{type:s})})}),c}}function T_({editor:n,normalizedConfig:e,parentCommandName:t,buttonLabel:i,styleGridAriaLabel:r,styleDefinitions:o}){return s=>{const a=new Yt(s),l=n.commands.get(t),c=n.commands.get("listStyle"),d=E_(c),u=A_({editor:n,parentCommandName:t,listStyleCommand:c}),h=e.styles.listStyleTypes;let g=o;if(h){const b=h[l.type];b&&(g=o.filter(k=>b.includes(k.type)))}const p=g.filter(d).map(u),f=new x_(s,{styleGridAriaLabel:r,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:p});return f.delegate("execute").to(a),a.buttonView.set({label:i,icon:t==="bulletedList"?ld:ud}),a.panelView.children.add(f),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{n.editing.view.focus()}),a}}function E_(n){return typeof n.isStyleTypeSupported=="function"?e=>n.isStyleTypeSupported(e.type):()=>!0}class uI extends C{static get requires(){return[cI,dI]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class hI extends G{constructor(e){super(e),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const e=this._getSelectedItems();this.value=this._getValue(e),this.isEnabled=!!e.length}execute(e={}){this.editor.model.change(t=>{const i=this._getSelectedItems(),r=e.forceValue===void 0?!this._getValue(i):e.forceValue;for(const o of i)r?t.setAttribute("todoListChecked",!0,o):t.removeAttribute("todoListChecked",o)})}_getValue(e){return e.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const e=this.editor.model,t=e.schema,i=e.document.selection.getFirstRange(),r=i.start.parent,o=[];t.checkAttribute(r,"todoListChecked")&&o.push(...to(r));for(const s of i.getItems({shallow:!0}))t.checkAttribute(s,"todoListChecked")&&!o.includes(s)&&o.push(...to(s));return o}}class mI extends Ti{constructor(){super(...arguments),m(this,"domEventType",["change"])}onDomEvent(e){if(e.target){const t=this.view.domConverter.mapDomToView(e.target);t&&t.is("element","input")&&t.getAttribute("type")=="checkbox"&&t.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const gI=Mo("Ctrl+Enter");class pI extends C{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[xs]}init(){const e=this.editor,t=e.model,i=e.editing,r=e.plugins.get(xs),o=e.config.get("list.multiBlock")?"paragraph":"listItem";e.commands.add("todoList",new ys(e,"todo")),e.commands.add("checkTodoList",new hI(e)),i.view.addObserver(mI),t.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),t.schema.addAttributeCheck(s=>{const a=s.last;if(!a.getAttribute("listItemId")||a.getAttribute("listType")!="todo")return!1},"todoListChecked"),e.conversion.for("upcast").add(s=>{s.on("element:input",(a,l,c)=>{const d=l.modelCursor,u=d.parent,h=l.viewItem;if(!c.consumable.test(h,{name:!0})||h.getAttribute("type")!="checkbox"||!d.isAtStart||!u.hasAttribute("listType"))return;c.consumable.consume(h,{name:!0});const g=c.writer;g.setAttribute("listType","todo",u),l.viewItem.hasAttribute("checked")&&g.setAttribute("todoListChecked",!0,u),l.modelRange=g.createRange(d)}),s.on("element:li",(a,l,c)=>{const{writer:d,schema:u}=c;if(!l.modelRange)return;const h=Array.from(l.modelRange.getItems({shallow:!0})).filter(g=>g.getAttribute("listType")==="todo"&&u.checkAttribute(g,"listItemId")).reduce((g,p)=>{const f=p.getAttribute("listItemId");return g.has(f)||g.set(f,to(p)),g},new Map);for(const[,g]of h.entries())if(g.some(p=>p.getAttribute("todoListChecked")))for(const p of g)d.setAttribute("todoListChecked",!0,p)},{priority:"low"}),s.on("element:label",Au({name:"label",classes:"todo-list__label"})),s.on("element:label",Au({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),s.on("element:span",Au({name:"span",classes:"todo-list__label__description"})),s.on("element:ul",function(a){const l=new Gt(a);return(c,d,u)=>{const h=l.match(d.viewItem);if(!h)return;const g=h.match;g.name=!1,u.consumable.consume(d.viewItem,g)}}({name:"ul",classes:"todo-list"}))}),e.conversion.for("downcast").elementToElement({model:o,view:(s,{writer:a})=>{if(al(s,r.getListAttributeNames()))return a.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),r.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(s,a,l){a=="todo"?s.addClass("todo-list",l):s.removeClass("todo-list",l)}}),r.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(s,a,{dataPipeline:l}){if(a.getAttribute("listType")!="todo")return null;const c=s.createUIElement("input",{type:"checkbox",...a.getAttribute("todoListChecked")?{checked:"checked"}:null,...l?{disabled:"disabled"}:{tabindex:"-1"}});if(l)return c;const d=s.createContainerElement("span",{contenteditable:"false"},c);return d.getFillerOffset=()=>null,d},canWrapElement:s=>al(s,r.getListAttributeNames()),createWrapperElement(s,a,{dataPipeline:l}){const c=["todo-list__label"];return al(a,r.getListAttributeNames())||c.push("todo-list__label_without-description"),s.createAttributeElement(l?"label":"span",{class:c.join(" ")})}}),r.on("checkElement",(s,{modelElement:a,viewElement:l})=>{const c=al(a,r.getListAttributeNames());l.hasClass("todo-list__label__description")!=c&&(s.return=!0,s.stop())}),r.on("checkElement",(s,{modelElement:a,viewElement:l})=>{const c=a.getAttribute("listType")=="todo"&&sn(a);let d=!1;const u=e.editing.view.createPositionBefore(l).getWalker({direction:"backward"});for(const{item:h}of u){if(h.is("element")&&e.editing.mapper.toModelElement(h))break;h.is("element","input")&&h.getAttribute("type")=="checkbox"&&(d=!0)}d!=c&&(s.return=!0,s.stop())}),r.on("postFixer",(s,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:d}of a){if(!d||d.getAttribute("listItemId")!=c.getAttribute("listItemId"))continue;const u=d.hasAttribute("todoListChecked"),h=c.hasAttribute("todoListChecked");h&&!u?(l.removeAttribute("todoListChecked",c),s.return=!0):!h&&u&&(l.setAttribute("todoListChecked",!0,c),s.return=!0)}}),t.document.registerPostFixer(s=>{const a=t.document.differ.getChanges();let l=!1;for(const c of a)if(c.type=="attribute"&&c.attributeKey=="listType"){const d=c.range.start.nodeAfter;c.attributeOldValue=="todo"&&d.hasAttribute("todoListChecked")&&(s.removeAttribute("todoListChecked",d),l=!0)}else if(c.type=="insert"&&c.name!="$text")for(const{item:d}of s.createRangeOn(c.position.nodeAfter))d.is("element")&&d.getAttribute("listType")!="todo"&&d.hasAttribute("todoListChecked")&&(s.removeAttribute("todoListChecked",d),l=!0);return l}),this.listenTo(i.view.document,"keydown",(s,a)=>{Gn(a)===gI&&(e.execute("checkTodoList"),s.stop())},{priority:"high"}),this.listenTo(i.view.document,"todoCheckboxChange",(s,a)=>{const l=a.target;if(!l||!l.is("element","input"))return;const c=i.view.createPositionAfter(l),d=i.mapper.toModelPosition(c).parent;d&&Pe(d)&&d.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(d)}),this.listenTo(i.view.document,"arrowKey",function(s,a){return(l,c)=>{const d=aa(c.keyCode,a.contentLanguageDirection),u=s.schema,h=s.document.selection;if(!h.isCollapsed)return;const g=h.getFirstPosition(),p=g.parent;if(d=="right"&&g.isAtEnd){const f=u.getNearestSelectionRange(s.createPositionAfter(p),"forward");if(!f)return;const b=f.start.parent;b&&Pe(b)&&b.getAttribute("listType")=="todo"&&(s.change(k=>k.setSelection(f)),c.preventDefault(),c.stopPropagation(),l.stop())}else if(d=="left"&&g.isAtStart&&Pe(p)&&p.getAttribute("listType")=="todo"){const f=u.getNearestSelectionRange(s.createPositionBefore(p),"backward");if(!f)return;s.change(b=>b.setSelection(f)),c.preventDefault(),c.stopPropagation(),l.stop()}}}(t,e.locale),{context:"$text"}),this.listenTo(i.mapper,"viewToModelPosition",(s,a)=>{const l=a.viewPosition.parent,c=l.is("attributeElement","li")&&a.viewPosition.offset==0,d=S_(l)&&a.viewPosition.offset<=1,u=l.is("element","span")&&l.getAttribute("contenteditable")=="false"&&S_(l.parent);if(!c&&!d&&!u)return;const h=a.modelPosition.nodeAfter;h&&h.getAttribute("listType")=="todo"&&(a.modelPosition=t.createPositionAt(h,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(e){const t=this.editor,i=t.model,r=Array.from(i.document.selection.getRanges());i.change(o=>{o.setSelection(e,"end"),t.execute("checkTodoList"),o.setSelection(r)})}_initAriaAnnouncements(){const{model:e,ui:t,t:i}=this.editor;let r=null;t&&e.document.selection.on("change:range",()=>{const o=e.document.selection.focus.parent,s=I_(r),a=I_(o);s&&!a?t.ariaLiveAnnouncer.announce(i("Leaving a to-do list")):!s&&a&&t.ariaLiveAnnouncer.announce(i("Entering a to-do list")),r=o})}}function Au(n){const e=new Gt(n);return(t,i,r)=>{const o=e.match(i.viewItem);o&&r.consumable.consume(i.viewItem,o.match)&&Object.assign(i,r.convertChildren(i.viewItem,i.modelCursor))}}function al(n,e){return(n.is("element","paragraph")||n.is("element","listItem"))&&n.getAttribute("listType")=="todo"&&sn(n)&&function(t,i){for(const r of t.getAttributeKeys())if(!r.startsWith("selection:")&&!i.includes(r))return!1;return!0}(n,e)}function S_(n){return!!n&&n.is("attributeElement")&&n.hasClass("todo-list__label")}function I_(n){return!!n&&!(!n.is("element","paragraph")&&!n.is("element","listItem"))&&n.getAttribute("listType")=="todo"}class fI extends C{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;yu(this.editor,"todoList",e("To-do List"),$A)}}class bI extends C{static get requires(){return[pI,fI]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}Mo("Ctrl+Enter");function kI(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let io={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const wI=/[&<>"']/,_I=/[&<>"']/g,vI=/[<>"']|&(?!#?\w+;)/,yI=/[<>"']|&(?!#?\w+;)/g,xI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},P_=n=>xI[n];function gt(n,e){if(e){if(wI.test(n))return n.replace(_I,P_)}else if(vI.test(n))return n.replace(yI,P_);return n}const CI=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function M_(n){return n.replace(CI,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const AI=/(^|[^\[])\^/g;function Re(n,e){n=n.source||n,e=e||"";const t={replace:(i,r)=>(r=(r=r.source||r).replace(AI,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}const TI=/[^\w:]/g,EI=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V_(n,e,t){if(n){let i;try{i=decodeURIComponent(M_(t)).replace(TI,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!EI.test(t)&&(t=function(i,r){ll[" "+i]||(SI.test(i)?ll[" "+i]=i+"/":ll[" "+i]=dl(i,"/",!0)),i=ll[" "+i];const o=i.indexOf(":")===-1;return r.substring(0,2)==="//"?o?r:i.replace(II,"$1")+r:r.charAt(0)==="/"?o?r:i.replace(PI,"$1")+r:i+r}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const ll={},SI=/^[^:]+:\/*[^/]*$/,II=/^([^:]+:)[\s\S]*$/,PI=/^([^:]+:\/*[^/]*)[\s\S]*$/,cl={exec:function(){}};function vi(n){let e,t,i=1;for(;i<arguments.length;i++)for(t in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function L_(n,e){const t=n.replace(/\|/g,(r,o,s)=>{let a=!1,l=o;for(;--l>=0&&s[l]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let i=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;i<t.length;i++)t[i]=t[i].trim().replace(/\\\|/g,"|");return t}function dl(n,e,t){const i=n.length;if(i===0)return"";let r=0;for(;r<i;){const o=n.charAt(i-r-1);if(o!==e||t){if(o===e||!t)break;r++}else r++}return n.substr(0,i-r)}function O_(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function N_(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function R_(n,e,t,i){const r=e.href,o=e.title?gt(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s,[])};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:o,text:gt(s)}}class Tu{constructor(e){this.options=e||io}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:dl(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function(o,s){const a=o.match(/^(\s+)(?:```)/);if(a===null)return s;const l=a[1];return s.split(`
`).map(c=>{const d=c.match(/^\s+/);if(d===null)return c;const[u]=d;return u.length>=l.length?c.slice(l.length):c}).join(`
`)}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const o=dl(i,"#");this.options.pedantic?i=o.trim():o&&!/ $/.test(o)||(i=o.trim())}const r={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,o,s,a,l,c,d,u,h,g,p,f=t[1].trim();const b=f.length>1,k={type:"list",raw:"",ordered:b,start:b?+f.slice(0,-1):"",loose:!1,items:[]};f=b?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=b?f:"[*+-]");const w=new RegExp(`^( {0,3}${f})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,t=w.exec(e))&&!this.rules.block.hr.test(e);){if(i=t[0],e=e.substring(i.length),d=t[2].split(`
`,1)[0],u=e.split(`
`,1)[0],this.options.pedantic?(s=2,g=d.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,g=d.slice(s),s+=t[1].length),l=!1,!d&&/^ *$/.test(u)&&(i+=u+`
`,e=e.substring(u.length+1),p=!0),!p){const y=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(h=e.split(`
`,1)[0],d=h,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!y.test(d));){if(d.search(/[^ ]/)>=s||!d.trim())g+=`
`+d.slice(s);else{if(l)break;g+=`
`+d}l||d.trim()||(l=!0),i+=h+`
`,e=e.substring(h.length+1)}}k.loose||(c?k.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(g),r&&(o=r[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),k.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:g}),k.raw+=i}k.items[k.items.length-1].raw=i.trimRight(),k.items[k.items.length-1].text=g.trimRight(),k.raw=k.raw.trimRight();const _=k.items.length;for(a=0;a<_;a++){this.lexer.state.top=!1,k.items[a].tokens=this.lexer.blockTokens(k.items[a].text,[]);const y=k.items[a].tokens.filter(A=>A.type==="space"),x=y.every(A=>{const I=A.raw.split("");let M=0;for(const D of I)if(D===`
`&&(M+=1),M>1)return!0;return!1});!k.loose&&y.length&&x&&(k.loose=!0,k.items[a].loose=!0)}return k}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):gt(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:L_(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let r,o,s,a,l=i.align.length;for(r=0;r<l;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(l=i.rows.length,r=0;r<l;r++)i.rows[r]=L_(i.rows[r],i.header.length).map(c=>({text:c}));for(l=i.header.length,o=0;o<l;o++)i.header[o].tokens=[],this.lexer.inlineTokens(i.header[o].text,i.header[o].tokens);for(l=i.rows.length,o=0;o<l;o++)for(a=i.rows[o],s=0;s<a.length;s++)a[s].tokens=[],this.lexer.inlineTokens(a[s].text,a[s].tokens);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){const t=this.rules.block.text.exec(e);if(t){const i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:gt(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):gt(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=dl(i.slice(0,-1),"\\");if((i.length-s.length)%2==0)return}else{const s=function(a,l){if(a.indexOf(l[1])===-1)return-1;const c=a.length;let d=0,u=0;for(;u<c;u++)if(a[u]==="\\")u++;else if(a[u]===l[0])d++;else if(a[u]===l[1]&&(d--,d<0))return u;return-1}(t[2],"()");if(s>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),R_(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r||!r.href){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return R_(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(i===""||this.rules.inline.punctuation.exec(i))){const s=r[0].length-1;let a,l,c=s,d=0;const u=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(r=u.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=a.length,r[3]||r[4]){c+=l;continue}if((r[5]||r[6])&&s%3&&!((s+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(s,l)%2){const g=e.slice(1,s+r.index+l);return{type:"em",raw:e.slice(0,s+r.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}const h=e.slice(2,s+r.index+l-1);return{type:"strong",raw:e.slice(0,s+r.index+l+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=gt(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let r,o;return i[2]==="@"?(r=gt(this.options.mangle?t(i[1]):i[1]),o="mailto:"+r):(r=gt(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if(i[2]==="@")r=gt(this.options.mangle?t(i[0]):i[0]),o="mailto:"+r;else{let s;do s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(s!==i[0]);r=gt(i[0]),o=i[1]==="www."?"http://"+r:r}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let r;return r=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):gt(i[0]):i[0]:gt(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Q={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:cl,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Q.def=Re(Q.def).replace("label",Q._label).replace("title",Q._title).getRegex(),Q.bullet=/(?:[*+-]|\d{1,9}[.)])/,Q.listItemStart=Re(/^( *)(bull) */).replace("bull",Q.bullet).getRegex(),Q.list=Re(Q.list).replace(/bull/g,Q.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Q.def.source+")").getRegex(),Q._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Q._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Q.html=Re(Q.html,"i").replace("comment",Q._comment).replace("tag",Q._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Q.paragraph=Re(Q._paragraph).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex(),Q.blockquote=Re(Q.blockquote).replace("paragraph",Q.paragraph).getRegex(),Q.normal=vi({},Q),Q.gfm=vi({},Q.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Q.gfm.table=Re(Q.gfm.table).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex(),Q.gfm.paragraph=Re(Q._paragraph).replace("hr",Q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Q.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Q._tag).getRegex(),Q.pedantic=vi({},Q.normal,{html:Re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Q._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:cl,paragraph:Re(Q.normal._paragraph).replace("hr",Q.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Q.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const H={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:cl,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:cl,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function MI(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function z_(n){let e,t,i="";const r=n.length;for(e=0;e<r;e++)t=n.charCodeAt(e),Math.random()>.5&&(t="x"+t.toString(16)),i+="&#"+t+";";return i}H._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",H.punctuation=Re(H.punctuation).replace(/punctuation/g,H._punctuation).getRegex(),H.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,H.escapedEmSt=/\\\*|\\_/g,H._comment=Re(Q._comment).replace("(?:-->|$)","-->").getRegex(),H.emStrong.lDelim=Re(H.emStrong.lDelim).replace(/punct/g,H._punctuation).getRegex(),H.emStrong.rDelimAst=Re(H.emStrong.rDelimAst,"g").replace(/punct/g,H._punctuation).getRegex(),H.emStrong.rDelimUnd=Re(H.emStrong.rDelimUnd,"g").replace(/punct/g,H._punctuation).getRegex(),H._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,H._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,H._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,H.autolink=Re(H.autolink).replace("scheme",H._scheme).replace("email",H._email).getRegex(),H._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,H.tag=Re(H.tag).replace("comment",H._comment).replace("attribute",H._attribute).getRegex(),H._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,H._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,H._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,H.link=Re(H.link).replace("label",H._label).replace("href",H._href).replace("title",H._title).getRegex(),H.reflink=Re(H.reflink).replace("label",H._label).replace("ref",Q._label).getRegex(),H.nolink=Re(H.nolink).replace("ref",Q._label).getRegex(),H.reflinkSearch=Re(H.reflinkSearch,"g").replace("reflink",H.reflink).replace("nolink",H.nolink).getRegex(),H.normal=vi({},H),H.pedantic=vi({},H.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Re(/^!?\[(label)\]\((.*?)\)/).replace("label",H._label).getRegex(),reflink:Re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",H._label).getRegex()}),H.gfm=vi({},H.normal,{escape:Re(H.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),H.gfm.url=Re(H.gfm.url,"i").replace("email",H.gfm._extended_email).getRegex(),H.breaks=vi({},H.gfm,{br:Re(H.br).replace("{2,}","*").getRegex(),text:Re(H.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class cn{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||io,this.options.tokenizer=this.options.tokenizer||new Tu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Q.normal,inline:H.normal};this.options.pedantic?(t.block=Q.pedantic,t.inline=H.pedantic):this.options.gfm&&(t.block=Q.gfm,this.options.breaks?t.inline=H.breaks:t.inline=H.gfm),this.tokenizer.rules=t}static get rules(){return{block:Q,inline:H}}static lex(e,t){return new cn(t).lex(e)}static lexInline(e,t){return new cn(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let i,r,o,s;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),r=t[t.length-1],!r||r.type!=="paragraph"&&r.type!=="text"?t.push(i):(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),r=t[t.length-1],!r||r.type!=="paragraph"&&r.type!=="text"?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o)))r=t[t.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,r,o,s,a,l,c=e;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)d.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,s.index)+"["+N_("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)c=c.slice(0,s.index)+"["+N_("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.escapedEmSt.exec(c))!=null;)c=c.slice(0,s.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>!!(i=d.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,c,l))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,z_))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,z_))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const u=e.slice(1);let h;this.options.extensions.startInline.forEach(function(g){h=g.call({lexer:this},u),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(o,MI))e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),a=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);else if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(i.raw.length),t.push(i);return t}}class Eu{constructor(e){this.options=e||io}code(e,t,i){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,r);o!=null&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+gt(r,!0)+'">'+(i?e:gt(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:gt(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&i!==1?' start="'+i+'"':"")+`>
`+e+"</"+r+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if((e=V_(this.options.sanitize,this.options.baseUrl,e))===null)return i;let r='<a href="'+gt(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if((e=V_(this.options.sanitize,this.options.baseUrl,e))===null)return i;let r='<img src="'+e+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class D_{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class B_{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do r++,i=e+"-"+r;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class dn{constructor(e){this.options=e||io,this.options.renderer=this.options.renderer||new Eu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new D_,this.slugger=new B_}static parse(e,t){return new dn(t).parse(e)}static parseInline(e,t){return new dn(t).parseInline(e)}parse(e,t=!0){let i,r,o,s,a,l,c,d,u,h,g,p,f,b,k,w,_,y,x,A="";const I=e.length;for(i=0;i<I;i++)if(h=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(x=this.options.extensions.renderers[h.type].call({parser:this},h),x!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))A+=x||"";else switch(h.type){case"space":continue;case"hr":A+=this.renderer.hr();continue;case"heading":A+=this.renderer.heading(this.parseInline(h.tokens),h.depth,M_(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":A+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(d="",c="",s=h.header.length,r=0;r<s;r++)c+=this.renderer.tablecell(this.parseInline(h.header[r].tokens),{header:!0,align:h.align[r]});for(d+=this.renderer.tablerow(c),u="",s=h.rows.length,r=0;r<s;r++){for(l=h.rows[r],c="",a=l.length,o=0;o<a;o++)c+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:h.align[o]});u+=this.renderer.tablerow(c)}A+=this.renderer.table(d,u);continue;case"blockquote":u=this.parse(h.tokens),A+=this.renderer.blockquote(u);continue;case"list":for(g=h.ordered,p=h.start,f=h.loose,s=h.items.length,u="",r=0;r<s;r++)k=h.items[r],w=k.checked,_=k.task,b="",k.task&&(y=this.renderer.checkbox(w),f?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=y+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=y+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:y}):b+=y),b+=this.parse(k.tokens,f),u+=this.renderer.listitem(b,_,w);A+=this.renderer.list(u,g,p);continue;case"html":A+=this.renderer.html(h.text);continue;case"paragraph":A+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;i+1<I&&e[i+1].type==="text";)h=e[++i],u+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);A+=t?this.renderer.paragraph(u):u;continue;default:{const M='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(M);throw new Error(M)}}return A}parseInline(e,t){t=t||this.renderer;let i,r,o,s="";const a=e.length;for(i=0;i<a;i++)if(r=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(o=this.options.extensions.renderers[r.type].call({parser:this},r),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))s+=o||"";else switch(r.type){case"escape":case"text":s+=t.text(r.text);break;case"html":s+=t.html(r.text);break;case"link":s+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":s+=t.image(r.href,r.title,r.text);break;case"strong":s+=t.strong(this.parseInline(r.tokens,t));break;case"em":s+=t.em(this.parseInline(r.tokens,t));break;case"codespan":s+=t.codespan(r.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(r.tokens,t));break;default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}}return s}}function ee(n,e,t){if(n==null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),O_(e=vi({},ee.defaults,e||{})),t){const i=e.highlight;let r;try{r=cn.lex(n,e)}catch(a){return t(a)}const o=function(a){let l;if(!a)try{e.walkTokens&&ee.walkTokens(r,e.walkTokens),l=dn.parse(r,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!r.length))return o();let s=0;return ee.walkTokens(r,function(a){a.type==="code"&&(s++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return o(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),s--,s===0&&o()})},0))}),void(s===0&&o())}try{const i=cn.lex(n,e);return e.walkTokens&&ee.walkTokens(i,e.walkTokens),dn.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+gt(i.message+"",!0)+"</pre>";throw i}}ee.options=ee.setOptions=function(n){var e;return vi(ee.defaults,n),e=ee.defaults,io=e,ee},ee.getDefaults=kI,ee.defaults=io,ee.use=function(...n){const e=vi({},...n),t=ee.defaults.extensions||{renderers:{},childTokens:{}};let i;n.forEach(r=>{if(r.extensions&&(i=!0,r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const s=t.renderers?t.renderers[o.name]:null;t.renderers[o.name]=s?function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)})),r.renderer){const o=ee.defaults.renderer||new Eu;for(const s in r.renderer){const a=o[s];o[s]=(...l)=>{let c=r.renderer[s].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.renderer=o}if(r.tokenizer){const o=ee.defaults.tokenizer||new Tu;for(const s in r.tokenizer){const a=o[s];o[s]=(...l)=>{let c=r.tokenizer[s].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.tokenizer=o}if(r.walkTokens){const o=ee.defaults.walkTokens;e.walkTokens=function(s){r.walkTokens.call(this,s),o&&o.call(this,s)}}i&&(e.extensions=t),ee.setOptions(e)})},ee.walkTokens=function(n,e){for(const t of n)switch(e.call(ee,t),t.type){case"table":for(const i of t.header)ee.walkTokens(i.tokens,e);for(const i of t.rows)for(const r of i)ee.walkTokens(r.tokens,e);break;case"list":ee.walkTokens(t.items,e);break;default:ee.defaults.extensions&&ee.defaults.extensions.childTokens&&ee.defaults.extensions.childTokens[t.type]?ee.defaults.extensions.childTokens[t.type].forEach(function(i){ee.walkTokens(t[i],e)}):t.tokens&&ee.walkTokens(t.tokens,e)}},ee.parseInline=function(n,e){if(n==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");O_(e=vi({},ee.defaults,e||{}));try{const t=cn.lexInline(n,e);return e.walkTokens&&ee.walkTokens(t,e.walkTokens),dn.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+gt(t.message+"",!0)+"</pre>";throw t}},ee.Parser=dn,ee.parser=dn.parse,ee.Renderer=Eu,ee.TextRenderer=D_,ee.Lexer=cn,ee.lexer=cn.lex,ee.Tokenizer=Tu,ee.Slugger=B_,ee.parse=ee,ee.options,ee.setOptions,ee.use,ee.walkTokens,ee.parseInline,dn.parse,cn.lex;class VI{constructor(){m(this,"_parser"),m(this,"_options",{gfm:!0,breaks:!0,tables:!0,xhtml:!0,headerIds:!1}),ee.use({tokenizer:{autolink:()=>null,url:()=>null},renderer:{checkbox(...e){return Object.getPrototypeOf(this).checkbox.call(this,...e).trimRight()},code(...e){return Object.getPrototypeOf(this).code.call(this,...e).replace(`
</code>`,"</code>")}}}),this._parser=ee}parse(e){return this._parser.parse(e,this._options)}}function Su(n,e){return Array(e+1).join(n)}var LI=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Iu(n){return Pu(n,LI)}var F_=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function j_(n){return Pu(n,F_)}var $_=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Pu(n,e){return e.indexOf(n.nodeName)>=0}function H_(n,e){return n.getElementsByTagName&&e.some(function(t){return n.getElementsByTagName(t).length})}var It={};function ul(n){return n?n.replace(/(\n+\s*)+/g,`
`):""}function U_(n){for(var e in this.options=n,this._keep=[],this._remove=[],this.blankRule={replacement:n.blankReplacement},this.keepReplacement=n.keepReplacement,this.defaultRule={replacement:n.defaultReplacement},this.array=[],n.rules)this.array.push(n.rules[e])}function Mu(n,e,t){for(var i=0;i<n.length;i++){var r=n[i];if(OI(r,e,t))return r}}function OI(n,e,t){var i=n.filter;if(typeof i=="string"){if(i===e.nodeName.toLowerCase())return!0}else if(Array.isArray(i)){if(i.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if(typeof i!="function")throw new TypeError("`filter` needs to be a string, array, or function");if(i.call(n,e,t))return!0}}function Vu(n){var e=n.nextSibling||n.parentNode;return n.parentNode.removeChild(n),e}function W_(n,e,t){return n&&n.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}It.paragraph={filter:"p",replacement:function(n){return`

`+n+`

`}},It.lineBreak={filter:"br",replacement:function(n,e,t){return t.br+`
`}},It.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(n,e,t){var i=Number(e.nodeName.charAt(1));return t.headingStyle==="setext"&&i<3?`

`+n+`
`+Su(i===1?"=":"-",n.length)+`

`:`

`+Su("#",i)+" "+n+`

`}},It.blockquote={filter:"blockquote",replacement:function(n){return`

`+(n=(n=n.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+`

`}},It.list={filter:["ul","ol"],replacement:function(n,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+n:`

`+n+`

`}},It.listItem={filter:"li",replacement:function(n,e,t){n=n.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var i=t.bulletListMarker+"   ",r=e.parentNode;if(r.nodeName==="OL"){var o=r.getAttribute("start"),s=Array.prototype.indexOf.call(r.children,e);i=(o?Number(o)+s:s+1)+".  "}return i+n+(e.nextSibling&&!/\n$/.test(n)?`
`:"")}},It.indentedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="indented"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},It.fencedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="fenced"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){for(var i,r=((e.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],o=e.firstChild.textContent,s=t.fence.charAt(0),a=3,l=new RegExp("^"+s+"{3,}","gm");i=l.exec(o);)i[0].length>=a&&(a=i[0].length+1);var c=Su(s,a);return`

`+c+r+`
`+o.replace(/\n$/,"")+`
`+c+`

`}},It.horizontalRule={filter:"hr",replacement:function(n,e,t){return`

`+t.hr+`

`}},It.inlineLink={filter:function(n,e){return e.linkStyle==="inlined"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var i=ul(e.getAttribute("title"));return i&&(i=' "'+i.replace(/"/g,'\\"')+'"'),"["+n+"]("+t+i+")"}},It.referenceLink={filter:function(n,e){return e.linkStyle==="referenced"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e,t){var i,r,o=e.getAttribute("href"),s=ul(e.getAttribute("title"));switch(s&&(s=' "'+s+'"'),t.linkReferenceStyle){case"collapsed":i="["+n+"][]",r="["+n+"]: "+o+s;break;case"shortcut":i="["+n+"]",r="["+n+"]: "+o+s;break;default:var a=this.references.length+1;i="["+n+"]["+a+"]",r="["+a+"]: "+o+s}return this.references.push(r),i},references:[],append:function(n){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}},It.emphasis={filter:["em","i"],replacement:function(n,e,t){return n.trim()?t.emDelimiter+n+t.emDelimiter:""}},It.strong={filter:["strong","b"],replacement:function(n,e,t){return n.trim()?t.strongDelimiter+n+t.strongDelimiter:""}},It.code={filter:function(n){var e=n.previousSibling||n.nextSibling,t=n.parentNode.nodeName==="PRE"&&!e;return n.nodeName==="CODE"&&!t},replacement:function(n){if(!n)return"";n=n.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(n)?" ":"",t="`",i=n.match(/`+/gm)||[];i.indexOf(t)!==-1;)t+="`";return t+e+n+e+t}},It.image={filter:"img",replacement:function(n,e){var t=ul(e.getAttribute("alt")),i=e.getAttribute("src")||"",r=ul(e.getAttribute("title"));return i?"!["+t+"]("+i+(r?' "'+r+'"':"")+")":""}},U_.prototype={add:function(n,e){this.array.unshift(e)},keep:function(n){this._keep.unshift({filter:n,replacement:this.keepReplacement})},remove:function(n){this._remove.unshift({filter:n,replacement:function(){return""}})},forNode:function(n){return n.isBlank?this.blankRule:(e=Mu(this.array,n,this.options))||(e=Mu(this._keep,n,this.options))||(e=Mu(this._remove,n,this.options))?e:this.defaultRule;var e},forEach:function(n){for(var e=0;e<this.array.length;e++)n(this.array[e],e)}};var Lu=typeof window<"u"?window:{},q_,NI=function(){var n=Lu.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}()?Lu.DOMParser:function(){var n=function(){};return function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{Lu.ActiveXObject&&(e=!0)}return e}()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}();function RI(n,e){var t;return typeof n=="string"?t=(q_=q_||new NI).parseFromString('<x-turndown id="turndown-root">'+n+"</x-turndown>","text/html").getElementById("turndown-root"):t=n.cloneNode(!0),function(i){var r=i.element,o=i.isBlock,s=i.isVoid,a=i.isPre||function(p){return p.nodeName==="PRE"};if(r.firstChild&&!a(r)){for(var l=null,c=!1,d=null,u=W_(d,r,a);u!==r;){if(u.nodeType===3||u.nodeType===4){var h=u.data.replace(/[ \r\n\t]+/g," ");if(l&&!/ $/.test(l.data)||c||h[0]!==" "||(h=h.substr(1)),!h){u=Vu(u);continue}u.data=h,l=u}else{if(u.nodeType!==1){u=Vu(u);continue}o(u)||u.nodeName==="BR"?(l&&(l.data=l.data.replace(/ $/,"")),l=null,c=!1):s(u)||a(u)?(l=null,c=!0):l&&(c=!1)}var g=W_(d,u,a);d=u,u=g}l&&(l.data=l.data.replace(/ $/,""),l.data||Vu(l))}}({element:t,isBlock:Iu,isVoid:j_,isPre:e.preformattedCode?zI:null}),t}function zI(n){return n.nodeName==="PRE"||n.nodeName==="CODE"}function DI(n,e){return n.isBlock=Iu(n),n.isCode=n.nodeName==="CODE"||n.parentNode.isCode,n.isBlank=function(t){return!j_(t)&&!function(i){return Pu(i,$_)}(t)&&/^\s*$/i.test(t.textContent)&&!function(i){return H_(i,F_)}(t)&&!function(i){return H_(i,$_)}(t)}(n),n.flankingWhitespace=function(t,i){if(t.isBlock||i.preformattedCode&&t.isCode)return{leading:"",trailing:""};var r=(o=t.textContent,s=o.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/),{leading:s[1],leadingAscii:s[2],leadingNonAscii:s[3],trailing:s[4],trailingNonAscii:s[5],trailingAscii:s[6]}),o,s;return r.leadingAscii&&G_("left",t,i)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&G_("right",t,i)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}(n,e),n}function G_(n,e,t){var i,r,o;return n==="left"?(i=e.previousSibling,r=/ $/):(i=e.nextSibling,r=/^ /),i&&(i.nodeType===3?o=r.test(i.nodeValue):t.preformattedCode&&i.nodeName==="CODE"?o=!1:i.nodeType!==1||Iu(i)||(o=r.test(i.textContent))),o}var BI=Array.prototype.reduce,FI=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function hl(n){if(!(this instanceof hl))return new hl(n);var e={rules:It,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,i){return i.isBlock?`

`:""},keepReplacement:function(t,i){return i.isBlock?`

`+i.outerHTML+`

`:i.outerHTML},defaultReplacement:function(t,i){return i.isBlock?`

`+t+`

`:t}};this.options=function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}({},e,n),this.rules=new U_(this.options)}function Z_(n){var e=this;return BI.call(n.childNodes,function(t,i){var r="";return(i=new DI(i,e.options)).nodeType===3?r=i.isCode?i.nodeValue:e.escape(i.nodeValue):i.nodeType===1&&(r=$I.call(e,i)),K_(t,r)},"")}function jI(n){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(n=K_(n,t.append(e.options)))}),n.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function $I(n){var e=this.rules.forNode(n),t=Z_.call(this,n),i=n.flankingWhitespace;return(i.leading||i.trailing)&&(t=t.trim()),i.leading+e.replacement(t,n,this.options)+i.trailing}function K_(n,e){var t=function(o){for(var s=o.length;s>0&&o[s-1]===`
`;)s--;return o.substring(0,s)}(n),i=e.replace(/^\n*/,""),r=Math.max(n.length-t.length,e.length-i.length);return t+`

`.substring(0,r)+i}hl.prototype={turndown:function(n){if(!function(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}(n))throw new TypeError(n+" is not a string, or an element/document/fragment node.");if(n==="")return"";var e=Z_.call(this,new RI(n,this.options));return jI.call(this,e)},use:function(n){if(Array.isArray(n))for(var e=0;e<n.length;e++)this.use(n[e]);else{if(typeof n!="function")throw new TypeError("plugin must be a Function or an Array of Functions");n(this)}return this},addRule:function(n,e){return this.rules.add(n,e),this},keep:function(n){return this.rules.keep(n),this},remove:function(n){return this.rules.remove(n),this},escape:function(n){return FI.reduce(function(e,t){return e.replace(t[0],t[1])},n)}};var Y_=/highlight-(?:text|source)-([a-z0-9]+)/;function HI(n){n.addRule("highlightedCodeBlock",{filter:function(e){var t=e.firstChild;return e.nodeName==="DIV"&&Y_.test(e.className)&&t&&t.nodeName==="PRE"},replacement:function(e,t,i){var r=((t.className||"").match(Y_)||[null,""])[1];return`

`+i.fence+r+`
`+t.firstChild.textContent+`
`+i.fence+`

`}})}function UI(n){n.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var WI=Array.prototype.indexOf,qI=Array.prototype.every,no={};function Ou(n){var e,t,i=n.parentNode;return i.nodeName==="THEAD"||i.firstChild===n&&(i.nodeName==="TABLE"||(t=(e=i).previousSibling,e.nodeName==="TBODY"&&(!t||t.nodeName==="THEAD"&&/^\s*$/i.test(t.textContent))))&&qI.call(n.childNodes,function(r){return r.nodeName==="TH"})}function Q_(n,e){var t=" ";return WI.call(e.parentNode.childNodes,e)===0&&(t="| "),t+n+" |"}function GI(n){for(var e in n.keep(function(t){return t.nodeName==="TABLE"&&!Ou(t.rows[0])}),no)n.addRule(e,no[e])}function ZI(n){n.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,t){return(t.checked?"[x]":"[ ]")+" "}})}function KI(n){n.use([HI,UI,GI,ZI])}no.tableCell={filter:["th","td"],replacement:function(n,e){return Q_(n,e)}},no.tableRow={filter:"tr",replacement:function(n,e){var t="",i={left:":--",right:"--:",center:":-:"};if(Ou(e))for(var r=0;r<e.childNodes.length;r++){var o="---",s=(e.childNodes[r].getAttribute("align")||"").toLowerCase();s&&(o=i[s]||o),t+=Q_(o,e.childNodes[r])}return`
`+n+(t?`
`+t:"")}},no.table={filter:function(n){return n.nodeName==="TABLE"&&Ou(n.rows[0])},replacement:function(n){return`

`+(n=n.replace(`

`,`
`))+`

`}},no.tableSection={filter:["thead","tbody","tfoot"],replacement:function(n){return n}};const YI=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");class QI extends hl{escape(e){const t=super.escape;function i(s){return s=(s=t(s)).replace(/</g,"\\<")}let r="",o=0;for(const s of this._matchAutolink(e)){const a=s.index;a>o&&(r+=i(e.substring(o,a)));const l=s[0];r+=l,o=a+l.length}return o<e.length&&(r+=i(e.substring(o,e.length))),r}*_matchAutolink(e){for(const t of e.matchAll(YI)){const i=t[0],r=this._autolinkFindEnd(i);yield Object.assign([i.substring(0,r)],{index:t.index})}}_autolinkFindEnd(e){let t=e.length;for(;t>0;){const i=e[t-1];if(`?!.,:*_~'"`.includes(i))t--;else{if(i!=")")break;{let r=0;for(let o=0;o<t;o++)e[o]=="("?r++:e[o]==")"&&r--;if(!(r<0))break;t--}}}return t}}class JI{constructor(){m(this,"_parser"),this._parser=this._createParser()}parse(e){return this._parser.turndown(e)}keep(e){this._parser.keep(e)}_createParser(){const e=new QI({codeBlockStyle:"fenced",hr:"---",headingStyle:"atx"});return e.use([KI,this._todoList]),e}_todoList(e){e.addRule("taskListItems",{filter:t=>t.type==="checkbox"&&(t.parentNode.nodeName==="LI"||t.parentNode.parentNode.nodeName==="LI"),replacement:(t,i)=>(i.checked?"[x]":"[ ]")+" "})}}class J_{constructor(e){m(this,"_htmlDP"),m(this,"_markdown2html"),m(this,"_html2markdown"),this._htmlDP=new Fp(e),this._markdown2html=new VI,this._html2markdown=new JI}keepHtml(e){this._html2markdown.keep([e])}toView(e){const t=this._markdown2html.parse(e);return this._htmlDP.toView(t)}toData(e){const t=this._htmlDP.toData(e);return this._html2markdown.parse(t)}registerRawContentMatcher(e){this._htmlDP.registerRawContentMatcher(e)}useFillerType(){}}class XI extends C{constructor(e){super(e),e.data.processor=new J_(e.data.viewDocument)}static get pluginName(){return"Markdown"}static get isOfficialPlugin(){return!0}}const eP=["SPAN","BR","PRE","CODE"];class tP extends C{constructor(e){super(e),m(this,"_gfmDataProcessor"),this._gfmDataProcessor=new J_(e.data.viewDocument)}static get pluginName(){return"PasteFromMarkdownExperimental"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt]}init(){const e=this.editor,t=e.editing.view.document,i=e.plugins.get("ClipboardPipeline");let r=!1;this.listenTo(t,"keydown",(o,s)=>{r=s.shiftKey}),this.listenTo(i,"inputTransformation",(o,s)=>{if(r)return;const a=s.dataTransfer.getData("text/html");if(!a){const c=s.dataTransfer.getData("text/plain");return void(s.content=this._gfmDataProcessor.toView(c))}const l=this._parseMarkdownFromHtml(a);l&&(s.content=this._gfmDataProcessor.toView(l))})}_parseMarkdownFromHtml(e){const t=this._removeOsSpecificTags(e);if(!this._containsOnlyAllowedFirstLevelTags(t))return null;const i=this._removeFirstLevelWrapperTagsAndBrs(t);return this._containsAnyRemainingHtmlTags(i)?null:this._replaceHtmlReservedEntitiesWithCharacters(i)}_removeOsSpecificTags(e){return e.replace(/^<meta\b[^>]*>/,"").trim().replace(/^<html>/,"").replace(/<\/html>$/,"").trim().replace(/^<body>/,"").replace(/<\/body>$/,"").trim().replace(/^<!--StartFragment-->/,"").replace(/<!--EndFragment-->$/,"").trim()}_containsOnlyAllowedFirstLevelTags(e){const t=new DOMParser,{body:i}=t.parseFromString(e,"text/html");return Array.from(i.children).map(r=>r.tagName).every(r=>eP.includes(r))}_removeFirstLevelWrapperTagsAndBrs(e){const t=new DOMParser,{body:i}=t.parseFromString(e,"text/html"),r=i.querySelectorAll("br");for(const s of r)s.replaceWith(`
`);const o=i.querySelectorAll(":scope > *");for(const s of o){const a=s.cloneNode(!0);s.replaceWith(...a.childNodes)}return i.innerHTML}_containsAnyRemainingHtmlTags(e){return e.includes("<")}_replaceHtmlReservedEntitiesWithCharacters(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&nbsp;/g," ")}}function X_(n,e){const t=(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;const s=r.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(r.item),c=[...l.getChildren()].find(u=>u.getCustomProperty("media-content"));a.remove(c);const d=n.getMediaViewElement(a,s,e);a.insert(a.createPositionAt(l,0),d)};return i=>{i.on("attribute:url:media",t)}}function e0(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function t0(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function i0(n,e,t,i){n.change(r=>{const o=r.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}class iP extends G{refresh(){const e=this.editor.model,t=e.document.selection,i=t0(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=function(r){const o=r.getSelectedElement();return!!o&&o.name==="media"}(t)||function(r,o){let s=Hd(r,o).start.parent;return s.isEmpty&&!o.schema.isLimit(s)&&(s=s.parent),o.schema.checkChild(s,"media")}(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,r=t0(i);r?t.change(o=>{o.setAttribute("url",e,r)}):i0(t,e,i,!0)}}class nP{constructor(e,t){m(this,"locale"),m(this,"providerDefinitions");const i=t.providers,r=t.extraProviders||[],o=new Set(t.removeProviders),s=i.concat(r).filter(a=>{const l=a.name;return l?!o.has(l):(le("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new n0(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,r=Ne(t.url);for(const o of r){const s=this._getUrlMatches(e,o);if(s)return new n0(this.locale,e,s,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let r=e.replace(/^https?:\/\//,"");return i=r.match(t),i||(r=r.replace(/^www\./,""),i=r.match(t),i||null)}}class n0{constructor(e,t,i,r){m(this,"url"),m(this,"_locale"),m(this,"_match"),m(this,"_previewRenderer"),this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=r}getViewElement(e,t){const i={};let r;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const o=this._getPreviewHtml(t);r=e.createRawElement("div",i,(s,a)=>{a.setContentOf(s,o)})}else this.url&&(i.url=this.url),r=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new Ii,t=this._locale.t;return e.content=gA,e.viewBox="0 0 64 42",new ri({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}class ml extends C{constructor(e){super(e),m(this,"registry"),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const i=t[1],r=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${r?`?start=${r}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new nP(e.locale,e.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new iP(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const d=l.getAttribute("url");return e0(c,a,d,{elementName:s,renderMediaPreview:!!d&&o})}}),r.for("dataDowncast").add(X_(a,{elementName:s,renderMediaPreview:o})),r.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const d=l.getAttribute("url");return function(u,h,g){return h.setCustomProperty("media",!0,u),Ha(u,h,{label:g})}(e0(c,a,d,{elementName:s,renderForEditingView:!0}),c,i("media widget"))}}),r.for("editingDowncast").add(X_(a,{elementName:s,renderForEditingView:!0})),r.for("upcast").elementToElement({view:l=>["oembed",s].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{const d=l.getAttribute("url");return a.hasMedia(d)?c.createElement("media",{url:d}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{const d=l.getAttribute("data-oembed-url");return a.hasMedia(d)?c.createElement("media",{url:d}):null}}).add(l=>{l.on("element:figure",(c,d,u)=>{if(!u.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:h,modelCursor:g}=u.convertChildren(d.viewItem,d.modelCursor);d.modelRange=h,d.modelCursor=g,Ce(h.getItems())||u.consumable.revert(d.viewItem,{name:!0,classes:"media"})})})}}const rP=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class oP extends C{constructor(e){super(e),m(this,"_timeoutId"),m(this,"_positionToInsert"),this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Gd,Li,tu]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const r=t.selection.getFirstRange(),o=Qe.fromPosition(r.start);o.stickiness="toPrevious";const s=Qe.fromPosition(r.end);s.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(o,s),o.detach(),s.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(R.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,r=i.plugins.get(ml).registry,o=new Lt(e,t),s=o.getWalker({ignoreElementEnd:!0});let a="";for(const l of s)l.item.is("$textProxy")&&(a+=l.item.data);if(a=a.trim(),!a.match(rP)||!r.hasMedia(a))return void o.detach();i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Qe.fromPosition(e),this._timeoutId=R.window.setTimeout(()=>{i.model.change(l=>{this._timeoutId=null,l.remove(o),o.detach();let c=null;this._positionToInsert.root.rootName!=="$graveyard"&&(c=this._positionToInsert),i0(i.model,a,c,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(Li).requestUndoOnBackspace()},100)):o.detach()}}class sP extends N{constructor(e,t){super(t),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"urlInputView"),m(this,"_validators"),m(this,"_urlInputViewInfoDefault"),m(this,"_urlInputViewInfoTip"),this.focusTracker=new ge,this.keystrokes=new Ie,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),jr({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new Pi(this.locale,Sn),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}}class aP extends C{constructor(){super(...arguments),m(this,"_formView")}static get requires(){return[ml,Jo]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton($);return i.tooltip=!0,i.label=t("Insert media"),i}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton(Se);return i.label=t("Media"),i})}_createDialogButton(e){const t=this.editor,i=new e(t.locale),r=t.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return i.icon=pA,i.bind("isEnabled").to(r,"isEnabled"),i.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),i}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.commands.get("mediaEmbed"),r=e.locale.t,o=i.value!==void 0;if(!this._formView){const s=e.plugins.get(ml).registry;this._formView=new(Yo(sP))(function(a,l){return[c=>{if(!c.url.length)return a("The URL must not be empty.")},c=>{if(!l.hasMedia(c.url))return a("This media URL is not supported.")}]}(e.t,s),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:r("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:r(o?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}}class lP extends C{static get requires(){return[ml,aP,oP,Qr]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}const r0={"(":")","[":"]","{":"}"};class cP extends G{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention")}execute(e){const t=this.editor.model,i=t.document.selection,r=typeof e.mention=="string"?{id:e.mention}:e.mention,o=r.id,s=e.range||i.getFirstRange();if(!t.canEditAt(s))return;const a=e.text||o,l=o0({_text:a,id:o},r);if(!o.startsWith(e.marker))throw new v("mentioncommand-incorrect-id",this);t.change(c=>{const d=fi(i.getAttributes()),u=new Map(d.entries());u.set("mention",l);const h=t.insertContent(c.createText(a,u),s),g=h.start.nodeBefore,p=h.end.nodeAfter,f=p&&p.is("$text")&&p.data.startsWith(" ");let b=!1;if(g&&p&&g.is("$text")&&p.is("$text")){const k=g.data.slice(-1),w=k in r0,_=w&&p.data.startsWith(r0[k]);b=w&&_}b||f||t.insertContent(c.createText(" ",d),s.start.getShiftedBy(a.length))})}}class dP extends C{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:r=>s0(r)}}),e.conversion.for("downcast").attributeToElement({model:"mention",view:hP}),e.conversion.for("downcast").add(uP),i.registerPostFixer(r=>function(o,s,a){const l=s.differ.getChanges();let c=!1;for(const d of l){if(d.type=="attribute")continue;const u=d.position;if(d.name=="$text"){const h=u.textNode&&u.textNode.nextSibling;c=mr(u.textNode,o)||c,c=mr(h,o)||c,c=mr(u.nodeBefore,o)||c,c=mr(u.nodeAfter,o)||c}if(d.name!="$text"&&d.type=="insert"){const h=u.nodeAfter;for(const g of o.createRangeIn(h).getItems())c=mr(g,o)||c}if(d.type=="insert"&&a.isInline(d.name)){const h=u.nodeAfter&&u.nodeAfter.nextSibling;c=mr(u.nodeBefore,o)||c,c=mr(h,o)||c}}return c}(r,i,t.schema)),i.registerPostFixer(r=>function(o,s){const a=s.differ.getChanges();let l=!1;for(const c of a)if(c.type==="attribute"&&c.attributeKey!="mention"){const d=c.range.start.nodeBefore,u=c.range.end.nodeAfter;for(const h of[d,u])a0(h)&&h.getAttribute(c.attributeKey)!=c.attributeNewValue&&(o.setAttribute(c.attributeKey,c.attributeNewValue,h),l=!0)}return l}(r,i)),i.registerPostFixer(r=>function(o,s){const a=s.selection,l=a.focus;return a.isCollapsed&&a.hasAttribute("mention")&&function(c){const d=c.isAtStart;return c.nodeBefore&&c.nodeBefore.is("$text")||d}(l)?(o.removeSelectionAttribute("mention"),!0):!1}(r,i)),e.commands.add("mention",new cP(e))}}function o0(n,e){return Object.assign({uid:Tt()},n,e||{})}function s0(n,e){const t=n.getAttribute("data-mention"),i=n.getChild(0);if(i)return o0({id:t,_text:i.data},e)}function uP(n){n.on("attribute:mention",(e,t,i)=>{const r=t.attributeNewValue;if(!t.item.is("$textProxy")||!r)return;const o=t.range.start;(o.textNode||o.nodeAfter).data!=r._text&&i.consumable.consume(t.item,e.name)},{priority:"highest"})}function hP(n,{writer:e}){if(!n)return;const t={class:"mention","data-mention":n.id},i={id:n.uid,priority:20};return e.createAttributeElement("span",t,i)}function a0(n){return!n||!n.is("$text")&&!n.is("$textProxy")||!n.hasAttribute("mention")?!1:n.data!=n.getAttribute("mention")._text}function mr(n,e){return!!a0(n)&&(e.removeAttribute("mention",n),!0)}class mP extends rr{constructor(e){super(e),m(this,"selected"),m(this,"position"),this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,t=this.items.getIndex(e);this.select(t+1)}selectPrevious(){const e=this.selected,t=this.items.getIndex(e);this.select(t-1)}select(e){let t=0;e>0&&e<this.items.length?t=e:e<0&&(t=this.items.length-1);const i=this.items.get(t);this.selected!==i&&(this.selected&&this.selected.removeHighlight(),i.highlight(),this.selected=i,this._isItemVisibleInScrolledArea(i)||(this.element.scrollTop=i.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new K(this.element).contains(new K(e.element))}}class gP extends N{constructor(e,t){super(e),m(this,"domElement"),this.template=void 0,this.domElement=t,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(i,r,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class pP extends si{constructor(){super(...arguments),m(this,"item"),m(this,"marker")}highlight(){this.children.first.isOn=!0}removeHighlight(){this.children.first.isOn=!1}}const fP=[ie.arrowup,ie.arrowdown,ie.esc],bP=[ie.enter,ie.tab];class kP extends C{constructor(e){super(e),m(this,"_mentionsView"),m(this,"_mentionsConfigurations"),m(this,"_balloon"),m(this,"_items",new ot),m(this,"_lastRequested"),m(this,"_requestFeedDebounced"),this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=gi(this._requestFeed,100),e.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Vi]}init(){const e=this.editor,t=e.config.get("mention.commitKeys")||bP,i=fP.concat(t);this._balloon=e.plugins.get(Vi),e.editing.view.document.on("keydown",(o,s)=>{var a;a=s.keyCode,i.includes(a)&&this._isUIVisible&&(s.preventDefault(),o.stop(),s.keyCode==ie.arrowdown&&this._mentionsView.selectNext(),s.keyCode==ie.arrowup&&this._mentionsView.selectPrevious(),t.includes(s.keyCode)&&this._mentionsView.executeSelected(),s.keyCode==ie.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),Tn({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=e.config.get("mention.feeds");for(const o of r){const{feed:s,marker:a,dropdownLimit:l}=o;if(!vP(a))throw new v("mentionconfig-incorrect-marker",null,{marker:a});const c={marker:a,feedCallback:typeof s=="function"?s.bind(this.editor):_P(s),itemRenderer:o.itemRenderer,dropdownLimit:l};this._mentionsConfigurations.set(a,c)}this._setupTextWatcher(r),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(o,s)=>this._handleFeedResponse(s)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker())}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,t=new mP(e);return t.items.bindTo(this._items).using(i=>{const{item:r,marker:o}=i,{dropdownLimit:s}=this._mentionsConfigurations.get(o),a=s||this.editor.config.get("mention.dropdownLimit")||10;if(t.items.length>=a)return null;const l=new pP(e),c=this._renderItem(r,o);return c.delegate("execute").to(l),l.children.add(c),l.item=r,l.marker=o,l.on("execute",()=>{t.fire("execute",{item:r,marker:o})}),l}),t.on("execute",(i,r)=>{const o=this.editor,s=o.model,a=r.item,l=r.marker,c=o.model.markers.get("mention"),d=s.createPositionAt(s.document.selection.focus),u=s.createPositionAt(c.getStart()),h=s.createRange(u,d);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:a,text:a.text,marker:l,range:h}),o.editing.view.focus()}),t}_getItemRenderer(e){const{itemRenderer:t}=this._mentionsConfigurations.get(e);return t}_requestFeed(e,t){this._lastRequested=t;const{feedCallback:i}=this._mentionsConfigurations.get(e),r=i(t);r instanceof Promise?r.then(o=>{this._lastRequested==t?this.fire("requestFeed:response",{feed:o,marker:e,feedText:t}):this.fire("requestFeed:discarded",{feed:o,marker:e,feedText:t})}).catch(o=>{this.fire("requestFeed:error",{error:o}),le("mention-feed-callback-error",{marker:e})}):this.fire("requestFeed:response",{feed:r,marker:e,feedText:t})}_setupTextWatcher(e){const t=this.editor,i=e.map(s=>({...s,pattern:c0(s.marker,s.minimumCharacters||0)})),r=new ak(t.model,function(s){return a=>{const l=l0(s,a);if(!l)return!1;let c=0;l.position!==0&&(c=l.position-1);const d=a.substring(c);return l.pattern.test(d)}}(i));r.on("matched",(s,a)=>{const l=l0(i,a.text),c=t.model.document.selection.focus,d=t.model.createPositionAt(c.parent,l.position);if(function(b){const k=b.textNode&&b.textNode.hasAttribute("mention"),w=b.nodeBefore;return k||w&&w.is("$text")&&w.hasAttribute("mention")}(c)||function(b){const k=b.nodeAfter;return k&&k.is("$text")&&k.hasAttribute("mention")}(d))return void this._hideUIAndRemoveMarker();const u=function(b,k){let w=0;b.position!==0&&(w=b.position-1);const _=c0(b.marker,0);return k.substring(w).match(_)[2]}(l,a.text),h=l.marker.length+u.length,g=c.getShiftedBy(-h),p=c.getShiftedBy(-u.length),f=t.model.createRange(g,p);if(Nu(t)){const b=t.model.markers.get("mention");t.model.change(k=>{k.updateMarker(b,{range:f})})}else t.model.change(b=>{b.addMarker("mention",{range:f,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(l.marker,u)}),r.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=t.commands.get("mention");return r.bind("isEnabled").to(o),r}_handleFeedResponse(e){const{feed:t,marker:i}=e;if(!Nu(this.editor))return;this._items.clear();for(const o of t){const s=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:s,marker:i})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0,balloonClassName:"ck-mention-balloon"}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),Nu(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,t){const i=this.editor;let r,o=e.id;const s=this._getItemRenderer(t);if(s){const a=s(e);typeof a!="string"?r=new gP(i.locale,a):o=a}if(!r){const a=new $(i.locale);a.label=o,a.withText=!0,r=a}return r}_getBalloonPanelPositionData(e,t){const i=this.editor,r=i.editing,o=r.view.domConverter,s=r.mapper;return{target:()=>{let a=e.getRange();a.start.root.rootName=="$graveyard"&&(a=i.model.document.selection.getFirstRange());const l=s.toViewRange(a);return K.getDomRangeRects(o.viewRangeToDom(l)).pop()},limiter:()=>{const a=this.editor.editing.view,l=a.document.selection.editableElement;return l?a.domConverter.mapViewToDom(l.root):null},positions:wP(t,i.locale.uiLanguageDirection)}}}function wP(n,e){const t={caret_se:i=>({top:i.bottom+3,left:i.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(i,r)=>({top:i.top-r.height-3,left:i.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(i,r)=>({top:i.bottom+3,left:i.right-r.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(i,r)=>({top:i.top-r.height-3,left:i.right-r.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(t,n)?[t[n]]:e!=="rtl"?[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw]:[t.caret_sw,t.caret_se,t.caret_nw,t.caret_ne]}function l0(n,e){let t;for(const i of n){const r=e.lastIndexOf(i.marker);r>0&&!e.substring(r-1).match(i.pattern)||(!t||r>=t.position)&&(t={marker:i.marker,position:r,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return t}function c0(n,e){const t=e==0?"*":`{${e},}`,i=W.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`;return n=n.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&"),new RegExp(`(?:^|[ ${i}])(${n})(.${t})$`,"u")}function _P(n){return e=>n.filter(t=>(typeof t=="string"?t:String(t.id)).toLowerCase().includes(e.toLowerCase()))}function vP(n){return!!n}function Nu(n){return n.model.markers.has("mention")}class yP extends C{toMentionAttribute(e,t){return s0(e,t)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[dP,kP]}}function d0(n){return n!==void 0&&n.endsWith("px")}function ro(n){return n.toFixed(2).replace(/\.?0+$/,"")+"px"}function xP(n,e,t){if(!n.childCount)return;const i=new Si(n.document),r=function(a,l){const c=l.createRangeIn(a),d=[],u=new Set;for(const h of c.getItems()){if(!h.is("element")||!h.name.match(/^(p|h\d+|li|div)$/))continue;let g=MP(h);if(g===void 0||parseFloat(g)!=0||Array.from(h.getClassNames()).find(p=>p.startsWith("MsoList"))||(g=void 0),h.hasStyle("mso-list")||g!==void 0&&u.has(g)){const p=IP(h);d.push({element:h,id:p.id,order:p.order,indent:p.indent,marginLeft:g}),g!==void 0&&u.add(g)}else u.clear()}return d}(n,i);if(!r.length)return;const o={},s=[];for(const a of r)if(a.indent!==void 0){CP(a)||(s.length=0);const l=`${a.id}:${a.indent}`,c=Math.min(a.indent-1,s.length);if(c<s.length&&s[c].id!==a.id&&(s.length=c),c<s.length-1)s.length=c+1;else{const u=TP(a,e);if(c>s.length-1||s[c].listElement.name!=u.type){c==0&&u.type=="ol"&&a.id!==void 0&&o[l]&&(u.startIndex=o[l]);const h=SP(u,i,t);if(d0(a.marginLeft)&&(c==0||d0(s[c-1].marginLeft))){let g=a.marginLeft;c>0&&(g=ro(parseFloat(g)-parseFloat(s[c-1].marginLeft))),i.setStyle("padding-left",g,h)}if(s.length==0){const g=a.element.parent,p=g.getChildIndex(a.element)+1;i.insertChild(p,h,g)}else{const g=s[c-1].listItemElements;i.appendChild(h,g[g.length-1])}s[c]={...a,listElement:h,listItemElements:[]},c==0&&a.id!==void 0&&(o[l]=u.startIndex||1)}}const d=a.element.name=="li"?a.element:i.createElement("li");i.appendChild(d,s[c].listElement),s[c].listItemElements.push(d),c==0&&a.id!==void 0&&o[l]++,a.element!=d&&i.appendChild(a.element,d),PP(a.element,i),i.removeStyle("text-indent",a.element),i.removeStyle("margin-left",a.element)}else{const l=s.find(c=>c.marginLeft==a.marginLeft);if(l){const c=l.listItemElements;i.appendChild(a.element,c[c.length-1]),i.removeStyle("margin-left",a.element)}else s.length=0}}function CP(n){const e=n.element.previousSibling;return AP(e||n.element.parent)}function AP(n){return n.is("element","ol")||n.is("element","ul")}function TP(n,e){const t=new RegExp(`@list l${n.id}:level${n.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,r=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=new RegExp(`@list\\s+l${n.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),s=new RegExp(`@list l${n.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=o.exec(e),l=s.exec(e),c=a&&!l,d=t.exec(e);let u="decimal",h="ol",g=null;if(d&&d[1]){const p=i.exec(d[1]);if(p&&p[1]&&(u=p[1].trim(),h=u!=="bullet"&&u!=="image"?"ol":"ul"),u==="bullet"){const f=function(b){if(b.name=="li"&&b.parent.name=="ul"&&b.parent.hasAttribute("type"))return b.parent.getAttribute("type");const k=function(_){if(_.getChild(0).is("$text"))return null;for(const y of _.getChildren()){if(!y.is("element","span"))continue;const x=y.getChild(0);if(x)return x.is("$text")?x:x.getChild(0)}return null}(b);if(!k)return null;const w=k._data;return w==="o"?"circle":w==="\xB7"?"disc":w==="\xA7"?"square":null}(n.element);f&&(u=f)}else{const f=r.exec(d[1]);f&&f[1]&&(g=parseInt(f[1]))}c&&(h="ol")}return{type:h,startIndex:g,style:EP(u),isLegalStyleList:c}}function EP(n){if(n.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(n){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return n;default:return null}}function SP(n,e,t){const i=e.createElement(n.type);return n.style&&e.setStyle("list-style-type",n.style,i),n.startIndex&&n.startIndex>1&&e.setAttribute("start",n.startIndex,i),n.isLegalStyleList&&t&&e.addClass("legal-list",i),i}function IP(n){const e=n.getStyle("mso-list");if(e===void 0)return{};const t=e.match(/(^|\s{1,100})l(\d+)/i),i=e.match(/\s{0,100}lfo(\d+)/i),r=e.match(/\s{0,100}level(\d+)/i);return t&&i&&r?{id:t[2],order:i[1],indent:parseInt(r[1])}:{indent:1}}function PP(n,e){const t=new Gt({name:"span",styles:{"mso-list":"Ignore"}}),i=e.createRangeIn(n);for(const r of i)r.type==="elementStart"&&t.match(r.item)&&e.remove(r.item)}function MP(n){const e=n.getStyle("margin-left");return e===void 0||e.endsWith("px")?e:function(t){const i=parseFloat(t);return t.endsWith("pt")?ro(96*i/72):t.endsWith("pc")?ro(12*i*96/72):t.endsWith("in")?ro(96*i):t.endsWith("cm")?ro(96*i/2.54):t.endsWith("mm")?ro(i/10*96/2.54):t}(e)}function VP(n,e){if(!n.childCount)return;const t=new Si(n.document),i=function(o,s){const a=s.createRangeIn(o),l=new Gt({name:/v:(.+)/}),c=[];for(const d of a){if(d.type!="elementStart")continue;const u=d.item,h=u.previousSibling,g=h&&h.is("element")?h.name:null,p=["Chart"],f=l.match(u),b=u.getAttribute("o:gfxdata"),k=g==="v:shapetype",w=b&&p.some(_=>u.getAttribute("id").includes(_));f&&b&&!k&&!w&&c.push(d.item.getAttribute("id"))}return c}(n,t);(function(o,s,a){const l=a.createRangeIn(s),c=new Gt({name:"img"}),d=[];for(const u of l)if(u.item.is("element")&&c.match(u.item)){const h=u.item,g=h.getAttribute("v:shapes")?h.getAttribute("v:shapes").split(" "):[];g.length&&g.every(p=>o.indexOf(p)>-1)?d.push(h):h.getAttribute("src")||d.push(h)}for(const u of d)a.remove(u)})(i,n,t),function(o,s,a){const l=a.createRangeIn(s),c=[];for(const h of l)if(h.type=="elementStart"&&h.item.is("element","v:shape")){const g=h.item.getAttribute("id");if(o.includes(g))continue;d(h.item.parent.getChildren(),g)||c.push(h.item)}for(const h of c){const g={src:u(h)};h.hasAttribute("alt")&&(g.alt=h.getAttribute("alt"));const p=a.createElement("img",g);a.insertChild(h.index+1,p,h.parent)}function d(h,g){for(const p of h)if(p.is("element")&&(p.name=="img"&&p.getAttribute("v:shapes")==g||d(p.getChildren(),g)))return!0;return!1}function u(h){for(const g of h.getChildren())if(g.is("element")&&g.getAttribute("src"))return g.getAttribute("src")}}(i,n,t),function(o,s){const a=s.createRangeIn(o),l=new Gt({name:/v:(.+)/}),c=[];for(const d of a)d.type=="elementStart"&&l.match(d.item)&&c.push(d.item);for(const d of c)s.remove(d)}(n,t);const r=function(o,s){const a=s.createRangeIn(o),l=new Gt({name:"img"}),c=[];for(const d of a)d.item.is("element")&&l.match(d.item)&&d.item.getAttribute("src").startsWith("file://")&&c.push(d.item);return c}(n,t);r.length&&function(o,s,a){if(o.length===s.length)for(let l=0;l<o.length;l++){const c=`data:${s[l].type};base64,${LP(s[l].hex)}`;a.setAttribute("src",c,o[l])}}(r,function(o){if(!o)return[];const s=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,a=new RegExp("(?:("+s.source+"))([\\da-fA-F\\s]+)\\}","g"),l=o.match(a),c=[];if(l)for(const d of l){let u=!1;d.includes("\\pngblip")?u="image/png":d.includes("\\jpegblip")&&(u="image/jpeg"),u&&c.push({hex:d.replace(s,"").replace(/[^\da-fA-F]/g,""),type:u})}return c}(e),t)}function LP(n){return btoa(n.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}const OP=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,NP=/xmlns:o="urn:schemas-microsoft-com/i;class RP{constructor(e,t=!1){m(this,"document"),m(this,"hasMultiLevelListPlugin"),this.document=e,this.hasMultiLevelListPlugin=t}isActive(e){return OP.test(e)||NP.test(e)}execute(e){const t=new Si(this.document),{body:i,stylesString:r}=e._parsedData;(function(o,s){const a=[];for(const l of s.createRangeIn(o)){const c=l.item;c.is("element","a")&&!c.hasAttribute("href")&&(c.hasAttribute("id")||c.hasAttribute("name"))&&a.push(c)}for(const l of a){const c=l.parent.getChildIndex(l)+1,d=l.getChildren();s.insertChild(c,d,l.parent)}})(i,t),xP(i,r,this.hasMultiLevelListPlugin),VP(i,e.dataTransfer.getData("text/rtf")),function(o){const s=[],a=new Si(o.document);for(const{item:l}of a.createRangeIn(o))if(l.is("element")){for(const c of l.getClassNames())/\bmso/gi.exec(c)&&a.removeClass(c,l);for(const c of l.getStyleNames())/\bmso/gi.exec(c)&&a.removeStyle(c,l);(l.is("element","w:sdt")||l.is("element","w:sdtpr")&&l.isEmpty||l.is("element","o:p")&&l.isEmpty)&&s.push(l)}for(const l of s){const c=l.parent,d=c.getChildIndex(l);a.insertChild(d,l.getChildren(),c),a.remove(l)}}(i),e.content=i}}function u0(n,e,t,{blockElements:i,inlineObjectElements:r}){let o=t.createPositionAt(n,e=="forward"?"after":"before");return o=o.getLastMatchingPosition(({item:s})=>s.is("element")&&!i.includes(s.name)&&!r.includes(s.name),{direction:e}),e=="forward"?o.nodeAfter:o.nodeBefore}function h0(n,e){return!!n&&n.is("element")&&e.includes(n.name)}const zP=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class DP{constructor(e){m(this,"document"),this.document=e}isActive(e){return zP.test(e)}execute(e){const t=new Si(this.document),{body:i}=e._parsedData;(function(r,o){for(const s of r.getChildren())if(s.is("element","b")&&s.getStyle("font-weight")==="normal"){const a=r.getChildIndex(s);o.remove(s),o.insertChild(a,s.getChildren(),r)}})(i,t),function(r,o){for(const s of o.createRangeIn(r)){const a=s.item;if(a.is("element","li")){const l=a.getChild(0);l&&l.is("element","p")&&o.unwrapElement(l)}}}(i,t),function(r,o){const s=new ha(o.document.stylesProcessor),a=new pa(s,{renderingMode:"data"}),l=a.blockElements,c=a.inlineObjectElements,d=[];for(const u of o.createRangeIn(r)){const h=u.item;if(h.is("element","br")){const g=u0(h,"forward",o,{blockElements:l,inlineObjectElements:c}),p=u0(h,"backward",o,{blockElements:l,inlineObjectElements:c}),f=h0(g,l);(h0(p,l)||f)&&d.push(h)}}for(const u of d)u.hasClass("Apple-interchange-newline")?o.remove(u):o.replace(u,o.createElement("p"))}(i,t),e.content=i}}const BP=/<google-sheets-html-origin/i;class FP{constructor(e){m(this,"document"),this.document=e}isActive(e){return BP.test(e)}execute(e){const t=new Si(this.document),{body:i}=e._parsedData;(function(r,o){for(const s of r.getChildren())if(s.is("element","google-sheets-html-origin")){const a=r.getChildIndex(s);o.remove(s),o.insertChild(a,s.getChildren(),r)}})(i,t),function(r,o){for(const s of r.getChildren())s.is("element","table")&&s.hasAttribute("xmlns")&&o.removeAttribute("xmlns",s)}(i,t),function(r,o){for(const s of r.getChildren())s.is("element","table")&&s.getStyle("width")==="0px"&&o.removeStyle("width",s)}(i,t),function(r,o){for(const s of Array.from(r.getChildren()))s.is("element","style")&&o.remove(s)}(i,t),e.content=i}}function m0(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length===1?" ":Array(t.length+1).join("\xA0 ").substr(0,t.length))}function jP(n,e){const t=new DOMParser,i=function(l){return m0(m0(l)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g,"\xA0</").replace(/ <o:p><\/o:p>/g,"\xA0<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}(function(l){const c="</body>",d="</html>",u=l.indexOf(c);if(u<0)return l;const h=l.indexOf(d,u+c.length);return l.substring(0,u+c.length)+(h>=0?l.substring(h):"")}(n=(n=n.replace(/<!--\[if gte vml 1]>/g,"")).replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,""))),r=t.parseFromString(i,"text/html");(function(l){l.querySelectorAll("span[style*=spacerun]").forEach(c=>{const d=c,u=d.innerText.length||0;d.innerText=Array(u+1).join("\xA0 ").substr(0,u)})})(r);const o=r.body.innerHTML,s=function(l,c){const d=new ha(c),u=new pa(d,{renderingMode:"data"}),h=l.createDocumentFragment(),g=l.body.childNodes;for(;g.length>0;)h.appendChild(g[0]);return u.domToView(h,{skipComments:!0})}(r,e),a=function(l){const c=[],d=[],u=Array.from(l.getElementsByTagName("style"));for(const h of u)h.sheet&&h.sheet.cssRules&&h.sheet.cssRules.length&&(c.push(h.sheet),d.push(h.innerHTML));return{styles:c,stylesString:d.join(" ")}}(r);return{body:s,bodyString:o,styles:a.styles,stylesString:a.stylesString}}class $P extends C{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt]}init(){const e=this.editor,t=e.plugins.get("ClipboardPipeline"),i=e.editing.view.document,r=[],o=this.editor.plugins.has("MultiLevelList");r.push(new RP(i,o)),r.push(new DP(i)),r.push(new FP(i)),t.on("inputTransformation",(s,a)=>{if(a._isTransformedWithPasteFromOffice||e.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const l=a.dataTransfer.getData("text/html"),c=r.find(d=>d.isActive(l));c&&(a._parsedData||(a._parsedData=jP(l,i.stylesProcessor)),c.execute(a),a._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}const gl="removeFormat";class HP extends C{static get pluginName(){return"RemoveFormatUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add(gl,()=>{const t=this._createButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add(`menuBar:${gl}`,()=>this._createButton(Se))}_createButton(e){const t=this.editor,i=t.locale,r=t.commands.get(gl),o=new e(t.locale),s=i.t;return o.set({label:s("Remove Format"),icon:IA}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute(gl),t.editing.view.focus()}),o}}class UP extends G{refresh(){const e=this.editor.model;this.isEnabled=!!Ce(this._getFormattingItems(e.document.selection,e.schema))}execute(){const e=this.editor.model,t=e.schema;e.change(i=>{for(const r of this._getFormattingItems(e.document.selection,t))if(r.is("selection"))for(const o of this._getFormattingAttributes(r,t))i.removeSelectionAttribute(o);else{const o=i.createRangeOn(r);for(const s of this._getFormattingAttributes(r,t))i.removeAttribute(s,o)}})}*_getFormattingItems(e,t){const i=r=>!!Ce(this._getFormattingAttributes(r,t));for(const r of e.getRanges())for(const o of r.getItems())!t.isBlock(o)&&i(o)&&(yield o);for(const r of e.getSelectedBlocks())i(r)&&(yield r);i(e)&&(yield e)}*_getFormattingAttributes(e,t){for(const[i]of e.getAttributes()){const r=t.getAttributeProperties(i);r&&r.isFormatting&&(yield i)}}}class WP extends C{static get pluginName(){return"RemoveFormatEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.commands.add("removeFormat",new UP(e))}}class qP extends C{static get requires(){return[WP,HP]}static get pluginName(){return"RemoveFormat"}static get isOfficialPlugin(){return!0}}class GP extends N{constructor(e){super(e),m(this,"tiles"),m(this,"focusTracker"),m(this,"keystrokes"),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new ge,this.keystrokes=new Ie,Qo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>R.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,t){const i=new $(this.locale);return i.set({label:e,withText:!0,class:"ck-character-grid__tile"}),i.extendTemplate({attributes:{title:t},on:{mouseover:i.bindTemplate.to("mouseover"),focus:i.bindTemplate.to("focus")}}),i.on("mouseover",()=>{this.fire("tileHover",{name:t,character:e})}),i.on("focus",()=>{this.fire("tileFocus",{name:t,character:e})}),i.on("execute",()=>{this.fire("execute",{name:t,character:e})}),i}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:t,removed:i})=>{if(t.length>0)for(const r of t)this.focusTracker.add(r.element);if(i.length>0)for(const r of i)this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class ZP extends N{constructor(e){super(e);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",KP),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",i=>i||"\u200B")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function KP(n){return n===null?"":"U+"+("0000"+n.codePointAt(0).toString(16)).slice(-4)}class YP extends N{constructor(e,t,i,r){super(e),m(this,"items"),m(this,"focusTracker"),m(this,"keystrokes"),m(this,"_focusCycler"),m(this,"categoriesView"),m(this,"gridView"),m(this,"infoView"),this.categoriesView=t,this.gridView=i,this.infoView=r,this.items=this.createCollection(),this.focusTracker=new ge,this.keystrokes=new Ie,this._focusCycler=new ct({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class QP extends N{constructor(e,t){super(e),m(this,"_groupNames"),m(this,"_dropdownView"),this.set("currentGroupName",Array.from(t.entries())[0][0]),this._groupNames=t,this._dropdownView=new Pi(e,kT),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const e=new ot;for(const[i,r]of this._groupNames){const o={type:"button",model:new en({name:i,label:r,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(this,"currentGroupName",s=>s===i),e.add(o)}const t=(0,this.locale.t)("Category");this._dropdownView.set({label:t,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:t,ariaLabel:t,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",i=>this._groupNames.get(i)),this._dropdownView.fieldView.on("execute",({source:i})=>{this.currentGroupName=i.name}),En(this._dropdownView.fieldView,e,{ariaLabel:t,role:"menu"})}}const Ru="All";class JP extends C{constructor(e){super(e),m(this,"_characters"),m(this,"_groups"),m(this,"_allSpecialCharactersGroupLabel");const t=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=t("All")}static get requires(){return[Na,Jo]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("specialCharacters",()=>{const t=this._createDialogButton($);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(Se))}addItems(e,t,i={label:e}){if(e===Ru)throw new v("special-character-invalid-group-name",null);const r=this._getGroup(e,i.label);for(const o of t)r.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const e=Array.from(this._groups.keys()),t=this.editor.config.get("specialCharacters.order")||[],i=t.find(r=>!e.includes(r));if(i)throw new v("special-character-invalid-order-group-name",null,{invalidGroup:i});return new Set([...t,...e])}getCharactersForGroup(e){if(e===Ru)return new Set(this._characters.keys());const t=this._groups.get(e);return t?t.items:void 0}getCharacter(e){return this._characters.get(e)}_getGroup(e,t){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:t}),this._groups.get(e)}_updateGrid(e,t){t.tiles.clear();const i=this.getCharactersForGroup(e);for(const r of i){const o=this.getCharacter(r);t.tiles.add(t.createTile(o,r))}}_createDropdownPanelContent(e){const t=Array.from(this.getGroups()).map(a=>[a,this._groups.get(a).label]),i=new Map([[Ru,this._allSpecialCharactersGroupLabel],...t]),r=new QP(e,i),o=new GP(e),s=new ZP(e);return o.on("tileHover",(a,l)=>{s.set(l)}),o.on("tileFocus",(a,l)=>{s.set(l)}),r.on("change:currentGroupName",(a,l,c)=>{this._updateGrid(c,o)}),this._updateGrid(r.currentGroupName,o),{categoriesView:r,gridView:o,infoView:s}}_createDialogButton(e){const t=this.editor,i=t.locale,r=new e(t.locale),o=t.commands.get("insertText"),s=i.t,a=this.editor.plugins.get("Dialog");return r.set({label:s("Special characters"),icon:LA,isToggleable:!0}),r.bind("isOn").to(a,"id",l=>l==="specialCharacters"),r.bind("isEnabled").to(o,"isEnabled"),r.on("execute",()=>{a.id!=="specialCharacters"?this._showDialog():a.hide()}),r}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale,r=i.t,{categoriesView:o,gridView:s,infoView:a}=this._createDropdownPanelContent(i),l=new YP(i,o,s,a);s.on("execute",(c,d)=>{e.execute("insertText",{text:d.character})}),t.show({id:"specialCharacters",title:r("Special characters"),className:"ck-special-characters",content:l,position:oi.EDITOR_TOP_SIDE})}}class g0 extends C{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Arrows",[{title:t("leftwards simple arrow"),character:"\u2190"},{title:t("rightwards simple arrow"),character:"\u2192"},{title:t("upwards simple arrow"),character:"\u2191"},{title:t("downwards simple arrow"),character:"\u2193"},{title:t("leftwards double arrow"),character:"\u21D0"},{title:t("rightwards double arrow"),character:"\u21D2"},{title:t("upwards double arrow"),character:"\u21D1"},{title:t("downwards double arrow"),character:"\u21D3"},{title:t("leftwards dashed arrow"),character:"\u21E0"},{title:t("rightwards dashed arrow"),character:"\u21E2"},{title:t("upwards dashed arrow"),character:"\u21E1"},{title:t("downwards dashed arrow"),character:"\u21E3"},{title:t("leftwards arrow to bar"),character:"\u21E4"},{title:t("rightwards arrow to bar"),character:"\u21E5"},{title:t("upwards arrow to bar"),character:"\u2912"},{title:t("downwards arrow to bar"),character:"\u2913"},{title:t("up down arrow with base"),character:"\u21A8"},{title:t("back with leftwards arrow above"),character:"\u{1F519}"},{title:t("end with leftwards arrow above"),character:"\u{1F51A}"},{title:t("on with exclamation mark with left right arrow above"),character:"\u{1F51B}"},{title:t("soon with rightwards arrow above"),character:"\u{1F51C}"},{title:t("top with upwards arrow above"),character:"\u{1F51D}"}],{label:t("Arrows")})}}class p0 extends C{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Text",[{character:"\u2039",title:t("Single left-pointing angle quotation mark")},{character:"\u203A",title:t("Single right-pointing angle quotation mark")},{character:"\xAB",title:t("Left-pointing double angle quotation mark")},{character:"\xBB",title:t("Right-pointing double angle quotation mark")},{character:"\u2018",title:t("Left single quotation mark")},{character:"\u2019",title:t("Right single quotation mark")},{character:"\u201C",title:t("Left double quotation mark")},{character:"\u201D",title:t("Right double quotation mark")},{character:"\u201A",title:t("Single low-9 quotation mark")},{character:"\u201E",title:t("Double low-9 quotation mark")},{character:"\xA1",title:t("Inverted exclamation mark")},{character:"\xBF",title:t("Inverted question mark")},{character:"\u2025",title:t("Two dot leader")},{character:"\u2026",title:t("Horizontal ellipsis")},{character:"\u2021",title:t("Double dagger")},{character:"\u2030",title:t("Per mille sign")},{character:"\u2031",title:t("Per ten thousand sign")},{character:"\u203C",title:t("Double exclamation mark")},{character:"\u2048",title:t("Question exclamation mark")},{character:"\u2049",title:t("Exclamation question mark")},{character:"\u2047",title:t("Double question mark")},{character:"\xA9",title:t("Copyright sign")},{character:"\xAE",title:t("Registered sign")},{character:"\u2122",title:t("Trade mark sign")},{character:"\xA7",title:t("Section sign")},{character:"\xB6",title:t("Paragraph sign")},{character:"\u204B",title:t("Reversed paragraph sign")}],{label:t("Text")})}}class f0 extends C{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:t("Less-than sign")},{character:">",title:t("Greater-than sign")},{character:"\u2264",title:t("Less-than or equal to")},{character:"\u2265",title:t("Greater-than or equal to")},{character:"\u2013",title:t("En dash")},{character:"\u2014",title:t("Em dash")},{character:"\xAF",title:t("Macron")},{character:"\u203E",title:t("Overline")},{character:"\xB0",title:t("Degree sign")},{character:"\u2212",title:t("Minus sign")},{character:"\xB1",title:t("Plus-minus sign")},{character:"\xF7",title:t("Division sign")},{character:"\u2044",title:t("Fraction slash")},{character:"\xD7",title:t("Multiplication sign")},{character:"\u0192",title:t("Latin small letter f with hook")},{character:"\u222B",title:t("Integral")},{character:"\u2211",title:t("N-ary summation")},{character:"\u221E",title:t("Infinity")},{character:"\u221A",title:t("Square root")},{character:"\u223C",title:t("Tilde operator")},{character:"\u2245",title:t("Approximately equal to")},{character:"\u2248",title:t("Almost equal to")},{character:"\u2260",title:t("Not equal to")},{character:"\u2261",title:t("Identical to")},{character:"\u2208",title:t("Element of")},{character:"\u2209",title:t("Not an element of")},{character:"\u220B",title:t("Contains as member")},{character:"\u220F",title:t("N-ary product")},{character:"\u2227",title:t("Logical and")},{character:"\u2228",title:t("Logical or")},{character:"\xAC",title:t("Not sign")},{character:"\u2229",title:t("Intersection")},{character:"\u222A",title:t("Union")},{character:"\u2202",title:t("Partial differential")},{character:"\u2200",title:t("For all")},{character:"\u2203",title:t("There exists")},{character:"\u2205",title:t("Empty set")},{character:"\u2207",title:t("Nabla")},{character:"\u2217",title:t("Asterisk operator")},{character:"\u221D",title:t("Proportional to")},{character:"\u2220",title:t("Angle")},{character:"\xBC",title:t("Vulgar fraction one quarter")},{character:"\xBD",title:t("Vulgar fraction one half")},{character:"\xBE",title:t("Vulgar fraction three quarters")}],{label:t("Mathematical")})}}class b0 extends C{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Latin",[{character:"\u0100",title:t("Latin capital letter a with macron")},{character:"\u0101",title:t("Latin small letter a with macron")},{character:"\u0102",title:t("Latin capital letter a with breve")},{character:"\u0103",title:t("Latin small letter a with breve")},{character:"\u0104",title:t("Latin capital letter a with ogonek")},{character:"\u0105",title:t("Latin small letter a with ogonek")},{character:"\u0106",title:t("Latin capital letter c with acute")},{character:"\u0107",title:t("Latin small letter c with acute")},{character:"\u0108",title:t("Latin capital letter c with circumflex")},{character:"\u0109",title:t("Latin small letter c with circumflex")},{character:"\u010A",title:t("Latin capital letter c with dot above")},{character:"\u010B",title:t("Latin small letter c with dot above")},{character:"\u010C",title:t("Latin capital letter c with caron")},{character:"\u010D",title:t("Latin small letter c with caron")},{character:"\u010E",title:t("Latin capital letter d with caron")},{character:"\u010F",title:t("Latin small letter d with caron")},{character:"\u0110",title:t("Latin capital letter d with stroke")},{character:"\u0111",title:t("Latin small letter d with stroke")},{character:"\u0112",title:t("Latin capital letter e with macron")},{character:"\u0113",title:t("Latin small letter e with macron")},{character:"\u0114",title:t("Latin capital letter e with breve")},{character:"\u0115",title:t("Latin small letter e with breve")},{character:"\u0116",title:t("Latin capital letter e with dot above")},{character:"\u0117",title:t("Latin small letter e with dot above")},{character:"\u0118",title:t("Latin capital letter e with ogonek")},{character:"\u0119",title:t("Latin small letter e with ogonek")},{character:"\u011A",title:t("Latin capital letter e with caron")},{character:"\u011B",title:t("Latin small letter e with caron")},{character:"\u011C",title:t("Latin capital letter g with circumflex")},{character:"\u011D",title:t("Latin small letter g with circumflex")},{character:"\u011E",title:t("Latin capital letter g with breve")},{character:"\u011F",title:t("Latin small letter g with breve")},{character:"\u0120",title:t("Latin capital letter g with dot above")},{character:"\u0121",title:t("Latin small letter g with dot above")},{character:"\u0122",title:t("Latin capital letter g with cedilla")},{character:"\u0123",title:t("Latin small letter g with cedilla")},{character:"\u0124",title:t("Latin capital letter h with circumflex")},{character:"\u0125",title:t("Latin small letter h with circumflex")},{character:"\u0126",title:t("Latin capital letter h with stroke")},{character:"\u0127",title:t("Latin small letter h with stroke")},{character:"\u0128",title:t("Latin capital letter i with tilde")},{character:"\u0129",title:t("Latin small letter i with tilde")},{character:"\u012A",title:t("Latin capital letter i with macron")},{character:"\u012B",title:t("Latin small letter i with macron")},{character:"\u012C",title:t("Latin capital letter i with breve")},{character:"\u012D",title:t("Latin small letter i with breve")},{character:"\u012E",title:t("Latin capital letter i with ogonek")},{character:"\u012F",title:t("Latin small letter i with ogonek")},{character:"\u0130",title:t("Latin capital letter i with dot above")},{character:"\u0131",title:t("Latin small letter dotless i")},{character:"\u0132",title:t("Latin capital ligature ij")},{character:"\u0133",title:t("Latin small ligature ij")},{character:"\u0134",title:t("Latin capital letter j with circumflex")},{character:"\u0135",title:t("Latin small letter j with circumflex")},{character:"\u0136",title:t("Latin capital letter k with cedilla")},{character:"\u0137",title:t("Latin small letter k with cedilla")},{character:"\u0138",title:t("Latin small letter kra")},{character:"\u0139",title:t("Latin capital letter l with acute")},{character:"\u013A",title:t("Latin small letter l with acute")},{character:"\u013B",title:t("Latin capital letter l with cedilla")},{character:"\u013C",title:t("Latin small letter l with cedilla")},{character:"\u013D",title:t("Latin capital letter l with caron")},{character:"\u013E",title:t("Latin small letter l with caron")},{character:"\u013F",title:t("Latin capital letter l with middle dot")},{character:"\u0140",title:t("Latin small letter l with middle dot")},{character:"\u0141",title:t("Latin capital letter l with stroke")},{character:"\u0142",title:t("Latin small letter l with stroke")},{character:"\u0143",title:t("Latin capital letter n with acute")},{character:"\u0144",title:t("Latin small letter n with acute")},{character:"\u0145",title:t("Latin capital letter n with cedilla")},{character:"\u0146",title:t("Latin small letter n with cedilla")},{character:"\u0147",title:t("Latin capital letter n with caron")},{character:"\u0148",title:t("Latin small letter n with caron")},{character:"\u0149",title:t("Latin small letter n preceded by apostrophe")},{character:"\u014A",title:t("Latin capital letter eng")},{character:"\u014B",title:t("Latin small letter eng")},{character:"\u014C",title:t("Latin capital letter o with macron")},{character:"\u014D",title:t("Latin small letter o with macron")},{character:"\u014E",title:t("Latin capital letter o with breve")},{character:"\u014F",title:t("Latin small letter o with breve")},{character:"\u0150",title:t("Latin capital letter o with double acute")},{character:"\u0151",title:t("Latin small letter o with double acute")},{character:"\u0152",title:t("Latin capital ligature oe")},{character:"\u0153",title:t("Latin small ligature oe")},{character:"\u0154",title:t("Latin capital letter r with acute")},{character:"\u0155",title:t("Latin small letter r with acute")},{character:"\u0156",title:t("Latin capital letter r with cedilla")},{character:"\u0157",title:t("Latin small letter r with cedilla")},{character:"\u0158",title:t("Latin capital letter r with caron")},{character:"\u0159",title:t("Latin small letter r with caron")},{character:"\u015A",title:t("Latin capital letter s with acute")},{character:"\u015B",title:t("Latin small letter s with acute")},{character:"\u015C",title:t("Latin capital letter s with circumflex")},{character:"\u015D",title:t("Latin small letter s with circumflex")},{character:"\u015E",title:t("Latin capital letter s with cedilla")},{character:"\u015F",title:t("Latin small letter s with cedilla")},{character:"\u0160",title:t("Latin capital letter s with caron")},{character:"\u0161",title:t("Latin small letter s with caron")},{character:"\u0162",title:t("Latin capital letter t with cedilla")},{character:"\u0163",title:t("Latin small letter t with cedilla")},{character:"\u0164",title:t("Latin capital letter t with caron")},{character:"\u0165",title:t("Latin small letter t with caron")},{character:"\u0166",title:t("Latin capital letter t with stroke")},{character:"\u0167",title:t("Latin small letter t with stroke")},{character:"\u0168",title:t("Latin capital letter u with tilde")},{character:"\u0169",title:t("Latin small letter u with tilde")},{character:"\u016A",title:t("Latin capital letter u with macron")},{character:"\u016B",title:t("Latin small letter u with macron")},{character:"\u016C",title:t("Latin capital letter u with breve")},{character:"\u016D",title:t("Latin small letter u with breve")},{character:"\u016E",title:t("Latin capital letter u with ring above")},{character:"\u016F",title:t("Latin small letter u with ring above")},{character:"\u0170",title:t("Latin capital letter u with double acute")},{character:"\u0171",title:t("Latin small letter u with double acute")},{character:"\u0172",title:t("Latin capital letter u with ogonek")},{character:"\u0173",title:t("Latin small letter u with ogonek")},{character:"\u0174",title:t("Latin capital letter w with circumflex")},{character:"\u0175",title:t("Latin small letter w with circumflex")},{character:"\u0176",title:t("Latin capital letter y with circumflex")},{character:"\u0177",title:t("Latin small letter y with circumflex")},{character:"\u0178",title:t("Latin capital letter y with diaeresis")},{character:"\u0179",title:t("Latin capital letter z with acute")},{character:"\u017A",title:t("Latin small letter z with acute")},{character:"\u017B",title:t("Latin capital letter z with dot above")},{character:"\u017C",title:t("Latin small letter z with dot above")},{character:"\u017D",title:t("Latin capital letter z with caron")},{character:"\u017E",title:t("Latin small letter z with caron")},{character:"\u017F",title:t("Latin small letter long s")}],{label:t("Latin")})}}class k0 extends C{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:t("Dollar sign")},{character:"\u20AC",title:t("Euro sign")},{character:"\xA5",title:t("Yen sign")},{character:"\xA3",title:t("Pound sign")},{character:"\xA2",title:t("Cent sign")},{character:"\u20A0",title:t("Euro-currency sign")},{character:"\u20A1",title:t("Colon sign")},{character:"\u20A2",title:t("Cruzeiro sign")},{character:"\u20A3",title:t("French franc sign")},{character:"\u20A4",title:t("Lira sign")},{character:"\xA4",title:t("Currency sign")},{character:"\u20BF",title:t("Bitcoin sign")},{character:"\u20A5",title:t("Mill sign")},{character:"\u20A6",title:t("Naira sign")},{character:"\u20A7",title:t("Peseta sign")},{character:"\u20A8",title:t("Rupee sign")},{character:"\u20A9",title:t("Won sign")},{character:"\u20AA",title:t("New sheqel sign")},{character:"\u20AB",title:t("Dong sign")},{character:"\u20AD",title:t("Kip sign")},{character:"\u20AE",title:t("Tugrik sign")},{character:"\u20AF",title:t("Drachma sign")},{character:"\u20B0",title:t("German penny sign")},{character:"\u20B1",title:t("Peso sign")},{character:"\u20B2",title:t("Guarani sign")},{character:"\u20B3",title:t("Austral sign")},{character:"\u20B4",title:t("Hryvnia sign")},{character:"\u20B5",title:t("Cedi sign")},{character:"\u20B6",title:t("Livre tournois sign")},{character:"\u20B7",title:t("Spesmilo sign")},{character:"\u20B8",title:t("Tenge sign")},{character:"\u20B9",title:t("Indian rupee sign")},{character:"\u20BA",title:t("Turkish lira sign")},{character:"\u20BB",title:t("Nordic mark sign")},{character:"\u20BC",title:t("Manat sign")},{character:"\u20BD",title:t("Ruble sign")}],{label:t("Currency")})}}class XP extends C{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[k0,p0,f0,g0,b0]}}function eM(n,e){const{modelAttribute:t,styleName:i,viewElement:r,defaultValue:o,reduceBoxSides:s=!1,shouldUpcast:a=()=>!0}=e;n.for("upcast").attributeToAttribute({view:{name:r,styles:{[i]:/[\s\S]+/}},model:{key:t,value:(l,c,d)=>{if(!a(l))return;const u=iM(o,"",d),h=l.getNormalizedStyle(i),g=s?nM(h):h;return u!==g?g:void 0}}})}function tM(n,e){const{modelElement:t,modelAttribute:i,styleName:r}=e;n.for("downcast").attributeToAttribute({model:{name:t,key:i},view:o=>({key:"style",value:{[r]:o}})})}function iM(n,e,t){const i=t.modelRange&&Ce(t.modelRange.getItems({shallow:!0})),r=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return r&&r.getAttribute("tableType")==="layout"?e:n}function nM(n){if(!n)return;const e=["top","right","bottom","left"];if(!e.every(i=>n[i]))return n;const t=n.top;return e.every(i=>n[i]===t)?t:n}function Xe(n,e,t,i,r=1){e!=null&&r!=null&&e>r?i.setAttribute(n,e,t):i.removeAttribute(n,t)}function gr(n,e,t={}){const i=n.createElement("tableCell",t);return n.insertElement("paragraph",i),n.insert(i,e),i}function zu(n,e){const t=e.parent.parent,i=parseInt(t.getAttribute("headingColumns")||"0"),{column:r}=n.getCellLocation(e);return!!i&&r<i}function rM(n,e,t){const{modelAttribute:i}=t;n.extend("tableCell",{allowAttributes:[i]}),eM(e,{viewElement:/^(td|th)$/,...t}),tM(e,{modelElement:"tableCell",...t})}function oM(n){const e=n.getSelectedElement();return e&&e.is("element","table")?e:n.getFirstPosition().findAncestor("table")}function sM(){return n=>{n.on("element:table",(e,t,i)=>{const r=t.viewItem;if(!i.consumable.test(r,{name:!0}))return;const{rows:o,headingRows:s,headingColumns:a}=function(d){let u,h=0;const g=[],p=[];let f;for(const b of Array.from(d.getChildren())){if(b.name!=="tbody"&&b.name!=="thead"&&b.name!=="tfoot")continue;b.name!=="thead"||f||(f=b);const k=Array.from(b.getChildren()).filter(_=>_.is("element","tr"));let w=null;for(const _ of k){const y=Array.from(_.getChildren()).filter(x=>x.is("element","td")||x.is("element","th"));if(f&&b===f||b.name==="tbody"&&y.length>0&&(w===null||y.length===w)&&y.every(x=>x.is("element","th")))h++,g.push(_);else{p.push(_);const x=aM(_);(!u||x<u)&&(u=x)}w=Math.max(w||0,y.length)}}return{headingRows:h,headingColumns:u||0,rows:[...g,...p]}}(r),l={};a&&(l.headingColumns=a),s&&(l.headingRows=s);const c=i.writer.createElement("table",l);if(i.safeInsert(c,t.modelCursor)){if(i.consumable.consume(r,{name:!0}),o.forEach(d=>i.convertItem(d,i.writer.createPositionAt(c,"end"))),i.convertChildren(r,i.writer.createPositionAt(c,"end")),c.isEmpty){const d=i.writer.createElement("tableRow");i.writer.insert(d,i.writer.createPositionAt(c,"end")),gr(i.writer,i.writer.createPositionAt(d,"end"))}i.updateConversionResult(c,t)}})}}function w0(n){return e=>{e.on(`element:${n}`,(t,i,{writer:r})=>{if(!i.modelRange)return;const o=i.modelRange.start.nodeAfter,s=r.createPositionAt(o,0);if(i.viewItem.isEmpty)return void r.insertElement("paragraph",s);const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=r.createElement("paragraph");r.insert(l,r.createPositionAt(o,0));for(const c of a)r.move(r.createRangeOn(c),r.createPositionAt(l,"end"))}},{priority:"low"})}}function aM(n){let e=0,t=0;const i=Array.from(n.getChildren()).filter(r=>r.name==="th"||r.name==="td");for(;t<i.length&&i[t].name==="th";){const r=i[t];e+=parseInt(r.getAttribute("colspan")||"1"),t++}return e}class Ae{constructor(e,t={}){m(this,"_table"),m(this,"_startRow"),m(this,"_endRow"),m(this,"_startColumn"),m(this,"_endColumn"),m(this,"_includeAllSlots"),m(this,"_skipRows"),m(this,"_row"),m(this,"_rowIndex"),m(this,"_column"),m(this,"_cellIndex"),m(this,"_spannedCells"),m(this,"_nextCellAtColumn"),m(this,"_jumpedToStartRow",!1),this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const r=e.getChild(this._cellIndex);if(!r)return this._advanceToNextRow();const o=parseInt(r.getAttribute("colspan")||"1"),s=parseInt(r.getAttribute("rowspan")||"1");(o>1||s>1)&&this._recordSpans(r,s,o),this._shouldSkipSlot()||(t=this._formatOutValue(r)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new lM(this,e,t,i)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,r=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||i||r}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,i){const r={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let s=this._column;s<this._column+i;s++)o==this._row&&s==this._column||this._markSpannedCell(o,s,r)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((t,i)=>t+parseInt(i.getAttribute("colspan")||"1"),0)}}class lM{constructor(e,t,i,r){m(this,"cell"),m(this,"row"),m(this,"column"),m(this,"cellAnchorRow"),m(this,"cellAnchorColumn"),m(this,"_cellIndex"),m(this,"_rowIndex"),m(this,"_table"),this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=r,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function _0(n,e){return(t,{writer:i})=>{const r=t.getAttribute("headingRows")||0,o=i.createContainerElement("table",null,[]),s=i.createContainerElement("figure",{class:"table"},o);r>0&&i.insert(i.createPositionAt(o,"end"),i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<r))),r<n.getRows(t)&&i.insert(i.createPositionAt(o,"end"),i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=r)));for(const{positionOffset:a,filter:l}of e.additionalSlots)i.insert(i.createPositionAt(o,a),i.createSlot(l));return i.insert(i.createPositionAt(o,"after"),i.createSlot(a=>!a.is("element","tableRow")&&!e.additionalSlots.some(({filter:l})=>l(a)))),e.asWidget?function(a,l){return l.setCustomProperty("table",!0,a),Ha(a,l,{hasSelectionHandle:!0})}(s,i):s}}function v0(n={}){return(e,{writer:t})=>{const i=e.parent,r=i.parent,o=r.getChildIndex(i),s=new Ae(r,{row:o}),a=r.getAttribute("headingRows")||0,l=r.getAttribute("headingColumns")||0;let c=null;for(const d of s)if(d.cell==e){const u=d.row<a||d.column<l?"th":"td";c=n.asWidget?vk(t.createEditableElement(u),t,{withAriaRole:!1}):t.createContainerElement(u);break}return c}}function y0(n={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!x0(e))return null;if(n.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function x0(n){return n.parent.childCount==1&&!function(e){for(const t of e.getAttributeKeys())if(!t.startsWith("selection:")&&t!="htmlEmptyBlock")return!0;return!1}(n)}class cM extends G{refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=function(r,o){const s=r.getFirstPosition().parent,a=s===s.root?s:s.parent;return o.checkChild(a,"table")}(t,i)}execute(e={}){const t=this.editor,i=t.model,r=t.plugins.get("TableUtils"),o=t.config.get("table.defaultHeadings.rows"),s=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&s&&(e.headingColumns=s),i.change(a=>{const l=r.createTable(a,e);i.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}class C0 extends G{constructor(e,t={}){super(e),m(this,"order"),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,t=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),r=this.order==="above",o=i.getSelectionAffectedTableCells(t),s=i.getRowIndexes(o),a=r?s.first:s.last,l=o[0].findAncestor("table");i.insertRows(l,{at:r?a:a+1,copyStructureFromAbove:!r})}}class A0 extends G{constructor(e,t={}){super(e),m(this,"order"),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,t=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=t}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),r=this.order==="left",o=i.getSelectionAffectedTableCells(t),s=i.getColumnIndexes(o),a=r?s.first:s.last,l=o[0].findAncestor("table");i.insertColumns(l,{columns:1,at:r?a:a+1})}}class T0 extends G{constructor(e,t={}){super(e),m(this,"direction"),this.direction=t.direction||"horizontally"}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}function E0(n,e,t){const{startRow:i,startColumn:r,endRow:o,endColumn:s}=e,a=t.createElement("table"),l=n.getAttribute("tableType");l&&t.setAttribute("tableType",l,a);const c=o-i+1;for(let u=0;u<c;u++)t.insertElement("tableRow",a,"end");const d=[...new Ae(n,{startRow:i,endRow:o,startColumn:r,endColumn:s,includeAllSlots:!0})];for(const{row:u,column:h,cell:g,isAnchor:p,cellAnchorRow:f,cellAnchorColumn:b}of d){const k=u-i,w=a.getChild(k);if(p){const _=t.cloneElement(g);t.append(_,w),V0(_,u,h,o,s,t)}else(f<i||b<r)&&gr(t,t.createPositionAt(w,"end"))}return function(u,h,g,p,f){const b=parseInt(h.getAttribute("headingRows")||"0");b>0&&Xe("headingRows",b-g,u,f,0);const k=parseInt(h.getAttribute("headingColumns")||"0");k>0&&Xe("headingColumns",k-p,u,f,0)}(a,n,i,r,t),a}function S0(n,e,t=0){const i=[],r=new Ae(n,{startRow:t,endRow:e-1});for(const o of r){const{row:s,cellHeight:a}=o;s<e&&e<=s+a-1&&i.push(o)}return i}function I0(n,e,t){const i=n.parent,r=i.parent,o=i.index,s=e-o,a={},l=parseInt(n.getAttribute("rowspan"))-s;l>1&&(a.rowspan=l);const c=parseInt(n.getAttribute("colspan")||"1");c>1&&(a.colspan=c);const d=o+s,u=[...new Ae(r,{startRow:o,endRow:d,includeAllSlots:!0})];let h,g=null;for(const p of u){const{row:f,column:b,cell:k}=p;k===n&&h===void 0&&(h=b),h!==void 0&&h===b&&f===d&&(g=gr(t,p.getPositionBefore(),a))}return Xe("rowspan",s,n,t),g}function P0(n,e){const t=[],i=new Ae(n);for(const r of i){const{column:o,cellWidth:s}=r;o<e&&e<=o+s-1&&t.push(r)}return t}function M0(n,e,t,i){const r=t-e,o={},s=parseInt(n.getAttribute("colspan"))-r;s>1&&(o.colspan=s);const a=parseInt(n.getAttribute("rowspan")||"1");a>1&&(o.rowspan=a);const l=gr(i,i.createPositionAfter(n),o);return Xe("colspan",r,n,i),l}function V0(n,e,t,i,r,o){const s=parseInt(n.getAttribute("colspan")||"1"),a=parseInt(n.getAttribute("rowspan")||"1");t+s-1>r&&Xe("colspan",r-t+1,n,o,1),e+a-1>i&&Xe("rowspan",i-e+1,n,o,1)}function Du(n,e){const t=e.getColumns(n),i=new Array(t).fill(0);for(const{column:o}of new Ae(n))i[o]++;const r=i.reduce((o,s,a)=>s?o:[...o,a],[]);if(r.length>0){const o=r[r.length-1];return e.removeColumns(n,{at:o}),!0}return!1}function Bu(n,e){const t=[],i=e.getRows(n);for(let r=0;r<i;r++)n.getChild(r).isEmpty&&t.push(r);if(t.length>0){const r=t[t.length-1];return e.removeRows(n,{at:r}),!0}return!1}function Fu(n,e){Du(n,e)||Bu(n,e)}function L0(n,e){const t=Array.from(new Ae(n,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:r})=>r===1))return e.lastRow;const i=t[0].cellHeight-1;return e.lastRow+i}function O0(n,e){const t=Array.from(new Ae(n,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:r})=>r===1))return e.lastColumn;const i=t[0].cellWidth-1;return e.lastColumn+i}class pl extends G{constructor(e,t){super(e),m(this,"direction"),m(this,"isHorizontal"),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,i=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],r=this.value,o=this.direction;e.change(s=>{const a=o=="right"||o=="down",l=a?i:r,c=a?r:i,d=c.parent;(function(f,b,k){N0(f)||(N0(b)&&k.remove(k.createRangeIn(b)),k.move(k.createRangeIn(f),k.createPositionAt(b,"end"))),k.remove(f)})(c,l,s);const u=this.isHorizontal?"colspan":"rowspan",h=parseInt(i.getAttribute(u)||"1"),g=parseInt(r.getAttribute(u)||"1");s.setAttribute(u,h+g,l),s.setSelection(s.createRangeIn(l));const p=this.editor.plugins.get("TableUtils");Fu(d.findAncestor("table"),p)})}_getMergeableCell(){const e=this.editor.model.document,t=this.editor.plugins.get("TableUtils"),i=t.getTableCellsContainingSelection(e.selection)[0];if(!i)return;const r=this.isHorizontal?function(a,l,c){const d=a.parent,u=d.parent,h=l=="right"?a.nextSibling:a.previousSibling,g=(u.getAttribute("headingColumns")||0)>0;if(!h)return;const p=l=="right"?a:h,f=l=="right"?h:a,{column:b}=c.getCellLocation(p),{column:k}=c.getCellLocation(f),w=parseInt(p.getAttribute("colspan")||"1"),_=zu(c,p),y=zu(c,f);if(!(g&&_!=y))return b+w===k?h:void 0}(i,this.direction,t):function(a,l,c){const d=a.parent,u=d.parent,h=u.getChildIndex(d);if(l=="down"&&h===c.getRows(u)-1||l=="up"&&h===0)return null;const g=parseInt(a.getAttribute("rowspan")||"1"),p=u.getAttribute("headingRows")||0,f=l=="down"&&h+g===p,b=l=="up"&&h===p;if(p&&(f||b))return null;const k=parseInt(a.getAttribute("rowspan")||"1"),w=l=="down"?h+k:h,_=[...new Ae(u,{endRow:w})],y=_.find(I=>I.cell===a),x=y.column,A=_.find(({row:I,cellHeight:M,column:D})=>D===x&&(l=="down"?I===w:w===I+M));return A&&A.cell?A.cell:null}(i,this.direction,t);if(!r)return;const o=this.isHorizontal?"rowspan":"colspan",s=parseInt(i.getAttribute(o)||"1");return parseInt(r.getAttribute(o)||"1")===s?r:void 0}}function N0(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}class dM extends G{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const r=i.findAncestor("table"),o=e.getRows(r)-1,s=e.getRowIndexes(t),a=s.first===0&&s.last===o;this.isEnabled=!a}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),r=t.getRowIndexes(i),o=i[0],s=o.findAncestor("table"),a=t.getCellLocation(o).column;e.change(l=>{const c=r.last-r.first+1;t.removeRows(s,{at:r.first,rows:c});const d=function(u,h,g,p){const f=u.getChild(Math.min(h,p-1));let b=f.getChild(0),k=0;for(const w of f.getChildren()){if(k>g)return b;b=w,k+=parseInt(w.getAttribute("colspan")||"1")}return b}(s,r.first,a,t.getRows(s));l.setSelection(l.createPositionAt(d,0))})}}class uM extends G{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const r=i.findAncestor("table"),o=e.getColumns(r),{first:s,last:a}=e.getColumnIndexes(t);this.isEnabled=a-s<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,i]=function(l,c){const d=c.getSelectionAffectedTableCells(l),u=d[0],h=d.pop(),g=[u,h];return u.isBefore(h)?g:g.reverse()}(this.editor.model.document.selection,e),r=t.parent.parent,o=[...new Ae(r)],s={first:o.find(l=>l.cell===t).column,last:o.find(l=>l.cell===i).column},a=function(l,c,d,u){return parseInt(d.getAttribute("colspan")||"1")>1?d:c.previousSibling||d.nextSibling?d.nextSibling||c.previousSibling:u.first?l.reverse().find(({column:h})=>h<u.first).cell:l.reverse().find(({column:h})=>h>u.last).cell}(o,t,i,s);this.editor.model.change(l=>{const c=s.last-s.first+1;e.removeColumns(r,{at:s.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}class hM extends G{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection);if(i.length===0)return this.isEnabled=!1,void(this.value=!1);const r=i[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(r,"headingRows"),this.value=i.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,r=t.getSelectionAffectedTableCells(i.document.selection),o=r[0].findAncestor("table"),{first:s,last:a}=t.getRowIndexes(r),l=this.value?s:a+1,c=o.getAttribute("headingRows")||0;i.change(d=>{if(l){const u=S0(o,l,l>c?c:0);for(const{cell:h}of u)I0(h,l,d)}Xe("headingRows",l,o,d,0)})}_isInHeading(e,t){const i=parseInt(t.getAttribute("headingRows")||"0");return!!i&&e.parent.index<i}}class mM extends G{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection);if(i.length===0)return this.isEnabled=!1,void(this.value=!1);const r=i[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(r,"headingColumns"),this.value=i.every(o=>zu(e,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,r=t.getSelectionAffectedTableCells(i.document.selection),o=r[0].findAncestor("table"),{first:s,last:a}=t.getColumnIndexes(r),l=this.value?s:a+1;i.change(c=>{if(l){const d=P0(o,l);for(const{cell:u,column:h}of d)M0(u,h,l,c)}Xe("headingColumns",l,o,c,0)})}}function gM(n,e){return 4e3/R0(n,e)}function R0(n,e){const t=z0(n,"tbody",e)||z0(n,"thead",e);return ju(e.editing.view.domConverter.mapViewToDom(t))}function z0(n,e,t){return[...[...t.editing.mapper.toViewElement(n).getChildren()].find(i=>i.is("element","table")).getChildren()].find(i=>i.is("element",e))}function ju(n){const e=R.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function ci(n){const e=Math.pow(10,2),t=typeof n=="number"?n:parseFloat(n);return Math.round(t*e)/e}function As(n){return n.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function $u(n){let e=function(i){const r=i.filter(a=>a==="auto").length;if(r===0)return i.map(a=>ci(a));const o=As(i),s=Math.max((100-o)/r,5);return i.map(a=>a==="auto"?s:a).map(a=>ci(a))}(n.map(i=>i==="auto"?i:parseFloat(i.replace("%",""))));const t=As(e);return t!==100&&(e=e.map(i=>ci(100*i/t)).map((i,r,o)=>r!==o.length-1?i:ci(i+100-As(o)))),e.map(i=>i+"%")}function pM(n){const e=R.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function D0(n,e,t,i){for(let r=0;r<Math.max(t.length,n.length);r++){const o=n[r],s=t[r];s?o?i.setAttribute("columnWidth",s,o):i.appendElement("tableColumn",{columnWidth:s},e):i.remove(o)}}function Ts(n){if(n.is("element","tableColumnGroup"))return n;const e=n.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Es(n){const e=Ts(n);return e?Array.from(e.getChildren()):[]}class pt extends C{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,r=i.getChildIndex(t),o=new Ae(i,{row:r});for(const{cell:s,row:a,column:l}of o)if(s===e)return{row:a,column:l}}createTable(e,t){const i=e.createElement("table"),r=t.rows||2,o=t.columns||2;return Hu(e,i,0,r,o),t.headingRows&&Xe("headingRows",Math.min(t.headingRows,r),i,e,0),t.headingColumns&&Xe("headingColumns",Math.min(t.headingColumns,o),i,e,0),i}insertRows(e,t={}){const i=this.editor.model,r=t.at||0,o=t.rows||1,s=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?r-1:r,l=this.getRows(e),c=this.getColumns(e);if(r>l)throw new v("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(d=>{const u=e.getAttribute("headingRows")||0;if(u>r&&Xe("headingRows",u+o,e,d,0),!s&&(r===0||r===l))return void Hu(d,e,r,o,c);const h=s?Math.max(r,a):r,g=new Ae(e,{endRow:h}),p=new Array(c).fill(1);for(const{row:f,column:b,cellHeight:k,cellWidth:w,cell:_}of g){const y=f+k-1,x=f<=a&&a<=y;f<r&&r<=y?(d.setAttribute("rowspan",k+o,_),p[b]=-w):s&&x&&(p[b]=w)}for(let f=0;f<o;f++){const b=d.createElement("tableRow");d.insert(b,e,r);for(let k=0;k<p.length;k++){const w=p[k],_=d.createPositionAt(b,"end");w>0&&gr(d,_,w>1?{colspan:w}:void 0),k+=Math.abs(w)-1}}})}insertColumns(e,t={}){const i=this.editor.model,r=t.at||0,o=t.columns||1;i.change(s=>{const a=e.getAttribute("headingColumns");r<a&&s.setAttribute("headingColumns",a+o,e);const l=this.getColumns(e);if(r===0||l===r){for(const d of e.getChildren())d.is("element","tableRow")&&oo(o,s,s.createPositionAt(d,r?"end":0));return}const c=new Ae(e,{column:r,includeAllSlots:!0});for(const d of c){const{row:u,cell:h,cellAnchorColumn:g,cellAnchorRow:p,cellWidth:f,cellHeight:b}=d;if(g<r){s.setAttribute("colspan",f+o,h);const k=p+b-1;for(let w=u;w<=k;w++)c.skipRow(w)}else oo(o,s,d.getPositionBefore())}})}removeRows(e,t){const i=this.editor.model,r=t.rows||1,o=this.getRows(e),s=t.at,a=s+r-1;if(a>o-1)throw new v("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(l=>{const c={first:s,last:a},{cellsToMove:d,cellsToTrim:u}=function(h,{first:g,last:p}){const f=new Map,b=[];for(const{row:k,column:w,cellHeight:_,cell:y}of new Ae(h,{endRow:p})){const x=k+_-1;if(k>=g&&k<=p&&x>p){const A=_-(p-k+1);f.set(w,{cell:y,rowspan:A})}if(k<g&&x>=g){let A;A=x>=p?p-g+1:x-g+1,b.push({cell:y,rowspan:_-A})}}return{cellsToMove:f,cellsToTrim:b}}(e,c);d.size&&function(h,g,p,f){const b=new Ae(h,{includeAllSlots:!0,row:g}),k=[...b],w=h.getChild(g);let _;for(const{column:y,cell:x,isAnchor:A}of k)if(p.has(y)){const{cell:I,rowspan:M}=p.get(y),D=_?f.createPositionAfter(_):f.createPositionAt(w,0);f.move(f.createRangeOn(I),D),Xe("rowspan",M,I,f),_=I}else A&&(_=x)}(e,a+1,d,l);for(let h=a;h>=s;h--)l.remove(e.getChild(h));for(const{rowspan:h,cell:g}of u)Xe("rowspan",h,g,l);(function(h,{first:g,last:p},f){const b=h.getAttribute("headingRows")||0;g<b&&Xe("headingRows",p<b?b-(p-g+1):g,h,f,0)})(e,c,l),Du(e,this)||Bu(e,this)})}removeColumns(e,t){const i=this.editor.model,r=t.at,o=t.columns||1,s=t.at+o-1;i.change(a=>{(function(c,d,u){const h=c.getAttribute("headingColumns")||0;if(h&&d.first<h){const g=Math.min(h-1,d.last)-d.first+1;u.setAttribute("headingColumns",h-g,c)}})(e,{first:r,last:s},a);const l=Es(e);for(let c=s;c>=r;c--){for(const{cell:d,column:u,cellWidth:h}of[...new Ae(e)])u<=c&&h>1&&u+h>c?Xe("colspan",h-1,d,a):u===c&&a.remove(d);if(l[c]){const d=c===0?l[1]:l[c-1],u=parseFloat(l[c].getAttribute("columnWidth")),h=parseFloat(d.getAttribute("columnWidth"));a.remove(l[c]),a.setAttribute("columnWidth",u+h+"%",d)}}Bu(e,this)||Du(e,this)})}splitCellVertically(e,t=2){const i=this.editor.model,r=e.parent.parent,o=parseInt(e.getAttribute("rowspan")||"1"),s=parseInt(e.getAttribute("colspan")||"1");i.change(a=>{if(s>1){const{newCellsSpan:l,updatedSpan:c}=B0(s,t);Xe("colspan",c,e,a);const d={};l>1&&(d.colspan=l),o>1&&(d.rowspan=o),oo(s>t?t-1:s-1,a,a.createPositionAfter(e),d)}if(s<t){const l=t-s,c=[...new Ae(r)],{column:d}=c.find(({cell:p})=>p===e),u=c.filter(({cell:p,cellWidth:f,column:b})=>p!==e&&b===d||b<d&&b+f>d);for(const{cell:p,cellWidth:f}of u)a.setAttribute("colspan",f+l,p);const h={};o>1&&(h.rowspan=o),oo(l,a,a.createPositionAfter(e),h);const g=r.getAttribute("headingColumns")||0;g>d&&Xe("headingColumns",g+l,r,a)}})}splitCellHorizontally(e,t=2){const i=this.editor.model,r=e.parent,o=r.parent,s=o.getChildIndex(r),a=parseInt(e.getAttribute("rowspan")||"1"),l=parseInt(e.getAttribute("colspan")||"1");i.change(c=>{if(a>1){const d=[...new Ae(o,{startRow:s,endRow:s+a-1,includeAllSlots:!0})],{newCellsSpan:u,updatedSpan:h}=B0(a,t);Xe("rowspan",h,e,c);const{column:g}=d.find(({cell:b})=>b===e),p={};u>1&&(p.rowspan=u),l>1&&(p.colspan=l);let f=0;for(const b of d){const{column:k,row:w}=b,_=k===g;f>=u&&_&&(f=0),w>=s+h&&_&&(f||oo(1,c,b.getPositionBefore(),p),f++)}}if(a<t){const d=t-a,u=[...new Ae(o,{startRow:0,endRow:s})];for(const{cell:p,cellHeight:f,row:b}of u)if(p!==e&&b+f>s){const k=f+d;c.setAttribute("rowspan",k,p)}const h={};l>1&&(h.colspan=l),Hu(c,o,s+1,d,1,h);const g=o.getAttribute("headingRows")||0;g>s&&Xe("headingRows",g+d,o,c)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(t=>t.is("element","tableCell")).reduce((t,i)=>t+parseInt(i.getAttribute("colspan")||"1"),0)}getRows(e){return Array.from(e.getChildren()).reduce((t,i)=>i.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new Ae(e,t)}getSelectedTableCells(e){const t=[];for(const i of this.sortRanges(e.getRanges())){const r=i.getContainedElement();r&&r.is("element","tableCell")&&t.push(r)}return t}getTableCellsContainingSelection(e){const t=[];for(const i of e.getRanges()){const r=i.start.findAncestor("tableCell");r&&t.push(r)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(i=>i.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),i=[...new Ae(t)].filter(r=>e.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(i)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,i=new Set;let r=0;for(const o of e){const{row:s,column:a}=this.getCellLocation(o),l=parseInt(o.getAttribute("rowspan"))||1,c=parseInt(o.getAttribute("colspan"))||1;t.add(s),i.add(a),l>1&&t.add(s+l-1),c>1&&i.add(a+c-1),r+=l*c}return function(o,s){const a=Array.from(o.values()),l=Array.from(s.values()),c=Math.max(...a),d=Math.min(...a),u=Math.max(...l),h=Math.min(...l);return(c-d+1)*(u-h+1)}(t,i)==r}sortRanges(e){return Array.from(e).sort(fM)}_getFirstLastIndexesObject(e){const t=e.sort((i,r)=>i-r);return{first:t[0],last:t[t.length-1]}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),i=this.getRowIndexes(e),r=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,r))return!1;const o=this.getColumnIndexes(e),s=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(o,s)}_areIndexesInSameSection({first:e,last:t},i){return e<i==t<i}}function Hu(n,e,t,i,r,o={}){for(let s=0;s<i;s++){const a=n.createElement("tableRow");n.insert(a,e,t),oo(r,n,n.createPositionAt(a,"end"),o)}}function oo(n,e,t,i={}){for(let r=0;r<n;r++)gr(e,t,i)}function B0(n,e){if(n<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(n/e);return{newCellsSpan:t,updatedSpan:n-t*e+t}}function fM(n,e){const t=n.start,i=e.start;return t.isBefore(i)?-1:1}class bM extends G{refresh(){const e=this.editor.plugins.get(pt),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(pt);e.change(i=>{const r=t.getSelectedTableCells(e.document.selection),o=r.shift(),{mergeWidth:s,mergeHeight:a}=function(l,c,d){let u=0,h=0;for(const k of c){const{row:w,column:_}=d.getCellLocation(k);u=j0(k,_,u,"colspan"),h=j0(k,w,h,"rowspan")}const{row:g,column:p}=d.getCellLocation(l),f=u-p,b=h-g;return{mergeWidth:f,mergeHeight:b}}(o,r,t);Xe("colspan",s,o,i),Xe("rowspan",a,o,i);for(const l of r)kM(l,o,i);Fu(o.findAncestor("table"),t),i.setSelection(o,"in")})}}function kM(n,e,t){F0(n)||(F0(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function F0(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function j0(n,e,t,i){const r=parseInt(n.getAttribute(i)||"1");return Math.max(t,e+r)}class wM extends G{constructor(e){super(e),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),r=t.getRowIndexes(i),o=i[0].findAncestor("table"),s=[];for(let a=r.first;a<=r.last;a++)for(const l of o.getChild(a).getChildren())s.push(e.createRangeOn(l));e.change(a=>{a.setSelection(s)})}}class _M extends G{constructor(e){super(e),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),r=i[0],o=i.pop(),s=r.findAncestor("table"),a=e.getCellLocation(r),l=e.getCellLocation(o),c=Math.min(a.column,l.column),d=Math.max(a.column,l.column),u=[];for(const h of new Ae(s,{startColumn:c,endColumn:d}))u.push(t.createRangeOn(h.cell));t.change(h=>{h.setSelection(u)})}}function vM(n){n.document.registerPostFixer(e=>function(t,i){const r=i.document.differ.getChanges();let o=!1;const s=new Set;for(const a of r){let l=null;a.type=="insert"&&a.name=="table"&&(l=a.position.nodeAfter),a.type!="insert"&&a.type!="remove"||a.name!="tableRow"&&a.name!="tableCell"||(l=a.position.findAncestor("table")),CM(a)&&(l=a.range.start.findAncestor("table")),l&&!s.has(l)&&(o=yM(l,t)||o,o=xM(l,t)||o,s.add(l))}return o}(e,n))}function yM(n,e){let t=!1;const i=function(r){const o=parseInt(r.getAttribute("headingRows")||"0"),s=Array.from(r.getChildren()).reduce((l,c)=>c.is("element","tableRow")?l+1:l,0),a=[];for(const{row:l,cell:c,cellHeight:d}of new Ae(r)){if(d<2)continue;const u=l<o?o:s;if(l+d>u){const h=u-l;a.push({cell:c,rowspan:h})}}return a}(n);if(i.length){t=!0;for(const r of i)Xe("rowspan",r.rowspan,r.cell,e,1)}return t}function xM(n,e){let t=!1;const i=function(a){const l=new Array(a.childCount).fill(0);for(const{rowIndex:c}of new Ae(a,{includeAllSlots:!0}))l[c]++;return l}(n),r=[];for(const[a,l]of i.entries())!l&&n.getChild(a).is("element","tableRow")&&r.push(a);if(r.length){t=!0;for(const a of r.reverse())e.remove(n.getChild(a)),i.splice(a,1)}const o=i.filter((a,l)=>n.getChild(l).is("element","tableRow")),s=o[0];if(!o.every(a=>a===s)){const a=o.reduce((l,c)=>c>l?c:l,0);for(const[l,c]of o.entries()){const d=a-c;if(d){for(let u=0;u<d;u++)gr(e,e.createPositionAt(n.getChild(l),"end"));t=!0}}}return t}function CM(n){if(n.type!=="attribute")return!1;const e=n.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}function AM(n){n.document.registerPostFixer(e=>function(t,i){const r=i.document.differ.getChanges();let o=!1;for(const s of r)s.type=="insert"&&s.name=="table"&&(o=TM(s.position.nodeAfter,t)||o),s.type=="insert"&&s.name=="tableRow"&&(o=$0(s.position.nodeAfter,t)||o),s.type=="insert"&&s.name=="tableCell"&&(o=Uu(s.position.nodeAfter,t)||o),s.type!="remove"&&s.type!="insert"||!EM(s)||(o=Uu(s.position.parent,t)||o);return o}(e,n))}function TM(n,e){let t=!1;for(const i of n.getChildren())i.is("element","tableRow")&&(t=$0(i,e)||t);return t}function $0(n,e){let t=!1;for(const i of n.getChildren())t=Uu(i,e)||t;return t}function Uu(n,e){if(n.childCount==0)return e.insertElement("paragraph",n),!0;const t=Array.from(n.getChildren()).filter(i=>i.is("$text"));for(const i of t)e.wrap(e.createRangeOn(i),"paragraph");return!!t.length}function EM(n){return!!n.position.parent.is("element","tableCell")&&(n.type=="insert"&&n.name=="$text"||n.type=="remove")}function SM(n,e){if(!n.is("element","paragraph"))return!1;const t=e.toViewElement(n);return!!t&&x0(n)!==t.is("element","span")}class Wu extends C{constructor(e){super(e),m(this,"_additionalSlots"),this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[pt]}init(){const e=this.editor,t=e.model,i=t.schema,r=e.conversion,o=e.plugins.get(pt);i.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add(s=>{s.on("element:figure",(a,l,c)=>{if(!c.consumable.test(l.viewItem,{name:!0,classes:"table"}))return;const d=function(h){for(const g of h.getChildren())if(g.is("element","table"))return g}(l.viewItem);if(!d||!c.consumable.test(d,{name:!0}))return;c.consumable.consume(l.viewItem,{name:!0,classes:"table"});const u=Ce(c.convertItem(d,l.modelCursor).modelRange.getItems());u?(c.convertChildren(l.viewItem,c.writer.createPositionAt(u,"end")),c.updateConversionResult(u,l)):c.consumable.revert(l.viewItem,{name:!0,classes:"table"})})}),r.for("upcast").add(sM()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:_0(o,{asWidget:!0,additionalSlots:this._additionalSlots})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:_0(o,{additionalSlots:this._additionalSlots})}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add(s=>{s.on("element:tr",(a,l)=>{l.viewItem.isEmpty&&l.modelCursor.index==0&&a.stop()},{priority:"high"})}),r.for("downcast").elementToElement({model:"tableRow",view:(s,{writer:a})=>s.isEmpty?a.createEmptyElement("tr"):a.createContainerElement("tr")}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(w0("td")),r.for("upcast").add(w0("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:v0({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:v0()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:y0({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:y0(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:H0("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:H0("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new cM(e)),e.commands.add("insertTableRowAbove",new C0(e,{order:"above"})),e.commands.add("insertTableRowBelow",new C0(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new A0(e,{order:"left"})),e.commands.add("insertTableColumnRight",new A0(e,{order:"right"})),e.commands.add("removeTableRow",new dM(e)),e.commands.add("removeTableColumn",new uM(e)),e.commands.add("splitTableCellVertically",new T0(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new T0(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new bM(e)),e.commands.add("mergeTableCellRight",new pl(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new pl(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new pl(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new pl(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new mM(e)),e.commands.add("setTableRowHeader",new hM(e)),e.commands.add("selectTableRow",new wM(e)),e.commands.add("selectTableColumn",new _M(e)),vM(t),AM(t),this.listenTo(t.document,"change:data",()=>{(function(s,a){const l=s.document.differ;for(const c of l.getChanges()){let d,u=!1;if(c.type=="attribute"){const f=c.range.start.nodeAfter;if(!f||!f.is("element","table")||c.attributeKey!="headingRows"&&c.attributeKey!="headingColumns")continue;d=f,u=c.attributeKey=="headingRows"}else c.name!="tableRow"&&c.name!="tableCell"||(d=c.position.findAncestor("table"),u=c.name=="tableRow");if(!d)continue;const h=d.getAttribute("headingRows")||0,g=d.getAttribute("headingColumns")||0,p=new Ae(d);for(const f of p){const b=f.row<h||f.column<g?"th":"td",k=a.mapper.toViewElement(f.cell);k&&k.is("element")&&k.name!=b&&a.reconvertItem(u?f.cell.parent:f.cell)}}})(t,e.editing),function(s,a){const l=s.document.differ,c=new Set;for(const d of l.getChanges()){const u=d.type=="attribute"?d.range.start.parent:d.position.parent;u.is("element","tableCell")&&c.add(u)}for(const d of c.values()){const u=Array.from(d.getChildren()).filter(h=>SM(h,a.mapper));for(const h of u)a.reconvertItem(h)}}(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function H0(n){return e=>{const t=parseInt(e.getAttribute(n));return Number.isNaN(t)||t<=0?null:t}}class U0 extends N{constructor(e){super(e),m(this,"items"),m(this,"keystrokes"),m(this,"focusTracker");const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ie,this.focusTracker=new ge,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(i,r)=>`${r} \xD7 ${i}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(i=>{i.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(i,r)=>{const{row:o,column:s}=r.target.dataset;this.items.get(10*(parseInt(o,10)-1)+(parseInt(s,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(i,r,o)=>{if(!o)return;const{row:s,column:a}=o.dataset;this.set({rows:parseInt(s),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Qo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((i,r)=>{const o=Math.floor(r/10)<e&&r%10<t;i.set("isOn",o)})}_createGridButton(e,t,i,r){const o=new $(e);return o.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":i}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const i=Math.floor(t/10),r=t%10,o=`${i+1} \xD7 ${r+1}`;e.push(this._createGridButton(this.locale,i+1,r+1,o))}return this.createCollection(e)}}class IM extends C{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t,i=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",r=>{const o=e.commands.get("insertTable"),s=mt(r);let a;return s.bind("isEnabled").to(o),s.buttonView.set({icon:qf,label:t("Insert table"),tooltip:!0}),s.on("change:isOpen",()=>{a||(a=new U0(r),s.panelView.children.add(a),a.delegate("execute").to(s),s.on("execute",()=>{e.execute("insertTable",{rows:a.rows,columns:a.columns}),e.editing.view.focus()}))}),s}),e.ui.componentFactory.add("menuBar:insertTable",r=>{const o=e.commands.get("insertTable"),s=new Yt(r),a=new U0(r);return a.delegate("execute").to(s),s.on("change:isOpen",(l,c,d)=>{d||a.reset()}),a.on("execute",()=>{e.execute("insertTable",{rows:a.rows,columns:a.columns}),e.editing.view.focus()}),s.buttonView.set({label:t("Table"),icon:qf}),s.panelView.children.add(a),s.bind("isEnabled").to(o),s}),e.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),zA,o,r)}),e.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),BA,o,r)}),e.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),DA,o,r)})}_prepareDropdown(e,t,i,r){const o=this.editor,s=mt(r),a=this._fillDropdownWithListOptions(s,i);return s.buttonView.set({label:e,icon:t,tooltip:!0}),s.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(s,"execute",l=>{o.execute(l.source.commandName),l.source instanceof Xo||o.editing.view.focus()}),s}_prepareMergeSplitButtonDropdown(e,t,i,r){const o=this.editor,s=mt(r,sr),a="mergeTableCells",l=o.commands.get(a),c=this._fillDropdownWithListOptions(s,i);return s.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),s.bind("isEnabled").toMany([l,...c],"isEnabled",(...d)=>d.some(u=>u)),this.listenTo(s.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(s,"execute",d=>{o.execute(d.source.commandName),o.editing.view.focus()}),s}_fillDropdownWithListOptions(e,t){const i=this.editor,r=[],o=new ot;for(const s of t)PM(s,i,r,o);return En(e,o),r}}function PM(n,e,t,i){if(n.type==="button"||n.type==="switchbutton"){const r=n.model=new en(n.model),{commandName:o,bindIsOn:s}=n.model,a=e.commands.get(o);t.push(a),r.set({commandName:o}),r.bind("isEnabled").to(a),s&&r.bind("isOn").to(a,"value"),r.set({withText:!0})}i.add(n)}class Nn extends C{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[pt,pt]}init(){const e=this.editor,t=e.model,i=e.editing.view;this.listenTo(t,"deleteContent",(r,o)=>this._handleDeleteContent(r,o),{priority:"high"}),this.listenTo(i.document,"insertText",(r,o)=>this._handleInsertTextEvent(r,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(pt),t=this.editor.model.document.selection,i=e.getSelectedTableCells(t);return i.length==0?null:i}getSelectionAsFragment(){const e=this.editor.plugins.get(pt),t=this.getSelectedTableCells();return t?this.editor.model.change(i=>{const r=i.createDocumentFragment(),{first:o,last:s}=e.getColumnIndexes(t),{first:a,last:l}=e.getRowIndexes(t),c=t[0].findAncestor("table");let d=l,u=s;if(e.isSelectionRectangular(t)){const g={firstColumn:o,lastColumn:s,firstRow:a,lastRow:l};d=L0(c,g),u=O0(c,g)}const h=E0(c,{startRow:a,startColumn:o,endRow:d,endColumn:u},i);return i.insert(h,r,0),r}):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change(r=>{r.setSelection(i.cells.map(o=>r.createRangeOn(o)),{backward:i.backward})})}getFocusCell(){const e=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}getAnchorCell(){const e=Ce(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(i=>i.on("selection",(r,o,s)=>{const a=s.writer;(function(d){for(const u of t)d.removeClass("ck-editor__editable_selected",u);t.clear()})(a);const l=this.getSelectedTableCells();if(!l)return;for(const d of l){const u=s.mapper.toViewElement(d);a.addClass("ck-editor__editable_selected",u),t.add(u)}const c=s.mapper.toViewElement(l[l.length-1]);a.setSelection(c,0)},{priority:"lowest"}))}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(i=>{const r=i.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(r);i.setSelection(o)})}})}_handleDeleteContent(e,t){const i=this.editor.plugins.get(pt),r=t[0],o=t[1],s=this.editor.model,a=!o||o.direction=="backward",l=i.getSelectedTableCells(r);l.length&&(e.stop(),s.change(c=>{const d=l[a?l.length-1:0];s.change(h=>{for(const g of l)s.deleteContent(h.createSelection(g,"in"))});const u=s.schema.getNearestSelectionRange(c.createPositionAt(d,0));r.is("documentSelection")?c.setSelection(u):r.setTo(u)}))}_handleInsertTextEvent(e,t){const i=this.editor,r=this.getSelectedTableCells();if(!r)return;const o=i.editing.view,s=i.editing.mapper,a=r.map(l=>o.createRangeOn(s.toViewElement(l)));t.selection=o.createSelection(a)}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),r=i.getCellLocation(e),o=i.getCellLocation(t),s=Math.min(r.row,o.row),a=Math.max(r.row,o.row),l=Math.min(r.column,o.column),c=parseInt(t.getAttribute("colspan")||"1")-1,d=Math.max(r.column,o.column+c),u=new Array(a-s+1).fill(null).map(()=>[]),h={startRow:s,endRow:a,startColumn:l,endColumn:d};for(const{row:f,cell:b}of new Ae(e.findAncestor("table"),h))u[f-s].push(b);const g=o.row<r.row,p=o.column<r.column;return g&&u.reverse(),p&&u.forEach(f=>f.reverse()),{cells:u.flat(),backward:g||p}}}class MM extends C{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[gs,Vt,Nn,pt]}init(){const e=this.editor.editing.view.document;this.listenTo(e,"copy",(t,i)=>this._onCopyCut(t,i)),this.listenTo(e,"cut",(t,i)=>this._onCopyCut(t,i)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:e}=this,t=e.plugins.get(Vt),i=e.plugins.get(Nn);let r=!1;t.on("contentInsertion",(o,s)=>{r=s.method==="paste"}),this.listenTo(e.model,"insertContent",(o,[s,a])=>{(r||i.getSelectedTableCells()!==null)&&this._onInsertContent(o,s,a)},{priority:"high"}),t.on("contentInsertion",()=>{r=!1},{priority:"lowest"})}_onCopyCut(e,t){const i=this.editor.editing.view,r=this.editor.plugins.get(Nn),o=this.editor.plugins.get(gs);r.getSelectedTableCells()&&(e.name!="cut"||this.editor.model.canEditAt(this.editor.model.document.selection))&&(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const s=o._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>r.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(s),method:e.name})}))}_onInsertContent(e,t,i){if(i&&!i.is("documentSelection"))return;const r=this.editor.model,o=this.editor.plugins.get(pt),s=this.editor.plugins.get(gs),a=this.getTableIfOnlyTableInContent(t,r);if(!a)return;const l=o.getSelectionAffectedTableCells(r.document.selection);l.length?(e.stop(),t.is("documentFragment")?s._pasteMarkersIntoTransformedElement(t.markers,c=>this._replaceSelectedCells(a,l,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,l,c)})):Fu(a,o)}_replaceSelectedCells(e,t,i){const r=this.editor.plugins.get(pt),o={width:r.getColumns(e),height:r.getRows(e)},s=function(u,h,g,p){const f=u[0].findAncestor("table"),b=p.getColumnIndexes(u),k=p.getRowIndexes(u),w={firstColumn:b.first,lastColumn:b.last,firstRow:k.first,lastRow:k.last},_=u.length===1;return _&&(w.lastRow+=h.height-1,w.lastColumn+=h.width-1,function(y,x,A,I){const M=I.getColumns(y),D=I.getRows(y);A>M&&I.insertColumns(y,{at:M,columns:A-M}),x>D&&I.insertRows(y,{at:D,rows:x-D})}(f,w.lastRow+1,w.lastColumn+1,p)),_||!p.isSelectionRectangular(u)?function(y,x,A){const{firstRow:I,lastRow:M,firstColumn:D,lastColumn:fe}=x,De={first:I,last:M},ce={first:D,last:fe};Gu(y,D,De,A),Gu(y,fe+1,De,A),qu(y,I,ce,A),qu(y,M+1,ce,A,I)}(f,w,g):(w.lastRow=L0(f,w),w.lastColumn=O0(f,w)),w}(t,o,i,r),a=s.lastRow-s.firstRow+1,l=s.lastColumn-s.firstColumn+1;e=E0(e,{startRow:0,startColumn:0,endRow:Math.min(a,o.height)-1,endColumn:Math.min(l,o.width)-1},i);const c=t[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(e,o,c,s,i);if(this.editor.plugins.get("TableSelection").isEnabled){const u=r.sortRanges(d.map(h=>i.createRangeOn(h)));i.setSelection(u)}else i.setSelection(d[0],0);return c}_replaceSelectedCellsWithPasted(e,t,i,r,o){const{width:s,height:a}=t,l=function(b,k,w){const _=new Array(w).fill(null).map(()=>new Array(k).fill(null));for(const{column:y,row:x,cell:A}of new Ae(b))_[x][y]=A;return _}(e,s,a),c=[...new Ae(i,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0})],d=[];let u;for(const b of c){const{row:k,column:w}=b;w===r.firstColumn&&(u=b.getPositionBefore());const _=k-r.firstRow,y=w-r.firstColumn,x=l[_%a][y%s],A=x?o.cloneElement(x):null,I=this._replaceTableSlotCell(b,A,u,o);I&&(V0(I,k,w,r.lastRow,r.lastColumn,o),d.push(I),u=o.createPositionAfter(I))}const h=parseInt(i.getAttribute("headingRows")||"0"),g=parseInt(i.getAttribute("headingColumns")||"0"),p=r.firstRow<h&&h<=r.lastRow,f=r.firstColumn<g&&g<=r.lastColumn;if(p){const b=qu(i,h,{first:r.firstColumn,last:r.lastColumn},o,r.firstRow);d.push(...b)}if(f){const b=Gu(i,g,{first:r.firstRow,last:r.lastRow},o);d.push(...b)}return d}_replaceTableSlotCell(e,t,i,r){const{cell:o,isAnchor:s}=e;return s&&r.remove(o),t?(r.insert(t,i),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const i=t.createRangeIn(e);for(const r of i.getItems())if(r.is("element","table")){const o=t.createRange(i.start,t.createPositionBefore(r));if(t.hasContent(o,{ignoreWhitespaces:!0}))return null;const s=t.createRange(t.createPositionAfter(r),i.end);return t.hasContent(s,{ignoreWhitespaces:!0})?null:r}return null}}function qu(n,e,t,i,r=0){if(!(e<1))return S0(n,e,r).filter(({column:o,cellWidth:s})=>W0(o,s,t)).map(({cell:o})=>I0(o,e,i))}function Gu(n,e,t,i){if(!(e<1))return P0(n,e).filter(({row:r,cellHeight:o})=>W0(r,o,t)).map(({cell:r,column:o})=>M0(r,o,e,i))}function W0(n,e,t){const i=n+e-1,{first:r,last:o}=t;return n>=r&&n<=o||n<r&&i>=r}class VM extends C{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Nn,pt]}init(){const e=this.editor,t=e.editing.view.document,i=e.t;this.listenTo(t,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(t,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(t,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:i("Keystrokes that can be used in a table cell"),keystrokes:[{label:i("Move the selection to the next cell"),keystroke:"Tab"},{label:i("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:i("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:i("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const i=this.editor,r=i.model.document.selection.getSelectedElement();r&&r.is("element","table")&&(t.preventDefault(),t.stopPropagation(),e.stop(),i.model.change(o=>{o.setSelection(o.createRangeIn(r.getChild(0).getChild(0)))}))}_handleTab(e,t){const i=this.editor,r=this.editor.plugins.get(pt),o=this.editor.plugins.get("TableSelection"),s=i.model.document.selection,a=!t.shiftKey;let l=r.getTableCellsContainingSelection(s)[0];if(l||(l=o.getFocusCell()),!l)return;t.preventDefault(),t.stopPropagation(),e.stop();const c=l.parent,d=c.parent,u=d.getChildIndex(c),h=c.getChildIndex(l),g=h===0;if(!a&&g&&u===0)return void i.model.change(k=>{k.setSelection(k.createRangeOn(d))});const p=h===c.childCount-1,f=u===r.getRows(d)-1;if(a&&f&&p&&(i.execute("insertTableRowBelow"),u===r.getRows(d)-1))return void i.model.change(k=>{k.setSelection(k.createRangeOn(d))});let b;if(a&&p)b=d.getChild(u+1).getChild(0);else if(!a&&g){const k=d.getChild(u-1);b=k.getChild(k.childCount-1)}else b=c.getChild(h+(a?1:-1));i.model.change(k=>{k.setSelection(k.createRangeIn(b))})}_onArrowKey(e,t){const i=this.editor,r=aa(t.keyCode,i.locale.contentLanguageDirection);this._handleArrowKeys(r,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.plugins.get(pt),r=this.editor.plugins.get("TableSelection"),o=this.editor.model,s=o.document.selection,a=["right","down"].includes(e),l=i.getSelectedTableCells(s);if(l.length){let d;return d=t?r.getFocusCell():a?l[l.length-1]:l[0],this._navigateFromCellInDirection(d,e,t),!0}const c=s.focus.findAncestor("tableCell");if(!c)return!1;if(!s.isCollapsed)if(t){if(s.isBackward==a&&!s.containsEntireContent(c))return!1}else{const d=s.getSelectedElement();if(!d||!o.schema.isObject(d))return!1}return!!this._isSelectionAtCellEdge(s,c,a)&&(this._navigateFromCellInDirection(c,e,t),!0)}_isSelectionAtCellEdge(e,t,i){const r=this.editor.model,o=this.editor.model.schema,s=i?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(s).is("element","tableCell"))return r.createPositionAt(t,i?"end":0).isTouching(s);const a=r.createSelection(s);return r.modifySelection(a,{direction:i?"forward":"backward"}),s.isEqual(a.focus)}_navigateFromCellInDirection(e,t,i=!1){const r=this.editor.model,o=e.findAncestor("table"),s=[...new Ae(o,{includeAllSlots:!0})],{row:a,column:l}=s[s.length-1],c=s.find(({cell:f})=>f==e);let{row:d,column:u}=c;switch(t){case"left":u--;break;case"up":d--;break;case"right":u+=c.cellWidth;break;case"down":d+=c.cellHeight}if(d<0||d>a||u<0&&d<=0||u>l&&d>=a)return void r.change(f=>{f.setSelection(f.createRangeOn(o))});u<0?(u=i?0:l,d--):u>l&&(u=i?l:0,d++);const h=s.find(f=>f.row==d&&f.column==u).cell,g=["right","down"].includes(t),p=this.editor.plugins.get("TableSelection");if(i&&p.isEnabled){const f=p.getAnchorCell()||e;p.setCellSelection(f,h)}else{const f=r.createPositionAt(h,g?0:"end");r.change(b=>{b.setSelection(f)})}}}class q0 extends Ti{constructor(){super(...arguments),m(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class LM extends C{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[Nn,pt]}init(){this.editor.editing.view.addObserver(q0),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(pt);let i=!1;const r=e.plugins.get(Nn);this.listenTo(e.editing.view.document,"mousedown",(o,s)=>{const a=e.model.document.selection;if(!this.isEnabled||!r.isEnabled||!s.domEvent.shiftKey)return;const l=r.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(s);c&&G0(l,c)&&(i=!0,r.setCellSelection(l,c),s.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{i&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,i,r=!1,o=!1;const s=e.plugins.get(Nn);this.listenTo(e.editing.view.document,"mousedown",(a,l)=>{this.isEnabled&&s.isEnabled&&(l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(l)))}),this.listenTo(e.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!t)return;const c=this._getModelTableCellFromDomEvent(l);c&&G0(t,c)&&(i=c,r||i==t||(r=!0)),r&&(o=!0,s.setCellSelection(t,i),l.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{r=!1,o=!1,t=null,i=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function G0(n,e){return n.parent.parent==e.parent.parent}class OM extends C{static get requires(){return[Wu,IM,Nn,LM,VM,MM,Qr]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function NM(n){const e=n.getSelectedElement();return e&&Z0(e)?e:null}function RM(n){const e=n.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&Z0(t))return t;t=t.parent}return null}function Z0(n){return!!n.getCustomProperty("table")&&Je(n)}class zM extends C{static get requires(){return[Ua]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Ua),r=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");r&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:RM}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:NM})}}kt.defaultPositions.northArrowSouth,kt.defaultPositions.northArrowSouthWest,kt.defaultPositions.northArrowSouthEast,kt.defaultPositions.southArrowNorth,kt.defaultPositions.southArrowNorthWest,kt.defaultPositions.southArrowNorthEast,kt.defaultPositions.viewportStickyNorth;function DM(n,e){const t=parseFloat(n);return Number.isNaN(t)||String(t)!==String(n)?n:`${t}${e}`}function BM(n,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...n};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}function FM(n,e){return BM({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...n},e)}class jM extends G{constructor(e,t,i){switch(super(e),m(this,"attributeName"),m(this,"_defaultValue"),m(this,"_defaultContentTableValue"),m(this,"_defaultLayoutTableValue"),this.attributeName=t,this._defaultContentTableValue=i,t){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const e=this.editor.model.document.selection,t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e),i=oM(e);this._defaultValue=i&&i.getAttribute("tableType")==="layout"?this._defaultLayoutTableValue:this._defaultContentTableValue,this.isEnabled=!!t.length,this.value=this._getSingleValue(t)}execute(e={}){const{value:t,batch:i}=e,r=this.editor.model,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),s=this._getValueToSet(t);r.enqueueChange(i,a=>{s?o.forEach(l=>a.setAttribute(this.attributeName,s,l)):o.forEach(l=>a.removeAttribute(this.attributeName,l))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);return t!==this._defaultValue?t:void 0}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(i=>this._getAttribute(i)===t)?t:void 0}}class $M extends jM{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if((e=DM(e,"px"))!==this._defaultValue)return e}}class HM extends C{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Wu]}init(){const e=this.editor,t=FM(e.config.get("table.tableCellProperties.defaultProperties"));rM(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new $M(e,t.width))}}class UM extends G{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:i}=this.editor;let{table:r=t.document.selection.getSelectedElement(),columnWidths:o,tableWidth:s}=e;o&&(o=Array.isArray(o)?o:o.split(",")),t.change(a=>{s?a.setAttribute("tableWidth",s,r):a.removeAttribute("tableWidth",r);const l=i.get("TableColumnResizeEditing").getColumnGroupElement(r);if(!o&&!l)return;if(!o)return a.remove(l);const c=$u(o);if(l)Array.from(l.getChildren()).forEach((d,u)=>a.setAttribute("columnWidth",c[u],d));else{const d=a.createElement("tableColumnGroup");c.forEach(u=>a.appendElement("tableColumn",{columnWidth:u},d)),a.append(d,r)}})}}function WM(n){return e=>e.on("element:colgroup",(t,i,r)=>{const o=i.modelCursor.findAncestor("table"),s=Ts(o);if(!s)return;const a=Es(s),l=n.getColumns(o);let c=(d=s,u=r.writer,Es(d).reduce((h,g)=>{const p=g.getAttribute("columnWidth"),f=g.getAttribute("colSpan");if(!f)return h.push(p),h;for(let b=0;b<f;b++)h.push(p);return u.removeAttribute("colSpan",g),h},[]));var d,u;c=Array.from({length:l},(h,g)=>c[g]||"auto"),(c.length!=a.length||c.includes("auto"))&&D0(a,s,$u(c),r.writer)},{priority:"low"})}const K0=xn("px");class qM extends C{constructor(e){super(e),m(this,"_isResizingActive"),m(this,"_resizingData"),m(this,"_domEmitter"),m(this,"_tableUtilsPlugin"),m(this,"_initialMouseEventData",null),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Mt()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,i,r)=>{const o=r?"removeClass":"addClass";e.editing.view.change(s=>{for(const a of e.editing.view.document.roots)s[o]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}static get requires(){return[Wu,pt]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:r=>r.is("element","tableColumnGroup"),positionOffset:0});const i=new UM(e);e.commands.add("resizeTableWidth",i),e.commands.add("resizeColumnWidths",i),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",i,"isEnabled",(r,o,s)=>!r&&o&&s)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Ts(e)}getTableColumnElements(e){return Es(e)}getTableColumnsWidths(e){return function(t){return Es(t).map(i=>i.getAttribute("columnWidth"))}(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const e=this.editor.model;function t(i,r,o){const s=o._tableUtilsPlugin.getColumns(r);if(s-i.length===0)return i;const a=i.map(d=>Number(d.replace("%",""))),l=function(d,u){const h=new Set;for(const g of d.getChanges())if(g.type=="insert"&&g.position.nodeAfter&&g.position.nodeAfter.name=="tableCell"&&g.position.nodeAfter.getAncestors().includes(u))h.add(g.position.nodeAfter);else if(g.type=="remove"){const p=g.position.nodeBefore||g.position.nodeAfter;p.name=="tableCell"&&p.getAncestors().includes(u)&&h.add(p)}return h}(o.editor.model.document.differ,r);for(const d of l){const u=s-a.length;if(u===0)continue;const h=u>0,g=o._tableUtilsPlugin.getCellLocation(d).column;if(h){const p=gM(r,o.editor),f=(c=p,Array(u).fill(c));a.splice(g,0,...f)}else{const p=a.splice(g,Math.abs(u));a[g]+=As(p)}}var c;return a.map(d=>d+"%")}e.document.registerPostFixer(i=>{let r=!1;for(const o of function(s){const a=new Set;for(const l of s.document.differ.getChanges()){let c=null;switch(l.type){case"insert":c=["table","tableRow","tableCell"].includes(l.name)?l.position:null;break;case"remove":c=["tableRow","tableCell"].includes(l.name)?l.position:null;break;case"attribute":l.range.start.nodeAfter&&(c=["table","tableRow","tableCell"].includes(l.range.start.nodeAfter.name)?l.range.start:null)}if(!c)continue;const d=c.nodeAfter&&c.nodeAfter.is("element","table")?c.nodeAfter:c.findAncestor("table");for(const u of s.createRangeOn(d).getItems())u.is("element","table")&&Ts(u)&&a.add(u)}return a}(e)){const s=this.getColumnGroupElement(o),a=this.getTableColumnElements(s),l=this.getTableColumnsWidths(s);let c=$u(l);c=t(c,o,this),Xs(l,c)||(D0(a,s,c,i),r=!0)}return r})}_registerConverters(){const e=this.editor.conversion;e.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:t=>t.getStyle("width")}}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:t=>({name:"figure",key:"style",value:{width:t}})}),e.elementToElement({model:"tableColumnGroup",view:"colgroup"}),e.elementToElement({model:"tableColumn",view:"col"}),e.for("downcast").add(t=>t.on("insert:table",(i,r,o)=>{const s=o.writer,a=r.item,l=o.mapper.toViewElement(a),c=l.is("element","table")?l:Array.from(l.getChildren()).find(d=>d.is("element","table"));Ts(a)?s.addClass("ck-table-resized",c):s.removeClass("ck-table-resized",c)},{priority:"low"})),e.for("upcast").add(WM(this._tableUtilsPlugin)),e.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:t=>{const i=t.getStyle("width");return i&&(i.endsWith("%")||i.endsWith("pt"))?i:"auto"}}}),e.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),e.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:t=>({key:"style",value:{width:t}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(q0),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(R.window.document,"mousemove",Pr(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(R.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const t=this.editor,i=t.editing.view.domConverter,r=i.mapViewToDom(e.findAncestor("table")),o=i.mapViewToDom(e.findAncestor(d=>["td","th"].includes(d.name))),s=new K(r),a=new K(o),l=K0(Number((s.top-a.top).toFixed(4))),c=K0(Number((a.bottom-s.bottom).toFixed(4)));t.editing.view.change(d=>{d.setStyle("top",l,e),d.setStyle("bottom",c,e)})}_resetResizerStyles(e){this.editor.editing.view.change(t=>{t.removeStyle("top",e),t.removeStyle("bottom",e)})}_onMouseOverHandler(e,t){const i=t.target;i.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(i)}_onMouseOutHandler(e,t){const i=t.target;i.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(i))}_onMouseDownHandler(e,t){const i=t.target;if(!i.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const r=this.editor,o=r.editing.mapper.toModelElement(i.findAncestor("figure"));r.model.canEditAt(o)&&(t.preventDefault(),e.stop(),this._initialMouseEventData=t)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:t}=e,i=this.editor.editing.mapper.toModelElement(t.findAncestor("figure")),r=t.findAncestor("table"),o=function(s,a,l){const c=Array(a.getColumns(s)),d=new Ae(s);for(const u of d){const h=l.editing.mapper.toViewElement(u.cell),g=pM(l.editing.view.domConverter.mapViewToDom(h));(!c[u.column]||g<c[u.column])&&(c[u.column]=ci(g))}return c}(i,this._tableUtilsPlugin,this.editor);Array.from(r.getChildren()).find(s=>s.is("element","colgroup"))||this.editor.editing.view.change(s=>{(function(a,l,c){const d=a.createContainerElement("colgroup");for(let u=0;u<l.length;u++){const h=a.createEmptyElement("col"),g=`${ci(l[u]/As(l)*100)}%`;a.setStyle("width",g,h),a.insert(a.createPositionAt(d,"end"),h)}a.insert(a.createPositionAt(c,0),d)})(s,o,r)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,o),this.editor.editing.view.change(s=>function(a,l,c){const d=c.widths.viewFigureWidth/c.widths.viewFigureParentWidth;a.addClass("ck-table-resized",l),a.addClass("ck-table-column-resizer__active",c.elements.viewResizer),a.setStyle("width",`${ci(100*d)}%`,l.findAncestor("figure"))}(s,r,this._resizingData))}_onMouseMoveHandler(e,t){if(this._initialMouseEventData){const A=this._initialMouseEventData.domEvent;if(!(Math.abs(t.clientX-A.clientX)>=3))return;this._startResizingAfterThreshold(),this._initialMouseEventData=null}if(!this._isResizingActive)return;if(!this._isResizingAllowed)return void this._onMouseUpHandler();const{columnPosition:i,flags:{isRightEdge:r,isTableCentered:o,isLtrContent:s},elements:{viewFigure:a,viewLeftColumn:l,viewRightColumn:c,viewResizer:d},widths:{viewFigureParentWidth:u,tableWidth:h,leftColumnWidth:g,rightColumnWidth:p}}=this._resizingData,f=40-g,b=r?u-h:p-40,k=(s?1:-1)*(r&&o?2:1),w=(_=(t.clientX-i)*k,y=Math.min(f,0),x=Math.max(b,0),ci(_<=y?y:_>=x?x:_));var _,y,x;w!==0&&(this.editor.editing.view.change(A=>{const I=ci(100*(g+w)/h);if(A.setStyle("width",`${I}%`,l),r){const M=ci(100*(h+w)/u);A.setStyle("width",`${M}%`,a)}else{const M=ci(100*(p-w)/h);A.setStyle("width",`${M}%`,c)}}),this._recalculateResizerElement(d))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:i,viewColgroup:r}=this._resizingData.elements,o=this.editor,s=o.editing.view,a=this.getColumnGroupElement(t),l=Array.from(r.getChildren()).filter(f=>f.is("view:element")),c=a?this.getTableColumnsWidths(a):null,d=l.map(f=>f.getStyle("width")),u=!Xs(c,d),h=t.getAttribute("tableWidth"),g=i.getStyle("width"),p=h!==g;(u||p)&&(this._isResizingAllowed?o.execute("resizeTableWidth",{table:t,tableWidth:`${ci(g)}%`,columnWidths:d}):s.change(f=>{if(c)for(const b of l)f.setStyle("width",c.shift(),b);else f.remove(r);p&&(h?f.setStyle("width",h,i):f.removeStyle("width",i)),c||h||f.removeClass("ck-table-resized",[...i.getChildren()].find(b=>b.name==="table"))})),s.change(f=>{f.removeClass("ck-table-column-resizer__active",e)}),s.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const i=this.editor,r=e.domEvent.clientX,o=e.target,s=o.findAncestor("td")||o.findAncestor("th"),a=i.editing.mapper.toModelElement(s),l=a.findAncestor("table"),c=function(w,_){const y=_.getCellLocation(w).column;return{leftEdge:y,rightEdge:y+(w.getAttribute("colspan")||1)-1}}(a,this._tableUtilsPlugin).rightEdge,d=c===this._tableUtilsPlugin.getColumns(l)-1,u=!l.hasAttribute("tableAlignment"),h=i.locale.contentLanguageDirection!=="rtl",g=s.findAncestor("table"),p=g.findAncestor("figure"),f=[...g.getChildren()].find(w=>w.is("element","colgroup")),b=f.getChild(c),k=d?void 0:f.getChild(c+1);return{columnPosition:r,flags:{isRightEdge:d,isTableCentered:u,isLtrContent:h},elements:{viewResizer:o,modelTable:l,viewFigure:p,viewColgroup:f,viewLeftColumn:b,viewRightColumn:k},widths:{viewFigureParentWidth:ju(i.editing.view.domConverter.mapViewToDom(p.parent)),viewFigureWidth:ju(i.editing.view.domConverter.mapViewToDom(p)),tableWidth:R0(l,i),leftColumnWidth:t[c],rightColumnWidth:d?void 0:t[c+1]}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,i,r)=>{const o=i.item,s=r.mapper.toViewElement(o),a=r.writer;a.insert(a.createPositionAt(s,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class GM extends C{static get requires(){return[qM,HM]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}const ZM=`:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-dialog-background:var(--ck-custom-background);--ck-color-dialog-form-header-border:var(--ck-custom-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-color-light-red:#fcc;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;box-sizing:border-box;height:auto;margin:0;padding:0;position:static;text-decoration:none;transition:none;vertical-align:middle;width:auto}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}.ck.ck-autocomplete>.ck-search__results{background:var(--ck-color-base-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;max-height:200px;min-width:auto;overflow-y:auto}.ck-rounded-corners .ck.ck-autocomplete>.ck-search__results,.ck.ck-autocomplete>.ck-search__results.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-autocomplete>.ck-search__results{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{border-top-left-radius:0;border-top-right-radius:0;margin-top:-1px}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;background:var(--ck-color-button-default-background);border:1px solid transparent;border-radius:0;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion:reduce){.ck.ck-button,a.ck.ck-button{transition:none}}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit;opacity:.5}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-medium)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background);color:var(--ck-color-button-on-color)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background);color:var(--ck-color-button-action-text)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;border-radius:0;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);border-radius:0;height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}@media (prefers-reduced-motion:reduce){.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{transition:none}}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}.ck.ck-button.ck-list-item-button{padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2)}.ck.ck-button.ck-list-item-button,.ck.ck-button.ck-list-item-button.ck-on{background:var(--ck-color-list-background);color:var(--ck-color-text)}[dir=ltr] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-right:var(--ck-spacing-small)}.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable),.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable):not(.ck-disabled),.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled):not(.ck-disabled){color:var(--ck-color-text)}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{transition:box-shadow .2s ease}@media (forced-colors:none){.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}}@media (forced-colors:active){.ck.ck-color-grid__tile{height:unset;min-height:unset;min-width:unset;padding:0 var(--ck-spacing-small);width:unset}.ck.ck-color-grid__tile .ck-button__label{display:inline-block}}@media (prefers-reduced-motion:reduce){.ck.ck-color-grid__tile{transition:none}}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer){height:15px;width:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}:root{--ck-dialog-overlay-background-color:rgba(0,0,0,.5);--ck-dialog-drop-shadow:0px 0px 6px 2px rgba(0,0,0,.15);--ck-dialog-max-width:100vw;--ck-dialog-max-height:90vh;--ck-color-dialog-background:var(--ck-color-base-background);--ck-color-dialog-form-header-border:var(--ck-color-base-border)}.ck.ck-dialog-overlay{animation:ck-dialog-fade-in .3s;background:var(--ck-dialog-overlay-background-color);z-index:var(--ck-z-dialog)}.ck.ck-dialog{--ck-drop-shadow:var(--ck-dialog-drop-shadow);background:var(--ck-color-dialog-background);border:1px solid var(--ck-color-base-border);border-radius:0;max-height:var(--ck-dialog-max-height);max-width:var(--ck-dialog-max-width);overscroll-behavior:contain}.ck-rounded-corners .ck.ck-dialog,.ck.ck-dialog.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dialog{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dialog .ck.ck-form__header{border-bottom:1px solid var(--ck-color-dialog-form-header-border)}.ck-dialog-scroll-locked{overflow:hidden}@keyframes ck-dialog-fade-in{0%{background:transparent}to{background:var(--ck-dialog-overlay-background-color)}}.ck.ck-dialog .ck.ck-dialog__actions{padding:var(--ck-spacing-large)}.ck.ck-dialog .ck.ck-dialog__actions>*+*{margin-left:var(--ck-spacing-large)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;bottom:0;min-width:100%}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button{border-radius:0;padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2);width:100%}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus{border-color:transparent;box-shadow:none}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-icon-spacing:not(:has(.ck-button__icon))>.ck-button__label{margin-left:calc(var(--ck-icon-size) - var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-right:calc(var(--ck-spacing-small)*-1);transform:rotate(-90deg)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-left:calc(var(--ck-spacing-small)*-1);transform:rotate(90deg)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-dropdown-menu-list__nested-menu__button__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}:root{--ck-dropdown-menu-menu-item-min-width:18em}.ck.ck-dropdown-menu-list__nested-menu__item{min-width:var(--ck-dropdown-menu-menu-item-min-width)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button{border-radius:0}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container,.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size:20px}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus{border-color:transparent;box-shadow:none}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}:root{--ck-dropdown-menu-menu-panel-max-width:75vw}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;height:fit-content;max-width:var(--ck-dropdown-menu-menu-panel-max-width)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:after,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:before{display:none}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_es,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_se{border-top-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_sw,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ws{border-top-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_en,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ne{border-bottom-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_nw,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_wn{border-bottom-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:focus{outline:none}:root{--ck-accessibility-help-dialog-max-width:600px;--ck-accessibility-help-dialog-max-height:400px;--ck-accessibility-help-dialog-border-color:#ccced1;--ck-accessibility-help-dialog-code-background-color:#ededed;--ck-accessibility-help-dialog-kbd-shadow-color:#9c9c9c}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{border:1px solid transparent;max-height:var(--ck-accessibility-help-dialog-max-height);max-width:var(--ck-accessibility-help-dialog-max-width);overflow:auto;padding:var(--ck-spacing-large);user-select:text}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content *{white-space:normal}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label{display:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3{font-size:1.2em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4{font-size:1em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table{margin:1em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl{border-bottom:none;border-top:1px solid var(--ck-accessibility-help-dialog-border-color);display:grid;grid-template-columns:2fr 1fr}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{border-bottom:1px solid var(--ck-accessibility-help-dialog-border-color);padding:.4em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{grid-column-start:1}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{grid-column-start:2;text-align:right}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{background:var(--ck-accessibility-help-dialog-code-background-color);border-radius:2px;display:inline-block;font-size:.9em;line-height:1;padding:.4em;text-align:center;vertical-align:middle}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{font-family:monospace}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{box-shadow:0 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);margin:0 1px;min-width:1.8em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd+kbd{margin-left:2px}:root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}:root{--ck-form-header-height:44px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}[dir=ltr] .ck.ck-form__header>.ck-icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-form__header>.ck-icon{margin-left:var(--ck-spacing-medium)}.ck.ck-form__header .ck-form__header__label{--ck-font-size-base:15px;font-weight:700}.ck.ck-form__header:has(.ck-button-back.ck-hidden){padding-inline:var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-form__header:has(.ck-button-back:not(.ck-hidden)){padding-inline:var(--ck-spacing-small) var(--ck-spacing-small)}.ck.ck-form__header>.ck-button-back{margin-inline-end:var(--ck-spacing-small)}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal));--ck-icon-font-size:.8333350694em}.ck.ck-icon{font-size:var(--ck-icon-font-size);height:var(--ck-icon-size);width:var(--ck-icon-size)}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}:root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);border-radius:0;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion:reduce){.ck.ck-input{transition:none}}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}@media (prefers-reduced-motion:reduce){.ck.ck-input.ck-error{animation:none}}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}.ck.ck-label{font-weight:700}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;top:0;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0;transform:translate(calc(var(--ck-spacing-medium)*-1),-6px) scale(.75);transform-origin:100% 0}@media (prefers-reduced-motion:reduce){.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transition:none}}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}.ck.ck-labeled-field-view.ck-labeled-field-view_full-width{flex-grow:1}.ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}.ck.ck-list{background:var(--ck-color-list-background);border-radius:0;list-style-type:none;padding:var(--ck-spacing-small) 0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list__item{cursor:default;min-width:15em}.ck.ck-list__item>.ck-button:not(.ck-list-item-button){border-radius:0;min-height:unset;padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2);width:100%}[dir=ltr] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:left}[dir=rtl] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:right}.ck.ck-list__item>.ck-button:not(.ck-list-item-button) .ck-button__label{line-height:calc(var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button){background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck-list .ck-list__group{padding-top:var(--ck-spacing-medium)}.ck-list .ck-list__group:first-child{padding-top:0}:not(.ck-hidden)~.ck-list .ck-list__group{border-top:1px solid var(--ck-color-base-border)}.ck-list .ck-list__group>.ck-label{font-size:11px;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large) 0}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;margin:var(--ck-spacing-small) 0;width:100%}.ck.ck-menu-bar{background:var(--ck-color-base-background);border:1px solid var(--ck-color-toolbar-border);display:flex;flex-wrap:wrap;gap:var(--ck-spacing-small);justify-content:flex-start;padding:var(--ck-spacing-small);width:100%}.ck.ck-menu-bar__menu{font-size:inherit}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level{max-width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button{width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button{min-height:unset;padding:var(--ck-spacing-small) var(--ck-spacing-medium)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-button__label{line-height:unset;overflow:visible;width:unset}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-icon{display:none}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button{border-radius:0}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{margin-left:var(--ck-spacing-standard);margin-right:calc(var(--ck-spacing-small)*-1);transform:rotate(-90deg)}[dir=rtl] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{left:var(--ck-spacing-standard);margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small);transform:rotate(90deg)}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button.ck-disabled>.ck-menu-bar__menu__button__arrow{opacity:var(--ck-disabled-opacity)}:root{--ck-menu-bar-menu-item-min-width:18em}.ck.ck-menu-bar__menu .ck.ck-menu-bar__menu__item{min-width:var(--ck-menu-bar-menu-item-min-width)}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button{border-radius:0}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container,.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size:20px}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{font-size:var(--ck-icon-font-size)}[dir=ltr] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-left:var(--ck-spacing-medium)}:root{--ck-menu-bar-menu-panel-max-width:75vw}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;bottom:0;height:fit-content;max-width:var(--ck-menu-bar-menu-panel-max-width)}.ck-rounded-corners .ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{border-top-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{border-top-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne{border-bottom-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{border-bottom-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel:focus{outline:none}.ck.ck-menu-bar .ck-list-item-button:active,.ck.ck-menu-bar .ck-list-item-button:focus{border-color:transparent;box-shadow:none}.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:active,.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none;position:relative;z-index:2}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);border-radius:0;min-height:15px}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number,.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}:root{--ck-search-field-view-horizontal-spacing:calc(var(--ck-icon-size) + var(--ck-spacing-medium))}.ck.ck-search>.ck-labeled-field-view .ck-input{width:100%}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon{--ck-labeled-field-label-default-position-x:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon>.ck-labeled-field-view__input-wrapper>.ck-icon{opacity:.5;pointer-events:none}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input,[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty){padding-left:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset{--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty{--ck-labeled-field-empty-unfocused-max-width:100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{background:none;min-height:auto;min-width:auto;opacity:.5;padding:0}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{left:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover{opacity:1}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty),[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{padding-right:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-search__results{min-width:100%}.ck.ck-search>.ck-search__results>.ck-search__info{padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-search>.ck-search__results>.ck-search__info *{white-space:normal}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{font-weight:700}.ck.ck-search>.ck-search__results>.ck-search__info>span:last-child{margin-top:var(--ck-spacing-medium)}.ck.ck-spinner-container{animation:ck-spinner-rotate 1.5s linear infinite;height:var(--ck-toolbar-spinner-size);width:var(--ck-toolbar-spinner-size)}@media (prefers-reduced-motion:reduce){.ck.ck-spinner-container{animation-duration:3s}}.ck.ck-spinner{border:2px solid var(--ck-color-text);border-radius:50%;border-top:2px solid transparent;height:var(--ck-toolbar-spinner-size);width:var(--ck-toolbar-spinner-size)}@keyframes ck-spinner-rotate{to{transform:rotate(1turn)}}.ck-textarea{overflow-x:hidden}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);border-radius:0;padding:0 var(--ck-spacing-small)}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar .ck.ck-toolbar__separator{background:var(--ck-color-toolbar-border);height:var(--ck-icon-size);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-tooltip-text-padding:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);box-shadow:none;padding:0 var(--ck-spacing-medium)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text{display:inline-block;max-width:200px;padding:var(--ck-tooltip-text-padding) 0;white-space:break-spaces}.ck.ck-balloon-panel.ck-tooltip:before{display:none}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{border:solid var(--ck-color-base-border);border-radius:0;border-width:1px 1px 0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky{border-bottom-width:1px}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-menu-bar{border:0;border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar{border:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}:root{--ck-bookmark-icon-hover-fill-color:var(--ck-color-widget-hover-border);--ck-bookmark-icon-selected-fill-color:var(--ck-color-focus-border);--ck-bookmark-icon-animation-duration:var(--ck-widget-handler-animation-duration);--ck-bookmark-icon-animation-curve:var(--ck-widget-handler-animation-curve)}.ck .ck-bookmark.ck-widget{display:inline-block;outline:none}.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon__fill{transition:fill var(--ck-bookmark-icon-animation-duration) var(--ck-bookmark-icon-animation-curve)}.ck .ck-bookmark.ck-widget:hover .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-hover-fill-color)}.ck .ck-bookmark.ck-widget.ck-widget_selected .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-selected-fill-color)}.ck .ck-bookmark.ck-widget.ck-widget_selected,.ck .ck-bookmark.ck-widget.ck-widget_selected:hover{outline:none}.ck .ck-bookmark.ck-widget .ck-bookmark__icon{display:block;position:relative;top:-.1em}.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon{height:1.2em;vertical-align:middle;width:auto}.ck .ck-fake-bookmark-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-bookmark-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}:root{--ck-bookmark-form-width:340px}@media screen and (max-width:600px){:root{--ck-bookmark-form-width:300px}}.ck.ck-bookmark-form{width:var(--ck-bookmark-form-width)}.ck.ck-bookmark-balloon .ck.ck-toolbar>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-bookmark-toolbar__preview{cursor:default;font-weight:400;max-width:var(--ck-input-width);min-width:3em;overflow:hidden;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);height:0;margin-top:-1px}.ck.ck-clipboard-drop-target-line:before{border-style:solid;content:"";height:0;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-width)*-.5);width:0}[dir=ltr] .ck.ck-clipboard-drop-target-line:before{border-color:transparent transparent transparent var(--ck-clipboard-drop-target-color);border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height);left:-1px}[dir=rtl] .ck.ck-clipboard-drop-target-line:before{border-color:transparent var(--ck-clipboard-drop-target-color) transparent transparent;border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0;right:-1px}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{background:var(--ck-color-code-block-label-background);color:#fff;font-family:var(--ck-font-face);font-size:10px;line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);right:10px;top:-1px;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media (forced-colors:active){.ck .ck-placeholder,.ck.ck-placeholder{forced-color-adjust:preserve-parent-color}}.ck .ck-placeholder:before,.ck.ck-placeholder:before{cursor:text}@media (forced-colors:none){.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text)}}@media (forced-colors:active){.ck .ck-placeholder:before,.ck.ck-placeholder:before{font-style:italic;margin-left:1px}}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-content:stretch;align-items:center;flex:1 1 auto;flex-direction:row;flex-wrap:wrap;margin:0;padding:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*,[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*,[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view .ck-input,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view .ck-input{min-width:50px;width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-items:flex-start}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{color:var(--ck-color-base-border);top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{flex:0 0 100%;padding-top:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-right:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(var(--ck-spacing-large)*-1)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-switchbutton{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;width:100%}@media screen and (max-width:600px){.ck.ck-find-and-replace-form{max-width:100%;width:300px}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input{flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input .ck-labeled-field-view{flex:1 0 auto;margin-bottom:var(--ck-spacing-standard);width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type .ck-button__label{text-align:center;width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view){flex:1 1 auto;flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button .ck-button__label{text-align:center;width:100%}}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}:root{--ck-html-embed-content-width:calc(100% - var(--ck-icon-size)*1.5);--ck-html-embed-source-height:10em;--ck-html-embed-unfocused-outline-width:1px;--ck-html-embed-content-min-height:calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background:var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color:#737373}.ck-widget.raw-html-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);top:calc(var(--ck-html-embed-unfocused-outline-width)*-1);transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{background:var(--ck-color-focus-border);padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{right:var(--ck-spacing-standard);top:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;direction:ltr;font-family:monospace;font-size:var(--ck-font-size-base);height:var(--ck-html-embed-source-height);min-width:0;padding:var(--ck-spacing-standard);resize:none;tab-size:4;text-align:left;white-space:pre-wrap;width:var(--ck-html-embed-content-width)}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{background-color:var(--ck-color-base-foreground);box-sizing:border-box}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}:root{--ck-image-insert-insert-by-url-width:250px}.ck.ck-image-insert-url{--ck-input-width:100%}.ck.ck-image-insert-url .ck-image-insert-url__action-row{grid-column-gap:var(--ck-spacing-large);margin-top:var(--ck-spacing-large)}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-cancel,.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-save{justify-content:center;min-width:auto}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}.ck.ck-image-insert-form>.ck.ck-button{display:block;width:100%}[dir=ltr] .ck.ck-image-insert-form>.ck.ck-button{text-align:left}[dir=rtl] .ck.ck-image-insert-form>.ck.ck-button{text-align:right}.ck.ck-image-insert-form>.ck.ck-collapsible{min-width:var(--ck-image-insert-insert-by-url-width)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:first-child){border-top:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:last-child){border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-image-insert-url{min-width:var(--ck-image-insert-insert-by-url-width);padding:var(--ck-spacing-large)}.ck.ck-image-insert-form:focus{outline:none}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{animation-delay:0ms,3s;animation-duration:.5s,.5s;animation-fill-mode:forwards,forwards;animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;background:var(--ck-color-image-upload-icon-background);font-size:calc(1px*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));opacity:0;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{animation-delay:.5s;animation-duration:.5s;animation-fill-mode:forwards;animation-name:ck-upload-complete-icon-check;border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);box-sizing:border-box;height:0;left:25%;opacity:0;top:50%;transform:scaleX(-1) rotate(135deg);transform-origin:left top;width:0}@media (prefers-reduced-motion:reduce){.ck-image-upload-complete-icon{animation-duration:0ms}.ck-image-upload-complete-icon:after{animation:none;height:.45em;opacity:1;width:.3em}}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{height:0;opacity:1;width:0}33%{height:0;width:.3em}to{height:.45em;opacity:1;width:.3em}}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px;--ck-upload-placeholder-image-aspect-ratio:2.8}.ck .ck-image-upload-placeholder{margin:0;width:100%}.ck .ck-image-upload-placeholder.image-inline{width:calc(var(--ck-upload-placeholder-loader-size)*2*var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{height:100%;width:100%}.ck .ck-upload-placeholder-loader:before{animation:ck-upload-placeholder-loader 1s linear infinite;border-radius:50%;border-right:2px solid transparent;border-top:3px solid var(--ck-color-upload-placeholder-loader);height:var(--ck-upload-placeholder-loader-size);width:var(--ck-upload-placeholder-loader-size)}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}@media (prefers-reduced-motion:reduce){.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:none;opacity:1}}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{background:var(--ck-color-upload-bar-background);height:2px;transition:width .1s;width:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}:root{--ck-text-alternative-form-width:340px}@media screen and (max-width:600px){:root{--ck-text-alternative-form-width:300px}}.ck.ck-text-alternative-form.ck-responsive-form{width:var(--ck-text-alternative-form-width)}:root{--ck-image-custom-resize-form-width:340px}@media screen and (max-width:600px){:root{--ck-image-custom-resize-form-width:300px}}.ck.ck-image-custom-resize-form.ck-responsive-form{width:var(--ck-image-custom-resize-form-width)}.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}:root{--ck-link-bookmark-icon-size:calc(var(--ck-icon-size)*0.7)}.ck.ck-toolbar.ck-link-toolbar>.ck-toolbar__items{flex-wrap:nowrap}a.ck.ck-button.ck-link-toolbar__preview{color:var(--ck-color-link-default);cursor:pointer;justify-content:center;padding:0 var(--ck-spacing-medium)}a.ck.ck-button.ck-link-toolbar__preview .ck.ck-button__label{max-width:var(--ck-input-width);text-overflow:ellipsis}a.ck.ck-button.ck-link-toolbar__preview,a.ck.ck-button.ck-link-toolbar__preview:active,a.ck.ck-button.ck-link-toolbar__preview:focus,a.ck.ck-button.ck-link-toolbar__preview:hover{background:none}a.ck.ck-button.ck-link-toolbar__preview:active{box-shadow:none}a.ck.ck-button.ck-link-toolbar__preview:focus,a.ck.ck-button.ck-link-toolbar__preview:hover{text-decoration:underline}a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{height:var(--ck-link-bookmark-icon-size);width:var(--ck-link-bookmark-icon-size)}[dir=ltr] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-tiny)}[dir=rtl] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{margin-left:var(--ck-spacing-tiny);margin-right:var(--ck-spacing-small)}a.ck.ck-button.ck-link-toolbar__preview:has(.ck-icon){padding-left:var(--ck-spacing-extra-tiny )}:root{--ck-link-panel-width:340px;--ck-link-provider-list-item-text-height:calc(var(--ck-line-height-base)*var(--ck-font-size-base));--ck-link-provider-list-item-height:calc(var(--ck-link-provider-list-item-text-height) + var(--ck-spacing-small) + var(--ck-spacing-small))}@media screen and (max-width:600px){:root{--ck-link-panel-width:300px}}.ck.ck-form.ck-link-form{padding-bottom:0;width:var(--ck-link-panel-width)}@media screen and (max-width:600px){.ck.ck-form.ck-link-form.ck-responsive-form .ck-labeled-field-view{margin:0}}.ck.ck-form.ck-link-form .ck-link-form__providers-list{border-top:1px solid var(--ck-color-base-border)}.ck.ck-form.ck-link-form .ck-link-form__providers-list:has(.ck-list__item:nth-child(n+5)){max-height:calc(var(--ck-link-provider-list-item-height)*4 + var(--ck-spacing-large) + 1px);overflow:auto}.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button{border-radius:0;padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button>.ck-button__label{overflow:hidden;text-overflow:ellipsis}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:"";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}:root{--ck-link-properties-width:340px}@media screen and (max-width:600px){:root{--ck-link-properties-width:300px}}.ck.ck-link-properties{width:var(--ck-link-properties-width)}:root{--ck-link-providers-width:340px;--ck-link-list-view-max-height:240px;--ck-link-list-view-icon-size:calc(var(--ck-icon-size)*0.8)}@media screen and (max-width:600px){:root{--ck-link-providers-width:300px}}.ck.ck-link-providers{width:var(--ck-link-providers-width)}.ck.ck-link-providers .ck-form__header__label{overflow:hidden;text-overflow:ellipsis}.ck.ck-link-providers>.ck-link-providers__list{max-height:min(var(--ck-link-list-view-max-height),40vh)}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-icon{height:var(--ck-link-list-view-icon-size);width:var(--ck-link-list-view-icon-size)}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-button__label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck.ck-link-providers .ck-link__empty-list-info{font-style:italic;padding:calc(var(--ck-spacing-large)*2) var(--ck-spacing-medium);text-align:center}.ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;margin-bottom:calc(var(--ck-spacing-tiny)*-1);padding-left:0;padding-right:0}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{background:none;border-color:transparent;box-shadow:none}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-list{column-gap:var(--ck-spacing-medium);grid-template-columns:repeat(3,auto);padding:var(--ck-spacing-large);row-gap:var(--ck-spacing-medium)}.ck.ck-list-styles-list .ck-button{box-sizing:content-box;margin:0;padding:0}.ck.ck-list-styles-list .ck-button,.ck.ck-list-styles-list .ck-button .ck-icon{height:var(--ck-list-style-button-size);width:var(--ck-list-style-button-size)}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{background:var(--ck-color-base-foreground);padding:calc(var(--ck-spacing-standard)*3)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{background-position:50%;background-size:cover;height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);min-width:var(--ck-media-embed-placeholder-icon-size)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{height:100%;width:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);font-style:italic;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-height:380px;max-width:300px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Im0yMDYuNDc3IDI2MC45LTI4Ljk4NyAyOC45ODdhNS4yMTggNS4yMTggMCAwIDAgMy43OCAxLjYxaDQ5LjYyMWMxLjY5NCAwIDMuMTktLjc5OCA0LjE0Ni0yLjAzN3oiIGZpbGw9IiM1Yzg4YzUiLz48cGF0aCBkPSJNMjI2Ljc0MiAyMjIuOTg4Yy05LjI2NiAwLTE2Ljc3NyA3LjE3LTE2Ljc3NyAxNi4wMTQuMDA3IDIuNzYyLjY2MyA1LjQ3NCAyLjA5MyA3Ljg3NS40My43MDMuODMgMS40MDggMS4xOSAyLjEwNy4zMzMuNTAyLjY1IDEuMDA1Ljk1IDEuNTA4LjM0My40NzcuNjczLjk1Ny45ODggMS40NCAxLjMxIDEuNzY5IDIuNSAzLjUwMiAzLjYzNyA1LjE2OC43OTMgMS4yNzUgMS42ODMgMi42NCAyLjQ2NiAzLjk5IDIuMzYzIDQuMDk0IDQuMDA3IDguMDkyIDQuNiAxMy45MTR2LjAxMmMuMTgyLjQxMi41MTYuNjY2Ljg3OS42NjcuNDAzLS4wMDEuNzY4LS4zMTQuOTMtLjc5OS42MDMtNS43NTYgMi4yMzgtOS43MjkgNC41ODUtMTMuNzk0Ljc4Mi0xLjM1IDEuNjczLTIuNzE1IDIuNDY1LTMuOTkgMS4xMzctMS42NjYgMi4zMjgtMy40IDMuNjM4LTUuMTY5LjMxNS0uNDgyLjY0NS0uOTYyLjk4OC0xLjQzOS4zLS41MDMuNjE3LTEuMDA2Ljk1LTEuNTA4LjM1OS0uNy43Ni0xLjQwNCAxLjE5LTIuMTA3IDEuNDI2LTIuNDAyIDItNS4xMTQgMi4wMDQtNy44NzUgMC04Ljg0NC03LjUxMS0xNi4wMTQtMTYuNzc2LTE2LjAxNHoiIGZpbGw9IiNkZDRiM2UiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PGVsbGlwc2Ugcnk9IjUuNTY0IiByeD0iNS44MjgiIGN5PSIyMzkuMDAyIiBjeD0iMjI2Ljc0MiIgZmlsbD0iIzgwMmQyNyIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMTkwLjMwMSAyMzcuMjgzYy00LjY3IDAtOC40NTcgMy44NTMtOC40NTcgOC42MDZzMy43ODYgOC42MDcgOC40NTcgOC42MDdjMy4wNDMgMCA0LjgwNi0uOTU4IDYuMzM3LTIuNTE2IDEuNTMtMS41NTcgMi4wODctMy45MTMgMi4wODctNi4yOSAwLS4zNjItLjAyMy0uNzIyLS4wNjQtMS4wNzloLTguMjU3djMuMDQzaDQuODVjLS4xOTcuNzU5LS41MzEgMS40NS0xLjA1OCAxLjk4Ni0uOTQyLjk1OC0yLjAyOCAxLjU0OC0zLjkwMSAxLjU0OC0yLjg3NiAwLTUuMjA4LTIuMzcyLTUuMjA4LTUuMjk5IDAtMi45MjYgMi4zMzItNS4yOTkgNS4yMDgtNS4yOTkgMS4zOTkgMCAyLjYxOC40MDcgMy41ODQgMS4yOTNsMi4zODEtMi4zOGMwLS4wMDItLjAwMy0uMDA0LS4wMDQtLjAwNS0xLjU4OC0xLjUyNC0zLjYyLTIuMjE1LTUuOTU1LTIuMjE1em00LjQzIDUuNjYuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0ibTIxNS4xODQgMjUxLjkyOS03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVhNS4yMzMgNS4yMzMgMCAwIDAgLjQ0OS0yLjEyM3YtMzEuMTY1Yy0uNDY5LjY3NS0uOTM0IDEuMzQ5LTEuMzgyIDIuMDA1LS43OTIgMS4yNzUtMS42ODIgMi42NC0yLjQ2NSAzLjk5LTIuMzQ3IDQuMDY1LTMuOTgyIDguMDM4LTQuNTg1IDEzLjc5NC0uMTYyLjQ4NS0uNTI3Ljc5OC0uOTMuNzk5LS4zNjMtLjAwMS0uNjk3LS4yNTUtLjg3OS0uNjY3di0uMDEyYy0uNTkzLTUuODIyLTIuMjM3LTkuODItNC42LTEzLjkxNC0uNzgzLTEuMzUtMS42NzMtMi43MTUtMi40NjYtMy45OS0xLjEzNy0xLjY2Ni0yLjMyNy0zLjQtMy42MzctNS4xNjlsLS4wMDItLjAwM3oiIGZpbGw9IiNjM2MzYzMiLz48cGF0aCBkPSJtMjEyLjk4MyAyNDguNDk1LTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOCA1LjIzOGgxLjAxNWwzNS42NjYtMzUuNjY2YTEzNi4yNzUgMTM2LjI3NSAwIDAgMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAgMC0uOTg5LTEuNDQgMzUuMTI3IDM1LjEyNyAwIDAgMC0uOTUtMS41MDhjLS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJtMjExLjk5OCAyNjEuMDgzLTYuMTUyIDYuMTUxIDI0LjI2NCAyNC4yNjRoLjc4MWE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OVptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OVoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzNabTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1Wm0xNjQuNzA2LTUuMTExYzAgMTYuNjk2LTEzLjUzNSAzMC4yMy0zMC4yMzEgMzAuMjMtMTYuNjk1IDAtMzAuMjMtMTMuNTM0LTMwLjIzLTMwLjIzIDAtMTYuNjk2IDEzLjUzNS0zMC4yMzEgMzAuMjMtMzAuMjMxIDE2LjY5NiAwIDMwLjIzMSAxMy41MzUgMzAuMjMxIDMwLjIzMSIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}:root{--ck-color-mention-background:rgba(153,0,48,.1);--ck-color-mention-text:#990030}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}:root{--ck-color-restricted-editing-exception-background:rgba(255,169,77,.2);--ck-color-restricted-editing-exception-hover-background:rgba(255,169,77,.35);--ck-color-restricted-editing-exception-brackets:rgba(204,105,0,.4);--ck-color-restricted-editing-selected-exception-background:rgba(255,169,77,.5);--ck-color-restricted-editing-selected-exception-brackets:rgba(204,105,0,.6)}.ck-editor__editable .restricted-editing-exception{background-color:var(--ck-color-restricted-editing-exception-background);border:1px solid;border-image:linear-gradient(to right,var(--ck-color-restricted-editing-exception-brackets) 0,var(--ck-color-restricted-editing-exception-brackets) 5px,transparent 6px,transparent calc(100% - 6px),var(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-exception-brackets) 100%) 1;transition:background .2s ease-in-out}@media (prefers-reduced-motion:reduce){.ck-editor__editable .restricted-editing-exception{transition:none}}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected{background-color:var(--ck-color-restricted-editing-selected-exception-background);border-image:linear-gradient(to right,var(--ck-color-restricted-editing-selected-exception-brackets) 0,var(--ck-color-restricted-editing-selected-exception-brackets) 5px,var(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-selected-exception-brackets) 100%) 1}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed{padding-left:1ch}.ck-restricted-editing_mode_restricted,.ck-restricted-editing_mode_restricted *{cursor:default}.ck-restricted-editing_mode_restricted .restricted-editing-exception,.ck-restricted-editing_mode_restricted .restricted-editing-exception *{cursor:text}.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover{background:var(--ck-color-restricted-editing-exception-hover-background)}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{overflow-x:hidden;overflow-y:auto}.ck.ck-character-grid .ck-character-grid__tiles{grid-gap:var(--ck-spacing-standard);grid-template-columns:repeat(auto-fill,minmax(var(--ck-character-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-character-grid .ck-character-grid__tile{border:0;font-size:1.5em;height:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-character-grid-tile-size)}@media (prefers-reduced-motion:reduce){.ck.ck-character-grid .ck-character-grid__tile{transition:none}}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);text-align:center;width:100%}.ck.ck-character-info{border-top:1px solid var(--ck-color-base-border);padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-character-info>*{font-size:var(--ck-font-size-small);text-transform:uppercase}.ck.ck-character-info .ck-character-info__name{max-width:280px;overflow:hidden;text-overflow:ellipsis}.ck.ck-character-info .ck-character-info__code{opacity:.6}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;overflow:hidden;text-overflow:ellipsis}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media screen and (max-width:600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{overflow:hidden;text-overflow:ellipsis}}.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}:root{--ck-style-panel-button-width:120px;--ck-style-panel-button-height:80px;--ck-style-panel-button-label-background:#f0f0f0;--ck-style-panel-button-hover-label-background:#ebebeb;--ck-style-panel-button-hover-border-color:#b3b3b3}.ck.ck-style-panel .ck-style-grid{column-gap:var(--ck-spacing-large);row-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background:var(--ck-color-base-background);--ck-color-button-default-active-background:var(--ck-color-base-background);height:var(--ck-style-panel-button-height);padding:0;width:var(--ck-style-panel-button-width)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{flex-shrink:0;height:22px;line-height:22px;overflow:hidden;padding:0 var(--ck-spacing-medium);text-overflow:ellipsis;width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background);opacity:.9;overflow:hidden;padding:var(--ck-spacing-medium);width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background:var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{border-color:var(--ck-color-base-foreground);filter:saturate(.3);opacity:.4}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}.ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}:root{--ck-style-panel-max-height:470px}.ck.ck-style-panel{max-height:var(--ck-style-panel-max-height);overflow-y:auto;padding:var(--ck-spacing-large)}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);border-radius:0;height:20px;width:20px}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}.ck.ck-form__row>:not(.ck-label)+*{margin-inline-start:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}@media (prefers-reduced-motion:reduce){.ck .ck-insert-table-dropdown-grid-box{transition:none}}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}:root{--ck-color-selector-focused-cell-background:rgba(158,201,250,.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-selector-focused-cell-background);outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both;background:var(--ck-color-base-error);border-radius:0;color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}@media (prefers-reduced-motion:reduce){.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}:root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;outline:unset;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}:root{--ck-table-layout-widget-type-around-button-size:16px;--ck-table-layout-widget-type-around-icon-width:10px;--ck-table-layout-widget-type-around-icon-height:8px;--ck-table-layout-widget-handler-icon-size:10px;--ck-table-layout-default-border-color:#d4d4d4}.ck-editor__editable .table.layout-table>table{border-collapse:revert;height:100%;width:100%}.ck-editor__editable .table.layout-table>table:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:none}.ck-editor__editable .table.layout-table>table>tbody>tr>td{box-shadow:revert;min-width:2em;padding:revert;text-indent:1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=" width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*="'width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=";width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style^="width:"]{min-width:auto}.ck-editor__editable .table.layout-table>table>tbody>tr>td:focus{background-color:transparent}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:var(--ck-table-layout-default-border-color) 1px dashed;outline-offset:-1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]):focus{outline:var(--ck-color-focus-border) 1px solid}.ck-editor__editable .table.layout-table>table>tbody>tr>td>.ck-table-bogus-paragraph{text-indent:0;width:calc(100% - 1px)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around{--ck-widget-type-around-button-size:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{transform:translateY(0);z-index:2}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{border-radius:0 0 100px 100px;left:min(10%,30px);margin-left:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before:after{border-radius:0 0 100px 100px}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after:after{border-radius:100px 100px 0 0}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button svg{height:var(--ck-table-layout-widget-type-around-icon-height);width:var(--ck-table-layout-widget-type-around-icon-width)}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_with-selection-handle>.ck-widget__selection-handle{--ck-widget-handler-icon-size:var(--ck-table-layout-widget-handler-icon-size);transform:translateY(calc(0px - var(--ck-widget-outline-thickness)));z-index:3}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:0}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:0}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget{transition:none}}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{box-shadow:var(--ck-inner-shadow),0 0}@media (forced-colors:none){.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background)}}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused:not(td,th),.ck .ck-editor__nested-editable:focus:not(td,th){border:var(--ck-focus-ring);outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck .ck-widget:has(.ck-widget.table:hover){outline-color:transparent}.ck .ck-widget.ck-widget_with-selection-handle:has(.ck-widget.table:hover)>.ck-widget__selection-handle{opacity:0;visibility:hidden}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button svg{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button:hover,.ck .ck-widget .ck-widget__type-around__button:hover svg line,.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:none}}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget:has(.ck-widget.table:hover)>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}.ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}.ck-content blockquote{border-left:5px solid #ccc;font-style:italic;margin-left:0;margin-right:0;overflow:hidden;padding-left:1.5em;padding-right:1.5em}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}:root{--ck-image-processing-highlight-color:#f9fafa;--ck-image-processing-background-color:#e3e5e8}.ck.ck-editor__editable .image.image-processing{position:relative}.ck.ck-editor__editable .image.image-processing:before{animation:ck-image-processing-animation 2s linear infinite;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;content:"";height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.ck.ck-editor__editable .image.image-processing img{height:100%}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{pointer-events:none;position:absolute}.ck-content pre{background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;color:#353535;direction:ltr;font-style:normal;min-width:200px;padding:1em;tab-size:4;text-align:left;white-space:pre-wrap}.ck-content pre code{background:unset;border-radius:0;padding:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-panel)}.ck.ck-menu-bar{border:none;border-bottom:1px solid var(--ck-color-toolbar-border)}:root{--ck-emoji-grid-tile-size:27px}.ck.ck-emoji .ck.ck-emoji__tiles{border-top:1px solid var(--ck-color-base-border);max-height:min(265px,40vh);max-width:100%;overflow-x:hidden;overflow-y:auto}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__grid{grid-gap:var(--ck-spacing-small);display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--ck-emoji-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{border:0;font-size:1.5em;height:var(--ck-emoji-grid-tile-size);min-height:var(--ck-emoji-grid-tile-size);min-width:var(--ck-emoji-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-emoji-grid-tile-size)}@media (prefers-reduced-motion:reduce){.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{transition:none}}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:focus:not(.ck-disabled),.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile .ck-button__label{line-height:var(--ck-emoji-grid-tile-size);text-align:center;width:100%}.ck.ck-emoji__categories-list{display:flex;justify-content:space-between;margin:0 var(--ck-spacing-large)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text{border-width:0;border-bottom:2px solid transparent;font-size:var(--ck-font-size-big);min-height:var(--ck-font-size-big);min-width:var(--ck-font-size-big);padding:0}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text.ck-emoji__category-item.ck-on{border-bottom-color:var(--ck-color-base-active)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text>span{margin:auto}.ck.ck-emoji__skin-tone{margin-left:var(--ck-spacing-standard)}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck.ck-list__item{min-width:1em}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:auto}.ck.ck-form.ck-emoji-picker-form{padding-bottom:0}.ck.ck-form.ck-emoji-picker-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border-color:transparent}.ck.ck-emoji{width:320px}.ck .ck.ck-emoji__search{align-items:center;display:flex;justify-content:space-between;padding:var(--ck-spacing-large);padding-bottom:var(--ck-spacing-medium)}.ck .ck.ck-emoji__search>.ck.ck-search{flex:1}.ck .ck-fake-emoji-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-emoji-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}div.ck.ck-balloon-panel.ck-emoji-picker-balloon{z-index:calc(var( --ck-z-dialog ) + 1)}.ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}.ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}.ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{display:flex}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions.ck-find-and-replace-form__inputs .ck-results-counter,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs.ck-find-and-replace-form__inputs .ck-results-counter{position:absolute}.ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}body.ck-fullscreen,html.ck-fullscreen{--ck-z-fullscreen:10000;--ck-z-default:calc(var(--ck-z-fullscreen) + 1);--ck-z-panel:calc(var(--ck-z-default) + 999);--ck-z-dialog:100000;overflow:hidden}body.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog,html.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog{--ckbox-z-index-root:calc(var(--ck-z-dialog) + 1)}body.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor,html.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor{--ckbox-z-index-preview:calc(var(--ck-z-dialog) + 1)}body.ck-fullscreen .ck-pagination-view-line,html.ck-fullscreen .ck-pagination-view-line{z-index:calc(var(--ck-z-fullscreen) + 1)}body.ck-fullscreen .page-break__label,html.ck-fullscreen .page-break__label{z-index:calc(var(--ck-z-fullscreen) + 2)}.ck.ck-fullscreen__main-wrapper{background:var(--ck-color-base-foreground);display:flex;flex-direction:column;height:100%;left:0;position:fixed;top:0;width:100%;z-index:var(--ck-z-fullscreen)}.ck.ck-fullscreen__main-wrapper .ck.ck-revision-history-ui__changes-navigation{margin-bottom:0;margin-top:0}:not(body>.ck-fullscreen__main-wrapper).ck-fullscreen__main-wrapper{position:absolute}.ck-fullscreen__menu-bar .ck.ck-menu-bar{border:none}.ck-fullscreen__main-wrapper .ck-fullscreen__editable-wrapper{--ck-fullscreen-editor-top-margin:28px;--ck-fullscreen-editor-bottom-margin:28px;display:flex;justify-content:flex-start;max-height:100%;overflow:auto}.ck-fullscreen__sidebar{flex-shrink:0;margin-left:10px;margin-top:var(--ck-fullscreen-editor-top-margin);width:300px}.ck-fullscreen__sidebar[data-ck-fullscreen=right-sidebar]{margin-right:auto}.ck-fullscreen__main-wrapper .ck-fullscreen__editable{height:100%;margin-bottom:56px;margin-left:auto;margin-top:var(--ck-fullscreen-editor-top-margin)}.ck-fullscreen__main-wrapper .ck-fullscreen__editable:after{content:"";display:block;height:var(--ck-fullscreen-editor-bottom-margin)}.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck.ck-editor__editable:not(.ck-editor__nested-editable){background:#fff;border:1px solid var(--ck-color-base-border);box-shadow:0 2px 3px rgba(0,0,0,.078);box-sizing:border-box;height:fit-content;min-height:297mm;padding:20mm 12mm;width:210.52917mm}.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck-source-editing-area{width:210.52917mm}.ck-fullscreen__left-sidebar{--ck-user-avatar-size:28px;align-self:flex-start;background-color:transparent;box-sizing:border-box;display:flex;flex-direction:column;font-family:Helvetica,Arial,sans-serif;height:100%;margin-top:0;position:sticky;top:0}.ck-fullscreen__left-sidebar .ck.ck-presence-list--collapsed{--ck-user-avatar-size:32px}.ck-fullscreen__left-sidebar>:first-child{padding-top:var(--ck-fullscreen-editor-top-margin)}.ck-fullscreen__left-sidebar .ck-presence-list__users-counter__text,.ck-fullscreen__left-sidebar .ck-user{font-size:.85em}.ck-fullscreen__left-sidebar-item{margin-bottom:var(--ck-spacing-medium);padding:var(--ck-spacing-medium)}.ck-fullscreen__left-sidebar-item:last-child{margin-bottom:0}.ck-fullscreen__left-sidebar-header{--ck-fullscreen-presence-list-header-font-size:0.875em;color:var(--ck-document-outline-item-default-color);font-size:var(--ck-fullscreen-presence-list-header-font-size);font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck-fullscreen__left-sidebar--sticky{position:sticky;top:0}.ck-fullscreen__left-sidebar--sticky>:first-child{padding-top:0}.ck-fullscreen__presence-list{margin-top:var(--ck-spacing-medium)}.ck-fullscreen__left-sidebar-item--no-margin{margin:0}.ck-fullscreen__left-sidebar .ck.ck-document-outline{padding-left:0;padding-right:0;padding-top:0}.ck-fullscreen__document-outline-wrapper{overflow-y:auto;padding-top:0}.ck.ck-heading_heading1 .ck-button__label{font-size:20px}.ck.ck-heading_heading2 .ck-button__label{font-size:17px}.ck.ck-heading_heading3 .ck-button__label{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}:root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{background-color:transparent;color:var(--ck-highlight-pen-red)}.ck-content .pen-green{background-color:transparent;color:var(--ck-highlight-pen-green)}.ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{background:#dedede;border:0;height:4px;margin:15px 0}.ck-widget.raw-html-embed{display:flow-root;font-style:normal;margin:.9em auto;min-width:15em;position:relative}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{display:flex;flex-direction:column;position:absolute}.ck-widget.raw-html-embed .raw-html-embed__preview{display:flex;overflow:hidden;position:relative}.ck-widget.raw-html-embed .raw-html-embed__preview-content{border-collapse:separate;border-spacing:7px;display:table;margin:auto;position:relative;width:100%}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}:root{--ck-html-object-embed-unfocused-outline-width:1px}.ck-widget.html-object-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base);min-width:calc(76px + var(--ck-spacing-standard));padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-object-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);font-style:normal;font-weight:400;left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);position:absolute;top:0;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}:root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highlighted-background:#fd0}.ck-content .image>figcaption{background-color:var(--ck-color-image-caption-background);caption-side:bottom;color:var(--ck-color-image-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;word-break:break-word}@media (forced-colors:active){.ck-content .image>figcaption{background-color:unset;color:unset}}@media (forced-colors:none){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}}@media (prefers-reduced-motion:reduce){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:none}}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highlighted-background)}to{background-color:var(--ck-color-image-caption-background)}}.ck.ck-image-insert-url{padding:var(--ck-spacing-large) var(--ck-spacing-large) 0;width:400px}.ck.ck-image-insert-url .ck-image-insert-url__action-row{display:grid;grid-template-columns:repeat(2,1fr)}.ck-content img.image_resized{height:auto}.ck-content .image.image_resized{box-sizing:border-box;display:block;max-width:100%}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}:root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image.image-style-block-align-left,.ck-content .image.image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image.image-style-align-left,.ck-content .image.image-style-align-right{clear:none}.ck-content .image.image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image.image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image.image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image.image-style-block-align-right{margin-left:auto;margin-right:0}.ck-content .image.image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content p+.image.image-style-align-left,.ck-content p+.image.image-style-align-right,.ck-content p+.image.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-bottom:var(--ck-inline-image-style-spacing);margin-top:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}.ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{left:0;position:absolute;top:0}.ck-image-upload-complete-icon{border-radius:50%;display:block;position:absolute;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}.ck .ck-upload-placeholder-loader{align-items:center;display:flex;justify-content:center;left:0;position:absolute;top:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}.ck-content .image{clear:both;display:table;margin:.9em auto;min-width:50px;text-align:center}.ck-content .image img{display:block;height:auto;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{align-items:flex-start;display:inline-flex;max-width:100%}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}.ck.ck-editor__editable .image{z-index:1}.ck.ck-editor__editable .image.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable .image-inline img{height:auto}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}.ck.ck-editor__editable img.image_placeholder{background-size:100% 100%}.ck.ck-link-providers>.ck-link-providers__list{overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-icon{flex-shrink:0}.ck.ck-link-toolbar__preview{display:inline-block}.ck.ck-link-toolbar__preview .ck-button__label{overflow:hidden}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}.ck.ck-link-form .ck-link-form__providers-list{display:flex;flex-direction:column}.ck.ck-link-form .ck-link-form__providers-list .ck-link__button>.ck-button__label{flex-grow:1}.ck.ck-link-form .ck-link__items:empty{display:none}.ck-editor__editable .ck-list-bogus-paragraph{display:block}.ck.ck-list-styles-list{display:grid}.ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}:root{--ck-todo-list-checkmark-size:16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{margin-bottom:5px;position:relative}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-content[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-content .todo-list .todo-list__label>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out;width:100%}@media (prefers-reduced-motion:reduce){.ck-content .todo-list .todo-list__label>input:before{transition:none}}.ck-content .todo-list .todo-list__label>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-editor__editable.ck-content .todo-list .todo-list__label>input,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{cursor:pointer}.ck-editor__editable.ck-content .todo-list .todo-list__label>input:hover:before,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:hover:before{box-shadow:0 0 0 5px rgba(0,0,0,.1)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-editor__editable.ck-content[dir=rtl] .todo-list .todo-list__label>span[contenteditable=false]>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out;width:100%}@media (prefers-reduced-motion:reduce){.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{transition:none}}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:after{border-color:#fff}.ck-editor__editable.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-content .media{clear:both;display:block;margin:.9em 0;min-width:15em}.ck-media__wrapper .ck-media__placeholder{align-items:center;display:flex;flex-direction:column}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{display:block;overflow:hidden}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck.ck-media-form{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:nowrap;width:400px}.ck.ck-media-form .ck-labeled-field-view{display:inline-block;width:100%}.ck.ck-media-form .ck-label{display:none}.ck.ck-media-form .ck-input{width:100%}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}:root{--ck-mention-list-max-height:300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{flex-shrink:0;overflow:hidden}div.ck.ck-balloon-panel.ck-mention-balloon{z-index:calc(var( --ck-z-dialog ) + 1)}:root{--ck-color-minimap-tracker-background:208,0%,51%;--ck-color-minimap-iframe-outline:#bfbfbf;--ck-color-minimap-iframe-shadow:rgba(0,0,0,.11);--ck-color-minimap-progress-background:#666}.ck.ck-minimap{background:var(--ck-color-base-background);position:absolute;user-select:none}.ck.ck-minimap,.ck.ck-minimap iframe{height:100%;width:100%}.ck.ck-minimap iframe{border:0;box-shadow:0 2px 5px var(--ck-color-minimap-iframe-shadow);margin:0;outline:1px solid var(--ck-color-minimap-iframe-outline);pointer-events:none;position:relative}.ck.ck-minimap .ck.ck-minimap__position-tracker{background:hsla(var(--ck-color-minimap-tracker-background),.2);position:absolute;top:0;transition:background .1s ease-in-out;width:100%;z-index:1}@media (prefers-reduced-motion:reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker{transition:none}}.ck.ck-minimap .ck.ck-minimap__position-tracker:hover{background:hsla(var(--ck-color-minimap-tracker-background),.3)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover{background:hsla(var(--ck-color-minimap-tracker-background),.4)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:after,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover:after{opacity:1}.ck.ck-minimap .ck.ck-minimap__position-tracker:after{background:var(--ck-color-minimap-progress-background);border:1px solid var(--ck-color-base-background);border-radius:3px;color:var(--ck-color-base-background);content:attr(data-progress) "%";font-size:10px;opacity:0;padding:2px 4px;position:absolute;right:5px;top:5px;transition:opacity .1s ease-in-out}@media (prefers-reduced-motion:reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker:after{transition:none}}.ck-content .page-break{align-items:center;clear:both;display:flex;justify-content:center;padding:5px 0;position:relative}.ck-content .page-break:after{border-bottom:2px dashed #c4c4c4;content:"";position:absolute;width:100%}.ck-content .page-break__label{background:#fff;border:1px solid #c4c4c4;border-radius:2px;box-shadow:2px 2px 1px rgba(0,0,0,.15);color:#333;display:block;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;padding:.3em .6em;position:relative;text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}.ck-content :has(+.page-break){margin-bottom:0}}:root{--ck-show-blocks-border-color:#757575}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *):not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck-source-editing-area{overflow:hidden;position:relative}.ck-source-editing-area textarea,.ck-source-editing-area:after{border:1px solid transparent;font-family:monospace;font-size:var(--ck-font-size-normal);line-height:var(--ck-line-height-base);margin:0;padding:var(--ck-spacing-large);white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) " ";display:block;visibility:hidden}.ck-source-editing-area textarea{border-color:var(--ck-color-base-border);border-radius:0;box-sizing:border-box;height:100%;outline:none;overflow:hidden;position:absolute;resize:none;width:100%}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}.ck.ck-character-info{display:flex;justify-content:space-between}.ck.ck-special-characters>.ck-dialog__content>div{grid-column-gap:0;grid-row-gap:0;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr auto;height:100%;max-width:100%;width:350px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories{grid-area:1/1/2/2;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view{padding-top:var(--ck-spacing-standard);width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both;background:var(--ck-color-base-error);color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}@media (prefers-reduced-motion:reduce){.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown{display:block;width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button>span{width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-grid{grid-area:2/1/3/2;max-height:200px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-info{grid-area:3/1/4/2}:root{--ck-style-panel-columns:3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;flex-direction:column;justify-content:space-between}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{align-content:center;align-items:center;display:flex;flex-basis:100%;flex-grow:1;justify-content:flex-start}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-content figure.table:not(.layout-table){display:table}.ck-content figure.table:not(.layout-table)>table{height:100%;width:100%}.ck-content figure.table:not(.layout-table),.ck-content table.table:not(.layout-table){margin:.9em auto}.ck-content figure.table:not(.layout-table)>table,.ck-content table.table:not(.layout-table){border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0}.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>th{background:rgba(0,0,0,.05);font-weight:700}.ck-content figure.table:not(.layout-table)>table>tbody>tr>td,.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>td,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>td,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>td,.ck-content table.table:not(.layout-table)>thead>tr>th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}@media print{.ck-content figure.table>table{height:auto}}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:first-child{margin-top:var(--ck-spacing-large)}.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:last-child,.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:nth-last-child(2):has(+.ck-fake-selection-container){margin-bottom:var(--ck-spacing-large)}.ck-editor__editable .table.layout-table{display:table;margin:0}.ck-editor__editable .table.layout-table.ck-widget:hover{z-index:var(--ck-z-default)}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle{opacity:.75;visibility:visible}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle:hover{opacity:1}.ck-editor__editable .table.layout-table.ck-widget:has(.ck-widget.table:hover)>.ck-widget__selection-handle{opacity:0;visibility:hidden}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_selected{z-index:var(--ck-z-default)}.ck-content figure.table.layout-table,.ck-content table.table.layout-table{margin-bottom:0;margin-top:0}.ck-content figure.table.layout-table>table,.ck-content table.table.layout-table{border-spacing:0}:root{--ck-form-default-width:340px}.ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form.ck-form_default-width{width:var(--ck-form-default-width)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-number,.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}@media screen and (max-width:600px){.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit{align-items:stretch;flex-direction:column;padding:0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit>.ck{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit .ck-button_with-text{justify-content:center}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_large-bottom-padding{padding-bottom:var(--ck-spacing-large)}}[dir=ltr] .ck.ck-form.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-form.ck-responsive-form>:not(:last-child){margin-left:0}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck-form__row>:not(.ck-label,.ck-table-form__dimension-operator){flex-grow:1}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}:root{--ck-color-selector-caption-background:#f7f7f7;--ck-color-selector-caption-text:#333;--ck-color-selector-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-selector-caption-background);caption-side:top;color:var(--ck-color-selector-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}@media (forced-colors:active){.ck-content .table>figcaption{background-color:unset;color:unset}}@media (forced-colors:none){.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-selector-caption-highlighted-background)}to{background-color:var(--ck-color-selector-caption-background)}}:root{--ck-color-selector-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word}.ck.ck-editor__editable .table td,.ck.ck-editor__editable .table th{position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:0;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:0;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-selector-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}.ck-hidden{display:none!important}:root{--ck-z-default:1;--ck-z-panel:calc(var(--ck-z-default) + 999);--ck-z-dialog:9999}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-font-size:calc(var(--ck-font-size-base)*7.5/13);--ck-powered-by-line-height:calc(var(--ck-font-size-base)*10/13);--ck-powered-by-letter-spacing:calc(var(--ck-font-size-base)*-0.2/13);--ck-powered-by-padding-vertical:2px;--ck-powered-by-padding-horizontal:4px;--ck-powered-by-text-color:#4f4f4f;--ck-powered-by-border-radius:var(--ck-border-radius);--ck-powered-by-background:#fff;--ck-powered-by-border-color:var(--ck-color-focus-border);--ck-powered-by-svg-width:53;--ck-powered-by-svg-height:10;--ck-powered-by-icon-width:calc(var(--ck-font-size-base)*var(--ck-powered-by-svg-width)/13);--ck-powered-by-icon-height:calc(var(--ck-font-size-base)*var(--ck-powered-by-svg-height)/13)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius:var(--ck-powered-by-border-radius);background:var(--ck-powered-by-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{align-items:center;cursor:pointer;display:flex;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);opacity:.66;padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{color:var(--ck-powered-by-text-color);cursor:pointer;font-size:var(--ck-powered-by-font-size);font-weight:700;letter-spacing:var(--ck-powered-by-letter-spacing);line-height:normal;margin-right:4px;padding-left:2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{cursor:pointer;display:block;height:var(--ck-powered-by-icon-height);width:var(--ck-powered-by-icon-width)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-evaluation-badge-font-size:calc(var(--ck-font-size-base)*7.5/13);--ck-evaluation-badge-line-height:calc(var(--ck-font-size-base)*7.5/13);--ck-evaluation-badge-letter-spacing:calc(var(--ck-font-size-base)*-0.2/13);--ck-evaluation-badge-padding-vertical:2px;--ck-evaluation-badge-padding-horizontal:4px;--ck-evaluation-badge-text-color:#4f4f4f;--ck-evaluation-badge-border-radius:var(--ck-border-radius);--ck-evaluation-badge-background:#fff;--ck-evaluation-badge-border-color:var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon{--ck-border-radius:var(--ck-evaluation-badge-border-radius);background:var(--ck-evaluation-badge-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge{line-height:var(--ck-evaluation-badge-line-height);padding:var(--ck-evaluation-badge-padding-vertical) var(--ck-evaluation-badge-padding-horizontal)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge .ck-evaluation-badge__label{color:var(--ck-evaluation-badge-text-color);display:block;font-size:var(--ck-evaluation-badge-font-size);font-weight:700;letter-spacing:var(--ck-evaluation-badge-letter-spacing);line-height:normal;padding:0 2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-evaluation-badge-border-color)}.ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}[dir=ltr] .ck.ck-button,[dir=ltr] a.ck.ck-button{justify-content:left}[dir=rtl] .ck.ck-button,[dir=rtl] a.ck.ck-button{justify-content:right}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}.ck.ck-list-item-button{border-radius:0;min-height:unset;width:100%}[dir=ltr] .ck.ck-list-item-button{text-align:left}[dir=rtl] .ck.ck-list-item-button{text-align:right}[dir=ltr] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-right:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-holder{display:inline-flex;height:.9em;width:.9em}[dir=ltr] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-left:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-icon{height:100%}.ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}.ck.ck-color-grid{display:grid}.color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-right:var(--ck-spacing-medium);padding-top:var(--ck-spacing-tiny)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{align-items:center;display:flex}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save{flex:1}.ck.ck-dialog .ck.ck-dialog__actions{display:flex;justify-content:flex-end}.ck.ck-dialog-overlay{bottom:0;left:0;overscroll-behavior:none;position:fixed;right:0;top:0;user-select:none}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent{animation:none;background:none;pointer-events:none}.ck.ck-dialog{overscroll-behavior:none;position:absolute;width:fit-content}.ck.ck-dialog .ck.ck-form__header{flex-shrink:0}.ck.ck-dialog:not(.ck-dialog_modal) .ck.ck-form__header .ck-form__header__label{cursor:grab}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog{pointer-events:all}:root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-panel)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{max-height:314px;overflow-y:auto;position:absolute;z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-dropdown-menu-list__nested-menu{display:block}.ck.ck-aria-live-announcer{left:-10000px;position:absolute;top:-10000px}.ck.ck-aria-live-region-list{list-style-type:none}.ck.ck-form__row{align-items:flex-start;display:flex;flex-direction:row;justify-content:space-between;padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}.ck.ck-form__row.ck-form__row_large-top-padding{padding-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-form__row_large-bottom-padding{padding-bottom:var(--ck-spacing-large)}.ck.ck-form__row.ck-form__row_with-submit{flex-wrap:nowrap}.ck.ck-form__row.ck-form__row_with-submit>:not(:first-child){margin-inline-start:var(--ck-spacing-standard)}.ck.ck-form__row>.ck.ck-form__row{padding:0}.ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__header h2.ck-form__header__label{flex-grow:1}.ck.ck-icon{vertical-align:middle}.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}.ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}:root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-panel)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}.ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-panel) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-panel)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-autocomplete{position:relative}.ck.ck-autocomplete>.ck-search__results{position:absolute;z-index:var(--ck-z-panel)}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{bottom:100%}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{bottom:auto;top:100%}.ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{left:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{right:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view .ck-search__reset{position:absolute;top:50%;transform:translateY(-50%)}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{display:block}.ck.ck-search>.ck-search__results>.ck-search__info:not(.ck-hidden)~*{display:none}.ck.ck-highlighted-text mark{background:var(--ck-color-highlight-background);font-size:inherit;font-weight:inherit;line-height:inherit;vertical-align:initial}.ck.ck-balloon-panel.ck-tooltip{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:calc(var(--ck-z-dialog) + 100)}:root{--ck-toolbar-spinner-size:18px}.ck.ck-spinner-container{display:block;position:relative}.ck.ck-spinner{left:0;margin:0 auto;position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:1}.ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}:root{--ck-menu-bar-menu-max-width:75vw;--ck-menu-bar-nested-menu-horizontal-offset:5px}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{max-width:var(--ck-menu-bar-menu-max-width);position:absolute;z-index:var(--ck-z-panel)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{bottom:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{bottom:auto;top:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{left:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{right:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{left:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{bottom:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{right:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{bottom:0}.ck.ck-menu-bar__menu{display:block;position:relative}:root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}`;var KM=U('<div class="editor-container editor-container_balloon-editor editor-container_include-block-toolbar" id="editor-container" style="margin: 0px 34px; min-height: 34px;"><div class="editor-container__editor"><div id="editorContent"></div></div></div>');const YM={hash:"svelte-32ttx",code:""};function Y0(n,e){xt(e,!0),tt(n,YM);let t=j(e,"editorContent",11,""),i;fv(()=>{const s=document.createElement("style");s.textContent=ZM,document.head.appendChild(s),r()});function r(){let s=document.getElementById("editorContent");E3.create(s,{toolbar:{items:["heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","subscript","superscript","code","removeFormat","|","emoji","specialCharacters","horizontalLine","link","insertImage","mediaEmbed","insertTable","highlight","blockQuote","codeBlock","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[mE,_E,j4,Xw,vE,MC,KE,lE,CE,EE,C3,H3,t4,w4,p4,a4,u4,T4,O4,D4,K4,tS,Q4,dS,Vw,bS,_S,au,vS,Mw,CS,TS,PE,$S,GS,iI,uI,XI,lP,yP,aw,tP,$P,qP,JP,g0,k0,XP,b0,f0,p0,LE,RE,BE,OM,GM,zM,E4,bI,$E],blockToolbar:["fontSize","fontColor","fontBackgroundColor","|","bold","italic","|","link","insertImage","insertTable","|","bulletedList","numberedList","outdent","indent"],fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:t(),licenseKey:"GPL",link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},mention:{feeds:[{marker:"@",feed:[]}]},placeholder:"Type or paste your content here!",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},autosave:{save(a){let l=a.getData();document.dispatchEvent(new CustomEvent("GenEditorContentChangedEvent",{detail:{id:e.$$host.id,content:l}}))}}}).then(a=>{i=a,t()&&(console.log("Setting loaded to true in editor create"),i.setData(t()))})}var o=KM();F(n,o),Ct()}customElements.define("gen-editor",it(Y0,{editorContent:{reflect:!0}},[],[],!1));export{pm as ElegantBuffet,Zl as ElegantHeader,Yl as ElegantHeroSearch,Kl as ElegantSearch,fm as ElegantSpinner,Ql as ElegantTable,Y0 as GenEditor,am as IngBuffet,om as IngButton,sm as IngButtonGray,lm as IngForm,ql as IngHeaderLite,Gs as IngInput,Gl as IngSelect,cm as IngTable};
