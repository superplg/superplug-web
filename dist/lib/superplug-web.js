var U0 = Object.defineProperty;
var nh = (o) => {
  throw TypeError(o);
};
var q0 = (o, i, e) => i in o ? U0(o, i, { enumerable: !0, configurable: !0, writable: !0, value: e }) : o[i] = e;
var m = (o, i, e) => q0(o, typeof i != "symbol" ? i + "" : i, e), oh = (o, i, e) => i.has(o) || nh("Cannot " + e);
var zt = (o, i, e) => (oh(o, i, "read from private field"), e ? e.call(o) : i.get(o)), Al = (o, i, e) => i.has(o) ? nh("Cannot add the same private member more than once") : i instanceof WeakSet ? i.add(o) : i.set(o, e), Tl = (o, i, e, t) => (oh(o, i, "write to private field"), t ? t.call(o, e) : i.set(o, e), e);
const W0 = "5";
typeof window < "u" && (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(W0);
const $d = 1, Ud = 2, zf = 4, G0 = 8, Z0 = 16, K0 = 1, Y0 = 4, Q0 = 8, J0 = 16, X0 = 4, e1 = 1, t1 = 2, Bf = "[", qd = "[!", Wd = "]", Nr = {}, $t = Symbol(), Df = !1;
function Gd(o) {
  console.warn("hydration_mismatch");
}
var Zd = Array.isArray, Kd = Array.from, ca = Object.keys, da = Object.defineProperty, Jn = Object.getOwnPropertyDescriptor, i1 = Object.getOwnPropertyDescriptors, n1 = Object.prototype, o1 = Array.prototype, Oc = Object.getPrototypeOf;
function r1(o) {
  return typeof o == "function";
}
const ur = () => {
};
function Ff(o) {
  for (var i = 0; i < o.length; i++)
    o[i]();
}
const rn = 2, jf = 4, Ja = 8, Xa = 16, Ci = 32, fs = 64, so = 128, ua = 256, Yt = 512, In = 1024, bs = 2048, Vi = 4096, ks = 8192, Hf = 16384, el = 32768, s1 = 1 << 18, $f = 1 << 19, Uo = Symbol("$state"), a1 = Symbol("");
function Uf(o) {
  return o === this.v;
}
function l1(o, i) {
  return o != o ? i == i : o !== i || o !== null && typeof o == "object" || typeof o == "function";
}
function qf(o) {
  return !l1(o, this.v);
}
function c1(o) {
  throw new Error("effect_in_teardown");
}
function d1() {
  throw new Error("effect_in_unowned_derived");
}
function u1(o) {
  throw new Error("effect_orphan");
}
function h1() {
  throw new Error("effect_update_depth_exceeded");
}
function m1() {
  throw new Error("hydration_failed");
}
function g1(o) {
  throw new Error("props_invalid_value");
}
function p1() {
  throw new Error("state_descriptors_fixed");
}
function f1() {
  throw new Error("state_prototype_fixed");
}
function b1() {
  throw new Error("state_unsafe_local_read");
}
function k1() {
  throw new Error("state_unsafe_mutation");
}
let Wf = !1;
function ri(o) {
  return {
    f: 0,
    // TODO ideally we could skip this altogether, but it causes type errors
    v: o,
    reactions: null,
    equals: Uf,
    version: 0
  };
}
function tn(o) {
  return /* @__PURE__ */ _1(ri(o));
}
// @__NO_SIDE_EFFECTS__
function Yd(o, i = !1) {
  const e = ri(o);
  return i || (e.equals = qf), e;
}
// @__NO_SIDE_EFFECTS__
function _1(o) {
  return Ce !== null && Ce.f & rn && (Li === null ? I1([o]) : Li.push(o)), o;
}
function Ke(o, i) {
  return Ce !== null && M1() && Ce.f & (rn | Xa) && // If the source was created locally within the current derived, then
  // we allow the mutation.
  (Li === null || !Li.includes(o)) && k1(), Nc(o, i);
}
function Nc(o, i) {
  return o.equals(i) || (o.v = i, o.version = lb(), Gf(o, In), de !== null && de.f & Yt && !(de.f & Ci) && (Ct !== null && Ct.includes(o) ? (hn(de, In), nl(de)) : An === null ? P1([o]) : An.push(o))), i;
}
function Gf(o, i) {
  var e = o.reactions;
  if (e !== null)
    for (var t = e.length, n = 0; n < t; n++) {
      var r = e[n], s = r.f;
      s & In || (hn(r, i), s & (Yt | so) && (s & rn ? Gf(
        /** @type {Derived} */
        r,
        bs
      ) : nl(
        /** @type {Effect} */
        r
      )));
    }
}
// @__NO_SIDE_EFFECTS__
function Qr(o) {
  var i = rn | In;
  de === null ? i |= so : de.f |= $f;
  const e = {
    children: null,
    ctx: jt,
    deps: null,
    equals: Uf,
    f: i,
    fn: o,
    reactions: null,
    v: (
      /** @type {V} */
      null
    ),
    version: 0,
    parent: de
  };
  if (Ce !== null && Ce.f & rn) {
    var t = (
      /** @type {Derived} */
      Ce
    );
    (t.children ?? (t.children = [])).push(e);
  }
  return e;
}
function Zf(o) {
  var i = o.children;
  if (i !== null) {
    o.children = null;
    for (var e = 0; e < i.length; e += 1) {
      var t = i[e];
      t.f & rn ? Qd(
        /** @type {Derived} */
        t
      ) : ao(
        /** @type {Effect} */
        t
      );
    }
  }
}
function Kf(o) {
  var i, e = de;
  Ht(o.parent);
  try {
    Zf(o), i = cb(o);
  } finally {
    Ht(e);
  }
  return i;
}
function Yf(o) {
  var i = Kf(o), e = (zo || o.f & so) && o.deps !== null ? bs : Yt;
  hn(o, e), o.equals(i) || (o.v = i, o.version = lb());
}
function Qd(o) {
  Zf(o), es(o, 0), hn(o, ks), o.v = o.children = o.deps = o.ctx = o.reactions = null;
}
function w1(o) {
  de === null && Ce === null && u1(), Ce !== null && Ce.f & so && d1(), tu && c1();
}
function v1(o, i) {
  var e = i.last;
  e === null ? i.last = i.first = o : (e.next = o, o.prev = e, i.last = o);
}
function _s(o, i, e, t = !0) {
  var n = (o & fs) !== 0, r = de, s = {
    ctx: jt,
    deps: null,
    deriveds: null,
    nodes_start: null,
    nodes_end: null,
    f: o | In,
    first: null,
    fn: i,
    last: null,
    next: null,
    parent: n ? null : r,
    prev: null,
    teardown: null,
    transitions: null,
    version: 0
  };
  if (e) {
    var a = qo;
    try {
      rh(!0), il(s), s.f |= Hf;
    } catch (d) {
      throw ao(s), d;
    } finally {
      rh(a);
    }
  } else i !== null && nl(s);
  var l = e && s.deps === null && s.first === null && s.nodes_start === null && s.teardown === null && (s.f & $f) === 0;
  if (!l && !n && t && (r !== null && v1(s, r), Ce !== null && Ce.f & rn)) {
    var c = (
      /** @type {Derived} */
      Ce
    );
    (c.children ?? (c.children = [])).push(s);
  }
  return s;
}
function y1(o) {
  w1();
  var i = de !== null && (de.f & Ci) !== 0 && jt !== null && !jt.m;
  if (i) {
    var e = (
      /** @type {ComponentContext} */
      jt
    );
    (e.e ?? (e.e = [])).push({
      fn: o,
      effect: de,
      reaction: Ce
    });
  } else {
    var t = ar(o);
    return t;
  }
}
function Qf(o) {
  const i = _s(fs, o, !0);
  return () => {
    ao(i);
  };
}
function ar(o) {
  return _s(jf, o, !1);
}
function Jd(o) {
  return _s(Ja, o, !0);
}
function le(o) {
  return Xd(o);
}
function Xd(o, i = 0) {
  return _s(Ja | Xa | i, o, !0);
}
function Jr(o, i = !0) {
  return _s(Ja | Ci, o, !0, i);
}
function Jf(o) {
  var i = o.teardown;
  if (i !== null) {
    const e = tu, t = Ce;
    sh(!0), di(null);
    try {
      i.call(null);
    } finally {
      sh(e), di(t);
    }
  }
}
function Xf(o) {
  var i = o.deriveds;
  if (i !== null) {
    o.deriveds = null;
    for (var e = 0; e < i.length; e += 1)
      Qd(i[e]);
  }
}
function eb(o, i = !1) {
  var e = o.first;
  for (o.first = o.last = null; e !== null; ) {
    var t = e.next;
    ao(e, i), e = t;
  }
}
function x1(o) {
  for (var i = o.first; i !== null; ) {
    var e = i.next;
    i.f & Ci || ao(i), i = e;
  }
}
function ao(o, i = !0) {
  var e = !1;
  if ((i || o.f & s1) && o.nodes_start !== null) {
    for (var t = o.nodes_start, n = o.nodes_end; t !== null; ) {
      var r = t === n ? null : (
        /** @type {TemplateNode} */
        /* @__PURE__ */ mn(t)
      );
      t.remove(), t = r;
    }
    e = !0;
  }
  eb(o, i && !e), Xf(o), es(o, 0), hn(o, ks);
  var s = o.transitions;
  if (s !== null)
    for (const l of s)
      l.stop();
  Jf(o);
  var a = o.parent;
  a !== null && a.first !== null && tb(o), o.next = o.prev = o.teardown = o.ctx = o.deps = o.parent = o.fn = o.nodes_start = o.nodes_end = null;
}
function tb(o) {
  var i = o.parent, e = o.prev, t = o.next;
  e !== null && (e.next = t), t !== null && (t.prev = e), i !== null && (i.first === o && (i.first = t), i.last === o && (i.last = e));
}
function Rc(o, i) {
  var e = [];
  eu(o, e, !0), ib(e, () => {
    ao(o), i && i();
  });
}
function ib(o, i) {
  var e = o.length;
  if (e > 0) {
    var t = () => --e || i();
    for (var n of o)
      n.out(t);
  } else
    i();
}
function eu(o, i, e) {
  if (!(o.f & Vi)) {
    if (o.f ^= Vi, o.transitions !== null)
      for (const s of o.transitions)
        (s.is_global || e) && i.push(s);
    for (var t = o.first; t !== null; ) {
      var n = t.next, r = (t.f & el) !== 0 || (t.f & Ci) !== 0;
      eu(t, i, r ? e : !1), t = n;
    }
  }
}
function ha(o) {
  nb(o, !0);
}
function nb(o, i) {
  if (o.f & Vi) {
    ws(o) && il(o), o.f ^= Vi;
    for (var e = o.first; e !== null; ) {
      var t = e.next, n = (e.f & el) !== 0 || (e.f & Ci) !== 0;
      nb(e, n ? i : !1), e = t;
    }
    if (o.transitions !== null)
      for (const r of o.transitions)
        (r.is_global || i) && r.in();
  }
}
const C1 = typeof requestIdleCallback > "u" ? (o) => setTimeout(o, 1) : requestIdleCallback;
let ma = !1, ga = !1, zc = [], Bc = [];
function ob() {
  ma = !1;
  const o = zc.slice();
  zc = [], Ff(o);
}
function rb() {
  ga = !1;
  const o = Bc.slice();
  Bc = [], Ff(o);
}
function tl(o) {
  ma || (ma = !0, queueMicrotask(ob)), zc.push(o);
}
function A1(o) {
  ga || (ga = !0, C1(rb)), Bc.push(o);
}
function T1() {
  ma && ob(), ga && rb();
}
function E1(o) {
  throw new Error("lifecycle_outside_component");
}
const sb = 0, S1 = 1;
let ia = sb, Xr = !1, qo = !1, tu = !1;
function rh(o) {
  qo = o;
}
function sh(o) {
  tu = o;
}
let Yn = [], Wo = 0;
let Ce = null;
function di(o) {
  Ce = o;
}
let de = null;
function Ht(o) {
  de = o;
}
let Li = null;
function I1(o) {
  Li = o;
}
let Ct = null, Ut = 0, An = null;
function P1(o) {
  An = o;
}
let ab = 0, zo = !1, jt = null;
function lb() {
  return ++ab;
}
function M1() {
  return !Wf;
}
function ws(o) {
  var s, a;
  var i = o.f;
  if (i & In)
    return !0;
  if (i & bs) {
    var e = o.deps, t = (i & so) !== 0;
    if (e !== null) {
      var n;
      if (i & ua) {
        for (n = 0; n < e.length; n++)
          ((s = e[n]).reactions ?? (s.reactions = [])).push(o);
        o.f ^= ua;
      }
      for (n = 0; n < e.length; n++) {
        var r = e[n];
        if (ws(
          /** @type {Derived} */
          r
        ) && Yf(
          /** @type {Derived} */
          r
        ), t && de !== null && !zo && !((a = r == null ? void 0 : r.reactions) != null && a.includes(o)) && (r.reactions ?? (r.reactions = [])).push(o), r.version > o.version)
          return !0;
      }
    }
    t || hn(o, Yt);
  }
  return !1;
}
function V1(o, i, e) {
  throw o;
}
function cb(o) {
  var h;
  var i = Ct, e = Ut, t = An, n = Ce, r = zo, s = Li, a = jt, l = o.f;
  Ct = /** @type {null | Value[]} */
  null, Ut = 0, An = null, Ce = l & (Ci | fs) ? null : o, zo = !qo && (l & so) !== 0, Li = null, jt = o.ctx;
  try {
    var c = (
      /** @type {Function} */
      (0, o.fn)()
    ), d = o.deps;
    if (Ct !== null) {
      var u;
      if (es(o, Ut), d !== null && Ut > 0)
        for (d.length = Ut + Ct.length, u = 0; u < Ct.length; u++)
          d[Ut + u] = Ct[u];
      else
        o.deps = d = Ct;
      if (!zo)
        for (u = Ut; u < d.length; u++)
          ((h = d[u]).reactions ?? (h.reactions = [])).push(o);
    } else d !== null && Ut < d.length && (es(o, Ut), d.length = Ut);
    return c;
  } finally {
    Ct = i, Ut = e, An = t, Ce = n, zo = r, Li = s, jt = a;
  }
}
function L1(o, i) {
  let e = i.reactions;
  if (e !== null) {
    var t = e.indexOf(o);
    if (t !== -1) {
      var n = e.length - 1;
      n === 0 ? e = i.reactions = null : (e[t] = e[n], e.pop());
    }
  }
  e === null && i.f & rn && // Destroying a child effect while updating a parent effect can cause a dependency to appear
  // to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`
  // allows us to skip the expensive work of disconnecting and immediately reconnecting it
  (Ct === null || !Ct.includes(i)) && (hn(i, bs), i.f & (so | ua) || (i.f ^= ua), es(
    /** @type {Derived} **/
    i,
    0
  ));
}
function es(o, i) {
  var e = o.deps;
  if (e !== null)
    for (var t = i; t < e.length; t++)
      L1(o, e[t]);
}
function il(o) {
  var i = o.f;
  if (!(i & ks)) {
    hn(o, Yt);
    var e = de;
    de = o;
    try {
      i & Xa ? x1(o) : eb(o), Xf(o), Jf(o);
      var t = cb(o);
      o.teardown = typeof t == "function" ? t : null, o.version = ab;
    } catch (n) {
      V1(
        /** @type {Error} */
        n
      );
    } finally {
      de = e;
    }
  }
}
function db() {
  Wo > 1e3 && (Wo = 0, h1()), Wo++;
}
function ub(o) {
  var i = o.length;
  if (i !== 0) {
    db();
    var e = qo;
    qo = !0;
    try {
      for (var t = 0; t < i; t++) {
        var n = o[t];
        n.f & Yt || (n.f ^= Yt);
        var r = [];
        hb(n, r), O1(r);
      }
    } finally {
      qo = e;
    }
  }
}
function O1(o) {
  var i = o.length;
  if (i !== 0)
    for (var e = 0; e < i; e++) {
      var t = o[e];
      !(t.f & (ks | Vi)) && ws(t) && (il(t), t.deps === null && t.first === null && t.nodes_start === null && (t.teardown === null ? tb(t) : t.fn = null));
    }
}
function N1() {
  if (Xr = !1, Wo > 1001)
    return;
  const o = Yn;
  Yn = [], ub(o), Xr || (Wo = 0);
}
function nl(o) {
  ia === sb && (Xr || (Xr = !0, queueMicrotask(N1)));
  for (var i = o; i.parent !== null; ) {
    i = i.parent;
    var e = i.f;
    if (e & (fs | Ci)) {
      if (!(e & Yt)) return;
      i.f ^= Yt;
    }
  }
  Yn.push(i);
}
function hb(o, i) {
  var e = o.first, t = [];
  e: for (; e !== null; ) {
    var n = e.f, r = (n & Ci) !== 0, s = r && (n & Yt) !== 0;
    if (!s && !(n & Vi))
      if (n & Ja) {
        r ? e.f ^= Yt : ws(e) && il(e);
        var a = e.first;
        if (a !== null) {
          e = a;
          continue;
        }
      } else n & jf && t.push(e);
    var l = e.next;
    if (l === null) {
      let u = e.parent;
      for (; u !== null; ) {
        if (o === u)
          break e;
        var c = u.next;
        if (c !== null) {
          e = c;
          continue e;
        }
        u = u.parent;
      }
    }
    e = l;
  }
  for (var d = 0; d < t.length; d++)
    a = t[d], i.push(a), hb(a, i);
}
function mb(o) {
  var i = ia, e = Yn;
  try {
    db();
    const n = [];
    ia = S1, Yn = n, Xr = !1, ub(e);
    var t = o == null ? void 0 : o();
    return T1(), (Yn.length > 0 || n.length > 0) && mb(), Wo = 0, t;
  } finally {
    ia = i, Yn = e;
  }
}
function M(o) {
  var a;
  var i = o.f, e = (i & rn) !== 0;
  if (e && i & ks) {
    var t = Kf(
      /** @type {Derived} */
      o
    );
    return Qd(
      /** @type {Derived} */
      o
    ), t;
  }
  if (Ce !== null) {
    Li !== null && Li.includes(o) && b1();
    var n = Ce.deps;
    Ct === null && n !== null && n[Ut] === o ? Ut++ : Ct === null ? Ct = [o] : Ct.push(o), An !== null && de !== null && de.f & Yt && !(de.f & Ci) && An.includes(o) && (hn(de, In), nl(de));
  } else if (e && /** @type {Derived} */
  o.deps === null) {
    var r = (
      /** @type {Derived} */
      o
    ), s = r.parent;
    s !== null && !((a = s.deriveds) != null && a.includes(r)) && (s.deriveds ?? (s.deriveds = [])).push(r);
  }
  return e && (r = /** @type {Derived} */
  o, ws(r) && Yf(r)), o.v;
}
function ts(o) {
  const i = Ce;
  try {
    return Ce = null, o();
  } finally {
    Ce = i;
  }
}
const R1 = ~(In | bs | Yt);
function hn(o, i) {
  o.f = o.f & R1 | i;
}
function Et(o, i = !1, e) {
  jt = {
    p: jt,
    c: null,
    e: null,
    m: !1,
    s: o,
    x: null,
    l: null
  };
}
function St(o) {
  const i = jt;
  if (i !== null) {
    const s = i.e;
    if (s !== null) {
      var e = de, t = Ce;
      i.e = null;
      try {
        for (var n = 0; n < s.length; n++) {
          var r = s[n];
          Ht(r.effect), di(r.reaction), ar(r.fn);
        }
      } finally {
        Ht(e), di(t);
      }
    }
    jt = i.p, i.m = !0;
  }
  return (
    /** @type {T} */
    {}
  );
}
function Ze(o, i = null, e) {
  if (typeof o != "object" || o === null || Uo in o)
    return o;
  const t = Oc(o);
  if (t !== n1 && t !== o1)
    return o;
  var n = /* @__PURE__ */ new Map(), r = Zd(o), s = ri(0);
  r && n.set("length", ri(
    /** @type {any[]} */
    o.length
  ));
  var a;
  return new Proxy(
    /** @type {any} */
    o,
    {
      defineProperty(l, c, d) {
        (!("value" in d) || d.configurable === !1 || d.enumerable === !1 || d.writable === !1) && p1();
        var u = n.get(c);
        return u === void 0 ? (u = ri(d.value), n.set(c, u)) : Ke(u, Ze(d.value, a)), !0;
      },
      deleteProperty(l, c) {
        var d = n.get(c);
        if (d === void 0)
          c in l && n.set(c, ri($t));
        else {
          if (r && typeof c == "string") {
            var u = (
              /** @type {Source<number>} */
              n.get("length")
            ), h = Number(c);
            Number.isInteger(h) && h < u.v && Ke(u, h);
          }
          Ke(d, $t), ah(s);
        }
        return !0;
      },
      get(l, c, d) {
        var p;
        if (c === Uo)
          return o;
        var u = n.get(c), h = c in l;
        if (u === void 0 && (!h || (p = Jn(l, c)) != null && p.writable) && (u = ri(Ze(h ? l[c] : $t, a)), n.set(c, u)), u !== void 0) {
          var g = M(u);
          return g === $t ? void 0 : g;
        }
        return Reflect.get(l, c, d);
      },
      getOwnPropertyDescriptor(l, c) {
        var d = Reflect.getOwnPropertyDescriptor(l, c);
        if (d && "value" in d) {
          var u = n.get(c);
          u && (d.value = M(u));
        } else if (d === void 0) {
          var h = n.get(c), g = h == null ? void 0 : h.v;
          if (h !== void 0 && g !== $t)
            return {
              enumerable: !0,
              configurable: !0,
              value: g,
              writable: !0
            };
        }
        return d;
      },
      has(l, c) {
        var g;
        if (c === Uo)
          return !0;
        var d = n.get(c), u = d !== void 0 && d.v !== $t || Reflect.has(l, c);
        if (d !== void 0 || de !== null && (!u || (g = Jn(l, c)) != null && g.writable)) {
          d === void 0 && (d = ri(u ? Ze(l[c], a) : $t), n.set(c, d));
          var h = M(d);
          if (h === $t)
            return !1;
        }
        return u;
      },
      set(l, c, d, u) {
        var w;
        var h = n.get(c), g = c in l;
        if (r && c === "length")
          for (var p = d; p < /** @type {Source<number>} */
          h.v; p += 1) {
            var f = n.get(p + "");
            f !== void 0 ? Ke(f, $t) : p in l && (f = ri($t), n.set(p + "", f));
          }
        h === void 0 ? (!g || (w = Jn(l, c)) != null && w.writable) && (h = ri(void 0), Ke(h, Ze(d, a)), n.set(c, h)) : (g = h.v !== $t, Ke(h, Ze(d, a)));
        var b = Reflect.getOwnPropertyDescriptor(l, c);
        if (b != null && b.set && b.set.call(u, d), !g) {
          if (r && typeof c == "string") {
            var k = (
              /** @type {Source<number>} */
              n.get("length")
            ), _ = Number(c);
            Number.isInteger(_) && _ >= k.v && Ke(k, _ + 1);
          }
          ah(s);
        }
        return !0;
      },
      ownKeys(l) {
        M(s);
        var c = Reflect.ownKeys(l).filter((h) => {
          var g = n.get(h);
          return g === void 0 || g.v !== $t;
        });
        for (var [d, u] of n)
          u.v !== $t && !(d in l) && c.push(d);
        return c;
      },
      setPrototypeOf() {
        f1();
      }
    }
  );
}
function ah(o, i = 1) {
  Ke(o, o.v + i);
}
function lh(o) {
  return o !== null && typeof o == "object" && Uo in o ? o[Uo] : o;
}
function z1(o, i) {
  return Object.is(lh(o), lh(i));
}
var ch, gb, pb;
function Dc() {
  if (ch === void 0) {
    ch = window;
    var o = Element.prototype, i = Node.prototype;
    gb = Jn(i, "firstChild").get, pb = Jn(i, "nextSibling").get, o.__click = void 0, o.__className = "", o.__attributes = null, o.__styles = null, o.__e = void 0, Text.prototype.__t = void 0;
  }
}
function Jo(o = "") {
  return document.createTextNode(o);
}
// @__NO_SIDE_EFFECTS__
function to(o) {
  return gb.call(o);
}
// @__NO_SIDE_EFFECTS__
function mn(o) {
  return pb.call(o);
}
function O(o, i) {
  if (!Se)
    return /* @__PURE__ */ to(o);
  var e = (
    /** @type {TemplateNode} */
    /* @__PURE__ */ to(ze)
  );
  if (e === null)
    e = ze.appendChild(Jo());
  else if (i && e.nodeType !== 3) {
    var t = Jo();
    return e == null || e.before(t), _i(t), t;
  }
  return _i(e), e;
}
function ai(o, i) {
  if (!Se) {
    var e = (
      /** @type {DocumentFragment} */
      /* @__PURE__ */ to(
        /** @type {Node} */
        o
      )
    );
    return e instanceof Comment && e.data === "" ? /* @__PURE__ */ mn(e) : e;
  }
  return ze;
}
function te(o, i = 1, e = !1) {
  let t = Se ? ze : o;
  for (; i--; )
    t = /** @type {TemplateNode} */
    /* @__PURE__ */ mn(t);
  if (!Se)
    return t;
  var n = t.nodeType;
  if (e && n !== 3) {
    var r = Jo();
    return t == null || t.before(r), _i(r), r;
  }
  return _i(t), /** @type {TemplateNode} */
  t;
}
function fb(o) {
  o.textContent = "";
}
let Se = !1;
function Qi(o) {
  Se = o;
}
let ze;
function _i(o) {
  if (o === null)
    throw Gd(), Nr;
  return ze = o;
}
function vs() {
  return _i(
    /** @type {TemplateNode} */
    /* @__PURE__ */ mn(ze)
  );
}
function P(o) {
  if (Se) {
    if (/* @__PURE__ */ mn(ze) !== null)
      throw Gd(), Nr;
    ze = o;
  }
}
function B1(o = 1) {
  if (Se) {
    for (var i = o, e = ze; i--; )
      e = /** @type {TemplateNode} */
      /* @__PURE__ */ mn(e);
    ze = e;
  }
}
function Fc() {
  for (var o = 0, i = ze; ; ) {
    if (i.nodeType === 8) {
      var e = (
        /** @type {Comment} */
        i.data
      );
      if (e === Wd) {
        if (o === 0) return i;
        o -= 1;
      } else (e === Bf || e === qd) && (o += 1);
    }
    var t = (
      /** @type {TemplateNode} */
      /* @__PURE__ */ mn(i)
    );
    i.remove(), i = t;
  }
}
let dh = !1;
function bb() {
  dh || (dh = !0, document.addEventListener(
    "reset",
    (o) => {
      Promise.resolve().then(() => {
        var i;
        if (!o.defaultPrevented)
          for (
            const e of
            /**@type {HTMLFormElement} */
            o.target.elements
          )
            (i = e.__on_r) == null || i.call(e);
      });
    },
    // In the capture phase to guarantee we get noticed of it (no possiblity of stopPropagation)
    { capture: !0 }
  ));
}
function D1(o) {
  var i = Ce, e = de;
  di(null), Ht(null);
  try {
    return o();
  } finally {
    di(i), Ht(e);
  }
}
function kb(o, i, e, t = e) {
  o.addEventListener(i, () => D1(e));
  const n = o.__on_r;
  n ? o.__on_r = () => {
    n(), t();
  } : o.__on_r = t, bb();
}
const _b = /* @__PURE__ */ new Set(), jc = /* @__PURE__ */ new Set();
function Ot(o) {
  for (var i = 0; i < o.length; i++)
    _b.add(o[i]);
  for (var e of jc)
    e(o);
}
function Ps(o) {
  var _;
  var i = this, e = (
    /** @type {Node} */
    i.ownerDocument
  ), t = o.type, n = ((_ = o.composedPath) == null ? void 0 : _.call(o)) || [], r = (
    /** @type {null | Element} */
    n[0] || o.target
  ), s = 0, a = o.__root;
  if (a) {
    var l = n.indexOf(a);
    if (l !== -1 && (i === document || i === /** @type {any} */
    window)) {
      o.__root = i;
      return;
    }
    var c = n.indexOf(i);
    if (c === -1)
      return;
    l <= c && (s = l);
  }
  if (r = /** @type {Element} */
  n[s] || o.target, r !== i) {
    da(o, "currentTarget", {
      configurable: !0,
      get() {
        return r || e;
      }
    });
    var d = Ce, u = de;
    di(null), Ht(null);
    try {
      for (var h, g = []; r !== null; ) {
        var p = r.assignedSlot || r.parentNode || /** @type {any} */
        r.host || null;
        try {
          var f = r["__" + t];
          if (f !== void 0 && !/** @type {any} */
          r.disabled)
            if (Zd(f)) {
              var [b, ...k] = f;
              b.apply(r, [o, ...k]);
            } else
              f.call(r, o);
        } catch (w) {
          h ? g.push(w) : h = w;
        }
        if (o.cancelBubble || p === i || p === null)
          break;
        r = p;
      }
      if (h) {
        for (let w of g)
          queueMicrotask(() => {
            throw w;
          });
        throw h;
      }
    } finally {
      o.__root = i, delete o.currentTarget, di(d), Ht(u);
    }
  }
}
function F1(o) {
  var i = document.createElement("template");
  return i.innerHTML = o, i.content;
}
function Go(o, i) {
  var e = (
    /** @type {Effect} */
    de
  );
  e.nodes_start === null && (e.nodes_start = o, e.nodes_end = i);
}
// @__NO_SIDE_EFFECTS__
function $(o, i) {
  var e = (i & e1) !== 0, t = (i & t1) !== 0, n, r = !o.startsWith("<!>");
  return () => {
    if (Se)
      return Go(ze, null), ze;
    n === void 0 && (n = F1(r ? o : "<!>" + o), e || (n = /** @type {Node} */
    /* @__PURE__ */ to(n)));
    var s = (
      /** @type {TemplateNode} */
      t ? document.importNode(n, !0) : n.cloneNode(!0)
    );
    if (e) {
      var a = (
        /** @type {TemplateNode} */
        /* @__PURE__ */ to(s)
      ), l = (
        /** @type {TemplateNode} */
        s.lastChild
      );
      Go(a, l);
    } else
      Go(s, s);
    return s;
  };
}
function Bo() {
  if (Se)
    return Go(ze, null), ze;
  var o = document.createDocumentFragment(), i = document.createComment(""), e = Jo();
  return o.append(i, e), Go(i, e), o;
}
function F(o, i) {
  if (Se) {
    de.nodes_end = ze, vs();
    return;
  }
  o !== null && o.before(
    /** @type {Node} */
    i
  );
}
const j1 = ["touchstart", "touchmove"];
function H1(o) {
  return j1.includes(o);
}
let Hc = !0;
function Ue(o, i) {
  var e = i == null ? "" : typeof i == "object" ? i + "" : i;
  e !== (o.__t ?? (o.__t = o.nodeValue)) && (o.__t = e, o.nodeValue = e == null ? "" : e + "");
}
function wb(o, i) {
  return vb(o, i);
}
function $1(o, i) {
  Dc(), i.intro = i.intro ?? !1;
  const e = i.target, t = Se, n = ze;
  try {
    for (var r = (
      /** @type {TemplateNode} */
      /* @__PURE__ */ to(e)
    ); r && (r.nodeType !== 8 || /** @type {Comment} */
    r.data !== Bf); )
      r = /** @type {TemplateNode} */
      /* @__PURE__ */ mn(r);
    if (!r)
      throw Nr;
    Qi(!0), _i(
      /** @type {Comment} */
      r
    ), vs();
    const s = vb(o, { ...i, anchor: r });
    if (ze === null || ze.nodeType !== 8 || /** @type {Comment} */
    ze.data !== Wd)
      throw Gd(), Nr;
    return Qi(!1), /**  @type {Exports} */
    s;
  } catch (s) {
    if (s === Nr)
      return i.recover === !1 && m1(), Dc(), fb(e), Qi(!1), wb(o, i);
    throw s;
  } finally {
    Qi(t), _i(n);
  }
}
const _o = /* @__PURE__ */ new Map();
function vb(o, { target: i, anchor: e, props: t = {}, events: n, context: r, intro: s = !0 }) {
  Dc();
  var a = /* @__PURE__ */ new Set(), l = (u) => {
    for (var h = 0; h < u.length; h++) {
      var g = u[h];
      if (!a.has(g)) {
        a.add(g);
        var p = H1(g);
        i.addEventListener(g, Ps, { passive: p });
        var f = _o.get(g);
        f === void 0 ? (document.addEventListener(g, Ps, { passive: p }), _o.set(g, 1)) : _o.set(g, f + 1);
      }
    }
  };
  l(Kd(_b)), jc.add(l);
  var c = void 0, d = Qf(() => {
    var u = e ?? i.appendChild(Jo());
    return Jr(() => {
      if (r) {
        Et({});
        var h = (
          /** @type {ComponentContext} */
          jt
        );
        h.c = r;
      }
      n && (t.$$events = n), Se && Go(
        /** @type {TemplateNode} */
        u,
        null
      ), Hc = s, c = o(u, t) || {}, Hc = !0, Se && (de.nodes_end = ze), r && St();
    }), () => {
      var p;
      for (var h of a) {
        i.removeEventListener(h, Ps);
        var g = (
          /** @type {number} */
          _o.get(h)
        );
        --g === 0 ? (document.removeEventListener(h, Ps), _o.delete(h)) : _o.set(h, g);
      }
      jc.delete(l), $c.delete(c), u !== e && ((p = u.parentNode) == null || p.removeChild(u));
    };
  });
  return $c.set(c, d), c;
}
let $c = /* @__PURE__ */ new WeakMap();
function U1(o) {
  const i = $c.get(o);
  i && i();
}
function Be(o, i, e, t = null, n = !1) {
  Se && vs();
  var r = o, s = null, a = null, l = null, c = n ? el : 0;
  Xd(() => {
    if (l === (l = !!i())) return;
    let d = !1;
    if (Se) {
      const u = (
        /** @type {Comment} */
        r.data === qd
      );
      l === u && (r = Fc(), _i(r), Qi(!1), d = !0);
    }
    l ? (s ? ha(s) : s = Jr(() => e(r)), a && Rc(a, () => {
      a = null;
    })) : (a ? ha(a) : t && (a = Jr(() => t(r))), s && Rc(s, () => {
      s = null;
    })), d && Qi(!0);
  }, c), Se && (r = ze);
}
function ct(o, i) {
  return i;
}
function q1(o, i, e, t) {
  for (var n = [], r = i.length, s = 0; s < r; s++)
    eu(i[s].e, n, !0);
  var a = r > 0 && n.length === 0 && e !== null;
  if (a) {
    var l = (
      /** @type {Element} */
      /** @type {Element} */
      e.parentNode
    );
    fb(l), l.append(
      /** @type {Element} */
      e
    ), t.clear(), vn(o, i[0].prev, i[r - 1].next);
  }
  ib(n, () => {
    for (var c = 0; c < r; c++) {
      var d = i[c];
      a || (t.delete(d.k), vn(o, d.prev, d.next)), ao(d.e, !a);
    }
  });
}
function dt(o, i, e, t, n, r = null) {
  var s = o, a = { flags: i, items: /* @__PURE__ */ new Map(), first: null }, l = (i & zf) !== 0;
  if (l) {
    var c = (
      /** @type {Element} */
      o
    );
    s = Se ? _i(
      /** @type {Comment | Text} */
      /* @__PURE__ */ to(c)
    ) : c.appendChild(Jo());
  }
  Se && vs();
  var d = null, u = !1;
  Xd(() => {
    var h = e(), g = Zd(h) ? h : h == null ? [] : Kd(h), p = g.length;
    if (u && p === 0)
      return;
    u = p === 0;
    let f = !1;
    if (Se) {
      var b = (
        /** @type {Comment} */
        s.data === qd
      );
      b !== (p === 0) && (s = Fc(), _i(s), Qi(!1), f = !0);
    }
    if (Se) {
      for (var k = null, _, w = 0; w < p; w++) {
        if (ze.nodeType === 8 && /** @type {Comment} */
        ze.data === Wd) {
          s = /** @type {Comment} */
          ze, f = !0, Qi(!1);
          break;
        }
        var y = g[w], x = t(y, w);
        _ = yb(ze, a, k, null, y, x, w, n, i), a.items.set(x, _), k = _;
      }
      p > 0 && _i(Fc());
    }
    if (!Se) {
      var C = (
        /** @type {Effect} */
        Ce
      );
      W1(g, a, s, n, i, (C.f & Vi) !== 0, t);
    }
    r !== null && (p === 0 ? d ? ha(d) : d = Jr(() => r(s)) : d !== null && Rc(d, () => {
      d = null;
    })), f && Qi(!0), e();
  }), Se && (s = ze);
}
function W1(o, i, e, t, n, r, s) {
  var ae, tt, Rt, mi;
  var a = (n & G0) !== 0, l = (n & ($d | Ud)) !== 0, c = o.length, d = i.items, u = i.first, h = u, g, p = null, f, b = [], k = [], _, w, y, x;
  if (a)
    for (x = 0; x < c; x += 1)
      _ = o[x], w = s(_, x), y = d.get(w), y !== void 0 && ((ae = y.a) == null || ae.measure(), (f ?? (f = /* @__PURE__ */ new Set())).add(y));
  for (x = 0; x < c; x += 1) {
    if (_ = o[x], w = s(_, x), y = d.get(w), y === void 0) {
      var C = h ? (
        /** @type {TemplateNode} */
        h.e.nodes_start
      ) : e;
      p = yb(
        C,
        i,
        p,
        p === null ? i.first : p.next,
        _,
        w,
        x,
        t,
        n
      ), d.set(w, p), b = [], k = [], h = p.next;
      continue;
    }
    if (l && G1(y, _, x, n), y.e.f & Vi && (ha(y.e), a && ((tt = y.a) == null || tt.unfix(), (f ?? (f = /* @__PURE__ */ new Set())).delete(y))), y !== h) {
      if (g !== void 0 && g.has(y)) {
        if (b.length < k.length) {
          var S = k[0], L;
          p = S.prev;
          var W = b[0], Y = b[b.length - 1];
          for (L = 0; L < b.length; L += 1)
            uh(b[L], S, e);
          for (L = 0; L < k.length; L += 1)
            g.delete(k[L]);
          vn(i, W.prev, Y.next), vn(i, p, W), vn(i, Y, S), h = S, p = Y, x -= 1, b = [], k = [];
        } else
          g.delete(y), uh(y, h, e), vn(i, y.prev, y.next), vn(i, y, p === null ? i.first : p.next), vn(i, p, y), p = y;
        continue;
      }
      for (b = [], k = []; h !== null && h.k !== w; )
        (r || !(h.e.f & Vi)) && (g ?? (g = /* @__PURE__ */ new Set())).add(h), k.push(h), h = h.next;
      if (h === null)
        continue;
      y = h;
    }
    b.push(y), p = y, h = y.next;
  }
  if (h !== null || g !== void 0) {
    for (var be = g === void 0 ? [] : Kd(g); h !== null; )
      (r || !(h.e.f & Vi)) && be.push(h), h = h.next;
    var ue = be.length;
    if (ue > 0) {
      var bt = n & zf && c === 0 ? e : null;
      if (a) {
        for (x = 0; x < ue; x += 1)
          (Rt = be[x].a) == null || Rt.measure();
        for (x = 0; x < ue; x += 1)
          (mi = be[x].a) == null || mi.fix();
      }
      q1(i, be, bt, d);
    }
  }
  a && tl(() => {
    var Pe;
    if (f !== void 0)
      for (y of f)
        (Pe = y.a) == null || Pe.apply();
  }), de.first = i.first && i.first.e, de.last = p && p.e;
}
function G1(o, i, e, t) {
  t & $d && Nc(o.v, i), t & Ud ? Nc(
    /** @type {Value<number>} */
    o.i,
    e
  ) : o.i = e;
}
function yb(o, i, e, t, n, r, s, a, l) {
  var c = (l & $d) !== 0, d = (l & Z0) === 0, u = c ? d ? /* @__PURE__ */ Yd(n) : ri(n) : n, h = l & Ud ? ri(s) : s, g = {
    i: h,
    v: u,
    k: r,
    a: null,
    // @ts-expect-error
    e: null,
    prev: e,
    next: t
  };
  try {
    return g.e = Jr(() => a(o, u, h), Se), g.e.prev = e && e.e, g.e.next = t && t.e, e === null ? i.first = g : (e.next = g, e.e.next = g.e), t !== null && (t.prev = g, t.e.prev = g.e), g;
  } finally {
  }
}
function uh(o, i, e) {
  for (var t = o.next ? (
    /** @type {TemplateNode} */
    o.next.e.nodes_start
  ) : e, n = i ? (
    /** @type {TemplateNode} */
    i.e.nodes_start
  ) : e, r = (
    /** @type {TemplateNode} */
    o.e.nodes_start
  ); r !== t; ) {
    var s = (
      /** @type {TemplateNode} */
      /* @__PURE__ */ mn(r)
    );
    n.before(r), r = s;
  }
}
function vn(o, i, e) {
  i === null ? o.first = e : (i.next = e, i.e.next = e && e.e), e !== null && (e.prev = i, e.e.prev = i && i.e);
}
function iu(o, i, e, t, n) {
  var a;
  Se && vs();
  var r = (a = i.$$slots) == null ? void 0 : a[e], s = !1;
  r === !0 && (r = i.children, s = !0), r === void 0 || r(o, s ? () => t : t);
}
function nt(o, i) {
  tl(() => {
    var e = o.getRootNode(), t = (
      /** @type {ShadowRoot} */
      e.host ? (
        /** @type {ShadowRoot} */
        e
      ) : (
        /** @type {Document} */
        e.head ?? /** @type {Document} */
        e.ownerDocument.head
      )
    );
    if (!t.querySelector("#" + i.hash)) {
      const n = document.createElement("style");
      n.id = i.hash, n.textContent = i.code, t.appendChild(n);
    }
  });
}
function ol(o) {
  if (Se) {
    var i = !1, e = () => {
      if (!i) {
        if (i = !0, o.hasAttribute("value")) {
          var t = o.value;
          me(o, "value", null), o.value = t;
        }
        if (o.hasAttribute("checked")) {
          var n = o.checked;
          me(o, "checked", null), o.checked = n;
        }
      }
    };
    o.__on_r = e, A1(e), bb();
  }
}
function me(o, i, e, t) {
  var n = o.__attributes ?? (o.__attributes = {});
  Se && (n[i] = o.getAttribute(i), i === "src" || i === "srcset" || i === "href" && o.nodeName === "LINK") || n[i] !== (n[i] = e) && (i === "style" && "__styles" in o && (o.__styles = {}), i === "loading" && (o[a1] = e), e == null ? o.removeAttribute(i) : typeof e != "string" && xb(o).includes(i) ? o[i] = e : o.setAttribute(i, e));
}
function El(o, i, e) {
  var t = Ce, n = de;
  di(null), Ht(null);
  try {
    xb(o).includes(i) ? o[i] = e : me(o, i, e);
  } finally {
    di(t), Ht(n);
  }
}
var hh = /* @__PURE__ */ new Map();
function xb(o) {
  var i = hh.get(o.nodeName);
  if (i) return i;
  hh.set(o.nodeName, i = []);
  for (var e, t = Oc(o), n = Element.prototype; n !== t; ) {
    e = i1(t);
    for (var r in e)
      e[r].set && i.push(r);
    t = Oc(t);
  }
  return i;
}
function Rr(o, i) {
  var e = o.__className, t = Z1(i);
  Se && o.className === t ? o.__className = t : (e !== t || Se && o.className !== t) && (i == null ? o.removeAttribute("class") : o.className = t, o.__className = t);
}
function Z1(o) {
  return o ?? "";
}
function Zo(o, i, e) {
  if (e) {
    if (o.classList.contains(i)) return;
    o.classList.add(i);
  } else {
    if (!o.classList.contains(i)) return;
    o.classList.remove(i);
  }
}
const K1 = () => performance.now(), xn = {
  // don't access requestAnimationFrame eagerly outside method
  // this allows basic testing of user code without JSDOM
  // bunder will eval and remove ternary when the user's app is built
  tick: (
    /** @param {any} _ */
    (o) => requestAnimationFrame(o)
  ),
  now: () => K1(),
  tasks: /* @__PURE__ */ new Set()
};
function Cb(o) {
  xn.tasks.forEach((i) => {
    i.c(o) || (xn.tasks.delete(i), i.f());
  }), xn.tasks.size !== 0 && xn.tick(Cb);
}
function Y1(o) {
  let i;
  return xn.tasks.size === 0 && xn.tick(Cb), {
    promise: new Promise((e) => {
      xn.tasks.add(i = { c: o, f: e });
    }),
    abort() {
      xn.tasks.delete(i);
    }
  };
}
function Ms(o, i) {
  o.dispatchEvent(new CustomEvent(i));
}
function Q1(o) {
  if (o === "float") return "cssFloat";
  if (o === "offset") return "cssOffset";
  if (o.startsWith("--")) return o;
  const i = o.split("-");
  return i.length === 1 ? i[0] : i[0] + i.slice(1).map(
    /** @param {any} word */
    (e) => e[0].toUpperCase() + e.slice(1)
  ).join("");
}
function mh(o) {
  const i = {}, e = o.split(";");
  for (const t of e) {
    const [n, r] = t.split(":");
    if (!n || r === void 0) break;
    const s = Q1(n.trim());
    i[s] = r.trim();
  }
  return i;
}
const J1 = (o) => o;
function X1(o, i, e, t) {
  var n = (o & X0) !== 0, r = "both", s, a = i.inert, l, c;
  function d() {
    var f = Ce, b = de;
    di(null), Ht(null);
    try {
      return s ?? (s = e()(i, (t == null ? void 0 : t()) ?? /** @type {P} */
      {}, {
        direction: r
      }));
    } finally {
      di(f), Ht(b);
    }
  }
  var u = {
    is_global: n,
    in() {
      i.inert = a, Ms(i, "introstart"), l = Uc(i, d(), c, 1, () => {
        Ms(i, "introend"), l == null || l.abort(), l = s = void 0;
      });
    },
    out(f) {
      i.inert = !0, Ms(i, "outrostart"), c = Uc(i, d(), l, 0, () => {
        Ms(i, "outroend"), f == null || f();
      });
    },
    stop: () => {
      l == null || l.abort(), c == null || c.abort();
    }
  }, h = (
    /** @type {Effect} */
    de
  );
  if ((h.transitions ?? (h.transitions = [])).push(u), Hc) {
    var g = n;
    if (!g) {
      for (var p = (
        /** @type {Effect | null} */
        h.parent
      ); p && p.f & el; )
        for (; (p = p.parent) && !(p.f & Xa); )
          ;
      g = !p || (p.f & Hf) !== 0;
    }
    g && ar(() => {
      ts(() => u.in());
    });
  }
}
function Uc(o, i, e, t, n) {
  var r = t === 1;
  if (r1(i)) {
    var s, a = !1;
    return tl(() => {
      if (!a) {
        var b = i({ direction: r ? "in" : "out" });
        s = Uc(o, b, e, t, n);
      }
    }), {
      abort: () => {
        a = !0, s == null || s.abort();
      },
      deactivate: () => s.deactivate(),
      reset: () => s.reset(),
      t: () => s.t()
    };
  }
  if (e == null || e.deactivate(), !(i != null && i.duration))
    return n(), {
      abort: ur,
      deactivate: ur,
      reset: ur,
      t: () => t
    };
  const { delay: l = 0, css: c, tick: d, easing: u = J1 } = i;
  var h = [];
  if (r && e === void 0 && (d && d(0, 1), c)) {
    var g = mh(c(0, 1));
    h.push(g, g);
  }
  var p = () => 1 - t, f = o.animate(h, { duration: l });
  return f.onfinish = () => {
    var b = (e == null ? void 0 : e.t()) ?? 1 - t;
    e == null || e.abort();
    var k = t - b, _ = (
      /** @type {number} */
      i.duration * Math.abs(k)
    ), w = [];
    if (_ > 0) {
      if (c)
        for (var y = Math.ceil(_ / 16.666666666666668), x = 0; x <= y; x += 1) {
          var C = b + k * u(x / y), S = c(C, 1 - C);
          w.push(mh(S));
        }
      p = () => {
        var L = (
          /** @type {number} */
          /** @type {globalThis.Animation} */
          f.currentTime
        );
        return b + k * u(L / _);
      }, d && Y1(() => {
        if (f.playState !== "running") return !1;
        var L = p();
        return d(L, 1 - L), !0;
      });
    }
    f = o.animate(w, { duration: _, fill: "forwards" }), f.onfinish = () => {
      p = () => t, d == null || d(t, 1 - t), n();
    };
  }, {
    abort: () => {
      f && (f.cancel(), f.effect = null, f.onfinish = ur);
    },
    deactivate: () => {
      n = ur;
    },
    reset: () => {
      t === 0 && (d == null || d(1, 0));
    },
    t: () => p()
  };
}
function rl(o, i, e = i) {
  kb(o, "input", () => {
    var t = gh(o) ? ph(o.value) : o.value;
    e(t), t !== (t = i()) && (o.value = t ?? "");
  }), Jd(() => {
    var t = i();
    if (Se && o.defaultValue !== o.value) {
      e(o.value);
      return;
    }
    gh(o) && t === ph(o.value) || o.type === "date" && !t && !o.value || t !== o.value && (o.value = t ?? "");
  });
}
function gh(o) {
  var i = o.type;
  return i === "number" || i === "range";
}
function ph(o) {
  return o === "" ? null : +o;
}
function Ab(o, i, e) {
  if (o.multiple)
    return tv(o, i);
  for (var t of o.options) {
    var n = zr(t);
    if (z1(n, i)) {
      t.selected = !0;
      return;
    }
  }
  (!e || i !== void 0) && (o.selectedIndex = -1);
}
function ev(o, i) {
  ar(() => {
    var e = new MutationObserver(() => {
      var t = o.__value;
      Ab(o, t);
    });
    return e.observe(o, {
      // Listen to option element changes
      childList: !0,
      subtree: !0,
      // because of <optgroup>
      // Listen to option element value attribute changes
      // (doesn't get notified of select value changes,
      // because that property is not reflected as an attribute)
      attributes: !0,
      attributeFilter: ["value"]
    }), () => {
      e.disconnect();
    };
  });
}
function Tb(o, i, e = i) {
  var t = !0;
  kb(o, "change", () => {
    var n;
    if (o.multiple)
      n = [].map.call(o.querySelectorAll(":checked"), zr);
    else {
      var r = o.querySelector(":checked");
      n = r && zr(r);
    }
    e(n);
  }), ar(() => {
    var n = i();
    if (Ab(o, n, t), t && n === void 0) {
      var r = o.querySelector(":checked");
      r !== null && (n = zr(r), e(n));
    }
    o.__value = n, t = !1;
  }), ev(o);
}
function tv(o, i) {
  for (var e of o.options)
    e.selected = ~i.indexOf(zr(e));
}
function zr(o) {
  return "__value" in o ? o.__value : o.value;
}
function fh(o, i) {
  return o === i || (o == null ? void 0 : o[Uo]) === i;
}
function Eb(o = {}, i, e, t) {
  return ar(() => {
    var n, r;
    return Jd(() => {
      n = r, r = (t == null ? void 0 : t()) || [], ts(() => {
        o !== e(...r) && (i(o, ...r), n && fh(e(...n), o) && i(null, ...n));
      });
    }), () => {
      tl(() => {
        r && fh(e(...r), o) && i(null, ...r);
      });
    };
  }), o;
}
function iv(o) {
  jt === null && E1(), y1(() => {
    const i = ts(o);
    if (typeof i == "function") return (
      /** @type {() => void} */
      i
    );
  });
}
let Vs = !1;
function nv(o) {
  var i = Vs;
  try {
    return Vs = !1, [o(), Vs];
  } finally {
    Vs = i;
  }
}
function ov(o) {
  for (var i = de, e = de; i !== null && !(i.f & (Ci | fs)); )
    i = i.parent;
  try {
    return Ht(i), o();
  } finally {
    Ht(e);
  }
}
function D(o, i, e, t) {
  var x;
  var n = (e & K0) !== 0, r = !Wf, s = (e & Q0) !== 0, a = (e & J0) !== 0, l = !1, c;
  s ? [c, l] = nv(() => (
    /** @type {V} */
    o[i]
  )) : c = /** @type {V} */
  o[i];
  var d = (x = Jn(o, i)) == null ? void 0 : x.set, u = (
    /** @type {V} */
    t
  ), h = !0, g = !1, p = () => (g = !0, h && (h = !1, a ? u = ts(
    /** @type {() => V} */
    t
  ) : u = /** @type {V} */
  t), u);
  c === void 0 && t !== void 0 && (d && r && g1(), c = p(), d && d(c));
  var f;
  if (f = () => {
    var C = (
      /** @type {V} */
      o[i]
    );
    return C === void 0 ? p() : (h = !0, g = !1, C);
  }, !(e & Y0))
    return f;
  if (d) {
    var b = o.$$legacy;
    return function(C, S) {
      return arguments.length > 0 ? ((!S || b || l) && d(S ? f() : C), C) : f();
    };
  }
  var k = !1, _ = !1, w = /* @__PURE__ */ Yd(c), y = ov(
    () => /* @__PURE__ */ Qr(() => {
      var C = f(), S = M(w);
      return k ? (k = !1, _ = !0, S) : (_ = !1, w.v = C);
    })
  );
  return n || (y.equals = qf), function(C, S) {
    if (arguments.length > 0) {
      const L = S ? M(y) : s ? Ze(C) : C;
      return y.equals(L) || (k = !0, Ke(w, L), g && u !== void 0 && (u = L), ts(() => M(y))), C;
    }
    return M(y);
  };
}
function rv(o) {
  return new sv(o);
}
var Yi, oi;
class sv {
  /**
   * @param {ComponentConstructorOptions & {
   *  component: any;
   * }} options
   */
  constructor(i) {
    /** @type {any} */
    Al(this, Yi);
    /** @type {Record<string, any>} */
    Al(this, oi);
    var r;
    var e = /* @__PURE__ */ new Map(), t = (s, a) => {
      var l = /* @__PURE__ */ Yd(a);
      return e.set(s, l), l;
    };
    const n = new Proxy(
      { ...i.props || {}, $$events: {} },
      {
        get(s, a) {
          return M(e.get(a) ?? t(a, Reflect.get(s, a)));
        },
        has(s, a) {
          return M(e.get(a) ?? t(a, Reflect.get(s, a))), Reflect.has(s, a);
        },
        set(s, a, l) {
          return Ke(e.get(a) ?? t(a, l), l), Reflect.set(s, a, l);
        }
      }
    );
    Tl(this, oi, (i.hydrate ? $1 : wb)(i.component, {
      target: i.target,
      anchor: i.anchor,
      props: n,
      context: i.context,
      intro: i.intro ?? !1,
      recover: i.recover
    })), (!((r = i == null ? void 0 : i.props) != null && r.$$host) || i.sync === !1) && mb(), Tl(this, Yi, n.$$events);
    for (const s of Object.keys(zt(this, oi)))
      s === "$set" || s === "$destroy" || s === "$on" || da(this, s, {
        get() {
          return zt(this, oi)[s];
        },
        /** @param {any} value */
        set(a) {
          zt(this, oi)[s] = a;
        },
        enumerable: !0
      });
    zt(this, oi).$set = /** @param {Record<string, any>} next */
    (s) => {
      Object.assign(n, s);
    }, zt(this, oi).$destroy = () => {
      U1(zt(this, oi));
    };
  }
  /** @param {Record<string, any>} props */
  $set(i) {
    zt(this, oi).$set(i);
  }
  /**
   * @param {string} event
   * @param {(...args: any[]) => any} callback
   * @returns {any}
   */
  $on(i, e) {
    zt(this, Yi)[i] = zt(this, Yi)[i] || [];
    const t = (...n) => e.call(this, ...n);
    return zt(this, Yi)[i].push(t), () => {
      zt(this, Yi)[i] = zt(this, Yi)[i].filter(
        /** @param {any} fn */
        (n) => n !== t
      );
    };
  }
  $destroy() {
    zt(this, oi).$destroy();
  }
}
Yi = new WeakMap(), oi = new WeakMap();
let Sb;
typeof HTMLElement == "function" && (Sb = class extends HTMLElement {
  /**
   * @param {*} $$componentCtor
   * @param {*} $$slots
   * @param {*} use_shadow_dom
   */
  constructor(i, e, t) {
    super();
    /** The Svelte component constructor */
    m(this, "$$ctor");
    /** Slots */
    m(this, "$$s");
    /** @type {any} The Svelte component instance */
    m(this, "$$c");
    /** Whether or not the custom element is connected */
    m(this, "$$cn", !1);
    /** @type {Record<string, any>} Component props data */
    m(this, "$$d", {});
    /** `true` if currently in the process of reflecting component props back to attributes */
    m(this, "$$r", !1);
    /** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */
    m(this, "$$p_d", {});
    /** @type {Record<string, EventListenerOrEventListenerObject[]>} Event listeners */
    m(this, "$$l", {});
    /** @type {Map<EventListenerOrEventListenerObject, Function>} Event listener unsubscribe functions */
    m(this, "$$l_u", /* @__PURE__ */ new Map());
    /** @type {any} The managed render effect for reflecting attributes */
    m(this, "$$me");
    this.$$ctor = i, this.$$s = e, t && this.attachShadow({ mode: "open" });
  }
  /**
   * @param {string} type
   * @param {EventListenerOrEventListenerObject} listener
   * @param {boolean | AddEventListenerOptions} [options]
   */
  addEventListener(i, e, t) {
    if (this.$$l[i] = this.$$l[i] || [], this.$$l[i].push(e), this.$$c) {
      const n = this.$$c.$on(i, e);
      this.$$l_u.set(e, n);
    }
    super.addEventListener(i, e, t);
  }
  /**
   * @param {string} type
   * @param {EventListenerOrEventListenerObject} listener
   * @param {boolean | AddEventListenerOptions} [options]
   */
  removeEventListener(i, e, t) {
    if (super.removeEventListener(i, e, t), this.$$c) {
      const n = this.$$l_u.get(e);
      n && (n(), this.$$l_u.delete(e));
    }
  }
  async connectedCallback() {
    if (this.$$cn = !0, !this.$$c) {
      let i = function(n) {
        return (r) => {
          const s = document.createElement("slot");
          n !== "default" && (s.name = n), F(r, s);
        };
      };
      if (await Promise.resolve(), !this.$$cn || this.$$c)
        return;
      const e = {}, t = av(this);
      for (const n of this.$$s)
        n in t && (n === "default" && !this.$$d.children ? (this.$$d.children = i(n), e.default = !0) : e[n] = i(n));
      for (const n of this.attributes) {
        const r = this.$$g_p(n.name);
        r in this.$$d || (this.$$d[r] = na(r, n.value, this.$$p_d, "toProp"));
      }
      for (const n in this.$$p_d)
        !(n in this.$$d) && this[n] !== void 0 && (this.$$d[n] = this[n], delete this[n]);
      this.$$c = rv({
        component: this.$$ctor,
        target: this.shadowRoot || this,
        props: {
          ...this.$$d,
          $$slots: e,
          $$host: this
        }
      }), this.$$me = Qf(() => {
        Jd(() => {
          var n;
          this.$$r = !0;
          for (const r of ca(this.$$c)) {
            if (!((n = this.$$p_d[r]) != null && n.reflect)) continue;
            this.$$d[r] = this.$$c[r];
            const s = na(
              r,
              this.$$d[r],
              this.$$p_d,
              "toAttribute"
            );
            s == null ? this.removeAttribute(this.$$p_d[r].attribute || r) : this.setAttribute(this.$$p_d[r].attribute || r, s);
          }
          this.$$r = !1;
        });
      });
      for (const n in this.$$l)
        for (const r of this.$$l[n]) {
          const s = this.$$c.$on(n, r);
          this.$$l_u.set(r, s);
        }
      this.$$l = {};
    }
  }
  // We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte
  // and setting attributes through setAttribute etc, this is helpful
  /**
   * @param {string} attr
   * @param {string} _oldValue
   * @param {string} newValue
   */
  attributeChangedCallback(i, e, t) {
    var n;
    this.$$r || (i = this.$$g_p(i), this.$$d[i] = na(i, t, this.$$p_d, "toProp"), (n = this.$$c) == null || n.$set({ [i]: this.$$d[i] }));
  }
  disconnectedCallback() {
    this.$$cn = !1, Promise.resolve().then(() => {
      !this.$$cn && this.$$c && (this.$$c.$destroy(), this.$$me(), this.$$c = void 0);
    });
  }
  /**
   * @param {string} attribute_name
   */
  $$g_p(i) {
    return ca(this.$$p_d).find(
      (e) => this.$$p_d[e].attribute === i || !this.$$p_d[e].attribute && e.toLowerCase() === i
    ) || i;
  }
});
function na(o, i, e, t) {
  var r;
  const n = (r = e[o]) == null ? void 0 : r.type;
  if (i = n === "Boolean" && typeof i != "boolean" ? i != null : i, !t || !e[o])
    return i;
  if (t === "toAttribute")
    switch (n) {
      case "Object":
      case "Array":
        return i == null ? null : JSON.stringify(i);
      case "Boolean":
        return i ? "" : null;
      case "Number":
        return i ?? null;
      default:
        return i;
    }
  else
    switch (n) {
      case "Object":
      case "Array":
        return i && JSON.parse(i);
      case "Boolean":
        return i;
      case "Number":
        return i != null ? +i : i;
      default:
        return i;
    }
}
function av(o) {
  const i = {};
  return o.childNodes.forEach((e) => {
    i[
      /** @type {Element} node */
      e.slot || "default"
    ] = !0;
  }), i;
}
function ot(o, i, e, t, n, r) {
  let s = class extends Sb {
    constructor() {
      super(o, e, n), this.$$p_d = i;
    }
    static get observedAttributes() {
      return ca(i).map(
        (a) => (i[a].attribute || a).toLowerCase()
      );
    }
  };
  return ca(i).forEach((a) => {
    da(s.prototype, a, {
      get() {
        return this.$$c && a in this.$$c ? this.$$c[a] : this.$$d[a];
      },
      set(l) {
        var u;
        l = na(a, l, i), this.$$d[a] = l;
        var c = this.$$c;
        if (c) {
          var d = (u = Jn(c, a)) == null ? void 0 : u.get;
          d ? c[a] = l : c.$set({ [a]: l });
        }
      }
    });
  }), t.forEach((a) => {
    da(s.prototype, a, {
      get() {
        var l;
        return (l = this.$$c) == null ? void 0 : l[a];
      }
    });
  }), o.element = /** @type {any} */
  s, s;
}
var lv = /* @__PURE__ */ $('<button type="button"><!></button>');
const cv = {
  hash: "svelte-1bto172",
  code: ".button.svelte-1bto172 {display:inline-block;cursor:pointer;border:0;margin-left:14px;border-radius:3em;font-weight:700;line-height:1;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;}.button--primary.svelte-1bto172 {background-color:#1ea7fd;color:white;}.button--secondary.svelte-1bto172 {box-shadow:rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;background-color:transparent;color:#333;}.button--small.svelte-1bto172 {padding:10px 16px;font-size:12px;}.button--medium.svelte-1bto172 {padding:11px 20px;font-size:14px;}.button--large.svelte-1bto172 {padding:12px 24px;font-size:16px;}"
};
function dv(o, i) {
  nt(o, cv);
  const e = D(i, "type", 3, "primary"), t = D(i, "size", 3, "medium");
  D(i, "label", 3, "Button");
  const n = D(i, "onClick", 3, void 0);
  var r = lv();
  r.__click = function(...a) {
    var l;
    (l = n()) == null || l.apply(this, a);
  };
  var s = O(r);
  iu(s, i, "default", {}), P(r), le(() => Rr(r, `${"button button--" + t() + " button--" + e()} svelte-1bto172`)), F(o, r);
}
Ot(["click"]);
customElements.define("ing-button", ot(dv, { type: {}, size: {}, label: {}, onClick: {} }, ["default"], [], !0));
var uv = /* @__PURE__ */ $('<button type="button"><!></button>');
const hv = {
  hash: "svelte-1c7d33o",
  code: ".button.svelte-1c7d33o {cursor:pointer;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;color:#fff;background-color:#1f2937;border-color:#1f2937;box-shadow:inset 0 1px 0 rgba(255, 255, 255, .15), 0 1px 1px rgba(17, 24, 39, .075);font-weight:500;line-height:1.5;text-align:center;vertical-align:middle;user-select:none;border:.0625rem solid transparent;padding:.5rem 1rem;font-size:.875rem 14px;border-radius:.5rem;transition:color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;}.button.svelte-1c7d33o:focus {color:#fff;background-color:#2f3745;border-color:#2c3441;box-shadow:inset 0 1px 0 rgba(255,255,255,.15),0 1px 1px rgba(17,24,39,.075),0 0 0 .18rem rgba(85,94,107,.5);}.button.svelte-1c7d33o:hover {color:#fff;background-color:#1a232f;border-color:#19212c;}.button--small.svelte-1c7d33o {padding:10px 16px;font-size:14px;}.button--medium.svelte-1c7d33o {padding:11px 20px;font-size:14px;}.button--large.svelte-1c7d33o {padding:12px 24px;font-size:16px;}"
};
function mv(o, i) {
  nt(o, hv), D(i, "type", 3, "primary");
  const e = D(i, "size", 3, "medium");
  D(i, "label", 3, "Button");
  const t = D(i, "onClick", 3, void 0);
  var n = uv();
  n.__click = function(...s) {
    var a;
    (a = t()) == null || a.apply(this, s);
  };
  var r = O(n);
  iu(r, i, "default", {}), P(n), le(() => Rr(n, `${"button button--" + e()} svelte-1c7d33o`)), F(o, n);
}
Ot(["click"]);
customElements.define("ing-button-gray", ot(mv, { type: {}, size: {}, label: {}, onClick: {} }, ["default"], [], !0));
var gv = /* @__PURE__ */ $('<div class="input_label svelte-1hyy719"> </div>'), pv = /* @__PURE__ */ $('<span class="input_icon svelte-1hyy719"><img width="16px" alt="in"></span>'), fv = (o, i) => {
  i(o);
}, bv = /* @__PURE__ */ $('<div class="input_frame svelte-1hyy719"><!> <div class="input_box svelte-1hyy719"><!> <input class="input_field svelte-1hyy719"></div></div>');
const kv = {
  hash: "svelte-1hyy719",
  code: `.input_frame.svelte-1hyy719 {padding-right:24px;margin-bottom:14px;}.input_label.svelte-1hyy719 {margin-bottom:6px;}.input_box.svelte-1hyy719 {display:flex;color:#4a5073;background-color:#fff;border:0.0625rem solid #d1d7e0;border-radius:0.5rem;
    /* padding-right: 14px; */}.input_icon.svelte-1hyy719 {width:32px;position:relative;top:12px;left:9px;}.input_field.svelte-1hyy719 {box-shadow:none;width:280px;border:0.0625rem solid #d1d7e0;color:#66799e;background-color:transparent;background-clip:padding-box;appearance:none;border:transparent;height:40px;font-size:16px;border-style:none;border-radius:0.5rem;margin-left:4px;margin-right:8px;width:98%;}.input_field.svelte-1hyy719:focus {outline:none;}`
};
function nu(o, i) {
  Et(i, !0), nt(o, kv);
  let e = D(i, "inputId", 3, ""), t = D(i, "label", 3, ""), n = D(i, "icon", 3, ""), r = D(i, "type", 3, "text"), s = D(i, "placeholder", 3, ""), a = D(i, "input", 15, ""), l = D(i, "inputStyle", 3, "");
  const c = (f) => {
    if (f && f.target && i.$$host) {
      let b = "";
      f.target.value && (b = f.target.value), i.$$host.innerText = b, document.dispatchEvent(new CustomEvent("InputChangedEvent", {
        detail: { id: i.$$host.id, input: b }
      })), i.$$host.dispatchEvent(new CustomEvent("inputchanged", { detail: { input: b } }));
    }
  };
  var d = bv(), u = O(d);
  Be(u, t, (f) => {
    var b = gv(), k = O(b, !0);
    P(b), le(() => Ue(k, t())), F(f, b);
  });
  var h = te(u, 2), g = O(h);
  Be(g, n, (f) => {
    var b = pv(), k = O(b);
    P(b), le(() => me(k, "src", n())), F(f, b);
  });
  var p = te(g, 2);
  ol(p), p.__input = [fv, c], P(h), P(d), le(() => {
    me(d, "style", l()), me(p, "id", e()), me(p, "type", r()), me(p, "placeholder", s());
  }), rl(p, a), F(o, d), St();
}
Ot(["input"]);
customElements.define("ing-input", ot(
  nu,
  {
    input: { reflect: !0 },
    inputId: {},
    label: {},
    icon: {},
    type: {},
    placeholder: {},
    inputStyle: {}
  },
  [],
  [],
  !0
));
var _v = /* @__PURE__ */ $('<a class="svelte-hcumdc"> </a>'), wv = (o, i, e) => i(M(e).event), vv = /* @__PURE__ */ $('<button class="menu_item_button svelte-hcumdc"> </button>'), yv = /* @__PURE__ */ $('<div class="menu_item svelte-hcumdc"><!></div>'), xv = /* @__PURE__ */ $('<div class="menu_frame svelte-hcumdc"><div class="arrow svelte-hcumdc"></div> <div class="menu svelte-hcumdc"></div></div>');
const Cv = {
  hash: "svelte-hcumdc",
  code: '.menu_frame.svelte-hcumdc {position:fixed;top:"57px";left:calc(100vw-24);min-width:200px;min-height:200px;max-width:180px;background:#fff;box-shadow:#00000026 0 2px 10px;border:1px solid rgb(242, 242, 242);z-index:6;}.arrow.svelte-hcumdc {position:relative;top:-31px;left:163px;border:1px solid rgb(242, 242, 242);box-shadow:#00000026 -1px -1px 1px -1px;transform:rotate(45deg) translate(16px, 16px);background:#fff;height:14px;width:14px;display:block;content:"";pointer-events:none;z-index:1;}.menu.svelte-hcumdc {position:relative;top:-16px;background:#fff;min-height:140px;z-index:2;padding:14px;}.menu_item.svelte-hcumdc {height:14px;width:100%;font-size:18px;padding-bottom:12px;color:gray;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):link {text-decoration:none;color:gray;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):visited {text-decoration:none;color:#222;}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):hover {text-decoration:none;color:darkgray}.menu_item.svelte-hcumdc a:where(.svelte-hcumdc):active {text-decoration:none;}.menu_item_button.svelte-hcumdc {background-color:transparent;border:0px;font-size:16px;}.menu_item_button.svelte-hcumdc:hover {color:gray;cursor:pointer;}'
};
function ou(o, i) {
  Et(i, !0), nt(o, Cv);
  let e = D(i, "position", 19, () => ({})), t = D(i, "menuItems", 19, () => []);
  function n(a) {
    i.$$host && a && document.dispatchEvent(new CustomEvent(a, { detail: {} }));
  }
  var r = xv(), s = te(O(r), 2);
  dt(s, 21, t, ct, (a, l) => {
    var c = yv(), d = O(c);
    Be(
      d,
      () => M(l).url,
      (u) => {
        var h = _v(), g = O(h, !0);
        P(h), le(() => {
          me(h, "href", M(l).url), Ue(g, M(l).title);
        }), F(u, h);
      },
      (u) => {
        var h = vv();
        h.__click = [wv, n, l];
        var g = O(h, !0);
        P(h), le(() => Ue(g, M(l).title)), F(u, h);
      }
    ), P(c), F(a, c);
  }), P(s), P(r), le(() => me(r, "style", `top: ${e().top}; left: ${e().left};`)), F(o, r), St();
}
Ot(["click"]);
customElements.define("mv-elegant-dropdown", ot(ou, { position: {}, menuItems: {} }, [], [], !0));
var Av = /* @__PURE__ */ $('<img class="msg_icon svelte-lg722a" alt="alerts"> <span class="msg_new svelte-lg722a"></span>', 1), Tv = (o, i) => {
  Ke(i, !M(i));
}, Ev = /* @__PURE__ */ $('<span class="user svelte-lg722a"><!> <button class="user_button svelte-lg722a"><img class="user_icon svelte-lg722a" alt="profile"> <span class="user_name svelte-lg722a"> </span></button></span> <!>', 1), Sv = /* @__PURE__ */ $("<span></span>"), Iv = /* @__PURE__ */ $('<div class="header svelte-lg722a"><div style="width: 364px;"><!> <span></span></div> <div><!></div></div>');
const Pv = {
  hash: "svelte-lg722a",
  code: '.header.svelte-lg722a {display:flex;justify-content:space-between;align-items:center;padding:26px 20px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}.msg_icon.svelte-lg722a {width:20px;margin-right:22px;}.msg_new.svelte-lg722a {background-color:red;height:7px;width:7px;border-radius:50% !important;position:relative;top:4px;left:-22px;}.user.svelte-lg722a {display:flex;position:relative;top:-6px;}.user_button.svelte-lg722a {display:flex;background-color:transparent;border:0px;}.user_button.svelte-lg722a:hover {cursor:pointer;}.user_name.svelte-lg722a {padding-top:12px;padding-left:8px;}.user_icon.svelte-lg722a {border-radius:50% !important;width:40px;}'
};
function Ib(o, i) {
  Et(i, !0), nt(o, Pv), D(i, "title", 3, "Apint.org");
  const e = D(i, "searchicon", 3, ""), t = D(i, "notificationicon", 3, ""), n = D(i, "supportuser", 3, !1), r = D(i, "username", 3, ""), s = D(i, "userpic", 3, "");
  let a = "", l = tn(!1), c = tn(void 0);
  function d() {
    let k = {}, _;
    if (M(c) && (_ = M(c)), _) {
      var w = _.getBoundingClientRect();
      k.top = (w.top + w.height + 12).toString() + "px", k.left = (w.left - 115).toString() + "px", console.log(k);
    }
    return k;
  }
  var u = Iv(), h = O(u), g = O(h);
  nu(g, {
    get icon() {
      return e();
    },
    placeholder: "Search",
    input: a
  });
  var p = te(g, 2);
  p.textContent = a, P(h);
  var f = te(h, 2), b = O(f);
  Be(
    b,
    n,
    (k) => {
      var _ = Ev(), w = ai(_), y = O(w);
      Be(y, t, (Y) => {
        var be = Av(), ue = ai(be);
        B1(2), le(() => me(ue, "src", t())), F(Y, be);
      });
      var x = te(y, 2);
      x.__click = [Tv, l];
      var C = O(x), S = te(C, 2), L = O(S, !0);
      P(S), P(x), Eb(x, (Y) => Ke(c, Y), () => M(c)), P(w);
      var W = te(w, 2);
      Be(W, () => M(l), (Y) => {
        var be = /* @__PURE__ */ Qr(d);
        ou(Y, {
          menuItems: [
            { title: "Sign out", event: "SignOutEvent" }
          ],
          get position() {
            return M(be);
          }
        });
      }), le(() => {
        me(C, "src", s()), Ue(L, r());
      }), F(k, _);
    },
    (k) => {
      var _ = Bo(), w = ai(_);
      Be(
        w,
        n,
        (y) => {
          var x = Sv();
          F(y, x);
        },
        null,
        !0
      ), F(k, _);
    }
  ), P(f), P(u), F(o, u), St();
}
Ot(["click"]);
customElements.define("ing-headerlite", ot(
  Ib,
  {
    title: {},
    searchicon: {},
    notificationicon: {},
    supportuser: {},
    username: {},
    userpic: {}
  },
  [],
  [],
  !0
));
function Mv(o) {
  const i = o - 1;
  return i * i * i + 1;
}
function Vv(o, { delay: i = 0, duration: e = 400, easing: t = Mv, axis: n = "y" } = {}) {
  const r = getComputedStyle(o), s = +r.opacity, a = n === "y" ? "height" : "width", l = parseFloat(r[a]), c = n === "y" ? ["top", "bottom"] : ["left", "right"], d = c.map(
    (k) => (
      /** @type {'Left' | 'Right' | 'Top' | 'Bottom'} */
      `${k[0].toUpperCase()}${k.slice(1)}`
    )
  ), u = parseFloat(r[`padding${d[0]}`]), h = parseFloat(r[`padding${d[1]}`]), g = parseFloat(r[`margin${d[0]}`]), p = parseFloat(r[`margin${d[1]}`]), f = parseFloat(
    r[`border${d[0]}Width`]
  ), b = parseFloat(
    r[`border${d[1]}Width`]
  );
  return {
    delay: i,
    duration: e,
    easing: t,
    css: (k) => `overflow: hidden;opacity: ${Math.min(k * 20, 1) * s};${a}: ${k * l}px;padding-${c[0]}: ${k * u}px;padding-${c[1]}: ${k * h}px;margin-${c[0]}: ${k * g}px;margin-${c[1]}: ${k * p}px;border-${c[0]}-width: ${k * f}px;border-${c[1]}-width: ${k * b}px;`
  };
}
function Lv(o) {
  return o;
}
var Ov = (o, i, e) => i(M(e).title), Nv = /* @__PURE__ */ $('<img alt="option" width="18px">'), Rv = /* @__PURE__ */ $('<svg width="18px" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-pie" class="svg-inline--fa fa-chart-pie fa-w-17 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 544 512"><path fill="currentColor" d="M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"></path></svg>'), zv = /* @__PURE__ */ $('<span><svg class="icon icon-sm" fill="#fff" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></span>'), Bv = (o, i, e) => i(M(e).title), Dv = /* @__PURE__ */ $('<a><span><span class="menu_item_icon svelte-v1mgvt"></span> <span class="menu_item_text"> </span></span></a>'), Fv = /* @__PURE__ */ $('<div class="menu_item_frame svelte-v1mgvt"></div>'), jv = /* @__PURE__ */ $('<a><span><span class="menu_item_icon svelte-v1mgvt"><!></span> <span class="menu_item_text"> </span> <!></span></a> <!>', 1), Hv = /* @__PURE__ */ $('<div class="outer_frame svelte-v1mgvt"><div class="left_menu svelte-v1mgvt"><div class="menu_frame svelte-v1mgvt"></div></div> <div class="right_panel svelte-v1mgvt"><!> <div class="right_panel_content svelte-v1mgvt"><!></div></div></div>');
const $v = {
  hash: "svelte-v1mgvt",
  code: `a.svelte-v1mgvt:link {text-decoration:none;}a.svelte-v1mgvt:visited {text-decoration:none;color:#eaedf2;}a.svelte-v1mgvt:hover {text-decoration:none;color:#eaedf2;}a.svelte-v1mgvt:active {text-decoration:none;}.outer_frame.svelte-v1mgvt {position:fixed;left:0px;top:0px;display:flex;height:100vh;width:100vw;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}.left_menu.svelte-v1mgvt {display:flex;flex-flow:row nowrap;width:260px !important;min-width:260px;height:100%;background-color:#262b40 !important;color:#eaedf2;}.menu_frame.svelte-v1mgvt {margin:20px 30px 20px 30px;width:100%;}.menu_item.svelte-v1mgvt {display:block;width:100%;text-align:left;padding:10px 0px;color:#eaedf2;border-radius:.5rem;margin-bottom:8px;border:.0625rem solid transparent;}.menu_item.svelte-v1mgvt:hover {background-color:#2e3650;}.menu_item_active.svelte-v1mgvt {background-color:#2e3650;border:.0625rem solid #4c5680;}.menu_item_icon.svelte-v1mgvt {display:inline-block;margin-left:12px;margin-right:.5rem;color:#fff;position:relative;top:3px;width:18px;}.menu_item_expand.svelte-v1mgvt {float:right;width:22px;}.expanded.svelte-v1mgvt {position:relative;
    /* left: -4px; */
    /* top: -2px; */transform:rotate(90deg) translateX(-2px) translateY(4px);transition:all 0.2s ease;}.menu_item_frame.svelte-v1mgvt {width:100%;}.right_panel.svelte-v1mgvt {color:#4a5073;background-color:#f5f8fb;flex:auto;height:100%;overflow-y:auto;}.right_panel_content.svelte-v1mgvt {padding:0px 20px;}`
};
function Uv(o, i) {
  Et(i, !0), nt(o, $v), D(i, "title", 3, "Mapp"), D(i, "icon", 3, "");
  let e = D(i, "searchicon", 3, ""), t = D(i, "notificationicon", 3, ""), n = D(i, "supportuser", 3, !0), r = D(i, "username", 3, ""), s = D(i, "userpic", 3, ""), a = D(i, "activeitem", 3, ""), l = D(i, "menuconfig", 7, void 0);
  typeof l() == "string" && l(JSON.parse(l()));
  let c = Ze({});
  if (a()) {
    c[a()] = !0;
    for (let _ of l().items)
      if (_.subitems) {
        for (let w of _.subitems)
          if (w.title == a()) {
            c[_.title] = !0;
            break;
          }
      }
  }
  let d = (_) => {
    let w = l().items.find((y) => y.title === _);
    c[_] ? w && (!w.url || w.url === "#") && (c[_] = !c[_]) : c[_] = !0;
  };
  var u = Hv(), h = O(u), g = O(h);
  dt(g, 21, () => l().items, ct, (_, w) => {
    var y = jv(), x = ai(y);
    x.__click = [Ov, d, w];
    var C = O(x), S = O(C), L = O(S);
    Be(
      L,
      () => M(w).icon,
      (bt) => {
        var ae = Nv();
        le(() => me(ae, "src", M(w).icon)), F(bt, ae);
      },
      (bt) => {
        var ae = Rv();
        F(bt, ae);
      }
    ), P(S);
    var W = te(S, 2), Y = O(W, !0);
    P(W);
    var be = te(W, 2);
    Be(be, () => M(w).subitems, (bt) => {
      var ae = zv();
      le(() => Rr(ae, `${(c[M(w).title] ? "menu_item_expand expanded" : "menu_item_expand") ?? ""} svelte-v1mgvt`)), F(bt, ae);
    }), P(C), P(x);
    var ue = te(x, 2);
    Be(ue, () => c[M(w).title] && M(w).subitems, (bt) => {
      var ae = Fv();
      dt(ae, 21, () => M(w).subitems, ct, (Rt, mi) => {
        var Pe = Dv();
        Pe.__click = [Bv, d, mi];
        var gn = O(Pe), Dn = te(O(gn), 2), V = O(Dn, !0);
        P(Dn), P(gn), P(Pe), le(() => {
          me(Pe, "href", M(mi).url), Rr(Pe, `${(M(mi).title == a() ? "menu_item menu_item_active" : "menu_item") ?? ""} svelte-v1mgvt`), Ue(V, M(mi).title);
        }), F(Rt, Pe);
      }), P(ae), X1(3, ae, () => Vv, () => ({ duration: 300, easing: Lv })), F(bt, ae);
    }), le(() => {
      me(x, "href", M(w).url), Rr(x, `${(M(w).title == a() ? "menu_item menu_item_active" : "menu_item") ?? ""} svelte-v1mgvt`), Ue(Y, M(w).title);
    }), F(_, y);
  }), P(g), P(h);
  var p = te(h, 2), f = O(p);
  Ib(f, {
    get searchicon() {
      return e();
    },
    get notificationicon() {
      return t();
    },
    get supportuser() {
      return n();
    },
    get username() {
      return r();
    },
    get userpic() {
      return s();
    }
  });
  var b = te(f, 2), k = O(b);
  iu(k, i, "default", {}), P(b), P(p), P(u), F(o, u), St();
}
Ot(["click"]);
customElements.define("ing-buffet", ot(
  Uv,
  {
    title: {},
    icon: {},
    searchicon: {},
    notificationicon: {},
    supportuser: {},
    username: {},
    userpic: {},
    activeitem: {},
    menuconfig: {}
  },
  ["default"],
  [],
  !0
));
var qv = /* @__PURE__ */ $('<div class="input_label svelte-18z4bwo"> </div>'), Wv = /* @__PURE__ */ $('<span class="input_icon svelte-18z4bwo"><img width="16px" alt=""></span>'), Gv = (o, i) => {
  i(o);
}, Zv = /* @__PURE__ */ $("<option> </option>"), Kv = /* @__PURE__ */ $('<div class="input_frame svelte-18z4bwo"><!> <div class="input_box svelte-18z4bwo"><!> <select class="input_field svelte-18z4bwo"></select></div></div>');
const Yv = {
  hash: "svelte-18z4bwo",
  code: ".input_frame.svelte-18z4bwo {padding-right:24px;margin-bottom:14px;width:280px;}.input_label.svelte-18z4bwo {margin-bottom:6px;}.input_box.svelte-18z4bwo {display:flex;color:#4a5073;background-color:#fff;border:0.0625rem solid #d1d7e0;border-radius:0.5rem;}.input_icon.svelte-18z4bwo {width:32px;position:relative;top:12px;left:9px;}.input_field.svelte-18z4bwo {box-shadow:none;width:280px;border:0.0625rem solid #d1d7e0;color:#66799e;background-color:#fff;background-clip:padding-box;appearance:none;border:transparent;height:40px;font-size:16px;border-style:none;border-radius:0.5rem;margin-left:4px;margin-right:8px;}.input_field.svelte-18z4bwo:focus {outline:none;}"
};
function Pb(o, i) {
  Et(i, !0), nt(o, Yv);
  let e = D(i, "label", 3, ""), t = D(i, "icon", 3, ""), n = D(i, "placeholder", 3, ""), r = D(i, "items", 3, ""), s = D(i, "input", 15, ""), a = D(i, "selectStyle", 3, ""), l = r().split(",");
  const c = (f) => {
    if (f && f.target && i.$$host) {
      let b = "";
      f.target.value && (b = f.target.value), i.$$host.innerText = b, document.dispatchEvent(new CustomEvent("SelectChangedEvent", {
        detail: { id: i.$$host.id, input: b }
      })), i.$$host.dispatchEvent(new CustomEvent("inputchanged", { detail: { input: b } }));
    }
  };
  var d = Kv(), u = O(d);
  Be(u, e, (f) => {
    var b = qv(), k = O(b, !0);
    P(b), le(() => Ue(k, e())), F(f, b);
  });
  var h = te(u, 2), g = O(h);
  Be(g, t, (f) => {
    var b = Wv(), k = O(b);
    P(b), le(() => me(k, "src", t())), F(f, b);
  });
  var p = te(g, 2);
  p.__input = [Gv, c], dt(p, 21, () => l, ct, (f, b) => {
    var k = Zv(), _ = {}, w = O(k, !0);
    P(k), le(() => {
      _ !== (_ = M(b)) && (k.value = (k.__value = M(b)) == null ? "" : M(b)), Ue(w, M(b));
    }), F(f, k);
  }), P(p), P(h), P(d), le(() => {
    me(d, "style", a()), me(p, "placeholder", n());
  }), Tb(p, s), F(o, d), St();
}
Ot(["input"]);
customElements.define("ing-select", ot(
  Pb,
  {
    label: {},
    icon: {},
    placeholder: {},
    items: {},
    input: {},
    selectStyle: {}
  },
  [],
  [],
  !0
));
var Qv = /* @__PURE__ */ $('<div style="width: 100%;"><h3> </h3></div>'), Jv = /* @__PURE__ */ $('<div style="display: flex; flex-flow: row wrap;" class="card_frame svelte-nemk61"><!> <div style="width: 100%; margin: 20px 0px 10px 0px"><ing-button-gray>Submit</ing-button-gray></div></div>', 2);
const Xv = {
  hash: "svelte-nemk61",
  code: ".card_frame.svelte-nemk61 {border-color:#eaedf2 !important;box-shadow:0 2px 18px rgba(0, 0, 0, 0.02) !important;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0.0625rem solid rgba(46, 54, 80, 0.125);border-radius:0.5rem;padding:12px 32px;}"
};
function ey(o, i) {
  Et(i, !0), nt(o, Xv);
  let e = D(i, "schema", 7);
  typeof e() == "string" && e(JSON.parse(e()));
  function t() {
    console.log(JSON.stringify(e()));
    let l = {};
    for (const [c, d] of Object.entries(e().properties))
      l[c] = d.value;
    document.dispatchEvent(new CustomEvent("FormSubmitEvent", { detail: { schema: e(), object: l } }));
  }
  var n = Jv(), r = O(n);
  Be(r, e, (l) => {
    var c = Bo(), d = ai(c);
    dt(d, 17, () => Object.entries(e().properties), ct, (u, h) => {
      let g = () => M(h)[0], p = () => M(h)[1];
      var f = Bo(), b = ai(f);
      Be(
        b,
        () => p().format == "header",
        (k) => {
          var _ = Qv(), w = O(_), y = O(w, !0);
          P(w), P(_), le(() => Ue(y, p().value)), F(k, _);
        },
        (k) => {
          var _ = Bo(), w = ai(_);
          Be(
            w,
            () => p().format == "select",
            (y) => {
              var x = /* @__PURE__ */ Qr(() => "width: " + p().length + ";");
              Pb(y, {
                get input() {
                  return p().value;
                },
                set input(C) {
                  p().value = C;
                },
                get selectStyle() {
                  return M(x);
                },
                get label() {
                  return p().description;
                },
                get items() {
                  return p().value;
                }
              });
            },
            (y) => {
              var x = Bo(), C = ai(x);
              Be(
                C,
                () => p().type == "string",
                (S) => {
                  var L = /* @__PURE__ */ Qr(() => "width: " + p().length + ";");
                  nu(S, {
                    get inputId() {
                      return g();
                    },
                    get inputStyle() {
                      return M(L);
                    },
                    get label() {
                      return p().description;
                    },
                    get type() {
                      return p().format;
                    },
                    get placeholder() {
                      return p().placeholder;
                    },
                    get input() {
                      return p().value;
                    },
                    set input(W) {
                      p().value = W;
                    }
                  });
                },
                null,
                !0
              ), F(y, x);
            },
            !0
          ), F(k, _);
        }
      ), F(u, f);
    }), F(l, c);
  });
  var s = te(r, 2), a = O(s);
  El(a, "size", "small"), El(a, "id", "submit-button"), El(a, "type", "secondary"), a.__click = t, P(s), P(n), F(o, n), St();
}
Ot(["click"]);
customElements.define("ing-form", ot(ey, { schema: {} }, [], [], !0));
function ty(o, i, e, t, n, r) {
  if (M(i)) {
    let s = [];
    for (let a of e()) {
      let l = !1;
      for (let c of t())
        if ((n().length === 0 || n().includes(c)) && a[c].toString().toLowerCase().includes(M(i).toLowerCase())) {
          l = !0;
          break;
        }
      l && s.push(a);
    }
    Ke(r, Ze(s));
  } else
    Ke(r, Ze(e()));
}
var iy = /* @__PURE__ */ $('<th class="svelte-15ql2st"> </th>'), ny = /* @__PURE__ */ $('<td class="svelte-15ql2st"><a class="table_row svelte-15ql2st"> </a></td>'), oy = /* @__PURE__ */ $('<tr class="svelte-15ql2st"></tr>'), ry = /* @__PURE__ */ $('<div class="card_frame svelte-15ql2st"><div class="filter svelte-15ql2st"><svg data-icon-name="filterIcon" viewBox="0 0 18 18" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M2 4h14v2H2V4zm2 4h10v2H4V8zm2 4h6v2H6v-2z"></path></svg> <span class="filter_input_box svelte-15ql2st">Filter <input class="filter_input svelte-15ql2st" placeholder="Value to filter for"></span></div> <table class="svelte-15ql2st"><thead class="svelte-15ql2st"><tr class="svelte-15ql2st"></tr></thead><tbody class="svelte-15ql2st"></tbody></table></div>');
const sy = {
  hash: "svelte-15ql2st",
  code: `.card_frame.svelte-15ql2st {border-color:#eaedf2 !important;box-shadow:0 2px 18px rgba(0, 0, 0, 0.02) !important;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0.0625rem solid rgba(46, 54, 80, 0.125);border-radius:0.5rem;padding:22px 32px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}table.svelte-15ql2st {width:100%;margin-bottom:1rem;color:#4a5073;vertical-align:top;border-color:#eaedf2;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;border-collapse:collapse;}table.svelte-15ql2st thead:where(.svelte-15ql2st) tr:where(.svelte-15ql2st) th:where(.svelte-15ql2st) {vertical-align:center;text-align:left;border-bottom:1px solid #eaedf2 !important;font-size:12px;font-weight:bold;padding-left:14px;padding-bottom:10px;}.table_row.svelte-15ql2st {padding-left:14px;padding-top:14px;padding-bottom:14px;border-bottom:1px solid #eaedf2 !important;}table.svelte-15ql2st tbody:where(.svelte-15ql2st) tr:where(.svelte-15ql2st):hover {background-color:#eff0f2;cursor:pointer;border-radius:0.5rem;}a.svelte-15ql2st:link {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:visited {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:hover {text-decoration:none;color:#4a5073;}a.svelte-15ql2st:active {text-decoration:none;}td.svelte-15ql2st a:where(.svelte-15ql2st) {display:block;}.filter.svelte-15ql2st {margin-top:20px;margin-bottom:8px;margin-left:8px;}.filter_input_box.svelte-15ql2st {position:relative;top:-3px;font-weight:bold;font-size:14px;}.filter_input.svelte-15ql2st {width:50%;margin-left:8px;font-family:Google Sans,
      Roboto,
      Helvetica,
      Arial,
      sans-serif;padding:var(--padding);
    /* border: 2px solid gray; */border:0px;outline:none;border-radius:0px;
    /* background-color: #f1f3f4; */background-color:rgb(255, 255, 255);}`
};
function ay(o, i) {
  Et(i, !0), nt(o, sy);
  let e = D(i, "headers", 23, () => []), t = D(i, "headerssearchable", 23, () => []), n = D(i, "rows", 23, () => []), r = D(i, "linkprefix", 3, ""), s = D(i, "linkcolumnname", 3, ""), a = D(i, "update", 3, void 0);
  typeof e() == "string" && e(JSON.parse(e())), typeof t() == "string" && t(JSON.parse(t())), typeof n() == "string" && n(JSON.parse(n()));
  let l = tn(Ze(n())), c = tn("");
  const d = (w) => {
    i.$$host.dispatchEvent(new CustomEvent("update", { detail: { rowIndex: w } })), a() && a()({ detail: { rowIndex: w } });
  };
  var u = ry(), h = O(u), g = te(O(h), 2), p = te(O(g));
  ol(p), p.__keyup = [
    ty,
    c,
    n,
    e,
    t,
    l
  ], P(g), P(h);
  var f = te(h, 2), b = O(f), k = O(b);
  dt(k, 21, e, ct, (w, y) => {
    var x = iy(), C = O(x, !0);
    P(x), le(() => Ue(C, M(y))), F(w, x);
  }), P(k), P(b);
  var _ = te(b);
  dt(_, 21, () => M(l), ct, (w, y, x) => {
    var C = oy();
    C.__click = () => {
      d(x);
    }, dt(C, 21, () => Object.entries(M(y)), ct, (L, W) => {
      var Y = ny(), be = O(Y), ue = O(be, !0);
      P(be), P(Y), le(() => {
        me(be, "href", r() + M(y)[s()]), Ue(ue, M(W)[1]);
      }), F(L, Y);
    }), P(C), F(w, C);
  }), P(_), P(f), P(u), rl(p, () => M(c), (w) => Ke(c, w)), F(o, u), St();
}
Ot(["keyup", "click"]);
customElements.define("ing-table", ot(
  ay,
  {
    headers: {},
    headerssearchable: {},
    rows: {},
    linkprefix: {},
    linkcolumnname: {},
    update: {}
  },
  [],
  [],
  !0
));
var ly = /* @__PURE__ */ $('<img class="title_logo" alt="logo" width="36px" height="34px" style="padding: 6px; margin-top: 4px;">'), cy = /* @__PURE__ */ $('<span class="title_text svelte-zwv9rr"> </span>'), dy = /* @__PURE__ */ $('<a href="https://google.com" target="_blank" class="title svelte-zwv9rr"><!> <!></a>'), uy = (o, i, e) => i(o, M(e).title), hy = /* @__PURE__ */ $('<button class="menu_button svelte-zwv9rr"><img class="menu_icon svelte-zwv9rr"></button> <!>', 1), my = /* @__PURE__ */ $('<div class="header svelte-zwv9rr"><!> <div class="right_menus svelte-zwv9rr"></div></div>');
const gy = {
  hash: "svelte-zwv9rr",
  code: ".header.svelte-zwv9rr {display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-start;background-color:rgba(255, 255, 255, 1);height:57px;font-weight:560;color:#333;font-size:20px;padding:0px;margin:0px;position:sticky;top:0;z-index:2;border-bottom:solid 1px rgba(222, 222, 222, 1);}.title.svelte-zwv9rr {height:100%;display:flex;margin-left:12px;color:#111;font-family:'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;}.title.svelte-zwv9rr:link {text-decoration:none;}.title.svelte-zwv9rr:visited {text-decoration:none;color:#222;}.title.svelte-zwv9rr:hover {text-decoration:none;color:darkgray}.title.svelte-zwv9rr:active {text-decoration:none;}.title_text.svelte-zwv9rr {display:flex;align-items:center;}.right_menus.svelte-zwv9rr {display:flex;height:100%;flex:auto;flex-flow:row-reverse;}.menu_button.svelte-zwv9rr {height:100%;display:flex;align-items:center;margin-right:18px;cursor:pointer;border:0px;background-color:transparent;}.menu_icon.svelte-zwv9rr {height:30px;width:30px;object-fit:cover;}.menu_icon.svelte-zwv9rr:hover {cursor:pointer;}.round.svelte-zwv9rr {height:40px;width:40px;border-radius:50%;}"
};
function Mb(o, i) {
  Et(i, !0), nt(o, gy);
  let e = D(i, "title", 3, ""), t = D(i, "titleImageUrl", 3, ""), n = D(i, "headerMenus", 23, () => []);
  typeof n() == "string" && n(JSON.parse(n()));
  let r = Ze({}), s = Ze({});
  function a(g, p) {
    g && g.stopPropagation();
    for (const f of Object.keys(r))
      f != p && (r[f] = !1);
    r[p] ? r[p] = !1 : r[p] = !0;
  }
  function l(g) {
    let p = {}, f;
    if (s[g] && (f = s[g]), f) {
      var b = f.getBoundingClientRect();
      p.top = (b.top + b.height + 12).toString() + "px", p.left = (b.left - 150).toString() + "px", console.log(p);
    } else
      console.log("Could not find element with id: " + g);
    return p;
  }
  function c(g) {
    return g.toLowerCase().replaceAll(" ", "_");
  }
  document.onclick = function() {
    for (const p of Object.keys(r))
      r[p] = !1;
  };
  var d = my(), u = O(d);
  Be(u, () => e() || t(), (g) => {
    var p = dy(), f = O(p);
    Be(f, t, (k) => {
      var _ = ly();
      le(() => me(_, "src", t())), F(k, _);
    });
    var b = te(f, 2);
    Be(b, e, (k) => {
      var _ = cy(), w = O(_, !0);
      P(_), le(() => Ue(w, e())), F(k, _);
    }), P(p), F(g, p);
  });
  var h = te(u, 2);
  dt(h, 21, n, ct, (g, p) => {
    var f = hy(), b = ai(f);
    le(() => me(b, "id", c(M(p).title + "_button"))), b.__click = [uy, a, p];
    var k = O(b);
    Eb(k, (w, y) => s[c(y.title + "_button")] = w, (w) => s == null ? void 0 : s[c(w.title + "_button")], () => [M(p)]), P(b);
    var _ = te(b, 2);
    Be(_, () => r[M(p).title], (w) => {
      var y = /* @__PURE__ */ Qr(() => l(c(M(p).title + "_button")));
      ou(w, {
        get menuItems() {
          return M(p).items;
        },
        get position() {
          return M(y);
        }
      });
    }), le(() => {
      me(k, "alt", M(p).title), me(k, "src", M(p).imageUrl), Zo(k, "round", M(p).imageShape === "round");
    }), F(g, f);
  }), P(h), P(d), F(o, d), St();
}
Ot(["click"]);
customElements.define("mv-elegant-header", ot(
  Mb,
  {
    title: {},
    titleImageUrl: {},
    headerMenus: {}
  },
  [],
  [],
  !0
));
function py(o, i, e, t) {
  i.searchloadresults && Ke(e, Ze(i.searchloadresults(t())));
}
function fy(o, i, e, t) {
  o.key === "Escape" ? Ke(i, Ze([])) : o.key === "Enter" && (e.searchsubmit && e.searchsubmit(t()), document.dispatchEvent(new CustomEvent("SearchSubmit", { detail: { text: t() } })), t(""));
}
var by = /* @__PURE__ */ $('<div class="result svelte-ihhy65"> </div>'), ky = /* @__PURE__ */ $('<div class="results svelte-ihhy65"><div class="results_frame svelte-ihhy65"><div class="results_list svelte-ihhy65"></div></div></div>'), _y = /* @__PURE__ */ $('<div class="input_frame svelte-ihhy65"><div class="search_frame svelte-ihhy65"><div class="search_icon svelte-ihhy65"><svg width="18px" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#9aa0a6" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></div> <input class="search_input svelte-ihhy65"></div></div> <!>', 1);
const wy = {
  hash: "svelte-ihhy65",
  code: `.input_frame.svelte-ihhy65 {min-height:44px;background:#fff;border:1px solid #dfe1e5;box-shadow:0px 2px 8px 0px rgba(60, 64, 67, 0.25);border-radius:24px;margin:0 auto;max-width:584px;}.search_frame.svelte-ihhy65 {display:flex;flex-flow:row wrap;width:100%;flex:1;padding:0 8px 0 0;}.search_icon.svelte-ihhy65 {display:flex;align-items:center;padding-right:13px;padding-left:14px;height:46px;color:#9aa0a6;z-index:11;}.search_input.svelte-ihhy65 {display:flex;flex-wrap:wrap;flex:1;border:none;border-radius:24px;font-size:18px;width:100%;z-index:11;background-color:transparent;}.search_input.svelte-ihhy65:focus,
  .search_input.svelte-ihhy65:focus {outline:none;}.results.svelte-ihhy65 {position:absolute;margin:0px 0px 0px 0px;width:398px;border:1px solid #dfe1e5;z-index:10;background:#fff;border-radius:0px 0px 24px 24px;}.results_list.svelte-ihhy65 {margin-top:10px;background:#fff;width:100%;z-index:10;}.results_frame.svelte-ihhy65 {position:relative;top:-22px;background:#fff;border-left:1px solid #dfe1e5;border-right:1px solid #dfe1e5;width:398px;left:-1px;z-index:10;height:300px;overflow-x:hidden;}.result.svelte-ihhy65 {width:100%;padding:4px 0px 4px 16px;}.result.svelte-ihhy65:hover {cursor:pointer;background-color:#dfe1e5;}`
};
function Vb(o, i) {
  Et(i, !0), nt(o, wy);
  let e = D(i, "searchtext", 15), t = tn(Ze([]));
  document.addEventListener("SearchResults", (c) => {
    c.detail.results && Ke(t, Ze(c.detail.results));
  });
  var n = _y(), r = ai(n), s = O(r), a = te(O(s), 2);
  ol(a), a.__input = [py, i, t, e], a.__keyup = [fy, t, i, e], P(s), P(r);
  var l = te(r, 2);
  Be(l, () => M(t).length > 0, (c) => {
    var d = ky(), u = O(d), h = O(u);
    dt(h, 21, () => M(t), ct, (g, p) => {
      var f = by(), b = O(f, !0);
      P(f), le(() => Ue(b, M(p))), F(g, f);
    }), P(h), P(u), P(d), F(c, d);
  }), rl(a, e), F(o, n), St();
}
Ot(["input", "keyup"]);
customElements.define("mv-elegant-search", ot(
  Vb,
  {
    searchtext: {},
    searchloadresults: {},
    searchsubmit: {}
  },
  [],
  [],
  !0
));
var vy = /* @__PURE__ */ $('<img class="hero_image svelte-pm9u4t" alt="logo">'), yy = /* @__PURE__ */ $('<div class="hero svelte-pm9u4t"><div class="hero_logo svelte-pm9u4t"><!> <div class="hero_logo_text svelte-pm9u4t"> </div></div> <div class="hero_search svelte-pm9u4t"><!></div></div>');
const xy = {
  hash: "svelte-pm9u4t",
  code: '.hero.svelte-pm9u4t {width:100%;display:flex;justify-content:center;flex-flow:row wrap;}.hero_logo.svelte-pm9u4t {display:flex;margin-top:150px;width:100%;justify-content:center;align-items:center;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:560;color:#333;font-size:20px;}.hero_image.svelte-pm9u4t {width:50px;height:50px;}.hero_logo_text.svelte-pm9u4t {padding-left:12px;}.hero_search.svelte-pm9u4t {width:400px;}'
};
function Lb(o, i) {
  nt(o, xy);
  let e = D(i, "height", 3, "80px"), t = D(i, "title", 3, ""), n = D(i, "titleImageUrl", 3, ""), r = D(i, "searchtext", 15);
  var s = yy(), a = O(s), l = O(a);
  Be(l, n, (g) => {
    var p = vy();
    le(() => {
      me(p, "height", `${e()}`), me(p, "src", n());
    }), F(g, p);
  });
  var c = te(l, 2), d = O(c, !0);
  P(c), P(a);
  var u = te(a, 2), h = O(u);
  Vb(h, {
    get searchtext() {
      return r();
    },
    set searchtext(g) {
      r(g);
    },
    get searchloadresults() {
      return i.searchloadresults;
    },
    get searchsubmit() {
      return i.searchsubmit;
    }
  }), P(u), P(s), le(() => {
    me(a, "style", `height: ${e()};`), Ue(d, t());
  }), F(o, s);
}
customElements.define("mv-elegant-hero-search", ot(
  Lb,
  {
    text: { reflect: !0 },
    height: {},
    title: {},
    titleImageUrl: {},
    searchtext: {},
    searchloadresults: {},
    searchsubmit: {}
  },
  [],
  [],
  !0
));
function Cy(o, i, e) {
  o.srcElement && i(o.srcElement.value), e.onInput && e.onInput(i());
}
var Ay = /* @__PURE__ */ $('<option class="svelte-1im86kb"> </option>'), Ty = /* @__PURE__ */ $('<div class="select svelte-1im86kb"><select name="source" id="source" class="svelte-1im86kb"></select></div>');
const Ey = {
  hash: "svelte-1im86kb",
  code: `.select.svelte-1im86kb,
.select.svelte-1im86kb :where(.svelte-1im86kb) {margin:0;padding:0;position:relative;box-sizing:border-box;}.select.svelte-1im86kb {position:relative;background-color:#f0f0f0;border-radius:12px;width:200px;height:40px;}.select.svelte-1im86kb select:where(.svelte-1im86kb) {font-size:1rem;font-weight:normal;width:100%;padding:10px 24px 8px 10px;border:none;background-color:transparent;appearance:none;}.select.svelte-1im86kb select:where(.svelte-1im86kb):active, .select.svelte-1im86kb select:where(.svelte-1im86kb):focus {outline:none;box-shadow:none;}.select.svelte-1im86kb:after {content:"";position:absolute;top:50%;right:8px;width:0;height:0;margin-top:-2px;border-top:5px solid #aaa;border-right:5px solid transparent;border-left:5px solid transparent;}`
};
function Ob(o, i) {
  Et(i, !0), nt(o, Ey);
  let e = D(i, "input", 15), t = D(i, "options", 19, () => []);
  var n = Ty(), r = O(n);
  r.__input = [Cy, e, i], dt(r, 21, t, ct, (s, a) => {
    var l = Ay(), c = {}, d = O(l, !0);
    P(l), le(() => {
      c !== (c = M(a)) && (l.value = (l.__value = M(a)) == null ? "" : M(a)), Ue(d, M(a));
    }), F(s, l);
  }), P(r), P(n), Tb(r, e), F(o, n), St();
}
Ot(["input"]);
customElements.define("mv-elegant-select", ot(Ob, { input: {}, onInput: {}, options: {} }, [], [], !0));
function Sy(o, i, e) {
  i() === "CARD" ? i("TABLE") : i("CARD"), e.viewselect && e.viewselect(i());
}
var Iy = (o, i, e) => i(M(e).name), Py = /* @__PURE__ */ $('<div class="icon svelte-lvweti">✓</div>'), My = /* @__PURE__ */ $('<div class="icon svelte-lvweti"> </div>'), Vy = /* @__PURE__ */ $('<div class="filterbar_option svelte-lvweti"><!> <div class="name svelte-lvweti"> </div></div>'), Ly = /* @__PURE__ */ $('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M3 9.5H21M3 14.5H21M8 4.5V19.5M6.2 19.5H17.8C18.9201 19.5 19.4802 19.5 19.908 19.282C20.2843 19.0903 20.5903 18.7843 20.782 18.408C21 17.9802 21 17.4201 21 16.3V7.7C21 6.5799 21 6.01984 20.782 5.59202C20.5903 5.21569 20.2843 4.90973 19.908 4.71799C19.4802 4.5 18.9201 4.5 17.8 4.5H6.2C5.0799 4.5 4.51984 4.5 4.09202 4.71799C3.71569 4.90973 3.40973 5.21569 3.21799 5.59202C3 6.01984 3 6.57989 3 7.7V16.3C3 17.4201 3 17.9802 3.21799 18.408C3.40973 18.7843 3.71569 19.0903 4.09202 19.282C4.51984 19.5 5.07989 19.5 6.2 19.5Z" stroke="#d8d8d8" stroke-width="2"></path></g></svg>'), Oy = /* @__PURE__ */ $('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#d8d8d8"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title></title><g id="Complete"><g id="grid"><g><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="14.5" y="2.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="14.5" y="14.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="2.5" y="2.5"></rect><rect fill="none" height="7" stroke="#d8d8d8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="7" x="2.5" y="14.5"></rect></g></g></g></g></svg>'), Ny = /* @__PURE__ */ $('<div class="filterbar_frame svelte-lvweti"><div class="options svelte-lvweti"></div> <div class="filter svelte-lvweti"><button class="view_toggle svelte-lvweti"><!></button> <!></div></div>');
const Ry = {
  hash: "svelte-lvweti",
  code: `.filterbar_frame.svelte-lvweti {display:flex;max-width:2000px;
    /* margin: 20px 10px 0px 16px; */margin:20px auto 0px auto;}.options.svelte-lvweti {display:flex;justify-content:left;width:100%;margin-left:16px;}.filter.svelte-lvweti {display:flex;margin-right:16px;}.filterbar_option.svelte-lvweti {display:flex;min-width:20px;height:40px;font-size:14px;font-weight:700;color:rgb(51, 103, 214);margin-right:6px;margin-bottom:4px;height:20px;padding:4px 8px 6px;border-radius:44px;border-width:1px;border-style:solid;border-color:lightgray;user-select:none;}.filterbar_option_selected.svelte-lvweti {background-color:rgb(209, 227, 255);}.filterbar_option.svelte-lvweti:hover {cursor:pointer;background-color:rgb(209, 227, 255);}.icon.svelte-lvweti {color:rgb(51, 103, 214);font-size:16px;font-weight:700;display:inline-block;width:18px;margin-right:6px;}.name.svelte-lvweti {float:right;margin-top:2px;font-size:14px;font-weight:700;color:rgb(51, 103, 214);}.view_toggle.svelte-lvweti {margin-right:12px;width:44px;border:0px;background-color:transparent;}.view_toggle.svelte-lvweti:hover {cursor:pointer;}`
};
function Nb(o, i) {
  Et(i, !0), nt(o, Ry);
  let e = D(i, "view", 15, "card"), t = Ze({});
  function n(h) {
    t[h] ? t[h] = !1 : t[h] = !0, i.typeselect && i.typeselect(t);
  }
  function r(h) {
    i.sortselect && i.sortselect(h);
  }
  var s = Ny(), a = O(s);
  dt(a, 21, () => i.types, ct, (h, g) => {
    var p = Vy();
    p.__click = [Iy, n, g];
    var f = O(p);
    Be(
      f,
      () => t[M(g).name] === !0,
      (_) => {
        var w = Py();
        F(_, w);
      },
      (_) => {
        var w = My(), y = O(w, !0);
        P(w), le(() => Ue(y, M(g).icon)), F(_, w);
      }
    );
    var b = te(f, 2), k = O(b, !0);
    P(b), P(p), le(() => {
      Zo(p, "filterbar_option_selected", t[M(g).name]), Ue(k, M(g).name);
    }), F(h, p);
  }), P(a);
  var l = te(a, 2), c = O(l);
  c.__click = [Sy, e, i];
  var d = O(c);
  Be(
    d,
    () => e() === "CARD",
    (h) => {
      var g = Ly();
      F(h, g);
    },
    (h) => {
      var g = Oy();
      F(h, g);
    }
  ), P(c);
  var u = te(c, 2);
  Ob(u, {
    input: "Latest",
    get options() {
      return i.sorts;
    },
    onInput: r
  }), P(l), P(s), F(o, s), St();
}
Ot(["click"]);
customElements.define("mv-elegant-filtertypes", ot(
  Nb,
  {
    types: {},
    sorts: {},
    typeselect: {},
    sortselect: {},
    view: {},
    viewselect: {}
  },
  [],
  [],
  !0
));
var zy = /* @__PURE__ */ $('<img alt="type icon" class="svelte-1feueb0">'), By = /* @__PURE__ */ $('<img alt="type icon" class="svelte-1feueb0">'), Dy = /* @__PURE__ */ $('<div class="card_frame svelte-1feueb0"><div class="top_left_label svelte-1feueb0"><span class="svelte-1feueb0"> </span> <div class="top_right_icons svelte-1feueb0"></div></div> <img class="header_image svelte-1feueb0" alt="header preview"> <a class="title svelte-1feueb0"> </a> <a class="author svelte-1feueb0" target="_blank"><img alt="profile" class="svelte-1feueb0"> </a> <div class="footer svelte-1feueb0"><div class="description svelte-1feueb0"> </div> <div class="link svelte-1feueb0"><a target="_blank" class="svelte-1feueb0">Open asset ↗</a> <div class="type_box svelte-1feueb0"></div></div></div></div>');
const Fy = {
  hash: "svelte-1feueb0",
  code: ".card_frame.svelte-1feueb0 {display:flex;flex-wrap:wrap;width:288px;height:428px;border:1px solid var(--gm3-sys-color-surface-variant, #e1e3e1);border-radius:12px;margin:16px 16px 32px 16px;}.top_left_label.svelte-1feueb0 {display:flex;padding:12px 18px;color:#444746;width:100%;height:28px;}.top_left_label.svelte-1feueb0 span:where(.svelte-1feueb0) {white-space:nowrap;}.top_right_icons.svelte-1feueb0 {display:flex;justify-content:right;width:100%;}.top_right_icons.svelte-1feueb0 img:where(.svelte-1feueb0) {object-fit:cover;width:24px;height:24px;margin-left:4px;}.header_image.svelte-1feueb0 {width:calc(100% - 18px);margin:0px 18px;object-fit:cover;height:144px;border-radius:7px;}.title.svelte-1feueb0 {padding:12px 18px 4px;height:48px;color:#1f1f1f;font-weight:600;font-size:18px;overflow:hidden;text-overflow:ellipsis;line-height:1.5rem;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;}.title.svelte-1feueb0:hover {color:#7c7c7c;}.author.svelte-1feueb0 {display:flex;align-items:start;padding:0px 18px 4px;height:20px;color:#444746;font-size:.875rem;font-weight:400;line-height:1.25rem;overflow:hidden;text-overflow:ellipsis;}.author.svelte-1feueb0 img:where(.svelte-1feueb0) {border-radius:50%;object-fit:cover;width:18px;height:18px;margin-right:8px;}.author.svelte-1feueb0:hover {color:#757a79;}.footer.svelte-1feueb0 {display:flex;flex-direction:column;justify-content:space-between;min-height:134px;padding-top:9px;padding-bottom:3px;width:100%;}.description.svelte-1feueb0 {padding:3px 18px;height:54px;width:calc(100% - 36px);overflow:hidden;color:#444746;font-size:.875rem;font-weight:400;letter-spacing:0;line-height:1.25rem;outline:none;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;}.link.svelte-1feueb0 {display:flex;width:calc(100% - 36px);overflow:hidden;padding:0px 16px;padding-bottom:14px;}.link.svelte-1feueb0 a:where(.svelte-1feueb0) {color:#0b57d0;font-weight:600;font-size:.975rem;letter-spacing:0;line-height:1.25rem;white-space:nowrap;}.link.svelte-1feueb0 a:where(.svelte-1feueb0):hover {color:#82aae9;}.type_box.svelte-1feueb0 {display:flex;justify-content:right;flex-wrap:wrap;width:100%;}.type_box.svelte-1feueb0 img:where(.svelte-1feueb0) {object-fit:cover;width:24px;height:24px;margin-left:4px;}"
};
function Rb(o, i) {
  Et(i, !0), nt(o, Fy);
  let e = D(i, "item", 19, () => ({
    dateTime: "",
    categories: [],
    imageUrl: "",
    title: "",
    authorImageUrl: "",
    authorName: "",
    authorUrl: "",
    description: "",
    link: "",
    types: []
  }));
  var t = Dy(), n = O(t), r = O(n), s = O(r, !0);
  P(r);
  var a = te(r, 2);
  dt(a, 21, () => e().categories, ct, (y, x) => {
    var C = zy();
    le(() => {
      me(C, "src", M(x).url), me(C, "title", M(x).title);
    }), F(y, C);
  }), P(a), P(n);
  var l = te(n, 2), c = te(l, 2), d = O(c, !0);
  P(c);
  var u = te(c, 2), h = O(u), g = te(h);
  P(u);
  var p = te(u, 2), f = O(p), b = O(f, !0);
  P(f);
  var k = te(f, 2), _ = O(k), w = te(_, 2);
  dt(w, 21, () => e().types, ct, (y, x) => {
    var C = By();
    le(() => {
      me(C, "src", M(x).url), me(C, "title", M(x).title);
    }), F(y, C);
  }), P(w), P(k), P(p), P(t), le(() => {
    Ue(s, e().dateTime), me(l, "src", e().imageUrl), me(c, "href", e().link), Ue(d, e().description), me(u, "href", e().authorUrl), me(h, "src", e().authorImageUrl), Ue(g, ` ${e().authorName ?? ""}`), Ue(b, e().description), me(_, "href", e().link);
  }), F(o, t), St();
}
customElements.define("mv-elegant-card", ot(Rb, { item: {} }, [], [], !0));
var jy = /* @__PURE__ */ $('<div class="menu_frame svelte-1dvvvu9"></div>');
const Hy = {
  hash: "svelte-1dvvvu9",
  code: `.menu_frame.svelte-1dvvvu9 {max-width:2000px;margin:0px auto;display:flex;
    /* justify-content: center; */flex-wrap:wrap;}`
};
function zb(o, i) {
  nt(o, Hy);
  let e = D(i, "items", 7);
  typeof e() == "string" && e(JSON.parse(e()));
  var t = jy();
  dt(t, 21, e, ct, (n, r) => {
    Rb(n, {
      get item() {
        return M(r);
      }
    });
  }), P(t), F(o, t);
}
customElements.define("mv-elegant-cardpage", ot(zb, { items: {} }, [], [], !0));
var $y = (o, i, e) => i(M(e).name), Uy = /* @__PURE__ */ $('<div class="filterbar_option svelte-1d4e3jq"><div class="letter svelte-1d4e3jq"> </div> <div class="name svelte-1d4e3jq"> </div></div>'), qy = /* @__PURE__ */ $('<div class="filterbar_frame svelte-1d4e3jq"></div>');
const Wy = {
  hash: "svelte-1d4e3jq",
  code: `.filterbar_frame.svelte-1d4e3jq {display:flex;justify-content:center;}.filterbar_option.svelte-1d4e3jq {display:flex;flex-flow:row wrap;width:60px;height:100px;margin:8px;user-select:none;
    /* background-color: red; */}.letter.svelte-1d4e3jq {display:flex;align-items:center;justify-content:center;width:100%;height:52px;margin:2px 2px 0px 2px;border-radius:80%;text-align:center;font-size:22px;font-weight:bold;color:#3367d6;border-width:1px;border-style:solid;border-color:transparent;}.letter_selected.svelte-1d4e3jq {background-color:rgb(228, 228, 228);}.letter.svelte-1d4e3jq:hover {cursor:pointer;border-color:lightgray;}.name.svelte-1d4e3jq {width:100%;position:relative;top:-8px;text-align:center;color:gray;font-size:14px;}`
};
function Bb(o, i) {
  Et(i, !0), nt(o, Wy);
  let e = Ze({});
  function t(r) {
    e[r] ? e[r] = !1 : e[r] = !0, i.categoryselect && i.categoryselect(e);
  }
  var n = qy();
  dt(n, 21, () => i.categories, ct, (r, s) => {
    var a = Uy(), l = O(a);
    l.__click = [$y, t, s];
    var c = O(l, !0);
    P(l);
    var d = te(l, 2), u = O(d, !0);
    P(d), P(a), le(() => {
      Zo(l, "letter_selected", e[M(s).name]), Ue(c, M(s).letter), Ue(u, M(s).name);
    }), F(r, a);
  }), P(n), F(o, n), St();
}
Ot(["click"]);
customElements.define("mv-elegant-filtercats", ot(Bb, { categories: {}, categoryselect: {} }, [], [], !0));
function Gy(o, i, e, t, n) {
  if (M(i)) {
    let r = [];
    for (let s of e()) {
      let a = !1;
      for (let l of t())
        if (l.searchable && s[l.name] && s[l.name].toString().toLowerCase().includes(M(i).toLowerCase())) {
          a = !0;
          break;
        }
      a && r.push(s);
    }
    Ke(n, Ze(r));
  } else
    Ke(n, Ze(e()));
}
var Zy = /* @__PURE__ */ $('<th class="svelte-1nbcvq9"> </th>'), Ky = /* @__PURE__ */ $('<a class="table_row svelte-1nbcvq9"> </a>'), Yy = /* @__PURE__ */ $('<span class="table_row svelte-1nbcvq9"> </span>'), Qy = /* @__PURE__ */ $('<td class="svelte-1nbcvq9"><!></td>'), Jy = /* @__PURE__ */ $("<td></td>"), Xy = /* @__PURE__ */ $('<tr class="svelte-1nbcvq9"></tr>'), e2 = /* @__PURE__ */ $('<div class="frame svelte-1nbcvq9" style="container-type: inline-size;"><div class="filter svelte-1nbcvq9"><svg data-icon-name="filterIcon" viewBox="0 0 18 18" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M2 4h14v2H2V4zm2 4h10v2H4V8zm2 4h6v2H6v-2z"></path></svg> <span class="filter_input_box svelte-1nbcvq9">Filter <input class="filter_input svelte-1nbcvq9" placeholder="Value to filter for"></span></div> <table class="svelte-1nbcvq9"><thead class="svelte-1nbcvq9"><tr class="svelte-1nbcvq9"></tr></thead><tbody class="svelte-1nbcvq9"></tbody></table></div>');
const t2 = {
  hash: "svelte-1nbcvq9",
  code: `.frame.svelte-1nbcvq9 {
    /* border-color: #eaedf2 !important; */
    /* box-shadow: 0 2px 18px rgba(0, 0, 0, 0.02) !important; */min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;
    /* border: 0.0625rem solid rgba(46, 54, 80, 0.125); */border-radius:0.5rem;padding:22px 32px;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;}table.svelte-1nbcvq9 {width:100%;margin-bottom:1rem;color:#4a5073;vertical-align:top;border-color:#eaedf2;font-family:"Nunito Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;border-collapse:collapse;}table.svelte-1nbcvq9 thead:where(.svelte-1nbcvq9) tr:where(.svelte-1nbcvq9) th:where(.svelte-1nbcvq9) {vertical-align:center;text-align:left;border-bottom:1px solid #eaedf2 !important;font-size:12px;font-weight:bold;padding-left:14px;padding-bottom:10px;}.table_row.svelte-1nbcvq9 {padding-left:14px;padding-top:14px;padding-bottom:14px;border-bottom:1px solid #eaedf2 !important;display:block;}table.svelte-1nbcvq9 tbody:where(.svelte-1nbcvq9) tr:where(.svelte-1nbcvq9):hover {background-color:#eff0f2;cursor:pointer;border-radius:0.5rem;}.table_row_selected.svelte-1nbcvq9 {background-color:#eff0f2;border-radius:0.5rem;}

  @container (width <= 768px) {.column_sm.svelte-1nbcvq9 {display:none;}
  }a.svelte-1nbcvq9:link {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:visited {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:hover {text-decoration:none;color:#4a5073;}a.svelte-1nbcvq9:active {text-decoration:none;}td.svelte-1nbcvq9 a:where(.svelte-1nbcvq9) {display:block;}.filter.svelte-1nbcvq9 {margin-top:20px;margin-bottom:8px;margin-left:8px;}.filter_input_box.svelte-1nbcvq9 {position:relative;top:-3px;font-weight:bold;font-size:14px;}.filter_input.svelte-1nbcvq9 {width:50%;margin-left:8px;font-family:Google Sans,
      Roboto,
      Helvetica,
      Arial,
      sans-serif;padding:var(--padding);
    /* border: 2px solid gray; */border:0px;outline:none;border-radius:0px;
    /* background-color: #f1f3f4; */background-color:rgb(255, 255, 255);}`
};
function Db(o, i) {
  Et(i, !0), nt(o, t2);
  let e = D(i, "tableHeaders", 23, () => []), t = D(i, "tableRows", 23, () => []), n = D(i, "linkprefix", 3, ""), r = D(i, "linkcolumnname", 3, ""), s = D(i, "tableRowClick", 3, void 0);
  if (typeof e() == "string" && e(JSON.parse(e())), typeof t() == "string" && t(JSON.parse(t())), (!e() || e().length === 0) && t() && t().length > 0) {
    e([]);
    for (let w of Object.keys(t()[0]))
      e().push({
        name: w,
        displayName: w,
        searchable: !0,
        hideNarrow: !1
      });
  }
  let a = tn(Ze(t())), l = tn(""), c = tn(-1);
  const d = (w) => {
    Ke(c, Ze(w)), s() && s()({ detail: { rowIndex: w } }), document.dispatchEvent(new CustomEvent("TableRowClick", { detail: { rowIndex: w } }));
  };
  var u = e2(), h = O(u), g = te(O(h), 2), p = te(O(g));
  ol(p), p.__keyup = [
    Gy,
    l,
    t,
    e,
    a
  ], P(g), P(h);
  var f = te(h, 2), b = O(f), k = O(b);
  dt(k, 21, e, ct, (w, y) => {
    var x = Zy(), C = O(x, !0);
    P(x), le(() => {
      Zo(x, "column_sm", M(y).hideNarrow), Ue(C, M(y).displayName);
    }), F(w, x);
  }), P(k), P(b);
  var _ = te(b);
  dt(_, 21, () => M(a), ct, (w, y, x) => {
    var C = Xy();
    C.__click = () => {
      d(x);
    }, dt(C, 21, e, ct, (S, L) => {
      var W = Bo(), Y = ai(W);
      Be(
        Y,
        () => M(y)[M(L).name],
        (be) => {
          var ue = Qy(), bt = O(ue);
          Be(
            bt,
            r,
            (ae) => {
              var tt = Ky(), Rt = O(tt, !0);
              P(tt), le(() => {
                me(tt, "href", n() + M(y)[r()]), Ue(Rt, M(y)[M(L).name]);
              }), F(ae, tt);
            },
            (ae) => {
              var tt = Yy(), Rt = O(tt, !0);
              P(tt), le(() => Ue(Rt, M(y)[M(L).name])), F(ae, tt);
            }
          ), P(ue), le(() => Zo(ue, "column_sm", M(L).hideNarrow)), F(be, ue);
        },
        (be) => {
          var ue = Jy();
          F(be, ue);
        }
      ), F(S, W);
    }), P(C), le(() => Zo(C, "table_row_selected", x === M(c))), F(w, C);
  }), P(_), P(f), P(u), rl(p, () => M(l), (w) => Ke(l, w)), F(o, u), St();
}
Ot(["keyup", "click"]);
customElements.define("mv-elegant-table", ot(
  Db,
  {
    tableHeaders: {},
    tableRows: {},
    linkprefix: {},
    linkcolumnname: {},
    tableRowClick: {}
  },
  [],
  [],
  !0
));
var i2 = /* @__PURE__ */ $("<!> <!> <!> <!> <!>", 1);
const n2 = { hash: "svelte-32ttx", code: "" };
function o2(o, i) {
  nt(o, n2);
  let e = D(i, "title", 3, ""), t = D(i, "titleImageUrl", 3, ""), n = D(i, "headerMenus", 19, () => []), r = D(i, "searchtext", 7, ""), s = D(i, "categories", 19, () => []), a = D(i, "types", 19, () => []), l = D(i, "sorts", 19, () => []), c = tn("CARD"), d = Ze([
    {
      name: "dateTime",
      displayName: "Date",
      searchable: !1
    },
    {
      name: "authorName",
      displayName: "Author",
      searchable: !0
    },
    {
      name: "title",
      displayName: "Title",
      searchable: !0
    }
  ]);
  var u = i2(), h = ai(u);
  Mb(h, {
    get title() {
      return e();
    },
    get titleImageUrl() {
      return t();
    },
    get headerMenus() {
      return n();
    }
  });
  var g = te(h, 2);
  Lb(g, {
    get title() {
      return e();
    },
    get titleImageUrl() {
      return t();
    },
    get searchtext() {
      return r();
    },
    set searchtext(k) {
      r(k);
    },
    get searchloadresults() {
      return i.searchloadresults;
    },
    get searchsubmit() {
      return i.searchsubmit;
    }
  });
  var p = te(g, 2);
  Bb(p, {
    get categories() {
      return s();
    },
    get categoryselect() {
      return i.categoryselect;
    }
  });
  var f = te(p, 2);
  Nb(f, {
    get types() {
      return a();
    },
    get sorts() {
      return l();
    },
    get typeselect() {
      return i.typeselect;
    },
    get sortselect() {
      return i.sortselect;
    },
    get view() {
      return M(c);
    },
    set view(k) {
      Ke(c, Ze(k));
    }
  });
  var b = te(f, 2);
  Be(
    b,
    () => M(c) === "CARD",
    (k) => {
      zb(k, {
        get items() {
          return i.items;
        }
      });
    },
    (k) => {
      Db(k, {
        get tableHeaders() {
          return d;
        },
        get tableRows() {
          return i.items;
        },
        linkprefix: "",
        linkcolumnname: "link",
        update: void 0
      });
    }
  ), F(o, u);
}
customElements.define("mv-elegant-buffet", ot(
  o2,
  {
    title: {},
    titleImageUrl: {},
    headerMenus: {},
    searchtext: {},
    searchloadresults: {},
    searchsubmit: {},
    categories: {},
    categoryselect: {},
    types: {},
    typeselect: {},
    sorts: {},
    sortselect: {},
    items: {}
  },
  [],
  [],
  !0
));
var r2 = /* @__PURE__ */ $('<div class="lds-ring svelte-nag87b"><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div><div class="svelte-nag87b"></div></div>');
const s2 = {
  hash: "svelte-nag87b",
  code: `.lds-ring.svelte-nag87b {
  /* display: inline-block;
  position: relative; */display:inline-block;position:absolute;width:99%;text-align:center;height:80px;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b) {box-sizing:border-box;position:absolute;left:48%;top:42%;width:32px;height:32px;margin:8px;border:4px solid #3367d6;border-radius:50%;
  animation: svelte-nag87b-lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;border-color:#3367d6 transparent transparent transparent;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(1) {animation-delay:-0.45s;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(2) {animation-delay:-0.3s;}.lds-ring.svelte-nag87b div:where(.svelte-nag87b):nth-child(3) {animation-delay:-0.15s;}
@keyframes svelte-nag87b-lds-ring {
  0% {
      transform: rotate(0deg);
  }
  100% {
      transform: rotate(360deg);
  }
}`
};
function a2(o, i) {
  nt(o, s2);
  var e = r2();
  F(o, e);
}
customElements.define("mv-elegant-spinner", ot(a2, {}, [], [], !0));
/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */
function l2(o, i) {
  return i.forEach(function(e) {
    e && typeof e != "string" && !Array.isArray(e) && Object.keys(e).forEach(function(t) {
      if (t !== "default" && !(t in o)) {
        var n = Object.getOwnPropertyDescriptor(e, t);
        Object.defineProperty(o, t, n.get ? n : { enumerable: !0, get: function() {
          return e[t];
        } });
      }
    });
  }), Object.freeze(o);
}
let qc;
try {
  qc = { window, document };
} catch {
  qc = { window: {}, document: {} };
}
var z = qc;
function c2() {
  try {
    return navigator.userAgent.toLowerCase();
  } catch {
    return "";
  }
}
const jn = c2(), q = { isMac: Fb(jn), isWindows: d2(jn), isGecko: u2(jn), isSafari: h2(jn), isiOS: m2(jn), isAndroid: g2(jn), isBlink: p2(jn), get isMediaForcedColors() {
  return !!z.window.matchMedia && z.window.matchMedia("(forced-colors: active)").matches;
}, get isMotionReduced() {
  return !!z.window.matchMedia && z.window.matchMedia("(prefers-reduced-motion)").matches;
}, features: { isRegExpUnicodePropertySupported: f2() } };
function Fb(o) {
  return o.indexOf("macintosh") > -1;
}
function d2(o) {
  return o.indexOf("windows") > -1;
}
function u2(o) {
  return !!o.match(/gecko\/\d+/);
}
function h2(o) {
  return o.indexOf(" applewebkit/") > -1 && o.indexOf("chrome") === -1;
}
function m2(o) {
  return !!o.match(/iphone|ipad/i) || Fb(o) && navigator.maxTouchPoints > 0;
}
function g2(o) {
  return o.indexOf("android") > -1;
}
function p2(o) {
  return o.indexOf("chrome/") > -1 && o.indexOf("edge/") < 0;
}
function f2() {
  let o = !1;
  try {
    o = "ć".search(new RegExp("[\\p{L}]", "u")) === 0;
  } catch {
  }
  return o;
}
function jb(o, i, e, t) {
  e = e || function(l, c) {
    return l === c;
  };
  const n = Array.isArray(o) ? o : Array.prototype.slice.call(o), r = Array.isArray(i) ? i : Array.prototype.slice.call(i), s = function(l, c, d) {
    const u = bh(l, c, d);
    if (u === -1) return { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 };
    const h = kh(l, u), g = kh(c, u), p = bh(h, g, d), f = l.length - p, b = c.length - p;
    return { firstIndex: u, lastIndexOld: f, lastIndexNew: b };
  }(n, r, e);
  return t ? function(l, c) {
    const { firstIndex: d, lastIndexOld: u, lastIndexNew: h } = l;
    if (d === -1) return Array(c).fill("equal");
    let g = [];
    return d > 0 && (g = g.concat(Array(d).fill("equal"))), h - d > 0 && (g = g.concat(Array(h - d).fill("insert"))), u - d > 0 && (g = g.concat(Array(u - d).fill("delete"))), h < c && (g = g.concat(Array(c - h).fill("equal"))), g;
  }(s, r.length) : function(l, c) {
    const d = [], { firstIndex: u, lastIndexOld: h, lastIndexNew: g } = c;
    return g - u > 0 && d.push({ index: u, type: "insert", values: l.slice(u, g) }), h - u > 0 && d.push({ index: u + (g - u), type: "delete", howMany: h - u }), d;
  }(r, s);
}
function bh(o, i, e) {
  for (let t = 0; t < Math.max(o.length, i.length); t++) if (o[t] === void 0 || i[t] === void 0 || !e(o[t], i[t])) return t;
  return -1;
}
function kh(o, i) {
  return o.slice(i).reverse();
}
function Ko(o, i, e) {
  e = e || function(f, b) {
    return f === b;
  };
  const t = o.length, n = i.length;
  if (t > 200 || n > 200 || t + n > 300) return Ko.fastDiff(o, i, e, !0);
  let r, s;
  if (n < t) {
    const f = o;
    o = i, i = f, r = "delete", s = "insert";
  } else r = "insert", s = "delete";
  const a = o.length, l = i.length, c = l - a, d = {}, u = {};
  function h(f) {
    const b = (u[f - 1] !== void 0 ? u[f - 1] : -1) + 1, k = u[f + 1] !== void 0 ? u[f + 1] : -1, _ = b > k ? -1 : 1;
    d[f + _] && (d[f] = d[f + _].slice(0)), d[f] || (d[f] = []), d[f].push(b > k ? r : s);
    let w = Math.max(b, k), y = w - f;
    for (; y < a && w < l && e(o[y], i[w]); ) y++, w++, d[f].push("equal");
    return w;
  }
  let g, p = 0;
  do {
    for (g = -p; g < c; g++) u[g] = h(g);
    for (g = c + p; g > c; g--) u[g] = h(g);
    u[c] = h(c), p++;
  } while (u[c] !== l);
  return d[c].slice(1);
}
Ko.fastDiff = jb;
class sn {
  constructor(i, e) {
    m(this, "source");
    m(this, "name");
    m(this, "path");
    m(this, "stop");
    m(this, "off");
    m(this, "return");
    this.source = i, this.name = e, this.path = [], this.stop = function t() {
      t.called = !0;
    }, this.off = function t() {
      t.called = !0;
    };
  }
}
const yt = new Array(256).fill("").map((o, i) => ("0" + i.toString(16)).slice(-2));
function Tt() {
  const [o, i, e, t] = crypto.getRandomValues(new Uint32Array(4));
  return "e" + yt[255 & o] + yt[o >> 8 & 255] + yt[o >> 16 & 255] + yt[o >> 24 & 255] + yt[255 & i] + yt[i >> 8 & 255] + yt[i >> 16 & 255] + yt[i >> 24 & 255] + yt[255 & e] + yt[e >> 8 & 255] + yt[e >> 16 & 255] + yt[e >> 24 & 255] + yt[255 & t] + yt[t >> 8 & 255] + yt[t >> 16 & 255] + yt[t >> 24 & 255];
}
const Tn = { get(o = "normal") {
  return typeof o != "number" ? this[o] || this.normal : o;
}, highest: 1e5, high: 1e3, normal: 0, low: -1e3, lowest: -1e5 };
function Hb(o, i) {
  const e = Tn.get(i.priority);
  let t = 0, n = o.length;
  for (; t < n; ) {
    const r = t + n >> 1;
    Tn.get(o[r].priority) < e ? n = r : t = r + 1;
  }
  o.splice(t, 0, i);
}
class v extends Error {
  constructor(e, t, n) {
    super(function(r, s) {
      const a = /* @__PURE__ */ new WeakSet(), l = (u, h) => {
        if (typeof h == "object" && h !== null) {
          if (a.has(h)) return `[object ${h.constructor.name}]`;
          a.add(h);
        }
        return h;
      }, c = s ? ` ${JSON.stringify(s, l)}` : "", d = $b(r);
      return r + c + d;
    }(e, n));
    m(this, "context");
    m(this, "data");
    this.name = "CKEditorError", this.context = t, this.data = n;
  }
  is(e) {
    return e === "CKEditorError";
  }
  static rethrowUnexpectedError(e, t) {
    if (e.is && e.is("CKEditorError")) throw e;
    const n = new v(e.message, t);
    throw n.stack = e.stack, n;
  }
}
function ce(o, i) {
  console.warn(...Ub(o, i));
}
function b2(o, i) {
  console.error(...Ub(o, i));
}
function $b(o) {
  return `
Read more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${o}`;
}
function Ub(o, i) {
  const e = $b(o);
  return i ? [o, i, e] : [o, e];
}
const qb = "45.0.0", k2 = new Date(2025, 3, 7);
if (globalThis.CKEDITOR_VERSION) throw new v("ckeditor-duplicated-modules", null);
globalThis.CKEDITOR_VERSION = qb;
const Po = Symbol("listeningTo"), Wc = Symbol("emitterId"), Ui = Symbol("delegations"), Wb = Ae(Object);
function Ae(o) {
  return o ? class extends o {
    on(i, e, t) {
      this.listenTo(this, i, e, t);
    }
    once(i, e, t) {
      let n = !1;
      this.listenTo(this, i, (r, ...s) => {
        n || (n = !0, r.off(), e.call(this, r, ...s));
      }, t);
    }
    off(i, e) {
      this.stopListening(this, i, e);
    }
    listenTo(i, e, t, n = {}) {
      let r, s;
      this[Po] || (this[Po] = {});
      const a = this[Po];
      Sl(i) || Gb(i);
      const l = Sl(i);
      (r = a[l]) || (r = a[l] = { emitter: i, callbacks: {} }), (s = r.callbacks[e]) || (s = r.callbacks[e] = []), s.push(t), function(c, d, u, h, g) {
        d._addEventListener ? d._addEventListener(u, h, g) : c._addEventListener.call(d, u, h, g);
      }(this, i, e, t, n);
    }
    stopListening(i, e, t) {
      const n = this[Po];
      let r = i && Sl(i);
      const s = n && r ? n[r] : void 0, a = s && e ? s.callbacks[e] : void 0;
      if (!(!n || i && !s || e && !a)) if (t)
        Il(this, i, e, t), a.indexOf(t) !== -1 && (a.length === 1 ? delete s.callbacks[e] : Il(this, i, e, t));
      else if (a) {
        for (; t = a.pop(); ) Il(this, i, e, t);
        delete s.callbacks[e];
      } else if (s) {
        for (e in s.callbacks) this.stopListening(i, e);
        delete n[r];
      } else {
        for (r in n) this.stopListening(n[r].emitter);
        delete this[Po];
      }
    }
    fire(i, ...e) {
      try {
        const t = i instanceof sn ? i : new sn(this, i), n = t.name;
        let r = function(a, l) {
          if (!a._events) return null;
          let c = l;
          do {
            const d = a._events[c];
            if (d && d.callbacks && d.callbacks.length) return d.callbacks;
            const u = c.lastIndexOf(":");
            c = u > -1 ? c.substring(0, u) : "";
          } while (c);
          return null;
        }(this, n);
        if (t.path.push(this), r) {
          r = r.slice();
          for (let a = 0; a < r.length; a++) {
            const l = r[a].callback;
            if (l.call(this, t, ...e), t.off.called && (delete t.off.called, this._removeEventListener(n, l)), t.stop.called) break;
          }
        }
        const s = this[Ui];
        if (s) {
          const a = s.get(n), l = s.get("*");
          a && _h(a, t, e), l && _h(l, t, e);
        }
        return t.return;
      } catch (t) {
        v.rethrowUnexpectedError(t, this);
      }
    }
    delegate(...i) {
      return { to: (e, t) => {
        this[Ui] || (this[Ui] = /* @__PURE__ */ new Map()), i.forEach((n) => {
          const r = this[Ui].get(n);
          r ? r.set(e, t) : this[Ui].set(n, /* @__PURE__ */ new Map([[e, t]]));
        });
      } };
    }
    stopDelegating(i, e) {
      if (this[Ui]) if (i) if (e) {
        const t = this[Ui].get(i);
        t && t.delete(e);
      } else this[Ui].delete(i);
      else this[Ui].clear();
    }
    _addEventListener(i, e, t) {
      (function(s, a) {
        const l = Zb(s);
        if (l[a]) return;
        let c = a, d = null;
        const u = [];
        for (; c !== "" && !l[c]; ) l[c] = { callbacks: [], childEvents: [] }, u.push(l[c]), d && l[c].childEvents.push(d), d = c, c = c.substr(0, c.lastIndexOf(":"));
        if (c !== "") {
          for (const h of u) h.callbacks = l[c].callbacks.slice();
          l[c].childEvents.push(d);
        }
      })(this, i);
      const n = Gc(this, i), r = { callback: e, priority: Tn.get(t.priority) };
      for (const s of n) Hb(s, r);
    }
    _removeEventListener(i, e) {
      const t = Gc(this, i);
      for (const n of t) for (let r = 0; r < n.length; r++) n[r].callback == e && (n.splice(r, 1), r--);
    }
  } : Wb;
}
function Gb(o, i) {
  o[Wc] || (o[Wc] = i || Tt());
}
function Sl(o) {
  return o[Wc];
}
function Zb(o) {
  return o._events || Object.defineProperty(o, "_events", { value: {} }), o._events;
}
function Gc(o, i) {
  const e = Zb(o)[i];
  if (!e) return [];
  let t = [e.callbacks];
  for (let n = 0; n < e.childEvents.length; n++) {
    const r = Gc(o, e.childEvents[n]);
    t = t.concat(r);
  }
  return t;
}
function _h(o, i, e) {
  for (let [t, n] of o) {
    n ? typeof n == "function" && (n = n(i.name)) : n = i.name;
    const r = new sn(i.source, n);
    r.path = [...i.path], t.fire(r, ...e);
  }
}
function Il(o, i, e, t) {
  i._removeEventListener ? i._removeEventListener(e, t) : o._removeEventListener.call(i, e, t);
}
function Mo(o) {
  return o;
}
function pa() {
}
function ru(o) {
  return o == null || typeof o != "object" && typeof o != "function";
}
function su(o) {
  return ArrayBuffer.isView(o) && !(o instanceof DataView);
}
function au(o) {
  if (ru(o)) return o;
  if (Array.isArray(o) || su(o) || o instanceof ArrayBuffer || typeof SharedArrayBuffer < "u" && o instanceof SharedArrayBuffer) return o.slice(0);
  const i = Object.getPrototypeOf(o), e = i.constructor;
  if (o instanceof Date || o instanceof Map || o instanceof Set) return new e(o);
  if (o instanceof RegExp) {
    const t = new e(o);
    return t.lastIndex = o.lastIndex, t;
  }
  if (o instanceof DataView) return new e(o.buffer.slice(0));
  if (o instanceof Error) {
    const t = new e(o.message);
    return t.stack = o.stack, t.name = o.name, t.cause = o.cause, t;
  }
  if (typeof File < "u" && o instanceof File)
    return new e([o], o.name, { type: o.type, lastModified: o.lastModified });
  if (typeof o == "object") {
    const t = Object.create(i);
    return Object.assign(t, o);
  }
  return o;
}
function wh(o) {
  if (!o || typeof o != "object") return !1;
  const i = Object.getPrototypeOf(o);
  return !(i !== null && i !== Object.prototype && Object.getPrototypeOf(i) !== null) && Object.prototype.toString.call(o) === "[object Object]";
}
function Zc(o) {
  return typeof o == "object" && o !== null;
}
function fa(o) {
  return Object.getOwnPropertySymbols(o).filter((i) => Object.prototype.propertyIsEnumerable.call(o, i));
}
function ba(o) {
  return o == null ? o === void 0 ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(o);
}
["on", "once", "off", "listenTo", "stopListening", "fire", "delegate", "stopDelegating", "_addEventListener", "_removeEventListener"].forEach((o) => {
  Ae[o] = Wb.prototype[o];
});
const Kb = "[object RegExp]", lu = "[object String]", cu = "[object Number]", du = "[object Boolean]", ka = "[object Arguments]", Yb = "[object Symbol]", Qb = "[object Date]", Jb = "[object Map]", Xb = "[object Set]", ek = "[object Array]", tk = "[object ArrayBuffer]", oa = "[object Object]", ik = "[object DataView]", nk = "[object Uint8Array]", ok = "[object Uint8ClampedArray]", rk = "[object Uint16Array]", sk = "[object Uint32Array]", ak = "[object Int8Array]", lk = "[object Int16Array]", ck = "[object Int32Array]", dk = "[object Float32Array]", uk = "[object Float64Array]";
function Do(o, i, e, t = /* @__PURE__ */ new Map(), n = void 0) {
  const r = n == null ? void 0 : n(o, i, e, t);
  if (r != null) return r;
  if (ru(o)) return o;
  if (t.has(o)) return t.get(o);
  if (Array.isArray(o)) {
    const s = new Array(o.length);
    t.set(o, s);
    for (let a = 0; a < o.length; a++) s[a] = Do(o[a], a, e, t, n);
    return Object.hasOwn(o, "index") && (s.index = o.index), Object.hasOwn(o, "input") && (s.input = o.input), s;
  }
  if (o instanceof Date) return new Date(o.getTime());
  if (o instanceof RegExp) {
    const s = new RegExp(o.source, o.flags);
    return s.lastIndex = o.lastIndex, s;
  }
  if (o instanceof Map) {
    const s = /* @__PURE__ */ new Map();
    t.set(o, s);
    for (const [a, l] of o) s.set(a, Do(l, a, e, t, n));
    return s;
  }
  if (o instanceof Set) {
    const s = /* @__PURE__ */ new Set();
    t.set(o, s);
    for (const a of o) s.add(Do(a, void 0, e, t, n));
    return s;
  }
  if (typeof Buffer < "u" && Buffer.isBuffer(o)) return o.subarray();
  if (su(o)) {
    const s = new (Object.getPrototypeOf(o)).constructor(o.length);
    t.set(o, s);
    for (let a = 0; a < o.length; a++) s[a] = Do(o[a], a, e, t, n);
    return s;
  }
  if (o instanceof ArrayBuffer || typeof SharedArrayBuffer < "u" && o instanceof SharedArrayBuffer) return o.slice(0);
  if (o instanceof DataView) {
    const s = new DataView(o.buffer.slice(0), o.byteOffset, o.byteLength);
    return t.set(o, s), Zn(s, o, e, t, n), s;
  }
  if (typeof File < "u" && o instanceof File) {
    const s = new File([o], o.name, { type: o.type });
    return t.set(o, s), Zn(s, o, e, t, n), s;
  }
  if (o instanceof Blob) {
    const s = new Blob([o], { type: o.type });
    return t.set(o, s), Zn(s, o, e, t, n), s;
  }
  if (o instanceof Error) {
    const s = new o.constructor();
    return t.set(o, s), s.message = o.message, s.name = o.name, s.stack = o.stack, s.cause = o.cause, Zn(s, o, e, t, n), s;
  }
  if (typeof o == "object" && function(s) {
    switch (ba(s)) {
      case ka:
      case ek:
      case tk:
      case ik:
      case du:
      case Qb:
      case dk:
      case uk:
      case ak:
      case lk:
      case ck:
      case Jb:
      case cu:
      case oa:
      case Kb:
      case Xb:
      case lu:
      case Yb:
      case nk:
      case ok:
      case rk:
      case sk:
        return !0;
      default:
        return !1;
    }
  }(o)) {
    const s = Object.create(Object.getPrototypeOf(o));
    return t.set(o, s), Zn(s, o, e, t, n), s;
  }
  return o;
}
function Zn(o, i, e = o, t, n) {
  const r = [...Object.keys(i), ...fa(i)];
  for (let s = 0; s < r.length; s++) {
    const a = r[s], l = Object.getOwnPropertyDescriptor(o, a);
    (l == null || l.writable) && (o[a] = Do(i[a], a, e, t, n));
  }
}
function hk(o, i) {
  return o === i || Number.isNaN(o) && Number.isNaN(i);
}
function mk(o, i, e) {
  return Ir(o, i, void 0, void 0, void 0, void 0, e);
}
function Ir(o, i, e, t, n, r, s) {
  const a = s(o, i, e, t, n, r);
  if (a !== void 0) return a;
  if (typeof o == typeof i) switch (typeof o) {
    case "bigint":
    case "string":
    case "boolean":
    case "symbol":
    case "undefined":
    case "function":
      return o === i;
    case "number":
      return o === i || Object.is(o, i);
    case "object":
      return Br(o, i, r, s);
  }
  return Br(o, i, r, s);
}
function Br(o, i, e, t) {
  if (Object.is(o, i)) return !0;
  let n = ba(o), r = ba(i);
  if (n === ka && (n = oa), r === ka && (r = oa), n !== r) return !1;
  switch (n) {
    case lu:
      return o.toString() === i.toString();
    case cu:
      return hk(o.valueOf(), i.valueOf());
    case du:
    case Qb:
    case Yb:
      return Object.is(o.valueOf(), i.valueOf());
    case Kb:
      return o.source === i.source && o.flags === i.flags;
    case "[object Function]":
      return o === i;
  }
  const s = (e = e ?? /* @__PURE__ */ new Map()).get(o), a = e.get(i);
  if (s != null && a != null) return s === i;
  e.set(o, i), e.set(i, o);
  try {
    switch (n) {
      case Jb:
        if (o.size !== i.size) return !1;
        for (const [l, c] of o.entries()) if (!i.has(l) || !Ir(c, i.get(l), l, o, i, e, t)) return !1;
        return !0;
      case Xb: {
        if (o.size !== i.size) return !1;
        const l = Array.from(o.values()), c = Array.from(i.values());
        for (let d = 0; d < l.length; d++) {
          const u = l[d], h = c.findIndex((g) => Ir(u, g, void 0, o, i, e, t));
          if (h === -1) return !1;
          c.splice(h, 1);
        }
        return !0;
      }
      case ek:
      case nk:
      case ok:
      case rk:
      case sk:
      case "[object BigUint64Array]":
      case ak:
      case lk:
      case ck:
      case "[object BigInt64Array]":
      case dk:
      case uk:
        if (typeof Buffer < "u" && Buffer.isBuffer(o) !== Buffer.isBuffer(i) || o.length !== i.length) return !1;
        for (let l = 0; l < o.length; l++) if (!Ir(o[l], i[l], l, o, i, e, t)) return !1;
        return !0;
      case tk:
        return o.byteLength === i.byteLength && Br(new Uint8Array(o), new Uint8Array(i), e, t);
      case ik:
        return o.byteLength === i.byteLength && o.byteOffset === i.byteOffset && Br(new Uint8Array(o), new Uint8Array(i), e, t);
      case "[object Error]":
        return o.name === i.name && o.message === i.message;
      case oa: {
        if (!(Br(o.constructor, i.constructor, e, t) || wh(o) && wh(i))) return !1;
        const l = [...Object.keys(o), ...fa(o)], c = [...Object.keys(i), ...fa(i)];
        if (l.length !== c.length) return !1;
        for (let d = 0; d < l.length; d++) {
          const u = l[d], h = o[u];
          if (!Object.hasOwn(i, u) || !Ir(h, i[u], u, o, i, e, t)) return !1;
        }
        return !0;
      }
      default:
        return !1;
    }
  } finally {
    e.delete(o), e.delete(i);
  }
}
function _a(o, i) {
  return mk(o, i, pa);
}
function wa(o) {
  return typeof o == "function";
}
function _2(o) {
  return o != null && typeof o != "function" && function(i) {
    return Number.isSafeInteger(i) && i >= 0;
  }(o.length);
}
function gk(o) {
  switch (typeof o) {
    case "number":
    case "symbol":
      return !1;
    case "string":
      return o.includes(".") || o.includes("[") || o.includes("]");
  }
}
function pk(o) {
  return Object.is(o, -0) ? "-0" : o.toString();
}
function uu(o) {
  const i = [], e = o.length;
  if (e === 0) return i;
  let t = 0, n = "", r = "", s = !1;
  for (o.charCodeAt(0) === 46 && (i.push(""), t++); t < e; ) {
    const a = o[t];
    r ? a === "\\" && t + 1 < e ? (t++, n += o[t]) : a === r ? r = "" : n += a : s ? a === '"' || a === "'" ? r = a : a === "]" ? (s = !1, i.push(n), n = "") : n += a : a === "[" ? (s = !0, n && (i.push(n), n = "")) : a === "." ? n && (i.push(n), n = "") : n += a, t++;
  }
  return n && i.push(n), i;
}
function Pn(o, i, e) {
  if (o == null) return e;
  switch (typeof i) {
    case "string": {
      const t = o[i];
      return t === void 0 ? gk(i) ? Pn(o, uu(i), e) : e : t;
    }
    case "number":
    case "symbol": {
      typeof i == "number" && (i = pk(i));
      const t = o[i];
      return t === void 0 ? e : t;
    }
    default: {
      if (Array.isArray(i)) return function(n, r, s) {
        if (r.length === 0) return s;
        let a = n;
        for (let l = 0; l < r.length; l++) {
          if (a == null) return s;
          a = a[r[l]];
        }
        return a === void 0 ? s : a;
      }(o, i, e);
      const t = o[i = Object.is(i == null ? void 0 : i.valueOf(), -0) ? "-0" : String(i)];
      return t === void 0 ? e : t;
    }
  }
}
function wi(o) {
  return o !== null && (typeof o == "object" || typeof o == "function");
}
function sl(o, i) {
  return function(e, t) {
    return Do(e, void 0, e, /* @__PURE__ */ new Map(), t);
  }(o, (e, t, n, r) => {
    const s = i == null ? void 0 : i(e, t, n, r);
    if (s != null) return s;
    if (typeof o == "object") switch (Object.prototype.toString.call(o)) {
      case cu:
      case lu:
      case du: {
        const a = new o.constructor(o == null ? void 0 : o.valueOf());
        return Zn(a, o), a;
      }
      case ka: {
        const a = {};
        return Zn(a, o), a.length = o.length, a[Symbol.iterator] = o[Symbol.iterator], a;
      }
      default:
        return;
    }
  });
}
function Kt(o) {
  return sl(o);
}
const w2 = /^(?:0|[1-9]\d*)$/;
function v2(o, i = Number.MAX_SAFE_INTEGER) {
  switch (typeof o) {
    case "number":
      return Number.isInteger(o) && o >= 0 && o < i;
    case "symbol":
      return !1;
    case "string":
      return w2.test(o);
  }
}
function vh(o) {
  return o !== null && typeof o == "object" && ba(o) === "[object Arguments]";
}
function y2(o) {
  return function(i) {
    return typeof i == "symbol" || i instanceof Symbol;
  }(o) ? NaN : Number(o);
}
function x2(o) {
  const i = function(t) {
    return t ? (t = y2(t)) === 1 / 0 || t === -1 / 0 ? (t < 0 ? -1 : 1) * Number.MAX_VALUE : t == t ? t : 0 : t === 0 ? t : 0;
  }(o), e = i % 1;
  return e ? i - e : i;
}
function yh(o) {
  return typeof o == "string" || o instanceof String;
}
function fk(o, i, e) {
  const t = Array.isArray(i) ? i : typeof i == "string" ? uu(i) : [i];
  let n = o;
  for (let r = 0; r < t.length - 1; r++) {
    const s = t[r], a = t[r + 1];
    n[s] == null && (n[s] = v2(a) ? [] : {}), n = n[s];
  }
  return n[t[t.length - 1]] = e, o;
}
function C2(o, i, { signal: e, edges: t } = {}) {
  let n, r = null;
  const s = t != null && t.includes("leading"), a = t == null || t.includes("trailing"), l = () => {
    r !== null && (o.apply(n, r), n = void 0, r = null);
  };
  let c = null;
  const d = () => {
    c != null && clearTimeout(c), c = setTimeout(() => {
      c = null, a && l(), h();
    }, i);
  }, u = () => {
    c !== null && (clearTimeout(c), c = null);
  }, h = () => {
    u(), n = void 0, r = null;
  }, g = function(...p) {
    if (e != null && e.aborted) return;
    n = this, r = p;
    const f = c == null;
    d(), s && f && l();
  };
  return g.schedule = d, g.cancel = h, g.flush = () => {
    u(), l();
  }, e == null || e.addEventListener("abort", h, { once: !0 }), g;
}
function vi(o, i = 0, e = {}) {
  typeof e != "object" && (e = {});
  const { signal: t, leading: n = !1, trailing: r = !0, maxWait: s } = e, a = Array(2);
  let l;
  n && (a[0] = "leading"), r && (a[1] = "trailing");
  let c = null;
  const d = C2(function(...h) {
    l = o.apply(this, h), c = null;
  }, i, { signal: t, edges: a }), u = function(...h) {
    if (s != null) {
      if (c === null) c = Date.now();
      else if (Date.now() - c >= s) return l = o.apply(this, h), c = Date.now(), d.cancel(), d.schedule(), l;
    }
    return d.apply(this, h), l;
  };
  return u.cancel = d.cancel, u.flush = () => (d.flush(), l), u;
}
function Xo(o, i = 0, e = {}) {
  typeof e != "object" && (e = {});
  const { leading: t = !0, trailing: n = !0, signal: r } = e;
  return vi(o, i, { leading: t, trailing: n, signal: r, maxWait: i });
}
function hu(o) {
  if (o == null) return "";
  if (Array.isArray(o)) return o.map(hu).join(",");
  const i = String(o);
  return i === "0" && Object.is(Number(o), -0) ? "-0" : i;
}
function bk(o) {
  return su(o);
}
function A2(o) {
  if (o == null) return [];
  switch (typeof o) {
    case "object":
    case "function":
      return _2(o) ? function(i) {
        const e = function(n, r) {
          if ((n = x2(n)) < 1 || !Number.isSafeInteger(n)) return [];
          const s = new Array(n);
          for (let a = 0; a < n; a++) s[a] = typeof r == "function" ? r(a) : a;
          return s;
        }(i.length, (n) => `${n}`), t = new Set(e);
        return function(n) {
          return typeof Buffer < "u" && Buffer.isBuffer(n);
        }(i) && (t.add("offset"), t.add("parent")), bk(i) && (t.add("buffer"), t.add("byteLength"), t.add("byteOffset")), [...e, ...Ls(i).filter((n) => !t.has(n))];
      }(o) : function(i) {
        const e = i == null ? void 0 : i.constructor;
        return i === (typeof e == "function" ? e.prototype : Object.prototype);
      }(o) ? function(i) {
        return Ls(i).filter((t) => t !== "constructor");
      }(o) : Ls(o);
    default:
      return Ls(Object(o));
  }
}
function Ls(o) {
  const i = [];
  for (const e in o) i.push(e);
  return i;
}
function kk(o, ...i) {
  for (let e = 0; e < i.length; e++) T2(o, i[e]);
  return o;
}
function T2(o, i) {
  const e = A2(i);
  for (let t = 0; t < e.length; t++) {
    const n = e[t];
    hk(o[n], i[n]) || (o[n] = i[n]);
  }
}
function xh(o, i) {
  const e = {}, t = Object.keys(o);
  for (let n = 0; n < t.length; n++) {
    const r = t[n], s = o[r];
    e[r] = i(s, r, o);
  }
  return e;
}
function E2(o, i) {
  switch (typeof (i = i ?? Mo)) {
    case "string":
    case "symbol":
    case "number":
    case "object":
      return xh(o, (e = i, function(t) {
        return Pn(t, e);
      }));
    case "function":
      return xh(o, i);
  }
  var e;
}
function Mi(o) {
  var e;
  if (typeof o != "object" || o == null) return !1;
  if (Object.getPrototypeOf(o) === null) return !0;
  if (Object.prototype.toString.call(o) !== "[object Object]") {
    const t = o[Symbol.toStringTag];
    return t == null ? !1 : !!((e = Object.getOwnPropertyDescriptor(o, Symbol.toStringTag)) != null && e.writable) && o.toString() === `[object ${t}]`;
  }
  let i = o;
  for (; Object.getPrototypeOf(i) !== null; ) i = Object.getPrototypeOf(i);
  return Object.getPrototypeOf(o) === i;
}
function S2(o, ...i) {
  const e = i.slice(0, -1), t = i[i.length - 1];
  let n = o;
  for (let r = 0; r < e.length; r++)
    n = Kc(n, e[r], t, /* @__PURE__ */ new Map());
  return n;
}
function Kc(o, i, e, t) {
  if (ru(o) && (o = Object(o)), i == null || typeof i != "object") return o;
  if (t.has(i)) return au(t.get(i));
  if (t.set(i, o), Array.isArray(i)) {
    i = i.slice();
    for (let r = 0; r < i.length; r++) i[r] = i[r] ?? void 0;
  }
  const n = [...Object.keys(i), ...fa(i)];
  for (let r = 0; r < n.length; r++) {
    const s = n[r];
    let a = i[s], l = o[s];
    if (vh(a) && (a = { ...a }), vh(l) && (l = { ...l }), typeof Buffer < "u" && Buffer.isBuffer(a) && (a = Kt(a)), Array.isArray(a)) if (typeof l == "object" && l != null) {
      const d = [], u = Reflect.ownKeys(l);
      for (let h = 0; h < u.length; h++) {
        const g = u[h];
        d[g] = l[g];
      }
      l = d;
    } else l = [];
    const c = e(l, a, s, o, i, t);
    c != null ? o[s] = c : Array.isArray(a) || Zc(l) && Zc(a) ? o[s] = Kc(l, a, e, t) : l == null && Mi(a) ? o[s] = Kc({}, a, e, t) : l == null && bk(a) ? o[s] = Kt(a) : l !== void 0 && a === void 0 || (o[s] = a);
  }
  return o;
}
function mu(o, ...i) {
  return S2(o, ...i, pa);
}
function I2(o, i) {
  if (o == null) return !0;
  switch (typeof i) {
    case "symbol":
    case "number":
    case "object":
      if (Array.isArray(i)) return Ch(o, i);
      if (typeof i == "number" ? i = pk(i) : typeof i == "object" && (i = Object.is(i == null ? void 0 : i.valueOf(), -0) ? "-0" : String(i)), (o == null ? void 0 : o[i]) === void 0) return !0;
      try {
        return delete o[i], !0;
      } catch {
        return !1;
      }
    case "string":
      if ((o == null ? void 0 : o[i]) === void 0 && gk(i)) return Ch(o, uu(i));
      try {
        return delete o[i], !0;
      } catch {
        return !1;
      }
  }
}
function Ch(o, i) {
  const e = Pn(o, i.slice(0, -1), o), t = i[i.length - 1];
  if ((e == null ? void 0 : e[t]) === void 0) return !0;
  try {
    return delete e[t], !0;
  } catch {
    return !1;
  }
}
function Mn(o) {
  return Zc(o) && o.nodeType === 1 && !Mi(o);
}
function P2(o, i) {
  if (!Number.isInteger(o) || o < 0) throw new Error("n must be a non-negative integer.");
  let e = 0;
  return (...t) => {
    if (++e >= o) return i(...t);
  };
}
function _k(o, i, e = pa) {
  return typeof e != "function" && (e = pa), mk(o, i, (...t) => {
    const n = e(...t);
    return n !== void 0 ? !!n : o instanceof Map && i instanceof Map || o instanceof Set && i instanceof Set ? _k(Array.from(o), Array.from(i), P2(2, e)) : void 0;
  });
}
function wk(o) {
  return function(i) {
    return i.replace(/[\\^$.*+?()[\]{}|]/g, "\\$&");
  }(hu(o));
}
const Dr = Symbol("observableProperties"), is = Symbol("boundObservables"), Fr = Symbol("boundProperties"), Hn = Symbol("decoratedMethods"), Ah = Symbol("decoratedOriginal"), vk = xe(Ae());
function xe(o) {
  var i, e, t, n, r;
  return o ? class extends (r = o, n = Dr, t = Hn, e = Fr, i = is, r) {
    constructor() {
      super(...arguments);
      m(this, n);
      m(this, t);
      m(this, e);
      m(this, i);
    }
    set(a, l) {
      if (wi(a)) return void Object.keys(a).forEach((d) => {
        this.set(d, a[d]);
      }, this);
      Pl(this);
      const c = this[Dr];
      if (a in this && !c.has(a)) throw new v("observable-set-cannot-override", this);
      Object.defineProperty(this, a, { enumerable: !0, configurable: !0, get: () => c.get(a), set(d) {
        const u = c.get(a);
        let h = this.fire(`set:${a}`, a, d, u);
        h === void 0 && (h = d), u === h && c.has(a) || (c.set(a, h), this.fire(`change:${a}`, a, h, u));
      } }), this[a] = l;
    }
    bind(...a) {
      if (!a.length || !Th(a)) throw new v("observable-bind-wrong-properties", this);
      if (new Set(a).size !== a.length) throw new v("observable-bind-duplicate-properties", this);
      Pl(this);
      const l = this[Fr];
      a.forEach((d) => {
        if (l.has(d)) throw new v("observable-bind-rebind", this);
      });
      const c = /* @__PURE__ */ new Map();
      return a.forEach((d) => {
        const u = { property: d, to: [] };
        l.set(d, u), c.set(d, u);
      }), { to: M2, toMany: V2, _observable: this, _bindProperties: a, _to: [], _bindings: c };
    }
    unbind(...a) {
      if (!this[Dr]) return;
      const l = this[Fr], c = this[is];
      if (a.length) {
        if (!Th(a)) throw new v("observable-unbind-wrong-properties", this);
        a.forEach((d) => {
          const u = l.get(d);
          u && (u.to.forEach(([h, g]) => {
            const p = c.get(h), f = p[g];
            f.delete(u), f.size || delete p[g], Object.keys(p).length || (c.delete(h), this.stopListening(h, "change"));
          }), l.delete(d));
        });
      } else c.forEach((d, u) => {
        this.stopListening(u, "change");
      }), c.clear(), l.clear();
    }
    decorate(a) {
      Pl(this);
      const l = this[a];
      if (!l) throw new v("observablemixin-cannot-decorate-undefined", this, { object: this, methodName: a });
      this.on(a, (c, d) => {
        c.return = l.apply(this, d);
      }), this[a] = function(...c) {
        return this.fire(a, c);
      }, this[a][Ah] = l, this[Hn] || (this[Hn] = []), this[Hn].push(a);
    }
    stopListening(a, l, c) {
      if (!a && this[Hn]) {
        for (const d of this[Hn]) this[d] = this[d][Ah];
        delete this[Hn];
      }
      super.stopListening(a, l, c);
    }
  } : vk;
}
function Pl(o) {
  o[Dr] || (Object.defineProperty(o, Dr, { value: /* @__PURE__ */ new Map() }), Object.defineProperty(o, is, { value: /* @__PURE__ */ new Map() }), Object.defineProperty(o, Fr, { value: /* @__PURE__ */ new Map() }));
}
function M2(...o) {
  const i = function(...r) {
    if (!r.length) throw new v("observable-bind-to-parse-error", null);
    const s = { to: [] };
    let a;
    return typeof r[r.length - 1] == "function" && (s.callback = r.pop()), r.forEach((l) => {
      if (typeof l == "string") a.properties.push(l);
      else {
        if (typeof l != "object") throw new v("observable-bind-to-parse-error", null);
        a = { observable: l, properties: [] }, s.to.push(a);
      }
    }), s;
  }(...o), e = Array.from(this._bindings.keys()), t = e.length;
  if (!i.callback && i.to.length > 1) throw new v("observable-bind-to-no-callback", this);
  if (t > 1 && i.callback) throw new v("observable-bind-to-extra-callback", this);
  var n;
  i.to.forEach((r) => {
    if (r.properties.length && r.properties.length !== t) throw new v("observable-bind-to-properties-length", this);
    r.properties.length || (r.properties = this._bindProperties);
  }), this._to = i.to, i.callback && (this._bindings.get(e[0]).callback = i.callback), n = this._observable, this._to.forEach((r) => {
    const s = n[is];
    let a;
    s.get(r.observable) || n.listenTo(r.observable, "change", (l, c) => {
      a = s.get(r.observable)[c], a && a.forEach((d) => {
        Eh(n, d.property);
      });
    });
  }), function(r) {
    let s;
    r._bindings.forEach((a, l) => {
      r._to.forEach((c) => {
        s = c.properties[a.callback ? 0 : r._bindProperties.indexOf(l)], a.to.push([c.observable, s]), function(d, u, h, g) {
          const p = d[is], f = p.get(h), b = f || {};
          b[g] || (b[g] = /* @__PURE__ */ new Set()), b[g].add(u), f || p.set(h, b);
        }(r._observable, a, c.observable, s);
      });
    });
  }(this), this._bindProperties.forEach((r) => {
    Eh(this._observable, r);
  });
}
function V2(o, i, e) {
  if (this._bindings.size > 1) throw new v("observable-bind-to-many-not-one-binding", this);
  this.to(...function(t, n) {
    const r = t.map((s) => [s, n]);
    return Array.prototype.concat.apply([], r);
  }(o, i), e);
}
function Th(o) {
  return o.every((i) => typeof i == "string");
}
function Eh(o, i) {
  const e = o[Fr].get(i);
  let t;
  e.callback ? t = e.callback.apply(o, e.to.map((n) => n[0][n[1]])) : (t = e.to[0], t = t[0][t[1]]), Object.prototype.hasOwnProperty.call(o, i) ? o[i] = t : o.set(i, t);
}
["set", "bind", "unbind", "decorate", "on", "once", "off", "listenTo", "stopListening", "fire", "delegate", "stopDelegating", "_addEventListener", "_removeEventListener"].forEach((o) => {
  xe[o] = vk.prototype[o];
});
function Yc(o) {
  let i = 0;
  for (const e of o) i++;
  return i;
}
function At(o, i) {
  const e = Math.min(o.length, i.length);
  for (let t = 0; t < e; t++) if (o[t] != i[t]) return t;
  return o.length == i.length ? "same" : o.length < i.length ? "prefix" : "extension";
}
function Qt(o) {
  return !(!o || !o[Symbol.iterator]);
}
function fi(o, i, e = {}, t = []) {
  const n = e && e.xmlns, r = n ? o.createElementNS(n, i) : o.createElement(i);
  for (const s in e) r.setAttribute(s, e[s]);
  !yh(t) && Qt(t) || (t = [t]);
  for (let s of t) yh(s) && (s = o.createTextNode(s)), r.appendChild(s);
  return r;
}
class yk {
  constructor(i, e) {
    m(this, "_config");
    this._config = /* @__PURE__ */ Object.create(null), e && this.define(Sh(e)), i && this._setObjectToTarget(this._config, i);
  }
  set(i, e) {
    this._setToTarget(this._config, i, e);
  }
  define(i, e) {
    this._setToTarget(this._config, i, e, !0);
  }
  get(i) {
    return this._getFromSource(this._config, i);
  }
  *names() {
    for (const i of Object.keys(this._config)) yield i;
  }
  _setToTarget(i, e, t, n = !1) {
    if (Mi(e)) return void this._setObjectToTarget(i, e, n);
    const r = e.split(".");
    e = r.pop();
    for (const s of r) Mi(i[s]) || (i[s] = /* @__PURE__ */ Object.create(null)), i = i[s];
    if (Mi(t)) return Mi(i[e]) || (i[e] = /* @__PURE__ */ Object.create(null)), i = i[e], void this._setObjectToTarget(i, t, n);
    n && i[e] !== void 0 || (i[e] = t);
  }
  _getFromSource(i, e) {
    const t = e.split(".");
    e = t.pop();
    for (const n of t) {
      if (!Mi(i[n])) {
        i = null;
        break;
      }
      i = i[n];
    }
    return i ? Sh(i[e]) : void 0;
  }
  _setObjectToTarget(i, e, t) {
    Object.keys(e).forEach((n) => {
      this._setToTarget(i, n, e[n], t);
    });
  }
}
function Sh(o) {
  return sl(o, L2);
}
function L2(o) {
  return Mn(o) || typeof o == "function" ? o : void 0;
}
function Vn(o) {
  if (o) {
    if (o.defaultView) return o instanceof o.defaultView.Document;
    if (o.ownerDocument && o.ownerDocument.defaultView) return o instanceof o.ownerDocument.defaultView.Node;
  }
  return !1;
}
function va(o) {
  const i = Object.prototype.toString.apply(o);
  return i == "[object Window]" || i == "[object global]";
}
const xk = Nt(Ae());
function Nt(o) {
  return o ? class extends o {
    listenTo(i, e, t, n = {}) {
      if (Vn(i) || va(i) || i instanceof z.window.EventTarget) {
        const r = { capture: !!n.useCapture, passive: !!n.usePassive }, s = this._getProxyEmitter(i, r) || new O2(i, r);
        this.listenTo(s, e, t, n);
      } else super.listenTo(i, e, t, n);
    }
    stopListening(i, e, t) {
      if (Vn(i) || va(i) || i instanceof z.window.EventTarget) {
        const n = this._getAllProxyEmitters(i);
        for (const r of n) this.stopListening(r, e, t);
      } else super.stopListening(i, e, t);
    }
    _getProxyEmitter(i, e) {
      return function(t, n) {
        const r = t[Po];
        return r && r[n] ? r[n].emitter : null;
      }(this, Ck(i, e));
    }
    _getAllProxyEmitters(i) {
      return [{ capture: !1, passive: !1 }, { capture: !1, passive: !0 }, { capture: !0, passive: !1 }, { capture: !0, passive: !0 }].map((e) => this._getProxyEmitter(i, e)).filter((e) => !!e);
    }
  } : xk;
}
["_getProxyEmitter", "_getAllProxyEmitters", "on", "once", "off", "listenTo", "stopListening", "fire", "delegate", "stopDelegating", "_addEventListener", "_removeEventListener"].forEach((o) => {
  Nt[o] = xk.prototype[o];
});
class O2 extends Ae() {
  constructor(e, t) {
    super();
    m(this, "_domNode");
    m(this, "_options");
    m(this, "_domListeners");
    Gb(this, Ck(e, t)), this._domNode = e, this._options = t;
  }
  attach(e) {
    if (this._domListeners && this._domListeners[e]) return;
    const t = this._createDomListener(e);
    this._domNode.addEventListener(e, t, this._options), this._domListeners || (this._domListeners = {}), this._domListeners[e] = t;
  }
  detach(e) {
    let t;
    !this._domListeners[e] || (t = this._events[e]) && t.callbacks.length || this._domListeners[e].removeListener();
  }
  _addEventListener(e, t, n) {
    this.attach(e), Ae().prototype._addEventListener.call(this, e, t, n);
  }
  _removeEventListener(e, t) {
    Ae().prototype._removeEventListener.call(this, e, t), this.detach(e);
  }
  _createDomListener(e) {
    const t = (n) => {
      this.fire(e, n);
    };
    return t.removeListener = () => {
      this._domNode.removeEventListener(e, t, this._options), delete this._domListeners[e];
    }, t;
  }
}
function Ck(o, i) {
  let e = function(t) {
    return t["data-ck-expando"] || (t["data-ck-expando"] = Tt());
  }(o);
  for (const t of Object.keys(i).sort()) i[t] && (e += "-" + t);
  return e;
}
function Ak(o) {
  const i = [];
  let e = o;
  for (; e && e.nodeType != Node.DOCUMENT_NODE; ) i.unshift(e), e = e.parentNode;
  return i;
}
function N2(o) {
  return o instanceof HTMLTextAreaElement ? o.value : o.innerHTML;
}
function Ih(o) {
  const i = o.ownerDocument.defaultView.getComputedStyle(o);
  return { top: parseInt(i.borderTopWidth, 10), right: parseInt(i.borderRightWidth, 10), bottom: parseInt(i.borderBottomWidth, 10), left: parseInt(i.borderLeftWidth, 10) };
}
function Tk(o) {
  if (!o.target) return null;
  const i = o.target.ownerDocument, e = o.clientX, t = o.clientY;
  let n = null;
  return i.caretRangeFromPoint && i.caretRangeFromPoint(e, t) ? n = i.caretRangeFromPoint(e, t) : o.rangeParent && (n = i.createRange(), n.setStart(o.rangeParent, o.rangeOffset), n.collapse(!0)), n;
}
function Ye(o) {
  return Object.prototype.toString.call(o) == "[object Text]";
}
function al(o) {
  return Object.prototype.toString.apply(o) == "[object Range]";
}
function Ek(o) {
  return o && o.parentNode ? o.offsetParent === z.document.body ? null : o.offsetParent : null;
}
const Sk = ["top", "right", "bottom", "left", "width", "height"];
class K {
  constructor(i) {
    m(this, "top");
    m(this, "right");
    m(this, "bottom");
    m(this, "left");
    m(this, "width");
    m(this, "height");
    m(this, "_source");
    const e = al(i);
    if (Object.defineProperty(this, "_source", { value: i._source || i, writable: !0, enumerable: !1 }), Qc(i) || e) if (e) {
      const t = K.getDomRangeRects(i);
      Os(this, K.getBoundingRect(t));
    } else Os(this, i.getBoundingClientRect());
    else if (va(i)) {
      const { innerWidth: t, innerHeight: n } = i;
      Os(this, { top: 0, right: t, bottom: n, left: 0, width: t, height: n });
    } else Os(this, i);
  }
  clone() {
    return new K(this);
  }
  moveTo(i, e) {
    return this.top = e, this.right = i + this.width, this.bottom = e + this.height, this.left = i, this;
  }
  moveBy(i, e) {
    return this.top += e, this.right += i, this.left += i, this.bottom += e, this;
  }
  getIntersection(i) {
    const e = { top: Math.max(this.top, i.top), right: Math.min(this.right, i.right), bottom: Math.min(this.bottom, i.bottom), left: Math.max(this.left, i.left), width: 0, height: 0 };
    if (e.width = e.right - e.left, e.height = e.bottom - e.top, e.width < 0 || e.height < 0) return null;
    {
      const t = new K(e);
      return t._source = this._source, t;
    }
  }
  getIntersectionArea(i) {
    const e = this.getIntersection(i);
    return e ? e.getArea() : 0;
  }
  getArea() {
    return this.width * this.height;
  }
  getVisible() {
    const i = this._source;
    let e = this.clone();
    if (Ph(i)) return e;
    let t, n = i, r = i.parentNode || i.commonAncestorContainer;
    for (; r && !Ph(r); ) {
      const a = ((s = r) instanceof HTMLElement ? s.ownerDocument.defaultView.getComputedStyle(s).overflow : "visible") === "visible";
      n instanceof HTMLElement && Mh(n) === "absolute" && (t = n);
      const l = Mh(r);
      if (a || t && (l === "relative" && a || l !== "relative")) {
        n = r, r = r.parentNode;
        continue;
      }
      const c = new K(r), d = e.getIntersection(c);
      if (!d) return null;
      d.getArea() < e.getArea() && (e = d), n = r, r = r.parentNode;
    }
    var s;
    return e;
  }
  isEqual(i) {
    for (const e of Sk) if (this[e] !== i[e]) return !1;
    return !0;
  }
  contains(i) {
    const e = this.getIntersection(i);
    return !(!e || !e.isEqual(i));
  }
  toAbsoluteRect() {
    const { scrollX: i, scrollY: e } = z.window, t = this.clone().moveBy(i, e);
    if (Qc(t._source)) {
      const n = Ek(t._source);
      n && function(r, s) {
        const a = new K(s), l = Ih(s);
        let c = 0, d = 0;
        c -= a.left, d -= a.top, c += s.scrollLeft, d += s.scrollTop, c -= l.left, d -= l.top, r.moveBy(c, d);
      }(t, n);
    }
    return t;
  }
  excludeScrollbarsAndBorders() {
    const i = this._source;
    let e, t, n;
    if (va(i)) e = i.innerWidth - i.document.documentElement.clientWidth, t = i.innerHeight - i.document.documentElement.clientHeight, n = i.getComputedStyle(i.document.documentElement).direction;
    else {
      const r = Ih(i);
      e = i.offsetWidth - i.clientWidth - r.left - r.right, t = i.offsetHeight - i.clientHeight - r.top - r.bottom, n = i.ownerDocument.defaultView.getComputedStyle(i).direction, this.left += r.left, this.top += r.top, this.right -= r.right, this.bottom -= r.bottom, this.width = this.right - this.left, this.height = this.bottom - this.top;
    }
    return this.width -= e, n === "ltr" ? this.right -= e : this.left += e, this.height -= t, this.bottom -= t, this;
  }
  static getDomRangeRects(i) {
    const e = [], t = Array.from(i.getClientRects());
    if (t.length) for (const n of t) e.push(new K(n));
    else {
      let n = i.startContainer;
      Ye(n) && (n = n.parentNode);
      const r = new K(n.getBoundingClientRect());
      r.right = r.left, r.width = 0, e.push(r);
    }
    return e;
  }
  static getBoundingRect(i) {
    const e = { left: Number.POSITIVE_INFINITY, top: Number.POSITIVE_INFINITY, right: Number.NEGATIVE_INFINITY, bottom: Number.NEGATIVE_INFINITY, width: 0, height: 0 };
    let t = 0;
    for (const n of i) t++, e.left = Math.min(e.left, n.left), e.top = Math.min(e.top, n.top), e.right = Math.max(e.right, n.right), e.bottom = Math.max(e.bottom, n.bottom);
    return t == 0 ? null : (e.width = e.right - e.left, e.height = e.bottom - e.top, new K(e));
  }
}
function Os(o, i) {
  for (const e of Sk) o[e] = i[e];
}
function Ph(o) {
  return !!Qc(o) && o === o.ownerDocument.body;
}
function Qc(o) {
  return o !== null && typeof o == "object" && o.nodeType === 1 && typeof o.getBoundingClientRect == "function";
}
function Mh(o) {
  return o instanceof HTMLElement ? o.ownerDocument.defaultView.getComputedStyle(o).position : "static";
}
const Ge = class Ge {
  constructor(i, e) {
    m(this, "_element");
    m(this, "_callback");
    Ge._observerInstance || Ge._createObserver(), this._element = i, this._callback = e, Ge._addElementCallback(i, e), Ge._observerInstance.observe(i);
  }
  get element() {
    return this._element;
  }
  destroy() {
    Ge._deleteElementCallback(this._element, this._callback);
  }
  static _addElementCallback(i, e) {
    Ge._elementCallbacks || (Ge._elementCallbacks = /* @__PURE__ */ new Map());
    let t = Ge._elementCallbacks.get(i);
    t || (t = /* @__PURE__ */ new Set(), Ge._elementCallbacks.set(i, t)), t.add(e);
  }
  static _deleteElementCallback(i, e) {
    const t = Ge._getElementCallbacks(i);
    t && (t.delete(e), t.size || (Ge._elementCallbacks.delete(i), Ge._observerInstance.unobserve(i))), Ge._elementCallbacks && !Ge._elementCallbacks.size && (Ge._observerInstance = null, Ge._elementCallbacks = null);
  }
  static _getElementCallbacks(i) {
    return Ge._elementCallbacks ? Ge._elementCallbacks.get(i) : null;
  }
  static _createObserver() {
    Ge._observerInstance = new z.window.ResizeObserver((i) => {
      for (const e of i) {
        const t = Ge._getElementCallbacks(e.target);
        if (t) for (const n of t) n(e);
      }
    });
  }
};
m(Ge, "_observerInstance", null), m(Ge, "_elementCallbacks", null);
let io = Ge;
function Vh(o, i) {
  o instanceof HTMLTextAreaElement && (o.value = i), o.innerHTML = i;
}
function Nn(o) {
  return (i) => i + o;
}
function Pr(o) {
  let i = 0;
  for (; o.previousSibling; ) o = o.previousSibling, i++;
  return i;
}
function Ik(o, i, e) {
  o.insertBefore(e, o.childNodes[i] || null);
}
function jr(o) {
  return o && o.nodeType === Node.COMMENT_NODE;
}
function R2(o) {
  try {
    z.document.createAttribute(o);
  } catch {
    return !1;
  }
  return !0;
}
function an(o) {
  return !!o && (Ye(o) ? an(o.parentElement) : !!o.getClientRects && !!o.getClientRects().length);
}
function gu({ element: o, target: i, positions: e, limiter: t, fitInViewport: n, viewportOffsetConfig: r }) {
  wa(i) && (i = i()), wa(t) && (t = t());
  const s = Ek(o), a = function(h) {
    h = Object.assign({ top: 0, bottom: 0, left: 0, right: 0 }, h);
    const g = new K(z.window);
    return g.top += h.top, g.height -= h.top, g.bottom -= h.bottom, g.height -= h.bottom, g;
  }(r), l = new K(o), c = Lh(i, a);
  let d;
  if (!c || !a.getIntersection(c)) return null;
  const u = { targetRect: c, elementRect: l, positionedElementAncestor: s, viewportRect: a };
  if (t || n) {
    if (t) {
      const h = Lh(t, a);
      h && (u.limiterRect = h);
    }
    d = function(h, g) {
      const { elementRect: p } = g, f = p.getArea(), b = h.map((w) => new Oh(w, g)).filter((w) => !!w.name);
      let k = 0, _ = null;
      for (const w of b) {
        const { limiterIntersectionArea: y, viewportIntersectionArea: x } = w;
        if (y === f) return w;
        const C = x ** 2 + y ** 2;
        C > k && (k = C, _ = w);
      }
      return _;
    }(e, u);
  } else d = new Oh(e[0], u);
  return d;
}
function Lh(o, i) {
  const e = new K(o).getVisible();
  return e ? e.getIntersection(i) : null;
}
class Oh {
  constructor(i, e) {
    m(this, "name");
    m(this, "config");
    m(this, "_positioningFunctionCoordinates");
    m(this, "_options");
    m(this, "_cachedRect");
    m(this, "_cachedAbsoluteRect");
    const t = i(e.targetRect, e.elementRect, e.viewportRect, e.limiterRect);
    if (!t) return;
    const { left: n, top: r, name: s, config: a } = t;
    this.name = s, this.config = a, this._positioningFunctionCoordinates = { left: n, top: r }, this._options = e;
  }
  get left() {
    return this._absoluteRect.left;
  }
  get top() {
    return this._absoluteRect.top;
  }
  get limiterIntersectionArea() {
    const i = this._options.limiterRect;
    return i ? i.getIntersectionArea(this._rect) : 0;
  }
  get viewportIntersectionArea() {
    return this._options.viewportRect.getIntersectionArea(this._rect);
  }
  get _rect() {
    return this._cachedRect || (this._cachedRect = this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left, this._positioningFunctionCoordinates.top)), this._cachedRect;
  }
  get _absoluteRect() {
    return this._cachedAbsoluteRect || (this._cachedAbsoluteRect = this._rect.toAbsoluteRect()), this._cachedAbsoluteRect;
  }
}
function Nh(o) {
  const i = o.parentNode;
  i && i.removeChild(o);
}
function z2({ target: o, viewportOffset: i = 0, ancestorOffset: e = 0, alignToTop: t, forceScroll: n }) {
  const r = pu(o);
  let s = r, a = null;
  for (i = /* @__PURE__ */ function(l) {
    return typeof l == "number" ? { top: l, bottom: l, left: l, right: l } : l;
  }(i); s; ) {
    let l;
    l = F2(s == r ? o : a), D2({ parent: l, getRect: () => Ml(o, s), alignToTop: t, ancestorOffset: e, forceScroll: n });
    let c = Ml(o, s);
    const d = Ml(l, s);
    if (c.height > d.height) {
      const u = c.getIntersection(d);
      u && (c = u);
    }
    if (B2({ window: s, rect: c, viewportOffset: i, alignToTop: t, forceScroll: n }), s.parent != s) {
      if (a = s.frameElement, s = s.parent, !a) return;
    } else s = null;
  }
}
function B2({ window: o, rect: i, alignToTop: e, forceScroll: t, viewportOffset: n }) {
  const r = i.clone().moveBy(0, n.bottom), s = i.clone().moveBy(0, -n.top), a = new K(o).excludeScrollbarsAndBorders(), l = e && t, c = [s, r].every((p) => a.contains(p));
  let { scrollX: d, scrollY: u } = o;
  const h = d, g = u;
  l ? u -= a.top - i.top + n.top : c || (Mk(s, a) ? u -= a.top - i.top + n.top : Pk(r, a) && (u += e ? i.top - a.top - n.top : i.bottom - a.bottom + n.bottom)), c || (Vk(i, a) ? d -= a.left - i.left + n.left : Lk(i, a) && (d += i.right - a.right + n.right)), d == h && u === g || o.scrollTo(d, u);
}
function D2({ parent: o, getRect: i, alignToTop: e, forceScroll: t, ancestorOffset: n = 0, limiterElement: r }) {
  const s = pu(o), a = e && t;
  let l, c, d;
  const u = r || s.document.body;
  for (; o != u; ) c = i(), l = new K(o).excludeScrollbarsAndBorders(), d = l.contains(c), a ? o.scrollTop -= l.top - c.top + n : d || (Mk(c, l) ? o.scrollTop -= l.top - c.top + n : Pk(c, l) && (o.scrollTop += e ? c.top - l.top - n : c.bottom - l.bottom + n)), d || (Vk(c, l) ? o.scrollLeft -= l.left - c.left + n : Lk(c, l) && (o.scrollLeft += c.right - l.right + n)), o = o.parentNode;
}
function Pk(o, i) {
  return o.bottom > i.bottom;
}
function Mk(o, i) {
  return o.top < i.top;
}
function Vk(o, i) {
  return o.left < i.left;
}
function Lk(o, i) {
  return o.right > i.right;
}
function pu(o) {
  return al(o) ? o.startContainer.ownerDocument.defaultView : o.ownerDocument.defaultView;
}
function F2(o) {
  if (al(o)) {
    let i = o.commonAncestorContainer;
    return Ye(i) && (i = i.parentNode), i;
  }
  return o.parentNode;
}
function Ml(o, i) {
  const e = pu(o), t = new K(o);
  if (e === i) return t;
  {
    let n = e;
    for (; n != i; ) {
      const r = n.frameElement, s = new K(r).excludeScrollbarsAndBorders();
      t.moveBy(s.left, s.top), n = n.parent;
    }
  }
  return t;
}
const j2 = { ctrl: "⌃", cmd: "⌘", alt: "⌥", shift: "⇧" }, H2 = { ctrl: "Ctrl+", alt: "Alt+", shift: "Shift+" }, Rh = { 37: "←", 38: "↑", 39: "→", 40: "↓", 9: "⇥", 33: "Page Up", 34: "Page Down" }, ne = W2(), $2 = Object.fromEntries(Object.entries(ne).map(([o, i]) => {
  let e;
  return e = i in Rh ? Rh[i] : o.charAt(0).toUpperCase() + o.slice(1), [i, e];
}));
function no(o) {
  let i;
  if (typeof o == "string") {
    if (i = ne[o.toLowerCase()], !i) throw new v("keyboard-unknown-key", null, { key: o });
  } else i = o.keyCode + (o.altKey ? ne.alt : 0) + (o.ctrlKey ? ne.ctrl : 0) + (o.shiftKey ? ne.shift : 0) + (o.metaKey ? ne.cmd : 0);
  return i;
}
function ys(o) {
  return typeof o == "string" && (o = function(i) {
    return i.split("+").map((e) => e.trim());
  }(o)), o.map((i) => typeof i == "string" ? function(e) {
    if (e.endsWith("!")) return no(e.slice(0, -1));
    const t = no(e);
    return (q.isMac || q.isiOS) && t == ne.ctrl ? ne.cmd : t;
  }(i) : i).reduce((i, e) => e + i, 0);
}
function ya(o, i) {
  let e = ys(o);
  const t = q.isMac || q.isiOS;
  return Object.entries(t ? j2 : H2).reduce((n, [r, s]) => (e & ne[r] && (e &= ~ne[r], n += s), n), "") + (e ? $2[e] : "");
}
function U2(o) {
  return o == ne.arrowright || o == ne.arrowleft || o == ne.arrowup || o == ne.arrowdown;
}
function ll(o, i) {
  const e = i === "ltr";
  switch (o) {
    case ne.arrowleft:
      return e ? "left" : "right";
    case ne.arrowright:
      return e ? "right" : "left";
    case ne.arrowup:
      return "up";
    case ne.arrowdown:
      return "down";
  }
}
function q2(o, i) {
  const e = ll(o, i);
  return e === "down" || e === "right";
}
function W2() {
  const o = { pageup: 33, pagedown: 34, end: 35, home: 36, arrowleft: 37, arrowup: 38, arrowright: 39, arrowdown: 40, backspace: 8, delete: 46, enter: 13, space: 32, esc: 27, tab: 9, ctrl: 1114112, shift: 2228224, alt: 4456448, cmd: 8912896 };
  for (let i = 65; i <= 90; i++)
    o[String.fromCharCode(i).toLowerCase()] = i;
  for (let i = 48; i <= 57; i++) o[i - 48] = i;
  for (let i = 112; i <= 123; i++) o["f" + (i - 111)] = i;
  return Object.assign(o, { "'": 222, ",": 108, "-": 109, ".": 110, "/": 111, ";": 186, "=": 187, "[": 219, "\\": 220, "]": 221, "`": 223 }), o;
}
const G2 = ["ar", "ara", "dv", "div", "fa", "per", "fas", "he", "heb", "ku", "kur", "ug", "uig"];
function zh(o) {
  return G2.includes(o) ? "rtl" : "ltr";
}
function De(o) {
  return Array.isArray(o) ? o : [o];
}
function Z2(o, i, e = 1, t) {
  if (typeof e != "number") throw new v("translation-service-quantity-not-a-number", null, { quantity: e });
  const n = t || z.window.CKEDITOR_TRANSLATIONS, r = function(d) {
    return Object.keys(d).length;
  }(n);
  r === 1 && (o = Object.keys(n)[0]);
  const s = i.id || i.string;
  if (r === 0 || !function(d, u, h) {
    return !!h[d] && !!h[d].dictionary[u];
  }(o, s, n)) return e !== 1 ? i.plural : i.string;
  const a = n[o].dictionary, l = n[o].getPluralForm || ((d) => d === 1 ? 0 : 1), c = a[s];
  return typeof c == "string" ? c : c[Number(l(e))];
}
z.window.CKEDITOR_TRANSLATIONS || (z.window.CKEDITOR_TRANSLATIONS = {});
class K2 {
  constructor({ uiLanguage: i = "en", contentLanguage: e, translations: t } = {}) {
    m(this, "uiLanguage");
    m(this, "uiLanguageDirection");
    m(this, "contentLanguage");
    m(this, "contentLanguageDirection");
    m(this, "t");
    m(this, "translations");
    this.uiLanguage = i, this.contentLanguage = e || this.uiLanguage, this.uiLanguageDirection = zh(this.uiLanguage), this.contentLanguageDirection = zh(this.contentLanguage), this.translations = function(n) {
      return Array.isArray(n) ? n.reduce((r, s) => mu(r, s)) : n;
    }(t), this.t = (n, r) => this._t(n, r);
  }
  get language() {
    return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."), this.uiLanguage;
  }
  _t(i, e = []) {
    e = De(e), typeof i == "string" && (i = { string: i });
    const t = i.plural ? e[0] : 1;
    return function(n, r) {
      return n.replace(/%(\d+)/g, (s, a) => a < r.length ? r[a] : s);
    }(Z2(this.uiLanguage, i, t, this.translations), e);
  }
}
class rt extends Ae() {
  constructor(e = {}, t = {}) {
    super();
    m(this, "_items");
    m(this, "_itemMap");
    m(this, "_idProperty");
    m(this, "_bindToCollection");
    m(this, "_bindToExternalToInternalMap");
    m(this, "_bindToInternalToExternalMap");
    m(this, "_skippedIndexesFromExternal");
    const n = Qt(e);
    if (n || (t = e), this._items = [], this._itemMap = /* @__PURE__ */ new Map(), this._idProperty = t.idProperty || "id", this._bindToExternalToInternalMap = /* @__PURE__ */ new WeakMap(), this._bindToInternalToExternalMap = /* @__PURE__ */ new WeakMap(), this._skippedIndexesFromExternal = [], n) for (const r of e) this._items.push(r), this._itemMap.set(this._getItemIdBeforeAdding(r), r);
  }
  get length() {
    return this._items.length;
  }
  get first() {
    return this._items[0] || null;
  }
  get last() {
    return this._items[this.length - 1] || null;
  }
  add(e, t) {
    return this.addMany([e], t);
  }
  addMany(e, t) {
    if (t === void 0) t = this._items.length;
    else if (t > this._items.length || t < 0) throw new v("collection-add-item-invalid-index", this);
    let n = 0;
    for (const r of e) {
      const s = this._getItemIdBeforeAdding(r), a = t + n;
      this._items.splice(a, 0, r), this._itemMap.set(s, r), this.fire("add", r, a), n++;
    }
    return this.fire("change", { added: e, removed: [], index: t }), this;
  }
  get(e) {
    let t;
    if (typeof e == "string") t = this._itemMap.get(e);
    else {
      if (typeof e != "number") throw new v("collection-get-invalid-arg", this);
      t = this._items[e];
    }
    return t || null;
  }
  has(e) {
    if (typeof e == "string") return this._itemMap.has(e);
    {
      const t = e[this._idProperty];
      return t && this._itemMap.has(t);
    }
  }
  getIndex(e) {
    let t;
    return t = typeof e == "string" ? this._itemMap.get(e) : e, t ? this._items.indexOf(t) : -1;
  }
  remove(e) {
    const [t, n] = this._remove(e);
    return this.fire("change", { added: [], removed: [t], index: n }), t;
  }
  map(e, t) {
    return this._items.map(e, t);
  }
  forEach(e, t) {
    this._items.forEach(e, t);
  }
  find(e, t) {
    return this._items.find(e, t);
  }
  filter(e, t) {
    return this._items.filter(e, t);
  }
  clear() {
    this._bindToCollection && (this.stopListening(this._bindToCollection), this._bindToCollection = null);
    const e = Array.from(this._items);
    for (; this.length; ) this._remove(0);
    this.fire("change", { added: [], removed: e, index: 0 });
  }
  bindTo(e) {
    if (this._bindToCollection) throw new v("collection-bind-to-rebind", this);
    return this._bindToCollection = e, { as: (t) => {
      this._setUpBindToBinding((n) => new t(n));
    }, using: (t) => {
      typeof t == "function" ? this._setUpBindToBinding(t) : this._setUpBindToBinding((n) => n[t]);
    } };
  }
  _setUpBindToBinding(e) {
    const t = this._bindToCollection, n = (r, s, a) => {
      const l = t._bindToCollection == this, c = t._bindToInternalToExternalMap.get(s);
      if (l && c) this._bindToExternalToInternalMap.set(s, c), this._bindToInternalToExternalMap.set(c, s);
      else {
        const d = e(s);
        if (!d) return void this._skippedIndexesFromExternal.push(a);
        let u = a;
        for (const h of this._skippedIndexesFromExternal) a > h && u--;
        for (const h of t._skippedIndexesFromExternal) u >= h && u++;
        this._bindToExternalToInternalMap.set(s, d), this._bindToInternalToExternalMap.set(d, s), this.add(d, u);
        for (let h = 0; h < t._skippedIndexesFromExternal.length; h++) u <= t._skippedIndexesFromExternal[h] && t._skippedIndexesFromExternal[h]++;
      }
    };
    for (const r of t) n(0, r, t.getIndex(r));
    this.listenTo(t, "add", n), this.listenTo(t, "remove", (r, s, a) => {
      const l = this._bindToExternalToInternalMap.get(s);
      l && this.remove(l), this._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce((c, d) => (a < d && c.push(d - 1), a > d && c.push(d), c), []);
    });
  }
  _getItemIdBeforeAdding(e) {
    const t = this._idProperty;
    let n;
    if (t in e) {
      if (n = e[t], typeof n != "string") throw new v("collection-add-invalid-id", this);
      if (this.get(n)) throw new v("collection-add-item-already-exists", this);
    } else e[t] = n = Tt();
    return n;
  }
  _remove(e) {
    let t, n, r, s = !1;
    const a = this._idProperty;
    if (typeof e == "string" ? (n = e, r = this._itemMap.get(n), s = !r, r && (t = this._items.indexOf(r))) : typeof e == "number" ? (t = e, r = this._items[t], s = !r, r && (n = r[a])) : (r = e, n = r[a], t = this._items.indexOf(r), s = t == -1 || !this._itemMap.get(n)), s) throw new v("collection-remove-404", this);
    this._items.splice(t, 1), this._itemMap.delete(n);
    const l = this._bindToInternalToExternalMap.get(r);
    return this._bindToInternalToExternalMap.delete(r), this._bindToExternalToInternalMap.delete(l), this.fire("remove", r, t), [r, t];
  }
  [Symbol.iterator]() {
    return this._items[Symbol.iterator]();
  }
}
function Te(o) {
  const i = o.next();
  return i.done ? null : i.value;
}
class fe extends Nt(xe()) {
  constructor() {
    super();
    m(this, "_elements", /* @__PURE__ */ new Set());
    m(this, "_externalViews", /* @__PURE__ */ new Set());
    m(this, "_blurTimeout", null);
    this.set("isFocused", !1), this.set("focusedElement", null);
  }
  get elements() {
    return Array.from(this._elements.values());
  }
  get externalViews() {
    return Array.from(this._externalViews.values());
  }
  add(e) {
    if (Dh(e)) this._addElement(e);
    else if (Bh(e)) this._addView(e);
    else {
      if (!e.element) throw new v("focustracker-add-view-missing-element", { focusTracker: this, view: e });
      this._addElement(e.element);
    }
  }
  remove(e) {
    Dh(e) ? this._removeElement(e) : Bh(e) ? this._removeView(e) : this._removeElement(e.element);
  }
  _addElement(e) {
    if (this._elements.has(e)) throw new v("focustracker-add-element-already-exist", this);
    this.listenTo(e, "focus", () => {
      const t = this.externalViews.find((n) => function(r, s) {
        return Fh(r, s) ? !0 : !!s.focusTracker.externalViews.find((a) => Fh(r, a));
      }(e, n));
      t ? this._focus(t.element) : this._focus(e);
    }, { useCapture: !0 }), this.listenTo(e, "blur", () => {
      this._blur();
    }, { useCapture: !0 }), this._elements.add(e);
  }
  _removeElement(e) {
    this._elements.has(e) && (this.stopListening(e), this._elements.delete(e)), e === this.focusedElement && this._blur();
  }
  _addView(e) {
    e.element && this._addElement(e.element), this.listenTo(e.focusTracker, "change:focusedElement", () => {
      e.focusTracker.focusedElement ? e.element && this._focus(e.element) : this._blur();
    }), this._externalViews.add(e);
  }
  _removeView(e) {
    e.element && this._removeElement(e.element), this.stopListening(e.focusTracker), this._externalViews.delete(e);
  }
  destroy() {
    this.stopListening(), this._elements.clear(), this._externalViews.clear(), this.isFocused = !1, this.focusedElement = null;
  }
  _focus(e) {
    this._clearBlurTimeout(), this.focusedElement = e, this.isFocused = !0;
  }
  _blur() {
    this.elements.find((e) => e.contains(document.activeElement)) || this.externalViews.find((e) => e.focusTracker.isFocused && !e.focusTracker._blurTimeout) || (this._clearBlurTimeout(), this._blurTimeout = setTimeout(() => {
      this.focusedElement = null, this.isFocused = !1;
    }, 0));
  }
  _clearBlurTimeout() {
    clearTimeout(this._blurTimeout), this._blurTimeout = null;
  }
}
function Bh(o) {
  return "focusTracker" in o && o.focusTracker instanceof fe;
}
function Dh(o) {
  return Mn(o);
}
function Fh(o, i) {
  return !!i.element && i.element.contains(document.activeElement) && o.contains(i.element);
}
class Le {
  constructor() {
    m(this, "_listener");
    this._listener = new (Nt())();
  }
  listenTo(i) {
    this._listener.listenTo(i, "keydown", (e, t) => {
      this._listener.fire("_keydown:" + no(t), t);
    });
  }
  set(i, e, t = {}) {
    const n = ys(i), r = t.priority;
    this._listener.listenTo(this._listener, "_keydown:" + n, (s, a) => {
      t.filter && !t.filter(a) || (e(a, () => {
        a.preventDefault(), a.stopPropagation(), s.stop();
      }), s.return = !0);
    }, { priority: r });
  }
  press(i) {
    return !!this._listener.fire("_keydown:" + no(i), i);
  }
  stopListening(i) {
    this._listener.stopListening(i);
  }
  destroy() {
    this.stopListening();
  }
}
function yi(o) {
  return Qt(o) ? new Map(o) : function(i) {
    const e = /* @__PURE__ */ new Map();
    for (const t in i) e.set(t, i[t]);
    return e;
  }(o);
}
function jh(o, i, e) {
  const t = o.length, n = i.length;
  for (let r = t - 1; r >= e; r--) o[r + n] = o[r];
  for (let r = 0; r < n; r++) o[e + r] = i[r];
}
function fu(o, i) {
  let e;
  function t(...n) {
    t.cancel(), e = setTimeout(() => o(...n), i);
  }
  return t.cancel = () => {
    clearTimeout(e);
  }, t;
}
function bu(o) {
  try {
    if (!o.startsWith("ey")) return null;
    const i = atob(o.replace(/-/g, "+").replace(/_/g, "/"));
    return JSON.parse(i);
  } catch {
    return null;
  }
}
function Y2(o) {
  const i = Array.isArray(o) ? o : [o], e = function() {
    const r = [];
    for (let s = 0; s < 256; s++) {
      let a = s;
      for (let l = 0; l < 8; l++) 1 & a ? a = 3988292384 ^ a >>> 1 : a >>>= 1;
      r[s] = a;
    }
    return r;
  }();
  let t = -1;
  const n = i.map((r) => Array.isArray(r) ? r.join("") : String(r)).join("");
  for (let r = 0; r < n.length; r++)
    t = t >>> 8 ^ e[255 & (t ^ n.charCodeAt(r))];
  return t = ~t >>> 0, t.toString(16).padStart(8, "0");
}
function Q2(o) {
  return !!o && o.length == 1 && /[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(o);
}
function J2(o) {
  return !!o && o.length == 1 && /[\ud800-\udbff]/.test(o);
}
function X2(o) {
  return !!o && o.length == 1 && /[\udc00-\udfff]/.test(o);
}
function ku(o, i) {
  return J2(o.charAt(i - 1)) && X2(o.charAt(i));
}
function _u(o, i) {
  return Q2(o.charAt(i));
}
const ex = tx();
function Ok(o, i) {
  const e = String(o).matchAll(ex);
  return Array.from(e).some((t) => t.index < i && i < t.index + t[0].length);
}
function tx() {
  const o = new RegExp("\\p{Regional_Indicator}{2}", "u").source, i = "(?:" + [new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}", "u"), new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}", "u"), new RegExp("\\p{Emoji}\\u{FE0F}", "u"), new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*", "u")].map((e) => e.source).join("|") + ")";
  return new RegExp(`${o}|${i}(?:‍${i})*`, "ug");
}
class A extends xe() {
  constructor(e) {
    super();
    m(this, "editor");
    m(this, "_disableStack", /* @__PURE__ */ new Set());
    this.editor = e, this.set("isEnabled", !0);
  }
  forceDisabled(e) {
    this._disableStack.add(e), this._disableStack.size == 1 && (this.on("set:isEnabled", Hh, { priority: "highest" }), this.isEnabled = !1);
  }
  clearForceDisabled(e) {
    this._disableStack.delete(e), this._disableStack.size == 0 && (this.off("set:isEnabled", Hh), this.isEnabled = !0);
  }
  destroy() {
    this.stopListening();
  }
  static get isContextPlugin() {
    return !1;
  }
  static get isOfficialPlugin() {
    return !1;
  }
  static get isPremiumPlugin() {
    return !1;
  }
}
function Hh(o) {
  o.return = !1, o.stop();
}
class G extends xe() {
  constructor(e) {
    super();
    m(this, "editor");
    m(this, "_isEnabledBasedOnSelection");
    m(this, "_affectsData");
    m(this, "_disableStack");
    this.editor = e, this.set("value", void 0), this.set("isEnabled", !1), this._affectsData = !0, this._isEnabledBasedOnSelection = !0, this._disableStack = /* @__PURE__ */ new Set(), this.decorate("execute"), this.listenTo(this.editor.model.document, "change", () => {
      this.refresh();
    }), this.listenTo(e, "change:isReadOnly", () => {
      this.refresh();
    }), this.on("set:isEnabled", (t) => {
      if (!this.affectsData) return;
      const n = e.model.document.selection, r = n.getFirstPosition().root.rootName != "$graveyard" && e.model.canEditAt(n);
      (e.isReadOnly || this._isEnabledBasedOnSelection && !r) && (t.return = !1, t.stop());
    }, { priority: "highest" }), this.on("execute", (t) => {
      this.isEnabled || t.stop();
    }, { priority: "high" });
  }
  get affectsData() {
    return this._affectsData;
  }
  set affectsData(e) {
    this._affectsData = e;
  }
  refresh() {
    this.isEnabled = !0;
  }
  forceDisabled(e) {
    this._disableStack.add(e), this._disableStack.size == 1 && (this.on("set:isEnabled", $h, { priority: "highest" }), this.isEnabled = !1);
  }
  clearForceDisabled(e) {
    this._disableStack.delete(e), this._disableStack.size == 0 && (this.off("set:isEnabled", $h), this.refresh());
  }
  execute(...e) {
  }
  destroy() {
    this.stopListening();
  }
}
function $h(o) {
  o.return = !1, o.stop();
}
class Uh extends G {
  constructor() {
    super(...arguments);
    m(this, "_childCommandsDefinitions", []);
  }
  refresh() {
  }
  execute(...e) {
    const t = this._getFirstEnabledCommand();
    return !!t && t.execute(e);
  }
  registerChildCommand(e, t = {}) {
    Hb(this._childCommandsDefinitions, { command: e, priority: t.priority || "normal" }), e.on("change:isEnabled", () => this._checkEnabled()), this._checkEnabled();
  }
  _checkEnabled() {
    this.isEnabled = !!this._getFirstEnabledCommand();
  }
  _getFirstEnabledCommand() {
    const e = this._childCommandsDefinitions.find(({ command: t }) => t.isEnabled);
    return e && e.command;
  }
}
class Nk extends Ae() {
  constructor(e, t = [], n = []) {
    super();
    m(this, "_context");
    m(this, "_plugins", /* @__PURE__ */ new Map());
    m(this, "_availablePlugins");
    m(this, "_contextPlugins");
    this._context = e, this._availablePlugins = /* @__PURE__ */ new Map();
    for (const r of t) r.pluginName && this._availablePlugins.set(r.pluginName, r);
    this._contextPlugins = /* @__PURE__ */ new Map();
    for (const [r, s] of n) this._contextPlugins.set(r, s), this._contextPlugins.set(s, r), r.pluginName && this._availablePlugins.set(r.pluginName, r);
  }
  *[Symbol.iterator]() {
    for (const e of this._plugins) typeof e[0] == "function" && (yield e);
  }
  get(e) {
    const t = this._plugins.get(e);
    if (!t) {
      let n = e;
      throw typeof e == "function" && (n = e.pluginName || e.name), new v("plugincollection-plugin-not-loaded", this._context, { plugin: n });
    }
    return t;
  }
  has(e) {
    return this._plugins.has(e);
  }
  init(e, t = [], n = []) {
    const r = this, s = this._context;
    (function f(b, k = /* @__PURE__ */ new Set()) {
      b.forEach((_) => {
        c(_) && (k.has(_) || (k.add(_), _.pluginName && !r._availablePlugins.has(_.pluginName) && r._availablePlugins.set(_.pluginName, _), _.requires && f(_.requires, k)));
      });
    })(e), g(e);
    const a = [...function f(b, k = /* @__PURE__ */ new Set()) {
      return b.map((_) => c(_) ? _ : r._availablePlugins.get(_)).reduce((_, w) => k.has(w) ? _ : (k.add(w), w.requires && (g(w.requires, w), f(w.requires, k).forEach((y) => _.add(y))), _.add(w)), /* @__PURE__ */ new Set());
    }(e.filter((f) => !u(f, t)))];
    (function(f, b) {
      for (const k of b) {
        if (typeof k != "function") throw new v("plugincollection-replace-plugin-invalid-type", null, { pluginItem: k });
        const _ = k.pluginName;
        if (!_) throw new v("plugincollection-replace-plugin-missing-name", null, { pluginItem: k });
        if (k.requires && k.requires.length) throw new v("plugincollection-plugin-for-replacing-cannot-have-dependencies", null, { pluginName: _ });
        const w = r._availablePlugins.get(_);
        if (!w) throw new v("plugincollection-plugin-for-replacing-not-exist", null, { pluginName: _ });
        const y = f.indexOf(w);
        if (y === -1) {
          if (r._contextPlugins.has(w)) return;
          throw new v("plugincollection-plugin-for-replacing-not-loaded", null, { pluginName: _ });
        }
        if (w.requires && w.requires.length) throw new v("plugincollection-replaced-plugin-cannot-have-dependencies", null, { pluginName: _ });
        f.splice(y, 1, k), r._availablePlugins.set(_, k);
      }
    })(a, n);
    const l = function(f) {
      return f.map((b) => {
        let k = r._contextPlugins.get(b);
        return k = k || new b(s), r._add(b, k), k;
      });
    }(a);
    return p(l, "init").then(() => p(l, "afterInit")).then(() => l);
    function c(f) {
      return typeof f == "function";
    }
    function d(f) {
      return c(f) && !!f.isContextPlugin;
    }
    function u(f, b) {
      return b.some((k) => k === f || h(f) === k || h(k) === f);
    }
    function h(f) {
      return c(f) ? f.pluginName || f.name : f;
    }
    function g(f, b = null) {
      f.map((k) => c(k) ? k : r._availablePlugins.get(k) || k).forEach((k) => {
        (function(_, w) {
          if (!c(_))
            throw w ? new v("plugincollection-soft-required", s, { missingPlugin: _, requiredBy: h(w) }) : new v("plugincollection-plugin-not-found", s, { plugin: _ });
        })(k, b), function(_, w) {
          if (d(w) && !d(_))
            throw new v("plugincollection-context-required", s, { plugin: h(_), requiredBy: h(w) });
        }(k, b), function(_, w) {
          if (w && u(_, t))
            throw new v("plugincollection-required", s, { plugin: h(_), requiredBy: h(w) });
        }(k, b);
      });
    }
    function p(f, b) {
      return f.reduce((k, _) => _[b] ? r._contextPlugins.has(_) ? k : k.then(_[b].bind(_)) : k, Promise.resolve());
    }
  }
  destroy() {
    const e = [];
    for (const [, t] of this) typeof t.destroy != "function" || this._contextPlugins.has(t) || e.push(t.destroy());
    return Promise.all(e);
  }
  _add(e, t) {
    this._plugins.set(e, t);
    const n = e.pluginName;
    if (n) {
      if (this._plugins.has(n)) throw new v("plugincollection-plugin-name-conflict", null, { pluginName: n, plugin1: this._plugins.get(n).constructor, plugin2: e });
      this._plugins.set(n, t);
    }
  }
}
class xa {
  constructor(i) {
    m(this, "config");
    m(this, "plugins");
    m(this, "locale");
    m(this, "t");
    m(this, "editors");
    m(this, "_contextOwner", null);
    const { translations: e, ...t } = i || {};
    this.config = new yk(t, this.constructor.defaultConfig);
    const n = this.constructor.builtinPlugins;
    this.config.define("plugins", n), this.plugins = new Nk(this, n);
    const r = this.config.get("language") || {};
    this.locale = new K2({ uiLanguage: typeof r == "string" ? r : r.ui, contentLanguage: this.config.get("language.content"), translations: e }), this.t = this.locale.t, this.editors = new rt();
  }
  initPlugins() {
    const i = this.config.get("plugins") || [], e = this.config.get("substitutePlugins") || [];
    for (const t of i.concat(e)) {
      if (typeof t != "function") throw new v("context-initplugins-constructor-only", null, { Plugin: t });
      if (t.isContextPlugin !== !0) throw new v("context-initplugins-invalid-plugin", null, { Plugin: t });
    }
    return this.plugins.init(i, [], e);
  }
  destroy() {
    return Promise.all(Array.from(this.editors, (i) => i.destroy())).then(() => this.plugins.destroy());
  }
  _addEditor(i, e) {
    if (this._contextOwner) throw new v("context-addeditor-private-context");
    this.editors.add(i), e && (this._contextOwner = i);
  }
  _removeEditor(i) {
    return this.editors.has(i) && this.editors.remove(i), this._contextOwner === i ? this.destroy() : Promise.resolve();
  }
  _getEditorConfig() {
    const i = {};
    for (const e of this.config.names()) ["plugins", "removePlugins", "extraPlugins"].includes(e) || (i[e] = this.config.get(e));
    return i;
  }
  static create(i) {
    return new Promise((e) => {
      const t = new this(i);
      e(t.initPlugins().then(() => t));
    });
  }
}
m(xa, "defaultConfig"), m(xa, "builtinPlugins");
class Rk extends xe() {
  constructor(e) {
    super();
    m(this, "context");
    this.context = e;
  }
  destroy() {
    this.stopListening();
  }
  static get isContextPlugin() {
    return !0;
  }
  static get isOfficialPlugin() {
    return !1;
  }
  static get isPremiumPlugin() {
    return !1;
  }
}
const hr = /* @__PURE__ */ new WeakMap();
let qh = !1;
function wu({ view: o, element: i, text: e, isDirectHost: t = !0, keepOnFocus: n = !1 }) {
  const r = o.document;
  function s(a) {
    const l = { text: a, isDirectHost: t, keepOnFocus: n, hostElement: t ? i : null };
    hr.get(r).set(i, l), o.change((c) => Vl([[i, l]], c));
  }
  hr.has(r) || (hr.set(r, /* @__PURE__ */ new Map()), r.registerPostFixer((a) => Vl(hr.get(r), a)), r.on("change:isComposing", () => {
    o.change((a) => Vl(hr.get(r), a));
  }, { priority: "high" })), i.is("editableElement") && i.on("change:placeholder", (a, l, c) => s(c)), i.placeholder ? s(i.placeholder) : e && s(e), e && function() {
    qh || ce("enableplaceholder-deprecated-text-option"), qh = !0;
  }();
}
function zk(o, i) {
  return !i.hasClass("ck-placeholder") && (o.addClass("ck-placeholder", i), !0);
}
function Jc(o, i) {
  return !!i.hasClass("ck-placeholder") && (o.removeClass("ck-placeholder", i), !0);
}
function Bk(o, i) {
  if (!o.isAttached() || function(n) {
    for (const r of n.getChildren()) if (!r.is("uiElement")) return !0;
    return !1;
  }(o)) return !1;
  const e = o.document, t = e.selection.anchor;
  return (!e.isComposing || !t || t.parent !== o) && (!!i || !e.isFocused || !!t && t.parent !== o);
}
function Vl(o, i) {
  const e = [];
  let t = !1;
  for (const [n, r] of o) r.isDirectHost && (e.push(n), Wh(i, n, r) && (t = !0));
  for (const [n, r] of o) {
    if (r.isDirectHost) continue;
    const s = ix(n);
    s && (e.includes(s) || (r.hostElement = s, Wh(i, n, r) && (t = !0)));
  }
  return t;
}
function Wh(o, i, e) {
  const { text: t, isDirectHost: n, hostElement: r } = e;
  let s = !1;
  return r.getAttribute("data-placeholder") !== t && (o.setAttribute("data-placeholder", t, r), s = !0), (n || i.childCount == 1) && Bk(r, e.keepOnFocus) ? zk(o, r) && (s = !0) : Jc(o, r) && (s = !0), s;
}
function ix(o) {
  if (o.childCount) {
    const i = o.getChild(0);
    if (i.is("element") && !i.is("uiElement") && !i.is("attributeElement")) return i;
  }
  return null;
}
let lo = class {
  is() {
    throw new Error("is() method is abstract");
  }
}, co = class extends Ae(lo) {
  constructor(i) {
    super();
    m(this, "document");
    m(this, "parent");
    this.document = i, this.parent = null;
  }
  get index() {
    let i;
    if (!this.parent) return null;
    if ((i = this.parent.getChildIndex(this)) == -1) throw new v("view-node-not-found-in-parent", this);
    return i;
  }
  get nextSibling() {
    const i = this.index;
    return i !== null && this.parent.getChild(i + 1) || null;
  }
  get previousSibling() {
    const i = this.index;
    return i !== null && this.parent.getChild(i - 1) || null;
  }
  get root() {
    let i = this;
    for (; i.parent; ) i = i.parent;
    return i;
  }
  isAttached() {
    return this.root.is("rootElement");
  }
  getPath() {
    const i = [];
    let e = this;
    for (; e.parent; ) i.unshift(e.index), e = e.parent;
    return i;
  }
  getAncestors(i = {}) {
    const e = [];
    let t = i.includeSelf ? this : this.parent;
    for (; t; ) e[i.parentFirst ? "push" : "unshift"](t), t = t.parent;
    return e;
  }
  getCommonAncestor(i, e = {}) {
    const t = this.getAncestors(e), n = i.getAncestors(e);
    let r = 0;
    for (; t[r] == n[r] && t[r]; ) r++;
    return r === 0 ? null : t[r - 1];
  }
  isBefore(i) {
    if (this == i || this.root !== i.root) return !1;
    const e = this.getPath(), t = i.getPath(), n = At(e, t);
    switch (n) {
      case "prefix":
        return !0;
      case "extension":
        return !1;
      default:
        return e[n] < t[n];
    }
  }
  isAfter(i) {
    return this != i && this.root === i.root && !this.isBefore(i);
  }
  _remove() {
    this.parent._removeChildren(this.index);
  }
  _fireChange(i, e, t) {
    this.fire(`change:${i}`, e, t), this.parent && this.parent._fireChange(i, e, t);
  }
  toJSON() {
    const i = au(this);
    return delete i.parent, i;
  }
};
co.prototype.is = function(o) {
  return o === "node" || o === "view:node";
};
let _t = class Xc extends co {
  constructor(e, t) {
    super(e);
    m(this, "_textData");
    this._textData = t;
  }
  get data() {
    return this._textData;
  }
  get _data() {
    return this.data;
  }
  set _data(e) {
    this._fireChange("text", this), this._textData = e;
  }
  isSimilar(e) {
    return e instanceof Xc && (this === e || this.data === e.data);
  }
  _clone() {
    return new Xc(this.document, this.data);
  }
};
_t.prototype.is = function(o) {
  return o === "$text" || o === "view:$text" || o === "text" || o === "view:text" || o === "node" || o === "view:node";
};
let Zi = class extends lo {
  constructor(i, e, t) {
    super();
    m(this, "textNode");
    m(this, "data");
    m(this, "offsetInText");
    if (this.textNode = i, e < 0 || e > i.data.length) throw new v("view-textproxy-wrong-offsetintext", this);
    if (t < 0 || e + t > i.data.length) throw new v("view-textproxy-wrong-length", this);
    this.data = i.data.substring(e, e + t), this.offsetInText = e;
  }
  get offsetSize() {
    return this.data.length;
  }
  get isPartial() {
    return this.data.length !== this.textNode.data.length;
  }
  get parent() {
    return this.textNode.parent;
  }
  get root() {
    return this.textNode.root;
  }
  get document() {
    return this.textNode.document;
  }
  getAncestors(i = {}) {
    const e = [];
    let t = i.includeSelf ? this.textNode : this.parent;
    for (; t !== null; ) e[i.parentFirst ? "push" : "unshift"](t), t = t.parent;
    return e;
  }
};
Zi.prototype.is = function(o) {
  return o === "$textProxy" || o === "view:$textProxy" || o === "textProxy" || o === "view:textProxy";
};
class Ca {
  constructor() {
    m(this, "_consumables", /* @__PURE__ */ new Map());
  }
  add(i, e) {
    let t;
    i.is("$text") || i.is("documentFragment") ? this._consumables.set(i, !0) : (this._consumables.has(i) ? t = this._consumables.get(i) : (t = new nx(i), this._consumables.set(i, t)), t.add(e ? Mr(e) : i._getConsumables()));
  }
  test(i, e) {
    const t = this._consumables.get(i);
    return t === void 0 ? null : i.is("$text") || i.is("documentFragment") ? t : t.test(Mr(e));
  }
  consume(i, e) {
    if (i.is("$text") || i.is("documentFragment")) return !!this.test(i, e) && (this._consumables.set(i, !1), !0);
    const t = this._consumables.get(i);
    return t !== void 0 && t.consume(Mr(e));
  }
  revert(i, e) {
    const t = this._consumables.get(i);
    t !== void 0 && (i.is("$text") || i.is("documentFragment") ? this._consumables.set(i, !0) : t.revert(Mr(e)));
  }
  static createFrom(i, e) {
    if (e || (e = new Ca()), i.is("$text")) e.add(i);
    else if (i.is("element") || i.is("documentFragment")) {
      e.add(i);
      for (const t of i.getChildren()) Ca.createFrom(t, e);
    }
    return e;
  }
}
class nx {
  constructor(i) {
    m(this, "element");
    m(this, "_canConsumeName", null);
    m(this, "_attributes", /* @__PURE__ */ new Map());
    this.element = i;
  }
  add(i) {
    i.name && (this._canConsumeName = !0);
    for (const [e, t] of i.attributes) if (t) {
      let n = this._attributes.get(e);
      n && typeof n != "boolean" || (n = /* @__PURE__ */ new Map(), this._attributes.set(e, n)), n.set(t, !0);
    } else {
      if (e == "style" || e == "class") throw new v("viewconsumable-invalid-attribute", this);
      this._attributes.set(e, !0);
    }
  }
  test(i) {
    if (i.name && !this._canConsumeName) return this._canConsumeName;
    for (const [e, t] of i.attributes) {
      const n = this._attributes.get(e);
      if (n === void 0) return null;
      if (n === !1) return !1;
      if (n !== !0) {
        if (t) {
          const r = n.get(t);
          if (r === void 0) return null;
          if (!r) return !1;
        } else for (const r of n.values()) if (!r) return !1;
      }
    }
    return !0;
  }
  consume(i) {
    if (!this.test(i)) return !1;
    i.name && (this._canConsumeName = !1);
    for (const [e, t] of i.attributes) {
      const n = this._attributes.get(e);
      if (typeof n == "boolean") for (const [r] of this.element._getConsumables(e, t).attributes) this._attributes.set(r, !1);
      else if (t) for (const [, r] of this.element._getConsumables(e, t).attributes) n.set(r, !1);
      else for (const r of n.keys()) n.set(r, !1);
    }
    return !0;
  }
  revert(i) {
    i.name && (this._canConsumeName = !0);
    for (const [e, t] of i.attributes) {
      const n = this._attributes.get(e);
      if (n !== !1) {
        if (n !== void 0 && n !== !0) if (t)
          n.get(t) === !1 && n.set(t, !0);
        else for (const r of n.keys()) n.set(r, !0);
      } else this._attributes.set(e, !0);
    }
  }
}
function Mr(o) {
  const i = [];
  return "attributes" in o && o.attributes && Ll(i, o.attributes), "classes" in o && o.classes && Ll(i, o.classes, "class"), "styles" in o && o.styles && Ll(i, o.styles, "style"), { name: o.name || !1, attributes: i };
}
function Ll(o, i, e) {
  if (typeof i != "string") for (const t of i) Array.isArray(t) ? o.push(t) : o.push(e ? [e, t] : [t]);
  else o.push(e ? [e, i] : [i]);
}
class Zt {
  constructor(...i) {
    m(this, "_patterns", []);
    this.add(...i);
  }
  add(...i) {
    for (let e of i) (typeof e == "string" || e instanceof RegExp) && (e = { name: e }), this._patterns.push(e);
  }
  match(...i) {
    for (const e of i) for (const t of this._patterns) {
      const n = this._isElementMatching(e, t);
      if (n) return { element: e, pattern: t, match: n };
    }
    return null;
  }
  matchAll(...i) {
    const e = [];
    for (const t of i) for (const n of this._patterns) {
      const r = this._isElementMatching(t, n);
      r && e.push({ element: t, pattern: n, match: r });
    }
    return e.length > 0 ? e : null;
  }
  getElementName() {
    if (this._patterns.length !== 1) return null;
    const i = this._patterns[0], e = i.name;
    return typeof i == "function" || !e || e instanceof RegExp ? null : e;
  }
  _isElementMatching(i, e) {
    if (typeof e == "function") {
      const r = e(i);
      return r && typeof r == "object" ? Mr(r) : r;
    }
    const t = {};
    if (e.name && (t.name = function(r, s) {
      return r instanceof RegExp ? !!s.match(r) : r === s;
    }(e.name, i.name), !t.name)) return null;
    const n = [];
    return e.attributes && !function(r, s, a) {
      let l;
      return typeof r != "object" || r instanceof RegExp || Array.isArray(r) ? l = ["class", "style"] : (r.style !== void 0 && ce("matcher-pattern-deprecated-attributes-style-key", r), r.class !== void 0 && ce("matcher-pattern-deprecated-attributes-class-key", r)), s._collectAttributesMatch(Ol(r), a, l);
    }(e.attributes, i, n) || e.classes && !function(r, s, a) {
      return s._collectAttributesMatch(Ol(r, "class"), a);
    }(e.classes, i, n) || e.styles && !function(r, s, a) {
      return s._collectAttributesMatch(Ol(r, "style"), a);
    }(e.styles, i, n) ? null : (n.length && (t.attributes = n), t);
  }
}
function Aa(o, i) {
  return o === !0 || o === i || o instanceof RegExp && !!String(i).match(o);
}
function Ol(o, i) {
  if (Array.isArray(o)) return o.map((t) => typeof t != "object" || t instanceof RegExp ? i ? [i, t, !0] : [t, !0] : (t.key !== void 0 && t.value !== void 0 || ce("matcher-pattern-missing-key-or-value", t), i ? [i, t.key, t.value] : [t.key, t.value]));
  if (typeof o != "object" || o instanceof RegExp) return [i ? [i, o, !0] : [o, !0]];
  const e = [];
  for (const t in o) Object.prototype.hasOwnProperty.call(o, t) && e.push(i ? [i, t, o[t]] : [t, o[t]]);
  return e;
}
class Hr {
  constructor(i) {
    m(this, "_styles");
    m(this, "_cachedStyleNames", null);
    m(this, "_cachedExpandedStyleNames", null);
    m(this, "_styleProcessor");
    this._styles = {}, this._styleProcessor = i;
  }
  get isEmpty() {
    return !Object.entries(this._styles).length;
  }
  get size() {
    return this.isEmpty ? 0 : this.getStyleNames().length;
  }
  setTo(i) {
    this.clear();
    const e = function(t) {
      let n = null, r = 0, s = 0, a = null;
      const l = /* @__PURE__ */ new Map();
      if (t === "") return l;
      t.charAt(t.length - 1) != ";" && (t += ";");
      for (let c = 0; c < t.length; c++) {
        const d = t.charAt(c);
        if (n === null) switch (d) {
          case ":":
            a || (a = t.substr(r, c - r), s = c + 1);
            break;
          case '"':
          case "'":
            n = d;
            break;
          case ";": {
            const u = t.substr(s, c - s);
            a && l.set(a.trim(), u.trim()), a = null, r = c + 1;
            break;
          }
        }
        else d === n && (n = null);
      }
      return l;
    }(i);
    for (const [t, n] of e) this._styleProcessor.toNormalizedForm(t, n, this._styles);
    return this;
  }
  has(i) {
    if (this.isEmpty) return !1;
    const e = this._styleProcessor.getReducedForm(i, this._styles).find(([t]) => t === i);
    return Array.isArray(e);
  }
  set(i, e) {
    if (this._cachedStyleNames = null, this._cachedExpandedStyleNames = null, wi(i)) for (const [t, n] of Object.entries(i)) this._styleProcessor.toNormalizedForm(t, n, this._styles);
    else this._styleProcessor.toNormalizedForm(i, e, this._styles);
  }
  remove(i) {
    for (const e of De(i)) {
      this._cachedStyleNames = null, this._cachedExpandedStyleNames = null;
      const t = ed(e);
      I2(this._styles, t), delete this._styles[e], this._cleanEmptyObjectsOnPath(t);
    }
  }
  getNormalized(i) {
    return this._styleProcessor.getNormalized(i, this._styles);
  }
  toString() {
    return this.isEmpty ? "" : this.getStylesEntries().map((i) => i.join(":")).sort().join(";") + ";";
  }
  getAsString(i) {
    if (this.isEmpty) return;
    if (this._styles[i] && !wi(this._styles[i])) return this._styles[i];
    const e = this._styleProcessor.getReducedForm(i, this._styles).find(([t]) => t === i);
    return Array.isArray(e) ? e[1] : void 0;
  }
  getStyleNames(i = !1) {
    return this.isEmpty ? [] : i ? (this._cachedExpandedStyleNames || (this._cachedExpandedStyleNames = this._styleProcessor.getStyleNames(this._styles)), this._cachedExpandedStyleNames) : (this._cachedStyleNames || (this._cachedStyleNames = this.getStylesEntries().map(([e]) => e)), this._cachedStyleNames);
  }
  keys() {
    return this.getStyleNames();
  }
  clear() {
    this._styles = {}, this._cachedStyleNames = null, this._cachedExpandedStyleNames = null;
  }
  isSimilar(i) {
    if (this.size !== i.size) return !1;
    for (const e of this.getStyleNames()) if (!i.has(e) || i.getAsString(e) !== this.getAsString(e)) return !1;
    return !0;
  }
  getStylesEntries() {
    const i = [], e = Object.keys(this._styles);
    for (const t of e) i.push(...this._styleProcessor.getReducedForm(t, this._styles));
    return i;
  }
  _clone() {
    const i = new this.constructor(this._styleProcessor);
    return i.set(this.getNormalized()), i;
  }
  _getTokensMatch(i, e) {
    const t = [];
    for (const n of this.getStyleNames(!0)) if (Aa(i, n)) {
      if (e === !0) {
        t.push(n);
        continue;
      }
      Aa(e, this.getAsString(n)) && t.push(n);
    }
    return t.length ? t : void 0;
  }
  _getConsumables(i) {
    const e = [];
    if (i) {
      e.push(i);
      for (const t of this._styleProcessor.getRelatedStyles(i)) e.push(t);
    } else for (const t of this.getStyleNames()) {
      for (const n of this._styleProcessor.getRelatedStyles(t)) e.push(n);
      e.push(t);
    }
    return e;
  }
  _canMergeFrom(i) {
    for (const e of i.getStyleNames()) if (this.has(e) && this.getAsString(e) !== i.getAsString(e)) return !1;
    return !0;
  }
  _mergeFrom(i) {
    for (const e of i.getStyleNames()) this.has(e) || this.set(e, i.getAsString(e));
  }
  _isMatching(i) {
    for (const e of i.getStyleNames()) if (!this.has(e) || this.getAsString(e) !== i.getAsString(e)) return !1;
    return !0;
  }
  _cleanEmptyObjectsOnPath(i) {
    const e = i.split(".");
    if (!(e.length > 1)) return;
    const t = e.splice(0, e.length - 1).join("."), n = Pn(this._styles, t);
    n && !Object.keys(n).length && this.remove(t);
  }
}
class ox {
  constructor() {
    m(this, "_normalizers");
    m(this, "_extractors");
    m(this, "_reducers");
    m(this, "_consumables");
    this._normalizers = /* @__PURE__ */ new Map(), this._extractors = /* @__PURE__ */ new Map(), this._reducers = /* @__PURE__ */ new Map(), this._consumables = /* @__PURE__ */ new Map();
  }
  toNormalizedForm(i, e, t) {
    if (wi(e)) Nl(t, ed(i), e);
    else if (this._normalizers.has(i)) {
      const n = this._normalizers.get(i), { path: r, value: s } = n(e);
      Nl(t, r, s);
    } else Nl(t, i, e);
  }
  getNormalized(i, e) {
    if (!i) return mu({}, e);
    if (e[i] !== void 0) return e[i];
    if (this._extractors.has(i)) {
      const t = this._extractors.get(i);
      if (typeof t == "string") return Pn(e, t);
      const n = t(i, e);
      if (n) return n;
    }
    return Pn(e, ed(i));
  }
  getReducedForm(i, e) {
    const t = this.getNormalized(i, e);
    return t === void 0 ? [] : this._reducers.has(i) ? this._reducers.get(i)(t) : [[i, t]];
  }
  getStyleNames(i) {
    const e = /* @__PURE__ */ new Set();
    for (const t of this._consumables.keys()) {
      const n = this.getNormalized(t, i);
      n && (typeof n != "object" || Object.keys(n).length) && e.add(t);
    }
    for (const t of Object.keys(i)) e.add(t);
    return Array.from(e);
  }
  getRelatedStyles(i) {
    return this._consumables.get(i) || [];
  }
  setNormalizer(i, e) {
    this._normalizers.set(i, e);
  }
  setExtractor(i, e) {
    this._extractors.set(i, e);
  }
  setReducer(i, e) {
    this._reducers.set(i, e);
  }
  setStyleRelation(i, e) {
    this._mapStyleNames(i, e);
    for (const t of e) this._mapStyleNames(t, [i]);
  }
  _mapStyleNames(i, e) {
    this._consumables.has(i) || this._consumables.set(i, []), this._consumables.get(i).push(...e);
  }
}
function ed(o) {
  return o.replace("-", ".");
}
function Nl(o, i, e) {
  let t = e;
  wi(e) && (t = mu({}, Pn(o, i), e)), fk(o, i, t);
}
class Rl {
  constructor() {
    m(this, "_set", /* @__PURE__ */ new Set());
  }
  get isEmpty() {
    return this._set.size == 0;
  }
  get size() {
    return this._set.size;
  }
  has(i) {
    return this._set.has(i);
  }
  keys() {
    return Array.from(this._set.keys());
  }
  setTo(i) {
    this.clear();
    for (const e of i.split(/\s+/)) e && this._set.add(e);
    return this;
  }
  set(i) {
    for (const e of De(i)) e && this._set.add(e);
  }
  remove(i) {
    for (const e of De(i)) this._set.delete(e);
  }
  clear() {
    this._set.clear();
  }
  toString() {
    return Array.from(this._set).join(" ");
  }
  isSimilar(i) {
    if (this.size !== i.size) return !1;
    for (const e of this.keys()) if (!i.has(e)) return !1;
    return !0;
  }
  _clone() {
    const i = new this.constructor();
    return i._set = new Set(this._set), i;
  }
  _getTokensMatch(i) {
    const e = [];
    if (i === !0) {
      for (const t of this._set.keys()) e.push(t);
      return e;
    }
    if (typeof i == "string") {
      for (const t of i.split(/\s+/)) {
        if (!this._set.has(t)) return;
        e.push(t);
      }
      return e;
    }
    for (const t of this._set.keys()) t.match(i) && e.push(t);
    return e.length ? e : void 0;
  }
  _getConsumables(i) {
    return i ? [i] : this.keys();
  }
  _canMergeFrom() {
    return !0;
  }
  _mergeFrom(i) {
    for (const e of i._set.keys()) this._set.has(e) || this._set.add(e);
  }
  _isMatching(i) {
    for (const e of i._set.keys()) if (!this._set.has(e)) return !1;
    return !0;
  }
}
let ln = class Dk extends co {
  constructor(e, t, n, r) {
    super(e);
    m(this, "name");
    m(this, "_unsafeAttributesToRender", []);
    m(this, "_attrs");
    m(this, "_children");
    m(this, "_customProperties", /* @__PURE__ */ new Map());
    this.name = t, this._attrs = this._parseAttributes(n), this._children = [], r && this._insertChild(0, r);
  }
  get _classes() {
    return this._attrs.get("class");
  }
  get _styles() {
    return this._attrs.get("style");
  }
  get childCount() {
    return this._children.length;
  }
  get isEmpty() {
    return this._children.length === 0;
  }
  getChild(e) {
    return this._children[e];
  }
  getChildIndex(e) {
    return this._children.indexOf(e);
  }
  getChildren() {
    return this._children[Symbol.iterator]();
  }
  *getAttributeKeys() {
    this._classes && (yield "class"), this._styles && (yield "style");
    for (const e of this._attrs.keys()) e != "class" && e != "style" && (yield e);
  }
  *getAttributes() {
    for (const [e, t] of this._attrs.entries()) yield [e, String(t)];
  }
  getAttribute(e) {
    return this._attrs.has(e) ? String(this._attrs.get(e)) : void 0;
  }
  hasAttribute(e, t) {
    return !!this._attrs.has(e) && (t === void 0 || (wo(this.name, e) || mr(this.name, e) ? this._attrs.get(e).has(t) : this._attrs.get(e) === t));
  }
  isSimilar(e) {
    if (!(e instanceof Dk)) return !1;
    if (this === e) return !0;
    if (this.name != e.name || this._attrs.size !== e._attrs.size) return !1;
    for (const [t, n] of this._attrs) {
      const r = e._attrs.get(t);
      if (r === void 0) return !1;
      if (typeof n == "string" || typeof r == "string") {
        if (r !== n) return !1;
      } else if (!n.isSimilar(r)) return !1;
    }
    return !0;
  }
  hasClass(...e) {
    for (const t of e) if (!this._classes || !this._classes.has(t)) return !1;
    return !0;
  }
  getClassNames() {
    const e = this._classes ? this._classes.keys() : [], t = e[Symbol.iterator]();
    return Object.assign(e, { next: t.next.bind(t) });
  }
  getStyle(e) {
    return this._styles && this._styles.getAsString(e);
  }
  getNormalizedStyle(e) {
    return this._styles && this._styles.getNormalized(e);
  }
  getStyleNames(e) {
    return this._styles ? this._styles.getStyleNames(e) : [];
  }
  hasStyle(...e) {
    for (const t of e) if (!this._styles || !this._styles.has(t)) return !1;
    return !0;
  }
  findAncestor(...e) {
    const t = new Zt(...e);
    let n = this.parent;
    for (; n && !n.is("documentFragment"); ) {
      if (t.match(n)) return n;
      n = n.parent;
    }
    return null;
  }
  getCustomProperty(e) {
    return this._customProperties.get(e);
  }
  *getCustomProperties() {
    yield* this._customProperties.entries();
  }
  getIdentity() {
    const e = this._classes ? this._classes.keys().sort().join(",") : "", t = this._styles && String(this._styles), n = Array.from(this._attrs).filter(([r]) => r != "style" && r != "class").map((r) => `${r[0]}="${r[1]}"`).sort().join(" ");
    return this.name + (e == "" ? "" : ` class="${e}"`) + (t ? ` style="${t}"` : "") + (n == "" ? "" : ` ${n}`);
  }
  shouldRenderUnsafeAttribute(e) {
    return this._unsafeAttributesToRender.includes(e);
  }
  _clone(e = !1) {
    const t = [];
    if (e) for (const r of this.getChildren()) t.push(r._clone(e));
    const n = new this.constructor(this.document, this.name, this._attrs, t);
    return n._customProperties = new Map(this._customProperties), n.getFillerOffset = this.getFillerOffset, n._unsafeAttributesToRender = this._unsafeAttributesToRender, n;
  }
  _appendChild(e) {
    return this._insertChild(this.childCount, e);
  }
  _insertChild(e, t) {
    this._fireChange("children", this, { index: e });
    let n = 0;
    const r = function(s, a) {
      if (typeof a == "string") return [new _t(s, a)];
      Qt(a) || (a = [a]);
      const l = [];
      for (const c of a) typeof c == "string" ? l.push(new _t(s, c)) : c instanceof Zi ? l.push(new _t(s, c.data)) : l.push(c);
      return l;
    }(this.document, t);
    for (const s of r) s.parent !== null && s._remove(), s.parent = this, s.document = this.document, this._children.splice(e, 0, s), e++, n++;
    return n;
  }
  _removeChildren(e, t = 1) {
    this._fireChange("children", this, { index: e });
    for (let n = e; n < e + t; n++) this._children[n].parent = null;
    return this._children.splice(e, t);
  }
  _setAttribute(e, t, n = !0) {
    if (this._fireChange("attributes", this), wo(this.name, e) || mr(this.name, e)) {
      let r = this._attrs.get(e);
      r || (r = wo(this.name, e) ? new Hr(this.document.stylesProcessor) : new Rl(), this._attrs.set(e, r)), n ? r.setTo(String(t)) : wo(this.name, e) ? Array.isArray(t) ? r.set(t[0], t[1]) : r.set(t) : r.set(typeof t == "string" ? t.split(/\s+/) : t);
    } else this._attrs.set(e, String(t));
  }
  _removeAttribute(e, t) {
    if (this._fireChange("attributes", this), t !== void 0 && (wo(this.name, e) || mr(this.name, e))) {
      const n = this._attrs.get(e);
      return !!n && (mr(this.name, e) && typeof t == "string" && (t = t.split(/\s+/)), n.remove(t), !!n.isEmpty && this._attrs.delete(e));
    }
    return this._attrs.delete(e);
  }
  _addClass(e) {
    this._setAttribute("class", e, !1);
  }
  _removeClass(e) {
    this._removeAttribute("class", e);
  }
  _setStyle(e, t) {
    typeof e != "string" ? this._setAttribute("style", e, !1) : this._setAttribute("style", [e, t], !1);
  }
  _removeStyle(e) {
    this._removeAttribute("style", e);
  }
  _collectAttributesMatch(e, t, n) {
    for (const [r, s, a] of e) {
      let l = !1, c = !1;
      for (const [d, u] of this._attrs) if (!(n && n.includes(d) || !Aa(r, d))) if (l = !0, typeof u == "string") {
        if (Aa(s, u)) t.push([d]), c = !0;
        else if (!(r instanceof RegExp)) return !1;
      } else {
        const h = u._getTokensMatch(s, a || !0);
        if (h) {
          c = !0;
          for (const g of h) t.push([d, g]);
        } else if (!(r instanceof RegExp)) return !1;
      }
      if (!l || !c) return !1;
    }
    return !0;
  }
  _getConsumables(e, t) {
    const n = [];
    if (e) {
      const r = this._attrs.get(e);
      if (r !== void 0) if (typeof r == "string") n.push([e]);
      else for (const s of r._getConsumables(t)) n.push([e, s]);
    } else for (const [r, s] of this._attrs) if (typeof s == "string") n.push([r]);
    else for (const a of s._getConsumables()) n.push([r, a]);
    return { name: !e, attributes: n };
  }
  _canMergeAttributesFrom(e) {
    if (this.name != e.name) return !1;
    for (const [t, n] of e._attrs) {
      const r = this._attrs.get(t);
      if (r !== void 0) {
        if (typeof r == "string" || typeof n == "string") {
          if (r !== n) return !1;
        } else if (!r._canMergeFrom(n)) return !1;
      }
    }
    return !0;
  }
  _mergeAttributesFrom(e) {
    this._fireChange("attributes", this);
    for (const [t, n] of e._attrs) {
      const r = this._attrs.get(t);
      r === void 0 || typeof r == "string" || typeof n == "string" ? this._setAttribute(t, n) : r._mergeFrom(n);
    }
  }
  _canSubtractAttributesOf(e) {
    if (this.name != e.name) return !1;
    for (const [t, n] of e._attrs) {
      const r = this._attrs.get(t);
      if (r === void 0) return !1;
      if (typeof r == "string" || typeof n == "string") {
        if (r !== n) return !1;
      } else if (!r._isMatching(n)) return !1;
    }
    return !0;
  }
  _subtractAttributesOf(e) {
    this._fireChange("attributes", this);
    for (const [t, n] of e._attrs) {
      const r = this._attrs.get(t);
      typeof r == "string" || typeof n == "string" ? this._attrs.delete(t) : (r.remove(n.keys()), r.isEmpty && this._attrs.delete(t));
    }
  }
  _setCustomProperty(e, t) {
    this._customProperties.set(e, t);
  }
  _removeCustomProperty(e) {
    return this._customProperties.delete(e);
  }
  _parseAttributes(e) {
    const t = yi(e);
    for (const [n, r] of t) if (r === null) t.delete(n);
    else if (wo(this.name, n)) {
      const s = r instanceof Hr ? r._clone() : new Hr(this.document.stylesProcessor).setTo(String(r));
      t.set(n, s);
    } else if (mr(this.name, n)) {
      const s = r instanceof Rl ? r._clone() : new Rl().setTo(String(r));
      t.set(n, s);
    } else typeof r != "string" && t.set(n, String(r));
    return t;
  }
};
function mr(o, i) {
  return i == "class" || o == "a" && i == "rel";
}
function wo(o, i) {
  return i == "style";
}
ln.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "element" || o === "view:element") : o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
class ns extends ln {
  constructor(i, e, t, n) {
    super(i, e, t, n), this.getFillerOffset = rx;
  }
}
function rx() {
  const o = [...this.getChildren()], i = o[this.childCount - 1];
  if (i && i.is("element", "br")) return this.childCount;
  for (const e of o) if (!e.is("uiElement")) return null;
  return this.childCount;
}
ns.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element") : o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
class cl extends xe(ns) {
  constructor(i, e, t, n) {
    super(i, e, t, n), this.set("isReadOnly", !1), this.set("isFocused", !1), this.set("placeholder", void 0), this.bind("isReadOnly").to(i), this.bind("isFocused").to(i, "isFocused", (r) => r && i.selection.editableElement == this), this.listenTo(i.selection, "change", () => {
      this.isFocused = i.isFocused && i.selection.editableElement == this;
    });
  }
  destroy() {
    this.stopListening();
  }
}
cl.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "editableElement" || o === "view:editableElement" || o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element") : o === "editableElement" || o === "view:editableElement" || o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
const Gh = Symbol("rootName");
class Fk extends cl {
  constructor(i, e) {
    super(i, e), this.rootName = "main";
  }
  get rootName() {
    return this.getCustomProperty(Gh);
  }
  set rootName(i) {
    this._setCustomProperty(Gh, i);
  }
  set _name(i) {
    this.name = i;
  }
}
Fk.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "rootElement" || o === "view:rootElement" || o === "editableElement" || o === "view:editableElement" || o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element") : o === "rootElement" || o === "view:rootElement" || o === "editableElement" || o === "view:editableElement" || o === "containerElement" || o === "view:containerElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
let Qn = class {
  constructor(o = {}) {
    m(this, "direction");
    m(this, "boundaries");
    m(this, "singleCharacters");
    m(this, "shallow");
    m(this, "ignoreElementEnd");
    m(this, "_position");
    m(this, "_boundaryStartParent");
    m(this, "_boundaryEndParent");
    if (!o.boundaries && !o.startPosition) throw new v("view-tree-walker-no-start-position", null);
    if (o.direction && o.direction != "forward" && o.direction != "backward") throw new v("view-tree-walker-unknown-direction", o.startPosition, { direction: o.direction });
    this.boundaries = o.boundaries || null, o.startPosition ? this._position = R._createAt(o.startPosition) : this._position = R._createAt(o.boundaries[o.direction == "backward" ? "end" : "start"]), this.direction = o.direction || "forward", this.singleCharacters = !!o.singleCharacters, this.shallow = !!o.shallow, this.ignoreElementEnd = !!o.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;
  }
  [Symbol.iterator]() {
    return this;
  }
  get position() {
    return this._position;
  }
  skip(o) {
    let i, e;
    do
      e = this.position, i = this.next();
    while (!i.done && o(i.value));
    i.done || (this._position = e);
  }
  jumpTo(o) {
    this._boundaryStartParent && o.isBefore(this.boundaries.start) ? o = this.boundaries.start : this._boundaryEndParent && o.isAfter(this.boundaries.end) && (o = this.boundaries.end), this._position = o.clone();
  }
  next() {
    return this.direction == "forward" ? this._next() : this._previous();
  }
  _next() {
    let o = this.position.clone();
    const i = this.position, e = o.parent;
    if (e.parent === null && o.offset === e.childCount) return { done: !0, value: void 0 };
    if (e === this._boundaryEndParent && o.offset == this.boundaries.end.offset) return { done: !0, value: void 0 };
    let t;
    if (e && e.is("view:$text")) {
      if (o.isAtEnd) return this._position = R._createAfter(e), this._next();
      t = e.data[o.offset];
    } else t = e.getChild(o.offset);
    if (typeof t == "string") {
      let n;
      this.singleCharacters ? n = 1 : n = (e === this._boundaryEndParent ? this.boundaries.end.offset : e.data.length) - o.offset;
      const r = new Zi(e, o.offset, n);
      return o.offset += n, this._position = o, this._formatReturnValue("text", r, i, o, n);
    }
    if (t && t.is("view:element")) {
      if (this.shallow) {
        if (this.boundaries && this.boundaries.end.isBefore(o)) return { done: !0, value: void 0 };
        o.offset++;
      } else o = new R(t, 0);
      return this._position = o, this._formatReturnValue("elementStart", t, i, o, 1);
    }
    if (t && t.is("view:$text")) {
      if (this.singleCharacters) return o = new R(t, 0), this._position = o, this._next();
      let n, r = t.data.length;
      return t == this._boundaryEndParent ? (r = this.boundaries.end.offset, n = new Zi(t, 0, r), o = R._createAfter(n)) : (n = new Zi(t, 0, t.data.length), o.offset++), this._position = o, this._formatReturnValue("text", n, i, o, r);
    }
    return o = R._createAfter(e), this._position = o, this.ignoreElementEnd ? this._next() : this._formatReturnValue("elementEnd", e, i, o);
  }
  _previous() {
    let o = this.position.clone();
    const i = this.position, e = o.parent;
    if (e.parent === null && o.offset === 0) return { done: !0, value: void 0 };
    if (e == this._boundaryStartParent && o.offset == this.boundaries.start.offset) return { done: !0, value: void 0 };
    let t;
    if (e.is("view:$text")) {
      if (o.isAtStart) return this._position = R._createBefore(e), this._previous();
      t = e.data[o.offset - 1];
    } else t = e.getChild(o.offset - 1);
    if (typeof t == "string") {
      let n;
      if (this.singleCharacters) n = 1;
      else {
        const s = e === this._boundaryStartParent ? this.boundaries.start.offset : 0;
        n = o.offset - s;
      }
      o.offset -= n;
      const r = new Zi(e, o.offset, n);
      return this._position = o, this._formatReturnValue("text", r, i, o, n);
    }
    if (t && t.is("view:element")) return this.shallow ? (o.offset--, this._position = o, this._formatReturnValue("elementStart", t, i, o, 1)) : (o = new R(t, t.childCount), this._position = o, this.ignoreElementEnd ? this._previous() : this._formatReturnValue("elementEnd", t, i, o));
    if (t && t.is("view:$text")) {
      if (this.singleCharacters) return o = new R(t, t.data.length), this._position = o, this._previous();
      let n, r = t.data.length;
      if (t == this._boundaryStartParent) {
        const s = this.boundaries.start.offset;
        n = new Zi(t, s, t.data.length - s), r = n.data.length, o = R._createBefore(n);
      } else n = new Zi(t, 0, t.data.length), o.offset--;
      return this._position = o, this._formatReturnValue("text", n, i, o, r);
    }
    return o = R._createBefore(e), this._position = o, this._formatReturnValue("elementStart", e, i, o, 1);
  }
  _formatReturnValue(o, i, e, t, n) {
    return i.is("view:$textProxy") && (i.offsetInText + i.data.length == i.textNode.data.length && (this.direction != "forward" || this.boundaries && this.boundaries.end.isEqual(this.position) ? e = R._createAfter(i.textNode) : (t = R._createAfter(i.textNode), this._position = t)), i.offsetInText === 0 && (this.direction != "backward" || this.boundaries && this.boundaries.start.isEqual(this.position) ? e = R._createBefore(i.textNode) : (t = R._createBefore(i.textNode), this._position = t))), { done: !1, value: { type: o, item: i, previousPosition: e, nextPosition: t, length: n } };
  }
}, R = class Wi extends lo {
  constructor(e, t) {
    super();
    m(this, "parent");
    m(this, "offset");
    this.parent = e, this.offset = t;
  }
  get nodeAfter() {
    return this.parent.is("$text") ? null : this.parent.getChild(this.offset) || null;
  }
  get nodeBefore() {
    return this.parent.is("$text") ? null : this.parent.getChild(this.offset - 1) || null;
  }
  get isAtStart() {
    return this.offset === 0;
  }
  get isAtEnd() {
    const e = this.parent.is("$text") ? this.parent.data.length : this.parent.childCount;
    return this.offset === e;
  }
  get root() {
    return this.parent.root;
  }
  get editableElement() {
    let e = this.parent;
    for (; !(e instanceof cl); ) {
      if (!e.parent) return null;
      e = e.parent;
    }
    return e;
  }
  getShiftedBy(e) {
    const t = Wi._createAt(this), n = t.offset + e;
    return t.offset = n < 0 ? 0 : n, t;
  }
  getLastMatchingPosition(e, t = {}) {
    t.startPosition = this;
    const n = new Qn(t);
    return n.skip(e), n.position;
  }
  getAncestors() {
    return this.parent.is("documentFragment") ? [this.parent] : this.parent.getAncestors({ includeSelf: !0 });
  }
  getCommonAncestor(e) {
    const t = this.getAncestors(), n = e.getAncestors();
    let r = 0;
    for (; t[r] == n[r] && t[r]; ) r++;
    return r === 0 ? null : t[r - 1];
  }
  isEqual(e) {
    return this.parent == e.parent && this.offset == e.offset;
  }
  isBefore(e) {
    return this.compareWith(e) == "before";
  }
  isAfter(e) {
    return this.compareWith(e) == "after";
  }
  compareWith(e) {
    if (this.root !== e.root) return "different";
    if (this.isEqual(e)) return "same";
    const t = this.parent.is("node") ? this.parent.getPath() : [], n = e.parent.is("node") ? e.parent.getPath() : [];
    t.push(this.offset), n.push(e.offset);
    const r = At(t, n);
    switch (r) {
      case "prefix":
        return "before";
      case "extension":
        return "after";
      default:
        return t[r] < n[r] ? "before" : "after";
    }
  }
  getWalker(e = {}) {
    return e.startPosition = this, new Qn(e);
  }
  clone() {
    return new Wi(this.parent, this.offset);
  }
  static _createAt(e, t) {
    if (e instanceof Wi) return new this(e.parent, e.offset);
    {
      const n = e;
      if (t == "end") t = n.is("$text") ? n.data.length : n.childCount;
      else {
        if (t == "before") return this._createBefore(n);
        if (t == "after") return this._createAfter(n);
        if (t !== 0 && !t) throw new v("view-createpositionat-offset-required", n);
      }
      return new Wi(n, t);
    }
  }
  static _createAfter(e) {
    if (e.is("$textProxy")) return new Wi(e.textNode, e.offsetInText + e.data.length);
    if (!e.parent) throw new v("view-position-after-root", e, { root: e });
    return new Wi(e.parent, e.index + 1);
  }
  static _createBefore(e) {
    if (e.is("$textProxy")) return new Wi(e.textNode, e.offsetInText);
    if (!e.parent) throw new v("view-position-before-root", e, { root: e });
    return new Wi(e.parent, e.index);
  }
};
R.prototype.is = function(o) {
  return o === "position" || o === "view:position";
};
let se = class _n extends lo {
  constructor(e, t = null) {
    super();
    m(this, "start");
    m(this, "end");
    this.start = e.clone(), this.end = t ? t.clone() : e.clone();
  }
  *[Symbol.iterator]() {
    yield* new Qn({ boundaries: this, ignoreElementEnd: !0 });
  }
  get isCollapsed() {
    return this.start.isEqual(this.end);
  }
  get isFlat() {
    return this.start.parent === this.end.parent;
  }
  get root() {
    return this.start.root;
  }
  getEnlarged() {
    let e = this.start.getLastMatchingPosition(Ns, { direction: "backward" }), t = this.end.getLastMatchingPosition(Ns);
    return e.parent.is("$text") && e.isAtStart && (e = R._createBefore(e.parent)), t.parent.is("$text") && t.isAtEnd && (t = R._createAfter(t.parent)), new _n(e, t);
  }
  getTrimmed() {
    let e = this.start.getLastMatchingPosition(Ns);
    if (e.isAfter(this.end) || e.isEqual(this.end)) return new _n(e, e);
    let t = this.end.getLastMatchingPosition(Ns, { direction: "backward" });
    const n = e.nodeAfter, r = t.nodeBefore;
    return n && n.is("$text") && (e = new R(n, 0)), r && r.is("$text") && (t = new R(r, r.data.length)), new _n(e, t);
  }
  isEqual(e) {
    return this == e || this.start.isEqual(e.start) && this.end.isEqual(e.end);
  }
  containsPosition(e) {
    return e.isAfter(this.start) && e.isBefore(this.end);
  }
  containsRange(e, t = !1) {
    e.isCollapsed && (t = !1);
    const n = this.containsPosition(e.start) || t && this.start.isEqual(e.start), r = this.containsPosition(e.end) || t && this.end.isEqual(e.end);
    return n && r;
  }
  getDifference(e) {
    const t = [];
    return this.isIntersecting(e) ? (this.containsPosition(e.start) && t.push(new _n(this.start, e.start)), this.containsPosition(e.end) && t.push(new _n(e.end, this.end))) : t.push(this.clone()), t;
  }
  getIntersection(e) {
    if (this.isIntersecting(e)) {
      let t = this.start, n = this.end;
      return this.containsPosition(e.start) && (t = e.start), this.containsPosition(e.end) && (n = e.end), new _n(t, n);
    }
    return null;
  }
  getWalker(e = {}) {
    return e.boundaries = this, new Qn(e);
  }
  getCommonAncestor() {
    return this.start.getCommonAncestor(this.end);
  }
  getContainedElement() {
    if (this.isCollapsed) return null;
    let e = this.start.nodeAfter, t = this.end.nodeBefore;
    return this.start.parent.is("$text") && this.start.isAtEnd && this.start.parent.nextSibling && (e = this.start.parent.nextSibling), this.end.parent.is("$text") && this.end.isAtStart && this.end.parent.previousSibling && (t = this.end.parent.previousSibling), e && e.is("element") && e === t ? e : null;
  }
  clone() {
    return new _n(this.start, this.end);
  }
  *getItems(e = {}) {
    e.boundaries = this, e.ignoreElementEnd = !0;
    const t = new Qn(e);
    for (const n of t) yield n.item;
  }
  *getPositions(e = {}) {
    e.boundaries = this;
    const t = new Qn(e);
    yield t.position;
    for (const n of t) yield n.nextPosition;
  }
  isIntersecting(e) {
    return this.start.isBefore(e.end) && this.end.isAfter(e.start);
  }
  static _createFromParentsAndOffsets(e, t, n, r) {
    return new this(new R(e, t), new R(n, r));
  }
  static _createFromPositionAndShift(e, t) {
    const n = e, r = e.getShiftedBy(t);
    return t > 0 ? new this(n, r) : new this(r, n);
  }
  static _createIn(e) {
    return this._createFromParentsAndOffsets(e, 0, e, e.childCount);
  }
  static _createOn(e) {
    const t = e.is("$textProxy") ? e.offsetSize : 1;
    return this._createFromPositionAndShift(R._createBefore(e), t);
  }
};
function Ns(o) {
  return !(!o.item.is("attributeElement") && !o.item.is("uiElement"));
}
se.prototype.is = function(o) {
  return o === "range" || o === "view:range";
};
let nn = class jk extends Ae(lo) {
  constructor(...e) {
    super();
    m(this, "_ranges");
    m(this, "_lastRangeBackward");
    m(this, "_isFake");
    m(this, "_fakeSelectionLabel");
    this._ranges = [], this._lastRangeBackward = !1, this._isFake = !1, this._fakeSelectionLabel = "", e.length && this.setTo(...e);
  }
  get isFake() {
    return this._isFake;
  }
  get fakeSelectionLabel() {
    return this._fakeSelectionLabel;
  }
  get anchor() {
    if (!this._ranges.length) return null;
    const e = this._ranges[this._ranges.length - 1];
    return (this._lastRangeBackward ? e.end : e.start).clone();
  }
  get focus() {
    if (!this._ranges.length) return null;
    const e = this._ranges[this._ranges.length - 1];
    return (this._lastRangeBackward ? e.start : e.end).clone();
  }
  get isCollapsed() {
    return this.rangeCount === 1 && this._ranges[0].isCollapsed;
  }
  get rangeCount() {
    return this._ranges.length;
  }
  get isBackward() {
    return !this.isCollapsed && this._lastRangeBackward;
  }
  get editableElement() {
    return this.anchor ? this.anchor.editableElement : null;
  }
  *getRanges() {
    for (const e of this._ranges) yield e.clone();
  }
  getFirstRange() {
    let e = null;
    for (const t of this._ranges) e && !t.start.isBefore(e.start) || (e = t);
    return e ? e.clone() : null;
  }
  getLastRange() {
    let e = null;
    for (const t of this._ranges) e && !t.end.isAfter(e.end) || (e = t);
    return e ? e.clone() : null;
  }
  getFirstPosition() {
    const e = this.getFirstRange();
    return e ? e.start.clone() : null;
  }
  getLastPosition() {
    const e = this.getLastRange();
    return e ? e.end.clone() : null;
  }
  isEqual(e) {
    if (this.isFake != e.isFake || this.isFake && this.fakeSelectionLabel != e.fakeSelectionLabel || this.rangeCount != e.rangeCount) return !1;
    if (this.rangeCount === 0) return !0;
    if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) return !1;
    for (const t of this._ranges) {
      let n = !1;
      for (const r of e._ranges) if (t.isEqual(r)) {
        n = !0;
        break;
      }
      if (!n) return !1;
    }
    return !0;
  }
  isSimilar(e) {
    if (this.isBackward != e.isBackward) return !1;
    const t = Yc(this.getRanges());
    if (t != Yc(e.getRanges())) return !1;
    if (t == 0) return !0;
    for (let n of this.getRanges()) {
      n = n.getTrimmed();
      let r = !1;
      for (let s of e.getRanges()) if (s = s.getTrimmed(), n.start.isEqual(s.start) && n.end.isEqual(s.end)) {
        r = !0;
        break;
      }
      if (!r) return !1;
    }
    return !0;
  }
  getSelectedElement() {
    return this.rangeCount !== 1 ? null : this.getFirstRange().getContainedElement();
  }
  setTo(...e) {
    let [t, n, r] = e;
    if (typeof n == "object" && (r = n, n = void 0), t === null) this._setRanges([]), this._setFakeOptions(r);
    else if (t instanceof jk || t instanceof vu) this._setRanges(t.getRanges(), t.isBackward), this._setFakeOptions({ fake: t.isFake, label: t.fakeSelectionLabel });
    else if (t instanceof se) this._setRanges([t], r && r.backward), this._setFakeOptions(r);
    else if (t instanceof R) this._setRanges([new se(t)]), this._setFakeOptions(r);
    else if (t instanceof co) {
      const s = !!r && !!r.backward;
      let a;
      if (n === void 0) throw new v("view-selection-setto-required-second-parameter", this);
      a = n == "in" ? se._createIn(t) : n == "on" ? se._createOn(t) : new se(R._createAt(t, n)), this._setRanges([a], s), this._setFakeOptions(r);
    } else {
      if (!Qt(t)) throw new v("view-selection-setto-not-selectable", this);
      this._setRanges(t, r && r.backward), this._setFakeOptions(r);
    }
    this.fire("change");
  }
  setFocus(e, t) {
    if (this.anchor === null) throw new v("view-selection-setfocus-no-ranges", this);
    const n = R._createAt(e, t);
    if (n.compareWith(this.focus) == "same") return;
    const r = this.anchor;
    this._ranges.pop(), n.compareWith(r) == "before" ? this._addRange(new se(n, r), !0) : this._addRange(new se(r, n)), this.fire("change");
  }
  _setRanges(e, t = !1) {
    e = Array.from(e), this._ranges = [];
    for (const n of e) this._addRange(n);
    this._lastRangeBackward = !!t;
  }
  _setFakeOptions(e = {}) {
    this._isFake = !!e.fake, this._fakeSelectionLabel = e.fake && e.label || "";
  }
  _addRange(e, t = !1) {
    if (!(e instanceof se)) throw new v("view-selection-add-range-not-range", this);
    this._pushRange(e), this._lastRangeBackward = !!t;
  }
  _pushRange(e) {
    for (const t of this._ranges) if (e.isIntersecting(t)) throw new v("view-selection-range-intersects", this, { addedRange: e, intersectingRange: t });
    this._ranges.push(new se(e.start, e.end));
  }
};
nn.prototype.is = function(o) {
  return o === "selection" || o === "view:selection";
};
let vu = class extends Ae(lo) {
  constructor(...i) {
    super();
    m(this, "_selection");
    this._selection = new nn(), this._selection.delegate("change").to(this), i.length && this._selection.setTo(...i);
  }
  get isFake() {
    return this._selection.isFake;
  }
  get fakeSelectionLabel() {
    return this._selection.fakeSelectionLabel;
  }
  get anchor() {
    return this._selection.anchor;
  }
  get focus() {
    return this._selection.focus;
  }
  get isCollapsed() {
    return this._selection.isCollapsed;
  }
  get rangeCount() {
    return this._selection.rangeCount;
  }
  get isBackward() {
    return this._selection.isBackward;
  }
  get editableElement() {
    return this._selection.editableElement;
  }
  get _ranges() {
    return this._selection._ranges;
  }
  *getRanges() {
    yield* this._selection.getRanges();
  }
  getFirstRange() {
    return this._selection.getFirstRange();
  }
  getLastRange() {
    return this._selection.getLastRange();
  }
  getFirstPosition() {
    return this._selection.getFirstPosition();
  }
  getLastPosition() {
    return this._selection.getLastPosition();
  }
  getSelectedElement() {
    return this._selection.getSelectedElement();
  }
  isEqual(i) {
    return this._selection.isEqual(i);
  }
  isSimilar(i) {
    return this._selection.isSimilar(i);
  }
  _setTo(...i) {
    this._selection.setTo(...i);
  }
  _setFocus(i, e) {
    this._selection.setFocus(i, e);
  }
};
vu.prototype.is = function(o) {
  return o === "selection" || o == "documentSelection" || o == "view:selection" || o == "view:documentSelection";
};
class er extends sn {
  constructor(e, t, n) {
    super(e, t);
    m(this, "startRange");
    m(this, "_eventPhase");
    m(this, "_currentTarget");
    this.startRange = n, this._eventPhase = "none", this._currentTarget = null;
  }
  get eventPhase() {
    return this._eventPhase;
  }
  get currentTarget() {
    return this._currentTarget;
  }
}
const zl = Symbol("bubbling contexts");
function td(o) {
  return class extends o {
    fire(i, ...e) {
      try {
        const t = i instanceof sn ? i : new sn(this, i), n = Bl(this);
        if (!n.size) return;
        if (gr(t, "capturing", this), vo(n, "$capture", t, ...e)) return t.return;
        const r = t.startRange || this.selection.getFirstRange(), s = r ? r.getContainedElement() : null, a = !!s && !!Hk(n, s);
        let l = s || function(c) {
          if (!c) return null;
          const d = c.start.parent, u = c.end.parent, h = d.getPath(), g = u.getPath();
          return h.length > g.length ? d : u;
        }(r);
        if (gr(t, "atTarget", l), !a) {
          if (vo(n, "$text", t, ...e)) return t.return;
          gr(t, "bubbling", l);
        }
        for (; l; ) {
          if (l.is("rootElement")) {
            if (vo(n, "$root", t, ...e)) return t.return;
          } else if (l.is("element") && vo(n, l.name, t, ...e)) return t.return;
          if (vo(n, l, t, ...e)) return t.return;
          l = l.parent, gr(t, "bubbling", l);
        }
        return gr(t, "bubbling", this), vo(n, "$document", t, ...e), t.return;
      } catch (t) {
        v.rethrowUnexpectedError(t, this);
      }
    }
    _addEventListener(i, e, t) {
      const n = De(t.context || "$document"), r = Bl(this);
      for (const s of n) {
        let a = r.get(s);
        a || (a = new (Ae())(), r.set(s, a)), this.listenTo(a, i, e, t);
      }
    }
    _removeEventListener(i, e) {
      const t = Bl(this);
      for (const n of t.values()) this.stopListening(n, i, e);
    }
  };
}
{
  const o = td(Object);
  ["fire", "_addEventListener", "_removeEventListener"].forEach((i) => {
    td[i] = o.prototype[i];
  });
}
function gr(o, i, e) {
  o instanceof er && (o._eventPhase = i, o._currentTarget = e);
}
function vo(o, i, e, ...t) {
  const n = typeof i == "string" ? o.get(i) : Hk(o, i);
  return !!n && (n.fire(e, ...t), e.stop.called);
}
function Hk(o, i) {
  for (const [e, t] of o) if (typeof e == "function" && e(i)) return t;
  return null;
}
function Bl(o) {
  return o[zl] || (o[zl] = /* @__PURE__ */ new Map()), o[zl];
}
let dl = class extends td(xe()) {
  constructor(i) {
    super();
    m(this, "selection");
    m(this, "roots");
    m(this, "stylesProcessor");
    m(this, "_postFixers", /* @__PURE__ */ new Set());
    this.selection = new vu(), this.roots = new rt({ idProperty: "rootName" }), this.stylesProcessor = i, this.set("isReadOnly", !1), this.set("isFocused", !1), this.set("isSelecting", !1), this.set("isComposing", !1);
  }
  getRoot(i = "main") {
    return this.roots.get(i);
  }
  registerPostFixer(i) {
    this._postFixers.add(i);
  }
  destroy() {
    this.roots.forEach((i) => i.destroy()), this.stopListening();
  }
  _callPostFixers(i) {
    let e = !1;
    do
      for (const t of this._postFixers) if (e = t(i), e) break;
    while (e);
  }
};
class Xn extends ln {
  constructor(e, t, n, r) {
    super(e, t, n, r);
    m(this, "_priority", 10);
    m(this, "_id", null);
    m(this, "_clonesGroup", null);
    this.getFillerOffset = sx;
  }
  get priority() {
    return this._priority;
  }
  get id() {
    return this._id;
  }
  getElementsWithSameId() {
    if (this.id === null) throw new v("attribute-element-get-elements-with-same-id-no-id", this);
    return new Set(this._clonesGroup);
  }
  isSimilar(e) {
    return this.id !== null || e.id !== null ? this.id === e.id : super.isSimilar(e) && this.priority == e.priority;
  }
  _clone(e = !1) {
    const t = super._clone(e);
    return t._priority = this._priority, t._id = this._id, t;
  }
  _canMergeAttributesFrom(e) {
    return this.id === null && e.id === null && this.priority === e.priority && super._canMergeAttributesFrom(e);
  }
  _canSubtractAttributesOf(e) {
    return this.id === null && e.id === null && this.priority === e.priority && super._canSubtractAttributesOf(e);
  }
}
m(Xn, "DEFAULT_PRIORITY", 10);
function sx() {
  if (Dl(this)) return null;
  let o = this.parent;
  for (; o && o.is("attributeElement"); ) {
    if (Dl(o) > 1) return null;
    o = o.parent;
  }
  return !o || Dl(o) > 1 ? null : this.childCount;
}
function Dl(o) {
  return Array.from(o.getChildren()).filter((i) => !i.is("uiElement")).length;
}
Xn.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "attributeElement" || o === "view:attributeElement" || o === "element" || o === "view:element") : o === "attributeElement" || o === "view:attributeElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
class yu extends ln {
  constructor(i, e, t, n) {
    super(i, e, t, n), this.getFillerOffset = ax;
  }
  _insertChild(i, e) {
    if (e && (e instanceof co || Array.from(e).length > 0)) throw new v("view-emptyelement-cannot-add", [this, e]);
    return 0;
  }
}
function ax() {
  return null;
}
yu.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "emptyElement" || o === "view:emptyElement" || o === "element" || o === "view:element") : o === "emptyElement" || o === "view:emptyElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
class ul extends ln {
  constructor(i, e, t, n) {
    super(i, e, t, n), this.getFillerOffset = cx;
  }
  _insertChild(i, e) {
    if (e && (e instanceof co || Array.from(e).length > 0)) throw new v("view-uielement-cannot-add", [this, e]);
    return 0;
  }
  render(i, e) {
    return this.toDomElement(i);
  }
  toDomElement(i) {
    const e = i.createElement(this.name);
    for (const t of this.getAttributeKeys()) e.setAttribute(t, this.getAttribute(t));
    return e;
  }
}
function lx(o) {
  o.document.on("arrowKey", (i, e) => function(t, n, r) {
    if (n.keyCode == ne.arrowright) {
      const s = n.domTarget.ownerDocument.defaultView.getSelection(), a = s.rangeCount == 1 && s.getRangeAt(0).collapsed;
      if (a || n.shiftKey) {
        const l = s.focusNode, c = s.focusOffset, d = r.domPositionToView(l, c);
        if (d === null) return;
        let u = !1;
        const h = d.getLastMatchingPosition((g) => (g.item.is("uiElement") && (u = !0), !(!g.item.is("uiElement") && !g.item.is("attributeElement"))));
        if (u) {
          const g = r.viewPositionToDom(h);
          a ? s.collapse(g.parent, g.offset) : s.extend(g.parent, g.offset);
        }
      }
    }
  }(0, e, o.domConverter), { priority: "low" });
}
function cx() {
  return null;
}
ul.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "uiElement" || o === "view:uiElement" || o === "element" || o === "view:element") : o === "uiElement" || o === "view:uiElement" || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
class xu extends ln {
  constructor(i, e, t, n) {
    super(i, e, t, n), this.getFillerOffset = dx;
  }
  _insertChild(i, e) {
    if (e && (e instanceof co || Array.from(e).length > 0)) throw new v("view-rawelement-cannot-add", [this, e]);
    return 0;
  }
  render(i, e) {
  }
}
function dx() {
  return null;
}
xu.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "rawElement" || o === "view:rawElement" || o === "element" || o === "view:element") : o === "rawElement" || o === "view:rawElement" || o === this.name || o === "view:" + this.name || o === "element" || o === "view:element" || o === "node" || o === "view:node";
};
let eo = class extends Ae(lo) {
  constructor(i, e) {
    super();
    m(this, "document");
    m(this, "_children", []);
    m(this, "_customProperties", /* @__PURE__ */ new Map());
    this.document = i, e && this._insertChild(0, e);
  }
  [Symbol.iterator]() {
    return this._children[Symbol.iterator]();
  }
  get childCount() {
    return this._children.length;
  }
  get isEmpty() {
    return this.childCount === 0;
  }
  get root() {
    return this;
  }
  get parent() {
    return null;
  }
  get name() {
  }
  get getFillerOffset() {
  }
  getCustomProperty(i) {
    return this._customProperties.get(i);
  }
  *getCustomProperties() {
    yield* this._customProperties.entries();
  }
  _appendChild(i) {
    return this._insertChild(this.childCount, i);
  }
  getChild(i) {
    return this._children[i];
  }
  getChildIndex(i) {
    return this._children.indexOf(i);
  }
  getChildren() {
    return this._children[Symbol.iterator]();
  }
  _insertChild(i, e) {
    this._fireChange("children", this, { index: i });
    let t = 0;
    const n = function(r, s) {
      return typeof s == "string" ? [new _t(r, s)] : (Qt(s) || (s = [s]), Array.from(s).map((a) => typeof a == "string" ? new _t(r, a) : a instanceof Zi ? new _t(r, a.data) : a));
    }(this.document, e);
    for (const r of n) r.parent !== null && r._remove(), r.parent = this, this._children.splice(i, 0, r), i++, t++;
    return t;
  }
  _removeChildren(i, e = 1) {
    this._fireChange("children", this, { index: i });
    for (let t = i; t < i + e; t++) this._children[t].parent = null;
    return this._children.splice(i, e);
  }
  _fireChange(i, e, t) {
    this.fire(`change:${i}`, e, t);
  }
  _setCustomProperty(i, e) {
    this._customProperties.set(i, e);
  }
  _removeCustomProperty(i) {
    return this._customProperties.delete(i);
  }
};
eo.prototype.is = function(o) {
  return o === "documentFragment" || o === "view:documentFragment";
};
class Cu {
  constructor(i) {
    m(this, "document");
    m(this, "_cloneGroups", /* @__PURE__ */ new Map());
    m(this, "_slotFactory", null);
    this.document = i;
  }
  setSelection(...i) {
    this.document.selection._setTo(...i);
  }
  setSelectionFocus(i, e) {
    this.document.selection._setFocus(i, e);
  }
  createDocumentFragment(i) {
    return new eo(this.document, i);
  }
  createText(i) {
    return new _t(this.document, i);
  }
  createAttributeElement(i, e, t = {}) {
    const n = new Xn(this.document, i, e);
    return typeof t.priority == "number" && (n._priority = t.priority), t.id && (n._id = t.id), t.renderUnsafeAttributes && n._unsafeAttributesToRender.push(...t.renderUnsafeAttributes), n;
  }
  createContainerElement(i, e, t = {}, n = {}) {
    let r = null;
    Mi(t) ? n = t : r = t;
    const s = new ns(this.document, i, e, r);
    return n.renderUnsafeAttributes && s._unsafeAttributesToRender.push(...n.renderUnsafeAttributes), s;
  }
  createEditableElement(i, e, t = {}) {
    const n = new cl(this.document, i, e);
    return t.renderUnsafeAttributes && n._unsafeAttributesToRender.push(...t.renderUnsafeAttributes), n;
  }
  createEmptyElement(i, e, t = {}) {
    const n = new yu(this.document, i, e);
    return t.renderUnsafeAttributes && n._unsafeAttributesToRender.push(...t.renderUnsafeAttributes), n;
  }
  createUIElement(i, e, t) {
    const n = new ul(this.document, i, e);
    return t && (n.render = t), n;
  }
  createRawElement(i, e, t, n = {}) {
    const r = new xu(this.document, i, e);
    return t && (r.render = t), n.renderUnsafeAttributes && r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes), r;
  }
  setAttribute(i, e, t, n) {
    n !== void 0 ? n._setAttribute(i, e, t) : t._setAttribute(i, e);
  }
  removeAttribute(i, e, t) {
    t !== void 0 ? t._removeAttribute(i, e) : e._removeAttribute(i);
  }
  addClass(i, e) {
    e._addClass(i);
  }
  removeClass(i, e) {
    e._removeClass(i);
  }
  setStyle(i, e, t) {
    Mi(i) && t === void 0 ? e._setStyle(i) : t._setStyle(i, e);
  }
  removeStyle(i, e) {
    e._removeStyle(i);
  }
  setCustomProperty(i, e, t) {
    t._setCustomProperty(i, e);
  }
  removeCustomProperty(i, e) {
    return e._removeCustomProperty(i);
  }
  breakAttributes(i) {
    return i instanceof R ? this._breakAttributes(i) : this._breakAttributesRange(i);
  }
  breakContainer(i) {
    const e = i.parent;
    if (!e.is("containerElement")) throw new v("view-writer-break-non-container-element", this.document);
    if (!e.parent) throw new v("view-writer-break-root", this.document);
    if (i.isAtStart) return R._createBefore(e);
    if (!i.isAtEnd) {
      const t = e._clone(!1);
      this.insert(R._createAfter(e), t);
      const n = new se(i, R._createAt(e, "end")), r = new R(t, 0);
      this.move(n, r);
    }
    return R._createAfter(e);
  }
  mergeAttributes(i) {
    const e = i.offset, t = i.parent;
    if (t.is("$text")) return i;
    if (t.is("attributeElement") && t.childCount === 0) {
      const s = t.parent, a = t.index;
      return t._remove(), this._removeFromClonedElementsGroup(t), this.mergeAttributes(new R(s, a));
    }
    const n = t.getChild(e - 1), r = t.getChild(e);
    if (!n || !r) return i;
    if (n.is("$text") && r.is("$text")) return Kh(n, r);
    if (n.is("attributeElement") && r.is("attributeElement") && n.isSimilar(r)) {
      const s = n.childCount;
      return n._appendChild(r.getChildren()), r._remove(), this._removeFromClonedElementsGroup(r), this.mergeAttributes(new R(n, s));
    }
    return i;
  }
  mergeContainers(i) {
    const e = i.nodeBefore, t = i.nodeAfter;
    if (!(e && t && e.is("containerElement") && t.is("containerElement"))) throw new v("view-writer-merge-containers-invalid-position", this.document);
    const n = e.getChild(e.childCount - 1), r = n instanceof _t ? R._createAt(n, "end") : R._createAt(e, "end");
    return this.move(se._createIn(t), R._createAt(e, "end")), this.remove(se._createOn(t)), r;
  }
  insert(i, e) {
    $k(e = Qt(e) ? [...e] : [e], this.document);
    const t = e.reduce((s, a) => {
      const l = s[s.length - 1], c = !a.is("uiElement");
      return l && l.breakAttributes == c ? l.nodes.push(a) : s.push({ breakAttributes: c, nodes: [a] }), s;
    }, []);
    let n = null, r = i;
    for (const { nodes: s, breakAttributes: a } of t) {
      const l = this._insertNodes(r, s, a);
      n || (n = l.start), r = l.end;
    }
    return n ? new se(n, r) : new se(i);
  }
  remove(i) {
    const e = i instanceof se ? i : se._createOn(i);
    if (pr(e, this.document), e.isCollapsed) return new eo(this.document);
    const { start: t, end: n } = this._breakAttributesRange(e, !0), r = t.parent, s = n.offset - t.offset, a = r._removeChildren(t.offset, s);
    for (const c of a) this._removeFromClonedElementsGroup(c);
    const l = this.mergeAttributes(t);
    return e.start = l, e.end = l.clone(), new eo(this.document, a);
  }
  clear(i, e) {
    pr(i, this.document);
    const t = i.getWalker({ direction: "backward", ignoreElementEnd: !0 });
    for (const n of t) {
      const r = n.item;
      let s;
      if (r.is("element") && e.isSimilar(r)) s = se._createOn(r);
      else if (!n.nextPosition.isAfter(i.start) && r.is("$textProxy")) {
        const a = r.getAncestors().find((l) => l.is("element") && e.isSimilar(l));
        a && (s = se._createIn(a));
      }
      s && (s.end.isAfter(i.end) && (s.end = i.end), s.start.isBefore(i.start) && (s.start = i.start), this.remove(s));
    }
  }
  move(i, e) {
    let t;
    if (e.isAfter(i.end)) {
      const n = (e = this._breakAttributes(e, !0)).parent, r = n.childCount;
      i = this._breakAttributesRange(i, !0), t = this.remove(i), e.offset += n.childCount - r;
    } else t = this.remove(i);
    return this.insert(e, t);
  }
  wrap(i, e) {
    if (!(e instanceof Xn)) throw new v("view-writer-wrap-invalid-attribute", this.document);
    if (pr(i, this.document), i.isCollapsed) {
      let n = i.start;
      n.parent.is("element") && (t = n.parent, !Array.from(t.getChildren()).some((s) => !s.is("uiElement"))) && (n = n.getLastMatchingPosition((s) => s.item.is("uiElement"))), n = this._wrapPosition(n, e);
      const r = this.document.selection;
      return r.isCollapsed && r.getFirstPosition().isEqual(i.start) && this.setSelection(n), new se(n);
    }
    return this._wrapRange(i, e);
    var t;
  }
  unwrap(i, e) {
    if (!(e instanceof Xn)) throw new v("view-writer-unwrap-invalid-attribute", this.document);
    if (pr(i, this.document), i.isCollapsed) return i;
    const { start: t, end: n } = this._breakAttributesRange(i, !0), r = t.parent, s = this._unwrapChildren(r, t.offset, n.offset, e), a = this.mergeAttributes(s.start);
    a.isEqual(s.start) || s.end.offset--;
    const l = this.mergeAttributes(s.end);
    return new se(a, l);
  }
  rename(i, e) {
    const t = new ns(this.document, i, e.getAttributes());
    return this.insert(R._createAfter(e), t), this.move(se._createIn(e), R._createAt(t, 0)), this.remove(se._createOn(e)), t;
  }
  clearClonedElementsGroup(i) {
    this._cloneGroups.delete(i);
  }
  createPositionAt(i, e) {
    return R._createAt(i, e);
  }
  createPositionAfter(i) {
    return R._createAfter(i);
  }
  createPositionBefore(i) {
    return R._createBefore(i);
  }
  createRange(i, e) {
    return new se(i, e);
  }
  createRangeOn(i) {
    return se._createOn(i);
  }
  createRangeIn(i) {
    return se._createIn(i);
  }
  createSelection(...i) {
    return new nn(...i);
  }
  createSlot(i = "children") {
    if (!this._slotFactory) throw new v("view-writer-invalid-create-slot-context", this.document);
    return this._slotFactory(this, i);
  }
  _registerSlotFactory(i) {
    this._slotFactory = i;
  }
  _clearSlotFactory() {
    this._slotFactory = null;
  }
  _insertNodes(i, e, t) {
    let n, r;
    if (n = t ? id(i) : i.parent.is("$text") ? i.parent.parent : i.parent, !n) throw new v("view-writer-invalid-position-container", this.document);
    r = t ? this._breakAttributes(i, !0) : i.parent.is("$text") ? Fl(i) : i;
    const s = n._insertChild(r.offset, e);
    for (const d of e) this._addToClonedElementsGroup(d);
    const a = r.getShiftedBy(s), l = this.mergeAttributes(r);
    l.isEqual(r) || a.offset--;
    const c = this.mergeAttributes(a);
    return new se(l, c);
  }
  _wrapChildren(i, e, t, n) {
    let r = e;
    const s = [];
    for (; r < t; ) {
      const l = i.getChild(r), c = l.is("$text"), d = l.is("attributeElement");
      if (d && l._canMergeAttributesFrom(n)) l._mergeAttributesFrom(n), s.push(new R(i, r));
      else if (c || !d || ux(n, l)) {
        const u = n._clone();
        l._remove(), u._appendChild(l), i._insertChild(r, u), this._addToClonedElementsGroup(u), s.push(new R(i, r));
      } else this._wrapChildren(l, 0, l.childCount, n);
      r++;
    }
    let a = 0;
    for (const l of s)
      l.offset -= a, l.offset != e && (this.mergeAttributes(l).isEqual(l) || (a++, t--));
    return se._createFromParentsAndOffsets(i, e, i, t);
  }
  _unwrapChildren(i, e, t, n) {
    let r = e;
    const s = [];
    for (; r < t; ) {
      const l = i.getChild(r);
      if (l.is("attributeElement")) if (l.isSimilar(n)) {
        const c = l.getChildren(), d = l.childCount;
        l._remove(), i._insertChild(r, c), this._removeFromClonedElementsGroup(l), s.push(new R(i, r), new R(i, r + d)), r += d, t += d - 1;
      } else l._canSubtractAttributesOf(n) ? (l._subtractAttributesOf(n), s.push(new R(i, r), new R(i, r + 1)), r++) : (this._unwrapChildren(l, 0, l.childCount, n), r++);
      else r++;
    }
    let a = 0;
    for (const l of s)
      l.offset -= a, !(l.offset == e || l.offset == t) && (this.mergeAttributes(l).isEqual(l) || (a++, t--));
    return se._createFromParentsAndOffsets(i, e, i, t);
  }
  _wrapRange(i, e) {
    const { start: t, end: n } = this._breakAttributesRange(i, !0), r = t.parent, s = this._wrapChildren(r, t.offset, n.offset, e), a = this.mergeAttributes(s.start);
    a.isEqual(s.start) || s.end.offset--;
    const l = this.mergeAttributes(s.end);
    return new se(a, l);
  }
  _wrapPosition(i, e) {
    if (e.isSimilar(i.parent)) return Zh(i.clone());
    i.parent.is("$text") && (i = Fl(i));
    const t = this.createAttributeElement("_wrapPosition-fake-element");
    t._priority = Number.POSITIVE_INFINITY, t.isSimilar = () => !1, i.parent._insertChild(i.offset, t);
    const n = new se(i, i.getShiftedBy(1));
    this.wrap(n, e);
    const r = new R(t.parent, t.index);
    t._remove();
    const s = r.nodeBefore, a = r.nodeAfter;
    return s && s.is("view:$text") && a && a.is("view:$text") ? Kh(s, a) : Zh(r);
  }
  _breakAttributesRange(i, e = !1) {
    const t = i.start, n = i.end;
    if (pr(i, this.document), i.isCollapsed) {
      const l = this._breakAttributes(i.start, e);
      return new se(l, l);
    }
    const r = this._breakAttributes(n, e), s = r.parent.childCount, a = this._breakAttributes(t, e);
    return r.offset += r.parent.childCount - s, new se(a, r);
  }
  _breakAttributes(i, e = !1) {
    const t = i.offset, n = i.parent;
    if (i.parent.is("emptyElement")) throw new v("view-writer-cannot-break-empty-element", this.document);
    if (i.parent.is("uiElement")) throw new v("view-writer-cannot-break-ui-element", this.document);
    if (i.parent.is("rawElement")) throw new v("view-writer-cannot-break-raw-element", this.document);
    if (!e && n.is("$text") && nd(n.parent) || nd(n)) return i.clone();
    if (n.is("$text")) return this._breakAttributes(Fl(i), e);
    if (t == n.childCount) {
      const r = new R(n.parent, n.index + 1);
      return this._breakAttributes(r, e);
    }
    if (t === 0) {
      const r = new R(n.parent, n.index);
      return this._breakAttributes(r, e);
    }
    {
      const r = n.index + 1, s = n._clone();
      n.parent._insertChild(r, s), this._addToClonedElementsGroup(s);
      const a = n.childCount - t, l = n._removeChildren(t, a);
      s._appendChild(l);
      const c = new R(n.parent, r);
      return this._breakAttributes(c, e);
    }
  }
  _addToClonedElementsGroup(i) {
    if (!i.root.is("rootElement")) return;
    if (i.is("element")) for (const n of i.getChildren()) this._addToClonedElementsGroup(n);
    const e = i.id;
    if (!e) return;
    let t = this._cloneGroups.get(e);
    t || (t = /* @__PURE__ */ new Set(), this._cloneGroups.set(e, t)), t.add(i), i._clonesGroup = t;
  }
  _removeFromClonedElementsGroup(i) {
    if (i.is("element")) for (const n of i.getChildren()) this._removeFromClonedElementsGroup(n);
    const e = i.id;
    if (!e) return;
    const t = this._cloneGroups.get(e);
    t && t.delete(i);
  }
}
function id(o) {
  let i = o.parent;
  for (; !nd(i); ) {
    if (!i) return;
    i = i.parent;
  }
  return i;
}
function ux(o, i) {
  return o.priority < i.priority || !(o.priority > i.priority) && o.getIdentity() < i.getIdentity();
}
function Zh(o) {
  const i = o.nodeBefore;
  if (i && i.is("$text")) return new R(i, i.data.length);
  const e = o.nodeAfter;
  return e && e.is("$text") ? new R(e, 0) : o;
}
function Fl(o) {
  if (o.offset == o.parent.data.length) return new R(o.parent.parent, o.parent.index + 1);
  if (o.offset === 0) return new R(o.parent.parent, o.parent.index);
  const i = o.parent.data.slice(o.offset);
  return o.parent._data = o.parent.data.slice(0, o.offset), o.parent.parent._insertChild(o.parent.index + 1, new _t(o.root.document, i)), new R(o.parent.parent, o.parent.index + 1);
}
function Kh(o, i) {
  const e = o.data.length;
  return o._data += i.data, i._remove(), new R(o, e);
}
const hx = [_t, Xn, ns, yu, xu, ul];
function $k(o, i) {
  for (const e of o) {
    if (!hx.some((t) => e instanceof t)) throw new v("view-writer-insert-invalid-node-type", i);
    e.is("$text") || $k(e.getChildren(), i);
  }
}
function nd(o) {
  return o && (o.is("containerElement") || o.is("documentFragment"));
}
function pr(o, i) {
  const e = id(o.start), t = id(o.end);
  if (!e || !t || e !== t) throw new v("view-writer-invalid-range-container", i);
}
const Uk = (o) => o.createTextNode(" "), qk = (o) => {
  const i = o.createElement("span");
  return i.dataset.ckeFiller = "true", i.innerText = " ", i;
}, Wk = (o) => {
  const i = o.createElement("br");
  return i.dataset.ckeFiller = "true", i;
}, os = "⁠".repeat(7);
function Wt(o) {
  return typeof o == "string" ? o.substr(0, 7) === os : Ye(o) && o.data.substr(0, 7) === os;
}
function Fo(o) {
  return o.data.length == 7 && Wt(o);
}
function Yh(o) {
  const i = typeof o == "string" ? o : o.data;
  return Wt(o) ? i.slice(7) : i;
}
function mx(o, i) {
  if (i.keyCode == ne.arrowleft) {
    const e = i.domTarget.ownerDocument.defaultView.getSelection();
    if (e.rangeCount == 1 && e.getRangeAt(0).collapsed) {
      const t = e.getRangeAt(0).startContainer, n = e.getRangeAt(0).startOffset;
      Wt(t) && n <= 7 && e.collapse(t, 0);
    }
  }
}
let gx = class extends xe() {
  constructor(i, e) {
    super();
    m(this, "domDocuments", /* @__PURE__ */ new Set());
    m(this, "domConverter");
    m(this, "markedAttributes", /* @__PURE__ */ new Set());
    m(this, "markedChildren", /* @__PURE__ */ new Set());
    m(this, "markedTexts", /* @__PURE__ */ new Set());
    m(this, "selection");
    m(this, "_inlineFiller", null);
    m(this, "_fakeSelectionContainer", null);
    this.domConverter = i, this.selection = e, this.set("isFocused", !1), this.set("isSelecting", !1), this.set("isComposing", !1), q.isBlink && !q.isAndroid && this.on("change:isSelecting", () => {
      this.isSelecting || this.render();
    });
  }
  markToSync(i, e) {
    if (i === "text") this.domConverter.mapViewToDom(e.parent) && this.markedTexts.add(e);
    else {
      if (!this.domConverter.mapViewToDom(e)) return;
      if (i === "attributes") this.markedAttributes.add(e);
      else {
        if (i !== "children") throw new v("view-renderer-unknown-type", this);
        this.markedChildren.add(e);
      }
    }
  }
  render() {
    if (this.isComposing && !q.isAndroid) return;
    let i = null;
    const e = !(q.isBlink && !q.isAndroid) || !this.isSelecting;
    for (const t of this.markedChildren) this._updateChildrenMappings(t);
    e ? (this._inlineFiller && !this._isSelectionInInlineFiller() && this._removeInlineFiller(), this._inlineFiller ? i = this._getInlineFillerPosition() : this._needsInlineFillerAtSelection() && (i = this.selection.getFirstPosition(), this.markedChildren.add(i.parent))) : this._inlineFiller && this._inlineFiller.parentNode && (i = this.domConverter.domPositionToView(this._inlineFiller), i && i.parent.is("$text") && (i = R._createBefore(i.parent)));
    for (const t of this.markedAttributes) this._updateAttrs(t);
    for (const t of this.markedChildren) this._updateChildren(t, { inlineFillerPosition: i });
    for (const t of this.markedTexts) !this.markedChildren.has(t.parent) && this.domConverter.mapViewToDom(t.parent) && this._updateText(t, { inlineFillerPosition: i });
    if (e) if (i) {
      const t = this.domConverter.viewPositionToDom(i), n = t.parent.ownerDocument;
      Wt(t.parent) ? this._inlineFiller = t.parent : this._inlineFiller = Qh(n, t.parent, t.offset);
    } else this._inlineFiller = null;
    this._updateFocus(), this._updateSelection(), this.domConverter._clearTemporaryCustomProperties(), this.markedTexts.clear(), this.markedAttributes.clear(), this.markedChildren.clear();
  }
  _updateChildrenMappings(i) {
    const e = this.domConverter.mapViewToDom(i);
    if (!e) return;
    const t = Array.from(e.childNodes), n = Array.from(this.domConverter.viewChildrenToDom(i, { withChildren: !1 })), r = this._diffNodeLists(t, n), s = this._findUpdateActions(r, t, n, px);
    if (s.indexOf("update") !== -1) {
      const a = { equal: 0, insert: 0, delete: 0 };
      for (const l of s) if (l === "update") {
        const c = a.equal + a.insert, d = a.equal + a.delete, u = i.getChild(c);
        !u || u.is("uiElement") || u.is("rawElement") || this._updateElementMappings(u, t[d]), Nh(n[c]), a.equal++;
      } else a[l]++;
    }
  }
  _updateElementMappings(i, e) {
    this.domConverter.unbindDomElement(e), this.domConverter.bindElements(e, i), this.markedChildren.add(i), this.markedAttributes.add(i);
  }
  _getInlineFillerPosition() {
    const i = this.selection.getFirstPosition();
    return i.parent.is("$text") ? R._createBefore(i.parent) : i;
  }
  _isSelectionInInlineFiller() {
    if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) return !1;
    const i = this.selection.getFirstPosition(), e = this.domConverter.viewPositionToDom(i);
    return !!(e && Ye(e.parent) && Wt(e.parent));
  }
  _removeInlineFiller() {
    const i = this._inlineFiller;
    if (!Wt(i)) throw new v("view-renderer-filler-was-lost", this);
    Fo(i) ? i.remove() : i.data = i.data.substr(7), this._inlineFiller = null;
  }
  _needsInlineFillerAtSelection() {
    if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) return !1;
    const i = this.selection.getFirstPosition(), e = i.parent, t = i.offset;
    if (!this.domConverter.mapViewToDom(e.root) || !e.is("element") || !function(s) {
      if (s.getAttribute("contenteditable") == "false") return !1;
      const a = s.findAncestor((l) => l.hasAttribute("contenteditable"));
      return !a || a.getAttribute("contenteditable") == "true";
    }(e)) return !1;
    const n = i.nodeBefore, r = i.nodeAfter;
    return !(n instanceof _t || r instanceof _t) && !!(t !== e.getFillerOffset() || n && n.is("element", "br")) && (!q.isAndroid || !n && !r);
  }
  _updateText(i, e) {
    const t = this.domConverter.findCorrespondingDomText(i);
    let n = this.domConverter.viewToDom(i).data;
    const r = e.inlineFillerPosition;
    r && r.parent == i.parent && r.offset == i.index && (n = os + n), this._updateTextNode(t, n);
  }
  _updateAttrs(i) {
    const e = this.domConverter.mapViewToDom(i);
    if (e) {
      for (const t of Array.from(e.attributes)) {
        const n = t.name;
        i.hasAttribute(n) || this.domConverter.removeDomElementAttribute(e, n);
      }
      for (const t of i.getAttributeKeys()) this.domConverter.setDomElementAttribute(e, t, i.getAttribute(t), i);
    }
  }
  _updateChildren(i, e) {
    const t = this.domConverter.mapViewToDom(i);
    if (!t) return;
    if (q.isAndroid) {
      let u = null;
      for (const h of Array.from(t.childNodes)) {
        if (u && Ye(u) && Ye(h)) {
          t.normalize();
          break;
        }
        u = h;
      }
    }
    const n = e.inlineFillerPosition, r = t.childNodes, s = Array.from(this.domConverter.viewChildrenToDom(i, { bind: !0 }));
    n && n.parent === i && Qh(t.ownerDocument, s, n.offset);
    const a = this._diffNodeLists(r, s), l = this._findUpdateActions(a, r, s, fx);
    let c = 0;
    const d = /* @__PURE__ */ new Set();
    for (const u of l) u === "delete" ? (d.add(r[c]), Nh(r[c])) : u !== "equal" && u !== "update" || c++;
    c = 0;
    for (const u of l) u === "insert" ? (Ik(t, c, s[c]), c++) : u === "update" ? (this._updateTextNode(r[c], s[c].data), c++) : u === "equal" && (this._markDescendantTextToSync(this.domConverter.domToView(s[c])), c++);
    for (const u of d) u.parentNode || this.domConverter.unbindDomElement(u);
  }
  _diffNodeLists(i, e) {
    return Ko(i = function(t, n) {
      const r = Array.from(t);
      return r.length == 0 || !n || r[r.length - 1] == n && r.pop(), r;
    }(i, this._fakeSelectionContainer), e, bx.bind(null, this.domConverter));
  }
  _findUpdateActions(i, e, t, n) {
    if (i.indexOf("insert") === -1 || i.indexOf("delete") === -1) return i;
    let r = [], s = [], a = [];
    const l = { equal: 0, insert: 0, delete: 0 };
    for (const c of i) c === "insert" ? a.push(t[l.equal + l.insert]) : c === "delete" ? s.push(e[l.equal + l.delete]) : (r = r.concat(Ko(s, a, n).map((d) => d === "equal" ? "update" : d)), r.push("equal"), s = [], a = []), l[c]++;
    return r.concat(Ko(s, a, n).map((c) => c === "equal" ? "update" : c));
  }
  _updateTextNode(i, e) {
    const t = i.data;
    t != e && (q.isAndroid && this.isComposing && t.replace(/\u00A0/g, " ") == e.replace(/\u00A0/g, " ") || this._updateTextNodeInternal(i, e));
  }
  _updateTextNodeInternal(i, e) {
    const t = jb(i.data, e);
    for (const n of t) n.type === "insert" ? i.insertData(n.index, n.values.join("")) : i.deleteData(n.index, n.howMany);
  }
  _markDescendantTextToSync(i) {
    if (i) {
      if (i.is("$text")) this.markedTexts.add(i);
      else if (i.is("element")) for (const e of i.getChildren()) this._markDescendantTextToSync(e);
    }
  }
  _updateSelection() {
    if (q.isBlink && !q.isAndroid && this.isSelecting && !this.markedChildren.size) return;
    if (this.selection.rangeCount === 0) return this._removeDomSelection(), void this._removeFakeSelection();
    const i = this.domConverter.mapViewToDom(this.selection.editableElement);
    this.isFocused && i && (this.selection.isFake ? this._updateFakeSelection(i) : this._fakeSelectionContainer && this._fakeSelectionContainer.isConnected ? (this._removeFakeSelection(), this._updateDomSelection(i)) : this.isComposing && q.isAndroid || this._updateDomSelection(i));
  }
  _updateFakeSelection(i) {
    const e = i.ownerDocument;
    this._fakeSelectionContainer || (this._fakeSelectionContainer = function(s) {
      const a = s.createElement("div");
      return a.className = "ck-fake-selection-container", Object.assign(a.style, { position: "fixed", top: 0, left: "-9999px", width: "42px" }), a.textContent = " ", a;
    }(e));
    const t = this._fakeSelectionContainer;
    if (this.domConverter.bindFakeSelection(t, this.selection), !this._fakeSelectionNeedsUpdate(i)) return;
    t.parentElement && t.parentElement == i || i.appendChild(t), t.textContent = this.selection.fakeSelectionLabel || " ";
    const n = e.getSelection(), r = e.createRange();
    n.removeAllRanges(), r.selectNodeContents(t), n.addRange(r);
  }
  _updateDomSelection(i) {
    const e = i.ownerDocument.defaultView.getSelection();
    if (!this._domSelectionNeedsUpdate(e)) return;
    const t = this.domConverter.viewPositionToDom(this.selection.anchor), n = this.domConverter.viewPositionToDom(this.selection.focus);
    e.setBaseAndExtent(t.parent, t.offset, n.parent, n.offset), q.isGecko && function(r, s) {
      let a = r.parent, l = r.offset;
      if (Ye(a) && Fo(a) && (l = Pr(a) + 1, a = a.parentNode), a.nodeType != Node.ELEMENT_NODE || l != a.childNodes.length - 1) return;
      const c = a.childNodes[l];
      c && c.tagName == "BR" && s.addRange(s.getRangeAt(0));
    }(n, e);
  }
  _domSelectionNeedsUpdate(i) {
    if (!this.domConverter.isDomSelectionCorrect(i)) return !0;
    const e = i && this.domConverter.domSelectionToView(i);
    return (!e || !this.selection.isEqual(e)) && !(!this.selection.isCollapsed && this.selection.isSimilar(e));
  }
  _fakeSelectionNeedsUpdate(i) {
    const e = this._fakeSelectionContainer, t = i.ownerDocument.getSelection();
    return !e || e.parentElement !== i || t.anchorNode !== e && !e.contains(t.anchorNode) || e.textContent !== this.selection.fakeSelectionLabel;
  }
  _removeDomSelection() {
    for (const i of this.domDocuments) {
      const e = i.getSelection();
      if (e.rangeCount) {
        const t = i.activeElement, n = this.domConverter.mapDomToView(t);
        t && n && e.removeAllRanges();
      }
    }
  }
  _removeFakeSelection() {
    const i = this._fakeSelectionContainer;
    i && i.remove();
  }
  _updateFocus() {
    if (this.isFocused) {
      const i = this.selection.editableElement;
      i && this.domConverter.focus(i);
    }
  }
};
function Qh(o, i, e) {
  const t = i instanceof Array ? i : i.childNodes, n = t[e];
  if (Ye(n)) return n.data = os + n.data, n;
  {
    const r = o.createTextNode(os);
    return Array.isArray(i) ? t.splice(e, 0, r) : Ik(i, e, r), r;
  }
}
function px(o, i) {
  return Vn(o) && Vn(i) && !Ye(o) && !Ye(i) && !jr(o) && !jr(i) && o.tagName.toLowerCase() === i.tagName.toLowerCase();
}
function fx(o, i) {
  return Vn(o) && Vn(i) && Ye(o) && Ye(i);
}
function bx(o, i, e) {
  return i === e || (Ye(i) && Ye(e) ? i.data === e.data : !(!o.isBlockFiller(i) || !o.isBlockFiller(e)));
}
const kx = Wk(z.document), _x = Uk(z.document), wx = qk(z.document), Rs = "data-ck-unsafe-attribute-", Jh = "data-ck-unsafe-element";
class hl {
  constructor(i, { blockFillerMode: e, renderingMode: t = "editing" } = {}) {
    m(this, "document");
    m(this, "renderingMode");
    m(this, "blockFillerMode");
    m(this, "preElements");
    m(this, "blockElements");
    m(this, "inlineObjectElements");
    m(this, "unsafeElements");
    m(this, "_domDocument");
    m(this, "_domToViewMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_viewToDomMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_fakeSelectionMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_rawContentElementMatcher", new Zt());
    m(this, "_inlineObjectElementMatcher", new Zt());
    m(this, "_elementsWithTemporaryCustomProperties", /* @__PURE__ */ new Set());
    this.document = i, this.renderingMode = t, this.blockFillerMode = e || (t === "editing" ? "br" : "nbsp"), this.preElements = ["pre", "textarea"], this.blockElements = ["address", "article", "aside", "blockquote", "caption", "center", "dd", "details", "dir", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "legend", "li", "main", "menu", "nav", "ol", "p", "pre", "section", "summary", "table", "tbody", "td", "tfoot", "th", "thead", "tr", "ul"], this.inlineObjectElements = ["object", "iframe", "input", "button", "textarea", "select", "option", "video", "embed", "audio", "img", "canvas"], this.unsafeElements = ["script", "style"], this._domDocument = this.renderingMode === "editing" ? z.document : z.document.implementation.createHTMLDocument("");
  }
  get domDocument() {
    return this._domDocument;
  }
  bindFakeSelection(i, e) {
    this._fakeSelectionMapping.set(i, new nn(e));
  }
  fakeSelectionToView(i) {
    return this._fakeSelectionMapping.get(i);
  }
  bindElements(i, e) {
    this._domToViewMapping.set(i, e), this._viewToDomMapping.set(e, i);
  }
  unbindDomElement(i) {
    const e = this._domToViewMapping.get(i);
    if (e) {
      this._domToViewMapping.delete(i), this._viewToDomMapping.delete(e);
      for (const t of i.children) this.unbindDomElement(t);
    }
  }
  bindDocumentFragments(i, e) {
    this._domToViewMapping.set(i, e), this._viewToDomMapping.set(e, i);
  }
  shouldRenderAttribute(i, e, t) {
    return this.renderingMode === "data" || !(i = i.toLowerCase()).startsWith("on") && (i !== "srcdoc" || !e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)) && (t === "img" && (i === "src" || i === "srcset") || t === "source" && i === "srcset" || !e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i));
  }
  setContentOf(i, e) {
    if (this.renderingMode === "data") return void (i.innerHTML = e);
    const t = new DOMParser().parseFromString(e, "text/html"), n = t.createDocumentFragment(), r = t.body.childNodes;
    for (; r.length > 0; ) n.appendChild(r[0]);
    const s = t.createTreeWalker(n, NodeFilter.SHOW_ELEMENT), a = [];
    let l;
    for (; l = s.nextNode(); ) a.push(l);
    for (const c of a) {
      for (const u of c.getAttributeNames()) this.setDomElementAttribute(c, u, c.getAttribute(u));
      const d = c.tagName.toLowerCase();
      this._shouldRenameElement(d) && (im(d), c.replaceWith(this._createReplacementDomElement(d, c)));
    }
    for (; i.firstChild; ) i.firstChild.remove();
    i.append(n);
  }
  viewToDom(i, e = {}) {
    if (i.is("$text")) {
      const t = this._processDataFromViewText(i);
      return this._domDocument.createTextNode(t);
    }
    {
      const t = i;
      if (this.mapViewToDom(t)) {
        if (!t.getCustomProperty("editingPipeline:doNotReuseOnce")) return this.mapViewToDom(t);
        this._elementsWithTemporaryCustomProperties.add(t);
      }
      let n;
      if (t.is("documentFragment")) n = this._domDocument.createDocumentFragment(), e.bind && this.bindDocumentFragments(n, t);
      else {
        if (t.is("uiElement")) return n = t.name === "$comment" ? this._domDocument.createComment(t.getCustomProperty("$rawContent")) : t.render(this._domDocument, this), e.bind && this.bindElements(n, t), n;
        this._shouldRenameElement(t.name) ? (im(t.name), n = this._createReplacementDomElement(t.name)) : n = t.hasAttribute("xmlns") ? this._domDocument.createElementNS(t.getAttribute("xmlns"), t.name) : this._domDocument.createElement(t.name), t.is("rawElement") && t.render(n, this), e.bind && this.bindElements(n, t);
        for (const r of t.getAttributeKeys()) this.setDomElementAttribute(n, r, t.getAttribute(r), t);
      }
      if (e.withChildren !== !1) for (const r of this.viewChildrenToDom(t, e)) n instanceof HTMLTemplateElement ? n.content.appendChild(r) : n.appendChild(r);
      return n;
    }
  }
  setDomElementAttribute(i, e, t, n) {
    const r = this.shouldRenderAttribute(e, t, i.tagName.toLowerCase()) || n && n.shouldRenderUnsafeAttribute(e);
    r || ce("domconverter-unsafe-attribute-detected", { domElement: i, key: e, value: t }), R2(e) ? (i.hasAttribute(e) && !r ? i.removeAttribute(e) : i.hasAttribute(Rs + e) && r && i.removeAttribute(Rs + e), i.setAttribute(r ? e : Rs + e, t)) : ce("domconverter-invalid-attribute-detected", { domElement: i, key: e, value: t });
  }
  removeDomElementAttribute(i, e) {
    e != Jh && (i.removeAttribute(e), i.removeAttribute(Rs + e));
  }
  *viewChildrenToDom(i, e = {}) {
    const t = i.getFillerOffset && i.getFillerOffset();
    let n = 0;
    for (const r of i.getChildren()) {
      t === n && (yield this._getBlockFiller());
      const s = r.is("element") && !!r.getCustomProperty("dataPipeline:transparentRendering") && !Te(r.getAttributes());
      if (s && this.renderingMode == "data") if (r.is("rawElement")) {
        const a = this._domDocument.createElement(r.name);
        r.render(a, this), yield* [...a.childNodes];
      } else yield* this.viewChildrenToDom(r, e);
      else s && ce("domconverter-transparent-rendering-unsupported-in-editing-pipeline", { viewElement: r }), yield this.viewToDom(r, e);
      n++;
    }
    t === n && (yield this._getBlockFiller());
  }
  viewRangeToDom(i) {
    const e = this.viewPositionToDom(i.start), t = this.viewPositionToDom(i.end), n = this._domDocument.createRange();
    return n.setStart(e.parent, e.offset), n.setEnd(t.parent, t.offset), n;
  }
  viewPositionToDom(i) {
    const e = i.parent;
    if (e.is("$text")) {
      const t = this.findCorrespondingDomText(e);
      if (!t) return null;
      let n = i.offset;
      return Wt(t) && (n += 7), { parent: t, offset: n };
    }
    {
      let t, n, r;
      if (i.offset === 0) {
        if (t = this.mapViewToDom(e), !t) return null;
        r = t.childNodes[0];
      } else {
        const s = i.nodeBefore;
        if (n = s.is("$text") ? this.findCorrespondingDomText(s) : this.mapViewToDom(s), !n) return null;
        t = n.parentNode, r = n.nextSibling;
      }
      return Ye(r) && Wt(r) ? { parent: r, offset: 7 } : { parent: t, offset: n ? Pr(n) + 1 : 0 };
    }
  }
  domToView(i, e = {}) {
    const t = [], n = this._domToView(i, e, t), r = n.next().value;
    return r ? (n.next(), this._processDomInlineNodes(null, t, e), this.blockFillerMode == "br" && em(r) || r.is("$text") && r.data.length == 0 ? null : r) : null;
  }
  *domChildrenToView(i, e = {}, t = []) {
    let n = [];
    n = i instanceof HTMLTemplateElement ? [...i.content.childNodes] : [...i.childNodes];
    for (let r = 0; r < n.length; r++) {
      const s = n[r], a = this._domToView(s, e, t), l = a.next().value;
      l !== null && (this._isBlockViewElement(l) && this._processDomInlineNodes(i, t, e), this.blockFillerMode == "br" && em(l) || (yield l), a.next());
    }
    this._processDomInlineNodes(i, t, e);
  }
  domSelectionToView(i) {
    if (function(n) {
      if (!q.isGecko || !n.rangeCount) return !1;
      const r = n.getRangeAt(0).startContainer;
      try {
        Object.prototype.toString.call(r);
      } catch {
        return !0;
      }
      return !1;
    }(i)) return new nn([]);
    if (i.rangeCount === 1) {
      let n = i.getRangeAt(0).startContainer;
      Ye(n) && (n = n.parentNode);
      const r = this.fakeSelectionToView(n);
      if (r) return r;
    }
    const e = this.isDomSelectionBackward(i), t = [];
    for (let n = 0; n < i.rangeCount; n++) {
      const r = i.getRangeAt(n), s = this.domRangeToView(r);
      s && t.push(s);
    }
    return new nn(t, { backward: e });
  }
  domRangeToView(i) {
    const e = this.domPositionToView(i.startContainer, i.startOffset), t = this.domPositionToView(i.endContainer, i.endOffset);
    return e && t ? new se(e, t) : null;
  }
  domPositionToView(i, e = 0) {
    if (this.isBlockFiller(i)) return this.domPositionToView(i.parentNode, Pr(i));
    const t = this.mapDomToView(i);
    if (t && (t.is("uiElement") || t.is("rawElement"))) return R._createBefore(t);
    if (Ye(i)) {
      if (Fo(i)) return this.domPositionToView(i.parentNode, Pr(i));
      const n = this.findCorrespondingViewText(i);
      let r = e;
      return n ? (Wt(i) && (r -= 7, r = r < 0 ? 0 : r), new R(n, r)) : null;
    }
    if (e === 0) {
      const n = this.mapDomToView(i);
      if (n) return new R(n, 0);
    } else {
      const n = i.childNodes[e - 1];
      if (Ye(n) && Fo(n) || n && this.isBlockFiller(n)) return this.domPositionToView(n.parentNode, Pr(n));
      const r = Ye(n) ? this.findCorrespondingViewText(n) : this.mapDomToView(n);
      if (r && r.parent) return new R(r.parent, r.index + 1);
    }
    return null;
  }
  mapDomToView(i) {
    return this.getHostViewElement(i) || this._domToViewMapping.get(i);
  }
  findCorrespondingViewText(i) {
    if (Fo(i)) return null;
    const e = this.getHostViewElement(i);
    if (e) return e;
    const t = i.previousSibling;
    if (t) {
      if (!this.isElement(t)) return null;
      const n = this.mapDomToView(t);
      if (n) {
        const r = n.nextSibling;
        return r instanceof _t ? r : null;
      }
    } else {
      const n = this.mapDomToView(i.parentNode);
      if (n) {
        const r = n.getChild(0);
        return r instanceof _t ? r : null;
      }
    }
    return null;
  }
  mapViewToDom(i) {
    return this._viewToDomMapping.get(i);
  }
  findCorrespondingDomText(i) {
    const e = i.previousSibling;
    return e && this.mapViewToDom(e) ? this.mapViewToDom(e).nextSibling : !e && i.parent && this.mapViewToDom(i.parent) ? this.mapViewToDom(i.parent).childNodes[0] : null;
  }
  focus(i) {
    const e = this.mapViewToDom(i);
    if (!e || e.ownerDocument.activeElement === e) return;
    const { scrollX: t, scrollY: n } = z.window, r = [];
    Xh(e, (s) => {
      const { scrollLeft: a, scrollTop: l } = s;
      r.push([a, l]);
    }), e.focus(), Xh(e, (s) => {
      const [a, l] = r.shift();
      s.scrollLeft = a, s.scrollTop = l;
    }), z.window.scrollTo(t, n);
  }
  _clearDomSelection() {
    const i = this.mapViewToDom(this.document.selection.editableElement);
    if (!i) return;
    const e = i.ownerDocument.defaultView.getSelection(), t = this.domSelectionToView(e);
    t && t.rangeCount > 0 && e.removeAllRanges();
  }
  isElement(i) {
    return i && i.nodeType == Node.ELEMENT_NODE;
  }
  isDocumentFragment(i) {
    return i && i.nodeType == Node.DOCUMENT_FRAGMENT_NODE;
  }
  isBlockFiller(i) {
    return this.blockFillerMode == "br" ? i.isEqualNode(kx) : !!tm(i, this.blockElements) || i.isEqualNode(wx) || function(e, t) {
      return e.isEqualNode(_x) && Gk(e, t) && e.parentNode.childNodes.length === 1;
    }(i, this.blockElements);
  }
  isDomSelectionBackward(i) {
    if (i.isCollapsed) return !1;
    const e = this._domDocument.createRange();
    try {
      e.setStart(i.anchorNode, i.anchorOffset), e.setEnd(i.focusNode, i.focusOffset);
    } catch {
      return !1;
    }
    const t = e.collapsed;
    return e.detach(), t;
  }
  getHostViewElement(i) {
    const e = Ak(i);
    for (e.pop(); e.length; ) {
      const t = e.pop(), n = this._domToViewMapping.get(t);
      if (n && (n.is("uiElement") || n.is("rawElement"))) return n;
    }
    return null;
  }
  isDomSelectionCorrect(i) {
    return this._isDomSelectionPositionCorrect(i.anchorNode, i.anchorOffset) && this._isDomSelectionPositionCorrect(i.focusNode, i.focusOffset);
  }
  registerRawContentMatcher(i) {
    this._rawContentElementMatcher.add(i);
  }
  registerInlineObjectMatcher(i) {
    this._inlineObjectElementMatcher.add(i);
  }
  _clearTemporaryCustomProperties() {
    for (const i of this._elementsWithTemporaryCustomProperties) i._removeCustomProperty("editingPipeline:doNotReuseOnce");
    this._elementsWithTemporaryCustomProperties.clear();
  }
  _getBlockFiller() {
    switch (this.blockFillerMode) {
      case "nbsp":
        return Uk(this._domDocument);
      case "markedNbsp":
        return qk(this._domDocument);
      case "br":
        return Wk(this._domDocument);
    }
  }
  _isDomSelectionPositionCorrect(i, e) {
    if (Ye(i) && Wt(i) && e < 7 || this.isElement(i) && Wt(i.childNodes[e])) return !1;
    const t = this.mapDomToView(i);
    return !t || !t.is("uiElement") && !t.is("rawElement");
  }
  *_domToView(i, e, t) {
    if (this.blockFillerMode != "br" && tm(i, this.blockElements)) return null;
    const n = this.getHostViewElement(i);
    if (n) return n;
    if (jr(i) && e.skipComments) return null;
    if (Ye(i)) {
      if (Fo(i)) return null;
      {
        const r = i.data;
        if (r === "") return null;
        const s = new _t(this.document, r);
        return t.push(s), s;
      }
    }
    {
      let r = this.mapDomToView(i);
      if (r) return this._isInlineObjectElement(r) && t.push(r), r;
      if (this.isDocumentFragment(i)) r = new eo(this.document), e.bind && this.bindDocumentFragments(i, r);
      else {
        r = this._createViewElement(i, e), e.bind && this.bindElements(i, r);
        const a = i.attributes;
        if (a) for (let l = a.length, c = 0; c < l; c++) r._setAttribute(a[c].name, a[c].value);
        if (this._isViewElementWithRawContent(r, e)) return r._setCustomProperty("$rawContent", i.innerHTML), this._isBlockViewElement(r) || t.push(r), r;
        if (jr(i)) return r._setCustomProperty("$rawContent", i.data), r;
      }
      yield r;
      const s = [];
      if (e.withChildren !== !1) for (const a of this.domChildrenToView(i, e, s)) r._appendChild(a);
      if (this._isInlineObjectElement(r)) t.push(r), this._processDomInlineNodes(null, s, e);
      else for (const a of s) t.push(a);
    }
  }
  _processDomInlineNodes(i, e, t) {
    if (!e.length || i && !this.isDocumentFragment(i) && !this._isBlockDomElement(i)) return;
    let n = !1;
    for (let r = 0; r < e.length; r++) {
      const s = e[r];
      if (!s.is("$text")) {
        n = !1;
        continue;
      }
      let a, l = !1;
      if (this._isPreFormatted(s)) a = Yh(s.data);
      else {
        a = s.data.replace(/[ \n\t\r]{1,}/g, " "), l = /[^\S\u00A0]/.test(a.charAt(a.length - 1));
        const c = r > 0 ? e[r - 1] : null, d = r + 1 < e.length ? e[r + 1] : null, u = !c || c.is("element") && c.name == "br" || n, h = !d && !Wt(s.data);
        t.withChildren !== !1 && (u && (a = a.replace(/^ /, "")), h && (a = a.replace(/ $/, ""))), a = Yh(a), this.blockFillerMode != "br" && s.parent && (yx(s.parent, a) ? (a = "", s.parent.parent && (s.parent.parent._setCustomProperty("$hasBlockFiller", !0), s.parent._remove())) : vx(s.parent, a, this.blockElements) && (a = "", s.parent._setCustomProperty("$hasBlockFiller", !0))), a = a.replace(/ \u00A0/g, "  ");
        const g = d && d.is("element") && d.name != "br", p = d && d.is("$text") && d.data.charAt(0) == " ";
        (/[ \u00A0]\u00A0$/.test(a) || !d || g || p) && (a = a.replace(/\u00A0$/, " ")), (u || c && c.is("element") && c.name != "br") && (a = a.replace(/^\u00A0/, " "));
      }
      a.length == 0 && s.parent ? (s._remove(), e.splice(r, 1), r--) : (s._data = a, n = l);
    }
    e.length = 0;
  }
  _processDataFromViewText(i) {
    let e = i.data;
    if (this._isPreFormatted(i)) return e;
    if (e.charAt(0) == " ") {
      const t = this._getTouchingInlineViewNode(i, !1);
      !(t && t.is("$textProxy") && this._nodeEndsWithSpace(t)) && t || (e = " " + e.substr(1));
    }
    if (e.charAt(e.length - 1) == " ") {
      const t = this._getTouchingInlineViewNode(i, !0), n = t && t.is("$textProxy") && t.data.charAt(0) == " ";
      e.charAt(e.length - 2) != " " && t && !n || (e = e.substr(0, e.length - 1) + " ");
    }
    return e.replace(/ {2}/g, "  ");
  }
  _nodeEndsWithSpace(i) {
    if (this._isPreFormatted(i)) return !1;
    const e = this._processDataFromViewText(i);
    return e.charAt(e.length - 1) == " ";
  }
  _isPreFormatted(i) {
    if (function(e, t) {
      return e.getAncestors().some((n) => n.is("element") && t.includes(n.name));
    }(i, this.preElements)) return !0;
    for (const e of i.getAncestors({ parentFirst: !0 })) if (e.is("element") && e.hasStyle("white-space") && e.getStyle("white-space") !== "inherit") return ["pre", "pre-wrap", "break-spaces"].includes(e.getStyle("white-space"));
    return !1;
  }
  _getTouchingInlineViewNode(i, e) {
    const t = new Qn({ startPosition: e ? R._createAfter(i) : R._createBefore(i), direction: e ? "forward" : "backward" });
    for (const { item: n } of t) {
      if (n.is("$textProxy")) return n;
      if (!n.is("element") || !n.getCustomProperty("dataPipeline:transparentRendering")) {
        if (n.is("element", "br")) return null;
        if (this._isInlineObjectElement(n)) return n;
        if (n.is("containerElement")) return null;
      }
    }
    return null;
  }
  _isBlockDomElement(i) {
    return this.isElement(i) && this.blockElements.includes(i.tagName.toLowerCase());
  }
  _isBlockViewElement(i) {
    return i.is("element") && this.blockElements.includes(i.name);
  }
  _isInlineObjectElement(i) {
    return !!i.is("element") && (i.name == "br" || this.inlineObjectElements.includes(i.name) || !!this._inlineObjectElementMatcher.match(i));
  }
  _createViewElement(i, e) {
    if (jr(i)) return new ul(this.document, "$comment");
    const t = e.keepOriginalCase ? i.tagName : i.tagName.toLowerCase();
    return new ln(this.document, t);
  }
  _isViewElementWithRawContent(i, e) {
    return e.withChildren !== !1 && i.is("element") && !!this._rawContentElementMatcher.match(i);
  }
  _shouldRenameElement(i) {
    const e = i.toLowerCase();
    return this.renderingMode === "editing" && this.unsafeElements.includes(e);
  }
  _createReplacementDomElement(i, e) {
    const t = this._domDocument.createElement("span");
    if (t.setAttribute(Jh, i), e) {
      for (; e.firstChild; ) t.appendChild(e.firstChild);
      for (const n of e.getAttributeNames()) t.setAttribute(n, e.getAttribute(n));
    }
    return t;
  }
}
function Xh(o, i) {
  let e = o;
  for (; e; ) i(e), e = e.parentElement;
}
function Gk(o, i) {
  const e = o.parentNode;
  return !!e && !!e.tagName && i.includes(e.tagName.toLowerCase());
}
function vx(o, i, e) {
  return i == " " && o && o.is("element") && o.childCount == 1 && e.includes(o.name);
}
function yx(o, i) {
  return i == " " && o && o.is("element", "span") && o.childCount == 1 && o.hasAttribute("data-cke-filler");
}
function em(o) {
  return o.is("element", "br") && o.hasAttribute("data-cke-filler");
}
function tm(o, i) {
  return o.tagName === "BR" && Gk(o, i) && o.parentNode.childNodes.length === 1;
}
function im(o) {
  o === "script" && ce("domconverter-unsafe-script-element-detected"), o === "style" && ce("domconverter-unsafe-style-element-detected");
}
class Ai extends Nt() {
  constructor(e) {
    super();
    m(this, "view");
    m(this, "document");
    m(this, "_isEnabled", !1);
    this.view = e, this.document = e.document;
  }
  get isEnabled() {
    return this._isEnabled;
  }
  enable() {
    this._isEnabled = !0;
  }
  disable() {
    this._isEnabled = !1;
  }
  destroy() {
    this.disable(), this.stopListening();
  }
  checkShouldIgnoreEventFromTarget(e) {
    return e && e.nodeType === 3 && (e = e.parentNode), !(!e || e.nodeType !== 1) && e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *");
  }
}
class tr {
  constructor(i, e, t) {
    m(this, "view");
    m(this, "document");
    m(this, "domEvent");
    m(this, "domTarget");
    this.view = i, this.document = i.document, this.domEvent = e, this.domTarget = e.target, kk(this, t);
  }
  get target() {
    return this.view.domConverter.mapDomToView(this.domTarget);
  }
  preventDefault() {
    this.domEvent.preventDefault();
  }
  stopPropagation() {
    this.domEvent.stopPropagation();
  }
}
class Fi extends Ai {
  constructor() {
    super(...arguments);
    m(this, "useCapture", !1);
    m(this, "usePassive", !1);
  }
  observe(e) {
    (typeof this.domEventType == "string" ? [this.domEventType] : this.domEventType).forEach((t) => {
      this.listenTo(e, t, (n, r) => {
        this.isEnabled && !this.checkShouldIgnoreEventFromTarget(r.target) && this.onDomEvent(r);
      }, { useCapture: this.useCapture, usePassive: this.usePassive });
    });
  }
  stopObserving(e) {
    this.stopListening(e);
  }
  fire(e, t, n) {
    this.isEnabled && this.document.fire(e, new tr(this.view, t, n));
  }
}
class xx extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", ["keydown", "keyup"]);
  }
  onDomEvent(e) {
    const t = { keyCode: e.keyCode, altKey: e.altKey, ctrlKey: e.ctrlKey, shiftKey: e.shiftKey, metaKey: e.metaKey, get keystroke() {
      return no(this);
    } };
    this.fire(e.type, e, t);
  }
}
class Cx extends Ai {
  constructor(e) {
    super(e);
    m(this, "_fireSelectionChangeDoneDebounced");
    this._fireSelectionChangeDoneDebounced = vi((t) => {
      this.document.fire("selectionChangeDone", t);
    }, 200);
  }
  observe() {
    const e = this.document;
    e.on("arrowKey", (t, n) => {
      e.selection.isFake && this.isEnabled && n.preventDefault();
    }, { context: "$capture" }), e.on("arrowKey", (t, n) => {
      e.selection.isFake && this.isEnabled && this._handleSelectionMove(n.keyCode);
    }, { priority: "lowest" });
  }
  stopObserving() {
  }
  destroy() {
    super.destroy(), this._fireSelectionChangeDoneDebounced.cancel();
  }
  _handleSelectionMove(e) {
    const t = this.document.selection, n = new nn(t.getRanges(), { backward: t.isBackward, fake: !1 });
    e != ne.arrowleft && e != ne.arrowup || n.setTo(n.getFirstPosition()), e != ne.arrowright && e != ne.arrowdown || n.setTo(n.getLastPosition());
    const r = { oldSelection: t, newSelection: n, domSelection: null };
    this.document.fire("selectionChange", r), this._fireSelectionChangeDoneDebounced(r);
  }
}
let Zk = class extends Ai {
  constructor(i) {
    super(i);
    m(this, "domConverter");
    m(this, "_config");
    m(this, "_domElements");
    m(this, "_mutationObserver");
    this._config = { childList: !0, characterData: !0, subtree: !0 }, this.domConverter = i.domConverter, this._domElements = /* @__PURE__ */ new Set(), this._mutationObserver = new window.MutationObserver(this._onMutations.bind(this));
  }
  flush() {
    this._onMutations(this._mutationObserver.takeRecords());
  }
  observe(i) {
    this._domElements.add(i), this.isEnabled && this._mutationObserver.observe(i, this._config);
  }
  stopObserving(i) {
    if (this._domElements.delete(i), this.isEnabled) {
      this._mutationObserver.disconnect();
      for (const e of this._domElements) this._mutationObserver.observe(e, this._config);
    }
  }
  enable() {
    super.enable();
    for (const i of this._domElements) this._mutationObserver.observe(i, this._config);
  }
  disable() {
    super.disable(), this._mutationObserver.disconnect();
  }
  destroy() {
    super.destroy(), this._mutationObserver.disconnect();
  }
  _onMutations(i) {
    if (i.length === 0) return;
    const e = this.domConverter, t = /* @__PURE__ */ new Set(), n = /* @__PURE__ */ new Set();
    for (const s of i) {
      const a = e.mapDomToView(s.target);
      a && (a.is("uiElement") || a.is("rawElement") || s.type !== "childList" || this._isBogusBrMutation(s) || n.add(a));
    }
    for (const s of i) {
      const a = e.mapDomToView(s.target);
      if ((!a || !a.is("uiElement") && !a.is("rawElement")) && s.type === "characterData") {
        const l = e.findCorrespondingViewText(s.target);
        l && !n.has(l.parent) ? t.add(l) : !l && Wt(s.target) && n.add(e.mapDomToView(s.target.parentNode));
      }
    }
    const r = [];
    for (const s of t) r.push({ type: "text", node: s });
    for (const s of n) {
      const a = e.mapViewToDom(s);
      _k(Array.from(s.getChildren()), Array.from(e.domChildrenToView(a, { withChildren: !1 })), Ax) || r.push({ type: "children", node: s });
    }
    r.length && this.document.fire("mutations", { mutations: r });
  }
  _isBogusBrMutation(i) {
    let e = null;
    return i.nextSibling === null && i.removedNodes.length === 0 && i.addedNodes.length == 1 && (e = this.domConverter.domToView(i.addedNodes[0], { withChildren: !1 })), e && e.is("element", "br");
  }
};
function Ax(o, i) {
  if (!Array.isArray(o)) return o === i || !(!o.is("$text") || !i.is("$text")) && o.data === i.data;
}
class Ta extends Fi {
  constructor(e) {
    super(e);
    m(this, "_renderTimeoutId", null);
    m(this, "_isFocusChanging", !1);
    m(this, "domEventType", ["focus", "blur"]);
    this.useCapture = !0;
    const t = this.document;
    t.on("focus", () => this._handleFocus()), t.on("blur", (n, r) => this._handleBlur(r)), t.on("beforeinput", () => {
      t.isFocused || this._handleFocus();
    }, { priority: "highest" });
  }
  flush() {
    this._isFocusChanging && (this._isFocusChanging = !1, this.document.isFocused = !0);
  }
  onDomEvent(e) {
    this.fire(e.type, e);
  }
  destroy() {
    this._clearTimeout(), super.destroy();
  }
  _handleFocus() {
    this._clearTimeout(), this._isFocusChanging = !0, this._renderTimeoutId = setTimeout(() => {
      this._renderTimeoutId = null, this.flush(), this.view.change(() => {
      });
    }, 50);
  }
  _handleBlur(e) {
    const t = this.document.selection.editableElement;
    t !== null && t !== e.target || (this.document.isFocused = !1, this._isFocusChanging = !1, this.view.change(() => {
    }));
  }
  _clearTimeout() {
    this._renderTimeoutId && (clearTimeout(this._renderTimeoutId), this._renderTimeoutId = null);
  }
}
class Tx extends Ai {
  constructor(e) {
    super(e);
    m(this, "mutationObserver");
    m(this, "focusObserver");
    m(this, "selection");
    m(this, "domConverter");
    m(this, "_documents", /* @__PURE__ */ new WeakSet());
    m(this, "_fireSelectionChangeDoneDebounced");
    m(this, "_clearInfiniteLoopInterval");
    m(this, "_documentIsSelectingInactivityTimeoutDebounced");
    m(this, "_loopbackCounter", 0);
    m(this, "_pendingSelectionChange", /* @__PURE__ */ new Set());
    this.mutationObserver = e.getObserver(Zk), this.focusObserver = e.getObserver(Ta), this.selection = this.document.selection, this.domConverter = e.domConverter, this._fireSelectionChangeDoneDebounced = vi((t) => {
      this.document.fire("selectionChangeDone", t);
    }, 200), this._clearInfiniteLoopInterval = setInterval(() => this._clearInfiniteLoop(), 1e3), this._documentIsSelectingInactivityTimeoutDebounced = vi(() => this.document.isSelecting = !1, 5e3), this.view.document.on("change:isFocused", (t, n, r) => {
      if (r && this._pendingSelectionChange.size) {
        for (const s of Array.from(this._pendingSelectionChange)) this._handleSelectionChange(s);
        this._pendingSelectionChange.clear();
      }
    });
  }
  observe(e) {
    const t = e.ownerDocument, n = () => {
      this.document.isSelecting && (this._handleSelectionChange(t), this.document.isSelecting = !1, this._documentIsSelectingInactivityTimeoutDebounced.cancel());
    };
    this.listenTo(e, "selectstart", () => {
      this.document.isSelecting = !0, this._documentIsSelectingInactivityTimeoutDebounced();
    }, { priority: "highest" }), this.listenTo(e, "keydown", n, { priority: "highest", useCapture: !0 }), this.listenTo(e, "keyup", n, { priority: "highest", useCapture: !0 }), this._documents.has(t) || (this.listenTo(t, "mouseup", n, { priority: "highest", useCapture: !0 }), this.listenTo(t, "selectionchange", () => {
      this.document.isComposing && !q.isAndroid || (this._handleSelectionChange(t), this._documentIsSelectingInactivityTimeoutDebounced());
    }), this.listenTo(this.view.document, "compositionstart", () => {
      this._handleSelectionChange(t);
    }, { priority: "lowest" }), this._documents.add(t));
  }
  stopObserving(e) {
    this.stopListening(e);
  }
  destroy() {
    super.destroy(), clearInterval(this._clearInfiniteLoopInterval), this._fireSelectionChangeDoneDebounced.cancel(), this._documentIsSelectingInactivityTimeoutDebounced.cancel();
  }
  _reportInfiniteLoop() {
  }
  _handleSelectionChange(e) {
    if (!this.isEnabled) return;
    const t = e.defaultView.getSelection();
    if (this.checkShouldIgnoreEventFromTarget(t.anchorNode)) return;
    this.mutationObserver.flush();
    const n = this.domConverter.domSelectionToView(t);
    if (n.rangeCount != 0) if (this.view.hasDomSelection = !0, this.focusObserver.flush(), this.view.document.isFocused) {
      if (this._pendingSelectionChange.delete(e), !this.selection.isEqual(n) || !this.domConverter.isDomSelectionCorrect(t)) if (++this._loopbackCounter > 60) this._reportInfiniteLoop();
      else if (this.selection.isSimilar(n)) this.view.forceRender();
      else {
        const r = { oldSelection: this.selection, newSelection: n, domSelection: t };
        this.document.fire("selectionChange", r), this._fireSelectionChangeDoneDebounced(r);
      }
    } else this._pendingSelectionChange.add(e);
    else this.view.hasDomSelection = !1;
  }
  _clearInfiniteLoop() {
    this._loopbackCounter = 0;
  }
}
class Ex extends Fi {
  constructor(e) {
    super(e);
    m(this, "domEventType", ["compositionstart", "compositionupdate", "compositionend"]);
    const t = this.document;
    t.on("compositionstart", () => {
      t.isComposing = !0;
    }, { priority: "low" }), t.on("compositionend", () => {
      t.isComposing = !1;
    }, { priority: "low" });
  }
  onDomEvent(e) {
    this.fire(e.type, e, { data: e.data });
  }
}
class Kk {
  constructor(i, e = {}) {
    m(this, "_files");
    m(this, "_native");
    this._files = e.cacheFiles ? nm(i) : null, this._native = i;
  }
  get files() {
    return this._files || (this._files = nm(this._native)), this._files;
  }
  get types() {
    return this._native.types;
  }
  getData(i) {
    return this._native.getData(i);
  }
  setData(i, e) {
    this._native.setData(i, e);
  }
  set effectAllowed(i) {
    this._native.effectAllowed = i;
  }
  get effectAllowed() {
    return this._native.effectAllowed;
  }
  set dropEffect(i) {
    this._native.dropEffect = i;
  }
  get dropEffect() {
    return this._native.dropEffect;
  }
  setDragImage(i, e, t) {
    this._native.setDragImage(i, e, t);
  }
  get isCanceled() {
    return this._native.dropEffect == "none" || !!this._native.mozUserCancelled;
  }
}
function nm(o) {
  const i = Array.from(o.files || []), e = Array.from(o.items || []);
  return i.length ? i : e.filter((t) => t.kind === "file").map((t) => t.getAsFile());
}
class Sx extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", "beforeinput");
  }
  onDomEvent(e) {
    const t = e.getTargetRanges(), n = this.view, r = n.document;
    let s = null, a = null, l = [];
    if (e.dataTransfer && (s = new Kk(e.dataTransfer)), e.data !== null ? a = e.data : s && (a = s.getData("text/plain")), r.selection.isFake) l = Array.from(r.selection.getRanges());
    else if (t.length) l = t.map((c) => {
      const d = n.domConverter.domPositionToView(c.startContainer, c.startOffset), u = n.domConverter.domPositionToView(c.endContainer, c.endOffset);
      return d ? n.createRange(d, u) : u ? n.createRange(u) : void 0;
    }).filter((c) => !!c);
    else if (q.isAndroid) {
      const c = e.target.ownerDocument.defaultView.getSelection();
      l = Array.from(n.domConverter.domSelectionToView(c).getRanges());
    }
    if (q.isAndroid && e.inputType == "insertCompositionText" && a && a.endsWith(`
`)) this.fire(e.type, e, { inputType: "insertParagraph", targetRanges: [n.createRange(l[0].end)] });
    else if (e.inputType == "insertText" && a && a.includes(`
`)) {
      const c = a.split(/\n{1,2}/g);
      let d = l;
      for (let u = 0; u < c.length; u++) {
        const h = c[u];
        h != "" && (this.fire(e.type, e, { data: h, dataTransfer: s, targetRanges: d, inputType: e.inputType, isComposing: e.isComposing }), d = [r.selection.getFirstRange()]), u + 1 < c.length && (this.fire(e.type, e, { inputType: "insertParagraph", targetRanges: d }), d = [r.selection.getFirstRange()]);
      }
    } else this.fire(e.type, e, { data: a, dataTransfer: s, targetRanges: l, inputType: e.inputType, isComposing: e.isComposing });
  }
}
class Ix extends Ai {
  constructor(i) {
    super(i), this.document.on("keydown", (e, t) => {
      if (this.isEnabled && U2(t.keyCode)) {
        const n = new er(this.document, "arrowKey", this.document.selection.getFirstRange());
        this.document.fire(n, t), n.stop.called && e.stop();
      }
    });
  }
  observe() {
  }
  stopObserving() {
  }
}
class Px extends Ai {
  constructor(i) {
    super(i);
    const e = this.document;
    e.on("keydown", (t, n) => {
      if (!this.isEnabled || n.keyCode != ne.tab || n.ctrlKey) return;
      const r = new er(e, "tab", e.selection.getFirstRange());
      e.fire(r, n), r.stop.called && t.stop();
    });
  }
  observe() {
  }
  stopObserving() {
  }
}
let Mx = class extends xe() {
  constructor(i) {
    super();
    m(this, "document");
    m(this, "domConverter");
    m(this, "domRoots", /* @__PURE__ */ new Map());
    m(this, "_renderer");
    m(this, "_initialDomRootAttributes", /* @__PURE__ */ new WeakMap());
    m(this, "_observers", /* @__PURE__ */ new Map());
    m(this, "_writer");
    m(this, "_ongoingChange", !1);
    m(this, "_postFixersInProgress", !1);
    m(this, "_renderingDisabled", !1);
    m(this, "_hasChangedSinceTheLastRendering", !1);
    this.document = new dl(i), this.domConverter = new hl(this.document), this.set("isRenderingInProgress", !1), this.set("hasDomSelection", !1), this._renderer = new gx(this.domConverter, this.document.selection), this._renderer.bind("isFocused", "isSelecting", "isComposing").to(this.document, "isFocused", "isSelecting", "isComposing"), this._writer = new Cu(this.document), this.addObserver(Zk), this.addObserver(Ta), this.addObserver(Tx), this.addObserver(xx), this.addObserver(Cx), this.addObserver(Ex), this.addObserver(Ix), this.addObserver(Sx), this.addObserver(Px), this.document.on("arrowKey", mx, { priority: "low" }), lx(this), this.on("render", () => {
      this._render(), this.document.fire("layoutChanged"), this._hasChangedSinceTheLastRendering = !1;
    }), this.listenTo(this.document.selection, "change", () => {
      this._hasChangedSinceTheLastRendering = !0;
    }), this.listenTo(this.document, "change:isFocused", () => {
      this._hasChangedSinceTheLastRendering = !0;
    }), q.isiOS && this.listenTo(this.document, "blur", (e, t) => {
      this.domConverter.mapDomToView(t.domEvent.relatedTarget) || this.domConverter._clearDomSelection();
    }), this.listenTo(this.document, "mutations", (e, { mutations: t }) => {
      t.forEach((n) => this._renderer.markToSync(n.type, n.node));
    }, { priority: "low" }), this.listenTo(this.document, "mutations", () => {
      this.forceRender();
    }, { priority: "lowest" });
  }
  attachDomRoot(i, e = "main") {
    const t = this.document.getRoot(e);
    t._name = i.tagName.toLowerCase();
    const n = {};
    for (const { name: s, value: a } of Array.from(i.attributes)) n[s] = a, s === "class" ? this._writer.addClass(a.split(" "), t) : t.hasAttribute(s) || this._writer.setAttribute(s, a, t);
    this._initialDomRootAttributes.set(i, n);
    const r = () => {
      this._writer.setAttribute("contenteditable", (!t.isReadOnly).toString(), t), t.isReadOnly ? this._writer.addClass("ck-read-only", t) : this._writer.removeClass("ck-read-only", t);
    };
    r(), this.domRoots.set(e, i), this.domConverter.bindElements(i, t), this._renderer.markToSync("children", t), this._renderer.markToSync("attributes", t), this._renderer.domDocuments.add(i.ownerDocument), t.on("change:children", (s, a) => this._renderer.markToSync("children", a)), t.on("change:attributes", (s, a) => this._renderer.markToSync("attributes", a)), t.on("change:text", (s, a) => this._renderer.markToSync("text", a)), t.on("change:isReadOnly", () => this.change(r)), t.on("change", () => {
      this._hasChangedSinceTheLastRendering = !0;
    });
    for (const s of this._observers.values()) s.observe(i, e);
  }
  detachDomRoot(i) {
    const e = this.domRoots.get(i);
    Array.from(e.attributes).forEach(({ name: n }) => e.removeAttribute(n));
    const t = this._initialDomRootAttributes.get(e);
    for (const n in t) e.setAttribute(n, t[n]);
    this.domRoots.delete(i), this.domConverter.unbindDomElement(e);
    for (const n of this._observers.values()) n.stopObserving(e);
  }
  getDomRoot(i = "main") {
    return this.domRoots.get(i);
  }
  addObserver(i) {
    let e = this._observers.get(i);
    if (e) return e;
    e = new i(this), this._observers.set(i, e);
    for (const [t, n] of this.domRoots) e.observe(n, t);
    return e.enable(), e;
  }
  getObserver(i) {
    return this._observers.get(i);
  }
  disableObservers() {
    for (const i of this._observers.values()) i.disable();
  }
  enableObservers() {
    for (const i of this._observers.values()) i.enable();
  }
  scrollToTheSelection({ alignToTop: i, forceScroll: e, viewportOffset: t = 20, ancestorOffset: n = 20 } = {}) {
    const r = this.document.selection.getFirstRange();
    if (!r) return;
    const s = Kt({ alignToTop: i, forceScroll: e, viewportOffset: t, ancestorOffset: n });
    typeof t == "number" && (t = { top: t, bottom: t, left: t, right: t });
    const a = { target: this.domConverter.viewRangeToDom(r), viewportOffset: t, ancestorOffset: n, alignToTop: i, forceScroll: e };
    this.fire("scrollToTheSelection", a, s), z2(a);
  }
  focus() {
    if (!this.document.isFocused) {
      const i = this.document.selection.editableElement;
      i && (this.domConverter.focus(i), this.forceRender());
    }
  }
  change(i) {
    if (this.isRenderingInProgress || this._postFixersInProgress) throw new v("cannot-change-view-tree", this);
    try {
      if (this._ongoingChange) return i(this._writer);
      this._ongoingChange = !0;
      const e = i(this._writer);
      return this._ongoingChange = !1, !this._renderingDisabled && this._hasChangedSinceTheLastRendering && (this._postFixersInProgress = !0, this.document._callPostFixers(this._writer), this._postFixersInProgress = !1, this.fire("render")), e;
    } catch (e) {
      v.rethrowUnexpectedError(e, this);
    }
  }
  forceRender() {
    this._hasChangedSinceTheLastRendering = !0, this.getObserver(Ta).flush(), this.change(() => {
    });
  }
  destroy() {
    for (const i of this._observers.values()) i.destroy();
    this.document.destroy(), this.stopListening();
  }
  createPositionAt(i, e) {
    return R._createAt(i, e);
  }
  createPositionAfter(i) {
    return R._createAfter(i);
  }
  createPositionBefore(i) {
    return R._createBefore(i);
  }
  createRange(i, e) {
    return new se(i, e);
  }
  createRangeOn(i) {
    return se._createOn(i);
  }
  createRangeIn(i) {
    return se._createIn(i);
  }
  createSelection(...i) {
    return new nn(...i);
  }
  _disableRendering(i) {
    this._renderingDisabled = i, i == 0 && this.change(() => {
    });
  }
  _render() {
    this.isRenderingInProgress = !0, this.disableObservers(), this._renderer.render(), this.enableObservers(), this.isRenderingInProgress = !1;
  }
};
class Rn {
  is() {
    throw new Error("is() method is abstract");
  }
}
class bi extends Rn {
  constructor(e, t, n) {
    super();
    m(this, "textNode");
    m(this, "data");
    m(this, "offsetInText");
    if (this.textNode = e, t < 0 || t > e.offsetSize) throw new v("model-textproxy-wrong-offsetintext", this);
    if (n < 0 || t + n > e.offsetSize) throw new v("model-textproxy-wrong-length", this);
    this.data = e.data.substring(t, t + n), this.offsetInText = t;
  }
  get startOffset() {
    return this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null;
  }
  get offsetSize() {
    return this.data.length;
  }
  get endOffset() {
    return this.startOffset !== null ? this.startOffset + this.offsetSize : null;
  }
  get isPartial() {
    return this.offsetSize !== this.textNode.offsetSize;
  }
  get parent() {
    return this.textNode.parent;
  }
  get root() {
    return this.textNode.root;
  }
  getPath() {
    const e = this.textNode.getPath();
    return e.length > 0 && (e[e.length - 1] += this.offsetInText), e;
  }
  getAncestors(e = {}) {
    const t = [];
    let n = e.includeSelf ? this : this.parent;
    for (; n; ) t[e.parentFirst ? "push" : "unshift"](n), n = n.parent;
    return t;
  }
  hasAttribute(e) {
    return this.textNode.hasAttribute(e);
  }
  getAttribute(e) {
    return this.textNode.getAttribute(e);
  }
  getAttributes() {
    return this.textNode.getAttributes();
  }
  getAttributeKeys() {
    return this.textNode.getAttributeKeys();
  }
}
bi.prototype.is = function(o) {
  return o === "$textProxy" || o === "model:$textProxy" || o === "textProxy" || o === "model:textProxy";
};
class Ji {
  constructor(i) {
    m(this, "direction");
    m(this, "boundaries");
    m(this, "singleCharacters");
    m(this, "shallow");
    m(this, "ignoreElementEnd");
    m(this, "_position");
    m(this, "_boundaryStartParent");
    m(this, "_boundaryEndParent");
    m(this, "_visitedParent");
    if (!i || !i.boundaries && !i.startPosition) throw new v("model-tree-walker-no-start-position", null);
    const e = i.direction || "forward";
    if (e != "forward" && e != "backward") throw new v("model-tree-walker-unknown-direction", i, { direction: e });
    this.direction = e, this.boundaries = i.boundaries || null, i.startPosition ? this._position = i.startPosition.clone() : this._position = I._createAt(this.boundaries[this.direction == "backward" ? "end" : "start"]), this.position.stickiness = "toNone", this.singleCharacters = !!i.singleCharacters, this.shallow = !!i.shallow, this.ignoreElementEnd = !!i.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null, this._visitedParent = this.position.parent;
  }
  [Symbol.iterator]() {
    return this;
  }
  get position() {
    return this._position;
  }
  skip(i) {
    let e, t, n, r;
    do
      n = this.position, r = this._visitedParent, { done: e, value: t } = this.next();
    while (!e && i(t));
    e || (this._position = n, this._visitedParent = r);
  }
  jumpTo(i) {
    this._boundaryStartParent && i.isBefore(this.boundaries.start) ? i = this.boundaries.start : this._boundaryEndParent && i.isAfter(this.boundaries.end) && (i = this.boundaries.end), this._position = i.clone(), this._visitedParent = i.parent;
  }
  next() {
    return this.direction == "forward" ? this._next() : this._previous();
  }
  _next() {
    const i = this.position, e = this.position.clone(), t = this._visitedParent;
    if (t.parent === null && e.offset === t.maxOffset) return { done: !0, value: void 0 };
    if (t === this._boundaryEndParent && e.offset == this.boundaries.end.offset) return { done: !0, value: void 0 };
    const n = $r(e, t), r = n || Yk(e, t, n);
    if (r && r.is("model:element")) {
      if (this.shallow) {
        if (this.boundaries && this.boundaries.end.isBefore(e)) return { done: !0, value: void 0 };
        e.offset++;
      } else e.path.push(0), this._visitedParent = r;
      return this._position = e, $n("elementStart", r, i, e, 1);
    }
    if (r && r.is("model:$text")) {
      let s;
      if (this.singleCharacters) s = 1;
      else {
        let c = r.endOffset;
        this._boundaryEndParent == t && this.boundaries.end.offset < c && (c = this.boundaries.end.offset), s = c - e.offset;
      }
      const a = e.offset - r.startOffset, l = new bi(r, a, s);
      return e.offset += s, this._position = e, $n("text", l, i, e, s);
    }
    return e.path.pop(), e.offset++, this._position = e, this._visitedParent = t.parent, this.ignoreElementEnd ? this._next() : $n("elementEnd", t, i, e);
  }
  _previous() {
    const i = this.position, e = this.position.clone(), t = this._visitedParent;
    if (t.parent === null && e.offset === 0) return { done: !0, value: void 0 };
    if (t == this._boundaryStartParent && e.offset == this.boundaries.start.offset) return { done: !0, value: void 0 };
    const n = e.parent, r = $r(e, n), s = r || Qk(e, n, r);
    if (s && s.is("model:element")) return e.offset--, this.shallow ? (this._position = e, $n("elementStart", s, i, e, 1)) : (e.path.push(s.maxOffset), this._position = e, this._visitedParent = s, this.ignoreElementEnd ? this._previous() : $n("elementEnd", s, i, e));
    if (s && s.is("model:$text")) {
      let a;
      if (this.singleCharacters) a = 1;
      else {
        let d = s.startOffset;
        this._boundaryStartParent == t && this.boundaries.start.offset > d && (d = this.boundaries.start.offset), a = e.offset - d;
      }
      const l = e.offset - s.startOffset, c = new bi(s, l - a, a);
      return e.offset -= a, this._position = e, $n("text", c, i, e, a);
    }
    return e.path.pop(), this._position = e, this._visitedParent = t.parent, $n("elementStart", t, i, e, 1);
  }
}
function $n(o, i, e, t, n) {
  return { done: !1, value: { type: o, item: i, previousPosition: e, nextPosition: t, length: n } };
}
class I extends Rn {
  constructor(e, t, n = "toNone") {
    super();
    m(this, "root");
    m(this, "path");
    m(this, "stickiness");
    if (!e.is("element") && !e.is("documentFragment")) throw new v("model-position-root-invalid", e);
    if (!Array.isArray(t) || t.length === 0) throw new v("model-position-path-incorrect-format", e, { path: t });
    e.is("rootElement") ? t = t.slice() : (t = [...e.getPath(), ...t], e = e.root), this.root = e, this.path = t, this.stickiness = n;
  }
  get offset() {
    return this.path[this.path.length - 1];
  }
  set offset(e) {
    this.path[this.path.length - 1] = e;
  }
  get parent() {
    let e = this.root;
    for (let t = 0; t < this.path.length - 1; t++) if (e = e.getChildAtOffset(this.path[t]), !e) throw new v("model-position-path-incorrect", this, { position: this });
    if (e.is("$text")) throw new v("model-position-path-incorrect", this, { position: this });
    return e;
  }
  get index() {
    return this.parent.offsetToIndex(this.offset);
  }
  get textNode() {
    return $r(this, this.parent);
  }
  get nodeAfter() {
    const e = this.parent;
    return Yk(this, e, $r(this, e));
  }
  get nodeBefore() {
    const e = this.parent;
    return Qk(this, e, $r(this, e));
  }
  get isAtStart() {
    return this.offset === 0;
  }
  get isAtEnd() {
    return this.offset == this.parent.maxOffset;
  }
  isValid() {
    if (this.offset < 0) return !1;
    let e = this.root;
    for (let t = 0; t < this.path.length - 1; t++) if (e = e.getChildAtOffset(this.path[t]), !e) return !1;
    return this.offset <= e.maxOffset;
  }
  compareWith(e) {
    if (this.root != e.root) return "different";
    const t = At(this.path, e.path);
    switch (t) {
      case "same":
        return "same";
      case "prefix":
        return "before";
      case "extension":
        return "after";
      default:
        return this.path[t] < e.path[t] ? "before" : "after";
    }
  }
  getLastMatchingPosition(e, t = {}) {
    t.startPosition = this;
    const n = new Ji(t);
    return n.skip(e), n.position;
  }
  getParentPath() {
    return this.path.slice(0, -1);
  }
  getAncestors() {
    const e = this.parent;
    return e.is("documentFragment") ? [e] : e.getAncestors({ includeSelf: !0 });
  }
  findAncestor(e) {
    const t = this.parent;
    return t.is("element") ? t.findAncestor(e, { includeSelf: !0 }) : null;
  }
  getCommonPath(e) {
    if (this.root != e.root) return [];
    const t = At(this.path, e.path), n = typeof t == "string" ? Math.min(this.path.length, e.path.length) : t;
    return this.path.slice(0, n);
  }
  getCommonAncestor(e) {
    const t = this.getAncestors(), n = e.getAncestors();
    let r = 0;
    for (; t[r] == n[r] && t[r]; ) r++;
    return r === 0 ? null : t[r - 1];
  }
  getShiftedBy(e) {
    const t = this.clone(), n = t.offset + e;
    return t.offset = n < 0 ? 0 : n, t;
  }
  isAfter(e) {
    return this.compareWith(e) == "after";
  }
  isBefore(e) {
    return this.compareWith(e) == "before";
  }
  isEqual(e) {
    return this.compareWith(e) == "same";
  }
  isTouching(e) {
    if (this.root !== e.root) return !1;
    const t = Math.min(this.path.length, e.path.length);
    for (let n = 0; n < t; n++) {
      const r = this.path[n] - e.path[n];
      if (r < -1 || r > 1) return !1;
      if (r === 1) return om(e, this, n);
      if (r === -1) return om(this, e, n);
    }
    return this.path.length === e.path.length || (this.path.length > e.path.length ? od(this.path, t) : od(e.path, t));
  }
  hasSameParentAs(e) {
    return this.root !== e.root ? !1 : At(this.getParentPath(), e.getParentPath()) == "same";
  }
  getTransformedByOperation(e) {
    let t;
    switch (e.type) {
      case "insert":
        t = this._getTransformedByInsertOperation(e);
        break;
      case "move":
      case "remove":
      case "reinsert":
        t = this._getTransformedByMoveOperation(e);
        break;
      case "split":
        t = this._getTransformedBySplitOperation(e);
        break;
      case "merge":
        t = this._getTransformedByMergeOperation(e);
        break;
      default:
        t = I._createAt(this);
    }
    return t;
  }
  _getTransformedByInsertOperation(e) {
    return this._getTransformedByInsertion(e.position, e.howMany);
  }
  _getTransformedByMoveOperation(e) {
    return this._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany);
  }
  _getTransformedBySplitOperation(e) {
    const t = e.movedRange;
    return t.containsPosition(this) || t.start.isEqual(this) && this.stickiness == "toNext" ? this._getCombined(e.splitPosition, e.moveTargetPosition) : e.graveyardPosition ? this._getTransformedByMove(e.graveyardPosition, e.insertionPosition, 1) : this._getTransformedByInsertion(e.insertionPosition, 1);
  }
  _getTransformedByMergeOperation(e) {
    const t = e.movedRange;
    let n;
    return t.containsPosition(this) || t.start.isEqual(this) ? (n = this._getCombined(e.sourcePosition, e.targetPosition), e.sourcePosition.isBefore(e.targetPosition) && (n = n._getTransformedByDeletion(e.deletionPosition, 1))) : n = this.isEqual(e.deletionPosition) ? I._createAt(e.deletionPosition) : this._getTransformedByMove(e.deletionPosition, e.graveyardPosition, 1), n;
  }
  _getTransformedByDeletion(e, t) {
    const n = I._createAt(this);
    if (this.root != e.root) return n;
    if (At(e.getParentPath(), this.getParentPath()) == "same") {
      if (e.offset < this.offset) {
        if (e.offset + t > this.offset) return null;
        n.offset -= t;
      }
    } else if (At(e.getParentPath(), this.getParentPath()) == "prefix") {
      const r = e.path.length - 1;
      if (e.offset <= this.path[r]) {
        if (e.offset + t > this.path[r]) return null;
        n.path[r] -= t;
      }
    }
    return n;
  }
  _getTransformedByInsertion(e, t) {
    const n = I._createAt(this);
    if (this.root != e.root) return n;
    if (At(e.getParentPath(), this.getParentPath()) == "same") (e.offset < this.offset || e.offset == this.offset && this.stickiness != "toPrevious") && (n.offset += t);
    else if (At(e.getParentPath(), this.getParentPath()) == "prefix") {
      const r = e.path.length - 1;
      e.offset <= this.path[r] && (n.path[r] += t);
    }
    return n;
  }
  _getTransformedByMove(e, t, n) {
    if (t = t._getTransformedByDeletion(e, n), e.isEqual(t)) return I._createAt(this);
    const r = this._getTransformedByDeletion(e, n);
    return r === null || e.isEqual(this) && this.stickiness == "toNext" || e.getShiftedBy(n).isEqual(this) && this.stickiness == "toPrevious" ? this._getCombined(e, t) : r._getTransformedByInsertion(t, n);
  }
  _getCombined(e, t) {
    const n = e.path.length - 1, r = I._createAt(t);
    return r.stickiness = this.stickiness, r.offset = r.offset + this.path[n] - e.offset, r.path = [...r.path, ...this.path.slice(n + 1)], r;
  }
  toJSON() {
    return { root: this.root.toJSON(), path: Array.from(this.path), stickiness: this.stickiness };
  }
  clone() {
    return new this.constructor(this.root, this.path, this.stickiness);
  }
  static _createAt(e, t, n = "toNone") {
    if (e.is("model:position")) return new I(e.root, e.path, e.stickiness);
    {
      const r = e;
      if (t == "end") t = r.maxOffset;
      else {
        if (t == "before") return this._createBefore(r, n);
        if (t == "after") return this._createAfter(r, n);
        if (t !== 0 && !t) throw new v("model-createpositionat-offset-required", [this, e]);
      }
      if (!r.is("element") && !r.is("documentFragment")) throw new v("model-position-parent-incorrect", [this, e]);
      const s = r.getPath();
      return s.push(t), new this(r.root, s, n);
    }
  }
  static _createAfter(e, t) {
    if (!e.parent) throw new v("model-position-after-root", [this, e], { root: e });
    return this._createAt(e.parent, e.endOffset, t);
  }
  static _createBefore(e, t) {
    if (!e.parent) throw new v("model-position-before-root", e, { root: e });
    return this._createAt(e.parent, e.startOffset, t);
  }
  static fromJSON(e, t) {
    if (e.root === "$graveyard") {
      const n = new I(t.graveyard, e.path);
      return n.stickiness = e.stickiness, n;
    }
    if (!t.getRoot(e.root)) throw new v("model-position-fromjson-no-root", t, { rootName: e.root });
    return new I(t.getRoot(e.root), e.path, e.stickiness);
  }
}
function $r(o, i) {
  const e = i.getChildAtOffset(o.offset);
  return e && e.is("$text") && e.startOffset < o.offset ? e : null;
}
function Yk(o, i, e) {
  return e !== null ? null : i.getChildAtOffset(o.offset);
}
function Qk(o, i, e) {
  return e !== null ? null : i.getChild(i.offsetToIndex(o.offset) - 1);
}
function om(o, i, e) {
  return e + 1 !== o.path.length && !!od(i.path, e + 1) && !!function(t, n) {
    let r = t.parent, s = t.path.length - 1, a = 0;
    for (; s >= n; ) {
      if (t.path[s] + a !== r.maxOffset) return !1;
      a = 1, s--, r = r.parent;
    }
    return !0;
  }(o, e + 1);
}
function od(o, i) {
  for (; i < o.length; ) {
    if (o[i] !== 0) return !1;
    i++;
  }
  return !0;
}
I.prototype.is = function(o) {
  return o === "position" || o === "model:position";
};
class T extends Rn {
  constructor(e, t) {
    super();
    m(this, "start");
    m(this, "end");
    this.start = I._createAt(e), this.end = t ? I._createAt(t) : I._createAt(e), this.start.stickiness = this.isCollapsed ? "toNone" : "toNext", this.end.stickiness = this.isCollapsed ? "toNone" : "toPrevious";
  }
  *[Symbol.iterator]() {
    yield* new Ji({ boundaries: this, ignoreElementEnd: !0 });
  }
  get isCollapsed() {
    return this.start.isEqual(this.end);
  }
  get isFlat() {
    return At(this.start.getParentPath(), this.end.getParentPath()) == "same";
  }
  get root() {
    return this.start.root;
  }
  containsPosition(e) {
    return e.isAfter(this.start) && e.isBefore(this.end);
  }
  containsRange(e, t = !1) {
    e.isCollapsed && (t = !1);
    const n = this.containsPosition(e.start) || t && this.start.isEqual(e.start), r = this.containsPosition(e.end) || t && this.end.isEqual(e.end);
    return n && r;
  }
  containsItem(e) {
    const t = I._createBefore(e);
    return this.containsPosition(t) || this.start.isEqual(t);
  }
  isEqual(e) {
    return this.start.isEqual(e.start) && this.end.isEqual(e.end);
  }
  isIntersecting(e) {
    return this.start.isBefore(e.end) && this.end.isAfter(e.start);
  }
  getDifference(e) {
    const t = [];
    return this.isIntersecting(e) ? (this.containsPosition(e.start) && t.push(new T(this.start, e.start)), this.containsPosition(e.end) && t.push(new T(e.end, this.end))) : t.push(new T(this.start, this.end)), t;
  }
  getIntersection(e) {
    if (this.isIntersecting(e)) {
      let t = this.start, n = this.end;
      return this.containsPosition(e.start) && (t = e.start), this.containsPosition(e.end) && (n = e.end), new T(t, n);
    }
    return null;
  }
  getJoined(e, t = !1) {
    let n = this.isIntersecting(e);
    if (n || (n = this.start.isBefore(e.start) ? t ? this.end.isTouching(e.start) : this.end.isEqual(e.start) : t ? e.end.isTouching(this.start) : e.end.isEqual(this.start)), !n) return null;
    let r = this.start, s = this.end;
    return e.start.isBefore(r) && (r = e.start), e.end.isAfter(s) && (s = e.end), new T(r, s);
  }
  getMinimalFlatRanges() {
    const e = [], t = this.start.getCommonPath(this.end).length, n = I._createAt(this.start);
    let r = n.parent;
    for (; n.path.length > t + 1; ) {
      const s = r.maxOffset - n.offset;
      s !== 0 && e.push(new T(n, n.getShiftedBy(s))), n.path = n.path.slice(0, -1), n.offset++, r = r.parent;
    }
    for (; n.path.length <= this.end.path.length; ) {
      const s = this.end.path[n.path.length - 1], a = s - n.offset;
      a !== 0 && e.push(new T(n, n.getShiftedBy(a))), n.offset = s, n.path.push(0);
    }
    return e;
  }
  getWalker(e = {}) {
    return e.boundaries = this, new Ji(e);
  }
  *getItems(e = {}) {
    e.boundaries = this, e.ignoreElementEnd = !0;
    const t = new Ji(e);
    for (const n of t) yield n.item;
  }
  *getPositions(e = {}) {
    e.boundaries = this;
    const t = new Ji(e);
    yield t.position;
    for (const n of t) yield n.nextPosition;
  }
  getTransformedByOperation(e) {
    switch (e.type) {
      case "insert":
        return this._getTransformedByInsertOperation(e);
      case "move":
      case "remove":
      case "reinsert":
        return this._getTransformedByMoveOperation(e);
      case "split":
        return [this._getTransformedBySplitOperation(e)];
      case "merge":
        return [this._getTransformedByMergeOperation(e)];
    }
    return [new T(this.start, this.end)];
  }
  getTransformedByOperations(e) {
    const t = [new T(this.start, this.end)];
    for (const n of e) for (let r = 0; r < t.length; r++) {
      const s = t[r].getTransformedByOperation(n);
      t.splice(r, 1, ...s), r += s.length - 1;
    }
    for (let n = 0; n < t.length; n++) {
      const r = t[n];
      for (let s = n + 1; s < t.length; s++) {
        const a = t[s];
        (r.containsRange(a) || a.containsRange(r) || r.isEqual(a)) && t.splice(s, 1);
      }
    }
    return t;
  }
  getCommonAncestor() {
    return this.start.getCommonAncestor(this.end);
  }
  getContainedElement() {
    if (this.isCollapsed) return null;
    const e = this.start.nodeAfter, t = this.end.nodeBefore;
    return e && e.is("element") && e === t ? e : null;
  }
  toJSON() {
    return { start: this.start.toJSON(), end: this.end.toJSON() };
  }
  clone() {
    return new this.constructor(this.start, this.end);
  }
  _getTransformedByInsertOperation(e, t = !1) {
    return this._getTransformedByInsertion(e.position, e.howMany, t);
  }
  _getTransformedByMoveOperation(e, t = !1) {
    const n = e.sourcePosition, r = e.howMany, s = e.targetPosition;
    return this._getTransformedByMove(n, s, r, t);
  }
  _getTransformedBySplitOperation(e) {
    const t = this.start._getTransformedBySplitOperation(e);
    let n = this.end._getTransformedBySplitOperation(e);
    return this.end.isEqual(e.insertionPosition) && (n = this.end.getShiftedBy(1)), t.root != n.root && (n = this.end.getShiftedBy(-1)), new T(t, n);
  }
  _getTransformedByMergeOperation(e) {
    if (this.start.isEqual(e.targetPosition) && this.end.isEqual(e.deletionPosition)) return new T(this.start);
    let t = this.start._getTransformedByMergeOperation(e), n = this.end._getTransformedByMergeOperation(e);
    return t.root != n.root && (n = this.end.getShiftedBy(-1)), t.isAfter(n) ? (e.sourcePosition.isBefore(e.targetPosition) ? (t = I._createAt(n), t.offset = 0) : (e.deletionPosition.isEqual(t) || (n = e.deletionPosition), t = e.targetPosition), new T(t, n)) : new T(t, n);
  }
  _getTransformedByInsertion(e, t, n = !1) {
    if (n && this.containsPosition(e)) return [new T(this.start, e), new T(e.getShiftedBy(t), this.end._getTransformedByInsertion(e, t))];
    {
      const r = new T(this.start, this.end);
      return r.start = r.start._getTransformedByInsertion(e, t), r.end = r.end._getTransformedByInsertion(e, t), [r];
    }
  }
  _getTransformedByMove(e, t, n, r = !1) {
    if (this.isCollapsed) {
      const h = this.start._getTransformedByMove(e, t, n);
      return [new T(h)];
    }
    const s = T._createFromPositionAndShift(e, n), a = t._getTransformedByDeletion(e, n);
    if (this.containsPosition(t) && !r && (s.containsPosition(this.start) || s.containsPosition(this.end))) {
      const h = this.start._getTransformedByMove(e, t, n), g = this.end._getTransformedByMove(e, t, n);
      return [new T(h, g)];
    }
    let l;
    const c = this.getDifference(s);
    let d = null;
    const u = this.getIntersection(s);
    if (c.length == 1 ? d = new T(c[0].start._getTransformedByDeletion(e, n), c[0].end._getTransformedByDeletion(e, n)) : c.length == 2 && (d = new T(this.start, this.end._getTransformedByDeletion(e, n))), l = d ? d._getTransformedByInsertion(a, n, u !== null || r) : [], u) {
      const h = new T(u.start._getCombined(s.start, a), u.end._getCombined(s.start, a));
      l.length == 2 ? l.splice(1, 0, h) : l.push(h);
    }
    return l;
  }
  _getTransformedByDeletion(e, t) {
    let n = this.start._getTransformedByDeletion(e, t), r = this.end._getTransformedByDeletion(e, t);
    return n == null && r == null ? null : (n == null && (n = e), r == null && (r = e), new T(n, r));
  }
  static _createFromPositionAndShift(e, t) {
    const n = e, r = e.getShiftedBy(t);
    return t > 0 ? new this(n, r) : new this(r, n);
  }
  static _createIn(e) {
    return new this(I._createAt(e, 0), I._createAt(e, e.maxOffset));
  }
  static _createOn(e) {
    return this._createFromPositionAndShift(I._createBefore(e), e.offsetSize);
  }
  static _createFromRanges(e) {
    if (e.length === 0) throw new v("range-create-from-ranges-empty-array", null);
    if (e.length == 1) return e[0].clone();
    const t = e[0];
    e.sort((s, a) => s.start.isAfter(a.start) ? 1 : -1);
    const n = e.indexOf(t), r = new this(t.start, t.end);
    for (let s = n - 1; s >= 0 && e[s].end.isEqual(r.start); s--) r.start = I._createAt(e[s].start);
    for (let s = n + 1; s < e.length && e[s].start.isEqual(r.end); s++) r.end = I._createAt(e[s].end);
    return r;
  }
  static fromJSON(e, t) {
    return new this(I.fromJSON(e.start, t), I.fromJSON(e.end, t));
  }
}
T.prototype.is = function(o) {
  return o === "range" || o === "model:range";
};
class Jk extends Ae() {
  constructor() {
    super();
    m(this, "_modelToViewMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_viewToModelMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_viewToModelLengthCallbacks", /* @__PURE__ */ new Map());
    m(this, "_markerNameToElements", /* @__PURE__ */ new Map());
    m(this, "_elementToMarkerNames", /* @__PURE__ */ new Map());
    m(this, "_deferredBindingRemovals", /* @__PURE__ */ new Map());
    m(this, "_unboundMarkerNames", /* @__PURE__ */ new Set());
    m(this, "_cache", new Vx());
    this.on("modelToViewPosition", (e, t) => {
      if (t.viewPosition) return;
      const n = this._modelToViewMapping.get(t.modelPosition.parent);
      if (!n) throw new v("mapping-model-position-view-parent-not-found", this, { modelPosition: t.modelPosition });
      t.viewPosition = this.findPositionIn(n, t.modelPosition.offset);
    }, { priority: "low" }), this.on("viewToModelPosition", (e, t) => {
      if (t.modelPosition) return;
      const n = this.findMappedViewAncestor(t.viewPosition), r = this._viewToModelMapping.get(n), s = this._toModelOffset(t.viewPosition.parent, t.viewPosition.offset, n);
      t.modelPosition = I._createAt(r, s);
    }, { priority: "low" });
  }
  bindElements(e, t) {
    this._modelToViewMapping.set(e, t), this._viewToModelMapping.set(t, e);
  }
  unbindViewElement(e, t = {}) {
    const n = this.toModelElement(e);
    if (this._elementToMarkerNames.has(e)) for (const r of this._elementToMarkerNames.get(e)) this._unboundMarkerNames.add(r);
    t.defer ? this._deferredBindingRemovals.set(e, e.root) : (this._viewToModelMapping.delete(e) && this._cache.stopTracking(e), this._modelToViewMapping.get(n) == e && this._modelToViewMapping.delete(n));
  }
  unbindModelElement(e) {
    const t = this.toViewElement(e);
    this._modelToViewMapping.delete(e), this._viewToModelMapping.get(t) == e && this._viewToModelMapping.delete(t) && this._cache.stopTracking(t);
  }
  bindElementToMarker(e, t) {
    const n = this._markerNameToElements.get(t) || /* @__PURE__ */ new Set();
    n.add(e);
    const r = this._elementToMarkerNames.get(e) || /* @__PURE__ */ new Set();
    r.add(t), this._markerNameToElements.set(t, n), this._elementToMarkerNames.set(e, r);
  }
  unbindElementFromMarkerName(e, t) {
    const n = this._markerNameToElements.get(t);
    n && (n.delete(e), n.size == 0 && this._markerNameToElements.delete(t));
    const r = this._elementToMarkerNames.get(e);
    r && (r.delete(t), r.size == 0 && this._elementToMarkerNames.delete(e));
  }
  flushUnboundMarkerNames() {
    const e = Array.from(this._unboundMarkerNames);
    return this._unboundMarkerNames.clear(), e;
  }
  flushDeferredBindings() {
    for (const [e, t] of this._deferredBindingRemovals) e.root == t && this.unbindViewElement(e);
    this._deferredBindingRemovals = /* @__PURE__ */ new Map();
  }
  clearBindings() {
    this._modelToViewMapping = /* @__PURE__ */ new WeakMap(), this._viewToModelMapping = /* @__PURE__ */ new WeakMap(), this._markerNameToElements = /* @__PURE__ */ new Map(), this._elementToMarkerNames = /* @__PURE__ */ new Map(), this._unboundMarkerNames = /* @__PURE__ */ new Set(), this._deferredBindingRemovals = /* @__PURE__ */ new Map();
  }
  toModelElement(e) {
    return this._viewToModelMapping.get(e);
  }
  toViewElement(e) {
    return this._modelToViewMapping.get(e);
  }
  toModelRange(e) {
    return new T(this.toModelPosition(e.start), this.toModelPosition(e.end));
  }
  toViewRange(e) {
    return new se(this.toViewPosition(e.start), this.toViewPosition(e.end));
  }
  toModelPosition(e) {
    const t = { viewPosition: e, mapper: this };
    return this.fire("viewToModelPosition", t), t.modelPosition;
  }
  toViewPosition(e, t = {}) {
    const n = { modelPosition: e, mapper: this, isPhantom: t.isPhantom };
    return this.fire("modelToViewPosition", n), n.viewPosition;
  }
  markerNameToElements(e) {
    const t = this._markerNameToElements.get(e);
    if (!t) return null;
    const n = /* @__PURE__ */ new Set();
    for (const r of t) if (r.is("attributeElement")) for (const s of r.getElementsWithSameId()) n.add(s);
    else n.add(r);
    return n;
  }
  registerViewToModelLength(e, t) {
    this._viewToModelLengthCallbacks.set(e, t);
  }
  findMappedViewAncestor(e) {
    let t = e.parent;
    for (; !this._viewToModelMapping.has(t); ) t = t.parent;
    return t;
  }
  _toModelOffset(e, t, n) {
    if (n != e)
      return this._toModelOffset(e.parent, e.index, n) + this._toModelOffset(e, t, e);
    if (e.is("$text")) return t;
    let r = 0;
    for (let s = 0; s < t; s++) r += this.getModelLength(e.getChild(s));
    return r;
  }
  getModelLength(e) {
    const t = [e];
    let n = 0;
    for (; t.length > 0; ) {
      const r = t.pop(), s = r.name && this._viewToModelLengthCallbacks.size > 0 && this._viewToModelLengthCallbacks.get(r.name);
      if (s) n += s(r);
      else if (this._viewToModelMapping.has(r)) n += 1;
      else if (r.is("$text")) n += r.data.length;
      else {
        if (r.is("uiElement")) continue;
        for (const a of r.getChildren()) t.push(a);
      }
    }
    return n;
  }
  findPositionIn(e, t) {
    if (t === 0) return this._moveViewPositionToTextNode(new R(e, 0));
    if (this._viewToModelLengthCallbacks.size == 0 && this._viewToModelMapping.has(e)) {
      const n = this._cache.getClosest(e, t);
      return this._findPositionStartingFrom(n.viewPosition, n.modelOffset, t, e, !0);
    }
    return this._findPositionStartingFrom(new R(e, 0), 0, t, e, !1);
  }
  _findPositionStartingFrom(e, t, n, r, s) {
    let a, l = e.parent, c = e.offset;
    if (l.is("$text")) return new R(l, n - t);
    let d = t, u = 0;
    for (; d < n; ) if (a = l.getChild(c), a) u = this.getModelLength(a), d += u, c++, s && this._cache.save(l, c, r, d);
    else {
      if (l == r) throw new v("mapping-model-offset-not-found", this, { modelOffset: n, viewContainer: r });
      c = l.parent.getChildIndex(l) + 1, l = l.parent;
    }
    return d == n ? this._moveViewPositionToTextNode(new R(l, c)) : this._findPositionStartingFrom(new R(a, 0), d - u, n, r, s);
  }
  _moveViewPositionToTextNode(e) {
    const t = e.nodeBefore, n = e.nodeAfter;
    return t && t.is("view:$text") ? new R(t, t.data.length) : n && n.is("view:$text") ? new R(n, 0) : e;
  }
}
class Vx extends Ae() {
  constructor() {
    super(...arguments);
    m(this, "_cachedMapping", /* @__PURE__ */ new WeakMap());
    m(this, "_nodeToCacheListIndex", /* @__PURE__ */ new WeakMap());
    m(this, "_invalidateOnChildrenChangeCallback", (e, t, n) => {
      this._clearCacheInsideParent(t, n.index);
    });
    m(this, "_invalidateOnTextChangeCallback", (e, t) => {
      this._clearCacheStartingBefore(t);
    });
  }
  save(e, t, n, r) {
    const s = this._cachedMapping.get(n), a = s.cacheMap.get(r);
    if (a) {
      const d = e.getChild(t - 1), u = a.viewPosition.nodeBefore ? this._nodeToCacheListIndex.get(a.viewPosition.nodeBefore) : 0;
      return void this._nodeToCacheListIndex.set(d, u);
    }
    const l = { viewPosition: new R(e, t), modelOffset: r };
    s.maxModelOffset = r > s.maxModelOffset ? r : s.maxModelOffset, s.cacheMap.set(r, l);
    let c = s.cacheList.length - 1;
    for (; c >= 0 && s.cacheList[c].modelOffset > r; ) c--;
    if (s.cacheList.splice(c + 1, 0, l), t > 0) {
      const d = e.getChild(t - 1);
      this._nodeToCacheListIndex.set(d, c + 1);
    }
  }
  getClosest(e, t) {
    const n = this._cachedMapping.get(e);
    let r;
    n ? t > n.maxModelOffset ? r = n.cacheList[n.cacheList.length - 1] : r = n.cacheMap.get(t) || this._findInCacheList(n.cacheList, t) : r = this.startTracking(e);
    const s = this._hoistViewPosition(r.viewPosition);
    return { modelOffset: r.modelOffset, viewPosition: s };
  }
  _hoistViewPosition(e) {
    for (; e.parent.parent && !this._cachedMapping.has(e.parent) && e.isAtEnd; ) {
      const t = e.parent.parent, n = t.getChildIndex(e.parent) + 1;
      e = new R(t, n);
    }
    return e;
  }
  startTracking(e) {
    const t = { viewPosition: new R(e, 0), modelOffset: 0 }, n = { maxModelOffset: 0, cacheList: [t], cacheMap: /* @__PURE__ */ new Map([[0, t]]) };
    return this._cachedMapping.set(e, n), e.on("change:children", this._invalidateOnChildrenChangeCallback), e.on("change:text", this._invalidateOnTextChangeCallback), t;
  }
  stopTracking(e) {
    e.off("change:children", this._invalidateOnChildrenChangeCallback), e.off("change:text", this._invalidateOnTextChangeCallback), this._cachedMapping.delete(e);
  }
  _clearCacheInsideParent(e, t) {
    if (t == 0) this._cachedMapping.has(e) ? this._clearCacheAll(e) : this._clearCacheStartingBefore(e);
    else {
      const n = e.getChild(t - 1);
      this._clearCacheStartingBefore(n);
    }
  }
  _clearCacheAll(e) {
    const t = this._cachedMapping.get(e);
    t.maxModelOffset > 0 && (t.maxModelOffset = 0, t.cacheList.length = 1, t.cacheMap.clear(), t.cacheMap.set(0, t.cacheList[0]));
  }
  _clearCacheStartingBefore(e) {
    const t = this._nodeToCacheListIndex.get(e);
    if (t === void 0) {
      const r = e.parent;
      return void (this._cachedMapping.has(r) || this._clearCacheStartingBefore(r));
    }
    let n = e.parent;
    for (; !this._cachedMapping.has(n); ) n = n.parent;
    this._clearCacheFromIndex(n, t);
  }
  _clearCacheFromIndex(e, t) {
    t === 0 && (t = 1);
    const n = this._cachedMapping.get(e), r = n.cacheList[t - 1];
    if (!r) return;
    n.maxModelOffset = r.modelOffset;
    const s = n.cacheList.splice(t);
    for (const a of s) {
      n.cacheMap.delete(a.modelOffset);
      const l = a.viewPosition.nodeBefore;
      this._nodeToCacheListIndex.delete(l);
    }
  }
  _findInCacheList(e, t) {
    let n = 0, r = e.length - 1, s = r - n >> 1, a = e[s];
    for (; n < r; ) a.modelOffset < t ? n = s + 1 : r = s - 1, s = n + (r - n >> 1), a = e[s];
    return a.modelOffset <= t ? a : e[s - 1];
  }
}
class Lx {
  constructor() {
    m(this, "_consumable", /* @__PURE__ */ new Map());
    m(this, "_textProxyRegistry", /* @__PURE__ */ new Map());
  }
  add(i, e) {
    e = zs(e), i instanceof bi && (i = this._getSymbolForTextProxy(i)), this._consumable.has(i) || this._consumable.set(i, /* @__PURE__ */ new Map()), this._consumable.get(i).set(e, !0);
  }
  consume(i, e) {
    return e = zs(e), i instanceof bi && (i = this._getSymbolForTextProxy(i)), !!this.test(i, e) && (this._consumable.get(i).set(e, !1), !0);
  }
  test(i, e) {
    e = zs(e), i instanceof bi && (i = this._getSymbolForTextProxy(i));
    const t = this._consumable.get(i);
    if (t === void 0) return null;
    const n = t.get(e);
    return n === void 0 ? null : n;
  }
  revert(i, e) {
    e = zs(e), i instanceof bi && (i = this._getSymbolForTextProxy(i));
    const t = this.test(i, e);
    return t === !1 ? (this._consumable.get(i).set(e, !0), !0) : t !== !0 && null;
  }
  verifyAllConsumed(i) {
    const e = [];
    for (const [t, n] of this._consumable) for (const [r, s] of n) {
      const a = r.split(":")[0];
      s && i == a && e.push({ event: r, item: t.name || t.description });
    }
    if (e.length) throw new v("conversion-model-consumable-not-consumed", null, { items: e });
  }
  _getSymbolForTextProxy(i) {
    let e = null;
    const t = this._textProxyRegistry.get(i.startOffset);
    if (t) {
      const n = t.get(i.endOffset);
      n && (e = n.get(i.parent));
    }
    return e || (e = this._addSymbolForTextProxy(i)), e;
  }
  _addSymbolForTextProxy(i) {
    const e = i.startOffset, t = i.endOffset, n = i.parent, r = Symbol("$textProxy:" + i.data);
    let s, a;
    return s = this._textProxyRegistry.get(e), s || (s = /* @__PURE__ */ new Map(), this._textProxyRegistry.set(e, s)), a = s.get(t), a || (a = /* @__PURE__ */ new Map(), s.set(t, a)), a.set(n, r), r;
  }
}
function zs(o) {
  const i = o.split(":");
  return i[0] == "insert" ? i[0] : i[0] == "addMarker" || i[0] == "removeMarker" ? o : i.length > 1 ? i[0] + ":" + i[1] : i[0];
}
class Xk extends Ae() {
  constructor(e) {
    super();
    m(this, "_conversionApi");
    m(this, "_firedEventsMap");
    this._conversionApi = { dispatcher: this, ...e }, this._firedEventsMap = /* @__PURE__ */ new WeakMap();
  }
  convertChanges(e, t, n) {
    const r = this._createConversionApi(n, e.getRefreshedItems());
    for (const a of e.getMarkersToRemove()) this._convertMarkerRemove(a.name, a.range, r);
    const s = this._reduceChanges(e.getChanges());
    for (const a of s) a.type === "insert" ? this._convertInsert(T._createFromPositionAndShift(a.position, a.length), r) : a.type === "reinsert" ? this._convertReinsert(T._createFromPositionAndShift(a.position, a.length), r) : a.type === "remove" ? this._convertRemove(a.position, a.length, a.name, r) : this._convertAttribute(a.range, a.attributeKey, a.attributeOldValue, a.attributeNewValue, r);
    r.mapper.flushDeferredBindings();
    for (const a of r.mapper.flushUnboundMarkerNames()) {
      const l = t.get(a).getRange();
      this._convertMarkerRemove(a, l, r), this._convertMarkerAdd(a, l, r);
    }
    for (const a of e.getMarkersToAdd()) this._convertMarkerAdd(a.name, a.range, r);
    r.consumable.verifyAllConsumed("insert");
  }
  convert(e, t, n, r = {}) {
    const s = this._createConversionApi(n, void 0, r);
    this._convertInsert(e, s);
    for (const [a, l] of t) this._convertMarkerAdd(a, l, s);
    s.consumable.verifyAllConsumed("insert");
  }
  convertSelection(e, t, n) {
    const r = this._createConversionApi(n);
    this.fire("cleanSelection", { selection: e }, r);
    const s = e.getFirstPosition().root;
    if (!r.mapper.toViewElement(s)) return;
    const a = Array.from(t.getMarkersAtPosition(e.getFirstPosition()));
    if (this._addConsumablesForSelection(r.consumable, e, a), this.fire("selection", { selection: e }, r), e.isCollapsed) {
      for (const l of a) if (r.consumable.test(e, "addMarker:" + l.name)) {
        const c = l.getRange();
        if (!Ox(e.getFirstPosition(), l, r.mapper)) continue;
        const d = { item: e, markerName: l.name, markerRange: c };
        this.fire(`addMarker:${l.name}`, d, r);
      }
      for (const l of e.getAttributeKeys()) if (r.consumable.test(e, "attribute:" + l)) {
        const c = { item: e, range: e.getFirstRange(), attributeKey: l, attributeOldValue: null, attributeNewValue: e.getAttribute(l) };
        this.fire(`attribute:${l}:$text`, c, r);
      }
    }
  }
  _convertInsert(e, t, n = {}) {
    n.doNotAddConsumables || this._addConsumablesForInsert(t.consumable, e);
    for (const r of e.getWalker({ shallow: !0 })) this._testAndFire("insert", rm(r), t);
  }
  _convertRemove(e, t, n, r) {
    this.fire(`remove:${n}`, { position: e, length: t }, r);
  }
  _convertAttribute(e, t, n, r, s) {
    this._addConsumablesForRange(s.consumable, e, `attribute:${t}`);
    for (const a of e) {
      const l = { item: a.item, range: T._createFromPositionAndShift(a.previousPosition, a.length), attributeKey: t, attributeOldValue: n, attributeNewValue: r };
      this._testAndFire(`attribute:${t}`, l, s);
    }
  }
  _convertReinsert(e, t) {
    const n = Array.from(e.getWalker({ shallow: !0 }));
    this._addConsumablesForInsert(t.consumable, n);
    for (const r of n.map(rm)) this._testAndFire("insert", { ...r, reconversion: !0 }, t);
  }
  _convertMarkerAdd(e, t, n) {
    if (t.root.rootName == "$graveyard") return;
    const r = `addMarker:${e}`;
    if (n.consumable.add(t, r), this.fire(r, { markerName: e, markerRange: t }, n), n.consumable.consume(t, r)) {
      this._addConsumablesForRange(n.consumable, t, r);
      for (const s of t.getItems()) {
        if (!n.consumable.test(s, r)) continue;
        const a = { item: s, range: T._createOn(s), markerName: e, markerRange: t };
        this.fire(r, a, n);
      }
    }
  }
  _convertMarkerRemove(e, t, n) {
    t.root.rootName != "$graveyard" && this.fire(`removeMarker:${e}`, { markerName: e, markerRange: t }, n);
  }
  _reduceChanges(e) {
    const t = { changes: e };
    return this.fire("reduceChanges", t), t.changes;
  }
  _addConsumablesForInsert(e, t) {
    for (const n of t) {
      const r = n.item;
      if (e.test(r, "insert") === null) {
        e.add(r, "insert");
        for (const s of r.getAttributeKeys()) e.add(r, "attribute:" + s);
      }
    }
    return e;
  }
  _addConsumablesForRange(e, t, n) {
    for (const r of t.getItems()) e.add(r, n);
    return e;
  }
  _addConsumablesForSelection(e, t, n) {
    e.add(t, "selection");
    for (const r of n) e.add(t, "addMarker:" + r.name);
    for (const r of t.getAttributeKeys()) e.add(t, "attribute:" + r);
    return e;
  }
  _testAndFire(e, t, n) {
    const r = function(c, d) {
      const u = d.item.is("element") ? d.item.name : "$text";
      return `${c}:${u}`;
    }(e, t), s = t.item.is("$textProxy") ? n.consumable._getSymbolForTextProxy(t.item) : t.item, a = this._firedEventsMap.get(n), l = a.get(s);
    if (l) {
      if (l.has(r)) return;
      l.add(r);
    } else a.set(s, /* @__PURE__ */ new Set([r]));
    this.fire(r, t, n);
  }
  _testAndFireAddAttributes(e, t) {
    const n = { item: e, range: T._createOn(e) };
    for (const r of n.item.getAttributeKeys()) n.attributeKey = r, n.attributeOldValue = null, n.attributeNewValue = n.item.getAttribute(r), this._testAndFire(`attribute:${r}`, n, t);
  }
  _createConversionApi(e, t = /* @__PURE__ */ new Set(), n = {}) {
    const r = { ...this._conversionApi, consumable: new Lx(), writer: e, options: n, convertItem: (s) => this._convertInsert(T._createOn(s), r), convertChildren: (s) => this._convertInsert(T._createIn(s), r, { doNotAddConsumables: !0 }), convertAttributes: (s) => this._testAndFireAddAttributes(s, r), canReuseView: (s) => !t.has(r.mapper.toModelElement(s)) };
    return this._firedEventsMap.set(r, /* @__PURE__ */ new Map()), r;
  }
}
function Ox(o, i, e) {
  const t = i.getRange(), n = Array.from(o.getAncestors());
  return n.shift(), n.reverse(), !n.some((r) => {
    if (t.containsItem(r))
      return !!e.toViewElement(r).getCustomProperty("addHighlight");
  });
}
function rm(o) {
  return { item: o.item, range: T._createFromPositionAndShift(o.previousPosition, o.length) };
}
let uo = class extends Rn {
  constructor(i) {
    super();
    m(this, "parent", null);
    m(this, "_attrs");
    m(this, "_index", null);
    m(this, "_startOffset", null);
    this._attrs = yi(i);
  }
  get document() {
    return null;
  }
  get index() {
    return this._index;
  }
  get startOffset() {
    return this._startOffset;
  }
  get offsetSize() {
    return 1;
  }
  get endOffset() {
    return this.startOffset === null ? null : this.startOffset + this.offsetSize;
  }
  get nextSibling() {
    const i = this.index;
    return i !== null && this.parent.getChild(i + 1) || null;
  }
  get previousSibling() {
    const i = this.index;
    return i !== null && this.parent.getChild(i - 1) || null;
  }
  get root() {
    let i = this;
    for (; i.parent; ) i = i.parent;
    return i;
  }
  isAttached() {
    return this.parent !== null && this.root.isAttached();
  }
  getPath() {
    const i = [];
    let e = this;
    for (; e.parent; ) i.unshift(e.startOffset), e = e.parent;
    return i;
  }
  getAncestors(i = {}) {
    const e = [];
    let t = i.includeSelf ? this : this.parent;
    for (; t; ) e[i.parentFirst ? "push" : "unshift"](t), t = t.parent;
    return e;
  }
  getCommonAncestor(i, e = {}) {
    const t = this.getAncestors(e), n = i.getAncestors(e);
    let r = 0;
    for (; t[r] == n[r] && t[r]; ) r++;
    return r === 0 ? null : t[r - 1];
  }
  isBefore(i) {
    if (this == i || this.root !== i.root) return !1;
    const e = this.getPath(), t = i.getPath(), n = At(e, t);
    switch (n) {
      case "prefix":
        return !0;
      case "extension":
        return !1;
      default:
        return e[n] < t[n];
    }
  }
  isAfter(i) {
    return this != i && this.root === i.root && !this.isBefore(i);
  }
  hasAttribute(i) {
    return this._attrs.has(i);
  }
  getAttribute(i) {
    return this._attrs.get(i);
  }
  getAttributes() {
    return this._attrs.entries();
  }
  getAttributeKeys() {
    return this._attrs.keys();
  }
  toJSON() {
    const i = {};
    return this._attrs.size && (i.attributes = Array.from(this._attrs).reduce((e, t) => (e[t[0]] = t[1], e), {})), i;
  }
  _clone(i) {
    return new this.constructor(this._attrs);
  }
  _remove() {
    this.parent._removeChildren(this.index);
  }
  _setAttribute(i, e) {
    this._attrs.set(i, e);
  }
  _setAttributesTo(i) {
    this._attrs = yi(i);
  }
  _removeAttribute(i) {
    return this._attrs.delete(i);
  }
  _clearAttributes() {
    this._attrs.clear();
  }
};
uo.prototype.is = function(o) {
  return o === "node" || o === "model:node";
};
class Gt extends Ae(Rn) {
  constructor(...e) {
    super();
    m(this, "_lastRangeBackward", !1);
    m(this, "_attrs", /* @__PURE__ */ new Map());
    m(this, "_ranges", []);
    e.length && this.setTo(...e);
  }
  get anchor() {
    if (this._ranges.length > 0) {
      const e = this._ranges[this._ranges.length - 1];
      return this._lastRangeBackward ? e.end : e.start;
    }
    return null;
  }
  get focus() {
    if (this._ranges.length > 0) {
      const e = this._ranges[this._ranges.length - 1];
      return this._lastRangeBackward ? e.start : e.end;
    }
    return null;
  }
  get isCollapsed() {
    return this._ranges.length === 1 && this._ranges[0].isCollapsed;
  }
  get rangeCount() {
    return this._ranges.length;
  }
  get isBackward() {
    return !this.isCollapsed && this._lastRangeBackward;
  }
  isEqual(e) {
    if (this.rangeCount != e.rangeCount) return !1;
    if (this.rangeCount === 0) return !0;
    if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) return !1;
    for (const t of this._ranges) {
      let n = !1;
      for (const r of e._ranges) if (t.isEqual(r)) {
        n = !0;
        break;
      }
      if (!n) return !1;
    }
    return !0;
  }
  *getRanges() {
    for (const e of this._ranges) yield new T(e.start, e.end);
  }
  getFirstRange() {
    let e = null;
    for (const t of this._ranges) e && !t.start.isBefore(e.start) || (e = t);
    return e ? new T(e.start, e.end) : null;
  }
  getLastRange() {
    let e = null;
    for (const t of this._ranges) e && !t.end.isAfter(e.end) || (e = t);
    return e ? new T(e.start, e.end) : null;
  }
  getFirstPosition() {
    const e = this.getFirstRange();
    return e ? e.start.clone() : null;
  }
  getLastPosition() {
    const e = this.getLastRange();
    return e ? e.end.clone() : null;
  }
  setTo(...e) {
    let [t, n, r] = e;
    if (typeof n == "object" && (r = n, n = void 0), t === null) this._setRanges([]);
    else if (t instanceof Gt) this._setRanges(t.getRanges(), t.isBackward);
    else if (t && typeof t.getRanges == "function") this._setRanges(t.getRanges(), t.isBackward);
    else if (t instanceof T) this._setRanges([t], !!r && !!r.backward);
    else if (t instanceof I) this._setRanges([new T(t)]);
    else if (t instanceof uo) {
      const s = !!r && !!r.backward;
      let a;
      if (n == "in") a = T._createIn(t);
      else if (n == "on") a = T._createOn(t);
      else {
        if (n === void 0) throw new v("model-selection-setto-required-second-parameter", [this, t]);
        a = new T(I._createAt(t, n));
      }
      this._setRanges([a], s);
    } else {
      if (!Qt(t)) throw new v("model-selection-setto-not-selectable", [this, t]);
      this._setRanges(t, r && !!r.backward);
    }
  }
  _setRanges(e, t = !1) {
    const n = Array.from(e), r = n.some((s) => {
      if (!(s instanceof T)) throw new v("model-selection-set-ranges-not-range", [this, e]);
      return this._ranges.every((a) => !a.isEqual(s));
    });
    (n.length !== this._ranges.length || r) && (this._replaceAllRanges(n), this._lastRangeBackward = !!t, this.fire("change:range", { directChange: !0 }));
  }
  setFocus(e, t) {
    if (this.anchor === null) throw new v("model-selection-setfocus-no-ranges", [this, e]);
    const n = I._createAt(e, t);
    if (n.compareWith(this.focus) == "same") return;
    const r = this.anchor;
    this._ranges.length && this._popRange(), n.compareWith(r) == "before" ? (this._pushRange(new T(n, r)), this._lastRangeBackward = !0) : (this._pushRange(new T(r, n)), this._lastRangeBackward = !1), this.fire("change:range", { directChange: !0 });
  }
  getAttribute(e) {
    return this._attrs.get(e);
  }
  getAttributes() {
    return this._attrs.entries();
  }
  getAttributeKeys() {
    return this._attrs.keys();
  }
  hasAttribute(e) {
    return this._attrs.has(e);
  }
  removeAttribute(e) {
    this.hasAttribute(e) && (this._attrs.delete(e), this.fire("change:attribute", { attributeKeys: [e], directChange: !0 }));
  }
  setAttribute(e, t) {
    this.getAttribute(e) !== t && (this._attrs.set(e, t), this.fire("change:attribute", { attributeKeys: [e], directChange: !0 }));
  }
  getSelectedElement() {
    return this.rangeCount !== 1 ? null : this.getFirstRange().getContainedElement();
  }
  *getSelectedBlocks() {
    const e = /* @__PURE__ */ new WeakSet();
    for (const t of this.getRanges()) {
      const n = sm(t.start, e);
      Rx(n, t) && (yield n);
      const r = t.getWalker();
      for (const a of r) {
        const l = a.item;
        a.type == "elementEnd" && Nx(l, e, t) ? yield l : a.type == "elementStart" && l.is("model:element") && l.root.document.model.schema.isBlock(l) && r.jumpTo(I._createAt(l, "end"));
      }
      const s = sm(t.end, e);
      zx(s, t) && (yield s);
    }
  }
  containsEntireContent(e = this.anchor.root) {
    const t = I._createAt(e, 0), n = I._createAt(e, "end");
    return t.isTouching(this.getFirstPosition()) && n.isTouching(this.getLastPosition());
  }
  _pushRange(e) {
    this._checkRange(e), this._ranges.push(new T(e.start, e.end));
  }
  _checkRange(e) {
    for (let t = 0; t < this._ranges.length; t++) if (e.isIntersecting(this._ranges[t])) throw new v("model-selection-range-intersects", [this, e], { addedRange: e, intersectingRange: this._ranges[t] });
  }
  _replaceAllRanges(e) {
    this._removeAllRanges();
    for (const t of e) this._pushRange(t);
  }
  _removeAllRanges() {
    for (; this._ranges.length > 0; ) this._popRange();
  }
  _popRange() {
    this._ranges.pop();
  }
}
function e_(o, i) {
  return !i.has(o) && (i.add(o), o.root.document.model.schema.isBlock(o) && !!o.parent);
}
function Nx(o, i, e) {
  return e_(o, i) && Au(o, e);
}
function sm(o, i) {
  const e = o.parent.root.document.model.schema, t = o.parent.getAncestors({ parentFirst: !0, includeSelf: !0 });
  let n = !1;
  const r = t.find((s) => !n && (n = e.isLimit(s), !n && e_(s, i)));
  return t.forEach((s) => i.add(s)), r;
}
function Au(o, i) {
  const e = function(t) {
    const n = t.root.document.model.schema;
    let r = t.parent;
    for (; r; ) {
      if (n.isBlock(r)) return r;
      r = r.parent;
    }
  }(o);
  return e ? !i.containsRange(T._createOn(e), !0) : !0;
}
function Rx(o, i) {
  return !!o && (!(!i.isCollapsed && !o.isEmpty) || !i.start.isTouching(I._createAt(o, o.maxOffset)) && Au(o, i));
}
function zx(o, i) {
  return !!o && (!(!i.isCollapsed && !o.isEmpty) || !i.end.isTouching(I._createAt(o, 0)) && Au(o, i));
}
Gt.prototype.is = function(o) {
  return o === "selection" || o === "model:selection";
};
class Mt extends Ae(T) {
  constructor(i, e) {
    super(i, e), Bx.call(this);
  }
  detach() {
    this.stopListening();
  }
  toRange() {
    return new T(this.start, this.end);
  }
  static fromRange(i) {
    return new Mt(i.start, i.end);
  }
}
function Bx() {
  this.listenTo(this.root.document.model, "applyOperation", (o, i) => {
    const e = i[0];
    e.isDocumentOperation && Dx.call(this, e);
  }, { priority: "low" });
}
function Dx(o) {
  const i = this.getTransformedByOperation(o), e = T._createFromRanges(i), t = !e.isEqual(this), n = function(s, a) {
    switch (a.type) {
      case "insert":
        return s.containsPosition(a.position);
      case "move":
      case "remove":
      case "reinsert":
      case "merge":
        return s.containsPosition(a.sourcePosition) || s.start.isEqual(a.sourcePosition) || s.containsPosition(a.targetPosition);
      case "split":
        return s.containsPosition(a.splitPosition) || s.containsPosition(a.insertionPosition);
    }
    return !1;
  }(this, o);
  let r = null;
  if (t) {
    e.root.rootName == "$graveyard" && (r = o.type == "remove" ? o.sourcePosition : o.deletionPosition);
    const s = this.toRange();
    this.start = e.start, this.end = e.end, this.fire("change:range", s, { deletionPosition: r });
  } else n && this.fire("change:content", this.toRange(), { deletionPosition: r });
}
Mt.prototype.is = function(o) {
  return o === "liveRange" || o === "model:liveRange" || o == "range" || o === "model:range";
};
class $e extends uo {
  constructor(e, t) {
    super(t);
    m(this, "_data");
    this._data = e || "";
  }
  get offsetSize() {
    return this.data.length;
  }
  get data() {
    return this._data;
  }
  toJSON() {
    const e = super.toJSON();
    return e.data = this.data, e;
  }
  _clone() {
    return new $e(this.data, this.getAttributes());
  }
  static fromJSON(e) {
    return new $e(e.data, e.attributes);
  }
}
$e.prototype.is = function(o) {
  return o === "$text" || o === "model:$text" || o === "text" || o === "model:text" || o === "node" || o === "model:node";
};
const Ea = "selection:";
class xi extends Ae(Rn) {
  constructor(e) {
    super();
    m(this, "_selection");
    this._selection = new Fx(e), this._selection.delegate("change:range").to(this), this._selection.delegate("change:attribute").to(this), this._selection.delegate("change:marker").to(this);
  }
  get isCollapsed() {
    return this._selection.isCollapsed;
  }
  get anchor() {
    return this._selection.anchor;
  }
  get focus() {
    return this._selection.focus;
  }
  get rangeCount() {
    return this._selection.rangeCount;
  }
  get hasOwnRange() {
    return this._selection.hasOwnRange;
  }
  get isBackward() {
    return this._selection.isBackward;
  }
  get isGravityOverridden() {
    return this._selection.isGravityOverridden;
  }
  get markers() {
    return this._selection.markers;
  }
  get _ranges() {
    return this._selection._ranges;
  }
  getRanges() {
    return this._selection.getRanges();
  }
  getFirstPosition() {
    return this._selection.getFirstPosition();
  }
  getLastPosition() {
    return this._selection.getLastPosition();
  }
  getFirstRange() {
    return this._selection.getFirstRange();
  }
  getLastRange() {
    return this._selection.getLastRange();
  }
  getSelectedBlocks() {
    return this._selection.getSelectedBlocks();
  }
  getSelectedElement() {
    return this._selection.getSelectedElement();
  }
  containsEntireContent(e) {
    return this._selection.containsEntireContent(e);
  }
  destroy() {
    this._selection.destroy();
  }
  getAttributeKeys() {
    return this._selection.getAttributeKeys();
  }
  getAttributes() {
    return this._selection.getAttributes();
  }
  getAttribute(e) {
    return this._selection.getAttribute(e);
  }
  hasAttribute(e) {
    return this._selection.hasAttribute(e);
  }
  refresh() {
    this._selection.updateMarkers(), this._selection._updateAttributes(!1);
  }
  observeMarkers(e) {
    this._selection.observeMarkers(e);
  }
  _setFocus(e, t) {
    this._selection.setFocus(e, t);
  }
  _setTo(...e) {
    this._selection.setTo(...e);
  }
  _setAttribute(e, t) {
    this._selection.setAttribute(e, t);
  }
  _removeAttribute(e) {
    this._selection.removeAttribute(e);
  }
  _getStoredAttributes() {
    return this._selection.getStoredAttributes();
  }
  _overrideGravity() {
    return this._selection.overrideGravity();
  }
  _restoreGravity(e) {
    this._selection.restoreGravity(e);
  }
  static _getStoreAttributeKey(e) {
    return Ea + e;
  }
  static _isStoreAttributeKey(e) {
    return e.startsWith(Ea);
  }
}
xi.prototype.is = function(o) {
  return o === "selection" || o == "model:selection" || o == "documentSelection" || o == "model:documentSelection";
};
class Fx extends Gt {
  constructor(e) {
    super();
    m(this, "markers", new rt({ idProperty: "name" }));
    m(this, "_model");
    m(this, "_document");
    m(this, "_attributePriority", /* @__PURE__ */ new Map());
    m(this, "_selectionRestorePosition", null);
    m(this, "_hasChangedRange", !1);
    m(this, "_overriddenGravityRegister", /* @__PURE__ */ new Set());
    m(this, "_observedMarkers", /* @__PURE__ */ new Set());
    this._model = e.model, this._document = e, this.listenTo(this._model, "applyOperation", (t, n) => {
      const r = n[0];
      r.isDocumentOperation && r.type != "marker" && r.type != "rename" && r.type != "noop" && (this._ranges.length == 0 && this._selectionRestorePosition && this._fixGraveyardSelection(this._selectionRestorePosition), this._selectionRestorePosition = null, this._hasChangedRange && (this._hasChangedRange = !1, this.fire("change:range", { directChange: !1 })));
    }, { priority: "lowest" }), this.on("change:range", () => {
      this._validateSelectionRanges(this.getRanges());
    }), this.listenTo(this._model.markers, "update", (t, n, r, s) => {
      this._updateMarker(n, s);
    }), this.listenTo(this._document, "change", (t, n) => {
      (function(r, s) {
        const a = r.document.differ;
        for (const l of a.getChanges()) {
          if (l.type != "insert") continue;
          const c = l.position.parent;
          l.length === c.maxOffset && r.enqueueChange(s, (d) => {
            const u = Array.from(c.getAttributeKeys()).filter((h) => h.startsWith(Ea));
            for (const h of u) d.removeAttribute(h, c);
          });
        }
      })(this._model, n);
    });
  }
  get isCollapsed() {
    return this._ranges.length === 0 ? this._document._getDefaultRange().isCollapsed : super.isCollapsed;
  }
  get anchor() {
    return super.anchor || this._document._getDefaultRange().start;
  }
  get focus() {
    return super.focus || this._document._getDefaultRange().end;
  }
  get rangeCount() {
    return this._ranges.length ? this._ranges.length : 1;
  }
  get hasOwnRange() {
    return this._ranges.length > 0;
  }
  get isGravityOverridden() {
    return !!this._overriddenGravityRegister.size;
  }
  destroy() {
    for (let e = 0; e < this._ranges.length; e++) this._ranges[e].detach();
    this.stopListening();
  }
  *getRanges() {
    this._ranges.length ? yield* super.getRanges() : yield this._document._getDefaultRange();
  }
  getFirstRange() {
    return super.getFirstRange() || this._document._getDefaultRange();
  }
  getLastRange() {
    return super.getLastRange() || this._document._getDefaultRange();
  }
  setTo(...e) {
    super.setTo(...e), this._updateAttributes(!0), this.updateMarkers();
  }
  setFocus(e, t) {
    super.setFocus(e, t), this._updateAttributes(!0), this.updateMarkers();
  }
  setAttribute(e, t) {
    if (this._setAttribute(e, t)) {
      const n = [e];
      this.fire("change:attribute", { attributeKeys: n, directChange: !0 });
    }
  }
  removeAttribute(e) {
    if (this._removeAttribute(e)) {
      const t = [e];
      this.fire("change:attribute", { attributeKeys: t, directChange: !0 });
    }
  }
  overrideGravity() {
    const e = Tt();
    return this._overriddenGravityRegister.add(e), this._overriddenGravityRegister.size === 1 && this._updateAttributes(!0), e;
  }
  restoreGravity(e) {
    if (!this._overriddenGravityRegister.has(e)) throw new v("document-selection-gravity-wrong-restore", this, { uid: e });
    this._overriddenGravityRegister.delete(e), this.isGravityOverridden || this._updateAttributes(!0);
  }
  observeMarkers(e) {
    this._observedMarkers.add(e), this.updateMarkers();
  }
  _replaceAllRanges(e) {
    this._validateSelectionRanges(e), super._replaceAllRanges(e);
  }
  _popRange() {
    this._ranges.pop().detach();
  }
  _pushRange(e) {
    const t = this._prepareRange(e);
    t && this._ranges.push(t);
  }
  _validateSelectionRanges(e) {
    for (const t of e) if (!this._document._validateSelectionRange(t)) throw new v("document-selection-wrong-position", this, { range: t });
  }
  _prepareRange(e) {
    if (this._checkRange(e), e.root == this._document.graveyard) return;
    const t = Mt.fromRange(e);
    return t.on("change:range", (n, r, s) => {
      if (this._hasChangedRange = !0, t.root == this._document.graveyard) {
        this._selectionRestorePosition = s.deletionPosition;
        const a = this._ranges.indexOf(t);
        this._ranges.splice(a, 1), t.detach();
      }
    }), t;
  }
  updateMarkers() {
    if (!this._observedMarkers.size) return;
    const e = [];
    let t = !1;
    for (const r of this._model.markers) {
      const s = r.name.split(":", 1)[0];
      if (!this._observedMarkers.has(s)) continue;
      const a = r.getRange();
      for (const l of this.getRanges()) a.containsRange(l, !l.isCollapsed) && e.push(r);
    }
    const n = Array.from(this.markers);
    for (const r of e) this.markers.has(r) || (this.markers.add(r), t = !0);
    for (const r of Array.from(this.markers)) e.includes(r) || (this.markers.remove(r), t = !0);
    t && this.fire("change:marker", { oldMarkers: n, directChange: !1 });
  }
  _updateMarker(e, t) {
    const n = e.name.split(":", 1)[0];
    if (!this._observedMarkers.has(n)) return;
    let r = !1;
    const s = Array.from(this.markers), a = this.markers.has(e);
    if (t) {
      let l = !1;
      for (const c of this.getRanges()) if (t.containsRange(c, !c.isCollapsed)) {
        l = !0;
        break;
      }
      l && !a ? (this.markers.add(e), r = !0) : !l && a && (this.markers.remove(e), r = !0);
    } else a && (this.markers.remove(e), r = !0);
    r && this.fire("change:marker", { oldMarkers: s, directChange: !1 });
  }
  _updateAttributes(e) {
    const t = yi(this._getSurroundingAttributes()), n = yi(this.getAttributes());
    if (e) this._attributePriority = /* @__PURE__ */ new Map(), this._attrs = /* @__PURE__ */ new Map();
    else for (const [s, a] of this._attributePriority) a == "low" && (this._attrs.delete(s), this._attributePriority.delete(s));
    this._setAttributesTo(t);
    const r = [];
    for (const [s, a] of this.getAttributes()) n.has(s) && n.get(s) === a || r.push(s);
    for (const [s] of n) this.hasAttribute(s) || r.push(s);
    r.length > 0 && this.fire("change:attribute", { attributeKeys: r, directChange: !1 });
  }
  _setAttribute(e, t, n = !0) {
    const r = n ? "normal" : "low";
    return r == "low" && this._attributePriority.get(e) == "normal" ? !1 : super.getAttribute(e) !== t && (this._attrs.set(e, t), this._attributePriority.set(e, r), !0);
  }
  _removeAttribute(e, t = !0) {
    const n = t ? "normal" : "low";
    return (n != "low" || this._attributePriority.get(e) != "normal") && (this._attributePriority.set(e, n), !!super.hasAttribute(e) && (this._attrs.delete(e), !0));
  }
  _setAttributesTo(e) {
    const t = /* @__PURE__ */ new Set();
    for (const [n, r] of this.getAttributes()) e.get(n) !== r && this._removeAttribute(n, !1);
    for (const [n, r] of e)
      this._setAttribute(n, r, !1) && t.add(n);
    return t;
  }
  *getStoredAttributes() {
    const e = this.getFirstPosition().parent;
    if (this.isCollapsed && e.isEmpty) for (const t of e.getAttributeKeys()) t.startsWith(Ea) && (yield [t.substr(10), e.getAttribute(t)]);
  }
  _getSurroundingAttributes() {
    const e = this.getFirstPosition(), t = this._model.schema;
    if (e.root.rootName == "$graveyard") return null;
    let n = null;
    if (this.isCollapsed) {
      const r = e.textNode ? e.textNode : e.nodeBefore, s = e.textNode ? e.textNode : e.nodeAfter;
      if (this.isGravityOverridden || (n = fr(r, t)), n || (n = fr(s, t)), !this.isGravityOverridden && !n) {
        let a = r;
        for (; a && !n; ) a = a.previousSibling, n = fr(a, t);
      }
      if (!n) {
        let a = s;
        for (; a && !n; ) a = a.nextSibling, n = fr(a, t);
      }
      n || (n = this.getStoredAttributes());
    } else {
      const r = this.getFirstRange();
      for (const s of r) {
        if (s.item.is("element") && t.isObject(s.item)) {
          n = fr(s.item, t);
          break;
        }
        if (s.type == "text") {
          n = s.item.getAttributes();
          break;
        }
      }
    }
    return n;
  }
  _fixGraveyardSelection(e) {
    const t = this._model.schema.getNearestSelectionRange(e);
    t && this._pushRange(t);
  }
}
function fr(o, i) {
  if (!o) return null;
  if (o instanceof bi || o instanceof $e) return o.getAttributes();
  if (!i.isInline(o)) return null;
  if (!i.isObject(o)) return [];
  const e = [];
  for (const [t, n] of o.getAttributes()) i.checkAttribute("$text", t) && i.getAttributeProperties(t).copyFromObject !== !1 && e.push([t, n]);
  return e;
}
class Ur {
  constructor(i) {
    m(this, "_nodes", []);
    m(this, "_offsetToNode", []);
    i && this._insertNodes(0, i);
  }
  [Symbol.iterator]() {
    return this._nodes[Symbol.iterator]();
  }
  get length() {
    return this._nodes.length;
  }
  get maxOffset() {
    return this._offsetToNode.length;
  }
  getNode(i) {
    return this._nodes[i] || null;
  }
  getNodeAtOffset(i) {
    return this._offsetToNode[i] || null;
  }
  getNodeIndex(i) {
    return i.index;
  }
  getNodeStartOffset(i) {
    return i.startOffset;
  }
  indexToOffset(i) {
    if (i == this._nodes.length) return this.maxOffset;
    const e = this._nodes[i];
    if (!e) throw new v("model-nodelist-index-out-of-bounds", this);
    return this.getNodeStartOffset(e);
  }
  offsetToIndex(i) {
    if (i == this._offsetToNode.length) return this._nodes.length;
    const e = this._offsetToNode[i];
    if (!e) throw new v("model-nodelist-offset-out-of-bounds", this, { offset: i, nodeList: this });
    return this.getNodeIndex(e);
  }
  _insertNodes(i, e) {
    const t = [];
    for (const r of e) {
      if (!(r instanceof uo)) throw new v("model-nodelist-insertnodes-not-node", this);
      t.push(r);
    }
    let n = this.indexToOffset(i);
    jh(this._nodes, t, i), jh(this._offsetToNode, function(r) {
      const s = [];
      let a = 0;
      for (const l of r) for (let c = 0; c < l.offsetSize; c++) s[a++] = l;
      return s;
    }(t), n);
    for (let r = i; r < this._nodes.length; r++) this._nodes[r]._index = r, this._nodes[r]._startOffset = n, n += this._nodes[r].offsetSize;
  }
  _removeNodes(i, e = 1) {
    if (e == 0) return [];
    let t = this.indexToOffset(i);
    const n = this._nodes.splice(i, e), r = n[n.length - 1], s = r.startOffset + r.offsetSize - t;
    this._offsetToNode.splice(t, s);
    for (const a of n) a._index = null, a._startOffset = null;
    for (let a = i; a < this._nodes.length; a++) this._nodes[a]._index = a, this._nodes[a]._startOffset = t, t += this._nodes[a].offsetSize;
    return n;
  }
  _removeNodesArray(i) {
    if (i.length == 0) return;
    for (const t of i) t._index = null, t._startOffset = null;
    this._nodes = this._nodes.filter((t) => t.index !== null), this._offsetToNode = this._offsetToNode.filter((t) => t.index !== null);
    let e = 0;
    for (let t = 0; t < this._nodes.length; t++) this._nodes[t]._index = t, this._nodes[t]._startOffset = e, e += this._nodes[t].offsetSize;
  }
  toJSON() {
    return this._nodes.map((i) => i.toJSON());
  }
}
class Re extends uo {
  constructor(e, t, n) {
    super(t);
    m(this, "name");
    m(this, "_children", new Ur());
    this.name = e, n && this._insertChild(0, n);
  }
  get childCount() {
    return this._children.length;
  }
  get maxOffset() {
    return this._children.maxOffset;
  }
  get isEmpty() {
    return this.childCount === 0;
  }
  getChild(e) {
    return this._children.getNode(e);
  }
  getChildAtOffset(e) {
    return this._children.getNodeAtOffset(e);
  }
  getChildren() {
    return this._children[Symbol.iterator]();
  }
  getChildIndex(e) {
    return this._children.getNodeIndex(e);
  }
  getChildStartOffset(e) {
    return this._children.getNodeStartOffset(e);
  }
  offsetToIndex(e) {
    return this._children.offsetToIndex(e);
  }
  getNodeByPath(e) {
    let t = this;
    for (const n of e) t = t.getChildAtOffset(n);
    return t;
  }
  findAncestor(e, t = {}) {
    let n = t.includeSelf ? this : this.parent;
    for (; n; ) {
      if (n.name === e) return n;
      n = n.parent;
    }
    return null;
  }
  toJSON() {
    const e = super.toJSON();
    if (e.name = this.name, this._children.length > 0) {
      e.children = [];
      for (const t of this._children) e.children.push(t.toJSON());
    }
    return e;
  }
  _clone(e = !1) {
    const t = e ? function(n) {
      const r = [];
      for (const s of n) r.push(s._clone(!0));
      return r;
    }(this._children) : void 0;
    return new Re(this.name, this.getAttributes(), t);
  }
  _appendChild(e) {
    this._insertChild(this.childCount, e);
  }
  _insertChild(e, t) {
    const n = function(r) {
      if (typeof r == "string") return [new $e(r)];
      Qt(r) || (r = [r]);
      const s = [];
      for (const a of r) typeof a == "string" ? s.push(new $e(a)) : a instanceof bi ? s.push(new $e(a.data, a.getAttributes())) : s.push(a);
      return s;
    }(t);
    for (const r of n) r.parent !== null && r._remove(), r.parent = this;
    this._children._insertNodes(e, n);
  }
  _removeChildren(e, t = 1) {
    const n = this._children._removeNodes(e, t);
    for (const r of n) r.parent = null;
    return n;
  }
  _removeChildrenArray(e) {
    this._children._removeNodesArray(e);
    for (const t of e) t.parent = null;
  }
  static fromJSON(e) {
    let t;
    if (e.children) {
      t = [];
      for (const n of e.children) n.name ? t.push(Re.fromJSON(n)) : t.push($e.fromJSON(n));
    }
    return new Re(e.name, e.attributes, t);
  }
}
Re.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "element" || o === "model:element") : o === "element" || o === "model:element" || o === "node" || o === "model:node";
};
class t_ {
  constructor(i) {
    m(this, "_dispatchers");
    this._dispatchers = i;
  }
  add(i) {
    for (const e of this._dispatchers) i(e);
    return this;
  }
}
class jx extends t_ {
  elementToElement(i) {
    return this.add(function(e) {
      const t = cm(e.model), n = br(e.view, "container");
      return t.attributes.length && (t.children = !0), (r) => {
        r.on(`insert:${t.name}`, $x(n, mm(t)), { priority: e.converterPriority || "normal" }), (t.children || t.attributes.length) && r.on("reduceChanges", hm(t), { priority: "low" });
      };
    }(i));
  }
  elementToStructure(i) {
    return this.add(function(e) {
      const t = cm(e.model), n = br(e.view, "container");
      return t.children = !0, (r) => {
        if (r._conversionApi.schema.checkChild(t.name, "$text")) throw new v("conversion-element-to-structure-disallowed-text", r, { elementName: t.name });
        var s, a;
        r.on(`insert:${t.name}`, (s = n, a = mm(t), (l, c, d) => {
          if (!a(c.item, d.consumable, { preflight: !0 })) return;
          const u = /* @__PURE__ */ new Map();
          d.writer._registerSlotFactory(/* @__PURE__ */ function(p, f, b) {
            return (k, _) => {
              const w = k.createContainerElement("$slot");
              let y = null;
              if (_ === "children") y = Array.from(p.getChildren());
              else {
                if (typeof _ != "function") throw new v("conversion-slot-mode-unknown", b.dispatcher, { modeOrFilter: _ });
                y = Array.from(p.getChildren()).filter((x) => _(x));
              }
              return f.set(w, y), w;
            };
          }(c.item, u, d));
          const h = s(c.item, d, c);
          if (d.writer._clearSlotFactory(), !h) return;
          (function(p, f, b) {
            const k = Array.from(f.values()).flat(), _ = new Set(k);
            if (_.size != k.length) throw new v("conversion-slot-filter-overlap", b.dispatcher, { element: p });
            if (_.size != p.childCount) throw new v("conversion-slot-filter-incomplete", b.dispatcher, { element: p });
          })(c.item, u, d), a(c.item, d.consumable);
          const g = d.mapper.toViewPosition(c.range.start);
          d.mapper.bindElements(c.item, h), d.writer.insert(g, h), d.convertAttributes(c.item), function(p, f, b, k) {
            b.mapper.on("modelToViewPosition", y, { priority: "highest" });
            let _ = null, w = null;
            for ([_, w] of f) i_(p, w, b, k), b.writer.move(b.writer.createRangeIn(_), b.writer.createPositionBefore(_)), b.writer.remove(_);
            function y(x, C) {
              const S = C.modelPosition.nodeAfter, L = w.indexOf(S);
              L < 0 || (C.viewPosition = C.mapper.findPositionIn(_, L));
            }
            b.mapper.off("modelToViewPosition", y);
          }(h, u, d, { reconversion: c.reconversion });
        }), { priority: e.converterPriority || "normal" }), r.on("reduceChanges", hm(t), { priority: "low" });
      };
    }(i));
  }
  attributeToElement(i) {
    return this.add(function(e) {
      e = Kt(e);
      let t = e.model;
      typeof t == "string" && (t = { key: t });
      let n = `attribute:${t.key}`;
      if (t.name && (n += ":" + t.name), t.values) for (const s of t.values) e.view[s] = br(e.view[s], "attribute");
      else e.view = br(e.view, "attribute");
      const r = dm(e);
      return (s) => {
        s.on(n, Hx(r), { priority: e.converterPriority || "normal" });
      };
    }(i));
  }
  attributeToAttribute(i) {
    return this.add(function(e) {
      e = Kt(e);
      let t = e.model;
      typeof t == "string" && (t = { key: t });
      let n = `attribute:${t.key}`;
      if (t.name && (n += ":" + t.name), t.values) for (const s of t.values) e.view[s] = um(e.view[s]);
      else e.view = um(e.view);
      const r = dm(e);
      return (s) => {
        var a;
        s.on(n, (a = r, (l, c, d) => {
          if (!d.consumable.test(c.item, l.name)) return;
          const u = a(c.attributeOldValue, d, c), h = a(c.attributeNewValue, d, c);
          if (!u && !h) return;
          d.consumable.consume(c.item, l.name);
          const g = d.mapper.toViewElement(c.item), p = d.writer;
          if (!g) throw new v("conversion-attribute-to-attribute-on-text", d.dispatcher, c);
          if (c.attributeOldValue !== null && u) {
            let f = u.value;
            u.key == "style" && (f = typeof u.value == "string" ? new Hr(p.document.stylesProcessor).setTo(u.value).getStylesEntries().map(([b]) => b) : Object.keys(u.value)), p.removeAttribute(u.key, f, g);
          }
          if (c.attributeNewValue !== null && h) {
            let f = h.value;
            h.key == "style" && typeof h.value == "string" && (f = Object.fromEntries(new Hr(p.document.stylesProcessor).setTo(h.value).getStylesEntries())), p.setAttribute(h.key, f, !1, g);
          }
        }), { priority: e.converterPriority || "normal" });
      };
    }(i));
  }
  markerToElement(i) {
    return this.add(function(e) {
      const t = br(e.view, "ui");
      return (n) => {
        n.on(`addMarker:${e.model}`, Ux(t), { priority: e.converterPriority || "normal" }), n.on(`removeMarker:${e.model}`, (r, s, a) => {
          const l = a.mapper.markerNameToElements(s.markerName);
          if (l) {
            for (const c of l) a.mapper.unbindElementFromMarkerName(c, s.markerName), a.writer.clear(a.writer.createRangeOn(c), c);
            a.writer.clearClonedElementsGroup(s.markerName), r.stop();
          }
        }, { priority: e.converterPriority || "normal" });
      };
    }(i));
  }
  markerToHighlight(i) {
    return this.add(/* @__PURE__ */ function(e) {
      return (t) => {
        var n;
        t.on(`addMarker:${e.model}`, (n = e.view, (r, s, a) => {
          if (!s.item || !(s.item instanceof Gt || s.item instanceof xi || s.item.is("$textProxy"))) return;
          const l = jl(n, s, a);
          if (!l || !a.consumable.consume(s.item, r.name)) return;
          const c = a.writer, d = am(c, l), u = c.document.selection;
          if (s.item instanceof Gt || s.item instanceof xi) c.wrap(u.getFirstRange(), d);
          else {
            const h = a.mapper.toViewRange(s.range), g = c.wrap(h, d);
            for (const p of g.getItems()) if (p.is("attributeElement") && p.isSimilar(d)) {
              a.mapper.bindElementToMarker(p, s.markerName);
              break;
            }
          }
        }), { priority: e.converterPriority || "normal" }), t.on(`addMarker:${e.model}`, /* @__PURE__ */ function(r) {
          return (s, a, l) => {
            if (!a.item || !(a.item instanceof Re)) return;
            const c = jl(r, a, l);
            if (!c || !l.consumable.test(a.item, s.name)) return;
            const d = l.mapper.toViewElement(a.item);
            if (d && d.getCustomProperty("addHighlight")) {
              l.consumable.consume(a.item, s.name);
              for (const u of T._createIn(a.item)) l.consumable.consume(u.item, s.name);
              d.getCustomProperty("addHighlight")(d, c, l.writer), l.mapper.bindElementToMarker(d, a.markerName);
            }
          };
        }(e.view), { priority: e.converterPriority || "normal" }), t.on(`removeMarker:${e.model}`, /* @__PURE__ */ function(r) {
          return (s, a, l) => {
            if (a.markerRange.isCollapsed) return;
            const c = jl(r, a, l);
            if (!c) return;
            const d = am(l.writer, c), u = l.mapper.markerNameToElements(a.markerName);
            if (u) {
              for (const h of u) l.mapper.unbindElementFromMarkerName(h, a.markerName), h.is("attributeElement") ? l.writer.unwrap(l.writer.createRangeOn(h), d) : h.getCustomProperty("removeHighlight")(h, c.id, l.writer);
              l.writer.clearClonedElementsGroup(a.markerName), s.stop();
            }
          };
        }(e.view), { priority: e.converterPriority || "normal" });
      };
    }(i));
  }
  markerToData(i) {
    return this.add(function(e) {
      e = Kt(e);
      const t = e.model;
      let n = e.view;
      return n || (n = (r) => ({ group: t, name: r.substr(e.model.length + 1) })), (r) => {
        var s;
        r.on(`addMarker:${t}`, (s = n, (a, l, c) => {
          const d = s(l.markerName, c);
          if (!d) return;
          const u = l.markerRange;
          c.consumable.consume(u, a.name) && (lm(u, !1, c, l, d), lm(u, !0, c, l, d), a.stop());
        }), { priority: e.converterPriority || "normal" }), r.on(`removeMarker:${t}`, /* @__PURE__ */ function(a) {
          return (l, c, d) => {
            const u = a(c.markerName, d);
            if (!u) return;
            const h = d.mapper.markerNameToElements(c.markerName);
            if (h) {
              for (const p of h) d.mapper.unbindElementFromMarkerName(p, c.markerName), p.is("containerElement") ? (g(`data-${u.group}-start-before`, p), g(`data-${u.group}-start-after`, p), g(`data-${u.group}-end-before`, p), g(`data-${u.group}-end-after`, p)) : d.writer.clear(d.writer.createRangeOn(p), p);
              d.writer.clearClonedElementsGroup(c.markerName), l.stop();
            }
            function g(p, f) {
              if (f.hasAttribute(p)) {
                const b = new Set(f.getAttribute(p).split(","));
                b.delete(u.name), b.size == 0 ? d.writer.removeAttribute(p, f) : d.writer.setAttribute(p, Array.from(b).join(","), f);
              }
            }
          };
        }(n), { priority: e.converterPriority || "normal" });
      };
    }(i));
  }
}
function am(o, i) {
  const e = o.createAttributeElement("span", i.attributes);
  return i.classes && e._addClass(i.classes), typeof i.priority == "number" && (e._priority = i.priority), e._id = i.id, e;
}
function Hx(o) {
  return (i, e, t) => {
    if (!t.consumable.test(e.item, i.name)) return;
    const n = o(e.attributeOldValue, t, e), r = o(e.attributeNewValue, t, e);
    if (!n && !r) return;
    t.consumable.consume(e.item, i.name);
    const s = t.writer, a = s.document.selection;
    if (e.item instanceof Gt || e.item instanceof xi) s.wrap(a.getFirstRange(), r);
    else {
      let l = t.mapper.toViewRange(e.range);
      e.attributeOldValue !== null && n && (l = s.unwrap(l, n)), e.attributeNewValue !== null && r && s.wrap(l, r);
    }
  };
}
function $x(o, i = Wx) {
  return (e, t, n) => {
    if (!i(t.item, n.consumable, { preflight: !0 })) return;
    const r = o(t.item, n, t);
    if (!r) return;
    i(t.item, n.consumable);
    const s = n.mapper.toViewPosition(t.range.start);
    n.mapper.bindElements(t.item, r), n.writer.insert(s, r), n.convertAttributes(t.item), i_(r, t.item.getChildren(), n, { reconversion: t.reconversion });
  };
}
function Ux(o) {
  return (i, e, t) => {
    e.isOpening = !0;
    const n = o(e, t);
    e.isOpening = !1;
    const r = o(e, t);
    if (!n || !r) return;
    const s = e.markerRange;
    if (s.isCollapsed && !t.consumable.consume(s, i.name)) return;
    for (const c of s) if (!t.consumable.consume(c.item, i.name)) return;
    const a = t.mapper, l = t.writer;
    l.insert(a.toViewPosition(s.start), n), t.mapper.bindElementToMarker(n, e.markerName), s.isCollapsed || (l.insert(a.toViewPosition(s.end), r), t.mapper.bindElementToMarker(r, e.markerName)), i.stop();
  };
}
function lm(o, i, e, t, n) {
  const r = i ? o.start : o.end, s = r.nodeAfter && r.nodeAfter.is("element") ? r.nodeAfter : null, a = r.nodeBefore && r.nodeBefore.is("element") ? r.nodeBefore : null;
  if (s || a) {
    let l, c;
    i && s || !i && !a ? (l = s, c = !0) : (l = a, c = !1);
    const d = e.mapper.toViewElement(l);
    if (d) return void function(u, h, g, p, f, b) {
      const k = `data-${b.group}-${h ? "start" : "end"}-${g ? "before" : "after"}`, _ = u.hasAttribute(k) ? u.getAttribute(k).split(",") : [];
      _.unshift(b.name), p.writer.setAttribute(k, _.join(","), u), p.mapper.bindElementToMarker(u, f.markerName);
    }(d, i, c, e, t, n);
  }
  (function(l, c, d, u, h) {
    const g = `${h.group}-${c ? "start" : "end"}`, p = h.name ? { name: h.name } : null, f = d.writer.createUIElement(g, p);
    d.writer.insert(l, f), d.mapper.bindElementToMarker(f, u.markerName);
  })(e.mapper.toViewPosition(r), i, e, t, n);
}
function cm(o) {
  return typeof o == "string" && (o = { name: o }), { name: o.name, attributes: o.attributes ? De(o.attributes) : [], children: !!o.children };
}
function br(o, i) {
  return typeof o == "function" ? o : (e, t) => function(n, r, s) {
    typeof n == "string" && (n = { name: n });
    let a;
    const l = r.writer, c = Object.assign({}, n.attributes);
    if (s == "container") a = l.createContainerElement(n.name, c);
    else if (s == "attribute") {
      const d = { priority: n.priority || Xn.DEFAULT_PRIORITY };
      a = l.createAttributeElement(n.name, c, d);
    } else a = l.createUIElement(n.name, c);
    if (n.styles) {
      const d = Object.keys(n.styles);
      for (const u of d) l.setStyle(u, n.styles[u], a);
    }
    if (n.classes) {
      const d = n.classes;
      if (typeof d == "string") l.addClass(d, a);
      else for (const u of d) l.addClass(u, a);
    }
    return a;
  }(o, t, i);
}
function dm(o) {
  return o.model.values ? (i, e, t) => {
    const n = o.view[i];
    return n ? n(i, e, t) : null;
  } : o.view;
}
function um(o) {
  return typeof o == "string" ? (i) => ({ key: o, value: i }) : typeof o == "object" ? o.value ? () => o : (i) => ({ key: o.key, value: i }) : o;
}
function jl(o, i, e) {
  const t = typeof o == "function" ? o(i, e) : o;
  return t ? (t.priority || (t.priority = 10), t.id || (t.id = i.markerName), t) : null;
}
function hm(o) {
  const i = /* @__PURE__ */ function(e) {
    return (t, n) => {
      if (!t.is("element", e.name)) return !1;
      if (n.type == "attribute") {
        if (e.attributes.includes(n.attributeKey)) return !0;
      } else if (e.children) return !0;
      return !1;
    };
  }(o);
  return (e, t) => {
    const n = [];
    t.reconvertedElements || (t.reconvertedElements = /* @__PURE__ */ new Set());
    for (const r of t.changes) {
      const s = r.type == "attribute" ? r.range.start.nodeAfter : r.position.parent;
      if (s && i(s, r)) {
        if (!t.reconvertedElements.has(s)) {
          t.reconvertedElements.add(s);
          const a = I._createBefore(s);
          let l = n.length;
          for (let c = n.length - 1; c >= 0; c--) {
            const d = n[c], u = (d.type == "attribute" ? d.range.start : d.position).compareWith(a);
            if (u == "before" || d.type == "remove" && u == "same") break;
            l = c;
          }
          n.splice(l, 0, { type: "remove", name: s.name, position: a, length: 1 }, { type: "reinsert", name: s.name, position: a, length: 1 });
        }
      } else n.push(r);
    }
    t.changes = n;
  };
}
function mm(o) {
  return (i, e, t = {}) => {
    const n = ["insert"];
    for (const r of o.attributes) i.hasAttribute(r) && n.push(`attribute:${r}`);
    return !!n.every((r) => e.test(i, r)) && (t.preflight || n.forEach((r) => e.consume(i, r)), !0);
  };
}
function i_(o, i, e, t) {
  for (const n of i) qx(o.root, n, e, t) || e.convertItem(n);
}
function qx(o, i, e, t) {
  const { writer: n, mapper: r } = e;
  if (!t.reconversion) return !1;
  const s = r.toViewElement(i);
  return !(!s || s.root == o) && !!e.canReuseView(s) && (n.move(n.createRangeOn(s), r.toViewPosition(I._createBefore(i))), !0);
}
function Wx(o, i, { preflight: e } = {}) {
  return e ? i.test(o, "insert") : i.consume(o, "insert");
}
function n_(o) {
  const { schema: i, document: e } = o.model;
  for (const t of e.getRoots()) if (t.isEmpty && !i.checkChild(t, "$text") && i.checkChild(t, "paragraph")) return o.insertElement("paragraph", t), !0;
  return !1;
}
function o_(o, i, e) {
  const t = e.createContext(o);
  return !!e.checkChild(t, "paragraph") && !!e.checkChild(t.push("paragraph"), i);
}
function r_(o, i) {
  const e = i.createElement("paragraph");
  return i.insert(e, o), i.createPositionAt(e, 0);
}
class Gx extends t_ {
  elementToElement(i) {
    return this.add(gm(i));
  }
  elementToAttribute(i) {
    return this.add(function(e) {
      e = Kt(e), pm(e);
      const t = fm(e, !1), n = Tu(e.view), r = n ? `element:${n}` : "element";
      return (s) => {
        s.on(r, t, { priority: e.converterPriority || "low" });
      };
    }(i));
  }
  attributeToAttribute(i) {
    return this.add(function(e) {
      e = Kt(e);
      let t = null;
      (typeof e.view == "string" || e.view.key) && (t = function(r) {
        typeof r.view == "string" && (r.view = { key: r.view });
        const s = r.view.key, a = r.view.value === void 0 ? /[\s\S]*/ : r.view.value;
        let l;
        return s == "class" || s == "style" ? l = { [s == "class" ? "classes" : "styles"]: a } : l = { attributes: { [s]: a } }, r.view.name && (l.name = r.view.name), r.view = l, s;
      }(e)), pm(e, t);
      const n = fm(e, !0);
      return (r) => {
        r.on("element", n, { priority: e.converterPriority || "low" });
      };
    }(i));
  }
  elementToMarker(i) {
    return this.add(function(e) {
      const t = /* @__PURE__ */ function(n) {
        return (r, s) => {
          const a = typeof n == "string" ? n : n(r, s);
          return s.writer.createElement("$marker", { "data-name": a });
        };
      }(e.model);
      return gm({ ...e, model: t });
    }(i));
  }
  dataToMarker(i) {
    return this.add(function(e) {
      e = Kt(e), e.model || (e.model = (s) => s ? e.view + ":" + s : e.view);
      const t = { view: e.view, model: e.model }, n = rd(bm(t, "start")), r = rd(bm(t, "end"));
      return (s) => {
        s.on(`element:${e.view}-start`, n, { priority: e.converterPriority || "normal" }), s.on(`element:${e.view}-end`, r, { priority: e.converterPriority || "normal" });
        const a = Tn.low, l = Tn.highest, c = Tn.get(e.converterPriority) / l;
        s.on("element", /* @__PURE__ */ function(d) {
          return (u, h, g) => {
            const p = `data-${d.view}`;
            function f(b, k) {
              for (const _ of k) {
                const w = d.model(_, g), y = g.writer.createElement("$marker", { "data-name": w });
                g.writer.insert(y, b), h.modelCursor.isEqual(b) ? h.modelCursor = h.modelCursor.getShiftedBy(1) : h.modelCursor = h.modelCursor._getTransformedByInsertion(b, 1), h.modelRange = h.modelRange._getTransformedByInsertion(b, 1)[0];
              }
            }
            (g.consumable.test(h.viewItem, { attributes: p + "-end-after" }) || g.consumable.test(h.viewItem, { attributes: p + "-start-after" }) || g.consumable.test(h.viewItem, { attributes: p + "-end-before" }) || g.consumable.test(h.viewItem, { attributes: p + "-start-before" })) && (h.modelRange || Object.assign(h, g.convertChildren(h.viewItem, h.modelCursor)), g.consumable.consume(h.viewItem, { attributes: p + "-end-after" }) && f(h.modelRange.end, h.viewItem.getAttribute(p + "-end-after").split(",")), g.consumable.consume(h.viewItem, { attributes: p + "-start-after" }) && f(h.modelRange.end, h.viewItem.getAttribute(p + "-start-after").split(",")), g.consumable.consume(h.viewItem, { attributes: p + "-end-before" }) && f(h.modelRange.start, h.viewItem.getAttribute(p + "-end-before").split(",")), g.consumable.consume(h.viewItem, { attributes: p + "-start-before" }) && f(h.modelRange.start, h.viewItem.getAttribute(p + "-start-before").split(",")));
          };
        }(t), { priority: a + c });
      };
    }(i));
  }
}
function gm(o) {
  const i = rd(o = Kt(o)), e = Tu(o.view), t = e ? `element:${e}` : "element";
  return (n) => {
    n.on(t, i, { priority: o.converterPriority || "normal" });
  };
}
function Tu(o) {
  return typeof o == "string" ? o : typeof o == "object" && typeof o.name == "string" ? o.name : null;
}
function rd(o) {
  const i = new Zt(o.view);
  return (e, t, n) => {
    const r = i.match(t.viewItem);
    if (!r) return;
    const s = r.match;
    if (s.name = !0, !n.consumable.test(t.viewItem, s)) return;
    const a = function(l, c, d) {
      return l instanceof Function ? l(c, d) : d.writer.createElement(l);
    }(o.model, t.viewItem, n);
    a && n.safeInsert(a, t.modelCursor) && (n.consumable.consume(t.viewItem, s), n.convertChildren(t.viewItem, a), n.updateConversionResult(a, t));
  };
}
function pm(o, i = null) {
  const e = i === null || ((r) => r.getAttribute(i)), t = typeof o.model != "object" ? o.model : o.model.key, n = typeof o.model != "object" || o.model.value === void 0 ? e : o.model.value;
  o.model = { key: t, value: n };
}
function fm(o, i) {
  const e = new Zt(o.view);
  return (t, n, r) => {
    if (!n.modelRange && i) return;
    const s = e.match(n.viewItem);
    if (!s || (function(d, u) {
      const h = typeof d == "function" ? d(u) : d;
      return typeof h == "object" && !Tu(h) ? !1 : !h.classes && !h.attributes && !h.styles;
    }(o.view, n.viewItem) ? s.match.name = !0 : delete s.match.name, !r.consumable.test(n.viewItem, s.match))) return;
    const a = o.model.key, l = typeof o.model.value == "function" ? o.model.value(n.viewItem, r, n) : o.model.value;
    if (l === null) return;
    n.modelRange || Object.assign(n, r.convertChildren(n.viewItem, n.modelCursor)), function(d, u, h, g) {
      let p = !1;
      for (const f of Array.from(d.getItems({ shallow: h }))) g.schema.checkAttribute(f, u.key) && (p = !0, f.hasAttribute(u.key) || g.writer.setAttribute(u.key, u.value, f));
      return p;
    }(n.modelRange, { key: a, value: l }, i, r) && (r.consumable.test(n.viewItem, { name: !0 }) && (s.match.name = !0), r.consumable.consume(n.viewItem, s.match));
  };
}
function bm(o, i) {
  return { view: `${o.view}-${i}`, model: (e, t) => {
    const n = e.getAttribute("name"), r = o.model(n, t);
    return t.writer.createElement("$marker", { "data-name": r });
  } };
}
function Zx(o) {
  o.document.registerPostFixer((i) => function(e, t) {
    const n = t.document.selection, r = t.schema, s = [];
    let a = !1;
    for (const l of n.getRanges()) {
      const c = s_(l, r);
      c && !c.isEqual(l) ? (s.push(c), a = !0) : s.push(l);
    }
    return a && e.setSelection(function(l) {
      const c = [...l], d = /* @__PURE__ */ new Set();
      let u = 1;
      for (; u < c.length; ) {
        const h = c[u], g = c.slice(0, u);
        for (const [p, f] of g.entries()) if (!d.has(p)) {
          if (h.isEqual(f)) d.add(p);
          else if (h.isIntersecting(f)) {
            d.add(p), d.add(u);
            const b = h.getJoined(f);
            c.push(b);
          }
        }
        u++;
      }
      return c.filter((h, g) => !d.has(g));
    }(s), { backward: n.isBackward }), !1;
  }(i, o));
}
function s_(o, i) {
  return o.isCollapsed ? function(e, t) {
    const n = e.start, r = t.getNearestSelectionRange(n);
    if (!r) {
      const a = n.getAncestors().reverse().find((l) => t.isObject(l));
      return a ? T._createOn(a) : null;
    }
    if (!r.isCollapsed) return r;
    const s = r.start;
    return n.isEqual(s) ? null : new T(s);
  }(o, i) : function(e, t) {
    const { start: n, end: r } = e, s = t.checkChild(n, "$text"), a = t.checkChild(r, "$text"), l = t.getLimitElement(n), c = t.getLimitElement(r);
    if (l === c) {
      if (s && a) return null;
      if (function(h, g, p) {
        const f = h.nodeAfter && !p.isLimit(h.nodeAfter) || p.checkChild(h, "$text"), b = g.nodeBefore && !p.isLimit(g.nodeBefore) || p.checkChild(g, "$text");
        return f || b;
      }(n, r, t)) {
        const h = n.nodeAfter && t.isSelectable(n.nodeAfter) ? null : t.getNearestSelectionRange(n, "forward"), g = r.nodeBefore && t.isSelectable(r.nodeBefore) ? null : t.getNearestSelectionRange(r, "backward"), p = h ? h.start : n, f = g ? g.end : r;
        return new T(p, f);
      }
    }
    const d = l && !l.is("rootElement"), u = c && !c.is("rootElement");
    if (d || u) {
      const h = n.nodeAfter && r.nodeBefore && n.nodeAfter.parent === r.nodeBefore.parent, g = d && (!h || !_m(n.nodeAfter, t)), p = u && (!h || !_m(r.nodeBefore, t));
      let f = n, b = r;
      return g && (f = I._createBefore(km(l, t))), p && (b = I._createAfter(km(c, t))), new T(f, b);
    }
    return null;
  }(o, i);
}
function km(o, i) {
  let e = o, t = e;
  for (; i.isLimit(t) && t.parent; ) e = t, t = t.parent;
  return e;
}
function _m(o, i) {
  return o && i.isSelectable(o);
}
class Kx extends xe() {
  constructor(e, t) {
    super();
    m(this, "model");
    m(this, "view");
    m(this, "mapper");
    m(this, "downcastDispatcher");
    this.model = e, this.view = new Mx(t), this.mapper = new Jk(), this.downcastDispatcher = new Xk({ mapper: this.mapper, schema: e.schema });
    const n = this.model.document, r = n.selection, s = this.model.markers;
    var a, l, c;
    this.listenTo(this.model, "_beforeChanges", () => {
      this.view._disableRendering(!0);
    }, { priority: "highest" }), this.listenTo(this.model, "_afterChanges", () => {
      this.view._disableRendering(!1);
    }, { priority: "lowest" }), this.listenTo(n, "change", () => {
      this.view.change((d) => {
        this.downcastDispatcher.convertChanges(n.differ, s, d), this.downcastDispatcher.convertSelection(r, s, d);
      });
    }, { priority: "low" }), this.listenTo(this.view.document, "selectionChange", /* @__PURE__ */ function(d, u) {
      return (h, g) => {
        const p = g.newSelection, f = [];
        for (const k of p.getRanges()) f.push(u.toModelRange(k));
        const b = d.createSelection(f, { backward: p.isBackward });
        b.isEqual(d.document.selection) || d.change((k) => {
          k.setSelection(b);
        });
      };
    }(this.model, this.mapper)), this.listenTo(this.view.document, "beforeinput", (a = this.mapper, l = this.model.schema, c = this.view, (d, u) => {
      if (!c.document.isComposing || q.isAndroid) for (let h = 0; h < u.targetRanges.length; h++) {
        const g = u.targetRanges[h], p = a.toModelRange(g), f = s_(p, l);
        f && !f.isEqual(p) && (u.targetRanges[h] = a.toViewRange(f));
      }
    }), { priority: "high" }), this.downcastDispatcher.on("insert:$text", (d, u, h) => {
      if (!h.consumable.consume(u.item, d.name)) return;
      const g = h.writer, p = h.mapper.toViewPosition(u.range.start), f = g.createText(u.item.data);
      g.insert(p, f);
    }, { priority: "lowest" }), this.downcastDispatcher.on("insert", (d, u, h) => {
      h.convertAttributes(u.item), u.reconversion || !u.item.is("element") || u.item.isEmpty || h.convertChildren(u.item);
    }, { priority: "lowest" }), this.downcastDispatcher.on("remove", (d, u, h) => {
      const g = h.mapper.toViewPosition(u.position), p = u.position.getShiftedBy(u.length), f = h.mapper.toViewPosition(p, { isPhantom: !0 }), b = h.writer.createRange(g, f), k = h.writer.remove(b.getTrimmed());
      for (const _ of h.writer.createRangeIn(k).getItems()) h.mapper.unbindViewElement(_, { defer: !0 });
    }, { priority: "low" }), this.downcastDispatcher.on("cleanSelection", (d, u, h) => {
      const g = h.writer, p = g.document.selection;
      for (const f of p.getRanges()) f.isCollapsed && f.end.parent.isAttached() && h.writer.mergeAttributes(f.start);
      g.setSelection(null);
    }), this.downcastDispatcher.on("selection", (d, u, h) => {
      const g = u.selection;
      if (g.isCollapsed || !h.consumable.consume(g, "selection")) return;
      const p = [];
      for (const f of g.getRanges()) p.push(h.mapper.toViewRange(f));
      h.writer.setSelection(p, { backward: g.isBackward });
    }, { priority: "low" }), this.downcastDispatcher.on("selection", (d, u, h) => {
      const g = u.selection;
      if (!g.isCollapsed || !h.consumable.consume(g, "selection")) return;
      const p = h.writer, f = g.getFirstPosition(), b = h.mapper.toViewPosition(f), k = p.breakAttributes(b);
      p.setSelection(k);
    }, { priority: "low" }), this.view.document.roots.bindTo(this.model.document.roots).using((d) => {
      if (d.rootName == "$graveyard") return null;
      const u = new Fk(this.view.document, d.name);
      return u.rootName = d.rootName, this.mapper.bindElements(d, u), u;
    });
  }
  destroy() {
    this.view.destroy(), this.stopListening();
  }
  reconvertMarker(e) {
    const t = typeof e == "string" ? e : e.name, n = this.model.markers.get(t);
    if (!n) throw new v("editingcontroller-reconvertmarker-marker-not-exist", this, { markerName: t });
    this.model.change(() => {
      this.model.markers._refresh(n);
    });
  }
  reconvertItem(e) {
    this.model.change(() => {
      this.model.document.differ._refreshItem(e);
    });
  }
}
class Yx extends xe() {
  constructor() {
    super();
    m(this, "_sourceDefinitions", {});
    m(this, "_attributeProperties", /* @__PURE__ */ Object.create(null));
    m(this, "_customChildChecks", /* @__PURE__ */ new Map());
    m(this, "_customAttributeChecks", /* @__PURE__ */ new Map());
    m(this, "_genericCheckSymbol", Symbol("$generic"));
    m(this, "_compiledDefinitions");
    this.decorate("checkChild"), this.decorate("checkAttribute"), this.on("checkAttribute", (e, t) => {
      t[0] = new En(t[0]);
    }, { priority: "highest" }), this.on("checkChild", (e, t) => {
      t[0] = new En(t[0]), t[1] = this.getDefinition(t[1]);
    }, { priority: "highest" });
  }
  register(e, t) {
    if (this._sourceDefinitions[e]) throw new v("schema-cannot-register-item-twice", this, { itemName: e });
    this._sourceDefinitions[e] = [Object.assign({}, t)], this._clearCache();
  }
  extend(e, t) {
    if (!this._sourceDefinitions[e]) throw new v("schema-cannot-extend-missing-item", this, { itemName: e });
    this._sourceDefinitions[e].push(Object.assign({}, t)), this._clearCache();
  }
  getDefinitions() {
    return this._compiledDefinitions || this._compile(), this._compiledDefinitions;
  }
  getDefinition(e) {
    let t;
    return t = typeof e == "string" ? e : "is" in e && (e.is("$text") || e.is("$textProxy")) ? "$text" : e.name, this.getDefinitions()[t];
  }
  isRegistered(e) {
    return !!this.getDefinition(e);
  }
  isBlock(e) {
    const t = this.getDefinition(e);
    return !(!t || !t.isBlock);
  }
  isLimit(e) {
    const t = this.getDefinition(e);
    return !!t && !(!t.isLimit && !t.isObject);
  }
  isObject(e) {
    const t = this.getDefinition(e);
    return !!t && !!(t.isObject || t.isLimit && t.isSelectable && t.isContent);
  }
  isInline(e) {
    const t = this.getDefinition(e);
    return !(!t || !t.isInline);
  }
  isSelectable(e) {
    const t = this.getDefinition(e);
    return !!t && !(!t.isSelectable && !t.isObject);
  }
  isContent(e) {
    const t = this.getDefinition(e);
    return !!t && !(!t.isContent && !t.isObject);
  }
  checkChild(e, t) {
    return !!t && this._checkContextMatch(e, t);
  }
  checkAttribute(e, t) {
    const n = this.getDefinition(e.last);
    if (!n) return !1;
    const r = this._evaluateAttributeChecks(e, t);
    return r !== void 0 ? r : n.allowAttributes.includes(t);
  }
  checkMerge(e, t) {
    if (e instanceof I) {
      const n = e.nodeBefore, r = e.nodeAfter;
      if (!(n instanceof Re)) throw new v("schema-check-merge-no-element-before", this);
      if (!(r instanceof Re)) throw new v("schema-check-merge-no-element-after", this);
      return this.checkMerge(n, r);
    }
    if (this.isLimit(e) || this.isLimit(t)) return !1;
    for (const n of t.getChildren()) if (!this.checkChild(e, n)) return !1;
    return !0;
  }
  addChildCheck(e, t) {
    const n = t !== void 0 ? t : this._genericCheckSymbol, r = this._customChildChecks.get(n) || [];
    r.push(e), this._customChildChecks.set(n, r);
  }
  addAttributeCheck(e, t) {
    const n = t !== void 0 ? t : this._genericCheckSymbol, r = this._customAttributeChecks.get(n) || [];
    r.push(e), this._customAttributeChecks.set(n, r);
  }
  setAttributeProperties(e, t) {
    this._attributeProperties[e] = Object.assign(this.getAttributeProperties(e), t);
  }
  getAttributeProperties(e) {
    return this._attributeProperties[e] || /* @__PURE__ */ Object.create(null);
  }
  getLimitElement(e) {
    let t;
    for (e instanceof I ? t = e.parent : t = (e instanceof T ? [e] : Array.from(e.getRanges())).reduce((n, r) => {
      const s = r.getCommonAncestor();
      return n ? n.getCommonAncestor(s, { includeSelf: !0 }) : s;
    }, null); !this.isLimit(t) && t.parent; ) t = t.parent;
    return t;
  }
  checkAttributeInSelection(e, t) {
    if (e.isCollapsed) {
      const n = [...e.getFirstPosition().getAncestors(), new $e("", e.getAttributes())];
      return this.checkAttribute(n, t);
    }
    {
      const n = e.getRanges();
      for (const r of n) for (const s of r) if (this.checkAttribute(s.item, t)) return !0;
    }
    return !1;
  }
  *getValidRanges(e, t) {
    e = function* (n) {
      for (const r of n) yield* r.getMinimalFlatRanges();
    }(e);
    for (const n of e) yield* this._getValidRangesForRange(n, t);
  }
  getNearestSelectionRange(e, t = "both") {
    if (e.root.rootName == "$graveyard") return null;
    if (this.checkChild(e, "$text")) return new T(e);
    let n, r;
    const s = e.getAncestors().reverse().find((a) => this.isLimit(a)) || e.root;
    t != "both" && t != "backward" || (n = new Ji({ boundaries: T._createIn(s), startPosition: e, direction: "backward" })), t != "both" && t != "forward" || (r = new Ji({ boundaries: T._createIn(s), startPosition: e }));
    for (const a of function* (l, c) {
      let d = !1;
      for (; !d; ) {
        if (d = !0, l) {
          const u = l.next();
          u.done || (d = !1, yield { walker: l, value: u.value });
        }
        if (c) {
          const u = c.next();
          u.done || (d = !1, yield { walker: c, value: u.value });
        }
      }
    }(n, r)) {
      const l = a.walker == n ? "elementEnd" : "elementStart", c = a.value;
      if (c.type == l && this.isObject(c.item)) return T._createOn(c.item);
      if (this.checkChild(c.nextPosition, "$text")) return new T(c.nextPosition);
    }
    return null;
  }
  findAllowedParent(e, t) {
    let n = e.parent;
    for (; n; ) {
      if (this.checkChild(n, t)) return n;
      if (this.isLimit(n)) return null;
      n = n.parent;
    }
    return null;
  }
  setAllowedAttributes(e, t, n) {
    const r = n.model;
    for (const [s, a] of Object.entries(t)) r.schema.checkAttribute(e, s) && n.setAttribute(s, a, e);
  }
  removeDisallowedAttributes(e, t) {
    for (const n of e) if (n.is("$text")) wm(this, n, t);
    else {
      const r = T._createIn(n).getPositions();
      for (const s of r)
        wm(this, s.nodeBefore || s.parent, t);
    }
  }
  getAttributesWithProperty(e, t, n) {
    const r = {};
    for (const [s, a] of e.getAttributes()) {
      const l = this.getAttributeProperties(s);
      l[t] !== void 0 && (n !== void 0 && n !== l[t] || (r[s] = a));
    }
    return r;
  }
  createContext(e) {
    return new En(e);
  }
  _clearCache() {
    this._compiledDefinitions = null;
  }
  _compile() {
    const e = {}, t = this._sourceDefinitions, n = Object.keys(t);
    for (const s of n) e[s] = Qx(t[s], s);
    const r = Object.values(e);
    for (const s of r) Jx(e, s), Xx(e, s), e5(e, s), t5(e, s);
    for (const s of r) i5(e, s);
    for (const s of r) n5(e, s);
    for (const s of r) o5(e, s);
    for (const s of r) r5(e, s);
    for (const s of r) s5(e, s);
    this._compiledDefinitions = function(s) {
      const a = {};
      for (const l of Object.values(s)) a[l.name] = { name: l.name, isBlock: !!l.isBlock, isContent: !!l.isContent, isInline: !!l.isInline, isLimit: !!l.isLimit, isObject: !!l.isObject, isSelectable: !!l.isSelectable, allowIn: Array.from(l.allowIn).filter((c) => !!s[c]), allowChildren: Array.from(l.allowChildren).filter((c) => !!s[c]), allowAttributes: Array.from(l.allowAttributes) };
      return a;
    }(e);
  }
  _checkContextMatch(e, t) {
    const n = e.last;
    let r = this._evaluateChildChecks(e, t);
    if (r = r !== void 0 ? r : t.allowIn.includes(n.name), !r) return !1;
    const s = this.getDefinition(n), a = e.trimLast();
    return !!s && (a.length == 0 || this._checkContextMatch(a, s));
  }
  _evaluateChildChecks(e, t) {
    const n = this._customChildChecks.get(this._genericCheckSymbol) || [], r = this._customChildChecks.get(t.name) || [];
    for (const s of [...n, ...r]) {
      const a = s(e, t);
      if (a !== void 0) return a;
    }
  }
  _evaluateAttributeChecks(e, t) {
    const n = this._customAttributeChecks.get(this._genericCheckSymbol) || [], r = this._customAttributeChecks.get(t) || [];
    for (const s of [...n, ...r]) {
      const a = s(e, t);
      if (a !== void 0) return a;
    }
  }
  *_getValidRangesForRange(e, t) {
    let n = e.start, r = e.start;
    for (const s of e.getItems({ shallow: !0 })) s.is("element") && (yield* this._getValidRangesForRange(T._createIn(s), t)), this.checkAttribute(s, t) || (n.isEqual(r) || (yield new T(n, r)), n = I._createAfter(s)), r = I._createAfter(s);
    n.isEqual(r) || (yield new T(n, r));
  }
  findOptimalInsertionRange(e, t) {
    const n = e.getSelectedElement();
    if (n && this.isObject(n) && !this.isInline(n)) return t == "before" || t == "after" ? new T(I._createAt(n, t)) : T._createOn(n);
    const r = Te(e.getSelectedBlocks());
    if (!r) return new T(e.focus);
    if (r.isEmpty) return new T(I._createAt(r, 0));
    const s = I._createAfter(r);
    return e.focus.isTouching(s) ? new T(s) : new T(I._createBefore(r));
  }
}
class En {
  constructor(i) {
    m(this, "_items");
    if (i instanceof En) return i;
    let e;
    e = typeof i == "string" ? [i] : Array.isArray(i) ? i : i.getAncestors({ includeSelf: !0 }), this._items = e.map(a5);
  }
  get length() {
    return this._items.length;
  }
  get last() {
    return this._items[this._items.length - 1];
  }
  [Symbol.iterator]() {
    return this._items[Symbol.iterator]();
  }
  push(i) {
    const e = new En([i]);
    return e._items = [...this._items, ...e._items], e;
  }
  trimLast() {
    const i = new En([]);
    return i._items = this._items.slice(0, -1), i;
  }
  getItem(i) {
    return this._items[i];
  }
  *getNames() {
    yield* this._items.map((i) => i.name);
  }
  endsWith(i) {
    return Array.from(this.getNames()).join(" ").endsWith(i);
  }
  startsWith(i) {
    return Array.from(this.getNames()).join(" ").startsWith(i);
  }
}
function Qx(o, i) {
  const e = { name: i, allowIn: /* @__PURE__ */ new Set(), allowChildren: /* @__PURE__ */ new Set(), disallowIn: /* @__PURE__ */ new Set(), disallowChildren: /* @__PURE__ */ new Set(), allowContentOf: /* @__PURE__ */ new Set(), allowWhere: /* @__PURE__ */ new Set(), allowAttributes: /* @__PURE__ */ new Set(), disallowAttributes: /* @__PURE__ */ new Set(), allowAttributesOf: /* @__PURE__ */ new Set(), inheritTypesFrom: /* @__PURE__ */ new Set() };
  return function(t, n) {
    for (const r of t) {
      const s = Object.keys(r).filter((a) => a.startsWith("is"));
      for (const a of s) n[a] = !!r[a];
    }
  }(o, e), Ei(o, e, "allowIn"), Ei(o, e, "allowChildren"), Ei(o, e, "disallowIn"), Ei(o, e, "disallowChildren"), Ei(o, e, "allowContentOf"), Ei(o, e, "allowWhere"), Ei(o, e, "allowAttributes"), Ei(o, e, "disallowAttributes"), Ei(o, e, "allowAttributesOf"), Ei(o, e, "inheritTypesFrom"), function(t, n) {
    for (const r of t) {
      const s = r.inheritAllFrom;
      s && (n.allowContentOf.add(s), n.allowWhere.add(s), n.allowAttributesOf.add(s), n.inheritTypesFrom.add(s));
    }
  }(o, e), e;
}
function Jx(o, i) {
  for (const e of i.allowIn) {
    const t = o[e];
    t ? t.allowChildren.add(i.name) : i.allowIn.delete(e);
  }
}
function Xx(o, i) {
  for (const e of i.allowChildren) {
    const t = o[e];
    t ? t.allowIn.add(i.name) : i.allowChildren.delete(e);
  }
}
function e5(o, i) {
  for (const e of i.disallowIn) {
    const t = o[e];
    t ? t.disallowChildren.add(i.name) : i.disallowIn.delete(e);
  }
}
function t5(o, i) {
  for (const e of i.disallowChildren) {
    const t = o[e];
    t ? t.disallowIn.add(i.name) : i.disallowChildren.delete(e);
  }
}
function i5(o, i) {
  for (const e of i.disallowChildren) i.allowChildren.delete(e);
  for (const e of i.disallowIn) i.allowIn.delete(e);
  for (const e of i.disallowAttributes) i.allowAttributes.delete(e);
}
function n5(o, i) {
  for (const e of i.allowContentOf) {
    const t = o[e];
    t && (t.disallowChildren.forEach((n) => {
      i.allowChildren.has(n) || (i.disallowChildren.add(n), o[n].disallowIn.add(i.name));
    }), t.allowChildren.forEach((n) => {
      i.disallowChildren.has(n) || (i.allowChildren.add(n), o[n].allowIn.add(i.name));
    }));
  }
}
function o5(o, i) {
  for (const e of i.allowWhere) {
    const t = o[e];
    t && (t.disallowIn.forEach((n) => {
      i.allowIn.has(n) || (i.disallowIn.add(n), o[n].disallowChildren.add(i.name));
    }), t.allowIn.forEach((n) => {
      i.disallowIn.has(n) || (i.allowIn.add(n), o[n].allowChildren.add(i.name));
    }));
  }
}
function r5(o, i) {
  for (const e of i.allowAttributesOf) {
    const t = o[e];
    if (!t) return;
    t.allowAttributes.forEach((n) => {
      i.disallowAttributes.has(n) || i.allowAttributes.add(n);
    });
  }
}
function s5(o, i) {
  for (const e of i.inheritTypesFrom) {
    const t = o[e];
    if (t) {
      const n = Object.keys(t).filter((r) => r.startsWith("is"));
      for (const r of n) r in i || (i[r] = t[r]);
    }
  }
}
function Ei(o, i, e) {
  for (const t of o) {
    let n = t[e];
    typeof n == "string" && (n = [n]), Array.isArray(n) && n.forEach((r) => i[e].add(r));
  }
}
function a5(o) {
  return typeof o == "string" || o.is("documentFragment") ? { name: typeof o == "string" ? o : "$documentFragment", *getAttributeKeys() {
  }, getAttribute() {
  } } : { name: o.is("element") ? o.name : "$text", *getAttributeKeys() {
    yield* o.getAttributeKeys();
  }, getAttribute: (i) => o.getAttribute(i) };
}
function wm(o, i, e) {
  for (const t of i.getAttributeKeys()) o.checkAttribute(i, t) || e.removeAttribute(t, i);
}
class l5 extends Ae() {
  constructor(e) {
    super();
    m(this, "conversionApi");
    m(this, "_splitParts", /* @__PURE__ */ new Map());
    m(this, "_cursorParents", /* @__PURE__ */ new Map());
    m(this, "_modelCursor", null);
    m(this, "_emptyElementsToKeep", /* @__PURE__ */ new Set());
    this.conversionApi = { ...e, consumable: null, writer: null, store: null, convertItem: (t, n) => this._convertItem(t, n), convertChildren: (t, n) => this._convertChildren(t, n), safeInsert: (t, n) => this._safeInsert(t, n), updateConversionResult: (t, n) => this._updateConversionResult(t, n), splitToAllowedParent: (t, n) => this._splitToAllowedParent(t, n), getSplitParts: (t) => this._getSplitParts(t), keepEmptyElement: (t) => this._keepEmptyElement(t) };
  }
  convert(e, t, n = ["$root"]) {
    this.fire("viewCleanup", e), this._modelCursor = function(a, l) {
      let c;
      for (const d of new En(a)) {
        const u = {};
        for (const g of d.getAttributeKeys()) u[g] = d.getAttribute(g);
        const h = l.createElement(d.name, u);
        c && l.insert(h, c), c = I._createAt(h, 0);
      }
      return c;
    }(n, t), this.conversionApi.writer = t, this.conversionApi.consumable = Ca.createFrom(e), this.conversionApi.store = {};
    const { modelRange: r } = this._convertItem(e, this._modelCursor), s = t.createDocumentFragment();
    if (r) {
      this._removeEmptyElements();
      const a = this._modelCursor.parent, l = a._removeChildren(0, a.childCount);
      s._insertChild(0, l), s.markers = function(c, d) {
        const u = /* @__PURE__ */ new Set(), h = /* @__PURE__ */ new Map(), g = T._createIn(c).getItems();
        for (const p of g) p.is("element", "$marker") && u.add(p);
        for (const p of u) {
          const f = p.getAttribute("data-name"), b = d.createPositionBefore(p);
          h.has(f) ? h.get(f).end = b.clone() : h.set(f, new T(b.clone())), d.remove(p);
        }
        return h;
      }(s, t);
    }
    return this._modelCursor = null, this._splitParts.clear(), this._cursorParents.clear(), this._emptyElementsToKeep.clear(), this.conversionApi.writer = null, this.conversionApi.store = null, s;
  }
  _convertItem(e, t) {
    const n = { viewItem: e, modelCursor: t, modelRange: null };
    if (e.is("element") ? this.fire(`element:${e.name}`, n, this.conversionApi) : e.is("$text") ? this.fire("text", n, this.conversionApi) : this.fire("documentFragment", n, this.conversionApi), n.modelRange && !(n.modelRange instanceof T)) throw new v("view-conversion-dispatcher-incorrect-result", this);
    return { modelRange: n.modelRange, modelCursor: n.modelCursor };
  }
  _convertChildren(e, t) {
    let n = t.is("position") ? t : I._createAt(t, 0);
    const r = new T(n);
    for (const s of Array.from(e.getChildren())) {
      const a = this._convertItem(s, n);
      a.modelRange instanceof T && (r.end = a.modelRange.end, n = a.modelCursor);
    }
    return { modelRange: r, modelCursor: n };
  }
  _safeInsert(e, t) {
    const n = this._splitToAllowedParent(e, t);
    return !!n && (this.conversionApi.writer.insert(e, n.position), !0);
  }
  _updateConversionResult(e, t) {
    const n = this._getSplitParts(e), r = this.conversionApi.writer;
    t.modelRange || (t.modelRange = r.createRange(r.createPositionBefore(e), r.createPositionAfter(n[n.length - 1])));
    const s = this._cursorParents.get(e);
    t.modelCursor = s ? r.createPositionAt(s, 0) : t.modelRange.end;
  }
  _splitToAllowedParent(e, t) {
    const { schema: n, writer: r } = this.conversionApi;
    let s = n.findAllowedParent(t, e);
    if (s) {
      if (s === t.parent) return { position: t };
      this._modelCursor.parent.getAncestors().includes(s) && (s = null);
    }
    if (!s) return o_(t, e, n) ? { position: r_(t, r) } : null;
    const a = this.conversionApi.writer.split(t, s), l = [];
    for (const d of a.range.getWalker()) if (d.type == "elementEnd") l.push(d.item);
    else {
      const u = l.pop(), h = d.item;
      this._registerSplitPair(u, h);
    }
    const c = a.range.end.parent;
    return this._cursorParents.set(e, c), { position: a.position, cursorParent: c };
  }
  _registerSplitPair(e, t) {
    this._splitParts.has(e) || this._splitParts.set(e, [e]);
    const n = this._splitParts.get(e);
    this._splitParts.set(t, n), n.push(t);
  }
  _getSplitParts(e) {
    let t;
    return t = this._splitParts.has(e) ? this._splitParts.get(e) : [e], t;
  }
  _keepEmptyElement(e) {
    this._emptyElementsToKeep.add(e);
  }
  _removeEmptyElements() {
    const e = /* @__PURE__ */ new Map();
    for (const t of this._splitParts.keys()) if (t.isEmpty && !this._emptyElementsToKeep.has(t)) {
      const n = e.get(t.parent) || [];
      n.push(t), this._splitParts.delete(t), e.set(t.parent, n);
    }
    for (const [t, n] of e) t._removeChildrenArray(n);
    e.size && this._removeEmptyElements();
  }
}
class c5 {
  getHtml(i) {
    const e = z.document.implementation.createHTMLDocument("").createElement("div");
    return e.appendChild(i), e.innerHTML;
  }
}
class a_ {
  constructor(i) {
    m(this, "domParser");
    m(this, "domConverter");
    m(this, "htmlWriter");
    m(this, "skipComments", !0);
    this.domParser = new DOMParser(), this.domConverter = new hl(i, { renderingMode: "data" }), this.htmlWriter = new c5();
  }
  toData(i) {
    const e = this.domConverter.viewToDom(i);
    return this.htmlWriter.getHtml(e);
  }
  toView(i) {
    const e = this._toDom(i);
    return this.domConverter.domToView(e, { skipComments: this.skipComments });
  }
  registerRawContentMatcher(i) {
    this.domConverter.registerRawContentMatcher(i);
  }
  useFillerType(i) {
    this.domConverter.blockFillerMode = i == "marked" ? "markedNbsp" : "nbsp";
  }
  _toDom(i) {
    /<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(i.trim().slice(0, 1e4)) || (i = `<body>${i}</body>`);
    const e = this.domParser.parseFromString(i, "text/html"), t = e.createDocumentFragment(), n = e.body.childNodes;
    for (; n.length > 0; ) t.appendChild(n[0]);
    return t;
  }
}
class d5 extends Ae() {
  constructor(e, t) {
    super();
    m(this, "model");
    m(this, "mapper");
    m(this, "downcastDispatcher");
    m(this, "upcastDispatcher");
    m(this, "viewDocument");
    m(this, "stylesProcessor");
    m(this, "htmlProcessor");
    m(this, "processor");
    m(this, "_viewWriter");
    this.model = e, this.mapper = new Jk(), this.downcastDispatcher = new Xk({ mapper: this.mapper, schema: e.schema }), this.downcastDispatcher.on("insert:$text", (n, r, s) => {
      if (!s.consumable.consume(r.item, n.name)) return;
      const a = s.writer, l = s.mapper.toViewPosition(r.range.start), c = a.createText(r.item.data);
      a.insert(l, c);
    }, { priority: "lowest" }), this.downcastDispatcher.on("insert", (n, r, s) => {
      s.convertAttributes(r.item), r.reconversion || !r.item.is("element") || r.item.isEmpty || s.convertChildren(r.item);
    }, { priority: "lowest" }), this.upcastDispatcher = new l5({ schema: e.schema }), this.viewDocument = new dl(t), this.stylesProcessor = t, this.htmlProcessor = new a_(this.viewDocument), this.processor = this.htmlProcessor, this._viewWriter = new Cu(this.viewDocument), this.upcastDispatcher.on("text", (n, r, { schema: s, consumable: a, writer: l }) => {
      let c = r.modelCursor;
      if (!a.test(r.viewItem)) return;
      if (!s.checkChild(c, "$text")) {
        if (!o_(c, "$text", s) || r.viewItem.data.trim().length == 0) return;
        c = r_(c, l);
      }
      a.consume(r.viewItem);
      const d = l.createText(r.viewItem.data);
      l.insert(d, c), r.modelRange = l.createRange(c, c.getShiftedBy(d.offsetSize)), r.modelCursor = r.modelRange.end;
    }, { priority: "lowest" }), this.upcastDispatcher.on("element", (n, r, s) => {
      if (!r.modelRange && s.consumable.consume(r.viewItem, { name: !0 })) {
        const { modelRange: a, modelCursor: l } = s.convertChildren(r.viewItem, r.modelCursor);
        r.modelRange = a, r.modelCursor = l;
      }
    }, { priority: "lowest" }), this.upcastDispatcher.on("documentFragment", (n, r, s) => {
      if (!r.modelRange && s.consumable.consume(r.viewItem, { name: !0 })) {
        const { modelRange: a, modelCursor: l } = s.convertChildren(r.viewItem, r.modelCursor);
        r.modelRange = a, r.modelCursor = l;
      }
    }, { priority: "lowest" }), xe().prototype.decorate.call(this, "init"), xe().prototype.decorate.call(this, "set"), xe().prototype.decorate.call(this, "get"), xe().prototype.decorate.call(this, "toView"), xe().prototype.decorate.call(this, "toModel"), this.on("init", () => {
      this.fire("ready");
    }, { priority: "lowest" }), this.on("ready", () => {
      this.model.enqueueChange({ isUndoable: !1 }, n_);
    }, { priority: "lowest" });
  }
  get(e = {}) {
    const { rootName: t = "main", trim: n = "empty" } = e;
    if (!this._checkIfRootsExists([t])) throw new v("datacontroller-get-non-existent-root", this);
    const r = this.model.document.getRoot(t);
    return r.isAttached() || ce("datacontroller-get-detached-root", this), n !== "empty" || this.model.hasContent(r, { ignoreWhitespaces: !0 }) ? this.stringify(r, e) : "";
  }
  stringify(e, t = {}) {
    const n = this.toView(e, t);
    return this.processor.toData(n);
  }
  toView(e, t = {}) {
    const n = this.viewDocument, r = this._viewWriter;
    this.mapper.clearBindings();
    const s = T._createIn(e), a = new eo(n);
    this.mapper.bindElements(e, a);
    const l = e.is("documentFragment") ? e.markers : function(c) {
      const d = [], u = c.root.document;
      if (!u) return /* @__PURE__ */ new Map();
      const h = T._createIn(c);
      for (const g of u.model.markers) {
        const p = g.getRange(), f = p.isCollapsed, b = p.start.isEqual(h.start) || p.end.isEqual(h.end);
        if (f && b) d.push([g.name, p]);
        else {
          const k = h.getIntersection(p);
          k && d.push([g.name, k]);
        }
      }
      return d.sort(([g, p], [f, b]) => {
        if (p.end.compareWith(b.start) !== "after") return 1;
        if (p.start.compareWith(b.end) !== "before") return -1;
        switch (p.start.compareWith(b.start)) {
          case "before":
            return 1;
          case "after":
            return -1;
          default:
            switch (p.end.compareWith(b.end)) {
              case "before":
                return 1;
              case "after":
                return -1;
              default:
                return f.localeCompare(g);
            }
        }
      }), new Map(d);
    }(e);
    return this.downcastDispatcher.convert(s, l, r, t), a;
  }
  init(e) {
    if (this.model.document.version) throw new v("datacontroller-init-document-not-empty", this);
    let t = {};
    if (typeof e == "string" ? t.main = e : t = e, !this._checkIfRootsExists(Object.keys(t))) throw new v("datacontroller-init-non-existent-root", this);
    return this.model.enqueueChange({ isUndoable: !1 }, (n) => {
      for (const r of Object.keys(t)) {
        const s = this.model.document.getRoot(r);
        n.insert(this.parse(t[r], s), s, 0);
      }
    }), Promise.resolve();
  }
  set(e, t = {}) {
    let n = {};
    if (typeof e == "string" ? n.main = e : n = e, !this._checkIfRootsExists(Object.keys(n))) throw new v("datacontroller-set-non-existent-root", this);
    this.model.enqueueChange(t.batchType || {}, (r) => {
      r.setSelection(null), r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());
      for (const s of Object.keys(n)) {
        const a = this.model.document.getRoot(s);
        r.remove(r.createRangeIn(a)), r.insert(this.parse(n[s], a), a, 0);
      }
    });
  }
  parse(e, t = "$root") {
    const n = this.processor.toView(e);
    return this.toModel(n, t);
  }
  toModel(e, t = "$root") {
    return this.model.change((n) => this.upcastDispatcher.convert(e, n, t));
  }
  addStyleProcessorRules(e) {
    e(this.stylesProcessor);
  }
  registerRawContentMatcher(e) {
    this.processor && this.processor !== this.htmlProcessor && this.processor.registerRawContentMatcher(e), this.htmlProcessor.registerRawContentMatcher(e);
  }
  destroy() {
    this.stopListening();
  }
  _checkIfRootsExists(e) {
    for (const t of e) if (!this.model.document.getRoot(t)) return !1;
    return !0;
  }
}
class u5 {
  constructor(i, e) {
    m(this, "_helpers", /* @__PURE__ */ new Map());
    m(this, "_downcast");
    m(this, "_upcast");
    this._downcast = De(i), this._createConversionHelpers({ name: "downcast", dispatchers: this._downcast, isDowncast: !0 }), this._upcast = De(e), this._createConversionHelpers({ name: "upcast", dispatchers: this._upcast, isDowncast: !1 });
  }
  addAlias(i, e) {
    const t = this._downcast.includes(e);
    if (!this._upcast.includes(e) && !t) throw new v("conversion-add-alias-dispatcher-not-registered", this);
    this._createConversionHelpers({ name: i, dispatchers: [e], isDowncast: t });
  }
  for(i) {
    if (!this._helpers.has(i)) throw new v("conversion-for-unknown-group", this);
    return this._helpers.get(i);
  }
  elementToElement(i) {
    this.for("downcast").elementToElement(i);
    for (const { model: e, view: t } of Hl(i)) this.for("upcast").elementToElement({ model: e, view: t, converterPriority: i.converterPriority });
  }
  attributeToElement(i) {
    this.for("downcast").attributeToElement(i);
    for (const { model: e, view: t } of Hl(i)) this.for("upcast").elementToAttribute({ view: t, model: e, converterPriority: i.converterPriority });
  }
  attributeToAttribute(i) {
    this.for("downcast").attributeToAttribute(i);
    for (const { model: e, view: t } of Hl(i)) this.for("upcast").attributeToAttribute({ view: t, model: e });
  }
  _createConversionHelpers({ name: i, dispatchers: e, isDowncast: t }) {
    if (this._helpers.has(i)) throw new v("conversion-group-exists", this);
    const n = t ? new jx(e) : new Gx(e);
    this._helpers.set(i, n);
  }
}
function* Hl(o) {
  if (o.model.values) for (const i of o.model.values) {
    const e = { key: o.model.key, value: i }, t = o.view[i], n = o.upcastAlso ? o.upcastAlso[i] : void 0;
    yield* vm(e, t, n);
  }
  else yield* vm(o.model, o.view, o.upcastAlso);
}
function* vm(o, i, e) {
  if (yield { model: o, view: i }, e) for (const t of De(e)) yield { model: o, view: t };
}
class Jt {
  constructor(i) {
    m(this, "baseVersion");
    m(this, "isDocumentOperation");
    m(this, "batch");
    this.baseVersion = i, this.isDocumentOperation = this.baseVersion !== null, this.batch = null;
  }
  _validate() {
  }
  toJSON() {
    const i = Object.assign({}, this);
    return i.__className = this.constructor.className, delete i.batch, delete i.isDocumentOperation, i;
  }
  static get className() {
    return "Operation";
  }
  static fromJSON(i, e) {
    return new this(i.baseVersion);
  }
}
function Eu(o, i) {
  const e = c_(i), t = e.reduce((s, a) => s + a.offsetSize, 0), n = o.parent;
  as(o);
  const r = o.index;
  return n._insertChild(r, e), ss(n, r + e.length), ss(n, r), new T(o, o.getShiftedBy(t));
}
function l_(o) {
  if (!o.isFlat) throw new v("operation-utils-remove-range-not-flat", this);
  const i = o.start.parent;
  as(o.start), as(o.end);
  const e = i._removeChildren(o.start.index, o.end.index - o.start.index);
  return ss(i, o.start.index), e;
}
function rs(o, i) {
  if (!o.isFlat) throw new v("operation-utils-move-range-not-flat", this);
  const e = l_(o);
  return Eu(i = i._getTransformedByDeletion(o.start, o.end.offset - o.start.offset), e);
}
function c_(o) {
  const i = [];
  (function e(t) {
    if (typeof t == "string") i.push(new $e(t));
    else if (t instanceof bi) i.push(new $e(t.data, t.getAttributes()));
    else if (t instanceof uo) i.push(t);
    else if (Qt(t)) for (const n of t) e(n);
  })(o);
  for (let e = 1; e < i.length; e++) {
    const t = i[e], n = i[e - 1];
    t instanceof $e && n instanceof $e && d_(t, n) && (i.splice(e - 1, 2, new $e(n.data + t.data, n.getAttributes())), e--);
  }
  return i;
}
function ss(o, i) {
  const e = o.getChild(i - 1), t = o.getChild(i);
  if (e && t && e.is("$text") && t.is("$text") && d_(e, t)) {
    const n = new $e(e.data + t.data, e.getAttributes());
    o._removeChildren(i - 1, 2), o._insertChild(i - 1, n);
  }
}
function as(o) {
  const i = o.textNode, e = o.parent;
  if (i) {
    const t = o.offset - i.startOffset, n = i.index;
    e._removeChildren(n, 1);
    const r = new $e(i.data.substr(0, t), i.getAttributes()), s = new $e(i.data.substr(t), i.getAttributes());
    e._insertChild(n, [r, s]);
  }
}
function d_(o, i) {
  const e = o.getAttributes(), t = i.getAttributes();
  for (const n of e) {
    if (n[1] !== i.getAttribute(n[0])) return !1;
    t.next();
  }
  return t.next().done;
}
class pe extends Jt {
  constructor(e, t, n, r) {
    super(r);
    m(this, "sourcePosition");
    m(this, "howMany");
    m(this, "targetPosition");
    this.sourcePosition = e.clone(), this.sourcePosition.stickiness = "toNext", this.howMany = t, this.targetPosition = n.clone(), this.targetPosition.stickiness = "toNone";
  }
  get type() {
    return this.targetPosition.root.rootName == "$graveyard" ? "remove" : this.sourcePosition.root.rootName == "$graveyard" ? "reinsert" : "move";
  }
  get affectedSelectable() {
    return [T._createFromPositionAndShift(this.sourcePosition, this.howMany), T._createFromPositionAndShift(this.targetPosition, 0)];
  }
  clone() {
    return new pe(this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion);
  }
  getMovedRangeStart() {
    return this.targetPosition._getTransformedByDeletion(this.sourcePosition, this.howMany);
  }
  getReversed() {
    const e = this.sourcePosition._getTransformedByInsertion(this.targetPosition, this.howMany);
    return new pe(this.getMovedRangeStart(), this.howMany, e, this.baseVersion + 1);
  }
  _validate() {
    const e = this.sourcePosition.parent, t = this.targetPosition.parent, n = this.sourcePosition.offset, r = this.targetPosition.offset;
    if (n + this.howMany > e.maxOffset) throw new v("move-operation-nodes-do-not-exist", this);
    if (e === t && n < r && r < n + this.howMany) throw new v("move-operation-range-into-itself", this);
    if (this.sourcePosition.root == this.targetPosition.root && At(this.sourcePosition.getParentPath(), this.targetPosition.getParentPath()) == "prefix") {
      const s = this.sourcePosition.path.length - 1;
      if (this.targetPosition.path[s] >= n && this.targetPosition.path[s] < n + this.howMany) throw new v("move-operation-node-into-itself", this);
    }
  }
  _execute() {
    rs(T._createFromPositionAndShift(this.sourcePosition, this.howMany), this.targetPosition);
  }
  toJSON() {
    const e = super.toJSON();
    return e.sourcePosition = this.sourcePosition.toJSON(), e.targetPosition = this.targetPosition.toJSON(), e;
  }
  static get className() {
    return "MoveOperation";
  }
  static fromJSON(e, t) {
    const n = I.fromJSON(e.sourcePosition, t), r = I.fromJSON(e.targetPosition, t);
    return new this(n, e.howMany, r, e.baseVersion);
  }
}
class mt extends Jt {
  constructor(e, t, n) {
    super(n);
    m(this, "position");
    m(this, "nodes");
    m(this, "shouldReceiveAttributes");
    this.position = e.clone(), this.position.stickiness = "toNone", this.nodes = new Ur(c_(t)), this.shouldReceiveAttributes = !1;
  }
  get type() {
    return "insert";
  }
  get howMany() {
    return this.nodes.maxOffset;
  }
  get affectedSelectable() {
    return this.position.clone();
  }
  clone() {
    const e = new Ur([...this.nodes].map((n) => n._clone(!0))), t = new mt(this.position, e, this.baseVersion);
    return t.shouldReceiveAttributes = this.shouldReceiveAttributes, t;
  }
  getReversed() {
    const e = this.position.root.document.graveyard, t = new I(e, [0]);
    return new pe(this.position, this.nodes.maxOffset, t, this.baseVersion + 1);
  }
  _validate() {
    const e = this.position.parent;
    if (!e || e.maxOffset < this.position.offset) throw new v("insert-operation-position-invalid", this);
  }
  _execute() {
    const e = this.nodes;
    this.nodes = new Ur([...e].map((t) => t._clone(!0))), Eu(this.position, e);
  }
  toJSON() {
    const e = super.toJSON();
    return e.position = this.position.toJSON(), e.nodes = this.nodes.toJSON(), e;
  }
  static get className() {
    return "InsertOperation";
  }
  static fromJSON(e, t) {
    const n = [];
    for (const s of e.nodes) s.name ? n.push(Re.fromJSON(s)) : n.push($e.fromJSON(s));
    const r = new mt(I.fromJSON(e.position, t), n, e.baseVersion);
    return r.shouldReceiveAttributes = e.shouldReceiveAttributes, r;
  }
}
class Me extends Jt {
  constructor(e, t, n, r, s) {
    super(s);
    m(this, "splitPosition");
    m(this, "howMany");
    m(this, "insertionPosition");
    m(this, "graveyardPosition");
    this.splitPosition = e.clone(), this.splitPosition.stickiness = "toNext", this.howMany = t, this.insertionPosition = n, this.graveyardPosition = r ? r.clone() : null, this.graveyardPosition && (this.graveyardPosition.stickiness = "toNext");
  }
  get type() {
    return "split";
  }
  get moveTargetPosition() {
    const e = this.insertionPosition.path.slice();
    return e.push(0), new I(this.insertionPosition.root, e);
  }
  get movedRange() {
    const e = this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);
    return new T(this.splitPosition, e);
  }
  get affectedSelectable() {
    const e = [T._createFromPositionAndShift(this.splitPosition, 0), T._createFromPositionAndShift(this.insertionPosition, 0)];
    return this.graveyardPosition && e.push(T._createFromPositionAndShift(this.graveyardPosition, 0)), e;
  }
  clone() {
    return new Me(this.splitPosition, this.howMany, this.insertionPosition, this.graveyardPosition, this.baseVersion);
  }
  getReversed() {
    const e = this.splitPosition.root.document.graveyard, t = new I(e, [0]);
    return new Qe(this.moveTargetPosition, this.howMany, this.splitPosition, t, this.baseVersion + 1);
  }
  _validate() {
    const e = this.splitPosition.parent, t = this.splitPosition.offset;
    if (!e || e.maxOffset < t) throw new v("split-operation-position-invalid", this);
    if (!e.parent) throw new v("split-operation-split-in-root", this);
    if (this.howMany != e.maxOffset - this.splitPosition.offset) throw new v("split-operation-how-many-invalid", this);
    if (this.graveyardPosition && !this.graveyardPosition.nodeAfter) throw new v("split-operation-graveyard-position-invalid", this);
  }
  _execute() {
    const e = this.splitPosition.parent;
    if (this.graveyardPosition) rs(T._createFromPositionAndShift(this.graveyardPosition, 1), this.insertionPosition);
    else {
      const t = e._clone();
      Eu(this.insertionPosition, t);
    }
    rs(new T(I._createAt(e, this.splitPosition.offset), I._createAt(e, e.maxOffset)), this.moveTargetPosition);
  }
  toJSON() {
    const e = super.toJSON();
    return e.splitPosition = this.splitPosition.toJSON(), e.insertionPosition = this.insertionPosition.toJSON(), this.graveyardPosition && (e.graveyardPosition = this.graveyardPosition.toJSON()), e;
  }
  static get className() {
    return "SplitOperation";
  }
  static getInsertionPosition(e) {
    const t = e.path.slice(0, -1);
    return t[t.length - 1]++, new I(e.root, t, "toPrevious");
  }
  static fromJSON(e, t) {
    const n = I.fromJSON(e.splitPosition, t), r = I.fromJSON(e.insertionPosition, t), s = e.graveyardPosition ? I.fromJSON(e.graveyardPosition, t) : null;
    return new this(n, e.howMany, r, s, e.baseVersion);
  }
}
class Qe extends Jt {
  constructor(e, t, n, r, s) {
    super(s);
    m(this, "sourcePosition");
    m(this, "howMany");
    m(this, "targetPosition");
    m(this, "graveyardPosition");
    this.sourcePosition = e.clone(), this.sourcePosition.stickiness = "toPrevious", this.howMany = t, this.targetPosition = n.clone(), this.targetPosition.stickiness = "toNext", this.graveyardPosition = r.clone();
  }
  get type() {
    return "merge";
  }
  get deletionPosition() {
    return new I(this.sourcePosition.root, this.sourcePosition.path.slice(0, -1));
  }
  get movedRange() {
    const e = this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);
    return new T(this.sourcePosition, e);
  }
  get affectedSelectable() {
    const e = this.sourcePosition.parent;
    return [T._createOn(e), T._createFromPositionAndShift(this.targetPosition, 0), T._createFromPositionAndShift(this.graveyardPosition, 0)];
  }
  clone() {
    return new Qe(this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion);
  }
  getReversed() {
    const e = this.targetPosition._getTransformedByMergeOperation(this), t = this.sourcePosition.path.slice(0, -1), n = new I(this.sourcePosition.root, t)._getTransformedByMergeOperation(this);
    return new Me(e, this.howMany, n, this.graveyardPosition, this.baseVersion + 1);
  }
  _validate() {
    const e = this.sourcePosition.parent, t = this.targetPosition.parent;
    if (!e.parent) throw new v("merge-operation-source-position-invalid", this);
    if (!t.parent) throw new v("merge-operation-target-position-invalid", this);
    if (this.howMany != e.maxOffset) throw new v("merge-operation-how-many-invalid", this);
  }
  _execute() {
    const e = this.sourcePosition.parent;
    rs(T._createIn(e), this.targetPosition), rs(T._createOn(e), this.graveyardPosition);
  }
  toJSON() {
    const e = super.toJSON();
    return e.sourcePosition = e.sourcePosition.toJSON(), e.targetPosition = e.targetPosition.toJSON(), e.graveyardPosition = e.graveyardPosition.toJSON(), e;
  }
  static get className() {
    return "MergeOperation";
  }
  static fromJSON(e, t) {
    const n = I.fromJSON(e.sourcePosition, t), r = I.fromJSON(e.targetPosition, t), s = I.fromJSON(e.graveyardPosition, t);
    return new this(n, e.howMany, r, s, e.baseVersion);
  }
}
class Pt extends Jt {
  constructor(e, t, n, r, s, a) {
    super(a);
    m(this, "name");
    m(this, "oldRange");
    m(this, "newRange");
    m(this, "affectsData");
    m(this, "_markers");
    this.name = e, this.oldRange = t ? t.clone() : null, this.newRange = n ? n.clone() : null, this.affectsData = s, this._markers = r;
  }
  get type() {
    return "marker";
  }
  get affectedSelectable() {
    const e = [];
    return this.oldRange && e.push(this.oldRange.clone()), this.newRange && (this.oldRange ? e.push(...this.newRange.getDifference(this.oldRange)) : e.push(this.newRange.clone())), e;
  }
  clone() {
    return new Pt(this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion);
  }
  getReversed() {
    return new Pt(this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1);
  }
  _execute() {
    this.newRange ? this._markers._set(this.name, this.newRange, !0, this.affectsData) : this._markers._remove(this.name);
  }
  toJSON() {
    const e = super.toJSON();
    return this.oldRange && (e.oldRange = this.oldRange.toJSON()), this.newRange && (e.newRange = this.newRange.toJSON()), delete e._markers, e;
  }
  static get className() {
    return "MarkerOperation";
  }
  static fromJSON(e, t) {
    return new Pt(e.name, e.oldRange ? T.fromJSON(e.oldRange, t) : null, e.newRange ? T.fromJSON(e.newRange, t) : null, t.model.markers, e.affectsData, e.baseVersion);
  }
}
class it extends Jt {
  constructor(e, t, n, r, s) {
    super(s);
    m(this, "range");
    m(this, "key");
    m(this, "oldValue");
    m(this, "newValue");
    this.range = e.clone(), this.key = t, this.oldValue = n === void 0 ? null : n, this.newValue = r === void 0 ? null : r;
  }
  get type() {
    return this.oldValue === null ? "addAttribute" : this.newValue === null ? "removeAttribute" : "changeAttribute";
  }
  get affectedSelectable() {
    return this.range.clone();
  }
  clone() {
    return new it(this.range, this.key, this.oldValue, this.newValue, this.baseVersion);
  }
  getReversed() {
    return new it(this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1);
  }
  toJSON() {
    const e = super.toJSON();
    return e.range = this.range.toJSON(), e;
  }
  _validate() {
    if (!this.range.isFlat) throw new v("attribute-operation-range-not-flat", this);
    for (const e of this.range.getItems({ shallow: !0 })) {
      if (this.oldValue !== null && !_a(e.getAttribute(this.key), this.oldValue)) throw new v("attribute-operation-wrong-old-value", this, { item: e, key: this.key, value: this.oldValue });
      if (this.oldValue === null && this.newValue !== null && e.hasAttribute(this.key)) throw new v("attribute-operation-attribute-exists", this, { node: e, key: this.key });
    }
  }
  _execute() {
    _a(this.oldValue, this.newValue) || function(e, t, n) {
      as(e.start), as(e.end);
      for (const r of e.getItems({ shallow: !0 })) {
        const s = r.is("$textProxy") ? r.textNode : r;
        n !== null ? s._setAttribute(t, n) : s._removeAttribute(t), ss(s.parent, s.index);
      }
      ss(e.end.parent, e.end.index);
    }(this.range, this.key, this.newValue);
  }
  static get className() {
    return "AttributeOperation";
  }
  static fromJSON(e, t) {
    return new it(T.fromJSON(e.range, t), e.key, e.oldValue, e.newValue, e.baseVersion);
  }
}
class at extends Jt {
  get type() {
    return "noop";
  }
  get affectedSelectable() {
    return null;
  }
  clone() {
    return new at(this.baseVersion);
  }
  getReversed() {
    return new at(this.baseVersion + 1);
  }
  _execute() {
  }
  static get className() {
    return "NoOperation";
  }
}
class Ft extends Jt {
  constructor(e, t, n, r) {
    super(r);
    m(this, "position");
    m(this, "oldName");
    m(this, "newName");
    this.position = e, this.position.stickiness = "toNext", this.oldName = t, this.newName = n;
  }
  get type() {
    return "rename";
  }
  get affectedSelectable() {
    return this.position.nodeAfter;
  }
  clone() {
    return new Ft(this.position.clone(), this.oldName, this.newName, this.baseVersion);
  }
  getReversed() {
    return new Ft(this.position.clone(), this.newName, this.oldName, this.baseVersion + 1);
  }
  _validate() {
    const e = this.position.nodeAfter;
    if (!(e instanceof Re)) throw new v("rename-operation-wrong-position", this);
    if (e.name !== this.oldName) throw new v("rename-operation-wrong-name", this);
  }
  _execute() {
    this.position.nodeAfter.name = this.newName;
  }
  toJSON() {
    const e = super.toJSON();
    return e.position = this.position.toJSON(), e;
  }
  static get className() {
    return "RenameOperation";
  }
  static fromJSON(e, t) {
    return new Ft(I.fromJSON(e.position, t), e.oldName, e.newName, e.baseVersion);
  }
}
class on extends Jt {
  constructor(e, t, n, r, s) {
    super(s);
    m(this, "root");
    m(this, "key");
    m(this, "oldValue");
    m(this, "newValue");
    this.root = e, this.key = t, this.oldValue = n === void 0 ? null : n, this.newValue = r === void 0 ? null : r;
  }
  get type() {
    return this.oldValue === null ? "addRootAttribute" : this.newValue === null ? "removeRootAttribute" : "changeRootAttribute";
  }
  get affectedSelectable() {
    return this.root;
  }
  clone() {
    return new on(this.root, this.key, this.oldValue, this.newValue, this.baseVersion);
  }
  getReversed() {
    return new on(this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1);
  }
  _validate() {
    if (this.root != this.root.root || this.root.is("documentFragment")) throw new v("rootattribute-operation-not-a-root", this, { root: this.root, key: this.key });
    if (this.oldValue !== null && this.root.getAttribute(this.key) !== this.oldValue) throw new v("rootattribute-operation-wrong-old-value", this, { root: this.root, key: this.key });
    if (this.oldValue === null && this.newValue !== null && this.root.hasAttribute(this.key)) throw new v("rootattribute-operation-attribute-exists", this, { root: this.root, key: this.key });
  }
  _execute() {
    this.newValue !== null ? this.root._setAttribute(this.key, this.newValue) : this.root._removeAttribute(this.key);
  }
  toJSON() {
    const e = super.toJSON();
    return e.root = this.root.toJSON(), e;
  }
  static get className() {
    return "RootAttributeOperation";
  }
  static fromJSON(e, t) {
    if (!t.getRoot(e.root)) throw new v("rootattribute-operation-fromjson-no-root", this, { rootName: e.root });
    return new on(t.getRoot(e.root), e.key, e.oldValue, e.newValue, e.baseVersion);
  }
}
class Oi extends Jt {
  constructor(e, t, n, r, s) {
    super(s);
    m(this, "rootName");
    m(this, "elementName");
    m(this, "isAdd");
    m(this, "_document");
    this.rootName = e, this.elementName = t, this.isAdd = n, this._document = r, !this._document.getRoot(this.rootName) && (this._document.createRoot(this.elementName, this.rootName)._isAttached = !1);
  }
  get type() {
    return this.isAdd ? "addRoot" : "detachRoot";
  }
  get affectedSelectable() {
    return this._document.getRoot(this.rootName);
  }
  clone() {
    return new Oi(this.rootName, this.elementName, this.isAdd, this._document, this.baseVersion);
  }
  getReversed() {
    return new Oi(this.rootName, this.elementName, !this.isAdd, this._document, this.baseVersion + 1);
  }
  _execute() {
    this._document.getRoot(this.rootName)._isAttached = this.isAdd;
  }
  toJSON() {
    const e = super.toJSON();
    return delete e._document, e;
  }
  static get className() {
    return "RootOperation";
  }
  static fromJSON(e, t) {
    return new Oi(e.rootName, e.elementName, e.isAdd, t, e.baseVersion);
  }
}
const ei = {};
ei[it.className] = it, ei[mt.className] = mt, ei[Pt.className] = Pt, ei[pe.className] = pe, ei[at.className] = at, ei[Jt.className] = Jt, ei[Ft.className] = Ft, ei[on.className] = on, ei[Oi.className] = Oi, ei[Me.className] = Me, ei[Qe.className] = Qe;
class h5 {
  static fromJSON(i, e) {
    return ei[i.__className].fromJSON(i, e);
  }
}
const sd = /* @__PURE__ */ new Map();
function ge(o, i, e) {
  let t = sd.get(o);
  t || (t = /* @__PURE__ */ new Map(), sd.set(o, t)), t.set(i, e);
}
function m5(o) {
  return [o];
}
function ym(o, i, e = {}) {
  const t = function(n, r) {
    const s = sd.get(n);
    return s && s.has(r) ? s.get(r) : m5;
  }(o.constructor, i.constructor);
  try {
    return t(o = o.clone(), i, e);
  } catch (n) {
    throw n;
  }
}
function g5(o, i, e) {
  o = o.slice(), i = i.slice();
  const t = new p5(e.document, e.useRelations, e.forceWeakRemove);
  t.setOriginalOperations(o), t.setOriginalOperations(i);
  const n = t.originalOperations;
  if (o.length == 0 || i.length == 0) return { operationsA: o, operationsB: i, originalOperations: n };
  const r = /* @__PURE__ */ new WeakMap();
  for (const l of o) r.set(l, 0);
  const s = { nextBaseVersionA: o[o.length - 1].baseVersion + 1, nextBaseVersionB: i[i.length - 1].baseVersion + 1, originalOperationsACount: o.length, originalOperationsBCount: i.length };
  let a = 0;
  for (; a < o.length; ) {
    const l = o[a], c = r.get(l);
    if (c == i.length) {
      a++;
      continue;
    }
    const d = i[c], u = ym(l, d, t.getContext(l, d, !0)), h = ym(d, l, t.getContext(d, l, !1));
    t.updateRelation(l, d), t.setOriginalOperations(u, l), t.setOriginalOperations(h, d);
    for (const g of u) r.set(g, c + h.length);
    o.splice(a, 1, ...u), i.splice(c, 1, ...h);
  }
  return Cm(o), Cm(i), e.padWithNoOps, xm(o, s.nextBaseVersionB), xm(i, s.nextBaseVersionA), { operationsA: o, operationsB: i, originalOperations: n };
}
class p5 {
  constructor(i, e, t = !1) {
    m(this, "originalOperations");
    m(this, "_history");
    m(this, "_useRelations");
    m(this, "_forceWeakRemove");
    m(this, "_relations");
    this.originalOperations = /* @__PURE__ */ new Map(), this._history = i.history, this._useRelations = e, this._forceWeakRemove = !!t, this._relations = /* @__PURE__ */ new Map();
  }
  setOriginalOperations(i, e = null) {
    const t = e ? this.originalOperations.get(e) : null;
    for (const n of i) this.originalOperations.set(n, t || n);
  }
  updateRelation(i, e) {
    if (i instanceof pe) e instanceof Qe ? i.targetPosition.isEqual(e.sourcePosition) || e.movedRange.containsPosition(i.targetPosition) ? this._setRelation(i, e, "insertAtSource") : i.targetPosition.isEqual(e.deletionPosition) ? this._setRelation(i, e, "insertBetween") : i.targetPosition.isAfter(e.sourcePosition) && this._setRelation(i, e, "moveTargetAfter") : e instanceof pe && (i.targetPosition.isEqual(e.sourcePosition) || i.targetPosition.isBefore(e.sourcePosition) ? this._setRelation(i, e, "insertBefore") : this._setRelation(i, e, "insertAfter"));
    else if (i instanceof Me) {
      if (e instanceof Qe) i.splitPosition.isBefore(e.sourcePosition) && this._setRelation(i, e, "splitBefore");
      else if (e instanceof pe) if (i.splitPosition.isEqual(e.sourcePosition) || i.splitPosition.isBefore(e.sourcePosition)) this._setRelation(i, e, "splitBefore");
      else {
        const t = T._createFromPositionAndShift(e.sourcePosition, e.howMany);
        if (i.splitPosition.hasSameParentAs(e.sourcePosition) && t.containsPosition(i.splitPosition)) {
          const n = t.end.offset - i.splitPosition.offset, r = i.splitPosition.offset - t.start.offset;
          this._setRelation(i, e, { howMany: n, offset: r });
        }
      }
    } else if (i instanceof Qe) e instanceof Qe ? (i.targetPosition.isEqual(e.sourcePosition) || this._setRelation(i, e, "mergeTargetNotMoved"), i.sourcePosition.isEqual(e.targetPosition) && this._setRelation(i, e, "mergeSourceNotMoved"), i.sourcePosition.isEqual(e.sourcePosition) && this._setRelation(i, e, "mergeSameElement")) : e instanceof Me ? i.sourcePosition.isEqual(e.splitPosition) && this._setRelation(i, e, "splitAtSource") : e instanceof pe && e.howMany > 0 && (i.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany)) && this._setRelation(i, e, "mergeSourceAffected"), i.targetPosition.isEqual(e.sourcePosition) && this._setRelation(i, e, "mergeTargetWasBefore"));
    else if (i instanceof Pt) {
      const t = i.newRange;
      if (!t) return;
      if (e instanceof Qe) {
        const n = t.start.isEqual(e.targetPosition), r = t.start.isEqual(e.deletionPosition), s = t.end.isEqual(e.deletionPosition), a = t.end.isEqual(e.sourcePosition);
        (n || r || s || a) && this._setRelation(i, e, { wasInLeftElement: n, wasStartBeforeMergedElement: r, wasEndBeforeMergedElement: s, wasInRightElement: a });
      }
    }
  }
  getContext(i, e, t) {
    return { aIsStrong: t, aWasUndone: this._wasUndone(i), bWasUndone: this._wasUndone(e), abRelation: this._useRelations ? this._getRelation(i, e) : null, baRelation: this._useRelations ? this._getRelation(e, i) : null, forceWeakRemove: this._forceWeakRemove };
  }
  _wasUndone(i) {
    const e = this.originalOperations.get(i);
    return e.wasUndone || this._history.isUndoneOperation(e);
  }
  _getRelation(i, e) {
    const t = this.originalOperations.get(e), n = this._history.getUndoneOperation(t);
    if (!n) return null;
    const r = this.originalOperations.get(i), s = this._relations.get(r);
    return s && s.get(n) || null;
  }
  _setRelation(i, e, t) {
    const n = this.originalOperations.get(i), r = this.originalOperations.get(e);
    let s = this._relations.get(n);
    s || (s = /* @__PURE__ */ new Map(), this._relations.set(n, s)), s.set(r, t);
  }
}
function xm(o, i) {
  for (const e of o) e.baseVersion = i++;
}
function Cm(o) {
  const i = /* @__PURE__ */ new Map();
  for (let e = 0; e < o.length; e++) {
    const t = o[e];
    t instanceof Pt && (t.baseVersion !== -1 ? i.set(t.name, { op: t, ranges: t.newRange ? [t.newRange] : [] }) : (t.newRange && i.get(t.name).ranges.push(t.newRange), o.splice(e, 1), e--));
  }
  for (const { op: e, ranges: t } of i.values()) t.length ? e.newRange = T._createFromRanges(t) : e.newRange = null;
}
function Am(o, i, e) {
  const t = o.nodes.getNode(0).getAttribute(i);
  if (t == e) return null;
  const n = new T(o.position, o.position.getShiftedBy(o.howMany));
  return new it(n, i, t, e, 0);
}
function Tm(o, i) {
  return o.targetPosition._getTransformedByDeletion(i.sourcePosition, i.howMany) === null;
}
function yo(o, i) {
  const e = [];
  for (let t = 0; t < o.length; t++) {
    const n = o[t], r = new pe(n.start, n.end.offset - n.start.offset, i, 0);
    e.push(r);
    for (let s = t + 1; s < o.length; s++) o[s] = o[s]._getTransformedByMove(r.sourcePosition, r.targetPosition, r.howMany)[0];
    i = i._getTransformedByMove(r.sourcePosition, r.targetPosition, r.howMany);
  }
  return e;
}
ge(it, it, (o, i, e) => {
  if (o.key === i.key && o.range.start.hasSameParentAs(i.range.start)) {
    const t = o.range.getDifference(i.range).map((r) => new it(r, o.key, o.oldValue, o.newValue, 0)), n = o.range.getIntersection(i.range);
    return n && e.aIsStrong && t.push(new it(n, i.key, i.newValue, o.newValue, 0)), t.length == 0 ? [new at(0)] : t;
  }
  return [o];
}), ge(it, mt, (o, i) => {
  if (o.range.start.hasSameParentAs(i.position) && o.range.containsPosition(i.position)) {
    const e = o.range._getTransformedByInsertion(i.position, i.howMany, !i.shouldReceiveAttributes).map((t) => new it(t, o.key, o.oldValue, o.newValue, o.baseVersion));
    if (i.shouldReceiveAttributes) {
      const t = Am(i, o.key, o.oldValue);
      t && e.unshift(t);
    }
    return e;
  }
  return o.range = o.range._getTransformedByInsertion(i.position, i.howMany, !1)[0], [o];
}), ge(it, Qe, (o, i) => {
  const e = [];
  o.range.start.hasSameParentAs(i.deletionPosition) && (o.range.containsPosition(i.deletionPosition) || o.range.start.isEqual(i.deletionPosition)) && e.push(T._createFromPositionAndShift(i.graveyardPosition, 1));
  const t = o.range._getTransformedByMergeOperation(i);
  return t.isCollapsed || e.push(t), e.map((n) => new it(n, o.key, o.oldValue, o.newValue, o.baseVersion));
}), ge(it, pe, (o, i) => function(t, n) {
  const r = T._createFromPositionAndShift(n.sourcePosition, n.howMany);
  let s = null, a = [];
  r.containsRange(t, !0) ? s = t : t.start.hasSameParentAs(r.start) ? (a = t.getDifference(r), s = t.getIntersection(r)) : a = [t];
  const l = [];
  for (let c of a) {
    c = c._getTransformedByDeletion(n.sourcePosition, n.howMany);
    const d = n.getMovedRangeStart(), u = c.start.hasSameParentAs(d), h = c._getTransformedByInsertion(d, n.howMany, u);
    l.push(...h);
  }
  return s && l.push(s._getTransformedByMove(n.sourcePosition, n.targetPosition, n.howMany, !1)[0]), l;
}(o.range, i).map((t) => new it(t, o.key, o.oldValue, o.newValue, o.baseVersion))), ge(it, Me, (o, i) => {
  if (o.range.end.isEqual(i.insertionPosition)) return i.graveyardPosition || o.range.end.offset++, [o];
  if (o.range.start.hasSameParentAs(i.splitPosition) && o.range.containsPosition(i.splitPosition)) {
    const e = o.clone();
    return e.range = new T(i.moveTargetPosition.clone(), o.range.end._getCombined(i.splitPosition, i.moveTargetPosition)), o.range.end = i.splitPosition.clone(), o.range.end.stickiness = "toPrevious", [o, e];
  }
  return o.range = o.range._getTransformedBySplitOperation(i), [o];
}), ge(mt, it, (o, i) => {
  const e = [o];
  if (o.shouldReceiveAttributes && o.position.hasSameParentAs(i.range.start) && i.range.containsPosition(o.position)) {
    const t = Am(o, i.key, i.newValue);
    t && e.push(t);
  }
  return e;
}), ge(mt, mt, (o, i, e) => (o.position.isEqual(i.position) && e.aIsStrong || (o.position = o.position._getTransformedByInsertOperation(i)), [o])), ge(mt, pe, (o, i) => (o.position = o.position._getTransformedByMoveOperation(i), [o])), ge(mt, Me, (o, i) => (o.position = o.position._getTransformedBySplitOperation(i), [o])), ge(mt, Qe, (o, i) => (o.position = o.position._getTransformedByMergeOperation(i), [o])), ge(Pt, mt, (o, i) => (o.oldRange && (o.oldRange = o.oldRange._getTransformedByInsertOperation(i)[0]), o.newRange && (o.newRange = o.newRange._getTransformedByInsertOperation(i)[0]), [o])), ge(Pt, Pt, (o, i, e) => {
  if (o.name == i.name) {
    if (!e.aIsStrong) return [new at(0)];
    o.oldRange = i.newRange ? i.newRange.clone() : null;
  }
  return [o];
}), ge(Pt, Qe, (o, i) => (o.oldRange && (o.oldRange = o.oldRange._getTransformedByMergeOperation(i)), o.newRange && (o.newRange = o.newRange._getTransformedByMergeOperation(i)), [o])), ge(Pt, pe, (o, i) => {
  const e = [o];
  if (o.oldRange && (o.oldRange = T._createFromRanges(o.oldRange._getTransformedByMoveOperation(i))), o.newRange) {
    const t = o.newRange._getTransformedByMoveOperation(i);
    o.newRange = t[0];
    for (let n = 1; n < t.length; n++) {
      const r = o.clone();
      r.oldRange = null, r.newRange = t[n], r.baseVersion = -1, e.push(r);
    }
  }
  return e;
}), ge(Pt, Me, (o, i, e) => {
  if (o.oldRange && (o.oldRange = o.oldRange._getTransformedBySplitOperation(i)), o.newRange) {
    if (e.abRelation) {
      const t = o.newRange._getTransformedBySplitOperation(i);
      return o.newRange.start.isEqual(i.splitPosition) && e.abRelation.wasStartBeforeMergedElement ? o.newRange.start = I._createAt(i.insertionPosition) : o.newRange.start.isEqual(i.splitPosition) && !e.abRelation.wasInLeftElement ? o.newRange.start = I._createAt(i.moveTargetPosition) : o.newRange.start = t.start, o.newRange.end.isEqual(i.splitPosition) && e.abRelation.wasInRightElement ? o.newRange.end = I._createAt(i.moveTargetPosition) : o.newRange.end.isEqual(i.splitPosition) && e.abRelation.wasEndBeforeMergedElement ? o.newRange.end = I._createAt(i.insertionPosition) : o.newRange.end = t.end, [o];
    }
    o.newRange = o.newRange._getTransformedBySplitOperation(i);
  }
  return [o];
}), ge(Qe, mt, (o, i) => (o.sourcePosition.hasSameParentAs(i.position) && (o.howMany += i.howMany), o.sourcePosition = o.sourcePosition._getTransformedByInsertOperation(i), o.targetPosition = o.targetPosition._getTransformedByInsertOperation(i), [o])), ge(Qe, Qe, (o, i, e) => {
  if (o.sourcePosition.isEqual(i.sourcePosition) && o.targetPosition.isEqual(i.targetPosition)) {
    if (e.bWasUndone) {
      const t = i.graveyardPosition.path.slice();
      return t.push(0), o.sourcePosition = new I(i.graveyardPosition.root, t), o.howMany = 0, [o];
    }
    return [new at(0)];
  }
  if (o.sourcePosition.isEqual(i.sourcePosition) && !o.targetPosition.isEqual(i.targetPosition) && !e.bWasUndone && e.abRelation != "splitAtSource") {
    const t = o.targetPosition.root.rootName == "$graveyard", n = i.targetPosition.root.rootName == "$graveyard";
    if (n && !t || !(t && !n) && e.aIsStrong) {
      const r = i.targetPosition._getTransformedByMergeOperation(i), s = o.targetPosition._getTransformedByMergeOperation(i);
      return [new pe(r, o.howMany, s, 0)];
    }
    return [new at(0)];
  }
  return o.sourcePosition.hasSameParentAs(i.targetPosition) && (o.howMany += i.howMany), o.sourcePosition = o.sourcePosition._getTransformedByMergeOperation(i), o.targetPosition = o.targetPosition._getTransformedByMergeOperation(i), o.graveyardPosition.isEqual(i.graveyardPosition) && e.aIsStrong || (o.graveyardPosition = o.graveyardPosition._getTransformedByMergeOperation(i)), [o];
}), ge(Qe, pe, (o, i, e) => {
  const t = T._createFromPositionAndShift(i.sourcePosition, i.howMany);
  return i.type == "remove" && !e.bWasUndone && o.deletionPosition.hasSameParentAs(i.sourcePosition) && t.containsPosition(o.sourcePosition) ? [new at(0)] : (i.sourcePosition.getShiftedBy(i.howMany).isEqual(o.sourcePosition) ? o.sourcePosition.stickiness = "toNone" : i.targetPosition.isEqual(o.sourcePosition) && e.abRelation == "mergeSourceAffected" ? o.sourcePosition.stickiness = "toNext" : i.sourcePosition.isEqual(o.targetPosition) ? (o.targetPosition.stickiness = "toNone", o.howMany -= i.howMany) : i.targetPosition.isEqual(o.targetPosition) && e.abRelation == "mergeTargetWasBefore" ? (o.targetPosition.stickiness = "toPrevious", o.howMany += i.howMany) : (o.sourcePosition.hasSameParentAs(i.targetPosition) && (o.howMany += i.howMany), o.sourcePosition.hasSameParentAs(i.sourcePosition) && (o.howMany -= i.howMany)), o.sourcePosition = o.sourcePosition._getTransformedByMoveOperation(i), o.targetPosition = o.targetPosition._getTransformedByMoveOperation(i), o.sourcePosition.stickiness = "toPrevious", o.targetPosition.stickiness = "toNext", o.graveyardPosition.isEqual(i.targetPosition) || (o.graveyardPosition = o.graveyardPosition._getTransformedByMoveOperation(i)), [o]);
}), ge(Qe, Me, (o, i, e) => {
  if (i.graveyardPosition && (o.graveyardPosition = o.graveyardPosition._getTransformedByDeletion(i.graveyardPosition, 1), o.deletionPosition.isEqual(i.graveyardPosition) && (o.howMany = i.howMany)), o.targetPosition.isEqual(i.splitPosition) && (i.graveyardPosition && o.deletionPosition.isEqual(i.graveyardPosition) || e.abRelation == "mergeTargetNotMoved"))
    return o.sourcePosition = o.sourcePosition._getTransformedBySplitOperation(i), [o];
  if (o.sourcePosition.isEqual(i.splitPosition)) {
    if (e.abRelation == "mergeSourceNotMoved") return o.howMany = 0, o.targetPosition = o.targetPosition._getTransformedBySplitOperation(i), [o];
    if (e.abRelation == "mergeSameElement" || o.sourcePosition.offset > 0) return o.sourcePosition = i.moveTargetPosition.clone(), o.targetPosition = o.targetPosition._getTransformedBySplitOperation(i), [o];
  }
  return o.sourcePosition.hasSameParentAs(i.splitPosition) && (o.howMany = i.splitPosition.offset), o.sourcePosition = o.sourcePosition._getTransformedBySplitOperation(i), o.targetPosition = o.targetPosition._getTransformedBySplitOperation(i), [o];
}), ge(pe, mt, (o, i) => {
  const e = T._createFromPositionAndShift(o.sourcePosition, o.howMany)._getTransformedByInsertOperation(i, !1)[0];
  return o.sourcePosition = e.start, o.howMany = e.end.offset - e.start.offset, o.targetPosition.isEqual(i.position) || (o.targetPosition = o.targetPosition._getTransformedByInsertOperation(i)), [o];
}), ge(pe, pe, (o, i, e) => {
  const t = T._createFromPositionAndShift(o.sourcePosition, o.howMany), n = T._createFromPositionAndShift(i.sourcePosition, i.howMany);
  let r, s = e.aIsStrong, a = !e.aIsStrong;
  if (e.abRelation == "insertBefore" || e.baRelation == "insertAfter" ? a = !0 : e.abRelation != "insertAfter" && e.baRelation != "insertBefore" || (a = !1), r = o.targetPosition.isEqual(i.targetPosition) && a ? o.targetPosition._getTransformedByDeletion(i.sourcePosition, i.howMany) : o.targetPosition._getTransformedByMove(i.sourcePosition, i.targetPosition, i.howMany), Tm(o, i) && Tm(i, o)) return [i.getReversed()];
  if (t.containsPosition(i.targetPosition) && t.containsRange(n, !0)) return t.start = t.start._getTransformedByMove(i.sourcePosition, i.targetPosition, i.howMany), t.end = t.end._getTransformedByMove(i.sourcePosition, i.targetPosition, i.howMany), yo([t], r);
  if (n.containsPosition(o.targetPosition) && n.containsRange(t, !0)) return t.start = t.start._getCombined(i.sourcePosition, i.getMovedRangeStart()), t.end = t.end._getCombined(i.sourcePosition, i.getMovedRangeStart()), yo([t], r);
  const l = At(o.sourcePosition.getParentPath(), i.sourcePosition.getParentPath());
  if (l == "prefix" || l == "extension") return t.start = t.start._getTransformedByMove(i.sourcePosition, i.targetPosition, i.howMany), t.end = t.end._getTransformedByMove(i.sourcePosition, i.targetPosition, i.howMany), yo([t], r);
  o.type != "remove" || i.type == "remove" || e.aWasUndone || e.forceWeakRemove ? o.type == "remove" || i.type != "remove" || e.bWasUndone || e.forceWeakRemove || (s = !1) : s = !0;
  const c = [], d = t.getDifference(n);
  for (const h of d) {
    h.start = h.start._getTransformedByDeletion(i.sourcePosition, i.howMany), h.end = h.end._getTransformedByDeletion(i.sourcePosition, i.howMany);
    const g = At(h.start.getParentPath(), i.getMovedRangeStart().getParentPath()) == "same", p = h._getTransformedByInsertion(i.getMovedRangeStart(), i.howMany, g);
    c.push(...p);
  }
  const u = t.getIntersection(n);
  return u !== null && s && (u.start = u.start._getCombined(i.sourcePosition, i.getMovedRangeStart()), u.end = u.end._getCombined(i.sourcePosition, i.getMovedRangeStart()), c.length === 0 ? c.push(u) : c.length == 1 ? n.start.isBefore(t.start) || n.start.isEqual(t.start) ? c.unshift(u) : c.push(u) : c.splice(1, 0, u)), c.length === 0 ? [new at(o.baseVersion)] : yo(c, r);
}), ge(pe, Me, (o, i, e) => {
  let t = o.targetPosition.clone();
  o.targetPosition.isEqual(i.insertionPosition) && i.graveyardPosition && e.abRelation != "moveTargetAfter" || (t = o.targetPosition._getTransformedBySplitOperation(i));
  const n = T._createFromPositionAndShift(o.sourcePosition, o.howMany);
  if (n.end.isEqual(i.insertionPosition)) return i.graveyardPosition || o.howMany++, o.targetPosition = t, [o];
  if (n.start.hasSameParentAs(i.splitPosition) && n.containsPosition(i.splitPosition)) {
    let s = new T(i.splitPosition, n.end);
    return s = s._getTransformedBySplitOperation(i), yo([new T(n.start, i.splitPosition), s], t);
  }
  o.targetPosition.isEqual(i.splitPosition) && e.abRelation == "insertAtSource" && (t = i.moveTargetPosition), o.targetPosition.isEqual(i.insertionPosition) && e.abRelation == "insertBetween" && (t = o.targetPosition);
  const r = [n._getTransformedBySplitOperation(i)];
  if (i.graveyardPosition) {
    const s = n.start.isEqual(i.graveyardPosition) || n.containsPosition(i.graveyardPosition);
    o.howMany > 1 && s && !e.aWasUndone && r.push(T._createFromPositionAndShift(i.insertionPosition, 1));
  }
  return yo(r, t);
}), ge(pe, Qe, (o, i, e) => {
  const t = T._createFromPositionAndShift(o.sourcePosition, o.howMany);
  if (i.deletionPosition.hasSameParentAs(o.sourcePosition) && t.containsPosition(i.sourcePosition)) {
    if (o.type != "remove" || e.forceWeakRemove) {
      if (o.howMany == 1) return e.bWasUndone ? (o.sourcePosition = i.graveyardPosition.clone(), o.targetPosition = o.targetPosition._getTransformedByMergeOperation(i), [o]) : [new at(0)];
    } else if (!e.aWasUndone) {
      const r = [];
      let s = i.graveyardPosition.clone(), a = i.targetPosition._getTransformedByMergeOperation(i);
      const l = o.targetPosition.getTransformedByOperation(i);
      o.howMany > 1 && (r.push(new pe(o.sourcePosition, o.howMany - 1, l, 0)), s = s._getTransformedByMove(o.sourcePosition, l, o.howMany - 1), a = a._getTransformedByMove(o.sourcePosition, l, o.howMany - 1));
      const c = i.deletionPosition._getCombined(o.sourcePosition, l), d = new pe(s, 1, c, 0), u = d.getMovedRangeStart().path.slice();
      u.push(0);
      const h = new I(d.targetPosition.root, u);
      a = a._getTransformedByMove(s, c, 1);
      const g = new pe(a, i.howMany, h, 0);
      return r.push(d), r.push(g), r;
    }
  }
  const n = T._createFromPositionAndShift(o.sourcePosition, o.howMany)._getTransformedByMergeOperation(i);
  return o.sourcePosition = n.start, o.howMany = n.end.offset - n.start.offset, o.targetPosition = o.targetPosition._getTransformedByMergeOperation(i), [o];
}), ge(Ft, mt, (o, i) => (o.position = o.position._getTransformedByInsertOperation(i), [o])), ge(Ft, Qe, (o, i) => o.position.isEqual(i.deletionPosition) ? (o.position = i.graveyardPosition.clone(), o.position.stickiness = "toNext", [o]) : (o.position = o.position._getTransformedByMergeOperation(i), [o])), ge(Ft, pe, (o, i) => (o.position = o.position._getTransformedByMoveOperation(i), [o])), ge(Ft, Ft, (o, i, e) => {
  if (o.position.isEqual(i.position)) {
    if (!e.aIsStrong) return [new at(0)];
    o.oldName = i.newName;
  }
  return [o];
}), ge(Ft, Me, (o, i) => {
  if (At(o.position.path, i.splitPosition.getParentPath()) == "same" && !i.graveyardPosition) {
    const e = new Ft(o.position.getShiftedBy(1), o.oldName, o.newName, 0);
    return [o, e];
  }
  return o.position = o.position._getTransformedBySplitOperation(i), [o];
}), ge(on, on, (o, i, e) => {
  if (o.root === i.root && o.key === i.key) {
    if (!e.aIsStrong || o.newValue === i.newValue) return [new at(0)];
    o.oldValue = i.newValue;
  }
  return [o];
}), ge(Oi, Oi, (o, i) => o.rootName === i.rootName && o.isAdd === i.isAdd ? [new at(0)] : [o]), ge(Me, mt, (o, i) => (o.splitPosition.hasSameParentAs(i.position) && o.splitPosition.offset < i.position.offset && (o.howMany += i.howMany), o.splitPosition = o.splitPosition._getTransformedByInsertOperation(i), o.insertionPosition = o.insertionPosition._getTransformedByInsertOperation(i), [o])), ge(Me, Qe, (o, i, e) => {
  if (!o.graveyardPosition && !e.bWasUndone && o.splitPosition.hasSameParentAs(i.sourcePosition)) {
    const t = i.graveyardPosition.path.slice();
    t.push(0);
    const n = new I(i.graveyardPosition.root, t), r = Me.getInsertionPosition(new I(i.graveyardPosition.root, t)), s = new Me(n, 0, r, null, 0);
    return o.splitPosition = o.splitPosition._getTransformedByMergeOperation(i), o.insertionPosition = Me.getInsertionPosition(o.splitPosition), o.graveyardPosition = s.insertionPosition.clone(), o.graveyardPosition.stickiness = "toNext", [s, o];
  }
  return o.splitPosition.hasSameParentAs(i.deletionPosition) && !o.splitPosition.isAfter(i.deletionPosition) && o.howMany--, o.splitPosition.hasSameParentAs(i.targetPosition) && (o.howMany += i.howMany), o.splitPosition = o.splitPosition._getTransformedByMergeOperation(i), o.insertionPosition = Me.getInsertionPosition(o.splitPosition), o.graveyardPosition && (o.graveyardPosition = o.graveyardPosition._getTransformedByMergeOperation(i)), [o];
}), ge(Me, pe, (o, i, e) => {
  const t = T._createFromPositionAndShift(i.sourcePosition, i.howMany);
  if (o.graveyardPosition) {
    const r = t.start.isEqual(o.graveyardPosition) || t.containsPosition(o.graveyardPosition);
    if (!e.bWasUndone && r) {
      const s = o.splitPosition._getTransformedByMoveOperation(i), a = o.graveyardPosition._getTransformedByMoveOperation(i), l = a.path.slice();
      l.push(0);
      const c = new I(a.root, l);
      return [new pe(s, o.howMany, c, 0)];
    }
    o.graveyardPosition = o.graveyardPosition._getTransformedByMoveOperation(i);
  }
  const n = o.splitPosition.isEqual(i.targetPosition);
  if (n && (e.baRelation == "insertAtSource" || e.abRelation == "splitBefore")) return o.howMany += i.howMany, o.splitPosition = o.splitPosition._getTransformedByDeletion(i.sourcePosition, i.howMany), o.insertionPosition = Me.getInsertionPosition(o.splitPosition), [o];
  if (n && e.abRelation && e.abRelation.howMany) {
    const { howMany: r, offset: s } = e.abRelation;
    return o.howMany += r, o.splitPosition = o.splitPosition.getShiftedBy(s), [o];
  }
  if (o.splitPosition.hasSameParentAs(i.sourcePosition) && t.containsPosition(o.splitPosition)) {
    const r = i.howMany - (o.splitPosition.offset - i.sourcePosition.offset);
    return o.howMany -= r, o.splitPosition.hasSameParentAs(i.targetPosition) && o.splitPosition.offset < i.targetPosition.offset && (o.howMany += i.howMany), o.splitPosition = i.sourcePosition.clone(), o.insertionPosition = Me.getInsertionPosition(o.splitPosition), [o];
  }
  return i.sourcePosition.isEqual(i.targetPosition) || (o.splitPosition.hasSameParentAs(i.sourcePosition) && o.splitPosition.offset <= i.sourcePosition.offset && (o.howMany -= i.howMany), o.splitPosition.hasSameParentAs(i.targetPosition) && o.splitPosition.offset < i.targetPosition.offset && (o.howMany += i.howMany)), o.splitPosition.stickiness = "toNone", o.splitPosition = o.splitPosition._getTransformedByMoveOperation(i), o.splitPosition.stickiness = "toNext", o.graveyardPosition ? o.insertionPosition = o.insertionPosition._getTransformedByMoveOperation(i) : o.insertionPosition = Me.getInsertionPosition(o.splitPosition), [o];
}), ge(Me, Me, (o, i, e) => {
  if (o.splitPosition.isEqual(i.splitPosition)) {
    if (!o.graveyardPosition && !i.graveyardPosition) return [new at(0)];
    if (o.graveyardPosition && i.graveyardPosition && o.graveyardPosition.isEqual(i.graveyardPosition)) return [new at(0)];
    if (e.abRelation == "splitBefore") return o.howMany = 0, o.graveyardPosition = o.graveyardPosition._getTransformedBySplitOperation(i), [o];
  }
  if (o.graveyardPosition && i.graveyardPosition && o.graveyardPosition.isEqual(i.graveyardPosition)) {
    const t = o.splitPosition.root.rootName == "$graveyard", n = i.splitPosition.root.rootName == "$graveyard";
    if (n && !t || !(t && !n) && e.aIsStrong) {
      const r = [];
      return i.howMany && r.push(new pe(i.moveTargetPosition, i.howMany, i.splitPosition, 0)), o.howMany && r.push(new pe(o.splitPosition, o.howMany, o.moveTargetPosition, 0)), r;
    }
    return [new at(0)];
  }
  if (o.graveyardPosition && (o.graveyardPosition = o.graveyardPosition._getTransformedBySplitOperation(i)), o.splitPosition.isEqual(i.insertionPosition) && e.abRelation == "splitBefore") return o.howMany++, [o];
  if (i.splitPosition.isEqual(o.insertionPosition) && e.baRelation == "splitBefore") {
    const t = i.insertionPosition.path.slice();
    t.push(0);
    const n = new I(i.insertionPosition.root, t);
    return [o, new pe(o.insertionPosition, 1, n, 0)];
  }
  return o.splitPosition.hasSameParentAs(i.splitPosition) && o.splitPosition.offset < i.splitPosition.offset && (o.howMany -= i.howMany), o.splitPosition = o.splitPosition._getTransformedBySplitOperation(i), o.insertionPosition = Me.getInsertionPosition(o.splitPosition), [o];
});
class Je extends Ae(I) {
  constructor(i, e, t = "toNone") {
    if (super(i, e, t), !this.root.is("rootElement")) throw new v("model-liveposition-root-not-rootelement", i);
    f5.call(this);
  }
  detach() {
    this.stopListening();
  }
  toPosition() {
    return new I(this.root, this.path.slice(), this.stickiness);
  }
  static fromPosition(i, e) {
    return new this(i.root, i.path.slice(), e || i.stickiness);
  }
}
function f5() {
  this.listenTo(this.root.document.model, "applyOperation", (o, i) => {
    const e = i[0];
    e.isDocumentOperation && b5.call(this, e);
  }, { priority: "low" });
}
function b5(o) {
  const i = this.getTransformedByOperation(o);
  if (!this.isEqual(i)) {
    const e = this.toPosition();
    this.path = i.path, this.root = i.root, this.fire("change", e);
  }
}
Je.prototype.is = function(o) {
  return o === "livePosition" || o === "model:livePosition" || o == "position" || o === "model:position";
};
class xo {
  constructor(i = {}) {
    m(this, "operations");
    m(this, "isUndoable");
    m(this, "isLocal");
    m(this, "isUndo");
    m(this, "isTyping");
    typeof i == "string" && (i = i === "transparent" ? { isUndoable: !1 } : {}, ce("batch-constructor-deprecated-string-type"));
    const { isUndoable: e = !0, isLocal: t = !0, isUndo: n = !1, isTyping: r = !1 } = i;
    this.operations = [], this.isUndoable = e, this.isLocal = t, this.isUndo = n, this.isTyping = r;
  }
  get type() {
    return ce("batch-type-deprecated"), "default";
  }
  get baseVersion() {
    for (const i of this.operations) if (i.baseVersion !== null) return i.baseVersion;
    return null;
  }
  addOperation(i) {
    return i.isDocumentOperation && (i.batch = this, this.operations.push(i)), i;
  }
}
const Yr = class Yr {
  constructor(i) {
    m(this, "_markerCollection");
    m(this, "_changesInElement", /* @__PURE__ */ new Map());
    m(this, "_elementsSnapshots", /* @__PURE__ */ new Map());
    m(this, "_elementChildrenSnapshots", /* @__PURE__ */ new Map());
    m(this, "_elementState", /* @__PURE__ */ new Map());
    m(this, "_changedMarkers", /* @__PURE__ */ new Map());
    m(this, "_changedRoots", /* @__PURE__ */ new Map());
    m(this, "_changeCount", 0);
    m(this, "_cachedChanges", null);
    m(this, "_cachedChangesWithGraveyard", null);
    m(this, "_refreshedItems", /* @__PURE__ */ new Set());
    this._markerCollection = i;
  }
  get isEmpty() {
    return this._changesInElement.size == 0 && this._changedMarkers.size == 0 && this._changedRoots.size == 0;
  }
  bufferOperation(i) {
    const e = i;
    switch (e.type) {
      case "insert":
        if (this._isInInsertedElement(e.position.parent)) return;
        this._markInsert(e.position.parent, e.position.offset, e.nodes.maxOffset);
        break;
      case "addAttribute":
      case "removeAttribute":
      case "changeAttribute":
        for (const t of e.range.getItems({ shallow: !0 })) this._isInInsertedElement(t.parent) || this._markAttribute(t);
        break;
      case "remove":
      case "move":
      case "reinsert": {
        if (e.sourcePosition.isEqual(e.targetPosition) || e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition)) return;
        const t = this._isInInsertedElement(e.sourcePosition.parent), n = this._isInInsertedElement(e.targetPosition.parent);
        t || this._markRemove(e.sourcePosition.parent, e.sourcePosition.offset, e.howMany), n || this._markInsert(e.targetPosition.parent, e.getMovedRangeStart().offset, e.howMany);
        const r = T._createFromPositionAndShift(e.sourcePosition, e.howMany);
        for (const s of r.getItems({ shallow: !0 })) this._setElementState(s, "move");
        break;
      }
      case "rename": {
        if (this._isInInsertedElement(e.position.parent)) return;
        this._markRemove(e.position.parent, e.position.offset, 1), this._markInsert(e.position.parent, e.position.offset, 1);
        const t = T._createFromPositionAndShift(e.position, 1);
        for (const n of this._markerCollection.getMarkersIntersectingRange(t)) {
          const r = n.getData();
          this.bufferMarkerChange(n.name, r, r);
        }
        this._setElementState(e.position.nodeAfter, "rename");
        break;
      }
      case "split": {
        const t = e.splitPosition.parent;
        if (!this._isInInsertedElement(t)) {
          this._markRemove(t, e.splitPosition.offset, e.howMany);
          const n = T._createFromPositionAndShift(e.splitPosition, e.howMany);
          for (const r of n.getItems({ shallow: !0 })) this._setElementState(r, "move");
        }
        this._isInInsertedElement(e.insertionPosition.parent) || this._markInsert(e.insertionPosition.parent, e.insertionPosition.offset, 1), e.graveyardPosition && (this._markRemove(e.graveyardPosition.parent, e.graveyardPosition.offset, 1), this._setElementState(e.graveyardPosition.nodeAfter, "move"));
        break;
      }
      case "merge": {
        const t = e.sourcePosition.parent;
        this._isInInsertedElement(t.parent) || this._markRemove(t.parent, t.startOffset, 1);
        const n = e.graveyardPosition.parent;
        this._markInsert(n, e.graveyardPosition.offset, 1), this._setElementState(t, "move");
        const r = e.targetPosition.parent;
        if (!this._isInInsertedElement(r)) {
          this._markInsert(r, e.targetPosition.offset, t.maxOffset);
          const s = T._createFromPositionAndShift(e.sourcePosition, e.howMany);
          for (const a of s.getItems({ shallow: !0 })) this._setElementState(a, "move");
        }
        break;
      }
      case "detachRoot":
      case "addRoot": {
        const t = e.affectedSelectable;
        if (!t._isLoaded || t.isAttached() == e.isAdd) return;
        this._bufferRootStateChange(e.rootName, e.isAdd);
        break;
      }
      case "addRootAttribute":
      case "removeRootAttribute":
      case "changeRootAttribute": {
        if (!e.root._isLoaded) return;
        const t = e.root.rootName;
        this._bufferRootAttributeChange(t, e.key, e.oldValue, e.newValue);
        break;
      }
    }
    this._cachedChanges = null;
  }
  bufferMarkerChange(i, e, t) {
    e.range && e.range.root.is("rootElement") && !e.range.root._isLoaded && (e.range = null), t.range && t.range.root.is("rootElement") && !t.range.root._isLoaded && (t.range = null);
    let n = this._changedMarkers.get(i);
    n ? n.newMarkerData = t : (n = { newMarkerData: t, oldMarkerData: e }, this._changedMarkers.set(i, n)), n.oldMarkerData.range == null && t.range == null && this._changedMarkers.delete(i);
  }
  getMarkersToRemove() {
    const i = [];
    for (const [e, t] of this._changedMarkers) t.oldMarkerData.range != null && i.push({ name: e, range: t.oldMarkerData.range });
    return i;
  }
  getMarkersToAdd() {
    const i = [];
    for (const [e, t] of this._changedMarkers) t.newMarkerData.range != null && i.push({ name: e, range: t.newMarkerData.range });
    return i;
  }
  getChangedMarkers() {
    return Array.from(this._changedMarkers).map(([i, e]) => ({ name: i, data: { oldRange: e.oldMarkerData.range, newRange: e.newMarkerData.range } }));
  }
  hasDataChanges() {
    if (this.getChanges().length || this._changedRoots.size > 0) return !0;
    for (const { newMarkerData: i, oldMarkerData: e } of this._changedMarkers.values()) {
      if (i.affectsData !== e.affectsData) return !0;
      if (i.affectsData) {
        const t = i.range && !e.range, n = !i.range && e.range, r = i.range && e.range && !i.range.isEqual(e.range);
        if (t || n || r) return !0;
      }
    }
    return !1;
  }
  getChanges(i = {}) {
    if (this._cachedChanges) return i.includeChangesInGraveyard ? this._cachedChangesWithGraveyard.slice() : this._cachedChanges.slice();
    let e = [];
    for (const t of this._changesInElement.keys()) {
      const n = this._changesInElement.get(t).sort((d, u) => d.offset === u.offset ? d.type != u.type ? d.type == "remove" ? -1 : 1 : 0 : d.offset < u.offset ? -1 : 1), r = this._elementChildrenSnapshots.get(t), s = Sm(t.getChildren()), a = k5(r.length, n);
      let l = 0, c = 0;
      for (const d of a) if (d === "i") {
        const u = this._getDiffActionForNode(s[l].node, "insert"), h = this._elementsSnapshots.get(s[l].node), g = this._getInsertDiff(t, l, u, s[l], h);
        e.push(g), l++;
      } else if (d === "r") {
        const u = this._getDiffActionForNode(r[c].node, "remove"), h = this._getRemoveDiff(t, l, u, r[c]);
        e.push(h), c++;
      } else if (d === "a") {
        const u = r[c].attributes, h = s[l].attributes;
        let g;
        if (s[l].name == "$text") g = new T(I._createAt(t, l), I._createAt(t, l + 1));
        else {
          const f = t.offsetToIndex(l);
          g = new T(I._createAt(t, l), I._createAt(t.getChild(f), 0));
        }
        const p = this._getAttributesDiff(g, u, h);
        e.push(...p), l++, c++;
      } else l++, c++;
    }
    e.sort((t, n) => t.position.root != n.position.root ? t.position.root.rootName < n.position.root.rootName ? -1 : 1 : t.position.isEqual(n.position) ? t.changeCount - n.changeCount : t.position.isBefore(n.position) ? -1 : 1);
    for (let t = 1, n = 0; t < e.length; t++) {
      const r = e[n], s = e[t], a = r.type == "remove" && s.type == "remove" && r.name == "$text" && s.name == "$text" && r.position.isEqual(s.position), l = r.type == "insert" && s.type == "insert" && r.name == "$text" && s.name == "$text" && r.position.parent == s.position.parent && r.position.offset + r.length == s.position.offset, c = r.type == "attribute" && s.type == "attribute" && r.position.parent == s.position.parent && r.range.isFlat && s.range.isFlat && r.position.offset + r.length == s.position.offset && r.attributeKey == s.attributeKey && r.attributeOldValue == s.attributeOldValue && r.attributeNewValue == s.attributeNewValue;
      a || l || c ? (r.length++, c && (r.range.end = r.range.end.getShiftedBy(1)), e[t] = null) : n = t;
    }
    e = e.filter((t) => t);
    for (const t of e) delete t.changeCount, t.type == "attribute" && (delete t.position, delete t.length);
    return this._changeCount = 0, this._cachedChangesWithGraveyard = e, this._cachedChanges = e.filter(_5), i.includeChangesInGraveyard ? this._cachedChangesWithGraveyard.slice() : this._cachedChanges.slice();
  }
  getChangedRoots() {
    return Array.from(this._changedRoots.values()).map((i) => {
      const e = { ...i };
      return e.state !== void 0 && delete e.attributes, e;
    });
  }
  getRefreshedItems() {
    return new Set(this._refreshedItems);
  }
  reset() {
    this._changesInElement.clear(), this._elementChildrenSnapshots.clear(), this._elementsSnapshots.clear(), this._elementState.clear(), this._changedMarkers.clear(), this._changedRoots.clear(), this._refreshedItems.clear(), this._cachedChanges = null;
  }
  _refreshItem(i) {
    if (this._isInInsertedElement(i.parent)) return;
    this._markRemove(i.parent, i.startOffset, i.offsetSize), this._markInsert(i.parent, i.startOffset, i.offsetSize), this._refreshedItems.add(i), this._setElementState(i, "refresh");
    const e = T._createOn(i);
    for (const t of this._markerCollection.getMarkersIntersectingRange(e)) {
      const n = t.getData();
      this.bufferMarkerChange(t.name, n, n);
    }
    this._cachedChanges = null;
  }
  _bufferRootLoad(i) {
    if (i.isAttached()) {
      this._bufferRootStateChange(i.rootName, !0), this._markInsert(i, 0, i.maxOffset);
      for (const e of i.getAttributeKeys()) this._bufferRootAttributeChange(i.rootName, e, null, i.getAttribute(e));
      for (const e of this._markerCollection) if (e.getRange().root == i) {
        const t = e.getData();
        this.bufferMarkerChange(e.name, { ...t, range: null }, t);
      }
    }
  }
  _bufferRootStateChange(i, e) {
    if (!this._changedRoots.has(i)) return void this._changedRoots.set(i, { name: i, state: e ? "attached" : "detached" });
    const t = this._changedRoots.get(i);
    t.state !== void 0 ? (delete t.state, t.attributes === void 0 && this._changedRoots.delete(i)) : t.state = e ? "attached" : "detached";
  }
  _bufferRootAttributeChange(i, e, t, n) {
    const r = this._changedRoots.get(i) || { name: i }, s = r.attributes || {};
    if (s[e]) {
      const a = s[e];
      n === a.oldValue ? delete s[e] : a.newValue = n;
    } else s[e] = { oldValue: t, newValue: n };
    Object.entries(s).length === 0 ? (delete r.attributes, r.state === void 0 && this._changedRoots.delete(i)) : (r.attributes = s, this._changedRoots.set(i, r));
  }
  _markInsert(i, e, t) {
    if (i.root.is("rootElement") && !i.root._isLoaded) return;
    const n = { type: "insert", offset: e, howMany: t, count: this._changeCount++ };
    this._markChange(i, n);
  }
  _markRemove(i, e, t) {
    if (i.root.is("rootElement") && !i.root._isLoaded) return;
    const n = { type: "remove", offset: e, howMany: t, count: this._changeCount++ };
    this._markChange(i, n), this._removeAllNestedChanges(i, e, t);
  }
  _markAttribute(i) {
    if (i.root.is("rootElement") && !i.root._isLoaded) return;
    const e = { type: "attribute", offset: i.startOffset, howMany: i.offsetSize, count: this._changeCount++ };
    this._markChange(i.parent, e);
  }
  _markChange(i, e) {
    this._makeSnapshots(i);
    const t = this._getChangesForElement(i);
    this._handleChange(e, t), t.push(e);
    for (let n = 0; n < t.length; n++) t[n].howMany < 1 && (t.splice(n, 1), n--);
  }
  _setElementState(i, e) {
    if (!i.is("element")) return;
    const t = Yr._statesPriority.indexOf(this._elementState.get(i));
    Yr._statesPriority.indexOf(e) > t && this._elementState.set(i, e);
  }
  _getDiffActionForNode(i, e) {
    if (!i.is("element") || !this._elementsSnapshots.has(i)) return e;
    const t = this._elementState.get(i);
    return t && t != "move" ? t : e;
  }
  _getChangesForElement(i) {
    let e;
    return this._changesInElement.has(i) ? e = this._changesInElement.get(i) : (e = [], this._changesInElement.set(i, e)), e;
  }
  _makeSnapshots(i) {
    if (this._elementChildrenSnapshots.has(i)) return;
    const e = Sm(i.getChildren());
    this._elementChildrenSnapshots.set(i, e);
    for (const t of e) this._elementsSnapshots.set(t.node, t);
  }
  _handleChange(i, e) {
    i.nodesToHandle = i.howMany;
    for (const t of e) {
      const n = i.offset + i.howMany, r = t.offset + t.howMany;
      if (i.type == "insert" && (t.type == "insert" && (i.offset <= t.offset ? t.offset += i.howMany : i.offset < r && (t.howMany += i.nodesToHandle, i.nodesToHandle = 0)), t.type == "remove" && i.offset < t.offset && (t.offset += i.howMany), t.type == "attribute")) {
        if (i.offset <= t.offset) t.offset += i.howMany;
        else if (i.offset < r) {
          const s = t.howMany;
          t.howMany = i.offset - t.offset, e.unshift({ type: "attribute", offset: n, howMany: s - t.howMany, count: this._changeCount++ });
        }
      }
      if (i.type == "remove") {
        if (t.type == "insert") {
          if (n <= t.offset) t.offset -= i.howMany;
          else if (n <= r) if (i.offset < t.offset) {
            const s = n - t.offset;
            t.offset = i.offset, t.howMany -= s, i.nodesToHandle -= s;
          } else t.howMany -= i.nodesToHandle, i.nodesToHandle = 0;
          else if (i.offset <= t.offset) i.nodesToHandle -= t.howMany, t.howMany = 0;
          else if (i.offset < r) {
            const s = r - i.offset;
            t.howMany -= s, i.nodesToHandle -= s;
          }
        }
        if (t.type == "remove" && (n <= t.offset ? t.offset -= i.howMany : i.offset < t.offset && (i.nodesToHandle += t.howMany, t.howMany = 0)), t.type == "attribute") {
          if (n <= t.offset) t.offset -= i.howMany;
          else if (i.offset < t.offset) {
            const s = n - t.offset;
            t.offset = i.offset, t.howMany -= s;
          } else if (i.offset < r) if (n <= r) {
            const s = t.howMany;
            t.howMany = i.offset - t.offset;
            const a = s - t.howMany - i.nodesToHandle;
            e.unshift({ type: "attribute", offset: i.offset, howMany: a, count: this._changeCount++ });
          } else t.howMany -= r - i.offset;
        }
      }
      if (i.type == "attribute") {
        if (t.type == "insert") if (i.offset < t.offset && n > t.offset) {
          if (n > r) {
            const s = { type: "attribute", offset: r, howMany: n - r, count: this._changeCount++ };
            this._handleChange(s, e), e.push(s);
          }
          i.nodesToHandle = t.offset - i.offset, i.howMany = i.nodesToHandle;
        } else i.offset >= t.offset && i.offset < r && (n > r ? (i.nodesToHandle = n - r, i.offset = r) : i.nodesToHandle = 0);
        if (t.type == "remove" && i.offset < t.offset && n > t.offset) {
          const s = { type: "attribute", offset: t.offset, howMany: n - t.offset, count: this._changeCount++ };
          this._handleChange(s, e), e.push(s), i.nodesToHandle = t.offset - i.offset, i.howMany = i.nodesToHandle;
        }
        t.type == "attribute" && (i.offset >= t.offset && n <= r ? (i.nodesToHandle = 0, i.howMany = 0, i.offset = 0) : i.offset <= t.offset && n >= r && (t.howMany = 0));
      }
    }
    i.howMany = i.nodesToHandle, delete i.nodesToHandle;
  }
  _getInsertDiff(i, e, t, n, r) {
    const s = { type: "insert", position: I._createAt(i, e), name: n.name, attributes: new Map(n.attributes), length: 1, changeCount: this._changeCount++, action: t };
    return t != "insert" && r && (s.before = { name: r.name, attributes: new Map(r.attributes) }), s;
  }
  _getRemoveDiff(i, e, t, n) {
    return { type: "remove", action: t, position: I._createAt(i, e), name: n.name, attributes: new Map(n.attributes), length: 1, changeCount: this._changeCount++ };
  }
  _getAttributesDiff(i, e, t) {
    const n = [];
    t = new Map(t);
    for (const [r, s] of e) {
      const a = t.has(r) ? t.get(r) : null;
      a !== s && n.push({ type: "attribute", position: i.start, range: i.clone(), length: 1, attributeKey: r, attributeOldValue: s, attributeNewValue: a, changeCount: this._changeCount++ }), t.delete(r);
    }
    for (const [r, s] of t) n.push({ type: "attribute", position: i.start, range: i.clone(), length: 1, attributeKey: r, attributeOldValue: null, attributeNewValue: s, changeCount: this._changeCount++ });
    return n;
  }
  _isInInsertedElement(i) {
    const e = i.parent;
    if (!e) return !1;
    const t = this._changesInElement.get(e), n = i.startOffset;
    if (t) {
      for (const r of t) if (r.type == "insert" && n >= r.offset && n < r.offset + r.howMany) return !0;
    }
    return this._isInInsertedElement(e);
  }
  _removeAllNestedChanges(i, e, t) {
    const n = new T(I._createAt(i, e), I._createAt(i, e + t));
    for (const r of n.getItems({ shallow: !0 })) r.is("element") && (this._changesInElement.delete(r), this._removeAllNestedChanges(r, 0, r.maxOffset));
  }
};
m(Yr, "_statesPriority", [void 0, "refresh", "rename", "move"]);
let ad = Yr;
function Em(o) {
  return { node: o, name: o.is("$text") ? "$text" : o.name, attributes: new Map(o.getAttributes()) };
}
function Sm(o) {
  const i = [];
  for (const e of o) if (e.is("$text")) for (let t = 0; t < e.data.length; ++t) i.push(Em(e));
  else i.push(Em(e));
  return i;
}
function k5(o, i) {
  const e = [];
  let t = 0, n = 0;
  for (const r of i) {
    if (r.offset > t) {
      for (let s = 0; s < r.offset - t; s++) e.push("e");
      n += r.offset - t;
    }
    if (r.type == "insert") {
      for (let s = 0; s < r.howMany; s++) e.push("i");
      t = r.offset + r.howMany;
    } else if (r.type == "remove") {
      for (let s = 0; s < r.howMany; s++) e.push("r");
      t = r.offset, n += r.howMany;
    } else {
      if (r.howMany > 1500) for (let s = 0; s < r.howMany; s++) e.push("a");
      else e.push(..."a".repeat(r.howMany).split(""));
      t = r.offset + r.howMany, n += r.howMany;
    }
  }
  if (n < o) for (let r = 0; r < o - n - t; r++) e.push("e");
  return e;
}
function _5(o) {
  const i = "position" in o && o.position.root.rootName == "$graveyard", e = "range" in o && o.range.root.rootName == "$graveyard";
  return !i && !e;
}
class w5 {
  constructor() {
    m(this, "_operations", []);
    m(this, "_undoPairs", /* @__PURE__ */ new Map());
    m(this, "_undoneOperations", /* @__PURE__ */ new Set());
    m(this, "_baseVersionToOperationIndex", /* @__PURE__ */ new Map());
    m(this, "_version", 0);
    m(this, "_gaps", /* @__PURE__ */ new Map());
  }
  get version() {
    return this._version;
  }
  set version(i) {
    this._operations.length && i > this._version + 1 && this._gaps.set(this._version, i), this._version = i;
  }
  get lastOperation() {
    return this._operations[this._operations.length - 1];
  }
  addOperation(i) {
    if (i.baseVersion !== this.version) throw new v("model-document-history-addoperation-incorrect-version", this, { operation: i, historyVersion: this.version });
    this._operations.push(i), this._version++, this._baseVersionToOperationIndex.set(i.baseVersion, this._operations.length - 1);
  }
  getOperations(i, e = this.version) {
    if (!this._operations.length) return [];
    const t = this._operations[0];
    i === void 0 && (i = t.baseVersion);
    let n = e - 1;
    for (const [a, l] of this._gaps) i > a && i < l && (i = l), n > a && n < l && (n = a - 1);
    if (n < t.baseVersion || i > this.lastOperation.baseVersion) return [];
    let r = this._baseVersionToOperationIndex.get(i);
    r === void 0 && (r = 0);
    let s = this._baseVersionToOperationIndex.get(n);
    return s === void 0 && (s = this._operations.length - 1), this._operations.slice(r, s + 1);
  }
  getOperation(i) {
    const e = this._baseVersionToOperationIndex.get(i);
    if (e !== void 0) return this._operations[e];
  }
  setOperationAsUndone(i, e) {
    this._undoPairs.set(e, i), this._undoneOperations.add(i);
  }
  isUndoingOperation(i) {
    return this._undoPairs.has(i);
  }
  isUndoneOperation(i) {
    return this._undoneOperations.has(i);
  }
  getUndoneOperation(i) {
    return this._undoPairs.get(i);
  }
  reset() {
    this._version = 0, this._undoPairs = /* @__PURE__ */ new Map(), this._operations = [], this._undoneOperations = /* @__PURE__ */ new Set(), this._gaps = /* @__PURE__ */ new Map(), this._baseVersionToOperationIndex = /* @__PURE__ */ new Map();
  }
}
class Sa extends Re {
  constructor(e, t, n = "main") {
    super(t);
    m(this, "rootName");
    m(this, "_document");
    m(this, "_isAttached", !0);
    m(this, "_isLoaded", !0);
    this._document = e, this.rootName = n;
  }
  get document() {
    return this._document;
  }
  isAttached() {
    return this._isAttached;
  }
  toJSON() {
    return this.rootName;
  }
}
Sa.prototype.is = function(o, i) {
  return i ? i === this.name && (o === "rootElement" || o === "model:rootElement" || o === "element" || o === "model:element") : o === "rootElement" || o === "model:rootElement" || o === "element" || o === "model:element" || o === "node" || o === "model:node";
};
const Im = "$graveyard";
class v5 extends Ae() {
  constructor(e) {
    super();
    m(this, "model");
    m(this, "history");
    m(this, "selection");
    m(this, "roots");
    m(this, "differ");
    m(this, "isReadOnly");
    m(this, "_postFixers");
    m(this, "_hasSelectionChangedFromTheLastChangeBlock");
    this.model = e, this.history = new w5(), this.selection = new xi(this), this.roots = new rt({ idProperty: "rootName" }), this.differ = new ad(e.markers), this.isReadOnly = !1, this._postFixers = /* @__PURE__ */ new Set(), this._hasSelectionChangedFromTheLastChangeBlock = !1, this.createRoot("$root", Im), this.listenTo(e, "applyOperation", (t, n) => {
      const r = n[0];
      r.isDocumentOperation && this.differ.bufferOperation(r);
    }, { priority: "high" }), this.listenTo(e, "applyOperation", (t, n) => {
      const r = n[0];
      r.isDocumentOperation && this.history.addOperation(r);
    }, { priority: "low" }), this.listenTo(this.selection, "change", () => {
      this._hasSelectionChangedFromTheLastChangeBlock = !0;
    }), this.listenTo(e.markers, "update", (t, n, r, s, a) => {
      const l = { ...n.getData(), range: s };
      this.differ.bufferMarkerChange(n.name, a, l), r === null && n.on("change", (c, d) => {
        const u = n.getData();
        this.differ.bufferMarkerChange(n.name, { ...u, range: d }, u);
      });
    }), this.registerPostFixer((t) => {
      let n = !1;
      for (const r of this.roots) r.isAttached() || r.isEmpty || (t.remove(t.createRangeIn(r)), n = !0);
      for (const r of this.model.markers) r.getRange().root.isAttached() || (t.removeMarker(r), n = !0);
      return n;
    });
  }
  get version() {
    return this.history.version;
  }
  set version(e) {
    this.history.version = e;
  }
  get graveyard() {
    return this.getRoot(Im);
  }
  createRoot(e = "$root", t = "main") {
    if (this.roots.get(t)) throw new v("model-document-createroot-name-exists", this, { name: t });
    const n = new Sa(this, e, t);
    return this.roots.add(n), n;
  }
  destroy() {
    this.selection.destroy(), this.stopListening();
  }
  getRoot(e = "main") {
    return this.roots.get(e);
  }
  getRootNames(e = !1) {
    return this.getRoots(e).map((t) => t.rootName);
  }
  getRoots(e = !1) {
    return this.roots.filter((t) => t != this.graveyard && (e || t.isAttached()) && t._isLoaded);
  }
  registerPostFixer(e) {
    this._postFixers.add(e);
  }
  toJSON() {
    const e = au(this);
    return e.selection = "[engine.model.DocumentSelection]", e.model = "[engine.model.Model]", e;
  }
  _handleChangeBlock(e) {
    this._hasDocumentChangedFromTheLastChangeBlock() && (this._callPostFixers(e), this.selection.refresh(), this.differ.hasDataChanges() ? this.fire("change:data", e.batch) : this.fire("change", e.batch), this.selection.refresh(), this.differ.reset()), this._hasSelectionChangedFromTheLastChangeBlock = !1;
  }
  _hasDocumentChangedFromTheLastChangeBlock() {
    return !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock;
  }
  _getDefaultRoot() {
    const e = this.getRoots();
    return e.length ? e[0] : this.graveyard;
  }
  _getDefaultRange() {
    const e = this._getDefaultRoot(), t = this.model, n = t.schema, r = t.createPositionFromPath(e, [0]);
    return n.getNearestSelectionRange(r) || t.createRange(r);
  }
  _validateSelectionRange(e) {
    return e.start.isValid() && e.end.isValid() && Pm(e.start) && Pm(e.end);
  }
  _callPostFixers(e) {
    let t = !1;
    do
      for (const n of this._postFixers) if (this.selection.refresh(), t = n(e), t) break;
    while (t);
  }
}
function Pm(o) {
  const i = o.textNode;
  if (i) {
    const e = i.data, t = o.offset - i.startOffset;
    return !ku(e, t) && !_u(e, t);
  }
  return !0;
}
class y5 extends Ae() {
  constructor() {
    super(...arguments);
    m(this, "_markers", /* @__PURE__ */ new Map());
  }
  [Symbol.iterator]() {
    return this._markers.values();
  }
  has(e) {
    const t = e instanceof Vo ? e.name : e;
    return this._markers.has(t);
  }
  get(e) {
    return this._markers.get(e) || null;
  }
  _set(e, t, n = !1, r = !1) {
    const s = e instanceof Vo ? e.name : e;
    if (s.includes(",")) throw new v("markercollection-incorrect-marker-name", this);
    const a = this._markers.get(s);
    if (a) {
      const d = a.getData(), u = a.getRange();
      let h = !1;
      return u.isEqual(t) || (a._attachLiveRange(Mt.fromRange(t)), h = !0), n != a.managedUsingOperations && (a._managedUsingOperations = n, h = !0), typeof r == "boolean" && r != a.affectsData && (a._affectsData = r, h = !0), h && this.fire(`update:${s}`, a, u, t, d), a;
    }
    const l = Mt.fromRange(t), c = new Vo(s, l, n, r);
    return this._markers.set(s, c), this.fire(`update:${s}`, c, null, t, { ...c.getData(), range: null }), c;
  }
  _remove(e) {
    const t = e instanceof Vo ? e.name : e, n = this._markers.get(t);
    return !!n && (this._markers.delete(t), this.fire(`update:${t}`, n, n.getRange(), null, n.getData()), this._destroyMarker(n), !0);
  }
  _refresh(e) {
    const t = e instanceof Vo ? e.name : e, n = this._markers.get(t);
    if (!n) throw new v("markercollection-refresh-marker-not-exists", this);
    const r = n.getRange();
    this.fire(`update:${t}`, n, r, r, n.getData());
  }
  *getMarkersAtPosition(e) {
    for (const t of this) t.getRange().containsPosition(e) && (yield t);
  }
  *getMarkersIntersectingRange(e) {
    for (const t of this) t.getRange().getIntersection(e) !== null && (yield t);
  }
  destroy() {
    for (const e of this._markers.values()) this._destroyMarker(e);
    this._markers = null, this.stopListening();
  }
  *getMarkersGroup(e) {
    for (const t of this._markers.values()) t.name.startsWith(e + ":") && (yield t);
  }
  _destroyMarker(e) {
    e.stopListening(), e._detachLiveRange();
  }
}
class Vo extends Ae(Rn) {
  constructor(e, t, n, r) {
    super();
    m(this, "name");
    m(this, "_managedUsingOperations");
    m(this, "_affectsData");
    m(this, "_liveRange");
    this.name = e, this._liveRange = this._attachLiveRange(t), this._managedUsingOperations = n, this._affectsData = r;
  }
  get managedUsingOperations() {
    if (!this._liveRange) throw new v("marker-destroyed", this);
    return this._managedUsingOperations;
  }
  get affectsData() {
    if (!this._liveRange) throw new v("marker-destroyed", this);
    return this._affectsData;
  }
  getData() {
    return { range: this.getRange(), affectsData: this.affectsData, managedUsingOperations: this.managedUsingOperations };
  }
  getStart() {
    if (!this._liveRange) throw new v("marker-destroyed", this);
    return this._liveRange.start.clone();
  }
  getEnd() {
    if (!this._liveRange) throw new v("marker-destroyed", this);
    return this._liveRange.end.clone();
  }
  getRange() {
    if (!this._liveRange) throw new v("marker-destroyed", this);
    return this._liveRange.toRange();
  }
  _attachLiveRange(e) {
    return this._liveRange && this._detachLiveRange(), e.delegate("change:range").to(this), e.delegate("change:content").to(this), this._liveRange = e, e;
  }
  _detachLiveRange() {
    this._liveRange.stopDelegating("change:range", this), this._liveRange.stopDelegating("change:content", this), this._liveRange.detach(), this._liveRange = null;
  }
}
Vo.prototype.is = function(o) {
  return o === "marker" || o === "model:marker";
};
class x5 extends Jt {
  constructor(e, t) {
    super(null);
    m(this, "sourcePosition");
    m(this, "howMany");
    this.sourcePosition = e.clone(), this.howMany = t;
  }
  get type() {
    return "detach";
  }
  get affectedSelectable() {
    return null;
  }
  toJSON() {
    const e = super.toJSON();
    return e.sourcePosition = this.sourcePosition.toJSON(), e;
  }
  _validate() {
    if (this.sourcePosition.root.document) throw new v("detach-operation-on-document-node", this);
  }
  _execute() {
    l_(T._createFromPositionAndShift(this.sourcePosition, this.howMany));
  }
  static get className() {
    return "DetachOperation";
  }
}
class Ii extends Rn {
  constructor(e) {
    super();
    m(this, "markers", /* @__PURE__ */ new Map());
    m(this, "_children", new Ur());
    e && this._insertChild(0, e);
  }
  [Symbol.iterator]() {
    return this.getChildren();
  }
  get childCount() {
    return this._children.length;
  }
  get maxOffset() {
    return this._children.maxOffset;
  }
  get isEmpty() {
    return this.childCount === 0;
  }
  get nextSibling() {
    return null;
  }
  get previousSibling() {
    return null;
  }
  get root() {
    return this;
  }
  get parent() {
    return null;
  }
  get document() {
    return null;
  }
  isAttached() {
    return !1;
  }
  getAncestors() {
    return [];
  }
  getChild(e) {
    return this._children.getNode(e);
  }
  getChildAtOffset(e) {
    return this._children.getNodeAtOffset(e);
  }
  getChildren() {
    return this._children[Symbol.iterator]();
  }
  getChildIndex(e) {
    return this._children.getNodeIndex(e);
  }
  getChildStartOffset(e) {
    return this._children.getNodeStartOffset(e);
  }
  getPath() {
    return [];
  }
  getNodeByPath(e) {
    let t = this;
    for (const n of e) t = t.getChildAtOffset(n);
    return t;
  }
  offsetToIndex(e) {
    return this._children.offsetToIndex(e);
  }
  toJSON() {
    const e = [];
    for (const t of this._children) e.push(t.toJSON());
    return e;
  }
  static fromJSON(e) {
    const t = [];
    for (const n of e) n.name ? t.push(Re.fromJSON(n)) : t.push($e.fromJSON(n));
    return new Ii(t);
  }
  _appendChild(e) {
    this._insertChild(this.childCount, e);
  }
  _insertChild(e, t) {
    const n = function(r) {
      return typeof r == "string" ? [new $e(r)] : (Qt(r) || (r = [r]), Array.from(r).map((s) => typeof s == "string" ? new $e(s) : s instanceof bi ? new $e(s.data, s.getAttributes()) : s));
    }(t);
    for (const r of n) r.parent !== null && r._remove(), r.parent = this;
    this._children._insertNodes(e, n);
  }
  _removeChildren(e, t = 1) {
    const n = this._children._removeNodes(e, t);
    for (const r of n) r.parent = null;
    return n;
  }
  _removeChildrenArray(e) {
    this._children._removeNodesArray(e);
    for (const t of e) t.parent = null;
  }
}
Ii.prototype.is = function(o) {
  return o === "documentFragment" || o === "model:documentFragment";
};
class C5 {
  constructor(i, e) {
    m(this, "model");
    m(this, "batch");
    this.model = i, this.batch = e;
  }
  createText(i, e) {
    return new $e(i, e);
  }
  createElement(i, e) {
    return new Re(i, e);
  }
  createDocumentFragment() {
    return new Ii();
  }
  cloneElement(i, e = !0) {
    return i._clone(e);
  }
  insert(i, e, t = 0) {
    if (this._assertWriterUsedCorrectly(), i instanceof $e && i.data == "") return;
    const n = I._createAt(e, t);
    if (i.parent) {
      if (Lm(i.root, n.root)) return void this.move(T._createOn(i), n);
      if (i.root.document) throw new v("model-writer-insert-forbidden-move", this);
      this.remove(i);
    }
    const r = n.root.document ? n.root.document.version : null, s = i instanceof Ii ? i._removeChildren(0, i.childCount) : i, a = new mt(n, s, r);
    if (i instanceof $e && (a.shouldReceiveAttributes = !0), this.batch.addOperation(a), this.model.applyOperation(a), i instanceof Ii) for (const [l, c] of i.markers) {
      const d = I._createAt(c.root, 0), u = { range: new T(c.start._getCombined(d, n), c.end._getCombined(d, n)), usingOperation: !0, affectsData: !0 };
      this.model.markers.has(l) ? this.updateMarker(l, u) : this.addMarker(l, u);
    }
  }
  insertText(i, e, t, n) {
    e instanceof Ii || e instanceof Re || e instanceof I ? this.insert(this.createText(i), e, t) : this.insert(this.createText(i, e), t, n);
  }
  insertElement(i, e, t, n) {
    e instanceof Ii || e instanceof Re || e instanceof I ? this.insert(this.createElement(i), e, t) : this.insert(this.createElement(i, e), t, n);
  }
  append(i, e) {
    this.insert(i, e, "end");
  }
  appendText(i, e, t) {
    e instanceof Ii || e instanceof Re ? this.insert(this.createText(i), e, "end") : this.insert(this.createText(i, e), t, "end");
  }
  appendElement(i, e, t) {
    e instanceof Ii || e instanceof Re ? this.insert(this.createElement(i), e, "end") : this.insert(this.createElement(i, e), t, "end");
  }
  setAttribute(i, e, t) {
    if (this._assertWriterUsedCorrectly(), t instanceof T) {
      const n = t.getMinimalFlatRanges();
      for (const r of n) Mm(this, i, e, r);
    } else Vm(this, i, e, t);
  }
  setAttributes(i, e) {
    for (const [t, n] of yi(i)) this.setAttribute(t, n, e);
  }
  removeAttribute(i, e) {
    if (this._assertWriterUsedCorrectly(), e instanceof T) {
      const t = e.getMinimalFlatRanges();
      for (const n of t) Mm(this, i, null, n);
    } else Vm(this, i, null, e);
  }
  clearAttributes(i) {
    this._assertWriterUsedCorrectly();
    const e = (t) => {
      for (const n of t.getAttributeKeys()) this.removeAttribute(n, t);
    };
    if (i instanceof T) for (const t of i.getItems()) e(t);
    else e(i);
  }
  move(i, e, t) {
    if (this._assertWriterUsedCorrectly(), !(i instanceof T)) throw new v("writer-move-invalid-range", this);
    if (!i.isFlat) throw new v("writer-move-range-not-flat", this);
    const n = I._createAt(e, t);
    if (n.isEqual(i.start)) return;
    if (this._addOperationForAffectedMarkers("move", i), !Lm(i.root, n.root)) throw new v("writer-move-different-document", this);
    const r = i.root.document ? i.root.document.version : null, s = new pe(i.start, i.end.offset - i.start.offset, n, r);
    this.batch.addOperation(s), this.model.applyOperation(s);
  }
  remove(i) {
    this._assertWriterUsedCorrectly();
    const e = (i instanceof T ? i : T._createOn(i)).getMinimalFlatRanges().reverse();
    for (const t of e) this._addOperationForAffectedMarkers("move", t), A5(t.start, t.end.offset - t.start.offset, this.batch, this.model);
  }
  merge(i) {
    this._assertWriterUsedCorrectly();
    const e = i.nodeBefore, t = i.nodeAfter;
    if (this._addOperationForAffectedMarkers("merge", i), !(e instanceof Re)) throw new v("writer-merge-no-element-before", this);
    if (!(t instanceof Re)) throw new v("writer-merge-no-element-after", this);
    i.root.document ? this._merge(i) : this._mergeDetached(i);
  }
  createPositionFromPath(i, e, t) {
    return this.model.createPositionFromPath(i, e, t);
  }
  createPositionAt(i, e) {
    return this.model.createPositionAt(i, e);
  }
  createPositionAfter(i) {
    return this.model.createPositionAfter(i);
  }
  createPositionBefore(i) {
    return this.model.createPositionBefore(i);
  }
  createRange(i, e) {
    return this.model.createRange(i, e);
  }
  createRangeIn(i) {
    return this.model.createRangeIn(i);
  }
  createRangeOn(i) {
    return this.model.createRangeOn(i);
  }
  createSelection(...i) {
    return this.model.createSelection(...i);
  }
  _mergeDetached(i) {
    const e = i.nodeBefore, t = i.nodeAfter;
    this.move(T._createIn(t), I._createAt(e, "end")), this.remove(t);
  }
  _merge(i) {
    const e = I._createAt(i.nodeBefore, "end"), t = I._createAt(i.nodeAfter, 0), n = i.root.document.graveyard, r = new I(n, [0]), s = i.root.document.version, a = new Qe(t, i.nodeAfter.maxOffset, e, r, s);
    this.batch.addOperation(a), this.model.applyOperation(a);
  }
  rename(i, e) {
    if (this._assertWriterUsedCorrectly(), !(i instanceof Re)) throw new v("writer-rename-not-element-instance", this);
    const t = i.root.document ? i.root.document.version : null, n = new Ft(I._createBefore(i), i.name, e, t);
    this.batch.addOperation(n), this.model.applyOperation(n);
  }
  split(i, e) {
    this._assertWriterUsedCorrectly();
    let t, n, r = i.parent;
    if (!r.parent) throw new v("writer-split-element-no-parent", this);
    if (e || (e = r.parent), !i.parent.getAncestors({ includeSelf: !0 }).includes(e)) throw new v("writer-split-invalid-limit-element", this);
    do {
      const s = r.root.document ? r.root.document.version : null, a = r.maxOffset - i.offset, l = Me.getInsertionPosition(i), c = new Me(i, a, l, null, s);
      this.batch.addOperation(c), this.model.applyOperation(c), t || n || (t = r, n = i.parent.nextSibling), r = (i = this.createPositionAfter(i.parent)).parent;
    } while (r !== e);
    return { position: i, range: new T(I._createAt(t, "end"), I._createAt(n, 0)) };
  }
  wrap(i, e) {
    if (this._assertWriterUsedCorrectly(), !i.isFlat) throw new v("writer-wrap-range-not-flat", this);
    const t = e instanceof Re ? e : new Re(e);
    if (t.childCount > 0) throw new v("writer-wrap-element-not-empty", this);
    if (t.parent !== null) throw new v("writer-wrap-element-attached", this);
    this.insert(t, i.start);
    const n = new T(i.start.getShiftedBy(1), i.end.getShiftedBy(1));
    this.move(n, I._createAt(t, 0));
  }
  unwrap(i) {
    if (this._assertWriterUsedCorrectly(), i.parent === null) throw new v("writer-unwrap-element-no-parent", this);
    this.move(T._createIn(i), this.createPositionAfter(i)), this.remove(i);
  }
  addMarker(i, e) {
    if (this._assertWriterUsedCorrectly(), !e || typeof e.usingOperation != "boolean") throw new v("writer-addmarker-no-usingoperation", this);
    const t = e.usingOperation, n = e.range, r = e.affectsData !== void 0 && e.affectsData;
    if (this.model.markers.has(i)) throw new v("writer-addmarker-marker-exists", this);
    if (!n) throw new v("writer-addmarker-no-range", this);
    return t ? (kr(this, i, null, n, r), this.model.markers.get(i)) : this.model.markers._set(i, n, t, r);
  }
  updateMarker(i, e) {
    this._assertWriterUsedCorrectly();
    const t = typeof i == "string" ? i : i.name, n = this.model.markers.get(t);
    if (!n) throw new v("writer-updatemarker-marker-not-exists", this);
    if (!e) return ce("writer-updatemarker-reconvert-using-editingcontroller", { markerName: t }), void this.model.markers._refresh(n);
    const r = typeof e.usingOperation == "boolean", s = typeof e.affectsData == "boolean", a = s ? e.affectsData : n.affectsData;
    if (!r && !e.range && !s) throw new v("writer-updatemarker-wrong-options", this);
    const l = n.getRange(), c = e.range ? e.range : l;
    r && e.usingOperation !== n.managedUsingOperations ? e.usingOperation ? kr(this, t, null, c, a) : (kr(this, t, l, null, a), this.model.markers._set(t, c, void 0, a)) : n.managedUsingOperations ? kr(this, t, l, c, a) : this.model.markers._set(t, c, void 0, a);
  }
  removeMarker(i) {
    this._assertWriterUsedCorrectly();
    const e = typeof i == "string" ? i : i.name;
    if (!this.model.markers.has(e)) throw new v("writer-removemarker-no-marker", this);
    const t = this.model.markers.get(e);
    if (!t.managedUsingOperations) return void this.model.markers._remove(e);
    kr(this, e, t.getRange(), null, t.affectsData);
  }
  addRoot(i, e = "$root") {
    this._assertWriterUsedCorrectly();
    const t = this.model.document.getRoot(i);
    if (t && t.isAttached()) throw new v("writer-addroot-root-exists", this);
    const n = this.model.document, r = new Oi(i, e, !0, n, n.version);
    return this.batch.addOperation(r), this.model.applyOperation(r), this.model.document.getRoot(i);
  }
  detachRoot(i) {
    this._assertWriterUsedCorrectly();
    const e = typeof i == "string" ? this.model.document.getRoot(i) : i;
    if (!e || !e.isAttached()) throw new v("writer-detachroot-no-root", this);
    for (const r of this.model.markers) r.getRange().root === e && this.removeMarker(r);
    for (const r of e.getAttributeKeys()) this.removeAttribute(r, e);
    this.remove(this.createRangeIn(e));
    const t = this.model.document, n = new Oi(e.rootName, e.name, !1, t, t.version);
    this.batch.addOperation(n), this.model.applyOperation(n);
  }
  setSelection(...i) {
    this._assertWriterUsedCorrectly(), this.model.document.selection._setTo(...i);
  }
  setSelectionFocus(i, e) {
    this._assertWriterUsedCorrectly(), this.model.document.selection._setFocus(i, e);
  }
  setSelectionAttribute(i, e) {
    if (this._assertWriterUsedCorrectly(), typeof i == "string") this._setSelectionAttribute(i, e);
    else for (const [t, n] of yi(i)) this._setSelectionAttribute(t, n);
  }
  removeSelectionAttribute(i) {
    if (this._assertWriterUsedCorrectly(), typeof i == "string") this._removeSelectionAttribute(i);
    else for (const e of i) this._removeSelectionAttribute(e);
  }
  overrideSelectionGravity() {
    return this.model.document.selection._overrideGravity();
  }
  restoreSelectionGravity(i) {
    this.model.document.selection._restoreGravity(i);
  }
  _setSelectionAttribute(i, e) {
    const t = this.model.document.selection;
    if (t.isCollapsed && t.anchor.parent.isEmpty) {
      const n = xi._getStoreAttributeKey(i);
      this.setAttribute(n, e, t.anchor.parent);
    }
    t._setAttribute(i, e);
  }
  _removeSelectionAttribute(i) {
    const e = this.model.document.selection;
    if (e.isCollapsed && e.anchor.parent.isEmpty) {
      const t = xi._getStoreAttributeKey(i);
      this.removeAttribute(t, e.anchor.parent);
    }
    e._removeAttribute(i);
  }
  _assertWriterUsedCorrectly() {
    if (this.model._currentWriter !== this) throw new v("writer-incorrect-use", this);
  }
  _addOperationForAffectedMarkers(i, e) {
    for (const t of this.model.markers) {
      if (!t.managedUsingOperations) continue;
      const n = t.getRange();
      let r = !1;
      if (i === "move") {
        const s = e;
        r = s.containsPosition(n.start) || s.start.isEqual(n.start) || s.containsPosition(n.end) || s.end.isEqual(n.end);
      } else {
        const s = e, a = s.nodeBefore, l = s.nodeAfter, c = n.start.parent == a && n.start.isAtEnd, d = n.end.parent == l && n.end.offset == 0, u = n.end.nodeAfter == l, h = n.start.nodeAfter == l;
        r = c || d || u || h;
      }
      r && this.updateMarker(t.name, { range: n });
    }
  }
}
function Mm(o, i, e, t) {
  const n = o.model, r = n.document;
  let s, a, l, c = t.start;
  for (const u of t.getWalker({ shallow: !0 })) l = u.item.getAttribute(i), s && a != l && (a != e && d(), c = s), s = u.nextPosition, a = l;
  function d() {
    const u = new T(c, s), h = u.root.document ? r.version : null, g = new it(u, i, a, e, h);
    o.batch.addOperation(g), n.applyOperation(g);
  }
  s instanceof I && s != c && a != e && d();
}
function Vm(o, i, e, t) {
  const n = o.model, r = n.document, s = t.getAttribute(i);
  let a, l;
  if (s != e) {
    if (t.root === t) {
      const c = t.document ? r.version : null;
      l = new on(t, i, s, e, c);
    } else {
      a = new T(I._createBefore(t), o.createPositionAfter(t));
      const c = a.root.document ? r.version : null;
      l = new it(a, i, s, e, c);
    }
    o.batch.addOperation(l), n.applyOperation(l);
  }
}
function kr(o, i, e, t, n) {
  const r = o.model, s = r.document, a = new Pt(i, e, t, r.markers, !!n, s.version);
  o.batch.addOperation(a), r.applyOperation(a);
}
function A5(o, i, e, t) {
  let n;
  if (o.root.document) {
    const r = t.document, s = new I(r.graveyard, [0]);
    n = new pe(o, i, s, r.version);
  } else n = new x5(o, i);
  e.addOperation(n), t.applyOperation(n);
}
function Lm(o, i) {
  return o === i || o instanceof Sa && i instanceof Sa;
}
function T5(o, i, e = {}) {
  if (i.isCollapsed) return;
  const t = i.getFirstRange();
  if (t.root.rootName == "$graveyard") return;
  const n = o.schema;
  o.change((r) => {
    if (!e.doNotResetEntireContent && function(c, d) {
      const u = c.getLimitElement(d);
      if (!d.containsEntireContent(u)) return !1;
      const h = d.getFirstRange();
      return h.start.parent == h.end.parent ? !1 : c.checkChild(u, "paragraph");
    }(n, i)) return void function(c, d) {
      const u = c.model.schema.getLimitElement(d);
      c.remove(c.createRangeIn(u)), Om(c, c.createPositionAt(u, 0), d);
    }(r, i);
    const s = {};
    if (!e.doNotAutoparagraph) {
      const c = i.getSelectedElement();
      c && Object.assign(s, n.getAttributesWithProperty(c, "copyOnReplace", !0));
    }
    const [a, l] = function(c) {
      const d = c.root.document.model, u = c.start;
      let h = c.end;
      if (d.hasContent(c, { ignoreMarkers: !0 })) {
        const g = function(p) {
          const f = p.parent, b = f.root.document.model.schema, k = f.getAncestors({ parentFirst: !0, includeSelf: !0 });
          for (const _ of k) {
            if (b.isLimit(_)) return null;
            if (b.isBlock(_)) return _;
          }
        }(h);
        if (g && h.isTouching(d.createPositionAt(g, 0))) {
          const p = d.createSelection(c);
          d.modifySelection(p, { direction: "backward" });
          const f = p.getLastPosition(), b = d.createRange(f, h);
          d.hasContent(b, { ignoreMarkers: !0 }) || (h = f);
        }
      }
      return [Je.fromPosition(u, "toPrevious"), Je.fromPosition(h, "toNext")];
    }(t);
    a.isTouching(l) || r.remove(r.createRange(a, l)), e.leaveUnmerged || (function(c, d, u) {
      const h = c.model;
      if (!Su(c.model.schema, d, u)) return;
      const [g, p] = function(f, b) {
        const k = f.getAncestors(), _ = b.getAncestors();
        let w = 0;
        for (; k[w] && k[w] == _[w]; ) w++;
        return [k[w], _[w]];
      }(d, u);
      !g || !p || (!h.hasContent(g, { ignoreMarkers: !0 }) && h.hasContent(p, { ignoreMarkers: !0 }) ? h_(c, d, u, g.parent) : u_(c, d, u, g.parent));
    }(r, a, l), n.removeDisallowedAttributes(a.parent.getChildren(), r)), m_(r, i, a), !e.doNotAutoparagraph && function(c, d) {
      const u = c.checkChild(d, "$text"), h = c.checkChild(d, "paragraph");
      return !u && h;
    }(n, a) && Om(r, a, i, s), a.detach(), l.detach();
  });
}
function u_(o, i, e, t) {
  const n = i.parent, r = e.parent;
  if (n != t && r != t) {
    for (i = o.createPositionAfter(n), (e = o.createPositionBefore(r)).isEqual(i) || o.insert(r, i), o.merge(i); e.parent.isEmpty; ) {
      const s = e.parent;
      e = o.createPositionBefore(s), o.remove(s);
    }
    Su(o.model.schema, i, e) && u_(o, i, e, t);
  }
}
function h_(o, i, e, t) {
  const n = i.parent, r = e.parent;
  if (n != t && r != t) {
    for (i = o.createPositionAfter(n), (e = o.createPositionBefore(r)).isEqual(i) || o.insert(n, e); i.parent.isEmpty; ) {
      const s = i.parent;
      i = o.createPositionBefore(s), o.remove(s);
    }
    e = o.createPositionBefore(r), function(s, a) {
      const l = a.nodeBefore, c = a.nodeAfter;
      l.name != c.name && s.rename(l, c.name), s.clearAttributes(l), s.setAttributes(Object.fromEntries(c.getAttributes()), l), s.merge(a);
    }(o, e), Su(o.model.schema, i, e) && h_(o, i, e, t);
  }
}
function Su(o, i, e) {
  const t = i.parent, n = e.parent;
  return t != n && !o.isLimit(t) && !o.isLimit(n) && function(r, s, a) {
    const l = new T(r, s);
    for (const c of l.getWalker()) if (a.isLimit(c.item)) return !1;
    return !0;
  }(i, e, o);
}
function Om(o, i, e, t = {}) {
  const n = o.createElement("paragraph");
  o.model.schema.setAllowedAttributes(n, t, o), o.insert(n, i), m_(o, e, o.createPositionAt(n, 0));
}
function m_(o, i, e) {
  i instanceof xi ? o.setSelection(e) : i.setTo(e);
}
function Nm(o, i) {
  const e = [];
  Array.from(o.getItems({ direction: "backward" })).map((t) => i.createRangeOn(t)).filter((t) => (t.start.isAfter(o.start) || t.start.isEqual(o.start)) && (t.end.isBefore(o.end) || t.end.isEqual(o.end))).forEach((t) => {
    e.push(t.start.parent), i.remove(t);
  }), e.forEach((t) => {
    let n = t;
    for (; n.parent && n.isEmpty; ) {
      const r = i.createRangeOn(n);
      n = n.parent, i.remove(r);
    }
  });
}
class E5 {
  constructor(i, e, t) {
    m(this, "model");
    m(this, "writer");
    m(this, "position");
    m(this, "canMergeWith");
    m(this, "schema");
    m(this, "_documentFragment");
    m(this, "_documentFragmentPosition");
    m(this, "_firstNode", null);
    m(this, "_lastNode", null);
    m(this, "_lastAutoParagraph", null);
    m(this, "_filterAttributesOf", []);
    m(this, "_affectedStart", null);
    m(this, "_affectedEnd", null);
    m(this, "_nodeToSelect", null);
    this.model = i, this.writer = e, this.position = t, this.canMergeWith = /* @__PURE__ */ new Set([this.position.parent]), this.schema = i.schema, this._documentFragment = e.createDocumentFragment(), this._documentFragmentPosition = e.createPositionAt(this._documentFragment, 0);
  }
  handleNodes(i) {
    for (const e of Array.from(i)) this._handleNode(e);
    this._insertPartialFragment(), this._lastAutoParagraph && this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph), this._mergeOnRight(), this.schema.removeDisallowedAttributes(this._filterAttributesOf, this.writer), this._filterAttributesOf = [];
  }
  _updateLastNodeFromAutoParagraph(i) {
    const e = this.writer.createPositionAfter(this._lastNode), t = this.writer.createPositionAfter(i);
    if (t.isAfter(e)) {
      if (this._lastNode = i, this.position.parent != i || !this.position.isAtEnd) throw new v("insertcontent-invalid-insertion-position", this);
      this.position = t, this._setAffectedBoundaries(this.position);
    }
  }
  getSelectionRange() {
    return this._nodeToSelect ? T._createOn(this._nodeToSelect) : this.model.schema.getNearestSelectionRange(this.position);
  }
  getAffectedRange() {
    return this._affectedStart ? new T(this._affectedStart, this._affectedEnd) : null;
  }
  destroy() {
    this._affectedStart && this._affectedStart.detach(), this._affectedEnd && this._affectedEnd.detach();
  }
  _handleNode(i) {
    this._checkAndSplitToAllowedPosition(i) ? (this._appendToFragment(i), this._firstNode || (this._firstNode = i), this._lastNode = i) : this.schema.isObject(i) || this._handleDisallowedNode(i);
  }
  _insertPartialFragment() {
    if (this._documentFragment.isEmpty) return;
    const i = Je.fromPosition(this.position, "toNext");
    this._setAffectedBoundaries(this.position), this._documentFragment.getChild(0) == this._firstNode && (this.writer.insert(this._firstNode, this.position), this._mergeOnLeft(), this.position = i.toPosition()), this._documentFragment.isEmpty || this.writer.insert(this._documentFragment, this.position), this._documentFragmentPosition = this.writer.createPositionAt(this._documentFragment, 0), this.position = i.toPosition(), i.detach();
  }
  _handleDisallowedNode(i) {
    i.is("element") && this.handleNodes(i.getChildren());
  }
  _appendToFragment(i) {
    if (!this.schema.checkChild(this.position, i)) throw new v("insertcontent-wrong-position", this, { node: i, position: this.position });
    this.writer.insert(i, this._documentFragmentPosition), this._documentFragmentPosition = this._documentFragmentPosition.getShiftedBy(i.offsetSize), this.schema.isObject(i) && !this.schema.checkChild(this.position, "$text") ? this._nodeToSelect = i : this._nodeToSelect = null, this._filterAttributesOf.push(i);
  }
  _setAffectedBoundaries(i) {
    this._affectedStart || (this._affectedStart = Je.fromPosition(i, "toPrevious")), this._affectedEnd && !this._affectedEnd.isBefore(i) || (this._affectedEnd && this._affectedEnd.detach(), this._affectedEnd = Je.fromPosition(i, "toNext"));
  }
  _mergeOnLeft() {
    const i = this._firstNode;
    if (!(i instanceof Re) || !this._canMergeLeft(i)) return;
    const e = Je._createBefore(i);
    e.stickiness = "toNext";
    const t = Je.fromPosition(this.position, "toNext");
    this._affectedStart.isEqual(e) && (this._affectedStart.detach(), this._affectedStart = Je._createAt(e.nodeBefore, "end", "toPrevious")), this._firstNode === this._lastNode && (this._firstNode = e.nodeBefore, this._lastNode = e.nodeBefore), this.writer.merge(e), e.isEqual(this._affectedEnd) && this._firstNode === this._lastNode && (this._affectedEnd.detach(), this._affectedEnd = Je._createAt(e.nodeBefore, "end", "toNext")), this.position = t.toPosition(), t.detach(), this._filterAttributesOf.push(this.position.parent), e.detach();
  }
  _mergeOnRight() {
    const i = this._lastNode;
    if (!(i instanceof Re) || !this._canMergeRight(i)) return;
    const e = Je._createAfter(i);
    if (e.stickiness = "toNext", !this.position.isEqual(e)) throw new v("insertcontent-invalid-insertion-position", this);
    this.position = I._createAt(e.nodeBefore, "end");
    const t = Je.fromPosition(this.position, "toPrevious");
    this._affectedEnd.isEqual(e) && (this._affectedEnd.detach(), this._affectedEnd = Je._createAt(e.nodeBefore, "end", "toNext")), this._firstNode === this._lastNode && (this._firstNode = e.nodeBefore, this._lastNode = e.nodeBefore), this.writer.merge(e), e.getShiftedBy(-1).isEqual(this._affectedStart) && this._firstNode === this._lastNode && (this._affectedStart.detach(), this._affectedStart = Je._createAt(e.nodeBefore, 0, "toPrevious")), this.position = t.toPosition(), t.detach(), this._filterAttributesOf.push(this.position.parent), e.detach();
  }
  _canMergeLeft(i) {
    const e = i.previousSibling;
    return e instanceof Re && this.canMergeWith.has(e) && this.model.schema.checkMerge(e, i);
  }
  _canMergeRight(i) {
    const e = i.nextSibling;
    return e instanceof Re && this.canMergeWith.has(e) && this.model.schema.checkMerge(i, e);
  }
  _insertAutoParagraph() {
    this._insertPartialFragment();
    const i = this.writer.createElement("paragraph");
    this.writer.insert(i, this.position), this._setAffectedBoundaries(this.position), this._lastAutoParagraph = i, this.position = this.writer.createPositionAt(i, 0);
  }
  _checkAndSplitToAllowedPosition(i) {
    const e = this._getAllowedIn(this.position.parent, i);
    if (!e) return !1;
    for (e != this.position.parent && this._insertPartialFragment(); e != this.position.parent; ) if (this.position.isAtStart) {
      const t = this.position.parent;
      this.position = this.writer.createPositionBefore(t), t.isEmpty && t.parent === e && this.writer.remove(t);
    } else if (this.position.isAtEnd) this.position = this.writer.createPositionAfter(this.position.parent);
    else {
      const t = this.writer.createPositionAfter(this.position.parent);
      this._setAffectedBoundaries(this.position), this.writer.split(this.position), this.position = t, this.canMergeWith.add(this.position.nodeAfter);
    }
    return this.schema.checkChild(this.position.parent, i) || this._insertAutoParagraph(), !0;
  }
  _getAllowedIn(i, e) {
    return this.schema.checkChild(i, e) || this.schema.checkChild(i, "paragraph") && this.schema.checkChild("paragraph", e) ? i : this.schema.isLimit(i) ? null : this._getAllowedIn(i.parent, e);
  }
}
function S5(o, i, e, t = {}) {
  if (!o.schema.isObject(i)) throw new v("insertobject-element-not-an-object", o, { object: i });
  const n = e || o.document.selection;
  let r = n;
  t.findOptimalPosition && o.schema.isBlock(i) && (r = o.createSelection(o.schema.findOptimalInsertionRange(n, t.findOptimalPosition)));
  const s = Te(n.getSelectedBlocks()), a = {};
  return s && Object.assign(a, o.schema.getAttributesWithProperty(s, "copyOnReplace", !0)), o.change((l) => {
    r.isCollapsed || o.deleteContent(r, { doNotAutoparagraph: !0 });
    let c = i;
    const d = r.anchor.parent;
    !o.schema.checkChild(d, i) && o.schema.checkChild(d, "paragraph") && o.schema.checkChild("paragraph", i) && (c = l.createElement("paragraph"), l.insert(i, c)), o.schema.setAllowedAttributes(c, a, l);
    const u = o.insertContent(c, r);
    return u.isCollapsed || t.setSelection && function(h, g, p, f) {
      const b = h.model;
      if (p == "on") return void h.setSelection(g, "on");
      if (p != "after") throw new v("insertobject-invalid-place-parameter-value", b);
      let k = g.nextSibling;
      if (b.schema.isInline(g)) return void h.setSelection(g, "after");
      !(k && b.schema.checkChild(k, "$text")) && b.schema.checkChild(g.parent, "paragraph") && (k = h.createElement("paragraph"), b.schema.setAllowedAttributes(k, f, h), b.insertContent(k, h.createPositionAfter(g))), k && h.setSelection(k, 0);
    }(l, i, t.setSelection, a), u;
  });
}
function I5(o, i) {
  const { isForward: e, walker: t, unit: n, schema: r, treatEmojiAsSingleUnit: s } = o, { type: a, item: l, nextPosition: c } = i;
  if (a == "text") return o.unit === "word" ? function(d, u) {
    let h = d.position.textNode;
    for (h || (h = u ? d.position.nodeAfter : d.position.nodeBefore); h && h.is("$text"); ) {
      const g = d.position.offset - h.startOffset;
      if (V5(h, g, u)) h = u ? d.position.nodeAfter : d.position.nodeBefore;
      else {
        if (M5(h.data, g, u)) break;
        d.next();
      }
    }
    return d.position;
  }(t, e) : function(d, u, h) {
    const g = d.position.textNode;
    if (g) {
      const p = g.data;
      let f = d.position.offset - g.startOffset;
      for (; ku(p, f) || u == "character" && _u(p, f) || h && Ok(p, f); ) d.next(), f = d.position.offset - g.startOffset;
    }
    return d.position;
  }(t, n, s);
  if (a == (e ? "elementStart" : "elementEnd")) {
    if (r.isSelectable(l)) return I._createAt(l, e ? "after" : "before");
    if (r.checkChild(c, "$text")) return c;
  } else {
    if (r.isLimit(l)) return void t.skip(() => !0);
    if (r.checkChild(c, "$text")) return c;
  }
}
function P5(o, i) {
  const e = o.root, t = I._createAt(e, i ? "end" : 0);
  return i ? new T(o, t) : new T(t, o);
}
function M5(o, i, e) {
  const t = i + (e ? 0 : -1);
  return ' ,.?!:;"-()'.includes(o.charAt(t));
}
function V5(o, i, e) {
  return i === (e ? o.offsetSize : 0);
}
let L5 = class extends xe() {
  constructor() {
    super();
    m(this, "markers");
    m(this, "document");
    m(this, "schema");
    m(this, "_pendingChanges");
    m(this, "_currentWriter");
    this.markers = new y5(), this.document = new v5(this), this.schema = new Yx(), this._pendingChanges = [], this._currentWriter = null, ["deleteContent", "modifySelection", "getSelectedContent", "applyOperation"].forEach((i) => this.decorate(i)), this.on("applyOperation", (i, e) => {
      e[0]._validate();
    }, { priority: "highest" }), this.schema.register("$root", { isLimit: !0 }), this.schema.register("$container", { allowIn: ["$root", "$container"] }), this.schema.register("$block", { allowIn: ["$root", "$container"], isBlock: !0 }), this.schema.register("$blockObject", { allowWhere: "$block", isBlock: !0, isObject: !0 }), this.schema.register("$inlineObject", { allowWhere: "$text", allowAttributesOf: "$text", isInline: !0, isObject: !0 }), this.schema.register("$text", { allowIn: "$block", isInline: !0, isContent: !0 }), this.schema.register("$clipboardHolder", { allowContentOf: "$root", allowChildren: "$text", isLimit: !0 }), this.schema.register("$documentFragment", { allowContentOf: "$root", allowChildren: "$text", isLimit: !0 }), this.schema.register("$marker"), this.schema.addChildCheck(() => !0, "$marker"), Zx(this), this.document.registerPostFixer(n_), this.on("insertContent", (i, [e, t]) => {
      i.return = function(n, r, s) {
        return n.change((a) => {
          const l = s || n.document.selection;
          l.isCollapsed || n.deleteContent(l, { doNotAutoparagraph: !0 });
          const c = new E5(n, a, l.anchor), d = [];
          let u;
          if (r.is("documentFragment")) {
            if (r.markers.size) {
              const p = [];
              for (const [f, b] of r.markers) {
                const { start: k, end: _ } = b, w = k.isEqual(_);
                p.push({ position: k, name: f, isCollapsed: w }, { position: _, name: f, isCollapsed: w });
              }
              p.sort(({ position: f }, { position: b }) => f.isBefore(b) ? 1 : -1);
              for (const { position: f, name: b, isCollapsed: k } of p) {
                let _ = null, w = null;
                const y = f.parent === r && f.isAtStart, x = f.parent === r && f.isAtEnd;
                y || x ? k && (w = y ? "start" : "end") : (_ = a.createElement("$marker"), a.insert(_, f)), d.push({ name: b, element: _, collapsed: w });
              }
            }
            u = r.getChildren();
          } else u = [r];
          c.handleNodes(u);
          let h = c.getSelectionRange();
          if (r.is("documentFragment") && d.length) {
            const p = h ? Mt.fromRange(h) : null, f = {};
            for (let b = d.length - 1; b >= 0; b--) {
              const { name: k, element: _, collapsed: w } = d[b], y = !f[k];
              if (y && (f[k] = []), _) {
                const x = a.createPositionAt(_, "before");
                f[k].push(x), a.remove(_);
              } else {
                const x = c.getAffectedRange();
                if (!x) {
                  w && f[k].push(c.position);
                  continue;
                }
                w ? f[k].push(x[w]) : f[k].push(y ? x.start : x.end);
              }
            }
            for (const [b, [k, _]] of Object.entries(f)) k && _ && k.root === _.root && k.root.document && !a.model.markers.has(b) && a.addMarker(b, { usingOperation: !0, affectsData: !0, range: new T(k, _) });
            p && (h = p.toRange(), p.detach());
          }
          h && (l instanceof xi ? a.setSelection(h) : l.setTo(h));
          const g = c.getAffectedRange() || n.createRange(l.anchor);
          return c.destroy(), g;
        });
      }(this, e, t);
    }), this.on("insertObject", (i, [e, t, n]) => {
      i.return = S5(this, e, t, n);
    }), this.on("canEditAt", (i) => {
      const e = !this.document.isReadOnly;
      i.return = e, e || i.stop();
    });
  }
  change(i) {
    try {
      return this._pendingChanges.length === 0 ? (this._pendingChanges.push({ batch: new xo(), callback: i }), this._runPendingChanges()[0]) : i(this._currentWriter);
    } catch (e) {
      v.rethrowUnexpectedError(e, this);
    }
  }
  enqueueChange(i, e) {
    try {
      i ? typeof i == "function" ? (e = i, i = new xo()) : i instanceof xo || (i = new xo(i)) : i = new xo(), this._pendingChanges.push({ batch: i, callback: e }), this._pendingChanges.length == 1 && this._runPendingChanges();
    } catch (t) {
      v.rethrowUnexpectedError(t, this);
    }
  }
  applyOperation(i) {
    i._execute();
  }
  insertContent(i, e, t, ...n) {
    const r = $l(e, t);
    return this.fire("insertContent", [i, r, t, ...n]);
  }
  insertObject(i, e, t, n, ...r) {
    const s = $l(e, t);
    return this.fire("insertObject", [i, s, n, n, ...r]);
  }
  deleteContent(i, e) {
    T5(this, i, e);
  }
  modifySelection(i, e) {
    (function(t, n, r = {}) {
      const s = t.schema, a = r.direction != "backward", l = r.unit ? r.unit : "character", c = !!r.treatEmojiAsSingleUnit, d = n.focus, u = new Ji({ boundaries: P5(d, a), singleCharacters: !0, direction: a ? "forward" : "backward" }), h = { walker: u, schema: s, isForward: a, unit: l, treatEmojiAsSingleUnit: c };
      let g;
      for (; g = u.next(); ) {
        if (g.done) return;
        const p = I5(h, g.value);
        if (p) return void (n instanceof xi ? t.change((f) => {
          f.setSelectionFocus(p);
        }) : n.setFocus(p));
      }
    })(this, i, e);
  }
  getSelectedContent(i) {
    return function(e, t) {
      return e.change((n) => {
        const r = n.createDocumentFragment(), s = t.getFirstRange();
        if (!s || s.isCollapsed) return r;
        const a = s.start.root, l = s.start.getCommonPath(s.end), c = a.getNodeByPath(l);
        let d;
        d = s.start.parent == s.end.parent ? s : n.createRange(n.createPositionAt(c, s.start.path[l.length]), n.createPositionAt(c, s.end.path[l.length] + 1));
        const u = d.end.offset - d.start.offset;
        for (const h of d.getItems({ shallow: !0 })) h.is("$textProxy") ? n.appendText(h.data, h.getAttributes(), r) : n.append(n.cloneElement(h, !0), r);
        if (d != s) {
          const h = s._getTransformedByMove(d.start, n.createPositionAt(r, 0), u)[0], g = n.createRange(n.createPositionAt(r, 0), h.start);
          Nm(n.createRange(h.end, n.createPositionAt(r, "end")), n), Nm(g, n);
        }
        return r;
      });
    }(this, i);
  }
  hasContent(i, e = {}) {
    const t = i instanceof T ? i : T._createIn(i);
    if (t.isCollapsed) return !1;
    const { ignoreWhitespaces: n = !1, ignoreMarkers: r = !1 } = e;
    if (!r) {
      for (const s of this.markers.getMarkersIntersectingRange(t)) if (s.affectsData) return !0;
    }
    for (const s of t.getItems()) if (this.schema.isContent(s) && (!s.is("$textProxy") || !n || s.data.search(/\S/) !== -1))
      return !0;
    return !1;
  }
  canEditAt(i) {
    const e = $l(i);
    return this.fire("canEditAt", [e]);
  }
  createPositionFromPath(i, e, t) {
    return new I(i, e, t);
  }
  createPositionAt(i, e) {
    return I._createAt(i, e);
  }
  createPositionAfter(i) {
    return I._createAfter(i);
  }
  createPositionBefore(i) {
    return I._createBefore(i);
  }
  createRange(i, e) {
    return new T(i, e);
  }
  createRangeIn(i) {
    return T._createIn(i);
  }
  createRangeOn(i) {
    return T._createOn(i);
  }
  createSelection(...i) {
    return new Gt(...i);
  }
  createBatch(i) {
    return new xo(i);
  }
  createOperationFromJSON(i) {
    return h5.fromJSON(i, this.document);
  }
  destroy() {
    this.document.destroy(), this.stopListening();
  }
  _runPendingChanges() {
    const i = [];
    this.fire("_beforeChanges");
    try {
      for (; this._pendingChanges.length; ) {
        const e = this._pendingChanges[0].batch;
        this._currentWriter = new C5(this, e);
        const t = this._pendingChanges[0].callback(this._currentWriter);
        i.push(t), this.document._handleChangeBlock(this._currentWriter), this._pendingChanges.shift(), this._currentWriter = null;
      }
    } finally {
      this._pendingChanges.length = 0, this._currentWriter = null, this.fire("_afterChanges");
    }
    return i;
  }
};
function $l(o, i) {
  if (o) return o instanceof Gt || o instanceof xi ? o : o instanceof uo ? i || i === 0 ? new Gt(o, i) : o.is("rootElement") ? new Gt(o, "in") : new Gt(o, "on") : new Gt(o);
}
class O5 extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", "click");
  }
  onDomEvent(e) {
    this.fire(e.type, e);
  }
}
class ml extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", ["mousedown", "mouseup", "mouseover", "mouseout"]);
  }
  onDomEvent(e) {
    this.fire(e.type, e);
  }
}
class N5 extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", ["touchstart", "touchend", "touchmove"]);
  }
  onDomEvent(e) {
    this.fire(e.type, e);
  }
}
class Ni {
  constructor(i) {
    m(this, "document");
    this.document = i;
  }
  createDocumentFragment(i) {
    return new eo(this.document, i);
  }
  createElement(i, e, t) {
    return new ln(this.document, i, e, t);
  }
  createText(i) {
    return new _t(this.document, i);
  }
  clone(i, e = !1) {
    return i._clone(e);
  }
  appendChild(i, e) {
    return e._appendChild(i);
  }
  insertChild(i, e, t) {
    return t._insertChild(i, e);
  }
  removeChildren(i, e, t) {
    return t._removeChildren(i, e);
  }
  remove(i) {
    const e = i.parent;
    return e ? this.removeChildren(e.getChildIndex(i), 1, e) : [];
  }
  replace(i, e) {
    const t = i.parent;
    if (t) {
      const n = t.getChildIndex(i);
      return this.removeChildren(n, 1, t), this.insertChild(n, e, t), !0;
    }
    return !1;
  }
  unwrapElement(i) {
    const e = i.parent;
    if (e) {
      const t = e.getChildIndex(i);
      this.remove(i), this.insertChild(t, i.getChildren(), e);
    }
  }
  rename(i, e) {
    const t = new ln(this.document, i, e.getAttributes(), e.getChildren());
    return this.replace(e, t) ? t : null;
  }
  setAttribute(i, e, t) {
    t._setAttribute(i, e);
  }
  removeAttribute(i, e) {
    e._removeAttribute(i);
  }
  addClass(i, e) {
    e._addClass(i);
  }
  removeClass(i, e) {
    e._removeClass(i);
  }
  setStyle(i, e, t) {
    Mi(i) && t === void 0 ? e._setStyle(i) : t._setStyle(i, e);
  }
  removeStyle(i, e) {
    e._removeStyle(i);
  }
  setCustomProperty(i, e, t) {
    t._setCustomProperty(i, e);
  }
  removeCustomProperty(i, e) {
    return e._removeCustomProperty(i);
  }
  createPositionAt(i, e) {
    return R._createAt(i, e);
  }
  createPositionAfter(i) {
    return R._createAfter(i);
  }
  createPositionBefore(i) {
    return R._createBefore(i);
  }
  createRange(i, e) {
    return new se(i, e);
  }
  createRangeOn(i) {
    return se._createOn(i);
  }
  createRangeIn(i) {
    return se._createIn(i);
  }
  createSelection(...i) {
    return new nn(...i);
  }
}
const R5 = /^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i, z5 = /^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i, B5 = /^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i, D5 = /^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i, F5 = /^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i, j5 = /\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi, H5 = /* @__PURE__ */ new Set(["black", "silver", "gray", "white", "maroon", "red", "purple", "fuchsia", "green", "lime", "olive", "yellow", "navy", "blue", "teal", "aqua", "orange", "aliceblue", "antiquewhite", "aquamarine", "azure", "beige", "bisque", "blanchedalmond", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkgrey", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkslategrey", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dimgrey", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "gainsboro", "ghostwhite", "gold", "goldenrod", "greenyellow", "grey", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightgrey", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightslategrey", "lightsteelblue", "lightyellow", "limegreen", "linen", "magenta", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "oldlace", "olivedrab", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "skyblue", "slateblue", "slategray", "slategrey", "snow", "springgreen", "steelblue", "tan", "thistle", "tomato", "turquoise", "violet", "wheat", "whitesmoke", "yellowgreen", "activeborder", "activecaption", "appworkspace", "background", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "captiontext", "graytext", "highlight", "highlighttext", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infobackground", "infotext", "menu", "menutext", "scrollbar", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "window", "windowframe", "windowtext", "rebeccapurple", "currentcolor", "transparent"]);
function $5(o) {
  return o.startsWith("#") ? R5.test(o) : o.startsWith("rgb") ? z5.test(o) || B5.test(o) : o.startsWith("hsl") ? D5.test(o) || F5.test(o) : H5.has(o.toLowerCase());
}
const U5 = /^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;
function q5(o) {
  return U5.test(o);
}
const W5 = /^[+-]?[0-9]*([.][0-9]+)?%$/;
function G5(o) {
  return W5.test(o);
}
const Z5 = ["repeat-x", "repeat-y", "repeat", "space", "round", "no-repeat"];
function K5(o) {
  return Z5.includes(o);
}
const Y5 = ["center", "top", "bottom", "left", "right"];
function Q5(o) {
  return Y5.includes(o);
}
const J5 = ["fixed", "scroll", "local"];
function X5(o) {
  return J5.includes(o);
}
const eC = /^url\(/;
function tC(o) {
  return eC.test(o);
}
function iC(o = "") {
  if (o === "") return { top: void 0, right: void 0, bottom: void 0, left: void 0 };
  const i = g_(o), e = i[0], t = i[2] || e, n = i[1] || e;
  return { top: e, bottom: t, right: n, left: i[3] || n };
}
function nC(o) {
  return (i) => {
    const { top: e, right: t, bottom: n, left: r } = i, s = [];
    return [e, t, r, n].every((a) => !!a) ? s.push([o, oC(i)]) : (e && s.push([o + "-top", e]), t && s.push([o + "-right", t]), n && s.push([o + "-bottom", n]), r && s.push([o + "-left", r])), s;
  };
}
function oC({ top: o, right: i, bottom: e, left: t }) {
  const n = [];
  return t !== i ? n.push(o, i, e, t) : e !== o ? n.push(o, i, e) : i !== o ? n.push(o, i) : n.push(o), n.join(" ");
}
function rC(o) {
  return (i) => ({ path: o, value: iC(i) });
}
function g_(o) {
  const i = o.trim().slice(0, 1500).matchAll(j5);
  return Array.from(i).map((e) => e[0]);
}
function sC(o) {
  o.setNormalizer("background", (i) => {
    const e = {}, t = g_(i);
    for (const n of t) K5(n) ? (e.repeat = e.repeat || [], e.repeat.push(n)) : Q5(n) ? (e.position = e.position || [], e.position.push(n)) : X5(n) ? e.attachment = n : $5(n) ? e.color = n : tC(n) && (e.image = n);
    return { path: "background", value: e };
  }), o.setNormalizer("background-color", (i) => ({ path: "background.color", value: i })), o.setReducer("background", (i) => {
    const e = [];
    return e.push(["background-color", i.color]), e;
  }), o.setStyleRelation("background", ["background-color"]);
}
function aC(o) {
  o.setNormalizer("margin", rC("margin")), o.setNormalizer("margin-top", (i) => ({ path: "margin.top", value: i })), o.setNormalizer("margin-right", (i) => ({ path: "margin.right", value: i })), o.setNormalizer("margin-bottom", (i) => ({ path: "margin.bottom", value: i })), o.setNormalizer("margin-left", (i) => ({ path: "margin.left", value: i })), o.setReducer("margin", nC("margin")), o.setStyleRelation("margin", ["margin-top", "margin-right", "margin-bottom", "margin-left"]);
}
class p_ {
  constructor(i) {
    m(this, "crashes", []);
    m(this, "state", "initializing");
    m(this, "_crashNumberLimit");
    m(this, "_now", Date.now);
    m(this, "_minimumNonErrorTimePeriod");
    m(this, "_boundErrorHandler");
    m(this, "_listeners");
    if (this.crashes = [], this._crashNumberLimit = typeof i.crashNumberLimit == "number" ? i.crashNumberLimit : 3, this._minimumNonErrorTimePeriod = typeof i.minimumNonErrorTimePeriod == "number" ? i.minimumNonErrorTimePeriod : 5e3, this._boundErrorHandler = (e) => {
      const t = "error" in e ? e.error : e.reason;
      t instanceof Error && this._handleError(t, e);
    }, this._listeners = {}, !this._restart) throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.");
  }
  destroy() {
    this._stopErrorHandling(), this._listeners = {};
  }
  on(i, e) {
    this._listeners[i] || (this._listeners[i] = []), this._listeners[i].push(e);
  }
  off(i, e) {
    this._listeners[i] = this._listeners[i].filter((t) => t !== e);
  }
  _fire(i, ...e) {
    const t = this._listeners[i] || [];
    for (const n of t) n.apply(this, [null, ...e]);
  }
  _startErrorHandling() {
    window.addEventListener("error", this._boundErrorHandler), window.addEventListener("unhandledrejection", this._boundErrorHandler);
  }
  _stopErrorHandling() {
    window.removeEventListener("error", this._boundErrorHandler), window.removeEventListener("unhandledrejection", this._boundErrorHandler);
  }
  _handleError(i, e) {
    if (this._shouldReactToError(i)) {
      this.crashes.push({ message: i.message, stack: i.stack, filename: e instanceof ErrorEvent ? e.filename : void 0, lineno: e instanceof ErrorEvent ? e.lineno : void 0, colno: e instanceof ErrorEvent ? e.colno : void 0, date: this._now() });
      const t = this._shouldRestart();
      this.state = "crashed", this._fire("stateChange"), this._fire("error", { error: i, causesRestart: t }), t ? this._restart() : (this.state = "crashedPermanently", this._fire("stateChange"));
    }
  }
  _shouldReactToError(i) {
    return i.is && i.is("CKEditorError") && i.context !== void 0 && i.context !== null && this.state === "ready" && this._isErrorComingFromThisItem(i);
  }
  _shouldRestart() {
    return this.crashes.length <= this._crashNumberLimit ? !0 : (this.crashes[this.crashes.length - 1].date - this.crashes[this.crashes.length - 1 - this._crashNumberLimit].date) / this._crashNumberLimit > this._minimumNonErrorTimePeriod;
  }
}
function ld(o, i = /* @__PURE__ */ new Set()) {
  const e = [o], t = /* @__PURE__ */ new Set();
  let n = 0;
  for (; e.length > n; ) {
    const r = e[n++];
    if (!t.has(r) && lC(r) && !i.has(r)) if (t.add(r), Symbol.iterator in r) try {
      for (const s of r) e.push(s);
    } catch {
    }
    else for (const s in r) s !== "defaultValue" && e.push(r[s]);
  }
  return t;
}
function lC(o) {
  const i = Object.prototype.toString.call(o), e = typeof o;
  return !(e === "number" || e === "boolean" || e === "string" || e === "symbol" || e === "function" || i === "[object Date]" || i === "[object RegExp]" || i === "[object Module]" || o == null || o._watchdogExcluded || o instanceof EventTarget || o instanceof Event);
}
function f_(o, i, e = /* @__PURE__ */ new Set()) {
  if (o === i && typeof (t = o) == "object" && t !== null) return !0;
  var t;
  const n = ld(o, e), r = ld(i, e);
  for (const s of n) if (r.has(s)) return !0;
  return !1;
}
class b_ extends p_ {
  constructor(e, t = {}) {
    super(t);
    m(this, "_editor", null);
    m(this, "_lifecyclePromise", null);
    m(this, "_throttledSave");
    m(this, "_data");
    m(this, "_lastDocumentVersion");
    m(this, "_elementOrData");
    m(this, "_initUsingData", !0);
    m(this, "_editables", {});
    m(this, "_config");
    m(this, "_excludedProps");
    this._throttledSave = Xo(this._save.bind(this), typeof t.saveInterval == "number" ? t.saveInterval : 5e3), e && (this._creator = (n, r) => e.create(n, r)), this._destructor = (n) => n.destroy();
  }
  get editor() {
    return this._editor;
  }
  get _item() {
    return this._editor;
  }
  setCreator(e) {
    this._creator = e;
  }
  setDestructor(e) {
    this._destructor = e;
  }
  _restart() {
    return Promise.resolve().then(() => (this.state = "initializing", this._fire("stateChange"), this._destroy())).catch((e) => {
      console.error("An error happened during the editor destroying.", e);
    }).then(() => {
      const e = {}, t = [], n = this._config.rootsAttributes || {}, r = {};
      for (const [a, l] of Object.entries(this._data.roots)) l.isLoaded ? (e[a] = "", r[a] = n[a] || {}) : t.push(a);
      const s = { ...this._config, extraPlugins: this._config.extraPlugins || [], lazyRoots: t, rootsAttributes: r, _watchdogInitialData: this._data };
      return delete s.initialData, s.extraPlugins.push(cC), this._initUsingData ? this.create(e, s, s.context) : Mn(this._elementOrData) ? this.create(this._elementOrData, s, s.context) : this.create(this._editables, s, s.context);
    }).then(() => {
      this._fire("restart");
    });
  }
  create(e = this._elementOrData, t = this._config, n) {
    return this._lifecyclePromise = Promise.resolve(this._lifecyclePromise).then(() => (super._startErrorHandling(), this._elementOrData = e, this._initUsingData = typeof e == "string" || Object.keys(e).length > 0 && typeof Object.values(e)[0] == "string", this._config = this._cloneEditorConfiguration(t) || {}, this._config.context = n, this._creator(e, this._config))).then((r) => {
      this._editor = r, r.model.document.on("change:data", this._throttledSave), this._lastDocumentVersion = r.model.document.version, this._data = this._getData(), this._initUsingData || (this._editables = this._getEditables()), this.state = "ready", this._fire("stateChange");
    }).finally(() => {
      this._lifecyclePromise = null;
    }), this._lifecyclePromise;
  }
  destroy() {
    return this._lifecyclePromise = Promise.resolve(this._lifecyclePromise).then(() => (this.state = "destroyed", this._fire("stateChange"), super.destroy(), this._destroy())).finally(() => {
      this._lifecyclePromise = null;
    }), this._lifecyclePromise;
  }
  _destroy() {
    return Promise.resolve().then(() => {
      this._stopErrorHandling(), this._throttledSave.cancel();
      const e = this._editor;
      return this._editor = null, e.model.document.off("change:data", this._throttledSave), this._destructor(e);
    });
  }
  _save() {
    const e = this._editor.model.document.version;
    try {
      this._data = this._getData(), this._initUsingData || (this._editables = this._getEditables()), this._lastDocumentVersion = e;
    } catch (t) {
      console.error(t, "An error happened during restoring editor data. Editor will be restored from the previously saved data.");
    }
  }
  _setExcludedProperties(e) {
    this._excludedProps = e;
  }
  _getData() {
    const e = this._editor, t = e.model.document.roots.filter((l) => l.isAttached() && l.rootName != "$graveyard"), { plugins: n } = e, r = n.has("CommentsRepository") && n.get("CommentsRepository"), s = n.has("TrackChanges") && n.get("TrackChanges"), a = { roots: {}, markers: {}, commentThreads: JSON.stringify([]), suggestions: JSON.stringify([]) };
    t.forEach((l) => {
      a.roots[l.rootName] = { content: JSON.stringify(Array.from(l.getChildren())), attributes: JSON.stringify(Array.from(l.getAttributes())), isLoaded: l._isLoaded };
    });
    for (const l of e.model.markers) l._affectsData && (a.markers[l.name] = { rangeJSON: l.getRange().toJSON(), usingOperation: l._managedUsingOperations, affectsData: l._affectsData });
    return r && (a.commentThreads = JSON.stringify(r.getCommentThreads({ toJSON: !0, skipNotAttached: !0 }))), s && (a.suggestions = JSON.stringify(s.getSuggestions({ toJSON: !0, skipNotAttached: !0 }))), a;
  }
  _getEditables() {
    const e = {};
    for (const t of this.editor.model.document.getRootNames()) {
      const n = this.editor.ui.getEditableElement(t);
      n && (e[t] = n);
    }
    return e;
  }
  _isErrorComingFromThisItem(e) {
    return f_(this._editor, e.context, this._excludedProps);
  }
  _cloneEditorConfiguration(e) {
    return sl(e, (t, n) => Mn(t) || n === "context" ? t : void 0);
  }
}
class cC {
  constructor(i) {
    m(this, "editor");
    m(this, "_data");
    this.editor = i, this._data = i.config.get("_watchdogInitialData");
  }
  init() {
    this.editor.data.on("init", (i) => {
      i.stop(), this.editor.model.enqueueChange({ isUndoable: !1 }, (e) => {
        this._restoreCollaborationData(), this._restoreEditorData(e);
      }), this.editor.data.fire("ready");
    }, { priority: 999 });
  }
  _createNode(i, e) {
    if ("name" in e) {
      const t = i.createElement(e.name, e.attributes);
      if (e.children) for (const n of e.children) t._appendChild(this._createNode(i, n));
      return t;
    }
    return i.createText(e.data, e.attributes);
  }
  _restoreEditorData(i) {
    const e = this.editor;
    Object.entries(this._data.roots).forEach(([t, { content: n, attributes: r }]) => {
      const s = JSON.parse(n), a = JSON.parse(r), l = e.model.document.getRoot(t);
      for (const [c, d] of a) i.setAttribute(c, d, l);
      for (const c of s) {
        const d = this._createNode(i, c);
        i.insert(d, l, "end");
      }
    }), Object.entries(this._data.markers).forEach(([t, n]) => {
      const { document: r } = e.model, { rangeJSON: { start: s, end: a }, ...l } = n, c = r.getRoot(s.root), d = i.createPositionFromPath(c, s.path, s.stickiness), u = i.createPositionFromPath(c, a.path, a.stickiness), h = i.createRange(d, u);
      i.addMarker(t, { range: h, ...l });
    });
  }
  _restoreCollaborationData() {
    const i = JSON.parse(this._data.commentThreads), e = JSON.parse(this._data.suggestions);
    i.forEach((t) => {
      const n = this.editor.config.get("collaboration.channelId"), r = this.editor.plugins.get("CommentsRepository");
      r.hasCommentThread(t.threadId) && r.getCommentThread(t.threadId).remove(), r.addCommentThread({ channelId: n, ...t });
    }), e.forEach((t) => {
      const n = this.editor.plugins.get("TrackChangesEditing");
      n.hasSuggestion(t.id) ? n.getSuggestion(t.id).attributes = t.attributes : n.addSuggestionData(t);
    });
  }
}
const qr = Symbol("MainQueueId");
class dC extends p_ {
  constructor(e, t = {}) {
    super(t);
    m(this, "_watchdogs", /* @__PURE__ */ new Map());
    m(this, "_watchdogConfig");
    m(this, "_context", null);
    m(this, "_contextProps", /* @__PURE__ */ new Set());
    m(this, "_actionQueues", new uC());
    m(this, "_contextConfig");
    m(this, "_item");
    this._watchdogConfig = t, this._creator = (n) => e.create(n), this._destructor = (n) => n.destroy(), this._actionQueues.onEmpty(() => {
      this.state === "initializing" && (this.state = "ready", this._fire("stateChange"));
    });
  }
  setCreator(e) {
    this._creator = e;
  }
  setDestructor(e) {
    this._destructor = e;
  }
  get context() {
    return this._context;
  }
  create(e = {}) {
    return this._actionQueues.enqueue(qr, () => (this._contextConfig = e, this._create()));
  }
  getItem(e) {
    return this._getWatchdog(e)._item;
  }
  getItemState(e) {
    return this._getWatchdog(e).state;
  }
  add(e) {
    const t = Rm(e);
    return Promise.all(t.map((n) => this._actionQueues.enqueue(n.id, () => {
      if (this.state === "destroyed") throw new Error("Cannot add items to destroyed watchdog.");
      if (!this._context) throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");
      let r;
      if (this._watchdogs.has(n.id)) throw new Error(`Item with the given id is already added: '${n.id}'.`);
      if (n.type === "editor") return r = new b_(null, this._watchdogConfig), r.setCreator(n.creator), r._setExcludedProperties(this._contextProps), n.destructor && r.setDestructor(n.destructor), this._watchdogs.set(n.id, r), r.on("error", (s, { error: a, causesRestart: l }) => {
        this._fire("itemError", { itemId: n.id, error: a }), l && this._actionQueues.enqueue(n.id, () => new Promise((c) => {
          const d = () => {
            r.off("restart", d), this._fire("itemRestart", { itemId: n.id }), c();
          };
          r.on("restart", d);
        }));
      }), r.create(n.sourceElementOrData, n.config, this._context);
      throw new Error(`Not supported item type: '${n.type}'.`);
    })));
  }
  remove(e) {
    const t = Rm(e);
    return Promise.all(t.map((n) => this._actionQueues.enqueue(n, () => {
      const r = this._getWatchdog(n);
      return this._watchdogs.delete(n), r.destroy();
    })));
  }
  destroy() {
    return this._actionQueues.enqueue(qr, () => (this.state = "destroyed", this._fire("stateChange"), super.destroy(), this._destroy()));
  }
  _restart() {
    return this._actionQueues.enqueue(qr, () => (this.state = "initializing", this._fire("stateChange"), this._destroy().catch((e) => {
      console.error("An error happened during destroying the context or items.", e);
    }).then(() => this._create()).then(() => this._fire("restart"))));
  }
  _create() {
    return Promise.resolve().then(() => (this._startErrorHandling(), this._creator(this._contextConfig))).then((e) => (this._context = e, this._contextProps = ld(this._context), Promise.all(Array.from(this._watchdogs.values()).map((t) => (t._setExcludedProperties(this._contextProps), t.create(void 0, void 0, this._context))))));
  }
  _destroy() {
    return Promise.resolve().then(() => {
      this._stopErrorHandling();
      const e = this._context;
      return this._context = null, this._contextProps = /* @__PURE__ */ new Set(), Promise.all(Array.from(this._watchdogs.values()).map((t) => t.destroy())).then(() => this._destructor(e));
    });
  }
  _getWatchdog(e) {
    const t = this._watchdogs.get(e);
    if (!t) throw new Error(`Item with the given id was not registered: ${e}.`);
    return t;
  }
  _isErrorComingFromThisItem(e) {
    for (const t of this._watchdogs.values()) if (t._isErrorComingFromThisItem(e)) return !1;
    return f_(this._context, e.context);
  }
}
class uC {
  constructor() {
    m(this, "_onEmptyCallbacks", []);
    m(this, "_queues", /* @__PURE__ */ new Map());
    m(this, "_activeActions", 0);
  }
  onEmpty(i) {
    this._onEmptyCallbacks.push(i);
  }
  enqueue(i, e) {
    const t = i === qr;
    this._activeActions++, this._queues.get(i) || this._queues.set(i, Promise.resolve());
    const n = (t ? Promise.all(this._queues.values()) : Promise.all([this._queues.get(qr), this._queues.get(i)])).then(e), r = n.catch(() => {
    });
    return this._queues.set(i, r), n.finally(() => {
      this._activeActions--, this._queues.get(i) === r && this._activeActions === 0 && this._onEmptyCallbacks.forEach((s) => s());
    });
  }
}
function Rm(o) {
  return Array.isArray(o) ? o : [o];
}
class hC {
  constructor() {
    m(this, "_commands");
    this._commands = /* @__PURE__ */ new Map();
  }
  add(i, e) {
    this._commands.set(i, e);
  }
  get(i) {
    return this._commands.get(i);
  }
  execute(i, ...e) {
    const t = this.get(i);
    if (!t) throw new v("commandcollection-command-not-found", this, { commandName: i });
    return t.execute(...e);
  }
  *names() {
    yield* this._commands.keys();
  }
  *commands() {
    yield* this._commands.values();
  }
  [Symbol.iterator]() {
    return this._commands[Symbol.iterator]();
  }
  destroy() {
    for (const i of this.commands()) i.destroy();
  }
}
class mC extends Le {
  constructor(e) {
    super();
    m(this, "editor");
    this.editor = e;
  }
  set(e, t, n = {}) {
    if (typeof t == "string") {
      const r = t;
      t = (s, a) => {
        this.editor.execute(r), a();
      };
    }
    super.set(e, t, n);
  }
}
const Ul = "contentEditing", zm = "common";
class gC {
  constructor(i) {
    m(this, "keystrokeInfos", /* @__PURE__ */ new Map());
    m(this, "_editor");
    this._editor = i;
    const e = i.config.get("menuBar.isVisible"), t = i.locale.t;
    this.addKeystrokeInfoCategory({ id: Ul, label: t("Content editing keystrokes"), description: t("These keyboard shortcuts allow for quick access to content editing features.") });
    const n = [{ label: t("Close contextual balloons, dropdowns, and dialogs"), keystroke: "Esc" }, { label: t("Open the accessibility help dialog"), keystroke: "Alt+0" }, { label: t("Move focus between form fields (inputs, buttons, etc.)"), keystroke: [["Tab"], ["Shift+Tab"]] }, { label: t("Move focus to the toolbar, navigate between toolbars"), keystroke: "Alt+F10", mayRequireFn: !0 }, { label: t("Navigate through the toolbar or menu bar"), keystroke: [["arrowup"], ["arrowright"], ["arrowdown"], ["arrowleft"]] }, { label: t("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."), keystroke: [["Enter"], ["Space"]] }];
    e && n.push({ label: t("Move focus to the menu bar, navigate between menu bars"), keystroke: "Alt+F9", mayRequireFn: !0 }), this.addKeystrokeInfoCategory({ id: "navigation", label: t("User interface and content navigation keystrokes"), description: t("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."), groups: [{ id: "common", keystrokes: n }] });
  }
  addKeystrokeInfoCategory({ id: i, label: e, description: t, groups: n }) {
    this.keystrokeInfos.set(i, { id: i, label: e, description: t, groups: /* @__PURE__ */ new Map() }), this.addKeystrokeInfoGroup({ categoryId: i, id: zm }), n && n.forEach((r) => {
      this.addKeystrokeInfoGroup({ categoryId: i, ...r });
    });
  }
  addKeystrokeInfoGroup({ categoryId: i = Ul, id: e, label: t, keystrokes: n }) {
    const r = this.keystrokeInfos.get(i);
    if (!r) throw new v("accessibility-unknown-keystroke-info-category", this._editor, { groupId: e, categoryId: i });
    r.groups.set(e, { id: e, label: t, keystrokes: n || [] });
  }
  addKeystrokeInfos({ categoryId: i = Ul, groupId: e = zm, keystrokes: t }) {
    if (!this.keystrokeInfos.has(i)) throw new v("accessibility-unknown-keystroke-info-category", this._editor, { categoryId: i, keystrokes: t });
    const n = this.keystrokeInfos.get(i);
    if (!n.groups.has(e)) throw new v("accessibility-unknown-keystroke-info-group", this._editor, { groupId: e, categoryId: i, keystrokes: t });
    n.groups.get(e).keystrokes.push(...t);
  }
}
function pC(o) {
  return Object.getPrototypeOf(o).constructor.editorName;
}
function ql(o) {
  if (!o) return;
  const i = Array.isArray(o) ? { items: o } : o, e = function n(r) {
    return r.flatMap((s) => typeof s == "string" ? [s] : n(s.items));
  }(i.items || []);
  return { isMultiline: e.includes("-"), shouldNotGroupWhenFull: !!i.shouldNotGroupWhenFull, items: (t = e, t.filter((n) => n !== "|" && n !== "-")) };
  var t;
}
function fC() {
  let o = "unknown", i = "unknown";
  return q.isMac ? o = "mac" : q.isWindows ? o = "windows" : q.isiOS ? o = "ios" : q.isAndroid && (o = "android"), q.isGecko ? i = "gecko" : q.isBlink ? i = "blink" : q.isSafari && (i = "safari"), { os: o, browser: i };
}
function bC() {
  return localStorage.getItem("__ckeditor-session-id") || localStorage.setItem("__ckeditor-session-id", Tt()), localStorage.getItem("__ckeditor-session-id");
}
function kC() {
  return z.window.CKEDITOR_PAGE_SESSION_ID = z.window.CKEDITOR_PAGE_SESSION_ID || Tt(), z.window.CKEDITOR_PAGE_SESSION_ID;
}
class Lo extends xe() {
  constructor(e = {}) {
    super();
    m(this, "accessibility");
    m(this, "commands");
    m(this, "config");
    m(this, "conversion");
    m(this, "data");
    m(this, "editing");
    m(this, "locale");
    m(this, "model");
    m(this, "plugins");
    m(this, "keystrokes");
    m(this, "t");
    m(this, "_context");
    m(this, "_readOnlyLocks");
    if ("sanitizeHtml" in e) throw new v("editor-config-sanitizehtml-not-supported");
    const t = this.constructor, { translations: n, ...r } = t.defaultConfig || {}, { translations: s = n, ...a } = e, l = e.language || r.language;
    this._context = e.context || new xa({ language: l, translations: s }), this._context._addEditor(this, !e.context);
    const c = Array.from(t.builtinPlugins || []);
    this.config = new yk(a, r), this.config.define("plugins", c), this.config.define(this._context._getEditorConfig()), function(u) {
      let h = u.get("licenseKey");
      if (!h && window.CKEDITOR_GLOBAL_LICENSE_KEY && (h = window.CKEDITOR_GLOBAL_LICENSE_KEY, u.set("licenseKey", h)), !h) throw new v("license-key-missing");
    }(this.config), this.plugins = new Nk(this, c, this._context.plugins), this.locale = this._context.locale, this.t = this.locale.t, this._readOnlyLocks = /* @__PURE__ */ new Set(), this.commands = new hC(), this.set("state", "initializing"), this.once("ready", () => this.state = "ready", { priority: "high" }), this.once("destroy", () => this.state = "destroyed", { priority: "high" }), this.model = new L5(), this.on("change:isReadOnly", () => {
      this.model.document.isReadOnly = this.isReadOnly;
    });
    const d = new ox();
    this.data = new d5(this.model, d), this.editing = new Kx(this.model, d), this.editing.view.document.bind("isReadOnly").to(this), this.conversion = new u5([this.editing.downcastDispatcher, this.data.downcastDispatcher], this.data.upcastDispatcher), this.conversion.addAlias("dataDowncast", this.data.downcastDispatcher), this.conversion.addAlias("editingDowncast", this.editing.downcastDispatcher), this.keystrokes = new mC(this), this.keystrokes.listenTo(this.editing.view.document), this.accessibility = new gC(this), function(u) {
      const h = u.config.get("licenseKey"), g = window[Symbol.for("cke distribution")] || "sh";
      function p(_) {
        u.enableReadOnlyMode(Symbol("invalidLicense")), u._showLicenseError(_);
      }
      if (h == "GPL") return void (g == "cloud" && p("distributionChannel"));
      const f = function(_) {
        const w = _.split(".");
        return w.length != 3 ? null : w[1];
      }(h);
      if (!f) return void p("invalid");
      const b = bu(f);
      if (!b || !function(_) {
        return ["exp", "jti", "vc"].every((w) => w in _);
      }(b)) return void p("invalid");
      if (b.distributionChannel && !De(b.distributionChannel).includes(g)) return void p("distributionChannel");
      if (Y2(function(_) {
        return Object.getOwnPropertyNames(_).sort().filter((w) => w != "vc" && _[w] != null).map((w) => _[w]);
      }(b)) != b.vc.toLowerCase()) return void p("invalid");
      if (new Date(1e3 * b.exp) < k2) return void p("expired");
      const k = b.licensedHosts;
      if (k && k.length > 0 && !function(_) {
        const { hostname: w } = new URL(window.location.href);
        if (_.includes(w)) return !0;
        const y = w.split(".");
        return _.filter((x) => x.includes("*")).map((x) => x.split(".")).filter((x) => x.length <= y.length).map((x) => Array(y.length - x.length).fill(x[0] === "*" ? "*" : "").concat(x)).some((x) => y.every((C, S) => x[S] === C || x[S] === "*"));
      }(k)) return void p("domainLimit");
      if (["evaluation", "trial"].includes(b.licenseType) && 1e3 * b.exp < Date.now()) return void p("expired");
      if (["development", "evaluation", "trial"].includes(b.licenseType)) {
        const { licenseType: _ } = b, w = _[0].toUpperCase() + _.slice(1), y = _ === "evaluation" ? "an" : "a";
        console.info(`%cCKEditor 5 ${w} License`, "color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"), console.warn(`⚠️ You are using ${y} ${_} license of CKEditor 5` + (_ === "trial" ? " which is for evaluation purposes only" : "") + ". For production usage, please obtain a production license at https://portal.ckeditor.com/");
      }
      if (["evaluation", "trial"].includes(b.licenseType)) {
        const _ = b.licenseType, w = setTimeout(() => {
          p(`${_}Limit`);
        }, 6e5);
        u.on("destroy", () => {
          clearTimeout(w);
        });
      }
      b.usageEndpoint && u.once("ready", () => {
        const _ = { requestId: Tt(), requestTime: Math.round(Date.now() / 1e3), license: h, editor: _C(u) };
        u._sendUsageRequest(b.usageEndpoint, _).then((w) => {
          const { status: y, message: x } = w;
          x && console.warn(x), y != "ok" && p("usageLimit");
        }, () => {
          b2("license-key-validation-endpoint-not-reachable", { url: b.usageEndpoint });
        });
      }, { priority: "high" });
    }(this);
  }
  static get editorName() {
    return "Editor";
  }
  get isReadOnly() {
    return this._readOnlyLocks.size > 0;
  }
  set isReadOnly(e) {
    throw new v("editor-isreadonly-has-no-setter");
  }
  enableReadOnlyMode(e) {
    if (typeof e != "string" && typeof e != "symbol") throw new v("editor-read-only-lock-id-invalid", null, { lockId: e });
    this._readOnlyLocks.has(e) || (this._readOnlyLocks.add(e), this._readOnlyLocks.size === 1 && this.fire("change:isReadOnly", "isReadOnly", !0, !1));
  }
  disableReadOnlyMode(e) {
    if (typeof e != "string" && typeof e != "symbol") throw new v("editor-read-only-lock-id-invalid", null, { lockId: e });
    this._readOnlyLocks.has(e) && (this._readOnlyLocks.delete(e), this._readOnlyLocks.size === 0 && this.fire("change:isReadOnly", "isReadOnly", !1, !0));
  }
  setData(e) {
    this.data.set(e);
  }
  getData(e) {
    return this.data.get(e);
  }
  initPlugins() {
    const e = this.config, t = e.get("plugins"), n = e.get("removePlugins") || [], r = e.get("extraPlugins") || [], s = e.get("substitutePlugins") || [];
    return this.plugins.init(t.concat(r), n, s);
  }
  destroy() {
    let e = Promise.resolve();
    return this.state == "initializing" && (e = new Promise((t) => this.once("ready", t))), e.then(() => {
      this.fire("destroy"), this.stopListening(), this.commands.destroy();
    }).then(() => this.plugins.destroy()).then(() => {
      this.model.destroy(), this.data.destroy(), this.editing.destroy(), this.keystrokes.destroy();
    }).then(() => this._context._removeEditor(this));
  }
  execute(e, ...t) {
    try {
      return this.commands.execute(e, ...t);
    } catch (n) {
      v.rethrowUnexpectedError(n, this);
    }
  }
  focus() {
    this.editing.view.focus();
  }
  static create(...e) {
    throw new Error("This is an abstract method.");
  }
  _showLicenseError(e, t) {
    setTimeout(() => {
      if (e == "invalid") throw new v("invalid-license-key");
      if (e == "expired") throw new v("license-key-expired");
      if (e == "domainLimit") throw new v("license-key-domain-limit");
      if (e == "featureNotAllowed") throw new v("license-key-plugin-not-allowed", null, { pluginName: t });
      if (e == "evaluationLimit") throw new v("license-key-evaluation-limit");
      if (e == "trialLimit") throw new v("license-key-trial-limit");
      if (e == "developmentLimit") throw new v("license-key-development-limit");
      if (e == "usageLimit") throw new v("license-key-usage-limit");
      if (e == "distributionChannel") throw new v("license-key-invalid-distribution-channel");
    }, 0), this._showLicenseError = () => {
    };
  }
  async _sendUsageRequest(e, t) {
    const n = new Headers({ "Content-Type": "application/json" }), r = await fetch(new URL(e), { method: "POST", headers: n, body: JSON.stringify(t) });
    if (!r.ok) throw new Error(`HTTP Response: ${r.status}`);
    return r.json();
  }
}
m(Lo, "defaultConfig"), m(Lo, "builtinPlugins"), m(Lo, "Context", xa), m(Lo, "EditorWatchdog", b_), m(Lo, "ContextWatchdog", dC);
function _C(o) {
  const i = function(e) {
    return { sessionId: bC(), pageSessionId: kC(), hostname: window.location.hostname, version: globalThis.CKEDITOR_VERSION, type: pC(e), plugins: (t = e.plugins, Array.from(t).filter(([n]) => !!n.pluginName).map(([n]) => {
      const { pluginName: r, isContextPlugin: s, isOfficialPlugin: a, isPremiumPlugin: l } = n;
      return { isContext: !!s, isOfficial: !!a, isPremium: !!l, name: r };
    })), distribution: { channel: window[Symbol.for("cke distribution")] || "sh" }, env: fC(), integration: /* @__PURE__ */ Object.create(null), menuBar: { isVisible: !!e.config.get("menuBar.isVisible") }, language: { ui: e.locale.uiLanguage, content: e.locale.contentLanguage }, toolbar: { main: ql(e.config.get("toolbar")), block: ql(e.config.get("blockToolbar")), balloon: ql(e.config.get("balloonToolbar")) } };
    var t;
  }(o);
  return o.fire("collectUsageData", { setUsageData: function(e, t) {
    if (Pn(i, e) !== void 0) throw new v("editor-usage-data-path-already-set", { path: e });
    fk(i, e, t);
  } }), i;
}
function wC(o) {
  if (!wa(o.updateSourceElement)) throw new v("attachtoform-missing-elementapi-interface", o);
  const i = o.sourceElement;
  if (function(e) {
    return !!e && e.tagName.toLowerCase() === "textarea";
  }(i) && i.form) {
    let e;
    const t = i.form, n = () => o.updateSourceElement();
    wa(t.submit) && (e = t.submit, t.submit = () => {
      n(), e.apply(t);
    }), t.addEventListener("submit", n), o.on("destroy", () => {
      t.removeEventListener("submit", n), e && (t.submit = e);
    });
  }
}
function cd(o) {
  return class extends o {
    constructor() {
      super(...arguments);
      m(this, "sourceElement");
    }
    updateSourceElement(e) {
      if (!this.sourceElement) throw new v("editor-missing-sourceelement", this);
      const t = this.config.get("updateSourceElementOnDestroy"), n = this.sourceElement instanceof HTMLTextAreaElement;
      if (!t && !n) return void Vh(this.sourceElement, "");
      const r = typeof e == "string" ? e : this.data.get();
      Vh(this.sourceElement, r);
    }
  };
}
function vC(o, i) {
  if (i.ckeditorInstance) throw new v("editor-source-element-already-used", o);
  i.ckeditorInstance = o, o.once("destroy", () => {
    delete i.ckeditorInstance;
  });
}
cd.updateSourceElement = cd(Object).prototype.updateSourceElement;
class Ia extends Rk {
  constructor() {
    super(...arguments);
    m(this, "_actions");
  }
  static get pluginName() {
    return "PendingActions";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this.set("hasAny", !1), this._actions = new rt({ idProperty: "_id" }), this._actions.delegate("add", "remove").to(this);
  }
  add(e) {
    if (typeof e != "string") throw new v("pendingactions-add-invalid-message", this);
    const t = new (xe())();
    return t.set("message", e), this._actions.add(t), this.hasAny = !0, t;
  }
  remove(e) {
    this._actions.remove(e), this.hasAny = !!this._actions.length;
  }
  get first() {
    return this._actions.get(0);
  }
  [Symbol.iterator]() {
    return this._actions[Symbol.iterator]();
  }
}
class yC extends xe() {
  constructor() {
    super();
    m(this, "total");
    m(this, "_reader");
    m(this, "_data");
    const e = new window.FileReader();
    this._reader = e, this._data = void 0, this.set("loaded", 0), e.onprogress = (t) => {
      this.loaded = t.loaded;
    };
  }
  get error() {
    return this._reader.error;
  }
  get data() {
    return this._data;
  }
  read(e) {
    const t = this._reader;
    return this.total = e.size, new Promise((n, r) => {
      t.onload = () => {
        const s = t.result;
        this._data = s, n(s);
      }, t.onerror = () => {
        r("error");
      }, t.onabort = () => {
        r("aborted");
      }, this._reader.readAsDataURL(e);
    });
  }
  abort() {
    this._reader.abort();
  }
}
class Cn extends A {
  constructor() {
    super(...arguments);
    m(this, "loaders", new rt());
    m(this, "_loadersMap", /* @__PURE__ */ new Map());
    m(this, "_pendingAction", null);
  }
  static get pluginName() {
    return "FileRepository";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Ia];
  }
  init() {
    this.loaders.on("change", () => this._updatePendingAction()), this.set("uploaded", 0), this.set("uploadTotal", null), this.bind("uploadedPercent").to(this, "uploaded", this, "uploadTotal", (e, t) => t ? e / t * 100 : 0);
  }
  getLoader(e) {
    return this._loadersMap.get(e) || null;
  }
  createLoader(e) {
    if (!this.createUploadAdapter) return ce("filerepository-no-upload-adapter"), null;
    const t = new Bm(Promise.resolve(e), this.createUploadAdapter);
    return this.loaders.add(t), this._loadersMap.set(e, t), e instanceof Promise && t.file.then((n) => {
      this._loadersMap.set(n, t);
    }).catch(() => {
    }), t.on("change:uploaded", () => {
      let n = 0;
      for (const r of this.loaders) n += r.uploaded;
      this.uploaded = n;
    }), t.on("change:uploadTotal", () => {
      let n = 0;
      for (const r of this.loaders) r.uploadTotal && (n += r.uploadTotal);
      this.uploadTotal = n;
    }), t;
  }
  destroyLoader(e) {
    const t = e instanceof Bm ? e : this.getLoader(e);
    t._destroy(), this.loaders.remove(t), this._loadersMap.forEach((n, r) => {
      n === t && this._loadersMap.delete(r);
    });
  }
  _updatePendingAction() {
    const e = this.editor.plugins.get(Ia);
    if (this.loaders.length) {
      if (!this._pendingAction) {
        const t = this.editor.t, n = (r) => `${t("Upload in progress")} ${parseInt(r)}%.`;
        this._pendingAction = e.add(n(this.uploadedPercent)), this._pendingAction.bind("message").to(this, "uploadedPercent", n);
      }
    } else e.remove(this._pendingAction), this._pendingAction = null;
  }
}
class Bm extends xe() {
  constructor(e, t) {
    super();
    m(this, "id");
    m(this, "_filePromiseWrapper");
    m(this, "_adapter");
    m(this, "_reader");
    this.id = Tt(), this._filePromiseWrapper = this._createFilePromiseWrapper(e), this._adapter = t(this), this._reader = new yC(), this.set("status", "idle"), this.set("uploaded", 0), this.set("uploadTotal", null), this.bind("uploadedPercent").to(this, "uploaded", this, "uploadTotal", (n, r) => r ? n / r * 100 : 0), this.set("uploadResponse", null);
  }
  get file() {
    return this._filePromiseWrapper ? this._filePromiseWrapper.promise.then((e) => this._filePromiseWrapper ? e : null) : Promise.resolve(null);
  }
  get data() {
    return this._reader.data;
  }
  read() {
    if (this.status != "idle") throw new v("filerepository-read-wrong-status", this);
    return this.status = "reading", this.file.then((e) => this._reader.read(e)).then((e) => {
      if (this.status !== "reading") throw this.status;
      return this.status = "idle", e;
    }).catch((e) => {
      throw e === "aborted" ? (this.status = "aborted", "aborted") : (this.status = "error", this._reader.error ? this._reader.error : e);
    });
  }
  upload() {
    if (this.status != "idle") throw new v("filerepository-upload-wrong-status", this);
    return this.status = "uploading", this.file.then(() => this._adapter.upload()).then((e) => (this.uploadResponse = e, this.status = "idle", e)).catch((e) => {
      throw this.status === "aborted" ? "aborted" : (this.status = "error", e);
    });
  }
  abort() {
    const e = this.status;
    this.status = "aborted", this._filePromiseWrapper.isFulfilled ? e == "reading" ? this._reader.abort() : e == "uploading" && this._adapter.abort && this._adapter.abort() : (this._filePromiseWrapper.promise.catch(() => {
    }), this._filePromiseWrapper.rejecter("aborted")), this._destroy();
  }
  _destroy() {
    this._filePromiseWrapper = void 0, this._reader = void 0, this._adapter = void 0, this.uploadResponse = void 0;
  }
  _createFilePromiseWrapper(e) {
    const t = {};
    return t.promise = new Promise((n, r) => {
      t.rejecter = r, t.isFulfilled = !1, e.then((s) => {
        t.isFulfilled = !0, n(s);
      }).catch((s) => {
        t.isFulfilled = !0, r(s);
      });
    }), t;
  }
}
class xC extends A {
  static get requires() {
    return [Cn];
  }
  static get pluginName() {
    return "Base64UploadAdapter";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this.editor.plugins.get(Cn).createUploadAdapter = (i) => new CC(i);
  }
}
let CC = class {
  constructor(o) {
    m(this, "loader");
    m(this, "reader");
    this.loader = o;
  }
  upload() {
    return new Promise((o, i) => {
      const e = this.reader = new window.FileReader();
      e.addEventListener("load", () => {
        o({ default: e.result });
      }), e.addEventListener("error", (t) => {
        i(t);
      }), e.addEventListener("abort", () => {
        i();
      }), this.loader.file.then((t) => {
        e.readAsDataURL(t);
      });
    });
  }
  abort() {
    this.reader.abort();
  }
};
const Iu = ["left", "right", "center", "justify"];
function k_(o) {
  return Iu.includes(o);
}
function __(o, i) {
  return i.contentLanguageDirection == "rtl" ? o === "right" : o === "left";
}
function w_(o) {
  const i = o.map((t) => {
    let n;
    return n = typeof t == "string" ? { name: t } : t, n;
  }).filter((t) => {
    const n = Iu.includes(t.name);
    return n || ce("alignment-config-name-not-recognized", { option: t }), n;
  }), e = i.filter((t) => !!t.className).length;
  if (e && e < i.length) throw new v("alignment-config-classnames-are-missing", { configuredOptions: o });
  return i.forEach((t, n, r) => {
    const s = r.slice(n + 1);
    if (s.some((a) => a.name == t.name)) throw new v("alignment-config-name-already-defined", { option: t, configuredOptions: o });
    if (t.className && s.some((a) => a.className == t.className))
      throw new v("alignment-config-classname-already-defined", { option: t, configuredOptions: o });
  }), i;
}
const Wl = "alignment";
class AC extends G {
  refresh() {
    const i = this.editor.locale, e = Te(this.editor.model.document.selection.getSelectedBlocks());
    this.isEnabled = !!e && this._canBeAligned(e), this.isEnabled && e.hasAttribute("alignment") ? this.value = e.getAttribute("alignment") : this.value = i.contentLanguageDirection === "rtl" ? "right" : "left";
  }
  execute(i = {}) {
    const e = this.editor, t = e.locale, n = e.model, r = n.document, s = i.value;
    n.change((a) => {
      const l = Array.from(r.selection.getSelectedBlocks()).filter((d) => this._canBeAligned(d)), c = l[0].getAttribute("alignment");
      __(s, t) || c === s || !s ? function(d, u) {
        for (const h of d) u.removeAttribute(Wl, h);
      }(l, a) : function(d, u, h) {
        for (const g of d) u.setAttribute(Wl, h, g);
      }(l, a, s);
    });
  }
  _canBeAligned(i) {
    return this.editor.model.schema.checkAttribute(i, Wl);
  }
}
class TC extends A {
  static get pluginName() {
    return "AlignmentEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define("alignment", { options: Iu.map((e) => ({ name: e })) });
  }
  init() {
    const i = this.editor, e = i.locale, t = i.model.schema, n = w_(i.config.get("alignment.options")).filter((l) => k_(l.name) && !__(l.name, e)), r = n.some((l) => !!l.className);
    t.extend("$block", { allowAttributes: "alignment" }), i.model.schema.setAttributeProperties("alignment", { isFormatting: !0 }), r ? i.conversion.attributeToAttribute(function(l) {
      const c = {};
      for (const u of l) c[u.name] = { key: "class", value: u.className };
      return { model: { key: "alignment", values: l.map((u) => u.name) }, view: c };
    }(n)) : i.conversion.for("downcast").attributeToAttribute(function(l) {
      const c = {};
      for (const { name: u } of l) c[u] = { key: "style", value: { "text-align": u } };
      return { model: { key: "alignment", values: l.map((u) => u.name) }, view: c };
    }(n));
    const s = function(l) {
      const c = [];
      for (const { name: d } of l) c.push({ view: { key: "style", value: { "text-align": d } }, model: { key: "alignment", value: d } });
      return c;
    }(n);
    for (const l of s) i.conversion.for("upcast").attributeToAttribute(l);
    const a = function(l) {
      const c = [];
      for (const { name: d } of l) c.push({ view: { key: "align", value: d }, model: { key: "alignment", value: d } });
      return c;
    }(n);
    for (const l of a) i.conversion.for("upcast").attributeToAttribute(l);
    i.commands.add("alignment", new AC(i));
  }
}
class It extends rt {
  constructor(e = []) {
    super(e, { idProperty: "viewUid" });
    m(this, "_parentElement");
    this.on("add", (t, n, r) => {
      this._renderViewIntoCollectionParent(n, r);
    }), this.on("remove", (t, n) => {
      n.element && this._parentElement && n.element.remove();
    }), this._parentElement = null;
  }
  destroy() {
    this.map((e) => e.destroy());
  }
  setParent(e) {
    this._parentElement = e;
    for (const t of this) this._renderViewIntoCollectionParent(t);
  }
  delegate(...e) {
    if (!e.length || !e.every((t) => typeof t == "string")) throw new v("ui-viewcollection-delegate-wrong-events", this);
    return { to: (t) => {
      for (const n of this) for (const r of e) n.delegate(r).to(t);
      this.on("add", (n, r) => {
        for (const s of e) r.delegate(s).to(t);
      }), this.on("remove", (n, r) => {
        for (const s of e) r.stopDelegating(s, t);
      });
    } };
  }
  _renderViewIntoCollectionParent(e, t) {
    e.isRendered || e.render(), e.element && this._parentElement && this._parentElement.insertBefore(e.element, this._parentElement.children[t]);
  }
  remove(e) {
    return super.remove(e);
  }
}
class li extends Ae() {
  constructor(e) {
    super();
    m(this, "ns");
    m(this, "tag");
    m(this, "text");
    m(this, "attributes");
    m(this, "children");
    m(this, "eventListeners");
    m(this, "_isRendered");
    m(this, "_revertData");
    Object.assign(this, Fm(Dm(e))), this._isRendered = !1, this._revertData = null;
  }
  render() {
    const e = this._renderNode({ intoFragment: !0 });
    return this._isRendered = !0, e;
  }
  apply(e) {
    return this._revertData = { children: [], bindings: [], attributes: {} }, this._renderNode({ node: e, intoFragment: !1, isApplying: !0, revertData: this._revertData }), e;
  }
  revert(e) {
    if (!this._revertData) throw new v("ui-template-revert-not-applied", [this, e]);
    this._revertTemplateFromNode(e, this._revertData);
  }
  *getViews() {
    yield* function* e(t) {
      if (t.children) for (const n of t.children) Pa(n) ? yield n : Pu(n) && (yield* e(n));
    }(this);
  }
  static bind(e, t) {
    return { to: (n, r) => new EC({ eventNameOrFunction: n, attribute: n, observable: e, emitter: t, callback: r }), if: (n, r, s) => new v_({ observable: e, emitter: t, attribute: n, valueIfTrue: r, callback: s }) };
  }
  static extend(e, t) {
    if (e._isRendered) throw new v("template-extend-render", [this, e]);
    C_(e, Fm(Dm(t)));
  }
  _renderNode(e) {
    let t;
    if (t = e.node ? this.tag && this.text : this.tag ? this.text : !this.text, t) throw new v("ui-template-wrong-syntax", this);
    return this.text ? this._renderText(e) : this._renderElement(e);
  }
  _renderElement(e) {
    let t = e.node;
    return t || (t = e.node = document.createElementNS(this.ns || "http://www.w3.org/1999/xhtml", this.tag)), this._renderAttributes(e), this._renderElementChildren(e), this._setUpListeners(e), t;
  }
  _renderText(e) {
    let t = e.node;
    return t ? e.revertData.text = t.textContent : t = e.node = document.createTextNode(""), ra(this.text) ? this._bindToObservable({ schema: this.text, updater: SC(t), data: e }) : t.textContent = this.text.join(""), t;
  }
  _renderAttributes(e) {
    if (!this.attributes) return;
    const t = e.node, n = e.revertData;
    for (const r in this.attributes) {
      const s = t.getAttribute(r), a = this.attributes[r];
      n && (n.attributes[r] = s);
      const l = $m(a) ? a[0].ns : null;
      if (ra(a)) {
        const c = $m(a) ? a[0].value : a;
        n && Um(r) && c.unshift(s), this._bindToObservable({ schema: c, updater: IC(t, r, l), data: e });
      } else if (r == "style" && typeof a[0] != "string") this._renderStyleAttribute(a[0], e);
      else {
        n && s && Um(r) && a.unshift(s);
        const c = a.map((d) => d && d.value || d).reduce((d, u) => d.concat(u), []).reduce(x_, "");
        ir(c) || t.setAttributeNS(l, r, c);
      }
    }
  }
  _renderStyleAttribute(e, t) {
    const n = t.node;
    for (const r in e) {
      const s = e[r];
      ra(s) ? this._bindToObservable({ schema: [s], updater: PC(n, r), data: t }) : n.style[r] = s;
    }
  }
  _renderElementChildren(e) {
    const t = e.node, n = e.intoFragment ? document.createDocumentFragment() : t, r = e.isApplying;
    let s = 0;
    for (const a of this.children) if (Mu(a)) {
      if (!r) {
        a.setParent(t);
        for (const l of a) n.appendChild(l.element);
      }
    } else if (Pa(a)) r || (a.isRendered || a.render(), n.appendChild(a.element));
    else if (Vn(a)) n.appendChild(a);
    else if (r) {
      const l = { children: [], bindings: [], attributes: {} };
      e.revertData.children.push(l), a._renderNode({ intoFragment: !1, node: n.childNodes[s++], isApplying: !0, revertData: l });
    } else n.appendChild(a.render());
    e.intoFragment && t.appendChild(n);
  }
  _setUpListeners(e) {
    if (this.eventListeners) for (const t in this.eventListeners) {
      const n = this.eventListeners[t].map((r) => {
        const [s, a] = t.split("@");
        return r.activateDomEventListener(s, a, e);
      });
      e.revertData && e.revertData.bindings.push(n);
    }
  }
  _bindToObservable({ schema: e, updater: t, data: n }) {
    const r = n.revertData;
    y_(e, t, n);
    const s = e.filter((a) => !ir(a)).filter((a) => a.observable).map((a) => a.activateAttributeListener(e, t, n));
    r && r.bindings.push(s);
  }
  _revertTemplateFromNode(e, t) {
    for (const r of t.bindings) for (const s of r) s();
    if (t.text) return void (e.textContent = t.text);
    const n = e;
    for (const r in t.attributes) {
      const s = t.attributes[r];
      s === null ? n.removeAttribute(r) : n.setAttribute(r, s);
    }
    for (let r = 0; r < t.children.length; ++r) this._revertTemplateFromNode(n.childNodes[r], t.children[r]);
  }
}
class xs {
  constructor(i) {
    m(this, "attribute");
    m(this, "observable");
    m(this, "emitter");
    m(this, "callback");
    this.attribute = i.attribute, this.observable = i.observable, this.emitter = i.emitter, this.callback = i.callback;
  }
  getValue(i) {
    const e = this.observable[this.attribute];
    return this.callback ? this.callback(e, i) : e;
  }
  activateAttributeListener(i, e, t) {
    const n = () => y_(i, e, t);
    return this.emitter.listenTo(this.observable, `change:${this.attribute}`, n), () => {
      this.emitter.stopListening(this.observable, `change:${this.attribute}`, n);
    };
  }
}
class EC extends xs {
  constructor(e) {
    super(e);
    m(this, "eventNameOrFunction");
    this.eventNameOrFunction = e.eventNameOrFunction;
  }
  activateDomEventListener(e, t, n) {
    const r = (s, a) => {
      t && !a.target.matches(t) || (typeof this.eventNameOrFunction == "function" ? this.eventNameOrFunction(a) : this.observable.fire(this.eventNameOrFunction, a));
    };
    return this.emitter.listenTo(n.node, e, r), () => {
      this.emitter.stopListening(n.node, e, r);
    };
  }
}
class v_ extends xs {
  constructor(e) {
    super(e);
    m(this, "valueIfTrue");
    this.valueIfTrue = e.valueIfTrue;
  }
  getValue(e) {
    return !ir(super.getValue(e)) && (this.valueIfTrue || !0);
  }
}
function ra(o) {
  return !!o && (o.value && (o = o.value), Array.isArray(o) ? o.some(ra) : o instanceof xs);
}
function y_(o, i, { node: e }) {
  const t = function(r, s) {
    return r.map((a) => a instanceof xs ? a.getValue(s) : a);
  }(o, e);
  let n;
  n = o.length == 1 && o[0] instanceof v_ ? t[0] : t.reduce(x_, ""), ir(n) ? i.remove() : i.set(n);
}
function SC(o) {
  return { set(i) {
    o.textContent = i;
  }, remove() {
    o.textContent = "";
  } };
}
function IC(o, i, e) {
  return { set(t) {
    o.setAttributeNS(e, i, t);
  }, remove() {
    o.removeAttributeNS(e, i);
  } };
}
function PC(o, i) {
  return { set(e) {
    o.style[i] = e;
  }, remove() {
    o.style[i] = null;
  } };
}
function Dm(o) {
  return sl(o, (i) => {
    if (i && (i instanceof xs || Pu(i) || Pa(i) || Mu(i))) return i;
  });
}
function Fm(o) {
  if (typeof o == "string" ? o = /* @__PURE__ */ function(i) {
    return { text: [i] };
  }(o) : o.text && function(i) {
    i.text = De(i.text);
  }(o), o.on && (o.eventListeners = function(i) {
    for (const e in i) jm(i, e);
    return i;
  }(o.on), delete o.on), !o.text) {
    o.attributes && function(e) {
      for (const t in e) e[t].value && (e[t].value = De(e[t].value)), jm(e, t);
    }(o.attributes);
    const i = [];
    if (o.children) if (Mu(o.children)) i.push(o.children);
    else for (const e of o.children) Pu(e) || Pa(e) || Vn(e) ? i.push(e) : i.push(new li(e));
    o.children = i;
  }
  return o;
}
function jm(o, i) {
  o[i] = De(o[i]);
}
function x_(o, i) {
  return ir(i) ? o : ir(o) ? i : `${o} ${i}`;
}
function Hm(o, i) {
  for (const e in i) o[e] ? o[e].push(...i[e]) : o[e] = i[e];
}
function C_(o, i) {
  if (i.attributes && (o.attributes || (o.attributes = {}), Hm(o.attributes, i.attributes)), i.eventListeners && (o.eventListeners || (o.eventListeners = {}), Hm(o.eventListeners, i.eventListeners)), i.text && o.text.push(...i.text), i.children && i.children.length) {
    if (o.children.length != i.children.length) throw new v("ui-template-extend-children-mismatch", o);
    let e = 0;
    for (const t of i.children) C_(o.children[e++], t);
  }
}
function ir(o) {
  return !o && o !== 0;
}
function Pa(o) {
  return o instanceof N;
}
function Pu(o) {
  return o instanceof li;
}
function Mu(o) {
  return o instanceof It;
}
function $m(o) {
  return wi(o[0]) && o[0].ns;
}
function Um(o) {
  return o == "class" || o == "style";
}
class N extends Nt(xe()) {
  constructor(e) {
    super();
    m(this, "element");
    m(this, "isRendered");
    m(this, "locale");
    m(this, "t");
    m(this, "template");
    m(this, "_viewCollections");
    m(this, "_unboundChildren");
    m(this, "_bindTemplate");
    this.element = null, this.isRendered = !1, this.locale = e, this.t = e && e.t, this._viewCollections = new rt(), this._unboundChildren = this.createCollection(), this._viewCollections.on("add", (t, n) => {
      n.locale = e, n.t = e && e.t;
    }), this.decorate("render");
  }
  get bindTemplate() {
    return this._bindTemplate ? this._bindTemplate : this._bindTemplate = li.bind(this, this);
  }
  createCollection(e) {
    const t = new It(e);
    return this._viewCollections.add(t), t;
  }
  registerChild(e) {
    Qt(e) || (e = [e]);
    for (const t of e) this._unboundChildren.add(t);
  }
  deregisterChild(e) {
    Qt(e) || (e = [e]);
    for (const t of e) this._unboundChildren.remove(t);
  }
  setTemplate(e) {
    this.template = new li(e);
  }
  extendTemplate(e) {
    li.extend(this.template, e);
  }
  render() {
    if (this.isRendered) throw new v("ui-view-render-already-rendered", this);
    this.template && (this.element = this.template.render(), this.registerChild(this.template.getViews())), this.isRendered = !0;
  }
  destroy() {
    this.stopListening(), this._viewCollections.map((e) => e.destroy()), this.template && this.template._revertData && this.template.revert(this.element);
  }
}
function zn({ emitter: o, activator: i, callback: e, contextElements: t, listenerOptions: n }) {
  o.listenTo(document, "mousedown", (r, s) => {
    if (!i()) return;
    const a = typeof s.composedPath == "function" ? s.composedPath() : [], l = typeof t == "function" ? t() : t;
    for (const c of l) if (c.contains(s.target) || a.includes(c)) return;
    e();
  }, n);
}
function ls(o) {
  return class extends o {
    disableCssTransitions() {
      this._isCssTransitionsDisabled = !0;
    }
    enableCssTransitions() {
      this._isCssTransitionsDisabled = !1;
    }
    constructor(...i) {
      super(...i), this.set("_isCssTransitionsDisabled", !1), this.initializeCssTransitionDisablerMixin();
    }
    initializeCssTransitionDisablerMixin() {
      this.extendTemplate({ attributes: { class: [this.bindTemplate.if("_isCssTransitionsDisabled", "ck-transitions-disabled")] } });
    }
  };
}
function lr({ view: o }) {
  o.listenTo(o.element, "submit", (i, e) => {
    e.preventDefault(), o.fire("submit");
  }, { useCapture: !0 });
}
function Cs({ keystrokeHandler: o, focusTracker: i, gridItems: e, numberOfColumns: t, uiLanguageDirection: n }) {
  const r = typeof t == "number" ? () => t : t;
  function s(c) {
    return (d) => {
      const u = e.find((p) => p.element === i.focusedElement), h = e.getIndex(u), g = c(h, e);
      e.get(g).focus(), d.stopPropagation(), d.preventDefault();
    };
  }
  function a(c, d) {
    return c === d - 1 ? 0 : c + 1;
  }
  function l(c, d) {
    return c === 0 ? d - 1 : c - 1;
  }
  o.set("arrowright", s((c, d) => n === "rtl" ? l(c, d.length) : a(c, d.length))), o.set("arrowleft", s((c, d) => n === "rtl" ? a(c, d.length) : l(c, d.length))), o.set("arrowup", s((c, d) => {
    let u = c - r();
    return u < 0 && (u = c + r() * Math.floor(d.length / r()), u > d.length - 1 && (u -= r())), u;
  })), o.set("arrowdown", s((c, d) => {
    let u = c + r();
    return u > d.length - 1 && (u = c % r()), u;
  }));
}
var qm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>', MC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>', VC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>', A_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>', LC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>', T_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>', Vu = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>', Lu = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>', OC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>', E_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>', Wm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>', NC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>', RC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>', zC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>', BC = '<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>', DC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>', gl = '<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>', FC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>', dd = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>', jC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>', HC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>', Gm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>', Zm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>', $C = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>', UC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>', qC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>', WC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>', GC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>', Km = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>', ZC = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>', S_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>', KC = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>', YC = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>', QC = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>', JC = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>', XC = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>', eA = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>', tA = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>', iA = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>', nA = '<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>', oA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>', rA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>', sA = '<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>', aA = '<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>', I_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>', Ou = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>', ud = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>', lA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>', P_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>', hd = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>', M_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>', V_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>', L_ = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>', cA = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>', dA = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>', uA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>', hA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>', mA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>', Ym = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>', gA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>', pA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>', fA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>', bA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>', kA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>', ho = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>', _A = `<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`, wA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>', Qm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>', vA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>', yA = '<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>', xA = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>', CA = `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`, AA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>', TA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>', EA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>', SA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>', IA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>', PA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>', MA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>', Jm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>', VA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>', LA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>', Nu = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>', OA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>', NA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>', Xm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>', RA = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';
const Ga = class Ga extends N {
  constructor() {
    super();
    const i = this.bindTemplate;
    this.set("content", ""), this.set("viewBox", "0 0 20 20"), this.set("fillColor", ""), this.set("isColorInherited", !0), this.set("isVisible", !0), this.setTemplate({ tag: "svg", ns: "http://www.w3.org/2000/svg", attributes: { class: ["ck", "ck-icon", i.if("isVisible", "ck-hidden", (e) => !e), "ck-reset_all-excluded", i.if("isColorInherited", "ck-icon_inherit-color")], viewBox: i.to("viewBox"), "aria-hidden": !0 } });
  }
  render() {
    super.render(), this._updateXMLContent(), this._colorFillPaths(), this.on("change:content", () => {
      this._updateXMLContent(), this._colorFillPaths();
    }), this.on("change:fillColor", () => {
      this._colorFillPaths();
    });
  }
  _updateXMLContent() {
    if (this.content) {
      const i = new DOMParser().parseFromString(this.content.trim(), "image/svg+xml").querySelector("svg");
      if (!i) throw new v("ui-iconview-invalid-svg", this);
      const e = i.getAttribute("viewBox");
      e && (this.viewBox = e);
      for (const { name: t, value: n } of Array.from(i.attributes)) Ga.presentationalAttributeNames.includes(t) && this.element.setAttribute(t, n);
      for (; this.element.firstChild; ) this.element.removeChild(this.element.firstChild);
      for (; i.childNodes.length > 0; ) this.element.appendChild(i.childNodes[0]);
    }
  }
  _colorFillPaths() {
    this.fillColor && this.element.querySelectorAll(".ck-icon__fill").forEach((i) => {
      i.style.fill = this.fillColor;
    });
  }
};
m(Ga, "presentationalAttributeNames", ["alignment-baseline", "baseline-shift", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-rendering", "cursor", "direction", "display", "dominant-baseline", "fill", "fill-opacity", "fill-rule", "filter", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "image-rendering", "letter-spacing", "lighting-color", "marker-end", "marker-mid", "marker-start", "mask", "opacity", "overflow", "paint-order", "pointer-events", "shape-rendering", "stop-color", "stop-opacity", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-anchor", "text-decoration", "text-overflow", "text-rendering", "transform", "unicode-bidi", "vector-effect", "visibility", "white-space", "word-spacing", "writing-mode"]);
let ui = Ga;
class O_ extends N {
  constructor() {
    super(), this.set({ style: void 0, text: void 0, id: void 0 });
    const i = this.bindTemplate;
    this.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-button__label"], style: i.to("style"), id: i.to("id") }, children: [{ text: i.to("text") }] });
  }
}
class j extends N {
  constructor(e, t = new O_()) {
    super(e);
    m(this, "children");
    m(this, "labelView");
    m(this, "iconView");
    m(this, "keystrokeView");
    m(this, "_focusDelayed", null);
    const n = this.bindTemplate, r = Tt();
    this.set("_ariaPressed", !1), this.set("_ariaChecked", !1), this.set("ariaLabel", void 0), this.set("ariaLabelledBy", `ck-editor__aria-label_${r}`), this.set("class", void 0), this.set("labelStyle", void 0), this.set("icon", void 0), this.set("isEnabled", !0), this.set("isOn", !1), this.set("isVisible", !0), this.set("isToggleable", !1), this.set("keystroke", void 0), this.set("label", void 0), this.set("role", void 0), this.set("tabindex", -1), this.set("tooltip", !1), this.set("tooltipPosition", "s"), this.set("type", "button"), this.set("withText", !1), this.set("withKeystroke", !1), this.children = this.createCollection(), this.labelView = this._setupLabelView(t), this.iconView = new ui(), this.iconView.extendTemplate({ attributes: { class: "ck-button__icon" } }), this.iconView.bind("content").to(this, "icon"), this.keystrokeView = this._createKeystrokeView(), this.bind("_tooltipString").to(this, "tooltip", this, "label", this, "keystroke", this._getTooltipString.bind(this));
    const s = { tag: "button", attributes: { class: ["ck", "ck-button", n.to("class"), n.if("isEnabled", "ck-disabled", (a) => !a), n.if("isVisible", "ck-hidden", (a) => !a), n.to("isOn", (a) => a ? "ck-on" : "ck-off"), n.if("withText", "ck-button_with-text"), n.if("withKeystroke", "ck-button_with-keystroke")], role: n.to("role"), type: n.to("type", (a) => a || "button"), tabindex: n.to("tabindex"), "aria-checked": n.to("_ariaChecked"), "aria-pressed": n.to("_ariaPressed"), "aria-label": n.to("ariaLabel"), "aria-labelledby": n.to("ariaLabelledBy"), "aria-disabled": n.if("isEnabled", !0, (a) => !a), "data-cke-tooltip-text": n.to("_tooltipString"), "data-cke-tooltip-position": n.to("tooltipPosition") }, children: this.children, on: { click: n.to((a) => {
      this.isEnabled ? this.fire("execute") : a.preventDefault();
    }) } };
    this.bind("_ariaPressed").to(this, "isOn", this, "isToggleable", this, "role", (a, l, c) => !(!l || eg(c)) && String(!!a)), this.bind("_ariaChecked").to(this, "isOn", this, "isToggleable", this, "role", (a, l, c) => !(!l || !eg(c)) && String(!!a)), q.isSafari && (this._focusDelayed || (this._focusDelayed = fu(() => this.focus(), 0)), s.on.mousedown = n.to(() => {
      this._focusDelayed();
    }), s.on.mouseup = n.to(() => {
      this._focusDelayed.cancel();
    })), this.setTemplate(s);
  }
  render() {
    super.render(), this.icon && this.children.add(this.iconView), this.on("change:icon", (e, t, n, r) => {
      n && !r ? this.children.add(this.iconView, 0) : !n && r && this.children.remove(this.iconView);
    }), this.children.add(this.labelView), this.withKeystroke && this.keystroke && this.children.add(this.keystrokeView);
  }
  focus() {
    this.element.focus();
  }
  destroy() {
    this._focusDelayed && this._focusDelayed.cancel(), super.destroy();
  }
  _setupLabelView(e) {
    return e.bind("text", "style", "id").to(this, "label", "labelStyle", "ariaLabelledBy"), e;
  }
  _createKeystrokeView() {
    const e = new N();
    return e.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-button__keystroke"] }, children: [{ text: this.bindTemplate.to("keystroke", (t) => ya(t)) }] }), e;
  }
  _getTooltipString(e, t, n) {
    return e ? typeof e == "string" ? e : (n && (n = ya(n)), e instanceof Function ? e(t, n) : `${t}${n ? ` (${n})` : ""}`) : "";
  }
}
function eg(o) {
  switch (o) {
    case "radio":
    case "checkbox":
    case "option":
    case "switch":
    case "menuitemcheckbox":
    case "menuitemradio":
      return !0;
    default:
      return !1;
  }
}
class mo extends N {
  constructor(e, t = {}) {
    super(e);
    m(this, "children");
    m(this, "iconView");
    const n = this.bindTemplate;
    this.set("label", t.label || ""), this.set("class", t.class || null), this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-form__header", n.to("class")] }, children: this.children }), t.icon && (this.iconView = new ui(), this.iconView.content = t.icon, this.children.add(this.iconView));
    const r = new N(e);
    r.setTemplate({ tag: "h2", attributes: { class: ["ck", "ck-form__header__label"], role: "presentation" }, children: [{ text: n.to("label") }] }), this.children.add(r);
  }
}
class ut extends Ae() {
  constructor(e) {
    super();
    m(this, "focusables");
    m(this, "focusTracker");
    m(this, "keystrokeHandler");
    m(this, "actions");
    if (this.focusables = e.focusables, this.focusTracker = e.focusTracker, this.keystrokeHandler = e.keystrokeHandler, this.actions = e.actions, e.actions && e.keystrokeHandler) for (const t in e.actions) {
      let n = e.actions[t];
      typeof n == "string" && (n = [n]);
      for (const r of n) e.keystrokeHandler.set(r, (s, a) => {
        this[t](), a();
      }, e.keystrokeHandlerOptions);
    }
    this.on("forwardCycle", () => this.focusFirst(), { priority: "low" }), this.on("backwardCycle", () => this.focusLast(), { priority: "low" });
  }
  get first() {
    return this.focusables.find(Gl) || null;
  }
  get last() {
    return this.focusables.filter(Gl).slice(-1)[0] || null;
  }
  get next() {
    return this._getDomFocusableItem(1);
  }
  get previous() {
    return this._getDomFocusableItem(-1);
  }
  get current() {
    let e = null;
    return this.focusTracker.focusedElement === null ? null : (this.focusables.find((t, n) => {
      const r = t.element === this.focusTracker.focusedElement;
      return r && (e = n), r;
    }), e);
  }
  focusFirst() {
    this._focus(this.first, 1);
  }
  focusLast() {
    this._focus(this.last, -1);
  }
  focusNext() {
    const e = this.next;
    e && this.focusables.getIndex(e) === this.current || e === this.first ? this.fire("forwardCycle") : this._focus(e, 1);
  }
  focusPrevious() {
    const e = this.previous;
    e && this.focusables.getIndex(e) === this.current || e === this.last ? this.fire("backwardCycle") : this._focus(e, -1);
  }
  chain(e) {
    const t = () => this.current === null ? null : this.focusables.get(this.current);
    this.listenTo(e, "forwardCycle", (n) => {
      const r = t();
      this.focusNext(), r !== t() && n.stop();
    }, { priority: "low" }), this.listenTo(e, "backwardCycle", (n) => {
      const r = t();
      this.focusPrevious(), r !== t() && n.stop();
    }, { priority: "low" });
  }
  unchain(e) {
    this.stopListening(e);
  }
  _focus(e, t) {
    e && this.focusTracker.focusedElement !== e.element && e.focus(t);
  }
  _getDomFocusableItem(e) {
    const t = this.focusables.length;
    if (!t) return null;
    const n = this.current;
    if (n === null) return this[e === 1 ? "first" : "last"];
    let r = this.focusables.get(n), s = (n + t + e) % t;
    do {
      const a = this.focusables.get(s);
      if (Gl(a)) {
        r = a;
        break;
      }
      s = (s + t + e) % t;
    } while (s !== n);
    return r;
  }
}
function Gl(o) {
  return cr(o) && an(o.element);
}
function cr(o) {
  return !(!("focus" in o) || typeof o.focus != "function");
}
function N_(o) {
  return cr(o) && "focusCycler" in o && o.focusCycler instanceof ut;
}
function zA(o) {
  return class extends o {
    constructor(...e) {
      super(...e);
      m(this, "_onDragBound", this._onDrag.bind(this));
      m(this, "_onDragEndBound", this._onDragEnd.bind(this));
      m(this, "_lastDraggingCoordinates", { x: 0, y: 0 });
      this.on("render", () => {
        this._attachListeners();
      }), this.set("isDragging", !1);
    }
    _attachListeners() {
      this.listenTo(this.element, "mousedown", this._onDragStart.bind(this)), this.listenTo(this.element, "touchstart", this._onDragStart.bind(this));
    }
    _attachDragListeners() {
      this.listenTo(z.document, "mouseup", this._onDragEndBound), this.listenTo(z.document, "touchend", this._onDragEndBound), this.listenTo(z.document, "mousemove", this._onDragBound), this.listenTo(z.document, "touchmove", this._onDragBound);
    }
    _detachDragListeners() {
      this.stopListening(z.document, "mouseup", this._onDragEndBound), this.stopListening(z.document, "touchend", this._onDragEndBound), this.stopListening(z.document, "mousemove", this._onDragBound), this.stopListening(z.document, "touchmove", this._onDragBound);
    }
    _onDragStart(e, t) {
      if (!this._isHandleElementPressed(t)) return;
      this._attachDragListeners();
      let n = 0, r = 0;
      t instanceof MouseEvent ? (n = t.clientX, r = t.clientY) : (n = t.touches[0].clientX, r = t.touches[0].clientY), this._lastDraggingCoordinates = { x: n, y: r }, this.isDragging = !0;
    }
    _onDrag(e, t) {
      if (!this.isDragging) return void this._detachDragListeners();
      let n = 0, r = 0;
      t instanceof MouseEvent ? (n = t.clientX, r = t.clientY) : (n = t.touches[0].clientX, r = t.touches[0].clientY), t.preventDefault(), this.fire("drag", { deltaX: Math.round(n - this._lastDraggingCoordinates.x), deltaY: Math.round(r - this._lastDraggingCoordinates.y) }), this._lastDraggingCoordinates = { x: n, y: r };
    }
    _onDragEnd() {
      this._detachDragListeners(), this.isDragging = !1;
    }
    _isHandleElementPressed(e) {
      return !!this.dragHandleElement && (this.dragHandleElement === e.target || e.target instanceof HTMLElement && this.dragHandleElement.contains(e.target));
    }
  };
}
class BA extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    m(this, "keystrokes");
    m(this, "focusCycler");
    m(this, "_focusTracker");
    m(this, "_focusables");
    this.children = this.createCollection(), this.keystrokes = new Le(), this._focusTracker = new fe(), this._focusables = new It(), this.focusCycler = new ut({ focusables: this._focusables, focusTracker: this._focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-dialog__actions"] }, children: this.children });
  }
  render() {
    super.render(), this.keystrokes.listenTo(this.element);
  }
  setButtons(e) {
    for (const t of e) {
      const n = new j(this.locale);
      let r;
      for (r in n.on("execute", () => t.onExecute()), t.onCreate && t.onCreate(n), t) r != "onExecute" && r != "onCreate" && n.set(r, t[r]);
      this.children.add(n);
    }
    this._updateFocusCyclableItems();
  }
  focus(e) {
    e === -1 ? this.focusCycler.focusLast() : this.focusCycler.focusFirst();
  }
  _updateFocusCyclableItems() {
    Array.from(this.children).forEach((e) => {
      this._focusables.add(e), this._focusTracker.add(e.element);
    });
  }
}
class DA extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-dialog__content"] }, children: this.children });
  }
  reset() {
    for (; this.children.length; ) this.children.remove(0);
  }
}
const ni = { SCREEN_CENTER: "screen-center", EDITOR_CENTER: "editor-center", EDITOR_TOP_SIDE: "editor-top-side", EDITOR_TOP_CENTER: "editor-top-center", EDITOR_BOTTOM_CENTER: "editor-bottom-center", EDITOR_ABOVE_CENTER: "editor-above-center", EDITOR_BELOW_CENTER: "editor-below-center" }, tg = Nn("px"), Za = class Za extends zA(N) {
  constructor(e, { getCurrentDomRoot: t, getViewportOffset: n, keystrokeHandlerOptions: r }) {
    super(e);
    m(this, "parts");
    m(this, "headerView");
    m(this, "closeButtonView");
    m(this, "actionsView");
    m(this, "contentView");
    m(this, "keystrokes");
    m(this, "focusTracker");
    m(this, "wasMoved", !1);
    m(this, "_getCurrentDomRoot");
    m(this, "_getViewportOffset");
    m(this, "_focusables");
    m(this, "_focusCycler");
    const s = this.bindTemplate, a = e.t;
    this.set("className", ""), this.set("ariaLabel", a("Editor dialog")), this.set("isModal", !1), this.set("position", ni.SCREEN_CENTER), this.set("_isVisible", !1), this.set("_isTransparent", !1), this.set("_top", 0), this.set("_left", 0), this._getCurrentDomRoot = t, this._getViewportOffset = n, this.decorate("moveTo"), this.parts = this.createCollection(), this.keystrokes = new Le(), this.focusTracker = new fe(), this._focusables = new It(), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" }, keystrokeHandlerOptions: r }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-dialog-overlay", s.if("isModal", "ck-dialog-overlay__transparent", (l) => !l), s.if("_isVisible", "ck-hidden", (l) => !l)], tabindex: "-1" }, children: [{ tag: "div", attributes: { tabindex: "-1", class: ["ck", "ck-dialog", s.if("isModal", "ck-dialog_modal"), s.to("className")], role: "dialog", "aria-label": s.to("ariaLabel"), style: { top: s.to("_top", (l) => tg(l)), left: s.to("_left", (l) => tg(l)), visibility: s.if("_isTransparent", "hidden") } }, children: this.parts }] });
  }
  render() {
    super.render(), this.keystrokes.set("Esc", (e, t) => {
      e.defaultPrevented || (this.fire("close", { source: "escKeyPress" }), t());
    }), this.on("drag", (e, { deltaX: t, deltaY: n }) => {
      this.wasMoved = !0, this.moveBy(t, n);
    }), this.listenTo(z.window, "resize", () => {
      this._isVisible && !this.wasMoved && this.updatePosition();
    }), this.listenTo(z.document, "scroll", () => {
      this._isVisible && !this.wasMoved && this.updatePosition();
    }), this.on("change:_isVisible", (e, t, n) => {
      n && (this._isTransparent = !0, setTimeout(() => {
        this.updatePosition(), this._isTransparent = !1, this.focus();
      }, 10));
    }), this.keystrokes.listenTo(this.element);
  }
  get dragHandleElement() {
    return this.headerView && !this.isModal ? this.headerView.element : null;
  }
  setupParts({ icon: e, title: t, hasCloseButton: n = !0, content: r, actionButtons: s }) {
    t && (this.headerView = new mo(this.locale, { icon: e }), n && (this.closeButtonView = this._createCloseButton(), this.headerView.children.add(this.closeButtonView)), this.headerView.label = t, this.ariaLabel = t, this.parts.add(this.headerView, 0)), r && (r instanceof N && (r = [r]), this.contentView = new DA(this.locale), this.contentView.children.addMany(r), this.parts.add(this.contentView)), s && (this.actionsView = new BA(this.locale), this.actionsView.setButtons(s), this.parts.add(this.actionsView)), this._updateFocusCyclableItems();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  moveTo(e, t) {
    const n = this._getViewportRect(), r = this._getDialogRect();
    e + r.width > n.right && (e = n.right - r.width), e < n.left && (e = n.left), t < n.top && (t = n.top), this._moveTo(e, t);
  }
  _moveTo(e, t) {
    this._left = e, this._top = t;
  }
  moveBy(e, t) {
    this.moveTo(this._left + e, this._top + t);
  }
  _moveOffScreen() {
    this._moveTo(-9999, -9999);
  }
  updatePosition() {
    if (!this.element || !this.element.parentNode) return;
    const e = this._getViewportRect();
    let t, n = this.position;
    this._getCurrentDomRoot() ? t = this._getVisibleDomRootRect(e) : n = ni.SCREEN_CENTER;
    const r = Za.defaultOffset, s = this._getDialogRect();
    switch (n) {
      case ni.EDITOR_TOP_SIDE:
        if (t) {
          const a = this.locale.contentLanguageDirection === "ltr" ? t.right - s.width - r : t.left + r;
          this.moveTo(a, t.top + r);
        } else this._moveOffScreen();
        break;
      case ni.EDITOR_CENTER:
        t ? this.moveTo(Math.round(t.left + t.width / 2 - s.width / 2), Math.round(t.top + t.height / 2 - s.height / 2)) : this._moveOffScreen();
        break;
      case ni.SCREEN_CENTER:
        this.moveTo(Math.round((e.width - s.width) / 2), Math.round((e.height - s.height) / 2));
        break;
      case ni.EDITOR_TOP_CENTER:
        t ? this.moveTo(Math.round(t.left + t.width / 2 - s.width / 2), t.top + r) : this._moveOffScreen();
        break;
      case ni.EDITOR_BOTTOM_CENTER:
        t ? this.moveTo(Math.round(t.left + t.width / 2 - s.width / 2), t.bottom - s.height - r) : this._moveOffScreen();
        break;
      case ni.EDITOR_ABOVE_CENTER:
        t ? this.moveTo(Math.round(t.left + t.width / 2 - s.width / 2), t.top - s.height - r) : this._moveOffScreen();
        break;
      case ni.EDITOR_BELOW_CENTER:
        t ? this.moveTo(Math.round(t.left + t.width / 2 - s.width / 2), t.bottom + r) : this._moveOffScreen();
    }
  }
  _getVisibleDomRootRect(e) {
    let t = new K(this._getCurrentDomRoot()).getVisible();
    return t ? (t = e.getIntersection(t), t || null) : null;
  }
  _getDialogRect() {
    return new K(this.element.firstElementChild);
  }
  _getViewportRect() {
    const e = new K(z.window);
    if (this.isModal) return e;
    const t = { top: 0, bottom: 0, left: 0, right: 0, ...this._getViewportOffset() };
    return e.top += t.top, e.height -= t.top, e.bottom -= t.bottom, e.height -= t.bottom, e.left += t.left, e.right -= t.right, e.width -= t.left + t.right, e;
  }
  _updateFocusCyclableItems() {
    const e = [];
    if (this.contentView) for (const t of this.contentView.children) cr(t) && e.push(t);
    this.actionsView && e.push(this.actionsView), this.closeButtonView && e.push(this.closeButtonView), e.forEach((t) => {
      this._focusables.add(t), this.focusTracker.add(t.element), N_(t) && this._focusCycler.chain(t.focusCycler);
    });
  }
  _createCloseButton() {
    const e = new j(this.locale), t = this.locale.t;
    return e.set({ label: t("Close"), tooltip: !0, icon: Lu }), e.on("execute", () => this.fire("close", { source: "closeButton" })), e;
  }
};
m(Za, "defaultOffset", 15);
let md = Za;
const pi = class pi extends A {
  constructor(e) {
    super(e);
    m(this, "view");
    m(this, "_onHide");
    const t = e.t;
    this._initShowHideListeners(), this._initFocusToggler(), this._initMultiRootIntegration(), this.set({ id: null, isOpen: !1 }), e.accessibility.addKeystrokeInfos({ categoryId: "navigation", keystrokes: [{ label: t("Move focus in and out of an active dialog window"), keystroke: "Ctrl+F6", mayRequireFn: !0 }] });
  }
  static get pluginName() {
    return "Dialog";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  destroy() {
    super.destroy(), pi._visibleDialogPlugin === this && this._unlockBodyScroll();
  }
  _initShowHideListeners() {
    this.on("show", (e, t) => {
      this._show(t);
    }), this.on("show", (e, t) => {
      t.onShow && t.onShow(this);
    }, { priority: "low" }), this.on("hide", () => {
      pi._visibleDialogPlugin && pi._visibleDialogPlugin._hide();
    }), this.on("hide", () => {
      this._onHide && (this._onHide(this), this._onHide = void 0);
    }, { priority: "low" });
  }
  _initFocusToggler() {
    const e = this.editor;
    e.keystrokes.set("Ctrl+F6", (t, n) => {
      this.isOpen && !this.view.isModal && (this.view.focusTracker.isFocused ? e.editing.view.focus() : this.view.focus(), n());
    });
  }
  _initMultiRootIntegration() {
    const e = this.editor.model;
    e.document.on("change:data", () => {
      if (!this.view) return;
      const t = e.document.differ.getChangedRoots();
      for (const n of t) n.state && this.view.updatePosition();
    });
  }
  show(e) {
    this.hide(), this.fire(`show:${e.id}`, e);
  }
  _show({ id: e, icon: t, title: n, hasCloseButton: r = !0, content: s, actionButtons: a, className: l, isModal: c, position: d, onHide: u, keystrokeHandlerOptions: h }) {
    const g = this.editor;
    this.view = new md(g.locale, { getCurrentDomRoot: () => g.editing.view.getDomRoot(g.model.document.selection.anchor.root.rootName), getViewportOffset: () => g.ui.viewportOffset, keystrokeHandlerOptions: h });
    const p = this.view;
    p.on("close", () => {
      this.hide();
    }), g.ui.view.body.add(p), g.keystrokes.listenTo(p.element), d || (d = c ? ni.SCREEN_CENTER : ni.EDITOR_CENTER), c && this._lockBodyScroll(), p.set({ position: d, _isVisible: !0, className: l, isModal: c }), p.setupParts({ icon: t, title: n, hasCloseButton: r, content: s, actionButtons: a }), this.id = e, u && (this._onHide = u), this.isOpen = !0, pi._visibleDialogPlugin = this;
  }
  hide() {
    pi._visibleDialogPlugin && pi._visibleDialogPlugin.fire(`hide:${pi._visibleDialogPlugin.id}`);
  }
  _hide() {
    if (!this.view) return;
    const e = this.editor, t = this.view;
    t.isModal && this._unlockBodyScroll(), t.contentView && t.contentView.reset(), e.ui.view.body.remove(t), e.ui.focusTracker.remove(t.element), e.keystrokes.stopListening(t.element), t.destroy(), e.editing.view.focus(), this.id = null, this.isOpen = !1, pi._visibleDialogPlugin = null;
  }
  _lockBodyScroll() {
    document.documentElement.classList.add("ck-dialog-scroll-locked");
  }
  _unlockBodyScroll() {
    document.documentElement.classList.remove("ck-dialog-scroll-locked");
  }
};
m(pi, "_visibleDialogPlugin");
let oo = pi;
class nr extends j {
  constructor(e, t = new O_()) {
    super(e, t);
    m(this, "_checkIconHolderView", new FA());
    this.set({ hasCheckSpace: !1, _hasCheck: this.isToggleable });
    const n = this.bindTemplate;
    this.extendTemplate({ attributes: { class: ["ck-list-item-button", n.if("isToggleable", "ck-list-item-button_toggleable")] } }), this.bind("_hasCheck").to(this, "hasCheckSpace", this, "isToggleable", (r, s) => r || s);
  }
  render() {
    super.render(), this._hasCheck && this.children.add(this._checkIconHolderView, 0), this._watchCheckIconHolderMount();
  }
  _watchCheckIconHolderMount() {
    this._checkIconHolderView.bind("isOn").to(this, "isOn", (e) => this.isToggleable && e), this.on("change:_hasCheck", (e, t, n) => {
      const { children: r, _checkIconHolderView: s } = this;
      n ? r.add(s, 0) : r.remove(s);
    });
  }
}
class FA extends N {
  constructor() {
    super();
    m(this, "children");
    m(this, "_checkIconView", this._createCheckIconView());
    const e = this.bindTemplate;
    this.children = this.createCollection(), this.set("isOn", !1), this.setTemplate({ tag: "span", children: this.children, attributes: { class: ["ck", "ck-list-item-button__check-holder", e.to("isOn", (t) => t ? "ck-on" : "ck-off")] } });
  }
  render() {
    super.render(), this.isOn && this.children.add(this._checkIconView, 0), this._watchCheckIconMount();
  }
  _watchCheckIconMount() {
    this.on("change:isOn", (e, t, n) => {
      const { children: r, _checkIconView: s } = this;
      n && !r.has(s) ? r.add(s) : !n && r.has(s) && r.remove(s);
    });
  }
  _createCheckIconView() {
    const e = new ui();
    return e.content = E_, e.extendTemplate({ attributes: { class: "ck-list-item-button__check-icon" } }), e;
  }
}
class Ie extends nr {
  constructor(i) {
    super(i), this.set({ withText: !0, withKeystroke: !0, tooltip: !1, role: "menuitem" }), this.extendTemplate({ attributes: { class: ["ck-menu-bar__menu__item__button"] } });
  }
}
class Ru extends N {
  constructor(e) {
    super(e);
    m(this, "id");
    this.set("text", void 0), this.set("for", void 0), this.id = `ck-editor__label_${Tt()}`;
    const t = this.bindTemplate;
    this.setTemplate({ tag: "label", attributes: { class: ["ck", "ck-label"], id: this.id, for: t.to("for") }, children: [{ text: t.to("text") }] });
  }
}
class jA extends N {
  constructor(i, e) {
    super(i);
    const t = i.t, n = new Ru();
    n.text = t("Help Contents. To close this dialog press ESC."), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-accessibility-help-dialog__content"], "aria-labelledby": n.id, role: "document", tabindex: -1 }, children: [fi(document, "p", {}, t("Below, you can find a list of keyboard shortcuts that can be used in the editor.")), ...this._createCategories(Array.from(e.values())), n] });
  }
  focus() {
    this.element.focus();
  }
  _createCategories(i) {
    return i.map((e) => {
      const t = [fi(document, "h3", {}, e.label), ...Array.from(e.groups.values()).map((n) => this._createGroup(n)).flat()];
      return e.description && t.splice(1, 0, fi(document, "p", {}, e.description)), fi(document, "section", {}, t);
    });
  }
  _createGroup(i) {
    const e = i.keystrokes.sort((n, r) => n.label.localeCompare(r.label)).map((n) => this._createGroupRow(n)).flat(), t = [fi(document, "dl", {}, e)];
    return i.label && t.unshift(fi(document, "h4", {}, i.label)), t;
  }
  _createGroupRow(i) {
    const e = this.locale.t, t = fi(document, "dt"), n = fi(document, "dd"), r = function(a) {
      return typeof a == "string" ? [[a]] : typeof a[0] == "string" ? [a] : a;
    }(i.keystroke), s = [];
    for (const a of r) s.push(a.map(HA).join(""));
    return t.innerHTML = i.label, n.innerHTML = s.join(", ") + (i.mayRequireFn && q.isMac ? ` ${e("(may require <kbd>Fn</kbd>)")}` : ""), [t, n];
  }
}
function HA(o) {
  return ya(o).split("+").map((i) => `<kbd>${i}</kbd>`).join("+");
}
class $A extends A {
  constructor() {
    super(...arguments);
    m(this, "contentView", null);
  }
  static get requires() {
    return [oo];
  }
  static get pluginName() {
    return "AccessibilityHelp";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.locale.t;
    e.ui.componentFactory.add("accessibilityHelp", () => {
      const n = this._createButton(j);
      return n.set({ tooltip: !0, withText: !1, label: t("Accessibility help") }), n;
    }), e.ui.componentFactory.add("menuBar:accessibilityHelp", () => {
      const n = this._createButton(Ie);
      return n.label = t("Accessibility"), n;
    }), e.keystrokes.set("Alt+0", (n, r) => {
      this._toggleDialog(), r();
    }), this._setupRootLabels();
  }
  _createButton(e) {
    const t = this.editor, n = t.plugins.get("Dialog"), r = new e(t.locale);
    return r.set({ keystroke: "Alt+0", icon: qm, isToggleable: !0 }), r.on("execute", () => this._toggleDialog()), r.bind("isOn").to(n, "id", (s) => s === "accessibilityHelp"), r;
  }
  _setupRootLabels() {
    const e = this.editor, t = e.editing.view, n = e.t;
    function r(s, a) {
      const l = [a.getAttribute("aria-label"), n("Press %0 for help.", [ya("Alt+0")])].filter((c) => c).join(". ");
      s.setAttribute("aria-label", l, a);
    }
    e.ui.on("ready", () => {
      t.change((s) => {
        for (const a of t.document.roots) r(s, a);
      }), e.on("addRoot", (s, a) => {
        const l = e.editing.view.document.getRoot(a.rootName);
        t.change((c) => r(c, l));
      }, { priority: "low" });
    });
  }
  _toggleDialog() {
    const e = this.editor, t = e.plugins.get("Dialog"), n = e.locale.t;
    this.contentView || (this.contentView = new jA(e.locale, e.accessibility.keystrokeInfos)), t.id === "accessibilityHelp" ? t.hide() : t.show({ id: "accessibilityHelp", className: "ck-accessibility-help-dialog", title: n("Accessibility help"), icon: qm, hasCloseButton: !0, content: this.contentView });
  }
}
const ii = class ii extends It {
  constructor(e, t = []) {
    super(t);
    m(this, "locale");
    m(this, "_bodyCollectionContainer");
    this.locale = e;
  }
  get bodyCollectionContainer() {
    return this._bodyCollectionContainer;
  }
  attachToDom() {
    this._bodyCollectionContainer = new li({ tag: "div", attributes: { class: ["ck", "ck-reset_all", "ck-body", "ck-rounded-corners"], dir: this.locale.uiLanguageDirection, role: "application" }, children: this }).render(), ii._bodyWrapper && ii._bodyWrapper.isConnected || (ii._bodyWrapper = fi(document, "div", { class: "ck-body-wrapper" }), document.body.appendChild(ii._bodyWrapper)), ii._bodyWrapper.appendChild(this._bodyCollectionContainer);
  }
  detachFromDom() {
    super.destroy(), this._bodyCollectionContainer && this._bodyCollectionContainer.remove(), ii._bodyWrapper && !ii._bodyWrapper.childElementCount && (ii._bodyWrapper.remove(), delete ii._bodyWrapper);
  }
};
m(ii, "_bodyWrapper");
let gd = ii;
class As extends j {
  constructor(e) {
    super(e);
    m(this, "toggleSwitchView");
    this.isToggleable = !0, this.toggleSwitchView = this._createToggleView(), this.extendTemplate({ attributes: { class: "ck-switchbutton" } });
  }
  render() {
    super.render(), this.children.add(this.toggleSwitchView);
  }
  _createToggleView() {
    const e = new N();
    return e.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-button__toggle"] }, children: [{ tag: "span", attributes: { class: ["ck", "ck-button__toggle__inner"] } }] }), e;
  }
}
class ig extends R_(j) {
}
class UA extends R_(nr) {
}
function R_(o) {
  return class extends o {
    constructor(...e) {
      super(...e);
      m(this, "buttonView");
      m(this, "_fileInputView");
      this.buttonView = this, this._fileInputView = new qA(this.locale), this._fileInputView.bind("acceptedType").to(this), this._fileInputView.bind("allowMultipleFiles").to(this), this._fileInputView.delegate("done").to(this), this.on("execute", () => {
        this._fileInputView.open();
      }), this.extendTemplate({ attributes: { class: "ck-file-dialog-button" } });
    }
    render() {
      super.render(), this.children.add(this._fileInputView);
    }
  };
}
class qA extends N {
  constructor(i) {
    super(i), this.set("acceptedType", void 0), this.set("allowMultipleFiles", !1);
    const e = this.bindTemplate;
    this.setTemplate({ tag: "input", attributes: { class: ["ck-hidden"], type: "file", tabindex: "-1", accept: e.to("acceptedType"), multiple: e.to("allowMultipleFiles") }, on: { change: e.to(() => {
      var t, n;
      (n = (t = this.element) == null ? void 0 : t.files) != null && n.length && this.fire("done", this.element.files), this.element.value = "";
    }) } });
  }
  open() {
    this.element.click();
  }
}
class z_ extends N {
  constructor(e, t) {
    super(e);
    m(this, "buttonView");
    m(this, "children");
    const n = this.bindTemplate;
    this.set("isCollapsed", !1), this.set("label", ""), this.buttonView = this._createButtonView(), this.children = this.createCollection(), this.set("_collapsibleAriaLabelUid", void 0), t && this.children.addMany(t), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-collapsible", n.if("isCollapsed", "ck-collapsible_collapsed")] }, children: [this.buttonView, { tag: "div", attributes: { class: ["ck", "ck-collapsible__children"], role: "region", hidden: n.if("isCollapsed", "hidden"), "aria-labelledby": n.to("_collapsibleAriaLabelUid") }, children: this.children }] });
  }
  render() {
    super.render(), this._collapsibleAriaLabelUid = this.buttonView.labelView.element.id;
  }
  focus() {
    this.buttonView.focus();
  }
  _createButtonView() {
    const e = new j(this.locale), t = e.bindTemplate;
    return e.set({ withText: !0, icon: gl }), e.extendTemplate({ attributes: { "aria-expanded": t.to("isOn", (n) => String(n)) } }), e.bind("label").to(this), e.bind("isOn").to(this, "isCollapsed", (n) => !n), e.on("execute", () => {
      this.isCollapsed = !this.isCollapsed;
    }), e;
  }
}
function WA(o, i) {
  const e = o.t, t = { Black: e("Black"), "Dim grey": e("Dim grey"), Grey: e("Grey"), "Light grey": e("Light grey"), White: e("White"), Red: e("Red"), Orange: e("Orange"), Yellow: e("Yellow"), "Light green": e("Light green"), Green: e("Green"), Aquamarine: e("Aquamarine"), Turquoise: e("Turquoise"), "Light blue": e("Light blue"), Blue: e("Blue"), Purple: e("Purple") };
  return i.map((n) => {
    const r = t[n.label];
    return r && r != n.label && (n.label = r), n;
  });
}
function GA(o) {
  return o.map(ZA).filter((i) => !!i);
}
function ZA(o) {
  return typeof o == "string" ? { model: o, label: o, hasBorder: !1, view: { name: "span", styles: { color: o } } } : { model: o.color, label: o.label || o.color, hasBorder: o.hasBorder !== void 0 && o.hasBorder, view: { name: "span", styles: { color: `${o.color}` } } };
}
class B_ extends j {
  constructor(i) {
    super(i);
    const e = this.bindTemplate;
    this.set("color", void 0), this.set("hasBorder", !1), this.icon = zC, this.extendTemplate({ attributes: { style: { backgroundColor: e.to("color", (t) => q.isMediaForcedColors ? null : t) }, class: ["ck", "ck-color-grid__tile", e.if("hasBorder", "ck-color-selector__color-tile_bordered")] } });
  }
  render() {
    super.render(), this.iconView.fillColor = "hsl(0, 0%, 100%)";
  }
}
class ng extends N {
  constructor(e, t) {
    super(e);
    m(this, "columns");
    m(this, "items");
    m(this, "focusTracker");
    m(this, "keystrokes");
    const n = t && t.colorDefinitions ? t.colorDefinitions : [];
    this.columns = (t == null ? void 0 : t.columns) || 5;
    const r = { gridTemplateColumns: `repeat( ${this.columns}, 1fr)` };
    this.set("selectedColor", void 0), this.items = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this.items.on("add", (s, a) => {
      a.isOn = a.color === this.selectedColor;
    }), n.forEach((s) => {
      const a = new B_();
      a.set({ color: s.color, label: s.label, tooltip: !0, hasBorder: s.options.hasBorder }), a.on("execute", () => {
        this.fire("execute", { value: s.color, hasBorder: s.options.hasBorder, label: s.label });
      }), this.items.add(a);
    }), this.setTemplate({ tag: "div", children: this.items, attributes: { class: ["ck", "ck-color-grid"], style: r } }), this.on("change:selectedColor", (s, a, l) => {
      for (const c of this.items) c.isOn = c.color === l;
    });
  }
  focus() {
    this.items.length && this.items.first.focus();
  }
  focusLast() {
    this.items.length && this.items.last.focus();
  }
  render() {
    var e;
    super.render();
    for (const t of this.items) this.focusTracker.add(t.element);
    this.items.on("add", (t, n) => {
      this.focusTracker.add(n.element);
    }), this.items.on("remove", (t, n) => {
      this.focusTracker.remove(n.element);
    }), this.keystrokes.listenTo(this.element), Cs({ keystrokeHandler: this.keystrokes, focusTracker: this.focusTracker, gridItems: this.items, numberOfColumns: this.columns, uiLanguageDirection: (e = this.locale) == null ? void 0 : e.uiLanguageDirection });
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
}
var pd = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] }, og = { red: 0, orange: 60, yellow: 120, green: 180, blue: 240, purple: 300 };
function rg(o) {
  var i, e, t = [], n = 1;
  if (typeof o == "string") if (pd[o]) t = pd[o].slice(), e = "rgb";
  else if (o === "transparent") n = 0, e = "rgb", t = [0, 0, 0];
  else if (/^#[A-Fa-f0-9]+$/.test(o)) {
    var r = o.slice(1);
    n = 1, (l = r.length) <= 4 ? (t = [parseInt(r[0] + r[0], 16), parseInt(r[1] + r[1], 16), parseInt(r[2] + r[2], 16)], l === 4 && (n = parseInt(r[3] + r[3], 16) / 255)) : (t = [parseInt(r[0] + r[1], 16), parseInt(r[2] + r[3], 16), parseInt(r[4] + r[5], 16)], l === 8 && (n = parseInt(r[6] + r[7], 16) / 255)), t[0] || (t[0] = 0), t[1] || (t[1] = 0), t[2] || (t[2] = 0), e = "rgb";
  } else if (i = /^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)) {
    var s = i[1], a = s === "rgb";
    e = r = s.replace(/a$/, "");
    var l = r === "cmyk" ? 4 : r === "gray" ? 1 : 3;
    t = i[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(c, d) {
      if (/%$/.test(c)) return d === l ? parseFloat(c) / 100 : r === "rgb" ? 255 * parseFloat(c) / 100 : parseFloat(c);
      if (r[d] === "h") {
        if (/deg$/.test(c)) return parseFloat(c);
        if (og[c] !== void 0) return og[c];
      }
      return parseFloat(c);
    }), s === r && t.push(1), n = a || t[l] === void 0 ? 1 : t[l], t = t.slice(0, l);
  } else o.length > 10 && /[0-9](?:\s|\/)/.test(o) && (t = o.match(/([0-9]+)/g).map(function(c) {
    return parseFloat(c);
  }), e = o.match(/([a-z])/gi).join("").toLowerCase());
  else isNaN(o) ? Array.isArray(o) || o.length ? (t = [o[0], o[1], o[2]], e = "rgb", n = o.length === 4 ? o[3] : 1) : o instanceof Object && (o.r != null || o.red != null || o.R != null ? (e = "rgb", t = [o.r || o.red || o.R || 0, o.g || o.green || o.G || 0, o.b || o.blue || o.B || 0]) : (e = "hsl", t = [o.h || o.hue || o.H || 0, o.s || o.saturation || o.S || 0, o.l || o.lightness || o.L || o.b || o.brightness]), n = o.a || o.alpha || o.opacity || 1, o.opacity != null && (n /= 100)) : (e = "rgb", t = [o >>> 16, (65280 & o) >>> 8, 255 & o]);
  return { space: e, values: t, alpha: n };
}
const Wr = pd, D_ = {};
for (const o of Object.keys(Wr)) D_[Wr[o]] = o;
const U = { rgb: { channels: 3, labels: "rgb" }, hsl: { channels: 3, labels: "hsl" }, hsv: { channels: 3, labels: "hsv" }, hwb: { channels: 3, labels: "hwb" }, cmyk: { channels: 4, labels: "cmyk" }, xyz: { channels: 3, labels: "xyz" }, lab: { channels: 3, labels: "lab" }, lch: { channels: 3, labels: "lch" }, hex: { channels: 1, labels: ["hex"] }, keyword: { channels: 1, labels: ["keyword"] }, ansi16: { channels: 1, labels: ["ansi16"] }, ansi256: { channels: 1, labels: ["ansi256"] }, hcg: { channels: 3, labels: ["h", "c", "g"] }, apple: { channels: 3, labels: ["r16", "g16", "b16"] }, gray: { channels: 1, labels: ["gray"] } };
var F_ = U;
for (const o of Object.keys(U)) {
  if (!("channels" in U[o])) throw new Error("missing channels property: " + o);
  if (!("labels" in U[o])) throw new Error("missing channel labels property: " + o);
  if (U[o].labels.length !== U[o].channels) throw new Error("channel and label counts mismatch: " + o);
  const { channels: i, labels: e } = U[o];
  delete U[o].channels, delete U[o].labels, Object.defineProperty(U[o], "channels", { value: i }), Object.defineProperty(U[o], "labels", { value: e });
}
function KA(o, i) {
  return (o[0] - i[0]) ** 2 + (o[1] - i[1]) ** 2 + (o[2] - i[2]) ** 2;
}
U.rgb.hsl = function(o) {
  const i = o[0] / 255, e = o[1] / 255, t = o[2] / 255, n = Math.min(i, e, t), r = Math.max(i, e, t), s = r - n;
  let a, l;
  r === n ? a = 0 : i === r ? a = (e - t) / s : e === r ? a = 2 + (t - i) / s : t === r && (a = 4 + (i - e) / s), a = Math.min(60 * a, 360), a < 0 && (a += 360);
  const c = (n + r) / 2;
  return l = r === n ? 0 : c <= 0.5 ? s / (r + n) : s / (2 - r - n), [a, 100 * l, 100 * c];
}, U.rgb.hsv = function(o) {
  let i, e, t, n, r;
  const s = o[0] / 255, a = o[1] / 255, l = o[2] / 255, c = Math.max(s, a, l), d = c - Math.min(s, a, l), u = function(h) {
    return (c - h) / 6 / d + 0.5;
  };
  return d === 0 ? (n = 0, r = 0) : (r = d / c, i = u(s), e = u(a), t = u(l), s === c ? n = t - e : a === c ? n = 1 / 3 + i - t : l === c && (n = 2 / 3 + e - i), n < 0 ? n += 1 : n > 1 && (n -= 1)), [360 * n, 100 * r, 100 * c];
}, U.rgb.hwb = function(o) {
  const i = o[0], e = o[1];
  let t = o[2];
  const n = U.rgb.hsl(o)[0], r = 1 / 255 * Math.min(i, Math.min(e, t));
  return t = 1 - 1 / 255 * Math.max(i, Math.max(e, t)), [n, 100 * r, 100 * t];
}, U.rgb.cmyk = function(o) {
  const i = o[0] / 255, e = o[1] / 255, t = o[2] / 255, n = Math.min(1 - i, 1 - e, 1 - t);
  return [100 * ((1 - i - n) / (1 - n) || 0), 100 * ((1 - e - n) / (1 - n) || 0), 100 * ((1 - t - n) / (1 - n) || 0), 100 * n];
}, U.rgb.keyword = function(o) {
  const i = D_[o];
  if (i) return i;
  let e, t = 1 / 0;
  for (const n of Object.keys(Wr)) {
    const r = KA(o, Wr[n]);
    r < t && (t = r, e = n);
  }
  return e;
}, U.keyword.rgb = function(o) {
  return Wr[o];
}, U.rgb.xyz = function(o) {
  let i = o[0] / 255, e = o[1] / 255, t = o[2] / 255;
  return i = i > 0.04045 ? ((i + 0.055) / 1.055) ** 2.4 : i / 12.92, e = e > 0.04045 ? ((e + 0.055) / 1.055) ** 2.4 : e / 12.92, t = t > 0.04045 ? ((t + 0.055) / 1.055) ** 2.4 : t / 12.92, [100 * (0.4124 * i + 0.3576 * e + 0.1805 * t), 100 * (0.2126 * i + 0.7152 * e + 0.0722 * t), 100 * (0.0193 * i + 0.1192 * e + 0.9505 * t)];
}, U.rgb.lab = function(o) {
  const i = U.rgb.xyz(o);
  let e = i[0], t = i[1], n = i[2];
  return e /= 95.047, t /= 100, n /= 108.883, e = e > 8856e-6 ? e ** (1 / 3) : 7.787 * e + 16 / 116, t = t > 8856e-6 ? t ** (1 / 3) : 7.787 * t + 16 / 116, n = n > 8856e-6 ? n ** (1 / 3) : 7.787 * n + 16 / 116, [116 * t - 16, 500 * (e - t), 200 * (t - n)];
}, U.hsl.rgb = function(o) {
  const i = o[0] / 360, e = o[1] / 100, t = o[2] / 100;
  let n, r, s;
  if (e === 0) return s = 255 * t, [s, s, s];
  n = t < 0.5 ? t * (1 + e) : t + e - t * e;
  const a = 2 * t - n, l = [0, 0, 0];
  for (let c = 0; c < 3; c++) r = i + 1 / 3 * -(c - 1), r < 0 && r++, r > 1 && r--, s = 6 * r < 1 ? a + 6 * (n - a) * r : 2 * r < 1 ? n : 3 * r < 2 ? a + (n - a) * (2 / 3 - r) * 6 : a, l[c] = 255 * s;
  return l;
}, U.hsl.hsv = function(o) {
  const i = o[0];
  let e = o[1] / 100, t = o[2] / 100, n = e;
  const r = Math.max(t, 0.01);
  return t *= 2, e *= t <= 1 ? t : 2 - t, n *= r <= 1 ? r : 2 - r, [i, 100 * (t === 0 ? 2 * n / (r + n) : 2 * e / (t + e)), 100 * ((t + e) / 2)];
}, U.hsv.rgb = function(o) {
  const i = o[0] / 60, e = o[1] / 100;
  let t = o[2] / 100;
  const n = Math.floor(i) % 6, r = i - Math.floor(i), s = 255 * t * (1 - e), a = 255 * t * (1 - e * r), l = 255 * t * (1 - e * (1 - r));
  switch (t *= 255, n) {
    case 0:
      return [t, l, s];
    case 1:
      return [a, t, s];
    case 2:
      return [s, t, l];
    case 3:
      return [s, a, t];
    case 4:
      return [l, s, t];
    case 5:
      return [t, s, a];
  }
}, U.hsv.hsl = function(o) {
  const i = o[0], e = o[1] / 100, t = o[2] / 100, n = Math.max(t, 0.01);
  let r, s;
  s = (2 - e) * t;
  const a = (2 - e) * n;
  return r = e * n, r /= a <= 1 ? a : 2 - a, r = r || 0, s /= 2, [i, 100 * r, 100 * s];
}, U.hwb.rgb = function(o) {
  const i = o[0] / 360;
  let e = o[1] / 100, t = o[2] / 100;
  const n = e + t;
  let r;
  n > 1 && (e /= n, t /= n);
  const s = Math.floor(6 * i), a = 1 - t;
  r = 6 * i - s, 1 & s && (r = 1 - r);
  const l = e + r * (a - e);
  let c, d, u;
  switch (s) {
    default:
    case 6:
    case 0:
      c = a, d = l, u = e;
      break;
    case 1:
      c = l, d = a, u = e;
      break;
    case 2:
      c = e, d = a, u = l;
      break;
    case 3:
      c = e, d = l, u = a;
      break;
    case 4:
      c = l, d = e, u = a;
      break;
    case 5:
      c = a, d = e, u = l;
  }
  return [255 * c, 255 * d, 255 * u];
}, U.cmyk.rgb = function(o) {
  const i = o[0] / 100, e = o[1] / 100, t = o[2] / 100, n = o[3] / 100;
  return [255 * (1 - Math.min(1, i * (1 - n) + n)), 255 * (1 - Math.min(1, e * (1 - n) + n)), 255 * (1 - Math.min(1, t * (1 - n) + n))];
}, U.xyz.rgb = function(o) {
  const i = o[0] / 100, e = o[1] / 100, t = o[2] / 100;
  let n, r, s;
  return n = 3.2406 * i + -1.5372 * e + -0.4986 * t, r = -0.9689 * i + 1.8758 * e + 0.0415 * t, s = 0.0557 * i + -0.204 * e + 1.057 * t, n = n > 31308e-7 ? 1.055 * n ** (1 / 2.4) - 0.055 : 12.92 * n, r = r > 31308e-7 ? 1.055 * r ** (1 / 2.4) - 0.055 : 12.92 * r, s = s > 31308e-7 ? 1.055 * s ** (1 / 2.4) - 0.055 : 12.92 * s, n = Math.min(Math.max(0, n), 1), r = Math.min(Math.max(0, r), 1), s = Math.min(Math.max(0, s), 1), [255 * n, 255 * r, 255 * s];
}, U.xyz.lab = function(o) {
  let i = o[0], e = o[1], t = o[2];
  return i /= 95.047, e /= 100, t /= 108.883, i = i > 8856e-6 ? i ** (1 / 3) : 7.787 * i + 16 / 116, e = e > 8856e-6 ? e ** (1 / 3) : 7.787 * e + 16 / 116, t = t > 8856e-6 ? t ** (1 / 3) : 7.787 * t + 16 / 116, [116 * e - 16, 500 * (i - e), 200 * (e - t)];
}, U.lab.xyz = function(o) {
  let i, e, t;
  e = (o[0] + 16) / 116, i = o[1] / 500 + e, t = e - o[2] / 200;
  const n = e ** 3, r = i ** 3, s = t ** 3;
  return e = n > 8856e-6 ? n : (e - 16 / 116) / 7.787, i = r > 8856e-6 ? r : (i - 16 / 116) / 7.787, t = s > 8856e-6 ? s : (t - 16 / 116) / 7.787, i *= 95.047, e *= 100, t *= 108.883, [i, e, t];
}, U.lab.lch = function(o) {
  const i = o[0], e = o[1], t = o[2];
  let n;
  return n = 360 * Math.atan2(t, e) / 2 / Math.PI, n < 0 && (n += 360), [i, Math.sqrt(e * e + t * t), n];
}, U.lch.lab = function(o) {
  const i = o[0], e = o[1], t = o[2] / 360 * 2 * Math.PI;
  return [i, e * Math.cos(t), e * Math.sin(t)];
}, U.rgb.ansi16 = function(o, i = null) {
  const [e, t, n] = o;
  let r = i === null ? U.rgb.hsv(o)[2] : i;
  if (r = Math.round(r / 50), r === 0) return 30;
  let s = 30 + (Math.round(n / 255) << 2 | Math.round(t / 255) << 1 | Math.round(e / 255));
  return r === 2 && (s += 60), s;
}, U.hsv.ansi16 = function(o) {
  return U.rgb.ansi16(U.hsv.rgb(o), o[2]);
}, U.rgb.ansi256 = function(o) {
  const i = o[0], e = o[1], t = o[2];
  return i === e && e === t ? i < 8 ? 16 : i > 248 ? 231 : Math.round((i - 8) / 247 * 24) + 232 : 16 + 36 * Math.round(i / 255 * 5) + 6 * Math.round(e / 255 * 5) + Math.round(t / 255 * 5);
}, U.ansi16.rgb = function(o) {
  let i = o % 10;
  if (i === 0 || i === 7) return o > 50 && (i += 3.5), i = i / 10.5 * 255, [i, i, i];
  const e = 0.5 * (1 + ~~(o > 50));
  return [(1 & i) * e * 255, (i >> 1 & 1) * e * 255, (i >> 2 & 1) * e * 255];
}, U.ansi256.rgb = function(o) {
  if (o >= 232) {
    const e = 10 * (o - 232) + 8;
    return [e, e, e];
  }
  let i;
  return o -= 16, [Math.floor(o / 36) / 5 * 255, Math.floor((i = o % 36) / 6) / 5 * 255, i % 6 / 5 * 255];
}, U.rgb.hex = function(o) {
  const i = (((255 & Math.round(o[0])) << 16) + ((255 & Math.round(o[1])) << 8) + (255 & Math.round(o[2]))).toString(16).toUpperCase();
  return "000000".substring(i.length) + i;
}, U.hex.rgb = function(o) {
  const i = o.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);
  if (!i) return [0, 0, 0];
  let e = i[0];
  i[0].length === 3 && (e = e.split("").map((n) => n + n).join(""));
  const t = parseInt(e, 16);
  return [t >> 16 & 255, t >> 8 & 255, 255 & t];
}, U.rgb.hcg = function(o) {
  const i = o[0] / 255, e = o[1] / 255, t = o[2] / 255, n = Math.max(Math.max(i, e), t), r = Math.min(Math.min(i, e), t), s = n - r;
  let a, l;
  return a = s < 1 ? r / (1 - s) : 0, l = s <= 0 ? 0 : n === i ? (e - t) / s % 6 : n === e ? 2 + (t - i) / s : 4 + (i - e) / s, l /= 6, l %= 1, [360 * l, 100 * s, 100 * a];
}, U.hsl.hcg = function(o) {
  const i = o[1] / 100, e = o[2] / 100, t = e < 0.5 ? 2 * i * e : 2 * i * (1 - e);
  let n = 0;
  return t < 1 && (n = (e - 0.5 * t) / (1 - t)), [o[0], 100 * t, 100 * n];
}, U.hsv.hcg = function(o) {
  const i = o[1] / 100, e = o[2] / 100, t = i * e;
  let n = 0;
  return t < 1 && (n = (e - t) / (1 - t)), [o[0], 100 * t, 100 * n];
}, U.hcg.rgb = function(o) {
  const i = o[0] / 360, e = o[1] / 100, t = o[2] / 100;
  if (e === 0) return [255 * t, 255 * t, 255 * t];
  const n = [0, 0, 0], r = i % 1 * 6, s = r % 1, a = 1 - s;
  let l = 0;
  switch (Math.floor(r)) {
    case 0:
      n[0] = 1, n[1] = s, n[2] = 0;
      break;
    case 1:
      n[0] = a, n[1] = 1, n[2] = 0;
      break;
    case 2:
      n[0] = 0, n[1] = 1, n[2] = s;
      break;
    case 3:
      n[0] = 0, n[1] = a, n[2] = 1;
      break;
    case 4:
      n[0] = s, n[1] = 0, n[2] = 1;
      break;
    default:
      n[0] = 1, n[1] = 0, n[2] = a;
  }
  return l = (1 - e) * t, [255 * (e * n[0] + l), 255 * (e * n[1] + l), 255 * (e * n[2] + l)];
}, U.hcg.hsv = function(o) {
  const i = o[1] / 100, e = i + o[2] / 100 * (1 - i);
  let t = 0;
  return e > 0 && (t = i / e), [o[0], 100 * t, 100 * e];
}, U.hcg.hsl = function(o) {
  const i = o[1] / 100, e = o[2] / 100 * (1 - i) + 0.5 * i;
  let t = 0;
  return e > 0 && e < 0.5 ? t = i / (2 * e) : e >= 0.5 && e < 1 && (t = i / (2 * (1 - e))), [o[0], 100 * t, 100 * e];
}, U.hcg.hwb = function(o) {
  const i = o[1] / 100, e = i + o[2] / 100 * (1 - i);
  return [o[0], 100 * (e - i), 100 * (1 - e)];
}, U.hwb.hcg = function(o) {
  const i = o[1] / 100, e = 1 - o[2] / 100, t = e - i;
  let n = 0;
  return t < 1 && (n = (e - t) / (1 - t)), [o[0], 100 * t, 100 * n];
}, U.apple.rgb = function(o) {
  return [o[0] / 65535 * 255, o[1] / 65535 * 255, o[2] / 65535 * 255];
}, U.rgb.apple = function(o) {
  return [o[0] / 255 * 65535, o[1] / 255 * 65535, o[2] / 255 * 65535];
}, U.gray.rgb = function(o) {
  return [o[0] / 100 * 255, o[0] / 100 * 255, o[0] / 100 * 255];
}, U.gray.hsl = function(o) {
  return [0, 0, o[0]];
}, U.gray.hsv = U.gray.hsl, U.gray.hwb = function(o) {
  return [0, 100, o[0]];
}, U.gray.cmyk = function(o) {
  return [0, 0, 0, o[0]];
}, U.gray.lab = function(o) {
  return [o[0], 0, 0];
}, U.gray.hex = function(o) {
  const i = 255 & Math.round(o[0] / 100 * 255), e = ((i << 16) + (i << 8) + i).toString(16).toUpperCase();
  return "000000".substring(e.length) + e;
}, U.rgb.gray = function(o) {
  return [(o[0] + o[1] + o[2]) / 3 / 255 * 100];
};
const Ma = F_;
function YA(o) {
  const i = function() {
    const t = {}, n = Object.keys(Ma);
    for (let r = n.length, s = 0; s < r; s++) t[n[s]] = { distance: -1, parent: null };
    return t;
  }(), e = [o];
  for (i[o].distance = 0; e.length; ) {
    const t = e.pop(), n = Object.keys(Ma[t]);
    for (let r = n.length, s = 0; s < r; s++) {
      const a = n[s], l = i[a];
      l.distance === -1 && (l.distance = i[t].distance + 1, l.parent = t, e.unshift(a));
    }
  }
  return i;
}
function QA(o, i) {
  return function(e) {
    return i(o(e));
  };
}
function JA(o, i) {
  const e = [i[o].parent, o];
  let t = Ma[i[o].parent][o], n = i[o].parent;
  for (; i[n].parent; ) e.unshift(i[n].parent), t = QA(Ma[i[n].parent][n], t), n = i[n].parent;
  return t.conversion = e, t;
}
const Zl = F_, XA = function(o) {
  const i = YA(o), e = {}, t = Object.keys(i);
  for (let n = t.length, r = 0; r < n; r++) {
    const s = t[r];
    i[s].parent !== null && (e[s] = JA(s, i));
  }
  return e;
}, Kn = {};
Object.keys(Zl).forEach((o) => {
  Kn[o] = {}, Object.defineProperty(Kn[o], "channels", { value: Zl[o].channels }), Object.defineProperty(Kn[o], "labels", { value: Zl[o].labels });
  const i = XA(o);
  Object.keys(i).forEach((e) => {
    const t = i[e];
    Kn[o][e] = function(n) {
      const r = function(...s) {
        const a = s[0];
        if (a == null) return a;
        a.length > 1 && (s = a);
        const l = n(s);
        if (typeof l == "object") for (let c = l.length, d = 0; d < c; d++) l[d] = Math.round(l[d]);
        return l;
      };
      return "conversion" in n && (r.conversion = n.conversion), r;
    }(t), Kn[o][e].raw = function(n) {
      const r = function(...s) {
        const a = s[0];
        return a == null ? a : (a.length > 1 && (s = a), n(s));
      };
      return "conversion" in n && (r.conversion = n.conversion), r;
    }(t);
  });
});
var sg = l2({ __proto__: null, default: Kn }, [Kn]);
function j_(o, i) {
  if (!o) return "";
  const e = H_(o);
  if (!e) return "";
  if (e.space === i) return o;
  if (t = e, !Object.keys(sg).includes(t.space)) return "";
  var t;
  const n = sg[e.space][i];
  return n ? function(r, s) {
    switch (s) {
      case "hex":
        return `#${r}`;
      case "rgb":
        return `rgb(${r[0]}, ${r[1]}, ${r[2]})`;
      case "hsl":
        return `hsl(${r[0]}, ${r[1]}%, ${r[2]}%)`;
      case "hwb":
        return `hwb(${r[0]}, ${r[1]}, ${r[2]})`;
      case "lab":
        return `lab(${r[0]}% ${r[1]} ${r[2]})`;
      case "lch":
        return `lch(${r[0]}% ${r[1]} ${r[2]})`;
      default:
        return "";
    }
  }(n(e.space === "hex" ? e.hexValue : e.values), i) : "";
}
function H_(o) {
  if (o.startsWith("#")) {
    const e = rg(o);
    return { space: "hex", values: e.values, hexValue: o, alpha: e.alpha };
  }
  const i = rg(o);
  return i.space ? i : null;
}
class Ri extends N {
  constructor(e, t) {
    super(e);
    m(this, "fieldView");
    m(this, "labelView");
    m(this, "statusView");
    m(this, "fieldWrapperChildren");
    const n = `ck-labeled-field-view-${Tt()}`, r = `ck-labeled-field-view-status-${Tt()}`;
    this.fieldView = t(this, n, r), this.set("label", void 0), this.set("isEnabled", !0), this.set("isEmpty", !0), this.set("isFocused", !1), this.set("errorText", null), this.set("infoText", null), this.set("class", void 0), this.set("placeholder", void 0), this.labelView = this._createLabelView(n), this.statusView = this._createStatusView(r), this.fieldWrapperChildren = this.createCollection([this.fieldView, this.labelView]), this.bind("_statusText").to(this, "errorText", this, "infoText", (a, l) => a || l);
    const s = this.bindTemplate;
    this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-labeled-field-view", s.to("class"), s.if("isEnabled", "ck-disabled", (a) => !a), s.if("isEmpty", "ck-labeled-field-view_empty"), s.if("isFocused", "ck-labeled-field-view_focused"), s.if("placeholder", "ck-labeled-field-view_placeholder"), s.if("errorText", "ck-error")] }, children: [{ tag: "div", attributes: { class: ["ck", "ck-labeled-field-view__input-wrapper"] }, children: this.fieldWrapperChildren }, this.statusView] });
  }
  _createLabelView(e) {
    const t = new Ru(this.locale);
    return t.for = e, t.bind("text").to(this, "label"), t;
  }
  _createStatusView(e) {
    const t = new N(this.locale), n = this.bindTemplate;
    return t.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-labeled-field-view__status", n.if("errorText", "ck-labeled-field-view__status_error"), n.if("_statusText", "ck-hidden", (r) => !r)], id: e, role: n.if("errorText", "alert") }, children: [{ text: n.to("_statusText") }] }), t;
  }
  focus(e) {
    this.fieldView.focus(e);
  }
}
class eT extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker");
    this.set("value", void 0), this.set("id", void 0), this.set("placeholder", void 0), this.set("tabIndex", void 0), this.set("isReadOnly", !1), this.set("hasError", !1), this.set("ariaDescribedById", void 0), this.set("ariaLabel", void 0), this.focusTracker = new fe(), this.bind("isFocused").to(this.focusTracker), this.set("isEmpty", !0);
    const t = this.bindTemplate;
    this.setTemplate({ tag: "input", attributes: { class: ["ck", "ck-input", t.if("isFocused", "ck-input_focused"), t.if("isEmpty", "ck-input-text_empty"), t.if("hasError", "ck-error")], id: t.to("id"), placeholder: t.to("placeholder"), tabindex: t.to("tabIndex"), readonly: t.to("isReadOnly"), "aria-invalid": t.if("hasError", !0), "aria-describedby": t.to("ariaDescribedById"), "aria-label": t.to("ariaLabel") }, on: { input: t.to((...n) => {
      this.fire("input", ...n), this._updateIsEmpty();
    }), change: t.to(this._updateIsEmpty.bind(this)) } });
  }
  render() {
    super.render(), this.focusTracker.add(this.element), this._setDomElementValue(this.value), this._updateIsEmpty(), this.on("change:value", (e, t, n) => {
      this._setDomElementValue(n), this._updateIsEmpty();
    });
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy();
  }
  select() {
    this.element.select();
  }
  focus() {
    this.element.focus();
  }
  reset() {
    this.value = this.element.value = "", this._updateIsEmpty();
  }
  _updateIsEmpty() {
    this.isEmpty = !this.element.value;
  }
  _setDomElementValue(e) {
    this.element.value = e || e === 0 ? e : "";
  }
}
class $_ extends eT {
  constructor(i) {
    super(i), this.set("inputMode", "text");
    const e = this.bindTemplate;
    this.extendTemplate({ attributes: { inputmode: e.to("inputMode") } });
  }
}
class tT extends $_ {
  constructor(i) {
    super(i), this.extendTemplate({ attributes: { type: "text", class: ["ck-input-text"] } });
  }
}
class iT extends $_ {
  constructor(i, { min: e, max: t, step: n } = {}) {
    super(i);
    const r = this.bindTemplate;
    this.set("min", e), this.set("max", t), this.set("step", n), this.extendTemplate({ attributes: { type: "number", class: ["ck-input-number"], min: r.to("min"), max: r.to("max"), step: r.to("step") } });
  }
}
class nT extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    const t = this.bindTemplate;
    this.set("isVisible", !1), this.set("position", "se"), this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-reset", "ck-dropdown__panel", t.to("position", (n) => `ck-dropdown__panel_${n}`), t.if("isVisible", "ck-dropdown__panel-visible")], tabindex: "-1" }, children: this.children, on: { selectstart: t.to((n) => {
      n.target.tagName.toLocaleLowerCase() !== "input" && n.preventDefault();
    }) } });
  }
  focus() {
    if (this.children.length) {
      const e = this.children.first;
      typeof e.focus == "function" ? e.focus() : ce("ui-dropdown-panel-focus-child-missing-focus", { childView: this.children.first, dropdownPanel: this });
    }
  }
  focusLast() {
    if (this.children.length) {
      const e = this.children.last;
      typeof e.focusLast == "function" ? e.focusLast() : e.focus();
    }
  }
}
const Ho = class Ho extends N {
  constructor(e, t, n) {
    super(e);
    m(this, "buttonView");
    m(this, "panelView");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "listView");
    m(this, "toolbarView");
    m(this, "menuView");
    const r = this.bindTemplate;
    this.buttonView = t, this.panelView = n, this.set("isOpen", !1), this.set("isEnabled", !0), this.set("class", void 0), this.set("id", void 0), this.set("panelPosition", "auto"), this.panelView.bind("isVisible").to(this, "isOpen"), this.keystrokes = new Le(), this.focusTracker = new fe(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-dropdown", r.to("class"), r.if("isEnabled", "ck-disabled", (s) => !s)], id: r.to("id"), "aria-describedby": r.to("ariaDescribedById") }, children: [t, n] }), t.extendTemplate({ attributes: { class: ["ck-dropdown__button"], "data-cke-tooltip-disabled": r.to("isOpen") } });
  }
  render() {
    super.render(), this.focusTracker.add(this.buttonView.element), this.focusTracker.add(this.panelView.element), this.listenTo(this.buttonView, "open", () => {
      this.isOpen = !this.isOpen;
    }), this.on("change:isOpen", (t, n, r) => {
      if (r) if (this.panelPosition === "auto") {
        const s = Ho._getOptimalPosition({ element: this.panelView.element, target: this.buttonView.element, fitInViewport: !0, positions: this._panelPositions });
        this.panelView.position = s ? s.name : this._defaultPanelPositionName;
      } else this.panelView.position = this.panelPosition;
    }), this.keystrokes.listenTo(this.element);
    const e = (t, n) => {
      this.isOpen && (this.isOpen = !1, n());
    };
    this.keystrokes.set("arrowdown", (t, n) => {
      this.buttonView.isEnabled && !this.isOpen && (this.isOpen = !0, n());
    }), this.keystrokes.set("arrowright", (t, n) => {
      this.isOpen && n();
    }), this.keystrokes.set("arrowleft", e), this.keystrokes.set("esc", e);
  }
  focus() {
    this.buttonView.focus();
  }
  get _panelPositions() {
    const { south: e, north: t, southEast: n, southWest: r, northEast: s, northWest: a, southMiddleEast: l, southMiddleWest: c, northMiddleEast: d, northMiddleWest: u } = Ho.defaultPanelPositions;
    return this.locale.uiLanguageDirection !== "rtl" ? [n, r, l, c, e, s, a, d, u, t] : [r, n, c, l, e, a, s, u, d, t];
  }
  get _defaultPanelPositionName() {
    return this.locale.uiLanguageDirection === "rtl" ? "sw" : "se";
  }
};
m(Ho, "defaultPanelPositions", { south: (e, t) => ({ top: e.bottom, left: e.left - (t.width - e.width) / 2, name: "s" }), southEast: (e) => ({ top: e.bottom, left: e.left, name: "se" }), southWest: (e, t) => ({ top: e.bottom, left: e.left - t.width + e.width, name: "sw" }), southMiddleEast: (e, t) => ({ top: e.bottom, left: e.left - (t.width - e.width) / 4, name: "sme" }), southMiddleWest: (e, t) => ({ top: e.bottom, left: e.left - 3 * (t.width - e.width) / 4, name: "smw" }), north: (e, t) => ({ top: e.top - t.height, left: e.left - (t.width - e.width) / 2, name: "n" }), northEast: (e, t) => ({ top: e.top - t.height, left: e.left, name: "ne" }), northWest: (e, t) => ({ top: e.top - t.height, left: e.left - t.width + e.width, name: "nw" }), northMiddleEast: (e, t) => ({ top: e.top - t.height, left: e.left - (t.width - e.width) / 4, name: "nme" }), northMiddleWest: (e, t) => ({ top: e.top - t.height, left: e.left - 3 * (t.width - e.width) / 4, name: "nmw" }) }), m(Ho, "_getOptimalPosition", gu);
let fd = Ho;
class U_ extends j {
  constructor(e) {
    super(e);
    m(this, "arrowView");
    this.arrowView = this._createArrowView(), this.extendTemplate({ attributes: { "aria-haspopup": !0, "aria-expanded": this.bindTemplate.to("isOn", (t) => String(t)) } }), this.delegate("execute").to(this, "open");
  }
  render() {
    super.render(), this.children.add(this.arrowView);
  }
  _createArrowView() {
    const e = new ui();
    return e.content = gl, e.extendTemplate({ attributes: { class: "ck-dropdown__arrow" } }), e;
  }
}
class hi extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    const t = this.bindTemplate;
    this.set("isVisible", !0), this.children = this.createCollection(), this.setTemplate({ tag: "li", attributes: { class: ["ck", "ck-list__item", t.if("isVisible", "ck-hidden", (n) => !n)], role: "presentation" }, children: this.children });
  }
  focus() {
    this.children.first && this.children.first.focus();
  }
}
class pl extends N {
  constructor(i) {
    super(i), this.setTemplate({ tag: "li", attributes: { class: ["ck", "ck-list__separator"] } });
  }
}
class sa extends N {
  constructor(e, t = new Ru()) {
    super(e);
    m(this, "labelView");
    m(this, "items");
    m(this, "children");
    const n = this.bindTemplate, r = new go(e);
    this.set({ label: "", isVisible: !0 }), this.labelView = t, this.labelView.bind("text").to(this, "label"), this.children = this.createCollection(), this.children.addMany([this.labelView, r]), r.set({ role: "group", ariaLabelledBy: t.id }), r.focusTracker.destroy(), r.keystrokes.destroy(), this.items = r.items, this.setTemplate({ tag: "li", attributes: { role: "presentation", class: ["ck", "ck-list__group", n.if("isVisible", "ck-hidden", (s) => !s)] }, children: this.children });
  }
  focus() {
    if (this.items) {
      const e = this.items.find((t) => !(t instanceof pl));
      e && e.focus();
    }
  }
}
class go extends N {
  constructor(e) {
    super(e);
    m(this, "focusables");
    m(this, "items");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "_focusCycler");
    m(this, "_listItemGroupToChangeListeners", /* @__PURE__ */ new WeakMap());
    const t = this.bindTemplate;
    this.focusables = new It(), this.items = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this._focusCycler = new ut({ focusables: this.focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "arrowup", focusNext: "arrowdown" } }), this.set("ariaLabel", void 0), this.set("ariaLabelledBy", void 0), this.set("role", void 0), this.setTemplate({ tag: "ul", attributes: { class: ["ck", "ck-reset", "ck-list"], role: t.to("role"), "aria-label": t.to("ariaLabel"), "aria-labelledby": t.to("ariaLabelledBy") }, children: this.items });
  }
  render() {
    super.render();
    for (const e of this.items) e instanceof sa ? this._registerFocusableItemsGroup(e) : e instanceof hi && this._registerFocusableListItem(e);
    this.items.on("change", (e, t) => {
      for (const n of t.removed) n instanceof sa ? this._deregisterFocusableItemsGroup(n) : n instanceof hi && this._deregisterFocusableListItem(n);
      for (const n of Array.from(t.added).reverse()) n instanceof sa ? this._registerFocusableItemsGroup(n, t.index) : this._registerFocusableListItem(n, t.index);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  focusFirst() {
    this._focusCycler.focusFirst();
  }
  focusLast() {
    this._focusCycler.focusLast();
  }
  _registerFocusableListItem(e, t) {
    this.focusTracker.add(e.element), this.focusables.add(e, t);
  }
  _deregisterFocusableListItem(e) {
    this.focusTracker.remove(e.element), this.focusables.remove(e);
  }
  _getOnGroupItemsChangeCallback(e) {
    return (t, n) => {
      for (const r of n.removed) this._deregisterFocusableListItem(r);
      for (const r of Array.from(n.added).reverse()) this._registerFocusableListItem(r, this.items.getIndex(e) + n.index);
    };
  }
  _registerFocusableItemsGroup(e, t) {
    Array.from(e.items).forEach((r, s) => {
      const a = t !== void 0 ? t + s : void 0;
      this._registerFocusableListItem(r, a);
    });
    const n = this._getOnGroupItemsChangeCallback(e);
    this._listItemGroupToChangeListeners.set(e, n), e.items.on("change", n);
  }
  _deregisterFocusableItemsGroup(e) {
    for (const t of e.items) this._deregisterFocusableListItem(t);
    e.items.off("change", this._listItemGroupToChangeListeners.get(e)), this._listItemGroupToChangeListeners.delete(e);
  }
}
const ag = Nn("px"), oT = { top: -99999, left: -99999, name: "arrowless", config: { withArrow: !1 } }, qt = class qt extends N {
  constructor(e) {
    super(e);
    m(this, "content");
    m(this, "_pinWhenIsVisibleCallback");
    m(this, "_resizeObserver");
    const t = this.bindTemplate;
    this.set("top", 0), this.set("left", 0), this.set("position", "arrow_nw"), this.set("isVisible", !1), this.set("withArrow", !0), this.set("class", void 0), this._pinWhenIsVisibleCallback = null, this._resizeObserver = null, this.content = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-balloon-panel", t.to("position", (n) => `ck-balloon-panel_${n}`), t.if("isVisible", "ck-balloon-panel_visible"), t.if("withArrow", "ck-balloon-panel_with-arrow"), t.to("class")], style: { top: t.to("top", ag), left: t.to("left", ag) } }, children: this.content });
  }
  destroy() {
    this.hide(), super.destroy();
  }
  show() {
    this.isVisible = !0;
  }
  hide() {
    this.isVisible = !1;
  }
  attachTo(e) {
    const t = aa(e.target);
    if (t && !an(t)) return !1;
    this.show();
    const n = qt.defaultPositions, r = Object.assign({}, { element: this.element, positions: [n.southArrowNorth, n.southArrowNorthMiddleWest, n.southArrowNorthMiddleEast, n.southArrowNorthWest, n.southArrowNorthEast, n.northArrowSouth, n.northArrowSouthMiddleWest, n.northArrowSouthMiddleEast, n.northArrowSouthWest, n.northArrowSouthEast, n.viewportStickyNorth], limiter: z.document.body, fitInViewport: !0 }, e), s = qt._getOptimalPosition(r) || oT, a = parseInt(s.left), l = parseInt(s.top), c = s.name, d = s.config || {}, { withArrow: u = !0 } = d;
    return this.top = l, this.left = a, this.position = c, this.withArrow = u, !0;
  }
  pin(e) {
    this.unpin(), this._startPinning(e) && (this._pinWhenIsVisibleCallback = () => {
      this.isVisible ? this._startPinning(e) : this._stopPinning();
    }, this.listenTo(this, "change:isVisible", this._pinWhenIsVisibleCallback));
  }
  unpin() {
    this._pinWhenIsVisibleCallback && (this._stopPinning(), this.stopListening(this, "change:isVisible", this._pinWhenIsVisibleCallback), this._pinWhenIsVisibleCallback = null, this.hide());
  }
  _startPinning(e) {
    if (!this.attachTo(e)) return !1;
    let t = aa(e.target);
    const n = e.limiter ? aa(e.limiter) : z.document.body;
    if (this.listenTo(z.document, "scroll", (r, s) => {
      const a = s.target, l = t && a.contains(t), c = n && a.contains(n);
      !l && !c && t && n || this.attachTo(e);
    }, { useCapture: !0 }), this.listenTo(z.window, "resize", () => {
      this.attachTo(e);
    }), !this._resizeObserver && (t && Ye(t) && (t = t.parentElement), t)) {
      const r = () => {
        an(t) || this.unpin();
      };
      this._resizeObserver = new io(t, r);
    }
    return !0;
  }
  _stopPinning() {
    this.stopListening(z.document, "scroll"), this.stopListening(z.window, "resize"), this._resizeObserver && (this._resizeObserver.destroy(), this._resizeObserver = null);
  }
  static generatePositions(e = {}) {
    const { sideOffset: t = qt.arrowSideOffset, heightOffset: n = qt.arrowHeightOffset, stickyVerticalOffset: r = qt.stickyVerticalOffset, config: s } = e;
    return { northWestArrowSouthWest: (c, d) => ({ top: a(c, d), left: c.left - t, name: "arrow_sw", ...s && { config: s } }), northWestArrowSouthMiddleWest: (c, d) => ({ top: a(c, d), left: c.left - 0.25 * d.width - t, name: "arrow_smw", ...s && { config: s } }), northWestArrowSouth: (c, d) => ({ top: a(c, d), left: c.left - d.width / 2, name: "arrow_s", ...s && { config: s } }), northWestArrowSouthMiddleEast: (c, d) => ({ top: a(c, d), left: c.left - 0.75 * d.width + t, name: "arrow_sme", ...s && { config: s } }), northWestArrowSouthEast: (c, d) => ({ top: a(c, d), left: c.left - d.width + t, name: "arrow_se", ...s && { config: s } }), northArrowSouthWest: (c, d) => ({ top: a(c, d), left: c.left + c.width / 2 - t, name: "arrow_sw", ...s && { config: s } }), northArrowSouthMiddleWest: (c, d) => ({ top: a(c, d), left: c.left + c.width / 2 - 0.25 * d.width - t, name: "arrow_smw", ...s && { config: s } }), northArrowSouth: (c, d) => ({ top: a(c, d), left: c.left + c.width / 2 - d.width / 2, name: "arrow_s", ...s && { config: s } }), northArrowSouthMiddleEast: (c, d) => ({ top: a(c, d), left: c.left + c.width / 2 - 0.75 * d.width + t, name: "arrow_sme", ...s && { config: s } }), northArrowSouthEast: (c, d) => ({ top: a(c, d), left: c.left + c.width / 2 - d.width + t, name: "arrow_se", ...s && { config: s } }), northEastArrowSouthWest: (c, d) => ({ top: a(c, d), left: c.right - t, name: "arrow_sw", ...s && { config: s } }), northEastArrowSouthMiddleWest: (c, d) => ({ top: a(c, d), left: c.right - 0.25 * d.width - t, name: "arrow_smw", ...s && { config: s } }), northEastArrowSouth: (c, d) => ({ top: a(c, d), left: c.right - d.width / 2, name: "arrow_s", ...s && { config: s } }), northEastArrowSouthMiddleEast: (c, d) => ({ top: a(c, d), left: c.right - 0.75 * d.width + t, name: "arrow_sme", ...s && { config: s } }), northEastArrowSouthEast: (c, d) => ({ top: a(c, d), left: c.right - d.width + t, name: "arrow_se", ...s && { config: s } }), southWestArrowNorthWest: (c) => ({ top: l(c), left: c.left - t, name: "arrow_nw", ...s && { config: s } }), southWestArrowNorthMiddleWest: (c, d) => ({ top: l(c), left: c.left - 0.25 * d.width - t, name: "arrow_nmw", ...s && { config: s } }), southWestArrowNorth: (c, d) => ({ top: l(c), left: c.left - d.width / 2, name: "arrow_n", ...s && { config: s } }), southWestArrowNorthMiddleEast: (c, d) => ({ top: l(c), left: c.left - 0.75 * d.width + t, name: "arrow_nme", ...s && { config: s } }), southWestArrowNorthEast: (c, d) => ({ top: l(c), left: c.left - d.width + t, name: "arrow_ne", ...s && { config: s } }), southArrowNorthWest: (c) => ({ top: l(c), left: c.left + c.width / 2 - t, name: "arrow_nw", ...s && { config: s } }), southArrowNorthMiddleWest: (c, d) => ({ top: l(c), left: c.left + c.width / 2 - 0.25 * d.width - t, name: "arrow_nmw", ...s && { config: s } }), southArrowNorth: (c, d) => ({ top: l(c), left: c.left + c.width / 2 - d.width / 2, name: "arrow_n", ...s && { config: s } }), southArrowNorthMiddleEast: (c, d) => ({ top: l(c), left: c.left + c.width / 2 - 0.75 * d.width + t, name: "arrow_nme", ...s && { config: s } }), southArrowNorthEast: (c, d) => ({ top: l(c), left: c.left + c.width / 2 - d.width + t, name: "arrow_ne", ...s && { config: s } }), southEastArrowNorthWest: (c) => ({ top: l(c), left: c.right - t, name: "arrow_nw", ...s && { config: s } }), southEastArrowNorthMiddleWest: (c, d) => ({ top: l(c), left: c.right - 0.25 * d.width - t, name: "arrow_nmw", ...s && { config: s } }), southEastArrowNorth: (c, d) => ({ top: l(c), left: c.right - d.width / 2, name: "arrow_n", ...s && { config: s } }), southEastArrowNorthMiddleEast: (c, d) => ({ top: l(c), left: c.right - 0.75 * d.width + t, name: "arrow_nme", ...s && { config: s } }), southEastArrowNorthEast: (c, d) => ({ top: l(c), left: c.right - d.width + t, name: "arrow_ne", ...s && { config: s } }), westArrowEast: (c, d) => ({ top: c.top + c.height / 2 - d.height / 2, left: c.left - d.width - n, name: "arrow_e", ...s && { config: s } }), eastArrowWest: (c, d) => ({ top: c.top + c.height / 2 - d.height / 2, left: c.right + n, name: "arrow_w", ...s && { config: s } }), viewportStickyNorth: (c, d, u, h) => {
      const g = h || u;
      return c.getIntersection(g) ? g.height - c.height > r ? null : { top: g.top + r, left: c.left + c.width / 2 - d.width / 2, name: "arrowless", config: { withArrow: !1, ...s } } : null;
    } };
    function a(c, d) {
      return c.top - d.height - n;
    }
    function l(c) {
      return c.bottom + n;
    }
  }
};
m(qt, "arrowSideOffset", 25), m(qt, "arrowHeightOffset", 10), m(qt, "stickyVerticalOffset", 20), m(qt, "_getOptimalPosition", gu), m(qt, "defaultPositions", qt.generatePositions());
let lt = qt;
function aa(o) {
  return Mn(o) ? o : al(o) ? o.commonAncestorContainer : typeof o == "function" ? aa(o()) : null;
}
class zu extends N {
  constructor(i) {
    super(i), this.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-toolbar__separator"] } });
  }
}
class rT extends N {
  constructor(i) {
    super(i), this.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-toolbar__line-break"] } });
  }
}
function Bu(o) {
  if (Array.isArray(o)) return { items: o, removeItems: [] };
  const i = { items: [], removeItems: [] };
  return o ? { ...i, ...o } : i;
}
const bd = { alignLeft: A_, bold: T_, importExport: GC, paragraph: gA, plus: kA, text: LA, threeVerticalDots: Nu, pilcrow: bA, dragIndicator: DC };
class Ts extends N {
  constructor(e, t) {
    super(e);
    m(this, "options");
    m(this, "items");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "itemsView");
    m(this, "children");
    m(this, "focusables");
    m(this, "_focusCycler");
    m(this, "_behavior");
    const n = this.bindTemplate, r = this.t;
    this.options = t || {}, this.set("ariaLabel", r("Editor toolbar")), this.set("maxWidth", "auto"), this.set("role", "toolbar"), this.set("isGrouping", !!this.options.shouldGroupWhenFull), this.items = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this.set("class", void 0), this.set("isCompact", !1), this.set("isVertical", !1), this.itemsView = new sT(e), this.children = this.createCollection(), this.children.add(this.itemsView), this.focusables = this.createCollection();
    const s = e.uiLanguageDirection === "rtl";
    this._focusCycler = new ut({ focusables: this.focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: [s ? "arrowright" : "arrowleft", "arrowup"], focusNext: [s ? "arrowleft" : "arrowright", "arrowdown"] } });
    const a = ["ck", "ck-toolbar", n.to("class"), n.if("isCompact", "ck-toolbar_compact"), n.if("isGrouping", "ck-toolbar_grouping"), n.if("isVertical", "ck-toolbar_vertical")];
    var l;
    this.options.shouldGroupWhenFull && this.options.isFloating && a.push("ck-toolbar_floating"), this.setTemplate({ tag: "div", attributes: { class: a, role: n.to("role"), "aria-label": n.to("ariaLabel"), style: { maxWidth: n.to("maxWidth") }, tabindex: -1 }, children: this.children, on: { mousedown: (l = this, l.bindTemplate.to((c) => {
      c.target === l.element && c.preventDefault();
    })) } }), this._behavior = this.options.shouldGroupWhenFull ? new cg(this) : new lg(this);
  }
  render() {
    super.render(), this.focusTracker.add(this.element);
    for (const e of this.items) this.focusTracker.add(e);
    this.items.on("add", (e, t) => {
      this.focusTracker.add(t);
    }), this.items.on("remove", (e, t) => {
      this.focusTracker.remove(t);
    }), this.keystrokes.listenTo(this.element), this._behavior.render(this);
  }
  destroy() {
    return this._behavior.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy(), super.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  focusLast() {
    this._focusCycler.focusLast();
  }
  fillFromConfig(e, t, n) {
    this.items.addMany(this._buildItemsFromConfig(e, t, n));
  }
  switchBehavior(e) {
    this._behavior.type !== e && (this._behavior.destroy(), this.itemsView.children.clear(), this.focusables.clear(), e === "dynamic" ? (this._behavior = new cg(this), this._behavior.render(this), this._behavior.refreshItems()) : (this._behavior = new lg(this), this._behavior.render(this)));
  }
  _buildItemsFromConfig(e, t, n) {
    const r = Bu(e), s = n || r.removeItems;
    return this._cleanItemsConfiguration(r.items, t, s).map((a) => wi(a) ? this._createNestedToolbarDropdown(a, t, s) : a === "|" ? new zu() : a === "-" ? new rT() : t.create(a)).filter((a) => !!a);
  }
  _cleanItemsConfiguration(e, t, n) {
    const r = e.filter((s, a, l) => s === "|" || n.indexOf(s) === -1 && (s === "-" ? !this.options.shouldGroupWhenFull || (ce("toolbarview-line-break-ignored-when-grouping-items", l), !1) : !(!wi(s) && !t.has(s)) || (ce("toolbarview-item-unavailable", { item: s }), !1)));
    return this._cleanSeparatorsAndLineBreaks(r);
  }
  _cleanSeparatorsAndLineBreaks(e) {
    const t = (a) => a !== "-" && a !== "|", n = e.length, r = e.findIndex(t);
    if (r === -1) return [];
    const s = n - e.slice().reverse().findIndex(t);
    return e.slice(r, s).filter((a, l, c) => t(a) ? !0 : !(l > 0 && c[l - 1] === a));
  }
  _createNestedToolbarDropdown(e, t, n) {
    let { label: r, icon: s, items: a, tooltip: l = !0, withText: c = !1 } = e;
    if (a = this._cleanItemsConfiguration(a, t, n), !a.length) return null;
    const d = ft(this.locale);
    return r || ce("toolbarview-nested-toolbar-dropdown-missing-label", e), d.class = "ck-toolbar__nested-toolbar-dropdown", d.buttonView.set({ label: r, tooltip: l, withText: !!c }), s !== !1 ? d.buttonView.icon = bd[s] || s || Nu : d.buttonView.withText = !0, Es(d, () => d.toolbarView._buildItemsFromConfig(a, t, n)), d;
  }
}
class sT extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-toolbar__items"] }, children: this.children });
  }
}
class lg {
  constructor(i) {
    m(this, "type", "static");
    i.isGrouping = !1, i.itemsView.children.bindTo(i.items).using((e) => e), i.focusables.bindTo(i.items).using((e) => cr(e) ? e : null);
  }
  render() {
  }
  destroy() {
  }
}
class cg {
  constructor(i) {
    m(this, "type", "dynamic");
    m(this, "view");
    m(this, "viewChildren");
    m(this, "viewFocusables");
    m(this, "viewItemsView");
    m(this, "viewFocusTracker");
    m(this, "viewLocale");
    m(this, "ungroupedItems");
    m(this, "groupedItems");
    m(this, "groupedItemsDropdown");
    m(this, "resizeObserver", null);
    m(this, "cachedPadding", null);
    m(this, "shouldUpdateGroupingOnNextResize", !1);
    m(this, "viewElement");
    this.view = i, this.viewChildren = i.children, this.viewFocusables = i.focusables, this.viewItemsView = i.itemsView, this.viewFocusTracker = i.focusTracker, this.viewLocale = i.locale, this.view.isGrouping = !0, this.ungroupedItems = i.createCollection(), this.groupedItems = i.createCollection(), this.groupedItemsDropdown = this._createGroupedItemsDropdown(), i.itemsView.children.bindTo(this.ungroupedItems).using((e) => e), this.ungroupedItems.on("change", this._updateFocusCyclableItems.bind(this)), i.children.on("change", this._updateFocusCyclableItems.bind(this)), i.items.on("change", (e, t) => {
      const n = t.index, r = Array.from(t.added);
      for (const s of t.removed) n >= this.ungroupedItems.length ? this.groupedItems.remove(s) : this.ungroupedItems.remove(s);
      for (let s = n; s < n + r.length; s++) {
        const a = r[s - n];
        s > this.ungroupedItems.length ? this.groupedItems.add(a, s - this.ungroupedItems.length) : this.ungroupedItems.add(a, s);
      }
      this._updateGrouping();
    });
  }
  render(i) {
    this.viewElement = i.element, this._enableGroupingOnResize(), this._enableGroupingOnMaxWidthChange(i);
  }
  destroy() {
    this.groupedItemsDropdown.destroy(), this.viewChildren.length > 1 && (this.viewChildren.remove(this.groupedItemsDropdown), this.viewChildren.remove(this.viewChildren.last)), this.resizeObserver.destroy();
  }
  refreshItems() {
    const i = this.view;
    if (i.items.length) {
      for (let e = 0; e < i.items.length; e++) {
        const t = [...i.items][e];
        this.ungroupedItems.add(t, e);
      }
      this._updateGrouping();
    }
  }
  _updateGrouping() {
    if (!this.viewElement.ownerDocument.body.contains(this.viewElement)) return;
    if (!an(this.viewElement)) return void (this.shouldUpdateGroupingOnNextResize = !0);
    const i = this.groupedItems.length;
    let e;
    for (; this._areItemsOverflowing; ) this._groupLastItem(), e = !0;
    if (!e && this.groupedItems.length) {
      for (; this.groupedItems.length && !this._areItemsOverflowing; ) this._ungroupFirstItem();
      this._areItemsOverflowing && this._groupLastItem();
    }
    this.groupedItems.length !== i && this.view.fire("groupedItemsUpdate");
  }
  get _areItemsOverflowing() {
    if (!this.ungroupedItems.length) return !1;
    const i = this.viewElement, e = this.viewLocale.uiLanguageDirection, t = new K(i.lastChild), n = new K(i);
    if (!this.cachedPadding) {
      const r = z.window.getComputedStyle(i), s = e === "ltr" ? "paddingRight" : "paddingLeft";
      this.cachedPadding = Number.parseInt(r[s]);
    }
    return e === "ltr" ? t.right > n.right - this.cachedPadding : t.left < n.left + this.cachedPadding;
  }
  _enableGroupingOnResize() {
    let i;
    this.resizeObserver = new io(this.viewElement, (e) => {
      i && i === e.contentRect.width && !this.shouldUpdateGroupingOnNextResize || (this.shouldUpdateGroupingOnNextResize = !1, this._updateGrouping(), i = e.contentRect.width);
    }), this._updateGrouping();
  }
  _enableGroupingOnMaxWidthChange(i) {
    i.on("change:maxWidth", () => {
      this._updateGrouping();
    });
  }
  _groupLastItem() {
    this.groupedItems.length || (this.viewChildren.add(new zu()), this.viewChildren.add(this.groupedItemsDropdown), this.viewFocusTracker.add(this.groupedItemsDropdown.element)), this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last), 0);
  }
  _ungroupFirstItem() {
    this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)), this.groupedItems.length || (this.viewChildren.remove(this.groupedItemsDropdown), this.viewChildren.remove(this.viewChildren.last), this.viewFocusTracker.remove(this.groupedItemsDropdown.element));
  }
  _createGroupedItemsDropdown() {
    const i = this.viewLocale, e = i.t, t = ft(i);
    return t.class = "ck-toolbar__grouped-dropdown", t.panelPosition = i.uiLanguageDirection === "ltr" ? "sw" : "se", Es(t, this.groupedItems), t.buttonView.set({ label: e("Show more items"), tooltip: !0, tooltipPosition: i.uiLanguageDirection === "rtl" ? "se" : "sw", icon: Nu }), t;
  }
  _updateFocusCyclableItems() {
    this.viewFocusables.clear(), this.ungroupedItems.map((i) => {
      cr(i) && this.viewFocusables.add(i);
    }), this.groupedItems.length && this.viewFocusables.add(this.groupedItemsDropdown);
  }
}
class po extends N {
  constructor(e, t) {
    super(e);
    m(this, "children");
    m(this, "actionView");
    m(this, "arrowView");
    m(this, "keystrokes");
    m(this, "focusTracker");
    const n = this.bindTemplate;
    this.set("class", void 0), this.set("labelStyle", void 0), this.set("icon", void 0), this.set("isEnabled", !0), this.set("isOn", !1), this.set("isToggleable", !1), this.set("isVisible", !0), this.set("keystroke", void 0), this.set("withKeystroke", !1), this.set("label", void 0), this.set("tabindex", -1), this.set("tooltip", !1), this.set("tooltipPosition", "s"), this.set("type", "button"), this.set("withText", !1), this.children = this.createCollection(), this.actionView = this._createActionView(t), this.arrowView = this._createArrowView(), this.keystrokes = new Le(), this.focusTracker = new fe(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-splitbutton", n.to("class"), n.if("isVisible", "ck-hidden", (r) => !r), this.arrowView.bindTemplate.if("isOn", "ck-splitbutton_open")] }, children: this.children });
  }
  render() {
    super.render(), this.children.add(this.actionView), this.children.add(this.arrowView), this.focusTracker.add(this.actionView.element), this.focusTracker.add(this.arrowView.element), this.keystrokes.listenTo(this.element), this.keystrokes.set("arrowright", (e, t) => {
      this.focusTracker.focusedElement === this.actionView.element && (this.arrowView.focus(), t());
    }), this.keystrokes.set("arrowleft", (e, t) => {
      this.focusTracker.focusedElement === this.arrowView.element && (this.actionView.focus(), t());
    });
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this.actionView.focus();
  }
  _createActionView(e) {
    const t = e || new j();
    return e || t.bind("icon", "isEnabled", "isOn", "isToggleable", "keystroke", "label", "tabindex", "tooltip", "tooltipPosition", "type", "withText").to(this), t.extendTemplate({ attributes: { class: "ck-splitbutton__action" } }), t.delegate("execute").to(this), t;
  }
  _createArrowView() {
    const e = new j(), t = e.bindTemplate;
    return e.icon = gl, e.extendTemplate({ attributes: { class: ["ck-splitbutton__arrow"], "data-cke-tooltip-disabled": t.to("isOn"), "aria-haspopup": !0, "aria-expanded": t.to("isOn", (n) => String(n)) } }), e.bind("isEnabled").to(this), e.bind("label").to(this), e.bind("tooltip").to(this), e.delegate("execute").to(this, "open"), e;
  }
}
function ft(o, i = U_) {
  const e = typeof i == "function" ? new i(o) : i, t = new nT(o), n = new fd(o, e, t);
  return e.bind("isEnabled").to(n), e instanceof po ? e.arrowView.bind("isOn").to(n, "isOpen") : e.bind("isOn").to(n, "isOpen"), function(r) {
    (function(s) {
      zn({ emitter: s, activator: () => s.isRendered && s.isOpen, callback: () => {
        s.isOpen = !1;
      }, contextElements: () => [s.element, ...q_(s.focusTracker).filter((a) => !s.element.contains(a))] });
    })(r), function(s) {
      s.on("execute", (a) => {
        a.source instanceof As || (s.isOpen = !1);
      });
    }(r), function(s) {
      s.focusTracker.on("change:isFocused", (a, l, c) => {
        !c && s.isOpen && (s.isOpen = !1);
      });
    }(r), function(s) {
      s.keystrokes.set("arrowdown", (a, l) => {
        s.isOpen && (s.panelView.focus(), l());
      }), s.keystrokes.set("arrowup", (a, l) => {
        s.isOpen && (s.panelView.focusLast(), l());
      });
    }(r), function(s) {
      s.on("change:isOpen", (a, l, c) => {
        c || s.focusTracker.elements.some((d) => d.contains(z.document.activeElement)) && s.buttonView.focus();
      });
    }(r), function(s) {
      s.on("change:isOpen", (a, l, c) => {
        c && s.panelView.focus();
      }, { priority: "low" });
    }(r);
  }(n), n;
}
function Es(o, i, e = {}) {
  o.extendTemplate({ attributes: { class: ["ck-toolbar-dropdown"] } }), o.isOpen ? dg(o, i, e) : o.once("change:isOpen", () => dg(o, i, e), { priority: "highest" }), e.enableActiveItemFocusOnDropdownOpen && fl(o, () => o.toolbarView.items.find((t) => t.isOn));
}
function dg(o, i, e) {
  const t = o.locale, n = t.t, r = o.toolbarView = new Ts(t), s = typeof i == "function" ? i() : i;
  r.ariaLabel = e.ariaLabel || n("Dropdown toolbar"), e.maxWidth && (r.maxWidth = e.maxWidth), e.class && (r.class = e.class), e.isCompact && (r.isCompact = e.isCompact), e.isVertical && (r.isVertical = !0), s instanceof It ? r.items.bindTo(s).using((a) => a) : r.items.addMany(s), o.panelView.children.add(r), o.focusTracker.add(r), r.items.delegate("execute").to(o);
}
function Bn(o, i, e = {}) {
  o.isOpen ? ug(o, i, e) : o.once("change:isOpen", () => ug(o, i, e), { priority: "highest" }), fl(o, () => o.listView.items.find((t) => t instanceof hi && t.children.first.isOn));
}
function ug(o, i, e) {
  const t = o.locale, n = o.listView = new go(t), r = typeof i == "function" ? i() : i;
  n.ariaLabel = e.ariaLabel, n.role = e.role, W_(o, n.items, r, t), o.panelView.children.add(n), n.items.delegate("execute").to(o);
}
function fl(o, i) {
  o.on("change:isOpen", () => {
    if (!o.isOpen) return;
    const e = i();
    e && (typeof e.focus == "function" ? e.focus() : ce("ui-dropdown-focus-child-on-open-child-missing-focus", { view: e }));
  }, { priority: Tn.low - 10 });
}
function q_(o) {
  return [...o.elements, ...o.externalViews.flatMap((i) => q_(i.focusTracker))];
}
function W_(o, i, e, t) {
  i.on("change", () => {
    const n = [...i].reduce((s, a) => (a instanceof hi && a.children.first instanceof nr && s.push(a.children.first), s), []), r = n.some((s) => s.isToggleable);
    n.forEach((s) => {
      s.hasCheckSpace = r;
    });
  }), i.bindTo(e).using((n) => {
    if (n.type === "separator") return new pl(t);
    if (n.type === "group") {
      const r = new sa(t);
      return r.set({ label: n.label }), W_(o, r.items, n.items, t), r.items.delegate("execute").to(o), r;
    }
    if (n.type === "button" || n.type === "switchbutton") {
      const r = n.model.role === "menuitemcheckbox" || n.model.role === "menuitemradio", s = new hi(t);
      let a;
      return n.type === "button" ? (a = new nr(t), a.set({ isToggleable: r })) : a = new As(t), a.bind(...Object.keys(n.model)).to(n.model), a.delegate("execute").to(s), s.children.add(a), s;
    }
    return null;
  });
}
const Ln = (o, i, e) => {
  const t = new tT(o.locale);
  return t.set({ id: i, ariaDescribedById: e }), t.bind("isReadOnly").to(o, "isEnabled", (n) => !n), t.bind("hasError").to(o, "errorText", (n) => !!n), t.on("input", () => {
    o.errorText = null;
  }), o.bind("isEmpty", "isFocused", "placeholder").to(t), t;
}, G_ = (o, i, e) => {
  const t = new iT(o.locale);
  return t.set({ id: i, ariaDescribedById: e, inputMode: "numeric" }), t.bind("isReadOnly").to(o, "isEnabled", (n) => !n), t.bind("hasError").to(o, "errorText", (n) => !!n), t.on("input", () => {
    o.errorText = null;
  }), o.bind("isEmpty", "isFocused", "placeholder").to(t), t;
}, aT = (o, i, e) => {
  const t = ft(o.locale);
  return t.set({ id: i, ariaDescribedById: e }), t.bind("isEnabled").to(o), t;
}, cs = (o, i = 0, e = 1) => o > e ? e : o < i ? i : o, kt = (o, i = 0, e = Math.pow(10, i)) => Math.round(e * o) / e, Kl = (o) => (o[0] === "#" && (o = o.substring(1)), o.length < 6 ? { r: parseInt(o[0] + o[0], 16), g: parseInt(o[1] + o[1], 16), b: parseInt(o[2] + o[2], 16), a: o.length === 4 ? kt(parseInt(o[3] + o[3], 16) / 255, 2) : 1 } : { r: parseInt(o.substring(0, 2), 16), g: parseInt(o.substring(2, 4), 16), b: parseInt(o.substring(4, 6), 16), a: o.length === 8 ? kt(parseInt(o.substring(6, 8), 16) / 255, 2) : 1 }), kd = (o) => {
  const { h: i, s: e, l: t } = (({ h: n, s: r, v: s, a }) => {
    const l = (200 - r) * s / 100;
    return { h: kt(n), s: kt(l > 0 && l < 200 ? r * s / 100 / (l <= 100 ? l : 200 - l) * 100 : 0), l: kt(l / 2), a: kt(a, 2) };
  })(o);
  return `hsl(${i}, ${e}%, ${t}%)`;
}, lT = ({ h: o, s: i, v: e, a: t }) => {
  o = o / 360 * 6, i /= 100, e /= 100;
  const n = Math.floor(o), r = e * (1 - i), s = e * (1 - (o - n) * i), a = e * (1 - (1 - o + n) * i), l = n % 6;
  return { r: kt(255 * [e, s, r, r, a, e][l]), g: kt(255 * [a, e, e, s, r, r][l]), b: kt(255 * [r, r, a, e, e, s][l]), a: kt(t, 2) };
}, Bs = (o) => {
  const i = o.toString(16);
  return i.length < 2 ? "0" + i : i;
}, cT = ({ r: o, g: i, b: e, a: t }) => {
  const n = t < 1 ? Bs(kt(255 * t)) : "";
  return "#" + Bs(o) + Bs(i) + Bs(e) + n;
}, dT = ({ r: o, g: i, b: e, a: t }) => {
  const n = Math.max(o, i, e), r = n - Math.min(o, i, e), s = r ? n === o ? (i - e) / r : n === i ? 2 + (e - o) / r : 4 + (o - i) / r : 0;
  return { h: kt(60 * (s < 0 ? s + 6 : s)), s: kt(n ? r / n * 100 : 0), v: kt(n / 255 * 100), a: t };
}, Z_ = (o, i) => {
  if (o === i) return !0;
  for (const e in o) if (o[e] !== i[e]) return !1;
  return !0;
}, hg = {}, K_ = (o) => {
  let i = hg[o];
  return i || (i = document.createElement("template"), i.innerHTML = o, hg[o] = i), i;
}, Du = (o, i, e) => {
  o.dispatchEvent(new CustomEvent(i, { bubbles: !0, detail: e }));
};
let Co = !1;
const _d = (o) => "touches" in o, mg = (o, i) => {
  const e = _d(i) ? i.touches[0] : i, t = o.el.getBoundingClientRect();
  Du(o.el, "move", o.getMove({ x: cs((e.pageX - (t.left + window.pageXOffset)) / t.width), y: cs((e.pageY - (t.top + window.pageYOffset)) / t.height) }));
};
class Y_ {
  constructor(i, e, t, n) {
    const r = K_(`<div role="slider" tabindex="0" part="${e}" ${t}><div part="${e}-pointer"></div></div>`);
    i.appendChild(r.content.cloneNode(!0));
    const s = i.querySelector(`[part=${e}]`);
    s.addEventListener("mousedown", this), s.addEventListener("touchstart", this), s.addEventListener("keydown", this), this.el = s, this.xy = n, this.nodes = [s.firstChild, s];
  }
  set dragging(i) {
    const e = i ? document.addEventListener : document.removeEventListener;
    e(Co ? "touchmove" : "mousemove", this), e(Co ? "touchend" : "mouseup", this);
  }
  handleEvent(i) {
    switch (i.type) {
      case "mousedown":
      case "touchstart":
        if (i.preventDefault(), !((e) => !(Co && !_d(e) || (Co || (Co = _d(e)), 0)))(i) || !Co && i.button != 0) return;
        this.el.focus(), mg(this, i), this.dragging = !0;
        break;
      case "mousemove":
      case "touchmove":
        i.preventDefault(), mg(this, i);
        break;
      case "mouseup":
      case "touchend":
        this.dragging = !1;
        break;
      case "keydown":
        ((e, t) => {
          const n = t.keyCode;
          n > 40 || e.xy && n < 37 || n < 33 || (t.preventDefault(), Du(e.el, "move", e.getMove({ x: n === 39 ? 0.01 : n === 37 ? -0.01 : n === 34 ? 0.05 : n === 33 ? -0.05 : n === 35 ? 1 : n === 36 ? -1 : 0, y: n === 40 ? 0.01 : n === 38 ? -0.01 : 0 }, !0)));
        })(this, i);
    }
  }
  style(i) {
    i.forEach((e, t) => {
      for (const n in e) this.nodes[t].style.setProperty(n, e[n]);
    });
  }
}
class uT extends Y_ {
  constructor(i) {
    super(i, "hue", 'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"', !1);
  }
  update({ h: i }) {
    this.h = i, this.style([{ left: i / 360 * 100 + "%", color: kd({ h: i, s: 100, v: 100, a: 1 }) }]), this.el.setAttribute("aria-valuenow", `${kt(i)}`);
  }
  getMove(i, e) {
    return { h: e ? cs(this.h + 360 * i.x, 0, 360) : 360 * i.x };
  }
}
class hT extends Y_ {
  constructor(i) {
    super(i, "saturation", 'aria-label="Color"', !0);
  }
  update(i) {
    this.hsva = i, this.style([{ top: 100 - i.v + "%", left: `${i.s}%`, color: kd(i) }, { "background-color": kd({ h: i.h, s: 100, v: 100, a: 1 }) }]), this.el.setAttribute("aria-valuetext", `Saturation ${kt(i.s)}%, Brightness ${kt(i.v)}%`);
  }
  getMove(i, e) {
    return { s: e ? cs(this.hsva.s + 100 * i.x, 0, 100) : 100 * i.x, v: e ? cs(this.hsva.v - 100 * i.y, 0, 100) : Math.round(100 - 100 * i.y) };
  }
}
const Ds = Symbol("same"), Yl = Symbol("color"), gg = Symbol("hsva"), Ql = Symbol("update"), pg = Symbol("parts"), fg = Symbol("css"), bg = Symbol("sliders");
class mT extends HTMLElement {
  static get observedAttributes() {
    return ["color"];
  }
  get [fg]() {
    return [':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}', "[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}", "[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"];
  }
  get [bg]() {
    return [hT, uT];
  }
  get color() {
    return this[Yl];
  }
  set color(i) {
    if (!this[Ds](i)) {
      const e = this.colorModel.toHsva(i);
      this[Ql](e), this[Yl] = i;
    }
  }
  constructor() {
    super();
    const i = K_(`<style>${this[fg].join("")}</style>`), e = this.attachShadow({ mode: "open" });
    e.appendChild(i.content.cloneNode(!0)), e.addEventListener("move", this), this[pg] = this[bg].map((t) => new t(e));
  }
  connectedCallback() {
    if (this.hasOwnProperty("color")) {
      const i = this.color;
      delete this.color, this.color = i;
    } else this.color || (this.color = this.colorModel.defaultColor);
  }
  attributeChangedCallback(i, e, t) {
    const n = this.colorModel.fromAttr(t);
    this[Ds](n) || (this.color = n);
  }
  handleEvent(i) {
    const e = this[gg], t = { ...e, ...i.detail };
    let n;
    this[Ql](t), Z_(t, e) || this[Ds](n = this.colorModel.fromHsva(t)) || (this[Yl] = n, Du(this, "color-changed", { value: n }));
  }
  [Ds](i) {
    return this.color && this.colorModel.equal(i, this.color);
  }
  [Ql](i) {
    this[gg] = i, this[pg].forEach((e) => e.update(i));
  }
}
const gT = { defaultColor: "#000", toHsva: (o) => dT(Kl(o)), fromHsva: ({ h: o, s: i, v: e }) => cT(lT({ h: o, s: i, v: e, a: 1 })), equal: (o, i) => o.toLowerCase() === i.toLowerCase() || Z_(Kl(o), Kl(i)), fromAttr: (o) => o };
class pT extends mT {
  get colorModel() {
    return gT;
  }
}
class fT extends N {
  constructor(e, t = {}) {
    super(e);
    m(this, "hexInputRow");
    m(this, "_debounceColorPickerEvent");
    m(this, "_config");
    this.set({ color: "", _hexColor: "" }), this.hexInputRow = this._createInputRow();
    const n = this.createCollection();
    t.hideInput || n.add(this.hexInputRow), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-color-picker"], tabindex: -1 }, children: n }), this._config = t, this._debounceColorPickerEvent = vi((r) => {
      this.set("color", r), this.fire("colorSelected", { color: this.color });
    }, 150, { leading: !0 }), this.on("set:color", (r, s, a) => {
      r.return = j_(a, this._config.format || "hsl");
    }), this.on("change:color", () => {
      this._hexColor = Jl(this.color);
    }), this.on("change:_hexColor", () => {
      document.activeElement !== this.picker && this.picker.setAttribute("color", this._hexColor), Jl(this.color) != Jl(this._hexColor) && (this.color = this._hexColor);
    });
  }
  render() {
    var e, t;
    if (super.render(), e = "hex-color-picker", t = pT, customElements.get(e) === void 0 && customElements.define(e, t), this.picker = z.document.createElement("hex-color-picker"), this.picker.setAttribute("class", "hex-color-picker"), this.picker.setAttribute("tabindex", "-1"), this._createSlidersView(), this.element) {
      this.hexInputRow.element ? this.element.insertBefore(this.picker, this.hexInputRow.element) : this.element.appendChild(this.picker);
      const n = document.createElement("style");
      n.textContent = '[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}', this.picker.shadowRoot.appendChild(n);
    }
    this.picker.addEventListener("color-changed", (n) => {
      const r = n.detail.value;
      this._debounceColorPickerEvent(r);
    });
  }
  focus() {
    !this._config.hideInput && (q.isGecko || q.isiOS || q.isSafari || q.isBlink) && this.hexInputRow.children.get(1).focus(), this.slidersView.first.focus();
  }
  _createSlidersView() {
    const e = [...this.picker.shadowRoot.children].filter((t) => t.getAttribute("role") === "slider").map((t) => new bT(t));
    this.slidersView = this.createCollection(), e.forEach((t) => {
      this.slidersView.add(t);
    });
  }
  _createInputRow() {
    const e = this._createColorInput();
    return new _T(this.locale, e);
  }
  _createColorInput() {
    const e = new Ri(this.locale, Ln), { t } = this.locale;
    return e.set({ label: t("HEX"), class: "color-picker-hex-input" }), e.fieldView.bind("value").to(this, "_hexColor", (n) => e.isFocused ? e.fieldView.value : n.startsWith("#") ? n.substring(1) : n), e.fieldView.on("input", () => {
      const n = e.fieldView.element.value;
      if (n) {
        const r = Q_(n);
        r && this._debounceColorPickerEvent(r);
      }
    }), e;
  }
  isValid() {
    const { t: e } = this.locale;
    return !!this._config.hideInput || (this.resetValidationStatus(), !!this.hexInputRow.getParsedColor() || (this.hexInputRow.inputView.errorText = e('Please enter a valid color (e.g. "ff0000").'), !1));
  }
  resetValidationStatus() {
    this.hexInputRow.inputView.errorText = null;
  }
}
function Jl(o) {
  let i = function(e) {
    if (!e) return "";
    const t = H_(e);
    return t ? t.space === "hex" ? t.hexValue : j_(e, "hex") : "#000";
  }(o);
  return i || (i = "#000"), i.length === 4 && (i = "#" + [i[1], i[1], i[2], i[2], i[3], i[3]].join("")), i.toLowerCase();
}
class bT extends N {
  constructor(i) {
    super(), this.element = i;
  }
  focus() {
    this.element.focus();
  }
}
class kT extends N {
  constructor(i) {
    super(i), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-color-picker__hash-view"] }, children: "#" });
  }
}
class _T extends N {
  constructor(e, t) {
    super(e);
    m(this, "children");
    m(this, "inputView");
    this.inputView = t, this.children = this.createCollection([new kT(), this.inputView]), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-color-picker__row"] }, children: this.children });
  }
  getParsedColor() {
    return Q_(this.inputView.fieldView.element.value);
  }
}
function Q_(o) {
  if (!o) return null;
  const i = o.trim().replace(/^#/, "");
  return [3, 4, 6, 8].includes(i.length) && /^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(i) ? `#${i}` : null;
}
class wT extends xe(rt) {
  constructor(i) {
    super(i), this.set("isEmpty", !0), this.on("change", () => {
      this.set("isEmpty", this.length === 0);
    });
  }
  add(i, e) {
    return this.find((t) => t.color === i.color) ? this : super.add(i, e);
  }
  hasColor(i) {
    return !!this.find((e) => e.color === i);
  }
}
class vT extends N {
  constructor(e, { colors: t, columns: n, removeButtonLabel: r, documentColorsLabel: s, documentColorsCount: a, colorPickerLabel: l, focusTracker: c, focusables: d }) {
    super(e);
    m(this, "items");
    m(this, "colorDefinitions");
    m(this, "focusTracker");
    m(this, "columns");
    m(this, "documentColors");
    m(this, "documentColorsCount");
    m(this, "staticColorsGrid");
    m(this, "documentColorsGrid");
    m(this, "colorPickerButtonView");
    m(this, "removeColorButtonView");
    m(this, "_focusables");
    m(this, "_documentColorsLabel");
    m(this, "_removeButtonLabel");
    m(this, "_colorPickerLabel");
    const u = this.bindTemplate;
    this.set("isVisible", !0), this.focusTracker = c, this.items = this.createCollection(), this.colorDefinitions = t, this.columns = n, this.documentColors = new wT(), this.documentColorsCount = a, this._focusables = d, this._removeButtonLabel = r, this._colorPickerLabel = l, this._documentColorsLabel = s, this.setTemplate({ tag: "div", attributes: { class: ["ck-color-grids-fragment", u.if("isVisible", "ck-hidden", (h) => !h)] }, children: this.items }), this.removeColorButtonView = this._createRemoveColorButton(), this.items.add(this.removeColorButtonView);
  }
  updateDocumentColors(e, t) {
    const n = e.document, r = this.documentColorsCount;
    this.documentColors.clear();
    for (const s of n.getRoots()) {
      const a = e.createRangeIn(s);
      for (const l of a.getItems()) if (l.is("$textProxy") && l.hasAttribute(t) && (this._addColorToDocumentColors(l.getAttribute(t)), this.documentColors.length >= r)) return;
    }
  }
  updateSelectedColors() {
    const e = this.documentColorsGrid, t = this.staticColorsGrid, n = this.selectedColor;
    t.selectedColor = n, e && (e.selectedColor = n);
  }
  render() {
    if (super.render(), this.staticColorsGrid = this._createStaticColorsGrid(), this.items.add(this.staticColorsGrid), this.documentColorsCount) {
      const e = li.bind(this.documentColors, this.documentColors), t = new N(this.locale);
      t.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-color-grid__label", e.if("isEmpty", "ck-hidden")] }, children: [{ text: this._documentColorsLabel }] }), this.items.add(t), this.documentColorsGrid = this._createDocumentColorsGrid(), this.items.add(this.documentColorsGrid);
    }
    this._createColorPickerButton(), this._addColorSelectorElementsToFocusTracker();
  }
  focus() {
    this.removeColorButtonView.focus();
  }
  destroy() {
    super.destroy();
  }
  addColorPickerButton() {
    this.colorPickerButtonView && (this.items.add(this.colorPickerButtonView), this.focusTracker.add(this.colorPickerButtonView.element), this._focusables.add(this.colorPickerButtonView));
  }
  _addColorSelectorElementsToFocusTracker() {
    this.focusTracker.add(this.removeColorButtonView.element), this._focusables.add(this.removeColorButtonView), this.staticColorsGrid && (this.focusTracker.add(this.staticColorsGrid.element), this._focusables.add(this.staticColorsGrid)), this.documentColorsGrid && (this.focusTracker.add(this.documentColorsGrid.element), this._focusables.add(this.documentColorsGrid));
  }
  _createColorPickerButton() {
    this.colorPickerButtonView = new j(), this.colorPickerButtonView.set({ label: this._colorPickerLabel, withText: !0, icon: RC, class: "ck-color-selector__color-picker" }), this.colorPickerButtonView.on("execute", () => {
      this.fire("colorPicker:show");
    });
  }
  _createRemoveColorButton() {
    const e = new j();
    return e.set({ withText: !0, icon: dd, label: this._removeButtonLabel }), e.class = "ck-color-selector__remove-color", e.on("execute", () => {
      this.fire("execute", { value: null, source: "removeColorButton" });
    }), e.render(), e;
  }
  _createStaticColorsGrid() {
    const e = new ng(this.locale, { colorDefinitions: this.colorDefinitions, columns: this.columns });
    return e.on("execute", (t, n) => {
      this.fire("execute", { value: n.value, source: "staticColorsGrid" });
    }), e;
  }
  _createDocumentColorsGrid() {
    const e = li.bind(this.documentColors, this.documentColors), t = new ng(this.locale, { columns: this.columns });
    return t.extendTemplate({ attributes: { class: e.if("isEmpty", "ck-hidden") } }), t.items.bindTo(this.documentColors).using((n) => {
      var s;
      const r = new B_();
      return r.set({ color: n.color, hasBorder: (s = n.options) == null ? void 0 : s.hasBorder }), n.label && r.set({ label: n.label, tooltip: !0 }), r.on("execute", () => {
        this.fire("execute", { value: n.color, source: "documentColorsGrid" });
      }), r;
    }), this.documentColors.on("change:isEmpty", (n, r, s) => {
      s && (t.selectedColor = null);
    }), t;
  }
  _addColorToDocumentColors(e) {
    const t = this.colorDefinitions.find((n) => n.color === e);
    t ? this.documentColors.add(Object.assign({}, t)) : this.documentColors.add({ color: e, label: e, options: { hasBorder: !1 } });
  }
}
class yT extends N {
  constructor(e, { focusTracker: t, focusables: n, keystrokes: r, colorPickerViewConfig: s }) {
    super(e);
    m(this, "items");
    m(this, "colorPickerView");
    m(this, "saveButtonView");
    m(this, "cancelButtonView");
    m(this, "actionBarView");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "_focusables");
    m(this, "_colorPickerViewConfig");
    this.items = this.createCollection(), this.focusTracker = t, this.keystrokes = r, this.set("isVisible", !1), this.set("selectedColor", void 0), this._focusables = n, this._colorPickerViewConfig = s;
    const a = this.bindTemplate, { saveButtonView: l, cancelButtonView: c } = this._createActionButtons();
    this.saveButtonView = l, this.cancelButtonView = c, this.actionBarView = this._createActionBarView({ saveButtonView: l, cancelButtonView: c }), this.setTemplate({ tag: "div", attributes: { class: ["ck-color-picker-fragment", a.if("isVisible", "ck-hidden", (d) => !d)] }, children: this.items });
  }
  render() {
    super.render();
    const e = new fT(this.locale, { ...this._colorPickerViewConfig });
    this.colorPickerView = e, this.colorPickerView.render(), this.selectedColor && (e.color = this.selectedColor), this.listenTo(this, "change:selectedColor", (t, n, r) => {
      e.color = r;
    }), this.items.add(this.colorPickerView), this.items.add(this.actionBarView), this._addColorPickersElementsToFocusTracker(), this._stopPropagationOnArrowsKeys(), this._executeOnEnterPress(), this._executeUponColorChange();
  }
  destroy() {
    super.destroy();
  }
  focus() {
    this.colorPickerView.focus();
  }
  resetValidationStatus() {
    this.colorPickerView.resetValidationStatus();
  }
  _executeOnEnterPress() {
    this.keystrokes.set("enter", (e) => {
      this.isVisible && this.focusTracker.focusedElement !== this.cancelButtonView.element && this.colorPickerView.isValid() && (this.fire("execute", { value: this.selectedColor }), e.stopPropagation(), e.preventDefault());
    });
  }
  _stopPropagationOnArrowsKeys() {
    const e = (t) => t.stopPropagation();
    this.keystrokes.set("arrowright", e), this.keystrokes.set("arrowleft", e), this.keystrokes.set("arrowup", e), this.keystrokes.set("arrowdown", e);
  }
  _addColorPickersElementsToFocusTracker() {
    for (const t of this.colorPickerView.slidersView) this.focusTracker.add(t.element), this._focusables.add(t);
    const e = this.colorPickerView.hexInputRow.children.get(1);
    e.element && (this.focusTracker.add(e.element), this._focusables.add(e)), this.focusTracker.add(this.saveButtonView.element), this._focusables.add(this.saveButtonView), this.focusTracker.add(this.cancelButtonView.element), this._focusables.add(this.cancelButtonView);
  }
  _createActionBarView({ saveButtonView: e, cancelButtonView: t }) {
    const n = new N(), r = this.createCollection();
    return r.add(e), r.add(t), n.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-color-selector_action-bar"] }, children: r }), n;
  }
  _createActionButtons() {
    const e = this.locale, t = e.t, n = new j(e), r = new j(e);
    return n.set({ icon: E_, class: "ck-button-save", type: "button", withText: !1, label: t("Accept") }), r.set({ icon: Lu, class: "ck-button-cancel", type: "button", withText: !1, label: t("Cancel") }), n.on("execute", () => {
      this.colorPickerView.isValid() && this.fire("execute", { source: "colorPickerSaveButton", value: this.selectedColor });
    }), r.on("execute", () => {
      this.fire("colorPicker:cancel");
    }), { saveButtonView: n, cancelButtonView: r };
  }
  _executeUponColorChange() {
    this.colorPickerView.on("colorSelected", (e, t) => {
      this.fire("execute", { value: t.color, source: "colorPicker" }), this.set("selectedColor", t.color);
    });
  }
}
class kg extends N {
  constructor(e, { colors: t, columns: n, removeButtonLabel: r, documentColorsLabel: s, documentColorsCount: a, colorPickerLabel: l, colorPickerViewConfig: c }) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "items");
    m(this, "colorGridsFragmentView");
    m(this, "colorPickerFragmentView");
    m(this, "_focusCycler");
    m(this, "_focusables");
    m(this, "_colorPickerViewConfig");
    this.items = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this._focusables = new It(), this._colorPickerViewConfig = c, this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.colorGridsFragmentView = new vT(e, { colors: t, columns: n, removeButtonLabel: r, documentColorsLabel: s, documentColorsCount: a, colorPickerLabel: l, focusTracker: this.focusTracker, focusables: this._focusables }), this.colorPickerFragmentView = new yT(e, { focusables: this._focusables, focusTracker: this.focusTracker, keystrokes: this.keystrokes, colorPickerViewConfig: c }), this.set("_isColorGridsFragmentVisible", !0), this.set("_isColorPickerFragmentVisible", !1), this.set("selectedColor", void 0), this.colorGridsFragmentView.bind("isVisible").to(this, "_isColorGridsFragmentVisible"), this.colorPickerFragmentView.bind("isVisible").to(this, "_isColorPickerFragmentVisible"), this.on("change:selectedColor", (d, u, h) => {
      this.colorGridsFragmentView.set("selectedColor", h), this.colorPickerFragmentView.set("selectedColor", h);
    }), this.colorGridsFragmentView.on("change:selectedColor", (d, u, h) => {
      this.set("selectedColor", h);
    }), this.colorPickerFragmentView.on("change:selectedColor", (d, u, h) => {
      this.set("selectedColor", h);
    }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-color-selector"] }, children: this.items });
  }
  render() {
    super.render(), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  appendUI() {
    this._appendColorGridsFragment(), this._colorPickerViewConfig && this._appendColorPickerFragment();
  }
  showColorPickerFragment() {
    this.colorPickerFragmentView.colorPickerView && !this._isColorPickerFragmentVisible && (this._isColorPickerFragmentVisible = !0, this.colorPickerFragmentView.focus(), this.colorPickerFragmentView.resetValidationStatus(), this._isColorGridsFragmentVisible = !1);
  }
  showColorGridsFragment() {
    this._isColorGridsFragmentVisible || (this._isColorGridsFragmentVisible = !0, this.colorGridsFragmentView.focus(), this._isColorPickerFragmentVisible = !1);
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  focusLast() {
    this._focusCycler.focusLast();
  }
  updateDocumentColors(e, t) {
    this.colorGridsFragmentView.updateDocumentColors(e, t);
  }
  updateSelectedColors() {
    this.colorGridsFragmentView.updateSelectedColors();
  }
  _appendColorGridsFragment() {
    this.items.length || (this.items.add(this.colorGridsFragmentView), this.colorGridsFragmentView.delegate("execute").to(this), this.colorGridsFragmentView.delegate("colorPicker:show").to(this));
  }
  _appendColorPickerFragment() {
    this.items.length !== 2 && (this.items.add(this.colorPickerFragmentView), this.colorGridsFragmentView.colorPickerButtonView && this.colorGridsFragmentView.colorPickerButtonView.on("execute", () => {
      this.showColorPickerFragment();
    }), this.colorGridsFragmentView.addColorPickerButton(), this.colorPickerFragmentView.delegate("execute").to(this), this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this));
  }
}
class xT {
  constructor(i) {
    m(this, "editor");
    m(this, "_components", /* @__PURE__ */ new Map());
    this.editor = i;
  }
  *names() {
    for (const i of this._components.values()) yield i.originalName;
  }
  add(i, e) {
    this._components.set(Xl(i), { callback: e, originalName: i });
  }
  create(i) {
    if (!this.has(i)) throw new v("componentfactory-item-missing", this, { name: i });
    return this._components.get(Xl(i)).callback(this.editor.locale);
  }
  has(i) {
    return this._components.has(Xl(i));
  }
}
function Xl(o) {
  return String(o).toLowerCase();
}
const _g = "ck-tooltip", ht = class ht extends Nt() {
  constructor(e) {
    super();
    m(this, "tooltipTextView");
    m(this, "balloonPanelView");
    m(this, "_currentElementWithTooltip", null);
    m(this, "_currentTooltipPosition", null);
    m(this, "_mutationObserver", null);
    m(this, "_pinTooltipDebounced");
    m(this, "_unpinTooltipDebounced");
    m(this, "_watchdogExcluded");
    if (ht._editors.add(e), ht._instance) return ht._instance;
    ht._instance = this, this.tooltipTextView = new N(e.locale), this.tooltipTextView.set("text", ""), this.tooltipTextView.setTemplate({ tag: "span", attributes: { class: ["ck", "ck-tooltip__text"] }, children: [{ text: this.tooltipTextView.bindTemplate.to("text") }] }), this.balloonPanelView = new lt(e.locale), this.balloonPanelView.class = _g, this.balloonPanelView.content.add(this.tooltipTextView), this._mutationObserver = function(t) {
      const n = new MutationObserver(() => {
        t();
      });
      return { attach(r) {
        n.observe(r, { attributes: !0, attributeFilter: ["data-cke-tooltip-text", "data-cke-tooltip-position"] });
      }, detach() {
        n.disconnect();
      } };
    }(() => {
      this._updateTooltipPosition();
    }), this._pinTooltipDebounced = vi(this._pinTooltip, 600), this._unpinTooltipDebounced = vi(this._unpinTooltip, 400), this.listenTo(z.document, "keydown", this._onKeyDown.bind(this), { useCapture: !0 }), this.listenTo(z.document, "mouseenter", this._onEnterOrFocus.bind(this), { useCapture: !0 }), this.listenTo(z.document, "mouseleave", this._onLeaveOrBlur.bind(this), { useCapture: !0 }), this.listenTo(z.document, "focus", this._onEnterOrFocus.bind(this), { useCapture: !0 }), this.listenTo(z.document, "blur", this._onLeaveOrBlur.bind(this), { useCapture: !0 }), this.listenTo(z.document, "scroll", this._onScroll.bind(this), { useCapture: !0 }), this._watchdogExcluded = !0;
  }
  destroy(e) {
    const t = e.ui.view && e.ui.view.body;
    ht._editors.delete(e), this.stopListening(e.ui), t && t.has(this.balloonPanelView) && t.remove(this.balloonPanelView), ht._editors.size || (this._unpinTooltip(), this.balloonPanelView.destroy(), this.stopListening(), ht._instance = null);
  }
  static getPositioningFunctions(e) {
    const t = ht.defaultBalloonPositions;
    return { s: [t.southArrowNorth, t.southArrowNorthEast, t.southArrowNorthWest], n: [t.northArrowSouth], e: [t.eastArrowWest], w: [t.westArrowEast], sw: [t.southArrowNorthEast], se: [t.southArrowNorthWest] }[e];
  }
  _onKeyDown(e, t) {
    t.key === "Escape" && this._currentElementWithTooltip && (this._unpinTooltip(), t.stopPropagation());
  }
  _onEnterOrFocus(e, { target: t }) {
    const n = ec(t);
    n ? n !== this._currentElementWithTooltip ? (this._unpinTooltip(), e.name === "focus" && !n.matches(":hover") || n.matches("[data-cke-tooltip-instant]") ? this._pinTooltip(n, tc(n)) : this._pinTooltipDebounced(n, tc(n))) : this._unpinTooltipDebounced.cancel() : e.name === "focus" && this._unpinTooltip();
  }
  _onLeaveOrBlur(e, { target: t, relatedTarget: n }) {
    if (e.name === "mouseleave") {
      if (!Mn(t)) return;
      const r = this.balloonPanelView.element, s = r && (r === n || r.contains(n)), a = !s && t === r;
      if (s) return void this._unpinTooltipDebounced.cancel();
      if (!a && this._currentElementWithTooltip && t !== this._currentElementWithTooltip) return;
      const l = ec(t), c = ec(n);
      (a || l && l !== c) && (this._pinTooltipDebounced.cancel(), this._currentElementWithTooltip && this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]") || l && l.matches("[data-cke-tooltip-instant]") ? this._unpinTooltip() : this._unpinTooltipDebounced());
    } else {
      if (this._currentElementWithTooltip && t !== this._currentElementWithTooltip) return;
      this._pinTooltipDebounced.cancel(), this._unpinTooltipDebounced();
    }
  }
  _onScroll(e, { target: t }) {
    this._currentElementWithTooltip && (t.contains(this.balloonPanelView.element) && t.contains(this._currentElementWithTooltip) || this._unpinTooltip());
  }
  _pinTooltip(e, { text: t, position: n, cssClass: r }) {
    this._unpinTooltip();
    const s = Te(ht._editors.values()).ui.view.body;
    s.has(this.balloonPanelView) || s.add(this.balloonPanelView), this.tooltipTextView.text = t, this.balloonPanelView.class = [_g, r].filter((a) => a).join(" "), this.balloonPanelView.pin({ target: e, positions: ht.getPositioningFunctions(n) }), this._mutationObserver.attach(e);
    for (const a of ht._editors) this.listenTo(a.ui, "update", this._updateTooltipPosition.bind(this), { priority: "low" });
    this._currentElementWithTooltip = e, this._currentTooltipPosition = n;
  }
  _unpinTooltip() {
    this._unpinTooltipDebounced.cancel(), this._pinTooltipDebounced.cancel(), this.balloonPanelView.unpin();
    for (const e of ht._editors) this.stopListening(e.ui, "update");
    this._currentElementWithTooltip = null, this._currentTooltipPosition = null, this.tooltipTextView.text = "", this._mutationObserver.detach();
  }
  _updateTooltipPosition() {
    if (!this._currentElementWithTooltip) return;
    const e = tc(this._currentElementWithTooltip);
    an(this._currentElementWithTooltip) && e.text ? this.balloonPanelView.pin({ target: this._currentElementWithTooltip, positions: ht.getPositioningFunctions(e.position) }) : this._unpinTooltip();
  }
};
m(ht, "defaultBalloonPositions", lt.generatePositions({ heightOffset: 5, sideOffset: 13 })), m(ht, "_editors", /* @__PURE__ */ new Set()), m(ht, "_instance", null);
let wd = ht;
function ec(o) {
  return Mn(o) ? o.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])") : null;
}
function tc(o) {
  return { text: o.dataset.ckeTooltipText, position: o.dataset.ckeTooltipPosition || "s", cssClass: o.dataset.ckeTooltipClass || "" };
}
class J_ extends Nt() {
  constructor(e, t = {}) {
    super();
    m(this, "editor");
    m(this, "_balloonView", null);
    m(this, "_showBalloonThrottled", Xo(() => this._showBalloon(), 50, { leading: !0 }));
    m(this, "_lastFocusedEditableElement", null);
    m(this, "_balloonClass");
    this.editor = e, this._balloonClass = t.balloonClass, e.on("ready", () => this._handleEditorReady());
  }
  destroy() {
    const e = this._balloonView;
    e && (e.unpin(), this._balloonView = null), this._showBalloonThrottled.cancel(), this.stopListening();
  }
  _handleEditorReady() {
    const e = this.editor;
    this._isEnabled() && e.ui.view && (e.ui.focusTracker.on("change:isFocused", (t, n, r) => {
      this._updateLastFocusedEditableElement(), r ? this._showBalloon() : this._hideBalloon();
    }), e.ui.focusTracker.on("change:focusedElement", (t, n, r) => {
      this._updateLastFocusedEditableElement(), r && this._showBalloon();
    }), e.ui.on("update", () => {
      this._showBalloonThrottled();
    }));
  }
  _getNormalizedConfig() {
    return { side: this.editor.locale.contentLanguageDirection === "ltr" ? "right" : "left", position: "border", verticalOffset: 0, horizontalOffset: 5 };
  }
  _showBalloon() {
    const e = this._getBalloonAttachOptions();
    e && (this._balloonView || (this._balloonView = this._createBalloonView()), this._balloonView.pin(e));
  }
  _hideBalloon() {
    this._balloonView && this._balloonView.unpin();
  }
  _createBalloonView() {
    const e = this.editor, t = new lt(), n = this._createBadgeContent();
    return t.content.add(n), this._balloonClass && (t.class = this._balloonClass), e.ui.view.body.add(t), t;
  }
  _getBalloonAttachOptions() {
    if (!this._lastFocusedEditableElement) return null;
    const e = this._getNormalizedConfig(), t = e.side === "right" ? wg(this._lastFocusedEditableElement, n = e, (r, s) => r.left + r.width - s.width - n.horizontalOffset) : function(r, s) {
      return wg(r, s, (a) => a.left + s.horizontalOffset);
    }(this._lastFocusedEditableElement, e);
    var n;
    return { target: this._lastFocusedEditableElement, positions: [t] };
  }
  _updateLastFocusedEditableElement() {
    const e = this.editor, t = e.ui.focusTracker.isFocused, n = e.ui.focusTracker.focusedElement;
    if (!t || !n) return void (this._lastFocusedEditableElement = null);
    const r = Array.from(e.ui.getEditableElementsNames()).map((s) => e.ui.getEditableElement(s));
    r.includes(n) ? this._lastFocusedEditableElement = n : this._lastFocusedEditableElement = r[0];
  }
}
function wg(o, i, e) {
  return (t, n) => {
    const r = new K(o);
    if (r.width < 350 || r.height < 50) return null;
    let s;
    s = i.position === "inside" ? r.bottom - n.height : r.bottom - n.height / 2, s -= i.verticalOffset;
    const a = e(r, n), l = t.clone().moveTo(a, s).getIntersection(n.clone().moveTo(a, s)).getVisible();
    return !l || l.getArea() < n.getArea() ? null : { top: s, left: a, name: `position_${i.position}-side_${i.side}`, config: { withArrow: !1 } };
  };
}
class CT extends J_ {
  constructor(i) {
    super(i, { balloonClass: "ck-powered-by-balloon" });
  }
  _isEnabled() {
    const i = this.editor;
    if (i.config.get("ui.poweredBy.forceVisible")) return !0;
    const e = i.config.get("licenseKey");
    if (e == "GPL") return !0;
    const t = bu(e.split(".")[1]);
    return !t || !t.whiteLabel;
  }
  _createBadgeContent() {
    return new AT(this.editor.locale, this._getNormalizedConfig().label);
  }
  _getNormalizedConfig() {
    const i = super._getNormalizedConfig(), e = this.editor.config.get("ui.poweredBy") || {}, t = e.position || i.position, n = t === "inside" ? 5 : i.verticalOffset;
    return { position: t, side: e.side || i.side, label: e.label === void 0 ? "Powered by" : e.label, verticalOffset: e.verticalOffset !== void 0 ? e.verticalOffset : n, horizontalOffset: e.horizontalOffset !== void 0 ? e.horizontalOffset : i.horizontalOffset, forceVisible: !!e.forceVisible };
  }
}
class AT extends N {
  constructor(i, e) {
    super(i);
    const t = new ui(), n = this.bindTemplate;
    t.set({ content: _A, isColorInherited: !1 }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-powered-by"], "aria-hidden": !0 }, children: [{ tag: "a", attributes: { href: "https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo", target: "_blank", tabindex: "-1" }, children: [...e ? [{ tag: "span", attributes: { class: ["ck", "ck-powered-by__label"] }, children: [e] }] : [], t], on: { dragstart: n.to((r) => r.preventDefault()) } }] });
  }
}
class TT extends J_ {
  constructor(e) {
    super(e, { balloonClass: "ck-evaluation-badge-balloon" });
    m(this, "licenseTypeMessage", { evaluation: "For evaluation purposes only", trial: "For evaluation purposes only", development: "For development purposes only" });
  }
  _isEnabled() {
    const e = vg(this.editor.config.get("licenseKey"));
    return !!(e && this.licenseTypeMessage[e]);
  }
  _createBadgeContent() {
    const e = vg(this.editor.config.get("licenseKey"));
    return new ET(this.editor.locale, this.licenseTypeMessage[e]);
  }
  _getNormalizedConfig() {
    const e = super._getNormalizedConfig(), t = this.editor.config.get("ui.poweredBy") || {};
    return { position: t.position || e.position, side: (t.side || e.side) === "left" ? "right" : "left", verticalOffset: e.verticalOffset, horizontalOffset: e.horizontalOffset };
  }
}
class ET extends N {
  constructor(i, e) {
    super(i), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-evaluation-badge"], "aria-hidden": !0 }, children: [{ tag: "span", attributes: { class: ["ck", "ck-evaluation-badge__label"] }, children: [e] }] });
  }
}
function vg(o) {
  if (o == "GPL") return "GPL";
  const i = bu(o.split(".")[1]);
  return i ? i.licenseType || "production" : null;
}
const yg = { POLITE: "polite", ASSERTIVE: "assertive" };
class ST {
  constructor(i) {
    m(this, "editor");
    m(this, "view");
    this.editor = i, i.once("ready", () => {
      for (const e of Object.values(yg)) this.announce("", e);
    });
  }
  announce(i, e = yg.POLITE) {
    const t = this.editor;
    if (!t.ui.view) return;
    this.view || (this.view = new IT(t.locale), t.ui.view.body.add(this.view));
    const { politeness: n, isUnsafeHTML: r } = typeof e == "string" ? { politeness: e } : e;
    let s = this.view.regionViews.find((a) => a.politeness === n);
    s || (s = new PT(t, n), this.view.regionViews.add(s)), s.announce({ announcement: i, isUnsafeHTML: r });
  }
}
class IT extends N {
  constructor(e) {
    super(e);
    m(this, "regionViews");
    this.regionViews = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-aria-live-announcer"] }, children: this.regionViews });
  }
}
class PT extends N {
  constructor(e, t) {
    super(e.locale);
    m(this, "politeness");
    m(this, "_domConverter");
    m(this, "_pruneAnnouncementsInterval");
    this.setTemplate({ tag: "div", attributes: { "aria-live": t, "aria-relevant": "additions" }, children: [{ tag: "ul", attributes: { class: ["ck", "ck-aria-live-region-list"] } }] }), e.on("destroy", () => {
      this._pruneAnnouncementsInterval !== null && (clearInterval(this._pruneAnnouncementsInterval), this._pruneAnnouncementsInterval = null);
    }), this.politeness = t, this._domConverter = e.data.htmlProcessor.domConverter, this._pruneAnnouncementsInterval = setInterval(() => {
      this.element && this._listElement.firstChild && this._listElement.firstChild.remove();
    }, 5e3);
  }
  announce({ announcement: e, isUnsafeHTML: t }) {
    if (!e.trim().length) return;
    const n = document.createElement("li");
    t ? this._domConverter.setContentOf(n, e) : n.innerText = e, this._listElement.appendChild(n);
  }
  get _listElement() {
    return this.element.querySelector("ul");
  }
}
class zi extends hi {
  constructor(i, e) {
    super(i);
    const t = this.bindTemplate;
    this.extendTemplate({ attributes: { class: ["ck-menu-bar__menu__item"] }, on: { mouseenter: t.to("mouseenter") } }), this.delegate("mouseenter").to(e);
  }
}
const Ao = { toggleMenusAndFocusItemsOnHover(o) {
  o.on("menu:mouseenter", (i) => {
    if (o.isFocusBorderEnabled || o.isOpen) {
      if (o.isOpen) for (const e of o.menus) {
        const t = i.path[0], n = t instanceof zi && t.children.first === e;
        e.isOpen = (i.path.includes(e) || n) && e.isEnabled;
      }
      i.source.focus();
    }
  });
}, focusCycleMenusOnArrows(o) {
  const i = o.locale.uiLanguageDirection === "rtl";
  function e(t, n) {
    const r = o.children.getIndex(t), s = t.isOpen, a = o.children.length, l = o.children.get((r + a + n) % a);
    t.isOpen = !1, s && (l.isOpen = !0), l.buttonView.focus();
  }
  o.on("menu:arrowright", (t) => {
    e(t.source, i ? -1 : 1);
  }), o.on("menu:arrowleft", (t) => {
    e(t.source, i ? 1 : -1);
  });
}, closeMenusWhenTheBarCloses(o) {
  o.on("change:isOpen", () => {
    o.isOpen || o.menus.forEach((i) => {
      i.isOpen = !1;
    });
  });
}, closeMenuWhenAnotherOnTheSameLevelOpens(o) {
  o.on("menu:change:isOpen", (i, e, t) => {
    t && o.menus.filter((n) => i.source.parentMenuView === n.parentMenuView && i.source !== n && n.isOpen).forEach((n) => {
      n.isOpen = !1;
    });
  });
}, closeOnClickOutside(o) {
  zn({ emitter: o, activator: () => o.isOpen, callback: () => o.close(), contextElements: () => o.children.map((i) => i.element) });
}, enableFocusHighlightOnInteraction(o) {
  let i = !1;
  o.on("change:isOpen", (e, t, n) => {
    n || (i || (o.isFocusBorderEnabled = !1), i = !1);
  }), o.listenTo(o.element, "keydown", () => {
    i = !0;
  }, { useCapture: !0 }), o.listenTo(o.element, "keyup", () => {
    i = !1;
  }, { useCapture: !0 }), o.listenTo(o.element, "focus", () => {
    i && (o.isFocusBorderEnabled = !0);
  }, { useCapture: !0 });
} }, fn = { openAndFocusPanelOnArrowDownKey(o) {
  o.keystrokes.set("arrowdown", (i, e) => {
    o.isEnabled && o.focusTracker.focusedElement === o.buttonView.element && (o.isOpen || (o.isOpen = !0), o.panelView.focus(), e());
  });
}, openOnArrowRightKey(o) {
  const i = o.locale.uiLanguageDirection === "rtl" ? "arrowleft" : "arrowright";
  o.keystrokes.set(i, (e, t) => {
    o.focusTracker.focusedElement === o.buttonView.element && o.isEnabled && (o.isOpen || (o.isOpen = !0), o.panelView.focus(), t());
  });
}, openOnButtonClick(o) {
  o.buttonView.on("execute", () => {
    o.isOpen = !0;
  });
}, toggleOnButtonClick(o) {
  o.buttonView.on("execute", () => {
    o.isOpen = !o.isOpen;
  });
}, openAndFocusOnEnterKeyPress(o) {
  o.keystrokes.set("enter", (i, e) => {
    o.focusTracker.focusedElement === o.buttonView.element && (o.isOpen = !0, o.panelView.focus(), e());
  });
}, closeOnArrowLeftKey(o) {
  const i = o.locale.uiLanguageDirection === "rtl" ? "arrowright" : "arrowleft";
  o.keystrokes.set(i, (e, t) => {
    o.isOpen && (o.isOpen = !1, o.focus(), t());
  });
}, closeOnEscKey(o) {
  o.keystrokes.set("esc", (i, e) => {
    o.isOpen && (o.isOpen = !1, o.focus(), e());
  });
}, closeOnParentClose(o) {
  o.parentMenuView.on("change:isOpen", (i, e, t) => {
    t || i.source !== o.parentMenuView || (o.isOpen = !1);
  });
} }, MT = { southEast: (o) => ({ top: o.bottom, left: o.left, name: "se" }), southWest: (o, i) => ({ top: o.bottom, left: o.left - i.width + o.width, name: "sw" }), northEast: (o, i) => ({ top: o.top - i.height, left: o.left, name: "ne" }), northWest: (o, i) => ({ top: o.top - i.height, left: o.left - i.width + o.width, name: "nw" }), eastSouth: (o) => ({ top: o.top, left: o.right - 5, name: "es" }), eastNorth: (o, i) => ({ top: o.top - i.height, left: o.right - 5, name: "en" }), westSouth: (o, i) => ({ top: o.top, left: o.left - i.width + 5, name: "ws" }), westNorth: (o, i) => ({ top: o.top - i.height, left: o.left - i.width + 5, name: "wn" }) }, VT = [{ menuId: "file", label: "File", groups: [{ groupId: "export", items: ["menuBar:exportPdf", "menuBar:exportWord"] }, { groupId: "import", items: ["menuBar:importWord"] }, { groupId: "revisionHistory", items: ["menuBar:revisionHistory"] }] }, { menuId: "edit", label: "Edit", groups: [{ groupId: "undo", items: ["menuBar:undo", "menuBar:redo"] }, { groupId: "selectAll", items: ["menuBar:selectAll"] }, { groupId: "findAndReplace", items: ["menuBar:findAndReplace"] }] }, { menuId: "view", label: "View", groups: [{ groupId: "sourceEditingEnhanced", items: ["menuBar:sourceEditingEnhanced"] }, { groupId: "sourceEditing", items: ["menuBar:sourceEditing"] }, { groupId: "showBlocks", items: ["menuBar:showBlocks"] }, { groupId: "previewMergeFields", items: ["menuBar:previewMergeFields"] }, { groupId: "fullscreen", items: ["menuBar:fullscreen"] }, { groupId: "restrictedEditing", items: ["menuBar:restrictedEditing"] }] }, { menuId: "insert", label: "Insert", groups: [{ groupId: "insertMainWidgets", items: ["menuBar:insertImage", "menuBar:ckbox", "menuBar:ckfinder", "menuBar:insertTable", "menuBar:insertTableLayout"] }, { groupId: "insertInline", items: ["menuBar:link", "menuBar:bookmark", "menuBar:comment", "menuBar:insertMergeField", "menuBar:emoji"] }, { groupId: "insertMinorWidgets", items: ["menuBar:mediaEmbed", "menuBar:insertTemplate", "menuBar:specialCharacters", "menuBar:blockQuote", "menuBar:codeBlock", "menuBar:htmlEmbed"] }, { groupId: "insertStructureWidgets", items: ["menuBar:horizontalLine", "menuBar:pageBreak", "menuBar:tableOfContents"] }, { groupId: "restrictedEditingException", items: ["menuBar:restrictedEditingException"] }] }, { menuId: "format", label: "Format", groups: [{ groupId: "textAndFont", items: [{ menuId: "text", label: "Text", groups: [{ groupId: "basicStyles", items: ["menuBar:bold", "menuBar:italic", "menuBar:underline", "menuBar:strikethrough", "menuBar:superscript", "menuBar:subscript", "menuBar:code"] }, { groupId: "textPartLanguage", items: ["menuBar:textPartLanguage"] }] }, { menuId: "font", label: "Font", groups: [{ groupId: "fontProperties", items: ["menuBar:fontSize", "menuBar:fontFamily"] }, { groupId: "fontColors", items: ["menuBar:fontColor", "menuBar:fontBackgroundColor"] }, { groupId: "highlight", items: ["menuBar:highlight"] }] }, "menuBar:heading"] }, { groupId: "list", items: ["menuBar:bulletedList", "menuBar:numberedList", "menuBar:multiLevelList", "menuBar:todoList"] }, { groupId: "indent", items: ["menuBar:alignment", "menuBar:indent", "menuBar:outdent"] }, { groupId: "caseChange", items: ["menuBar:caseChange"] }, { groupId: "removeFormat", items: ["menuBar:removeFormat"] }] }, { menuId: "tools", label: "Tools", groups: [{ groupId: "aiTools", items: ["menuBar:aiAssistant", "menuBar:aiCommands"] }, { groupId: "tools", items: ["menuBar:trackChanges", "menuBar:commentsArchive"] }] }, { menuId: "help", label: "Help", groups: [{ groupId: "help", items: ["menuBar:accessibilityHelp"] }] }];
function LT(o) {
  let i;
  return i = "items" in o && o.items ? { items: o.items, removeItems: [], addItems: [], isVisible: !0, isUsingDefaultConfig: !1, ...o } : { items: Kt(VT), addItems: [], removeItems: [], isVisible: !0, isUsingDefaultConfig: !0, ...o }, i;
}
function OT({ normalizedConfig: o, locale: i, componentFactory: e, extraItems: t }) {
  const n = Kt(o);
  return xg(o, n, t), function(r, s) {
    const a = s.removeItems, l = [];
    s.items = s.items.filter(({ menuId: c }) => !a.includes(c) || (l.push(c), !1)), Yo(s.items, (c) => {
      c.groups = c.groups.filter(({ groupId: d }) => !a.includes(d) || (l.push(d), !1));
      for (const d of c.groups) d.items = d.items.filter((u) => {
        const h = ew(u);
        return !a.includes(h) || (l.push(h), !1);
      });
    });
    for (const c of a) l.includes(c) || ce("menu-bar-item-could-not-be-removed", { menuBarConfig: r, itemName: c });
  }(o, n), xg(o, n, n.addItems), function(r, s, a) {
    Yo(s.items, (l) => {
      for (const c of l.groups) c.items = c.items.filter((d) => {
        const u = typeof d == "string" && !a.has(d);
        return u && !s.isUsingDefaultConfig && ce("menu-bar-item-unavailable", { menuBarConfig: r, parentMenuConfig: Kt(l), componentName: d }), !u;
      });
    });
  }(o, n, e), X_(o, n), function(r, s) {
    const a = s.t, l = { File: a({ string: "File", id: "MENU_BAR_MENU_FILE" }), Edit: a({ string: "Edit", id: "MENU_BAR_MENU_EDIT" }), View: a({ string: "View", id: "MENU_BAR_MENU_VIEW" }), Insert: a({ string: "Insert", id: "MENU_BAR_MENU_INSERT" }), Format: a({ string: "Format", id: "MENU_BAR_MENU_FORMAT" }), Tools: a({ string: "Tools", id: "MENU_BAR_MENU_TOOLS" }), Help: a({ string: "Help", id: "MENU_BAR_MENU_HELP" }), Text: a({ string: "Text", id: "MENU_BAR_MENU_TEXT" }), Font: a({ string: "Font", id: "MENU_BAR_MENU_FONT" }) };
    Yo(r.items, (c) => {
      c.label in l && (c.label = l[c.label]);
    });
  }(n, i), n;
}
function xg(o, i, e) {
  const t = [];
  if (e.length != 0) {
    for (const r of e) {
      const s = RT(r.position), a = zT(r.position);
      if (typeof (n = r) == "object" && "menu" in n) if (a) {
        const l = i.items.findIndex((c) => c.menuId === a);
        l != -1 ? s === "before" ? (i.items.splice(l, 0, r.menu), t.push(r)) : s === "after" && (i.items.splice(l + 1, 0, r.menu), t.push(r)) : Cg(i, r.menu, a, s) && t.push(r);
      } else s === "start" ? (i.items.unshift(r.menu), t.push(r)) : s === "end" && (i.items.push(r.menu), t.push(r));
      else NT(r) ? Yo(i.items, (l) => {
        if (l.menuId === a) s === "start" ? (l.groups.unshift(r.group), t.push(r)) : s === "end" && (l.groups.push(r.group), t.push(r));
        else {
          const c = l.groups.findIndex((d) => d.groupId === a);
          c !== -1 && (s === "before" ? (l.groups.splice(c, 0, r.group), t.push(r)) : s === "after" && (l.groups.splice(c + 1, 0, r.group), t.push(r)));
        }
      }) : Cg(i, r.item, a, s) && t.push(r);
    }
    var n;
    for (const r of e) t.includes(r) || ce("menu-bar-item-could-not-be-added", { menuBarConfig: o, addedItemConfig: r });
  }
}
function Cg(o, i, e, t) {
  let n = !1;
  return Yo(o.items, (r) => {
    for (const { groupId: s, items: a } of r.groups) {
      if (n) return;
      if (s === e) t === "start" ? (a.unshift(i), n = !0) : t === "end" && (a.push(i), n = !0);
      else {
        const l = a.findIndex((c) => ew(c) === e);
        l !== -1 && (t === "before" ? (a.splice(l, 0, i), n = !0) : t === "after" && (a.splice(l + 1, 0, i), n = !0));
      }
    }
  }), n;
}
function X_(o, i) {
  const e = i.isUsingDefaultConfig;
  let t = !1;
  i.items = i.items.filter((n) => !!n.groups.length || (ic(o, n, e), !1)), i.items.length ? (Yo(i.items, (n) => {
    n.groups = n.groups.filter((r) => !!r.items.length || (t = !0, !1));
    for (const r of n.groups) r.items = r.items.filter((s) => !(tw(s) && !s.groups.length) || (ic(o, s, e), t = !0, !1));
  }), t && X_(o, i)) : ic(o, o, e);
}
function ic(o, i, e) {
  e || ce("menu-bar-menu-empty", { menuBarConfig: o, emptyMenuConfig: i });
}
function Yo(o, i) {
  if (Array.isArray(o)) for (const t of o) e(t);
  function e(t) {
    i(t);
    for (const n of t.groups) for (const r of n.items) tw(r) && e(r);
  }
}
function NT(o) {
  return typeof o == "object" && "group" in o;
}
function RT(o) {
  return o.startsWith("start") ? "start" : o.startsWith("end") ? "end" : o.startsWith("after") ? "after" : "before";
}
function zT(o) {
  const i = o.match(/^[^:]+:(.+)/);
  return i ? i[1] : null;
}
function ew(o) {
  return typeof o == "string" ? o : o.menuId;
}
function tw(o) {
  return typeof o == "object" && "menuId" in o;
}
class BT extends xe() {
  constructor(e) {
    super();
    m(this, "editor");
    m(this, "componentFactory");
    m(this, "focusTracker");
    m(this, "tooltipManager");
    m(this, "poweredBy");
    m(this, "evaluationBadge");
    m(this, "ariaLiveAnnouncer");
    m(this, "isReady", !1);
    m(this, "_editableElementsMap", /* @__PURE__ */ new Map());
    m(this, "_focusableToolbarDefinitions", []);
    m(this, "_extraMenuBarElements", []);
    m(this, "_lastFocusedForeignElement", null);
    const t = e.editing.view;
    this.editor = e, this.componentFactory = new xT(e), this.focusTracker = new fe(), this.tooltipManager = new wd(e), this.poweredBy = new CT(e), this.evaluationBadge = new TT(e), this.ariaLiveAnnouncer = new ST(e), this.set("viewportOffset", this._readViewportOffsetFromConfig()), this.once("ready", () => {
      this._bindBodyCollectionWithFocusTracker(), this.isReady = !0;
    }), this.listenTo(t.document, "layoutChanged", this.update.bind(this)), this.listenTo(t, "scrollToTheSelection", this._handleScrollToTheSelection.bind(this)), this._initFocusTracking();
  }
  get element() {
    return null;
  }
  update() {
    this.fire("update");
  }
  destroy() {
    this.stopListening(), this.focusTracker.destroy(), this.tooltipManager.destroy(this.editor), this.poweredBy.destroy(), this.evaluationBadge.destroy();
    for (const e of this._editableElementsMap.values()) e.ckeditorInstance = null, this.editor.keystrokes.stopListening(e);
    this._editableElementsMap = /* @__PURE__ */ new Map(), this._focusableToolbarDefinitions = [];
  }
  setEditableElement(e, t) {
    this._editableElementsMap.set(e, t), t.ckeditorInstance || (t.ckeditorInstance = this.editor), this.focusTracker.add(t);
    const n = () => {
      this.editor.editing.view.getDomRoot(e) || this.editor.keystrokes.listenTo(t);
    };
    this.isReady ? n() : this.once("ready", n);
  }
  removeEditableElement(e) {
    const t = this._editableElementsMap.get(e);
    t && (this._editableElementsMap.delete(e), this.editor.keystrokes.stopListening(t), this.focusTracker.remove(t), t.ckeditorInstance = null);
  }
  getEditableElement(e = "main") {
    return this._editableElementsMap.get(e);
  }
  getEditableElementsNames() {
    return this._editableElementsMap.keys();
  }
  addToolbar(e, t = {}) {
    e.isRendered ? (this.focusTracker.add(e), this.editor.keystrokes.listenTo(e.element)) : e.once("render", () => {
      this.focusTracker.add(e), this.editor.keystrokes.listenTo(e.element);
    }), this._focusableToolbarDefinitions.push({ toolbarView: e, options: t });
  }
  extendMenuBar(e) {
    this._extraMenuBarElements.push(e);
  }
  get _editableElements() {
    return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.", { editorUI: this }), this._editableElementsMap;
  }
  initMenuBar(e) {
    const t = e.element;
    this.focusTracker.add(t), this.editor.keystrokes.listenTo(t);
    const n = LT(this.editor.config.get("menuBar") || {});
    e.fillFromConfig(n, this.componentFactory, this._extraMenuBarElements), this.editor.keystrokes.set("Esc", (r, s) => {
      t.contains(this.editor.ui.focusTracker.focusedElement) && (this._lastFocusedForeignElement ? (this._lastFocusedForeignElement.focus(), this._lastFocusedForeignElement = null) : this.editor.editing.view.focus(), s());
    }), this.editor.keystrokes.set("Alt+F9", (r, s) => {
      t.contains(this.editor.ui.focusTracker.focusedElement) || (this._saveLastFocusedForeignElement(), e.isFocusBorderEnabled = !0, e.focus(), s());
    });
  }
  _readViewportOffsetFromConfig() {
    const e = this.editor, t = e.config.get("ui.viewportOffset");
    if (t) return t;
    const n = e.config.get("toolbar.viewportTopOffset");
    return n ? (console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."), { top: n }) : { top: 0 };
  }
  _initFocusTracking() {
    const e = this.editor;
    let t;
    e.keystrokes.set("Alt+F10", (n, r) => {
      this._saveLastFocusedForeignElement();
      const s = this._getCurrentFocusedToolbarDefinition();
      s && t || (t = this._getFocusableCandidateToolbarDefinitions());
      for (let a = 0; a < t.length; a++) {
        const l = t.shift();
        if (t.push(l), l !== s && this._focusFocusableCandidateToolbar(l)) {
          s && s.options.afterBlur && s.options.afterBlur();
          break;
        }
      }
      r();
    }), e.keystrokes.set("Esc", (n, r) => {
      const s = this._getCurrentFocusedToolbarDefinition();
      s && (this._lastFocusedForeignElement ? (this._lastFocusedForeignElement.focus(), this._lastFocusedForeignElement = null) : e.editing.view.focus(), s.options.afterBlur && s.options.afterBlur(), r());
    });
  }
  _saveLastFocusedForeignElement() {
    const e = this.focusTracker.focusedElement;
    Array.from(this._editableElementsMap.values()).includes(e) && !Array.from(this.editor.editing.view.domRoots.values()).includes(e) && (this._lastFocusedForeignElement = e);
  }
  _getFocusableCandidateToolbarDefinitions() {
    const e = [];
    for (const t of this._focusableToolbarDefinitions) {
      const { toolbarView: n, options: r } = t;
      (an(n.element) || r.beforeFocus) && e.push(t);
    }
    return e.sort((t, n) => Ag(t) - Ag(n)), e;
  }
  _getCurrentFocusedToolbarDefinition() {
    for (const e of this._focusableToolbarDefinitions) if (e.toolbarView.element && e.toolbarView.element.contains(this.focusTracker.focusedElement)) return e;
    return null;
  }
  _focusFocusableCandidateToolbar(e) {
    const { toolbarView: t, options: { beforeFocus: n } } = e;
    return n && n(), !!an(t.element) && (t.focus(), !0);
  }
  _handleScrollToTheSelection(e, t) {
    const n = { top: 0, bottom: 0, left: 0, right: 0, ...this.viewportOffset };
    t.viewportOffset.top += n.top, t.viewportOffset.bottom += n.bottom, t.viewportOffset.left += n.left, t.viewportOffset.right += n.right;
  }
  _bindBodyCollectionWithFocusTracker() {
    const e = this.view.body;
    for (const t of e) this.focusTracker.add(t.element);
    e.on("add", (t, n) => {
      this.focusTracker.add(n.element);
    }), e.on("remove", (t, n) => {
      this.focusTracker.remove(n.element);
    });
  }
}
function Ag(o) {
  const { toolbarView: i, options: e } = o;
  let t = 10;
  return an(i.element) && t--, e.isContextual && (t -= 2), t;
}
class DT extends N {
  constructor(e) {
    super(e);
    m(this, "body");
    m(this, "menuBarView");
    m(this, "toolbar");
    this.body = new gd(e);
  }
  render() {
    super.render(), this.body.attachToDom();
  }
  destroy() {
    return this.body.detachFromDom(), super.destroy();
  }
}
class FT extends N {
  constructor(e, t, n) {
    super(e);
    m(this, "name", null);
    m(this, "_editingView");
    m(this, "_editableElement");
    m(this, "_hasExternalElement");
    this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-content", "ck-editor__editable", "ck-rounded-corners"], lang: e.contentLanguage, dir: e.contentLanguageDirection } }), this.set("isFocused", !1), this._editableElement = n, this._hasExternalElement = !!this._editableElement, this._editingView = t;
  }
  render() {
    super.render(), this._hasExternalElement ? this.template.apply(this.element = this._editableElement) : this._editableElement = this.element, this.on("change:isFocused", () => this._updateIsFocusedClasses()), this._updateIsFocusedClasses();
  }
  destroy() {
    this._hasExternalElement && this.template.revert(this._editableElement), super.destroy();
  }
  get hasExternalElement() {
    return this._hasExternalElement;
  }
  _updateIsFocusedClasses() {
    const e = this._editingView;
    function t(n) {
      e.change((r) => {
        const s = e.document.getRoot(n.name);
        r.addClass(n.isFocused ? "ck-focused" : "ck-blurred", s), r.removeClass(n.isFocused ? "ck-blurred" : "ck-focused", s);
      });
    }
    e.isRenderingInProgress ? function n(r) {
      e.once("change:isRenderingInProgress", (s, a, l) => {
        l ? n(r) : t(r);
      });
    }(this) : t(this);
  }
}
class jT extends FT {
  constructor(e, t, n, r = {}) {
    super(e, t, n);
    m(this, "_options");
    this._options = r, this.extendTemplate({ attributes: { role: "textbox", class: "ck-editor__editable_inline" } });
  }
  render() {
    super.render();
    const e = this._editingView;
    e.change((t) => {
      const n = e.document.getRoot(this.name);
      t.setAttribute("aria-label", this.getEditableAriaLabel(), n);
    });
  }
  getEditableAriaLabel() {
    const e = this.locale.t, t = this._options.label, n = this._editableElement, r = this.name;
    if (typeof t == "string") return t;
    if (typeof t == "object") return t[r];
    if (typeof t == "function") return t(this);
    if (n) {
      const s = n.getAttribute("aria-label");
      if (s) return s;
    }
    return e("Rich Text Editor. Editing area: %0", r);
  }
}
class Va extends N {
  constructor(e, t = {}) {
    super(e);
    m(this, "children");
    const n = this.bindTemplate;
    this.set("class", ["ck", "ck-form__row", ...De(t.class || [])]), this.children = this.createCollection(), t.children && t.children.forEach((r) => this.children.add(r)), this.set("_role", null), this.set("_ariaLabelledBy", null), t.labelView && this.set({ _role: "group", _ariaLabelledBy: t.labelView.id }), this.setTemplate({ tag: "div", attributes: { class: n.to("class", (r) => r.join(" ")), role: n.to("_role"), "aria-labelledby": n.to("_ariaLabelledBy") }, children: this.children });
  }
}
class Tg extends Rk {
  static get pluginName() {
    return "Notification";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this.on("show:warning", (i, e) => {
      window.alert(e.message);
    }, { priority: "lowest" });
  }
  showSuccess(i, e = {}) {
    this._showNotification({ message: i, type: "success", namespace: e.namespace, title: e.title });
  }
  showInfo(i, e = {}) {
    this._showNotification({ message: i, type: "info", namespace: e.namespace, title: e.title });
  }
  showWarning(i, e = {}) {
    this._showNotification({ message: i, type: "warning", namespace: e.namespace, title: e.title });
  }
  _showNotification(i) {
    const e = i.namespace ? `show:${i.type}:${i.namespace}` : `show:${i.type}`;
    this.fire(e, { message: i.message, type: i.type, title: i.title || "" });
  }
}
class cn extends xe() {
  constructor(i, e) {
    super(), e && kk(this, e), i && this.set(i);
  }
}
const Fs = Nn("px");
class Bi extends A {
  constructor(e) {
    super(e);
    m(this, "positionLimiter");
    m(this, "visibleStack");
    m(this, "_viewToStack", /* @__PURE__ */ new Map());
    m(this, "_idToStack", /* @__PURE__ */ new Map());
    m(this, "_view", null);
    m(this, "_rotatorView", null);
    m(this, "_fakePanelsView", null);
    this.positionLimiter = () => {
      const t = this.editor.editing.view, n = t.document.selection.editableElement;
      return n ? t.domConverter.mapViewToDom(n.root) : null;
    }, this.decorate("getPositionOptions"), this.set("visibleView", null), this.set("_numberOfStacks", 0), this.set("_singleViewMode", !1);
  }
  static get pluginName() {
    return "ContextualBalloon";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  destroy() {
    super.destroy(), this._view && this._view.destroy(), this._rotatorView && this._rotatorView.destroy(), this._fakePanelsView && this._fakePanelsView.destroy();
  }
  get view() {
    return this._view || this._createPanelView(), this._view;
  }
  hasView(e) {
    return Array.from(this._viewToStack.keys()).includes(e);
  }
  add(e) {
    if (this._view || this._createPanelView(), this.hasView(e.view)) throw new v("contextualballoon-add-view-exist", [this, e]);
    const t = e.stackId || "main";
    if (!this._idToStack.has(t)) return this._idToStack.set(t, /* @__PURE__ */ new Map([[e.view, e]])), this._viewToStack.set(e.view, this._idToStack.get(t)), this._numberOfStacks = this._idToStack.size, void (this._visibleStack && !e.singleViewMode || this.showStack(t));
    const n = this._idToStack.get(t);
    e.singleViewMode && this.showStack(t), n.set(e.view, e), this._viewToStack.set(e.view, n), n === this._visibleStack && this._showView(e);
  }
  remove(e) {
    if (!this.hasView(e)) throw new v("contextualballoon-remove-view-not-exist", [this, e]);
    const t = this._viewToStack.get(e);
    this._singleViewMode && this.visibleView === e && (this._singleViewMode = !1), this.visibleView === e && (t.size === 1 ? this._idToStack.size > 1 ? this._showNextStack() : (this.view.hide(), this.visibleView = null, this._rotatorView.hideView()) : this._showView(Array.from(t.values())[t.size - 2])), t.size === 1 ? (this._idToStack.delete(this._getStackId(t)), this._numberOfStacks = this._idToStack.size) : t.delete(e), this._viewToStack.delete(e);
  }
  updatePosition(e) {
    e && (this._visibleStack.get(this.visibleView).position = e), this.view.pin(this.getPositionOptions()), this._fakePanelsView.updatePosition();
  }
  getPositionOptions() {
    let e = Array.from(this._visibleStack.values()).pop().position;
    return e && (e.limiter || (e = Object.assign({}, e, { limiter: this.positionLimiter })), e = Object.assign({}, e, { viewportOffsetConfig: this.editor.ui.viewportOffset })), e;
  }
  showStack(e) {
    this.visibleStack = e;
    const t = this._idToStack.get(e);
    if (!t) throw new v("contextualballoon-showstack-stack-not-exist", this);
    this._visibleStack !== t && this._showView(Array.from(t.values()).pop());
  }
  _createPanelView() {
    this._view = new lt(this.editor.locale), this.editor.ui.view.body.add(this._view), this._rotatorView = this._createRotatorView(), this._fakePanelsView = this._createFakePanelsView();
  }
  get _visibleStack() {
    return this._viewToStack.get(this.visibleView);
  }
  _getStackId(e) {
    return Array.from(this._idToStack.entries()).find((t) => t[1] === e)[0];
  }
  _showNextStack() {
    const e = Array.from(this._idToStack.values());
    let t = e.indexOf(this._visibleStack) + 1;
    e[t] || (t = 0), this.showStack(this._getStackId(e[t]));
  }
  _showPrevStack() {
    const e = Array.from(this._idToStack.values());
    let t = e.indexOf(this._visibleStack) - 1;
    e[t] || (t = e.length - 1), this.showStack(this._getStackId(e[t]));
  }
  _createRotatorView() {
    const e = new HT(this.editor.locale), t = this.editor.locale.t;
    return this.view.content.add(e), e.bind("isNavigationVisible").to(this, "_numberOfStacks", this, "_singleViewMode", (n, r) => !r && n > 1), e.on("change:isNavigationVisible", () => this.updatePosition(), { priority: "low" }), e.bind("counter").to(this, "visibleView", this, "_numberOfStacks", (n, r) => {
      if (r < 2) return "";
      const s = Array.from(this._idToStack.values()).indexOf(this._visibleStack) + 1;
      return t("%0 of %1", [s, r]);
    }), e.buttonNextView.on("execute", () => {
      e.focusTracker.isFocused && this.editor.editing.view.focus(), this._showNextStack();
    }), e.buttonPrevView.on("execute", () => {
      e.focusTracker.isFocused && this.editor.editing.view.focus(), this._showPrevStack();
    }), e;
  }
  _createFakePanelsView() {
    const e = new $T(this.editor.locale, this.view);
    return e.bind("numberOfPanels").to(this, "_numberOfStacks", this, "_singleViewMode", (t, n) => !n && t >= 2 ? Math.min(t - 1, 2) : 0), e.listenTo(this.view, "change:top", () => e.updatePosition()), e.listenTo(this.view, "change:left", () => e.updatePosition()), this.editor.ui.view.body.add(e), e;
  }
  _showView({ view: e, balloonClassName: t = "", withArrow: n = !0, singleViewMode: r = !1 }) {
    this.view.class = t, this.view.withArrow = n, this._rotatorView.showView(e), this.visibleView = e, this.view.pin(this.getPositionOptions()), this._fakePanelsView.updatePosition(), r && (this._singleViewMode = !0);
  }
}
class HT extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker");
    m(this, "buttonPrevView");
    m(this, "buttonNextView");
    m(this, "content");
    const t = e.t, n = this.bindTemplate;
    this.set("isNavigationVisible", !0), this.focusTracker = new fe(), this.buttonPrevView = this._createButtonView(t("Previous"), ho), this.buttonNextView = this._createButtonView(t("Next"), I_), this.content = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-balloon-rotator"], "z-index": "-1" }, children: [{ tag: "div", attributes: { class: ["ck-balloon-rotator__navigation", n.to("isNavigationVisible", (r) => r ? "" : "ck-hidden")] }, children: [this.buttonPrevView, { tag: "span", attributes: { class: ["ck-balloon-rotator__counter"] }, children: [{ text: n.to("counter") }] }, this.buttonNextView] }, { tag: "div", attributes: { class: "ck-balloon-rotator__content" }, children: this.content }] });
  }
  render() {
    super.render(), this.focusTracker.add(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy();
  }
  showView(e) {
    this.hideView(), this.content.add(e);
  }
  hideView() {
    this.content.clear();
  }
  _createButtonView(e, t) {
    const n = new j(this.locale);
    return n.set({ label: e, icon: t, tooltip: !0 }), n;
  }
}
class $T extends N {
  constructor(e, t) {
    super(e);
    m(this, "content");
    m(this, "_balloonPanelView");
    const n = this.bindTemplate;
    this.set("top", 0), this.set("left", 0), this.set("height", 0), this.set("width", 0), this.set("numberOfPanels", 0), this.content = this.createCollection(), this._balloonPanelView = t, this.setTemplate({ tag: "div", attributes: { class: ["ck-fake-panel", n.to("numberOfPanels", (r) => r ? "" : "ck-hidden")], style: { top: n.to("top", Fs), left: n.to("left", Fs), width: n.to("width", Fs), height: n.to("height", Fs) } }, children: this.content }), this.on("change:numberOfPanels", (r, s, a, l) => {
      a > l ? this._addPanels(a - l) : this._removePanels(l - a), this.updatePosition();
    });
  }
  _addPanels(e) {
    for (; e--; ) {
      const t = new N();
      t.setTemplate({ tag: "div" }), this.content.add(t), this.registerChild(t);
    }
  }
  _removePanels(e) {
    for (; e--; ) {
      const t = this.content.last;
      this.content.remove(t), this.deregisterChild(t), t.destroy();
    }
  }
  updatePosition() {
    if (this.numberOfPanels) {
      const { top: e, left: t } = this._balloonPanelView, { width: n, height: r } = new K(this._balloonPanelView.element);
      Object.assign(this, { top: e, left: t, width: n, height: r });
    }
  }
}
class UT extends Ri {
  constructor(e, t) {
    const n = e.t, r = Object.assign({}, { showResetButton: !0, showIcon: !0, creator: Ln }, t);
    super(e, r.creator);
    m(this, "iconView");
    m(this, "resetButtonView");
    m(this, "_viewConfig");
    this.label = t.label, this._viewConfig = r, this._viewConfig.showIcon && (this.iconView = new ui(), this.iconView.content = oA, this.fieldWrapperChildren.add(this.iconView, 0), this.extendTemplate({ attributes: { class: "ck-search__query_with-icon" } })), this._viewConfig.showResetButton && (this.resetButtonView = new j(e), this.resetButtonView.set({ label: n("Clear"), icon: Lu, class: "ck-search__reset", isVisible: !1, tooltip: !0 }), this.resetButtonView.on("execute", () => {
      this.reset(), this.focus(), this.fire("reset");
    }), this.resetButtonView.bind("isVisible").to(this.fieldView, "isEmpty", (s) => !s), this.fieldWrapperChildren.add(this.resetButtonView), this.extendTemplate({ attributes: { class: "ck-search__query_with-reset" } }));
  }
  reset() {
    this.fieldView.reset(), this._viewConfig.showResetButton && (this.resetButtonView.isVisible = !1);
  }
}
class iw extends N {
  constructor() {
    super();
    const i = this.bindTemplate;
    this.set({ isVisible: !1, primaryText: "", secondaryText: "" }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-search__info", i.if("isVisible", "ck-hidden", (e) => !e)], tabindex: -1 }, children: [{ tag: "span", children: [{ text: [i.to("primaryText")] }] }, { tag: "span", children: [{ text: [i.to("secondaryText")] }] }] });
  }
  focus() {
    this.element.focus();
  }
}
class qT extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker");
    m(this, "children");
    m(this, "_focusCycler");
    this.children = this.createCollection(), this.focusTracker = new fe(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-search__results"], tabindex: -1 }, children: this.children }), this._focusCycler = new ut({ focusables: this.children, focusTracker: this.focusTracker });
  }
  render() {
    super.render();
    for (const e of this.children) this.focusTracker.add(e.element);
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  focusFirst() {
    this._focusCycler.focusFirst();
  }
  focusLast() {
    this._focusCycler.focusLast();
  }
}
class WT extends N {
  constructor(e, t) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "resultsView");
    m(this, "filteredView");
    m(this, "infoView");
    m(this, "queryView");
    m(this, "focusCycler");
    m(this, "_config");
    this._config = t, this.filteredView = t.filteredView, this.queryView = this._createSearchTextQueryView(), this.focusTracker = new fe(), this.keystrokes = new Le(), this.resultsView = new qT(e), this.children = this.createCollection(), this.focusableChildren = this.createCollection([this.queryView, this.resultsView]), this.set("isEnabled", !0), this.set("resultsCount", 0), this.set("totalItemsCount", 0), t.infoView && t.infoView.instance ? this.infoView = t.infoView.instance : (this.infoView = new iw(), this._enableDefaultInfoViewBehavior(), this.on("render", () => {
      this.search("");
    })), this.resultsView.children.addMany([this.infoView, this.filteredView]), this.focusCycler = new ut({ focusables: this.focusableChildren, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.on("search", (n, { resultsCount: r, totalItemsCount: s }) => {
      this.resultsCount = r, this.totalItemsCount = s;
    }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-search", t.class || null], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), this.children.addMany([this.queryView, this.resultsView]);
    const e = (t) => t.stopPropagation();
    for (const t of this.focusableChildren) this.focusTracker.add(t.element);
    this.keystrokes.listenTo(this.element), this.keystrokes.set("arrowright", e), this.keystrokes.set("arrowleft", e), this.keystrokes.set("arrowup", e), this.keystrokes.set("arrowdown", e);
  }
  focus() {
    this.queryView.focus();
  }
  reset() {
    this.queryView.reset(), this.search(""), this.filteredView.element.scrollTo(0, 0);
  }
  search(e) {
    const t = e ? new RegExp(wk(e), "ig") : null, n = this.filteredView.filter(t);
    this.fire("search", { query: e, ...n });
  }
  _createSearchTextQueryView() {
    const e = new UT(this.locale, this._config.queryView);
    return this.listenTo(e.fieldView, "input", () => {
      this.search(e.fieldView.element.value);
    }), e.on("reset", () => this.reset()), e.bind("isEnabled").to(this), e;
  }
  _enableDefaultInfoViewBehavior() {
    const e = this.locale.t, t = this.infoView;
    function n(r, { query: s, resultsCount: a, totalItemsCount: l }) {
      return typeof r == "function" ? r(s, a, l) : r;
    }
    this.on("search", (r, s) => {
      if (s.resultsCount) t.set({ isVisible: !1 });
      else {
        const a = this._config.infoView && this._config.infoView.text;
        let l, c;
        s.totalItemsCount ? a != null && a.notFound ? (l = a.notFound.primary, c = a.notFound.secondary) : (l = e("No results found"), c = "") : a != null && a.noSearchableItems ? (l = a.noSearchableItems.primary, c = a.noSearchableItems.secondary) : (l = e("No searchable items"), c = ""), t.set({ primaryText: n(l, s), secondaryText: n(c, s), isVisible: !0 });
      }
    });
  }
}
const GT = Nn("px");
class ZT extends A {
  constructor(e) {
    super(e);
    m(this, "toolbarView");
    m(this, "focusTracker");
    m(this, "_balloonConfig");
    m(this, "_resizeObserver", null);
    m(this, "_balloon");
    m(this, "_fireSelectionChangeDebounced");
    this._balloonConfig = Bu(e.config.get("balloonToolbar")), this.toolbarView = this._createToolbarView(), this.focusTracker = new fe(), this._trackFocusableEditableElements(), this.focusTracker.add(this.toolbarView), e.ui.addToolbar(this.toolbarView, { beforeFocus: () => this.show(!0), afterBlur: () => this.hide(), isContextual: !0 }), this._balloon = e.plugins.get(Bi), this._fireSelectionChangeDebounced = vi(() => this.fire("_selectionChangeDebounced"), 200), this.decorate("show");
  }
  static get pluginName() {
    return "BalloonToolbar";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Bi];
  }
  init() {
    const e = this.editor, t = e.model.document.selection;
    this.listenTo(this.focusTracker, "change:isFocused", (n, r, s) => {
      const a = this._balloon.visibleView === this.toolbarView;
      !s && a ? this.hide() : s && this.show();
    }), this.listenTo(t, "change:range", (n, r) => {
      (r.directChange || t.isCollapsed) && this.hide(), this._fireSelectionChangeDebounced();
    }), this.listenTo(this, "_selectionChangeDebounced", () => {
      this.editor.editing.view.document.isFocused && this.show();
    }), this._balloonConfig.shouldNotGroupWhenFull || this.listenTo(e, "ready", () => {
      const n = e.ui.view.editable.element;
      this._resizeObserver = new io(n, (r) => {
        this.toolbarView.maxWidth = GT(0.9 * r.contentRect.width);
      });
    }), this.listenTo(this.toolbarView, "groupedItemsUpdate", () => {
      this._updatePosition();
    }), e.ui.once("ready", () => {
      this.toolbarView.fillFromConfig(this._balloonConfig, this.editor.ui.componentFactory);
    });
  }
  _createToolbarView() {
    const e = this.editor.locale.t, t = !this._balloonConfig.shouldNotGroupWhenFull, n = new Ts(this.editor.locale, { shouldGroupWhenFull: t, isFloating: !0 });
    return n.ariaLabel = e("Editor contextual toolbar"), n.render(), n;
  }
  show(e = !1) {
    const t = this.editor, n = t.model.document.selection, r = t.model.schema;
    this._balloon.hasView(this.toolbarView) || n.isCollapsed && !e || function(s, a) {
      return s.rangeCount === 1 ? !1 : [...s.getRanges()].every((l) => {
        const c = l.getContainedElement();
        return c && a.isSelectable(c);
      });
    }(n, r) || Array.from(this.toolbarView.items).every((s) => s.isEnabled !== void 0 && !s.isEnabled) || (this.listenTo(this.editor.ui, "update", () => {
      this._updatePosition();
    }), this._balloon.add({ view: this.toolbarView, position: this._getBalloonPositionData(), balloonClassName: "ck-toolbar-container" }));
  }
  hide() {
    this._balloon.hasView(this.toolbarView) && (this.stopListening(this.editor.ui, "update"), this._balloon.remove(this.toolbarView));
  }
  _trackFocusableEditableElements() {
    const { editor: e, focusTracker: t } = this, { editing: n } = e;
    n.view.addObserver(class extends Ai {
      observe(r) {
        t.add(r);
      }
      stopObserving(r) {
        t.remove(r);
      }
    });
  }
  _getBalloonPositionData() {
    const e = this.editor.editing.view, t = e.document, n = t.selection, r = t.selection.isBackward;
    return { target: () => {
      const s = r ? n.getFirstRange() : n.getLastRange(), a = K.getDomRangeRects(e.domConverter.viewRangeToDom(s));
      return r ? a[0] : (a.length > 1 && a[a.length - 1].width === 0 && a.pop(), a[a.length - 1]);
    }, positions: this._getBalloonPositions(r) };
  }
  _updatePosition() {
    this._balloon.updatePosition(this._getBalloonPositionData());
  }
  destroy() {
    super.destroy(), this.stopListening(), this._fireSelectionChangeDebounced.cancel(), this.toolbarView.destroy(), this.focusTracker.destroy(), this._resizeObserver && this._resizeObserver.destroy();
  }
  _getBalloonPositions(e) {
    const t = q.isSafari && q.isiOS ? lt.generatePositions({ heightOffset: Math.max(lt.arrowHeightOffset, Math.round(20 / z.window.visualViewport.scale)) }) : lt.defaultPositions;
    return e ? [t.northWestArrowSouth, t.northWestArrowSouthWest, t.northWestArrowSouthEast, t.northWestArrowSouthMiddleEast, t.northWestArrowSouthMiddleWest, t.southWestArrowNorth, t.southWestArrowNorthWest, t.southWestArrowNorthEast, t.southWestArrowNorthMiddleWest, t.southWestArrowNorthMiddleEast] : [t.southEastArrowNorth, t.southEastArrowNorthEast, t.southEastArrowNorthWest, t.southEastArrowNorthMiddleEast, t.southEastArrowNorthMiddleWest, t.northEastArrowSouth, t.northEastArrowSouthEast, t.northEastArrowSouthWest, t.northEastArrowSouthMiddleEast, t.northEastArrowSouthMiddleWest];
  }
}
const Eg = Nn("px");
class KT extends j {
  constructor(i) {
    super(i);
    const e = this.bindTemplate;
    this.isVisible = !1, this.isToggleable = !0, this.set("top", 0), this.set("left", 0), this.extendTemplate({ attributes: { class: "ck-block-toolbar-button", style: { top: e.to("top", (t) => Eg(t)), left: e.to("left", (t) => Eg(t)) } } });
  }
}
const _r = Nn("px");
class YT extends A {
  constructor(e) {
    super(e);
    m(this, "toolbarView");
    m(this, "panelView");
    m(this, "buttonView");
    m(this, "_resizeObserver", null);
    m(this, "_blockToolbarConfig");
    this._blockToolbarConfig = Bu(this.editor.config.get("blockToolbar")), this.toolbarView = this._createToolbarView(), this.panelView = this._createPanelView(), this.buttonView = this._createButtonView(), zn({ emitter: this.panelView, contextElements: [this.panelView.element, this.buttonView.element], activator: () => this.panelView.isVisible, callback: () => this._hidePanel() });
  }
  static get pluginName() {
    return "BlockToolbar";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.t, n = t("Click to edit block"), r = t("Drag to move"), s = t("Edit block"), a = e.plugins.has("DragDropBlockToolbar"), l = a ? `${n}
${r}` : s;
    this.buttonView.label = l, a && (this.buttonView.element.dataset.ckeTooltipClass = "ck-tooltip_multi-line"), this.listenTo(e.model.document.selection, "change:range", (c, d) => {
      d.directChange && this._hidePanel();
    }), this.listenTo(e.ui, "update", () => this._updateButton()), this.listenTo(e, "change:isReadOnly", () => this._updateButton(), { priority: "low" }), this.listenTo(e.ui.focusTracker, "change:isFocused", () => this._updateButton()), this.listenTo(this.buttonView, "change:isVisible", (c, d, u) => {
      u ? this.buttonView.listenTo(window, "resize", () => this._updateButton()) : (this.buttonView.stopListening(window, "resize"), this._hidePanel());
    }), this._repositionButtonOnScroll(), e.ui.addToolbar(this.toolbarView, { beforeFocus: () => this._showPanel(), afterBlur: () => this._hidePanel() }), e.ui.once("ready", () => {
      this.toolbarView.fillFromConfig(this._blockToolbarConfig, this.editor.ui.componentFactory);
      for (const c of this.toolbarView.items) c.on("execute", () => this._hidePanel(!0), { priority: "high" });
    });
  }
  destroy() {
    super.destroy(), this.panelView.destroy(), this.buttonView.destroy(), this.toolbarView.destroy(), this._resizeObserver && this._resizeObserver.destroy();
  }
  _createToolbarView() {
    const e = this.editor.locale.t, t = !this._blockToolbarConfig.shouldNotGroupWhenFull, n = new Ts(this.editor.locale, { shouldGroupWhenFull: t, isFloating: !0 });
    return n.ariaLabel = e("Editor block content toolbar"), n;
  }
  _createPanelView() {
    const e = this.editor, t = new lt(e.locale);
    return t.content.add(this.toolbarView), t.class = "ck-toolbar-container", e.ui.view.body.add(t), this.toolbarView.keystrokes.set("Esc", (n, r) => {
      this._hidePanel(!0), r();
    }), t;
  }
  _createButtonView() {
    const e = this.editor, t = e.t, n = new KT(e.locale), r = this._blockToolbarConfig.icon, s = bd[r] || r || bd.dragIndicator;
    return n.set({ label: t("Edit block"), icon: s, withText: !1 }), n.bind("isOn").to(this.panelView, "isVisible"), n.bind("tooltip").to(this.panelView, "isVisible", (a) => !a), this.listenTo(n, "execute", () => {
      this.panelView.isVisible ? this._hidePanel(!0) : this._showPanel();
    }), this.listenTo(n, "change:isEnabled", (a, l, c) => {
      !c && this.panelView.isVisible && this._hidePanel(!1);
    }), e.ui.view.body.add(n), n;
  }
  _updateButton() {
    const e = this.editor, t = e.model, n = e.editing.view;
    if (!e.ui.focusTracker.isFocused) return void this._hideButton();
    if (!e.model.canEditAt(e.model.document.selection)) return void this._hideButton();
    const r = Array.from(t.document.selection.getSelectedBlocks())[0];
    if (!r || Array.from(this.toolbarView.items).every((a) => !a.isEnabled)) return void this._hideButton();
    const s = n.domConverter.mapViewToDom(e.editing.mapper.toViewElement(r));
    this.buttonView.isVisible = !0, this._setupToolbarResize(), this._attachButtonToElement(s), this.panelView.isVisible && this._showPanel();
  }
  _hideButton() {
    this.buttonView.isVisible = !1;
  }
  _showPanel() {
    if (!this.buttonView.isVisible) return;
    const e = this.panelView.isVisible;
    this.panelView.show();
    const t = this._getSelectedEditableElement();
    this.toolbarView.maxWidth = this._getToolbarMaxWidth(t), this.panelView.pin({ target: this.buttonView.element, limiter: t }), e || this.toolbarView.items.get(0).focus();
  }
  _getSelectedEditableElement() {
    const e = this.editor.model.document.selection.getFirstRange().root.rootName;
    return this.editor.ui.getEditableElement(e);
  }
  _hidePanel(e) {
    this.panelView.isVisible = !1, e && this.editor.editing.view.focus();
  }
  _repositionButtonOnScroll() {
    const { buttonView: e } = this;
    let t = !1;
    const n = (r, s) => {
      if (t) return;
      const a = this._getSelectedEditableElement();
      (s.target === z.document || Ak(a).includes(s.target)) && (t = !0, z.window.requestAnimationFrame(() => {
        this._updateButton(), t = !1;
      }));
    };
    e.on("change:isVisible", (r, s, a) => {
      a ? e.listenTo(z.document, "scroll", n, { useCapture: !0, usePassive: !0 }) : e.stopListening(z.document, "scroll", n);
    });
  }
  _attachButtonToElement(e) {
    const t = this.buttonView.element, n = this._getSelectedEditableElement(), r = window.getComputedStyle(e), s = new K(n), a = parseInt(r.paddingTop, 10), l = parseInt(r.lineHeight, 10) || 1.2 * parseInt(r.fontSize, 10), c = new K(t), d = new K(e);
    let u;
    u = this.editor.locale.uiLanguageDirection === "ltr" ? s.left - c.width : s.right;
    const h = d.top + a + (l - c.height) / 2;
    c.moveTo(u, h);
    const g = c.toAbsoluteRect();
    this.buttonView.top = g.top, this.buttonView.left = g.left, this._clipButtonToViewport(this.buttonView, n);
  }
  _clipButtonToViewport(e, t) {
    const n = new K(e.element), r = new K(t).getVisible(), s = (...l) => {
      e.element.style.clipPath = l.length ? `polygon(${l.join(",")})` : "";
    }, a = (l) => {
      e.isEnabled = !l, e.element.style.pointerEvents = l ? "none" : "";
    };
    if (r && r.bottom < n.bottom) {
      const l = Math.min(n.height, n.bottom - r.bottom);
      a(l >= n.height), s("0 0", "100% 0", `100% calc(100% - ${_r(l)})`, `0 calc(100% - ${_r(l)}`);
    } else if (r && r.top > n.top) {
      const l = Math.min(n.height, r.top - n.top);
      a(l >= n.height), s(`0 ${_r(l)}`, `100% ${_r(l)}`, "100% 100%", "0 100%");
    } else a(!1), s();
  }
  _setupToolbarResize() {
    const e = this._getSelectedEditableElement();
    this._blockToolbarConfig.shouldNotGroupWhenFull || (this._resizeObserver && this._resizeObserver.element !== e && (this._resizeObserver.destroy(), this._resizeObserver = null), this._resizeObserver || (this._resizeObserver = new io(e, () => {
      this.toolbarView.maxWidth = this._getToolbarMaxWidth(e);
    })));
  }
  _getToolbarMaxWidth(e) {
    const t = new K(e), n = new K(this.buttonView.element), r = this.editor.locale.uiLanguageDirection === "rtl" ? n.left - t.right + n.width : t.left - n.left;
    return _r(t.width + r);
  }
}
class QT extends nr {
  constructor(e) {
    super(e);
    m(this, "arrowView");
    const t = this.bindTemplate;
    this.set({ withText: !0, role: "menuitem" }), this.arrowView = this._createArrowView(), this.extendTemplate({ attributes: { class: ["ck-menu-bar__menu__button"], "aria-haspopup": !0, "aria-expanded": this.bindTemplate.to("isOn", (n) => String(n)), "data-cke-tooltip-disabled": t.to("isOn") }, on: { mouseenter: t.to("mouseenter") } });
  }
  render() {
    super.render(), this.children.add(this.arrowView);
  }
  _createArrowView() {
    const e = new ui();
    return e.content = gl, e.extendTemplate({ attributes: { class: "ck-menu-bar__menu__button__arrow" } }), e;
  }
}
class JT extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    const t = this.bindTemplate;
    this.set("isVisible", !1), this.set("position", "se"), this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-reset", "ck-menu-bar__menu__panel", t.to("position", (n) => `ck-menu-bar__menu__panel_position_${n}`), t.if("isVisible", "ck-hidden", (n) => !n)], tabindex: "-1" }, children: this.children, on: { selectstart: t.to((n) => {
      n.target.tagName.toLocaleLowerCase() !== "input" && n.preventDefault();
    }) } });
  }
  focus(e = 1) {
    this.children.length && (e === 1 ? this.children.first.focus() : this.children.last.focus());
  }
}
const Ka = class Ka extends N {
  constructor(e) {
    super(e);
    m(this, "buttonView");
    m(this, "panelView");
    m(this, "focusTracker");
    m(this, "keystrokes");
    const t = this.bindTemplate;
    this.buttonView = new QT(e), this.buttonView.delegate("mouseenter").to(this), this.buttonView.bind("isOn", "isEnabled").to(this, "isOpen", "isEnabled"), this.panelView = new JT(e), this.panelView.bind("isVisible").to(this, "isOpen"), this.keystrokes = new Le(), this.focusTracker = new fe(), this.set("isOpen", !1), this.set("isEnabled", !0), this.set("panelPosition", "w"), this.set("class", void 0), this.set("parentMenuView", null), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-menu-bar__menu", t.to("class"), t.if("isEnabled", "ck-disabled", (n) => !n), t.if("parentMenuView", "ck-menu-bar__menu_top-level", (n) => !n)] }, children: [this.buttonView, this.panelView] });
  }
  render() {
    super.render(), this.focusTracker.add(this.buttonView.element), this.focusTracker.add(this.panelView.element), this.keystrokes.listenTo(this.element), fn.closeOnEscKey(this), this._repositionPanelOnOpen();
  }
  _attachBehaviors() {
    this.parentMenuView ? (fn.openOnButtonClick(this), fn.openOnArrowRightKey(this), fn.closeOnArrowLeftKey(this), fn.openAndFocusOnEnterKeyPress(this), fn.closeOnParentClose(this)) : (this._propagateArrowKeystrokeEvents(), fn.openAndFocusPanelOnArrowDownKey(this), fn.toggleOnButtonClick(this));
  }
  _propagateArrowKeystrokeEvents() {
    this.keystrokes.set("arrowright", (e, t) => {
      this.fire("arrowright"), t();
    }), this.keystrokes.set("arrowleft", (e, t) => {
      this.fire("arrowleft"), t();
    });
  }
  _repositionPanelOnOpen() {
    this.on("change:isOpen", (e, t, n) => {
      if (!n) return;
      const r = Ka._getOptimalPosition({ element: this.panelView.element, target: this.buttonView.element, fitInViewport: !0, positions: this._panelPositions });
      this.panelView.position = r ? r.name : this._defaultMenuPositionName;
    });
  }
  focus() {
    this.buttonView.focus();
  }
  get _panelPositions() {
    const { southEast: e, southWest: t, northEast: n, northWest: r, westSouth: s, eastSouth: a, westNorth: l, eastNorth: c } = MT;
    return this.locale.uiLanguageDirection === "ltr" ? this.parentMenuView ? [a, c, s, l] : [e, t, n, r] : this.parentMenuView ? [s, l, a, c] : [t, e, r, n];
  }
  get _defaultMenuPositionName() {
    return this.locale.uiLanguageDirection === "ltr" ? this.parentMenuView ? "es" : "se" : this.parentMenuView ? "ws" : "sw";
  }
};
m(Ka, "_getOptimalPosition", gu);
let Vt = Ka;
class dn extends go {
  constructor(i) {
    super(i), this.role = "menu", this.items.on("change", this._setItemsCheckSpace.bind(this));
  }
  _setItemsCheckSpace() {
    const i = Array.from(this.items).some((e) => {
      const t = Sg(e);
      return t && t.isToggleable;
    });
    this.items.forEach((e) => {
      const t = Sg(e);
      t && (t.hasCheckSpace = i);
    });
  }
}
function Sg(o) {
  return o instanceof hi ? o.children.map((i) => function(e) {
    return typeof e == "object" && "buttonView" in e && e.buttonView instanceof j;
  }(i) ? i.buttonView : i).find((i) => i instanceof nr) : null;
}
class nw extends UA {
  constructor(i) {
    super(i), this.set({ withText: !0, withKeystroke: !0, tooltip: !1, role: "menuitem" }), this.extendTemplate({ attributes: { class: ["ck-menu-bar__menu__item__button"] } });
  }
}
const Ig = ["mouseenter", "arrowleft", "arrowright", "change:isOpen"];
class XT extends N {
  constructor(e) {
    super(e);
    m(this, "children");
    m(this, "menus", []);
    const t = e.t, n = this.bindTemplate;
    this.set({ isOpen: !1, isFocusBorderEnabled: !1 }), this._setupIsOpenUpdater(), this.children = this.createCollection(), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-menu-bar", n.if("isFocusBorderEnabled", "ck-menu-bar_focus-border-enabled")], "aria-label": t("Editor menu bar"), role: "menubar" }, children: this.children });
  }
  fillFromConfig(e, t, n = []) {
    const r = OT({ normalizedConfig: e, locale: this.locale, componentFactory: t, extraItems: n }).items.map((s) => this._createMenu({ componentFactory: t, menuDefinition: s }));
    this.children.addMany(r);
  }
  render() {
    super.render(), Ao.toggleMenusAndFocusItemsOnHover(this), Ao.closeMenusWhenTheBarCloses(this), Ao.closeMenuWhenAnotherOnTheSameLevelOpens(this), Ao.focusCycleMenusOnArrows(this), Ao.closeOnClickOutside(this), Ao.enableFocusHighlightOnInteraction(this);
  }
  focus() {
    this.children.first && this.children.first.focus();
  }
  close() {
    for (const e of this.children) e.isOpen = !1;
  }
  disable() {
    for (const e of this.children) e.isEnabled = !1;
  }
  enable() {
    for (const e of this.children) e.isEnabled = !0;
  }
  registerMenu(e, t = null) {
    t ? (e.delegate(...Ig).to(t), e.parentMenuView = t) : e.delegate(...Ig).to(this, (n) => "menu:" + n), e._attachBehaviors(), this.menus.push(e);
  }
  _createMenu({ componentFactory: e, menuDefinition: t, parentMenuView: n }) {
    const r = this.locale, s = new Vt(r);
    return this.registerMenu(s, n), s.buttonView.set({ label: t.label }), s.once("change:isOpen", () => {
      const a = new dn(r);
      a.ariaLabel = t.label, s.panelView.children.add(a), a.items.addMany(this._createMenuItems({ menuDefinition: t, parentMenuView: s, componentFactory: e }));
    }), s;
  }
  _createMenuItems({ menuDefinition: e, parentMenuView: t, componentFactory: n }) {
    const r = this.locale, s = [];
    for (const a of e.groups) {
      for (const l of a.items) {
        const c = new zi(r, t);
        if (wi(l)) c.children.add(this._createMenu({ componentFactory: n, menuDefinition: l, parentMenuView: t }));
        else {
          const d = this._createMenuItemContentFromFactory({ componentName: l, componentFactory: n, parentMenuView: t });
          if (!d) continue;
          c.children.add(d);
        }
        s.push(c);
      }
      a !== e.groups[e.groups.length - 1] && s.push(new pl(r));
    }
    return s;
  }
  _createMenuItemContentFromFactory({ componentName: e, parentMenuView: t, componentFactory: n }) {
    const r = n.create(e);
    return r instanceof Vt || r instanceof Ie || r instanceof nw ? (this._registerMenuTree(r, t), r.on("execute", () => {
      this.close();
    }), r) : (ce("menu-bar-component-unsupported", { componentName: e, componentView: r }), null);
  }
  _registerMenuTree(e, t) {
    if (!(e instanceof Vt)) return void e.delegate("mouseenter").to(t);
    this.registerMenu(e, t);
    const n = e.panelView.children.filter((s) => s instanceof dn)[0];
    if (!n) return void e.delegate("mouseenter").to(t);
    const r = n.items.filter((s) => s instanceof hi);
    for (const s of r) this._registerMenuTree(s.children.get(0), e);
  }
  _setupIsOpenUpdater() {
    let e;
    this.on("menu:change:isOpen", (t, n, r) => {
      clearTimeout(e), r ? this.isOpen = !0 : e = setTimeout(() => {
        this.isOpen = Array.from(this.children).some((s) => s.isOpen);
      }, 0);
    });
  }
}
const wr = /* @__PURE__ */ new Map([["left", A_], ["right", LC], ["center", MC], ["justify", VC]]);
class eE extends A {
  get localizedOptionTitles() {
    const i = this.editor.t;
    return { left: i("Align left"), right: i("Align right"), center: i("Align center"), justify: i("Justify") };
  }
  static get pluginName() {
    return "AlignmentUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = w_(this.editor.config.get("alignment.options"));
    i.map((e) => e.name).filter(k_).forEach((e) => this._addButton(e)), this._addToolbarDropdown(i), this._addMenuBarMenu(i);
  }
  _addButton(i) {
    this.editor.ui.componentFactory.add(`alignment:${i}`, (e) => this._createButton(e, i));
  }
  _createButton(i, e, t = {}) {
    const n = this.editor, r = n.commands.get("alignment"), s = new j(i);
    return s.set({ label: this.localizedOptionTitles[e], icon: wr.get(e), tooltip: !0, isToggleable: !0, ...t }), s.bind("isEnabled").to(r), s.bind("isOn").to(r, "value", (a) => a === e), this.listenTo(s, "execute", () => {
      n.execute("alignment", { value: e }), n.editing.view.focus();
    }), s;
  }
  _addToolbarDropdown(i) {
    const e = this.editor;
    e.ui.componentFactory.add("alignment", (t) => {
      const n = ft(t), r = t.uiLanguageDirection === "rtl" ? "w" : "e", s = t.t;
      Es(n, () => i.map((c) => this._createButton(t, c.name, { tooltipPosition: r })), { enableActiveItemFocusOnDropdownOpen: !0, isVertical: !0, ariaLabel: s("Text alignment toolbar") }), n.buttonView.set({ label: s("Text alignment"), tooltip: !0 }), n.extendTemplate({ attributes: { class: "ck-alignment-dropdown" } });
      const a = t.contentLanguageDirection === "rtl" ? wr.get("right") : wr.get("left"), l = e.commands.get("alignment");
      return n.buttonView.bind("icon").to(l, "value", (c) => wr.get(c) || a), n.bind("isEnabled").to(l, "isEnabled"), this.listenTo(n, "execute", () => {
        e.editing.view.focus();
      }), n;
    });
  }
  _addMenuBarMenu(i) {
    const e = this.editor;
    e.ui.componentFactory.add("menuBar:alignment", (t) => {
      const n = e.commands.get("alignment"), r = t.t, s = new Vt(t), a = new dn(t);
      s.bind("isEnabled").to(n), a.set({ ariaLabel: r("Text alignment"), role: "menu" }), s.buttonView.set({ label: r("Text alignment") });
      for (const l of i) {
        const c = new zi(t, s), d = new Ie(t);
        d.delegate("execute").to(s), d.set({ label: this.localizedOptionTitles[l.name], icon: wr.get(l.name), role: "menuitemcheckbox", isToggleable: !0 }), d.on("execute", () => {
          e.execute("alignment", { value: l.name }), e.editing.view.focus();
        }), d.bind("isOn").to(n, "value", (u) => u === l.name), d.bind("isEnabled").to(n, "isEnabled"), c.children.add(d), a.items.add(c);
      }
      return s.panelView.children.add(a), s;
    });
  }
}
class tE extends A {
  static get requires() {
    return [TC, eE];
  }
  static get pluginName() {
    return "Alignment";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class ow {
  constructor(i, e = 20) {
    m(this, "model");
    m(this, "limit");
    m(this, "_isLocked");
    m(this, "_size");
    m(this, "_batch", null);
    m(this, "_changeCallback");
    m(this, "_selectionChangeCallback");
    this.model = i, this._size = 0, this.limit = e, this._isLocked = !1, this._changeCallback = (t, n) => {
      n.isLocal && n.isUndoable && n !== this._batch && this._reset(!0);
    }, this._selectionChangeCallback = () => {
      this._reset();
    }, this.model.document.on("change", this._changeCallback), this.model.document.selection.on("change:range", this._selectionChangeCallback), this.model.document.selection.on("change:attribute", this._selectionChangeCallback);
  }
  get batch() {
    return this._batch || (this._batch = this.model.createBatch({ isTyping: !0 })), this._batch;
  }
  get size() {
    return this._size;
  }
  input(i) {
    this._size += i, this._size >= this.limit && this._reset(!0);
  }
  get isLocked() {
    return this._isLocked;
  }
  lock() {
    this._isLocked = !0;
  }
  unlock() {
    this._isLocked = !1;
  }
  destroy() {
    this.model.document.off("change", this._changeCallback), this.model.document.selection.off("change:range", this._selectionChangeCallback), this.model.document.selection.off("change:attribute", this._selectionChangeCallback);
  }
  _reset(i = !1) {
    this.isLocked && !i || (this._batch = null, this._size = 0);
  }
}
class iE extends G {
  constructor(e, t) {
    super(e);
    m(this, "_buffer");
    this._buffer = new ow(e.model, t), this._isEnabledBasedOnSelection = !1;
  }
  get buffer() {
    return this._buffer;
  }
  destroy() {
    super.destroy(), this._buffer.destroy();
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document, r = e.text || "", s = r.length;
    let a = n.selection;
    if (e.selection ? a = e.selection : e.range && (a = t.createSelection(e.range)), !t.canEditAt(a)) return;
    const l = e.resultRange;
    t.enqueueChange(this._buffer.batch, (c) => {
      this._buffer.lock();
      const d = Array.from(n.selection.getAttributes());
      t.deleteContent(a), r && t.insertContent(c.createText(r, d), a), l ? c.setSelection(l) : a.is("documentSelection") || c.setSelection(a), this._buffer.unlock(), this._buffer.input(s);
    });
  }
}
const rw = ["insertText", "insertReplacementText"], nE = [...rw, "insertCompositionText"];
class oE extends Ai {
  constructor(e) {
    super(e);
    m(this, "focusObserver");
    this.focusObserver = e.getObserver(Ta);
    const t = q.isAndroid ? nE : rw, n = e.document;
    n.on("beforeinput", (r, s) => {
      if (!this.isEnabled) return;
      const { data: a, targetRanges: l, inputType: c, domEvent: d } = s;
      if (!t.includes(c)) return;
      this.focusObserver.flush();
      const u = new sn(n, "insertText");
      n.fire(u, new tr(e, d, { text: a, selection: e.createSelection(l) })), u.stop.called && r.stop();
    }), q.isAndroid || n.on("compositionend", (r, { data: s, domEvent: a }) => {
      this.isEnabled && s && n.fire("insertText", new tr(e, a, { text: s }));
    }, { priority: "lowest" });
  }
  observe() {
  }
  stopObserving() {
  }
}
class sw extends A {
  constructor() {
    super(...arguments);
    m(this, "_compositionQueue");
  }
  static get pluginName() {
    return "Input";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model, n = e.editing.view, r = e.editing.mapper, s = t.document.selection;
    this._compositionQueue = new rE(e), n.addObserver(oE);
    const a = new iE(e, e.config.get("typing.undoStep") || 20);
    e.commands.add("insertText", a), e.commands.add("input", a), this.listenTo(n.document, "insertText", (l, c) => {
      n.document.isComposing || c.preventDefault(), q.isAndroid && n.document.isComposing && this._compositionQueue.flush("next beforeinput");
      const { text: d, selection: u } = c;
      let h;
      h = u ? Array.from(u.getRanges()).map((f) => r.toModelRange(f)) : Array.from(s.getRanges());
      let g = d;
      if (q.isAndroid) {
        const f = Array.from(h[0].getItems()).reduce((b, k) => b + (k.is("$textProxy") ? k.data : ""), "");
        if (f && (f.length <= g.length ? g.startsWith(f) && (g = g.substring(f.length), h[0].start = h[0].start.getShiftedBy(f.length)) : f.startsWith(g) && (h[0].start = h[0].start.getShiftedBy(g.length), g = "")), g.length == 0 && h[0].isCollapsed) return;
      }
      const p = { text: g, selection: t.createSelection(h) };
      q.isAndroid && n.document.isComposing ? this._compositionQueue.push(p) : (e.execute("insertText", p), n.scrollToTheSelection());
    }), q.isAndroid ? this.listenTo(n.document, "keydown", (l, c) => {
      !s.isCollapsed && c.keyCode == 229 && n.document.isComposing && Pg(t, a);
    }) : this.listenTo(n.document, "compositionstart", () => {
      s.isCollapsed || Pg(t, a);
    }), q.isAndroid ? (this.listenTo(n.document, "mutations", (l, { mutations: c }) => {
      if (n.document.isComposing) for (const { node: d } of c) {
        const u = sE(d, r), h = r.toModelElement(u);
        if (this._compositionQueue.isComposedElement(h)) return void this._compositionQueue.flush("mutations");
      }
    }), this.listenTo(n.document, "compositionend", () => {
      this._compositionQueue.flush("composition end");
    }), this.listenTo(n.document, "compositionend", () => {
      const l = [];
      for (const c of this._compositionQueue.flushComposedElements()) {
        const d = r.toViewElement(c);
        d && l.push({ type: "children", node: d });
      }
      l.length && n.document.fire("mutations", { mutations: l });
    }, { priority: "lowest" })) : this.listenTo(n.document, "compositionend", () => {
      n.document.fire("mutations", { mutations: [] });
    }, { priority: "lowest" });
  }
  destroy() {
    super.destroy(), this._compositionQueue.destroy();
  }
}
class rE {
  constructor(i) {
    m(this, "editor");
    m(this, "flushDebounced", vi(() => this.flush("timeout"), 50));
    m(this, "_queue", []);
    m(this, "_compositionElements", /* @__PURE__ */ new Set());
    this.editor = i;
  }
  destroy() {
    for (this.flushDebounced.cancel(), this._compositionElements.clear(); this._queue.length; ) this.shift();
  }
  get length() {
    return this._queue.length;
  }
  push(i) {
    const e = { text: i.text };
    if (i.selection) {
      e.selectionRanges = [];
      for (const t of i.selection.getRanges()) e.selectionRanges.push(Mt.fromRange(t)), this._compositionElements.add(t.start.parent);
    }
    this._queue.push(e), this.flushDebounced();
  }
  shift() {
    const i = this._queue.shift(), e = { text: i.text };
    if (i.selectionRanges) {
      const t = i.selectionRanges.map((n) => function(r) {
        const s = r.toRange();
        return r.detach(), s.root.rootName == "$graveyard" ? null : s;
      }(n)).filter((n) => !!n);
      t.length && (e.selection = this.editor.model.createSelection(t));
    }
    return e;
  }
  flush(i) {
    const e = this.editor, t = e.model, n = e.editing.view;
    if (this.flushDebounced.cancel(), !this._queue.length) return;
    const r = e.commands.get("insertText").buffer;
    t.enqueueChange(r.batch, () => {
      for (r.lock(); this._queue.length; ) {
        const s = this.shift();
        e.execute("insertText", s);
      }
      r.unlock();
    }), n.scrollToTheSelection();
  }
  isComposedElement(i) {
    return this._compositionElements.has(i);
  }
  flushComposedElements() {
    const i = Array.from(this._compositionElements);
    return this._compositionElements.clear(), i;
  }
}
function Pg(o, i) {
  if (!i.isEnabled) return;
  const e = i.buffer;
  e.lock(), o.enqueueChange(e.batch, () => {
    o.deleteContent(o.document.selection);
  }), e.unlock();
}
function sE(o, i) {
  let e = o.is("$text") ? o.parent : o;
  for (; !i.toModelElement(e); ) e = e.parent;
  return e;
}
class Mg extends G {
  constructor(e, t) {
    super(e);
    m(this, "direction");
    m(this, "_buffer");
    this.direction = t, this._buffer = new ow(e.model, e.config.get("typing.undoStep")), this._isEnabledBasedOnSelection = !1;
  }
  get buffer() {
    return this._buffer;
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document;
    t.enqueueChange(this._buffer.batch, (r) => {
      this._buffer.lock();
      const s = r.createSelection(e.selection || n.selection);
      if (!t.canEditAt(s)) return;
      const a = e.sequence || 1, l = s.isCollapsed;
      if (s.isCollapsed && t.modifySelection(s, { direction: this.direction, unit: e.unit, treatEmojiAsSingleUnit: !0 }), this._shouldEntireContentBeReplacedWithParagraph(a)) return void this._replaceEntireContentWithParagraph(r);
      if (this._shouldReplaceFirstBlockWithParagraph(s, a)) return void this.editor.execute("paragraph", { selection: s });
      if (s.isCollapsed) return;
      let c = 0;
      s.getFirstRange().getMinimalFlatRanges().forEach((d) => {
        c += Yc(d.getWalker({ singleCharacters: !0, ignoreElementEnd: !0, shallow: !0 }));
      }), t.deleteContent(s, { doNotResetEntireContent: l, direction: this.direction }), this._buffer.input(c), r.setSelection(s), this._buffer.unlock();
    });
  }
  _shouldEntireContentBeReplacedWithParagraph(e) {
    if (e > 1) return !1;
    const t = this.editor.model, n = t.document.selection, r = t.schema.getLimitElement(n);
    if (!(n.isCollapsed && n.containsEntireContent(r)) || !t.schema.checkChild(r, "paragraph")) return !1;
    const s = r.getChild(0);
    return !s || !s.is("element", "paragraph");
  }
  _replaceEntireContentWithParagraph(e) {
    const t = this.editor.model, n = t.document.selection, r = t.schema.getLimitElement(n), s = e.createElement("paragraph");
    e.remove(e.createRangeIn(r)), e.insert(s, r), e.setSelection(s, 0);
  }
  _shouldReplaceFirstBlockWithParagraph(e, t) {
    const n = this.editor.model;
    if (t > 1 || this.direction != "backward" || !e.isCollapsed) return !1;
    const r = e.getFirstPosition(), s = n.schema.getLimitElement(r), a = s.getChild(0);
    return r.parent == a && !!e.containsEntireContent(a) && !!n.schema.checkChild(s, "paragraph") && a.name != "paragraph";
  }
}
const Vg = "word", yn = "selection", Oo = "backward", Vr = "forward", Lg = { deleteContent: { unit: yn, direction: Oo }, deleteContentBackward: { unit: "codePoint", direction: Oo }, deleteWordBackward: { unit: Vg, direction: Oo }, deleteHardLineBackward: { unit: yn, direction: Oo }, deleteSoftLineBackward: { unit: yn, direction: Oo }, deleteContentForward: { unit: "character", direction: Vr }, deleteWordForward: { unit: Vg, direction: Vr }, deleteHardLineForward: { unit: yn, direction: Vr }, deleteSoftLineForward: { unit: yn, direction: Vr } };
class aE extends Ai {
  constructor(i) {
    super(i);
    const e = i.document;
    let t = 0;
    e.on("keydown", () => {
      t++;
    }), e.on("keyup", () => {
      t = 0;
    }), e.on("beforeinput", (n, r) => {
      if (!this.isEnabled) return;
      const { targetRanges: s, domEvent: a, inputType: l } = r, c = Lg[l];
      if (!c) return;
      const d = { direction: c.direction, unit: c.unit, sequence: t };
      d.unit == yn && (d.selectionToRemove = i.createSelection(s[0])), l === "deleteContentBackward" && (q.isAndroid && (d.sequence = 1), function(h) {
        if (h.length != 1 || h[0].isCollapsed) return !1;
        const g = h[0].getWalker({ direction: "backward", singleCharacters: !0, ignoreElementEnd: !0 });
        let p = 0;
        for (const { nextPosition: f, item: b } of g) {
          if (f.parent.is("$text")) {
            const k = f.parent.data, _ = f.offset;
            if (ku(k, _) || _u(k, _) || Ok(k, _)) continue;
            p++;
          } else (b.is("containerElement") || b.is("emptyElement")) && p++;
          if (p > 1) return !0;
        }
        return !1;
      }(s) && (d.unit = yn, d.selectionToRemove = i.createSelection(s)));
      const u = new er(e, "delete", s[0]);
      e.fire(u, new tr(i, a, d)), u.stop.called && n.stop();
    }), q.isBlink && function(n) {
      const r = n.view, s = r.document;
      let a = null, l = !1;
      function c(u) {
        return u == ne.backspace || u == ne.delete;
      }
      function d(u) {
        return u == ne.backspace ? Oo : Vr;
      }
      s.on("keydown", (u, { keyCode: h }) => {
        a = h, l = !1;
      }), s.on("keyup", (u, { keyCode: h, domEvent: g }) => {
        const p = s.selection, f = n.isEnabled && h == a && c(h) && !p.isCollapsed && !l;
        if (a = null, f) {
          const b = p.getFirstRange(), k = new er(s, "delete", b), _ = { unit: yn, direction: d(h), selectionToRemove: p };
          s.fire(k, new tr(r, g, _));
        }
      }), s.on("beforeinput", (u, { inputType: h }) => {
        const g = Lg[h];
        c(a) && g && g.direction == d(a) && (l = !0);
      }, { priority: "high" }), s.on("beforeinput", (u, { inputType: h, data: g }) => {
        a == ne.delete && h == "insertText" && g == "" && u.stop();
      }, { priority: "high" });
    }(this);
  }
  observe() {
  }
  stopObserving() {
  }
}
class Di extends A {
  constructor() {
    super(...arguments);
    m(this, "_undoOnBackspace");
  }
  static get pluginName() {
    return "Delete";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.editing.view, n = t.document, r = e.model.document;
    t.addObserver(aE), this._undoOnBackspace = !1;
    const s = new Mg(e, "forward");
    e.commands.add("deleteForward", s), e.commands.add("forwardDelete", s), e.commands.add("delete", new Mg(e, "backward")), this.listenTo(n, "delete", (a, l) => {
      n.isComposing || l.preventDefault();
      const { direction: c, sequence: d, selectionToRemove: u, unit: h } = l, g = c === "forward" ? "deleteForward" : "delete", p = { sequence: d };
      if (h == "selection") {
        const f = Array.from(u.getRanges()).map((b) => e.editing.mapper.toModelRange(b));
        p.selection = e.model.createSelection(f);
      } else p.unit = h;
      e.execute(g, p), t.scrollToTheSelection();
    }, { priority: "low" }), this.listenTo(n, "keydown", (a, l) => {
      if (n.isComposing || l.keyCode != ne.backspace || !r.selection.isCollapsed) return;
      const c = e.model.schema.getLimitElement(r.selection);
      e.model.createPositionAt(c, 0).isTouching(r.selection.getFirstPosition()) && l.preventDefault();
    }), this.editor.plugins.has("UndoEditing") && (this.listenTo(n, "delete", (a, l) => {
      this._undoOnBackspace && l.direction == "backward" && l.sequence == 1 && l.unit == "codePoint" && (this._undoOnBackspace = !1, e.execute("undo"), l.preventDefault(), a.stop());
    }, { context: "$capture" }), this.listenTo(r, "change", () => {
      this._undoOnBackspace = !1;
    }));
  }
  requestUndoOnBackspace() {
    this.editor.plugins.has("UndoEditing") && (this._undoOnBackspace = !0);
  }
}
class bl extends A {
  static get requires() {
    return [sw, Di];
  }
  static get pluginName() {
    return "Typing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function aw(o, i) {
  let e = o.start;
  return { text: Array.from(o.getWalker({ ignoreElementEnd: !1 })).reduce((t, { item: n }) => n.is("$text") || n.is("$textProxy") ? t + n.data : (e = i.createPositionAfter(n), ""), ""), range: i.createRange(e, o.end) };
}
class lw extends xe() {
  constructor(e, t) {
    super();
    m(this, "model");
    m(this, "testCallback");
    m(this, "_hasMatch");
    this.model = e, this.testCallback = t, this._hasMatch = !1, this.set("isEnabled", !0), this.on("change:isEnabled", () => {
      this.isEnabled ? this._startListening() : (this.stopListening(e.document.selection), this.stopListening(e.document));
    }), this._startListening();
  }
  get hasMatch() {
    return this._hasMatch;
  }
  _startListening() {
    const e = this.model.document;
    this.listenTo(e.selection, "change:range", (t, { directChange: n }) => {
      n && (e.selection.isCollapsed ? this._evaluateTextBeforeSelection("selection") : this.hasMatch && (this.fire("unmatched"), this._hasMatch = !1));
    }), this.listenTo(e, "change:data", (t, n) => {
      !n.isUndo && n.isLocal && this._evaluateTextBeforeSelection("data", { batch: n });
    });
  }
  _evaluateTextBeforeSelection(e, t = {}) {
    const n = this.model, r = n.document.selection, s = n.createRange(n.createPositionAt(r.focus.parent, 0), r.focus), { text: a, range: l } = aw(s, n), c = this.testCallback(a);
    if (!c && this.hasMatch && this.fire("unmatched"), this._hasMatch = !!c, c) {
      const d = Object.assign(t, { text: a, range: l });
      typeof c == "object" && Object.assign(d, c), this.fire(`matched:${e}`, d);
    }
  }
}
class La extends A {
  constructor(e) {
    super(e);
    m(this, "attributes");
    m(this, "_overrideUid");
    m(this, "_isNextGravityRestorationSkipped", !1);
    this.attributes = /* @__PURE__ */ new Set(), this._overrideUid = null;
  }
  static get pluginName() {
    return "TwoStepCaretMovement";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model, n = e.editing.view, r = e.locale, s = t.document.selection;
    this.listenTo(n.document, "arrowKey", (a, l) => {
      if (!s.isCollapsed || l.shiftKey || l.altKey || l.ctrlKey) return;
      const c = l.keyCode == ne.arrowright, d = l.keyCode == ne.arrowleft;
      if (!c && !d) return;
      const u = r.contentLanguageDirection;
      let h = !1;
      h = u === "ltr" && c || u === "rtl" && d ? this._handleForwardMovement(l) : this._handleBackwardMovement(l), h === !0 && a.stop();
    }, { context: "$text", priority: "highest" }), this.listenTo(s, "change:range", (a, l) => {
      this._isNextGravityRestorationSkipped ? this._isNextGravityRestorationSkipped = !1 : this._isGravityOverridden && (!l.directChange && ti(s.getFirstPosition(), this.attributes) || this._restoreGravity());
    }), this._enableClickingAfterNode(), this._enableInsertContentSelectionAttributesFixer(), this._handleDeleteContentAfterNode();
  }
  registerAttribute(e) {
    this.attributes.add(e);
  }
  _handleForwardMovement(e) {
    const t = this.attributes, n = this.editor.model, r = n.document.selection, s = r.getFirstPosition();
    return !this._isGravityOverridden && (!s.isAtStart || !qi(r, t)) && !!ti(s, t) && (e && yr(e), qi(r, t) && ti(s, t, !0) ? vr(n, t) : this._overrideGravity(), !0);
  }
  _handleBackwardMovement(e) {
    const t = this.attributes, n = this.editor.model, r = n.document.selection, s = r.getFirstPosition();
    return this._isGravityOverridden ? (e && yr(e), this._restoreGravity(), ti(s, t, !0) ? vr(n, t) : js(n, t, s), !0) : s.isAtStart ? !!qi(r, t) && (e && yr(e), js(n, t, s), !0) : !qi(r, t) && ti(s, t, !0) ? (e && yr(e), js(n, t, s), !0) : !!Og(s, t) && (s.isAtEnd && !qi(r, t) && ti(s, t) ? (e && yr(e), js(n, t, s), !0) : (this._isNextGravityRestorationSkipped = !0, this._overrideGravity(), !1));
  }
  _enableClickingAfterNode() {
    const e = this.editor, t = e.model, n = t.document.selection, r = e.editing.view.document;
    e.editing.view.addObserver(ml), e.editing.view.addObserver(N5);
    let s = !1, a = !1;
    this.listenTo(r, "touchstart", () => {
      a = !1, s = !0;
    }), this.listenTo(r, "mousedown", () => {
      a = !0;
    }), this.listenTo(r, "selectionChange", () => {
      const l = this.attributes;
      if (!a && !s || (a = !1, s = !1, !n.isCollapsed) || !qi(n, l)) return;
      const c = n.getFirstPosition();
      ti(c, l) && (c.isAtStart || ti(c, l, !0) ? vr(t, l) : this._isGravityOverridden || this._overrideGravity());
    });
  }
  _enableInsertContentSelectionAttributesFixer() {
    const e = this.editor.model, t = e.document.selection, n = this.attributes;
    this.listenTo(e, "insertContent", () => {
      const r = t.getFirstPosition();
      qi(t, n) && ti(r, n) && vr(e, n);
    }, { priority: "low" });
  }
  _handleDeleteContentAfterNode() {
    const e = this.editor, t = e.model, n = t.document.selection, r = e.editing.view;
    let s = !1, a = !1;
    this.listenTo(r.document, "delete", (l, c) => {
      s = c.direction === "backward";
    }, { priority: "high" }), this.listenTo(t, "deleteContent", () => {
      if (!s) return;
      const l = n.getFirstPosition();
      a = qi(n, this.attributes) && !Og(l, this.attributes);
    }, { priority: "high" }), this.listenTo(t, "deleteContent", () => {
      s && (s = !1, a || e.model.enqueueChange(() => {
        const l = n.getFirstPosition();
        qi(n, this.attributes) && ti(l, this.attributes) && (l.isAtStart || ti(l, this.attributes, !0) ? vr(t, this.attributes) : this._isGravityOverridden || this._overrideGravity());
      }));
    }, { priority: "low" });
  }
  get _isGravityOverridden() {
    return !!this._overrideUid;
  }
  _overrideGravity() {
    this._overrideUid = this.editor.model.change((e) => e.overrideSelectionGravity());
  }
  _restoreGravity() {
    this.editor.model.change((e) => {
      e.restoreSelectionGravity(this._overrideUid), this._overrideUid = null;
    });
  }
}
function qi(o, i) {
  for (const e of i) if (o.hasAttribute(e)) return !0;
  return !1;
}
function js(o, i, e) {
  const t = e.nodeBefore;
  o.change((n) => {
    if (t) {
      const r = [], s = o.schema.isObject(t) && o.schema.isInline(t);
      for (const [a, l] of t.getAttributes()) !o.schema.checkAttribute("$text", a) || s && o.schema.getAttributeProperties(a).copyFromObject === !1 || r.push([a, l]);
      n.setSelectionAttribute(r);
    } else n.removeSelectionAttribute(i);
  });
}
function vr(o, i) {
  o.change((e) => {
    e.removeSelectionAttribute(i);
  });
}
function yr(o) {
  o.preventDefault();
}
function Og(o, i) {
  return ti(o.getShiftedBy(-1), i);
}
function ti(o, i, e = !1) {
  const { nodeBefore: t, nodeAfter: n } = o;
  for (const r of i) {
    const s = t ? t.getAttribute(r) : void 0, a = n ? n.getAttribute(r) : void 0;
    if ((!e || s !== void 0 && a !== void 0) && a !== s) return !0;
  }
  return !1;
}
function kl(o, i, e, t) {
  return t.createRange(Ng(o, i, e, !0, t), Ng(o, i, e, !1, t));
}
function Ng(o, i, e, t, n) {
  let r = o.textNode || (t ? o.nodeBefore : o.nodeAfter), s = null;
  for (; r && r.getAttribute(i) == e; ) s = r, r = t ? r.previousSibling : r.nextSibling;
  return s ? n.createPositionAt(s, t ? "before" : "after") : o;
}
function cw(o, i, e, t) {
  const n = o.editing.view, r = /* @__PURE__ */ new Set();
  n.document.registerPostFixer((s) => {
    const a = o.model.document.selection;
    let l = !1;
    if (a.hasAttribute(i)) {
      const c = kl(a.getFirstPosition(), i, a.getAttribute(i), o.model), d = o.editing.mapper.toViewRange(c);
      for (const u of d.getItems()) u.is("element", e) && !u.hasClass(t) && (s.addClass(t, u), r.add(u), l = !0);
    }
    return l;
  }), o.conversion.for("editingDowncast").add((s) => {
    function a() {
      n.change((l) => {
        for (const c of r.values()) l.removeClass(t, c), r.delete(c);
      });
    }
    s.on("insert", a, { priority: "highest" }), s.on("remove", a, { priority: "highest" }), s.on("attribute", a, { priority: "highest" }), s.on("selection", a, { priority: "highest" });
  });
}
function bn(o, i, e, t) {
  let n, r = null;
  typeof t == "function" ? n = t : (r = o.commands.get(t), n = () => {
    o.execute(t);
  }), o.model.document.on("change:data", (s, a) => {
    if (r && !r.isEnabled || !i.isEnabled) return;
    const l = Te(o.model.document.selection.getRanges());
    if (!l.isCollapsed || a.isUndo || !a.isLocal) return;
    const c = Array.from(o.model.document.differ.getChanges()), d = c[0];
    if (c.length != 1 || d.type !== "insert" || d.name != "$text" || d.length != 1) return;
    const u = d.position.parent;
    if (u.is("element", "codeBlock") || u.is("element", "listItem") && typeof t != "function" && !["numberedList", "bulletedList", "todoList"].includes(t) || r && r.value === !0) return;
    const h = u.getChild(0), g = o.model.createRangeOn(h);
    if (!g.containsRange(l) && !l.end.isEqual(g.end)) return;
    const p = e.exec(h.data.substr(0, l.end.offset));
    p && o.model.enqueueChange((f) => {
      const b = f.createPositionAt(u, 0), k = f.createPositionAt(u, p[0].length), _ = new Mt(b, k);
      if (n({ match: p }) !== !1) {
        f.remove(_);
        const w = o.model.document.selection.getFirstRange(), y = f.createRangeIn(u);
        !u.isEmpty || y.isEqual(w) || y.containsRange(w, !0) || f.remove(u);
      }
      _.detach(), o.model.enqueueChange(() => {
        o.plugins.get("Delete").requestUndoOnBackspace();
      });
    });
  });
}
function To(o, i, e, t) {
  let n, r;
  e instanceof RegExp ? n = e : r = e, r = r || ((s) => {
    let a;
    const l = [], c = [];
    for (; (a = n.exec(s)) !== null && !(a && a.length < 4); ) {
      let { index: d, 1: u, 2: h, 3: g } = a;
      const p = u + h + g;
      d += a[0].length - p.length;
      const f = [d, d + u.length], b = [d + u.length + h.length, d + u.length + h.length + g.length];
      l.push(f), l.push(b), c.push([d + u.length, d + u.length + h.length]);
    }
    return { remove: l, format: c };
  }), o.model.document.on("change:data", (s, a) => {
    if (a.isUndo || !a.isLocal || !i.isEnabled) return;
    const l = o.model, c = l.document.selection;
    if (!c.isCollapsed) return;
    const d = Array.from(l.document.differ.getChanges()), u = d[0];
    if (d.length != 1 || u.type !== "insert" || u.name != "$text" || u.length != 1) return;
    const h = c.focus, g = h.parent, { text: p, range: f } = function(w, y) {
      let x = w.start;
      return { text: Array.from(w.getItems()).reduce((S, L) => !L.is("$text") && !L.is("$textProxy") || L.getAttribute("code") ? (x = y.createPositionAfter(L), "") : S + L.data, ""), range: y.createRange(x, w.end) };
    }(l.createRange(l.createPositionAt(g, 0), h), l), b = r(p), k = Rg(f.start, b.format, l), _ = Rg(f.start, b.remove, l);
    k.length && _.length && l.enqueueChange((w) => {
      if (t(w, k) !== !1) {
        for (const y of _.reverse()) w.remove(y);
        l.enqueueChange(() => {
          o.plugins.get("Delete").requestUndoOnBackspace();
        });
      }
    });
  });
}
function Rg(o, i, e) {
  return i.filter((t) => t[0] !== void 0 && t[1] !== void 0).map((t) => e.createRange(o.getShiftedBy(t[0]), o.getShiftedBy(t[1])));
}
class lE extends A {
  static get requires() {
    return [Di];
  }
  static get pluginName() {
    return "Autoformat";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    const i = this.editor, e = this.editor.t;
    this._addListAutoformats(), this._addBasicStylesAutoformats(), this._addHeadingAutoformats(), this._addBlockQuoteAutoformats(), this._addCodeBlockAutoformats(), this._addHorizontalLineAutoformats(), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Revert autoformatting action"), keystroke: "Backspace" }] });
  }
  _addListAutoformats() {
    const i = this.editor.commands;
    i.get("bulletedList") && bn(this.editor, this, /^[*-]\s$/, "bulletedList"), i.get("numberedList") && bn(this.editor, this, /^1[.|)]\s$/, "numberedList"), i.get("todoList") && bn(this.editor, this, /^\[\s?\]\s$/, "todoList"), i.get("checkTodoList") && bn(this.editor, this, /^\[\s?x\s?\]\s$/, () => {
      this.editor.execute("todoList"), this.editor.execute("checkTodoList");
    });
  }
  _addBasicStylesAutoformats() {
    const i = this.editor.commands;
    if (i.get("bold")) {
      const e = Hs(this.editor, "bold");
      To(this.editor, this, /(?:^|\s)(\*\*)([^*]+)(\*\*)$/g, e), To(this.editor, this, /(?:^|\s)(__)([^_]+)(__)$/g, e);
    }
    if (i.get("italic")) {
      const e = Hs(this.editor, "italic");
      To(this.editor, this, /(?:^|\s)(\*)([^*_]+)(\*)$/g, e), To(this.editor, this, /(?:^|\s)(_)([^_]+)(_)$/g, e);
    }
    if (i.get("code")) {
      const e = Hs(this.editor, "code");
      To(this.editor, this, /(`)([^`]+)(`)$/g, e);
    }
    if (i.get("strikethrough")) {
      const e = Hs(this.editor, "strikethrough");
      To(this.editor, this, /(~~)([^~]+)(~~)$/g, e);
    }
  }
  _addHeadingAutoformats() {
    const i = this.editor.commands.get("heading");
    i && i.modelElements.filter((e) => e.match(/^heading[1-6]$/)).forEach((e) => {
      const t = e[7], n = new RegExp(`^(#{${t}})\\s$`);
      bn(this.editor, this, n, () => {
        if (!i.isEnabled || i.value === e) return !1;
        this.editor.execute("heading", { value: e });
      });
    });
  }
  _addBlockQuoteAutoformats() {
    this.editor.commands.get("blockQuote") && bn(this.editor, this, /^>\s$/, "blockQuote");
  }
  _addCodeBlockAutoformats() {
    const i = this.editor, e = i.model.document.selection;
    i.commands.get("codeBlock") && bn(i, this, /^```$/, () => {
      if (e.getFirstPosition().parent.is("element", "listItem")) return !1;
      this.editor.execute("codeBlock", { usePreviousLanguageChoice: !0 });
    });
  }
  _addHorizontalLineAutoformats() {
    this.editor.commands.get("horizontalLine") && bn(this.editor, this, /^---$/, "horizontalLine");
  }
}
function Hs(o, i) {
  return (e, t) => {
    if (!o.commands.get(i).isEnabled) return !1;
    const n = o.model.schema.getValidRanges(t, i);
    for (const r of n) e.setAttribute(i, !0, r);
    e.removeSelectionAttribute(i);
  };
}
class cE extends A {
  constructor(e) {
    super(e);
    m(this, "adapter");
    m(this, "_debouncedSave");
    m(this, "_lastDocumentVersion");
    m(this, "_savePromise");
    m(this, "_domEmitter");
    m(this, "_config");
    m(this, "_pendingActions");
    m(this, "_makeImmediateSave");
    m(this, "_action", null);
    const t = e.config.get("autosave") || {}, n = t.waitingTime || 1e3;
    this.set("state", "synchronized"), this._debouncedSave = vi(this._save.bind(this), n), this._lastDocumentVersion = e.model.document.version, this._savePromise = null, this._domEmitter = new (Nt())(), this._config = t, this._pendingActions = e.plugins.get(Ia), this._makeImmediateSave = !1;
  }
  static get pluginName() {
    return "Autosave";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Ia];
  }
  init() {
    const e = this.editor, t = e.model.document;
    this.listenTo(e, "ready", () => {
      this.listenTo(t, "change:data", (n, r) => {
        this._saveCallbacks.length && r.isLocal && (this.state === "synchronized" && (this.state = "waiting", this._setPendingAction()), this.state === "waiting" && this._debouncedSave());
      });
    }), this.listenTo(e, "destroy", () => this._flush(), { priority: "highest" }), this._domEmitter.listenTo(window, "beforeunload", (n, r) => {
      this._pendingActions.hasAny && (r.returnValue = this._pendingActions.first.message);
    });
  }
  destroy() {
    this._domEmitter.stopListening(), super.destroy();
  }
  save() {
    return this._debouncedSave.cancel(), this._save();
  }
  _flush() {
    this._debouncedSave.flush();
  }
  _save() {
    return this._savePromise ? (this._makeImmediateSave = this.editor.model.document.version > this._lastDocumentVersion, this._savePromise) : (this._setPendingAction(), this.state = "saving", this._lastDocumentVersion = this.editor.model.document.version, this._savePromise = Promise.resolve().then(() => Promise.all(this._saveCallbacks.map((e) => e(this.editor)))).finally(() => {
      this._savePromise = null;
    }).then(() => {
      if (this._makeImmediateSave) return this._makeImmediateSave = !1, this._save();
      this.editor.model.document.version > this._lastDocumentVersion ? (this.state = "waiting", this._debouncedSave()) : (this.state = "synchronized", this._pendingActions.remove(this._action), this._action = null);
    }).catch((e) => {
      throw this.state = "error", this.state = "saving", this._debouncedSave(), e;
    }), this._savePromise);
  }
  _setPendingAction() {
    const e = this.editor.t;
    this._action || (this._action = this._pendingActions.add(e("Saving changes")));
  }
  get _saveCallbacks() {
    const e = [];
    return this.adapter && this.adapter.save && e.push(this.adapter.save), this._config.save && e.push(this._config.save), e;
  }
}
class fo extends G {
  constructor(e, t) {
    super(e);
    m(this, "attributeKey");
    this.attributeKey = t;
  }
  refresh() {
    const e = this.editor.model, t = e.document;
    this.value = this._getValueFromFirstAllowedNode(), this.isEnabled = e.schema.checkAttributeInSelection(t.selection, this.attributeKey);
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document.selection, r = e.forceValue === void 0 ? !this.value : e.forceValue;
    t.change((s) => {
      if (n.isCollapsed) r ? s.setSelectionAttribute(this.attributeKey, !0) : s.removeSelectionAttribute(this.attributeKey);
      else {
        const a = t.schema.getValidRanges(n.getRanges(), this.attributeKey);
        for (const l of a) r ? s.setAttribute(this.attributeKey, r, l) : s.removeAttribute(this.attributeKey, l);
      }
    });
  }
  _getValueFromFirstAllowedNode() {
    const e = this.editor.model, t = e.schema, n = e.document.selection;
    if (n.isCollapsed) return n.hasAttribute(this.attributeKey);
    for (const r of n.getRanges()) for (const s of r.getItems()) if (t.checkAttribute(s, this.attributeKey)) return s.hasAttribute(this.attributeKey);
    return !1;
  }
}
const Eo = "bold";
class dE extends A {
  static get pluginName() {
    return "BoldEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.model.schema.extend("$text", { allowAttributes: Eo }), i.model.schema.setAttributeProperties(Eo, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: Eo, view: "strong", upcastAlso: ["b", (t) => {
      const n = t.getStyle("font-weight");
      return n && (n == "bold" || Number(n) >= 600) ? { name: !0, styles: ["font-weight"] } : null;
    }] }), i.commands.add(Eo, new fo(i, Eo)), i.keystrokes.set("CTRL+B", Eo), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Bold text"), keystroke: "CTRL+B" }] });
  }
}
function bo({ editor: o, commandName: i, plugin: e, icon: t, label: n, keystroke: r }) {
  return (s) => {
    const a = o.commands.get(i), l = new s(o.locale);
    return l.set({ label: n, icon: t, keystroke: r, isToggleable: !0 }), l.bind("isEnabled").to(a, "isEnabled"), l.bind("isOn").to(a, "value"), l instanceof Ie ? l.set({ role: "menuitemcheckbox" }) : l.set({ tooltip: !0 }), e.listenTo(l, "execute", () => {
      o.execute(i), o.editing.view.focus();
    }), l;
  };
}
const nc = "bold";
class uE extends A {
  static get pluginName() {
    return "BoldUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: nc, plugin: this, icon: T_, label: e("Bold"), keystroke: "CTRL+B" });
    i.ui.componentFactory.add(nc, () => t(j)), i.ui.componentFactory.add("menuBar:" + nc, () => t(Ie));
  }
}
class hE extends A {
  static get requires() {
    return [dE, uE];
  }
  static get pluginName() {
    return "Bold";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const Un = "code";
class mE extends A {
  static get pluginName() {
    return "CodeEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [La];
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.model.schema.extend("$text", { allowAttributes: Un }), i.model.schema.setAttributeProperties(Un, { isFormatting: !0, copyOnEnter: !1 }), i.conversion.attributeToElement({ model: Un, view: "code" }), i.commands.add(Un, new fo(i, Un)), i.plugins.get(La).registerAttribute(Un), cw(i, Un, "code", "ck-code_selected"), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Move out of an inline code style"), keystroke: [["arrowleft", "arrowleft"], ["arrowright", "arrowright"]] }] });
  }
}
const oc = "code";
class gE extends A {
  static get pluginName() {
    return "CodeUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: oc, plugin: this, icon: NC, label: e("Code") });
    i.ui.componentFactory.add(oc, () => t(j)), i.ui.componentFactory.add("menuBar:" + oc, () => t(Ie));
  }
}
class pE extends A {
  static get requires() {
    return [mE, gE];
  }
  static get pluginName() {
    return "Code";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const So = "italic";
class fE extends A {
  static get pluginName() {
    return "ItalicEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.model.schema.extend("$text", { allowAttributes: So }), i.model.schema.setAttributeProperties(So, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: So, view: "i", upcastAlso: ["em", { styles: { "font-style": "italic" } }] }), i.commands.add(So, new fo(i, So)), i.keystrokes.set("CTRL+I", So), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Italic text"), keystroke: "CTRL+I" }] });
  }
}
const rc = "italic";
class bE extends A {
  static get pluginName() {
    return "ItalicUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: rc, plugin: this, icon: ZC, keystroke: "CTRL+I", label: e("Italic") });
    i.ui.componentFactory.add(rc, () => t(j)), i.ui.componentFactory.add("menuBar:" + rc, () => t(Ie));
  }
}
class kE extends A {
  static get requires() {
    return [fE, bE];
  }
  static get pluginName() {
    return "Italic";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const xr = "strikethrough";
class _E extends A {
  static get pluginName() {
    return "StrikethroughEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.model.schema.extend("$text", { allowAttributes: xr }), i.model.schema.setAttributeProperties(xr, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: xr, view: "s", upcastAlso: ["del", "strike", { styles: { "text-decoration": "line-through" } }] }), i.commands.add(xr, new fo(i, xr)), i.keystrokes.set("CTRL+SHIFT+X", "strikethrough"), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Strikethrough text"), keystroke: "CTRL+SHIFT+X" }] });
  }
}
const sc = "strikethrough";
class wE extends A {
  static get pluginName() {
    return "StrikethroughUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: sc, plugin: this, icon: TA, keystroke: "CTRL+SHIFT+X", label: e("Strikethrough") });
    i.ui.componentFactory.add(sc, () => t(j)), i.ui.componentFactory.add("menuBar:" + sc, () => t(Ie));
  }
}
class vE extends A {
  static get requires() {
    return [_E, wE];
  }
  static get pluginName() {
    return "Strikethrough";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const Cr = "subscript";
class yE extends A {
  static get pluginName() {
    return "SubscriptEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.model.schema.extend("$text", { allowAttributes: Cr }), i.model.schema.setAttributeProperties(Cr, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: Cr, view: "sub", upcastAlso: [{ styles: { "vertical-align": "sub" } }] }), i.commands.add(Cr, new fo(i, Cr));
  }
}
const ac = "subscript";
class xE extends A {
  static get pluginName() {
    return "SubscriptUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: ac, plugin: this, icon: EA, label: e("Subscript") });
    i.ui.componentFactory.add(ac, () => t(j)), i.ui.componentFactory.add("menuBar:" + ac, () => t(Ie));
  }
}
class CE extends A {
  static get requires() {
    return [yE, xE];
  }
  static get pluginName() {
    return "Subscript";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const Ar = "superscript";
class AE extends A {
  static get pluginName() {
    return "SuperscriptEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.model.schema.extend("$text", { allowAttributes: Ar }), i.model.schema.setAttributeProperties(Ar, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: Ar, view: "sup", upcastAlso: [{ styles: { "vertical-align": "super" } }] }), i.commands.add(Ar, new fo(i, Ar));
  }
}
const lc = "superscript";
class TE extends A {
  static get pluginName() {
    return "SuperscriptUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: lc, plugin: this, icon: SA, label: e("Superscript") });
    i.ui.componentFactory.add(lc, () => t(j)), i.ui.componentFactory.add("menuBar:" + lc, () => t(Ie));
  }
}
class EE extends A {
  static get requires() {
    return [AE, TE];
  }
  static get pluginName() {
    return "Superscript";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const Tr = "underline";
class SE extends A {
  static get pluginName() {
    return "UnderlineEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.model.schema.extend("$text", { allowAttributes: Tr }), i.model.schema.setAttributeProperties(Tr, { isFormatting: !0, copyOnEnter: !0 }), i.conversion.attributeToElement({ model: Tr, view: "u", upcastAlso: { styles: { "text-decoration": "underline" } } }), i.commands.add(Tr, new fo(i, Tr)), i.keystrokes.set("CTRL+U", "underline"), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Underline text"), keystroke: "CTRL+U" }] });
  }
}
const cc = "underline";
class IE extends A {
  static get pluginName() {
    return "UnderlineUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = bo({ editor: i, commandName: cc, plugin: this, icon: NA, label: e("Underline"), keystroke: "CTRL+U" });
    i.ui.componentFactory.add(cc, () => t(j)), i.ui.componentFactory.add("menuBar:" + cc, () => t(Ie));
  }
}
class PE extends A {
  static get requires() {
    return [SE, IE];
  }
  static get pluginName() {
    return "Underline";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function* dw(o, i) {
  for (const e of i) e && o.getAttributeProperties(e[0]).copyOnEnter && (yield e);
}
class ME extends G {
  execute() {
    this.editor.model.change((i) => {
      this.enterBlock(i), this.fire("afterExecute", { writer: i });
    });
  }
  enterBlock(i) {
    const e = this.editor.model, t = e.document.selection, n = e.schema, r = t.isCollapsed, s = t.getFirstRange(), a = s.start.parent, l = s.end.parent;
    if (n.isLimit(a) || n.isLimit(l)) return r || a != l || e.deleteContent(t), !1;
    if (r) {
      const c = dw(i.model.schema, t.getAttributes());
      return zg(i, s.start), i.setSelectionAttribute(c), !0;
    }
    {
      const c = !(s.start.isAtStart && s.end.isAtEnd), d = a == l;
      if (e.deleteContent(t, { leaveUnmerged: c }), c) {
        if (d) return zg(i, t.focus), !0;
        i.setSelection(l, 0);
      }
    }
    return !1;
  }
}
function zg(o, i) {
  o.split(i), o.setSelection(i.parent.nextSibling, 0);
}
const VE = { insertParagraph: { isSoft: !1 }, insertLineBreak: { isSoft: !0 } };
class uw extends Ai {
  constructor(i) {
    super(i);
    const e = this.document;
    let t = !1;
    e.on("keydown", (n, r) => {
      t = r.shiftKey;
    }), e.on("beforeinput", (n, r) => {
      if (!this.isEnabled) return;
      let s = r.inputType;
      q.isSafari && t && s == "insertParagraph" && (s = "insertLineBreak");
      const a = r.domEvent, l = VE[s];
      if (!l) return;
      const c = new er(e, "enter", r.targetRanges[0]);
      e.fire(c, new tr(i, a, { isSoft: l.isSoft })), c.stop.called && n.stop();
    });
  }
  observe() {
  }
  stopObserving() {
  }
}
class _l extends A {
  static get pluginName() {
    return "Enter";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.editing.view, t = e.document, n = this.editor.t;
    e.addObserver(uw), i.commands.add("enter", new ME(i)), this.listenTo(t, "enter", (r, s) => {
      t.isComposing || s.preventDefault(), s.isSoft || (i.execute("enter"), e.scrollToTheSelection());
    }, { priority: "low" }), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: n("Insert a hard break (a new paragraph)"), keystroke: "Enter" }] });
  }
}
class LE extends G {
  execute() {
    const i = this.editor.model, e = i.document;
    i.change((t) => {
      (function(n, r, s) {
        const a = s.isCollapsed, l = s.getFirstRange(), c = l.start.parent, d = l.end.parent, u = c == d;
        if (a) {
          const h = dw(n.schema, s.getAttributes());
          Bg(n, r, l.end), r.removeSelectionAttribute(s.getAttributeKeys()), r.setSelectionAttribute(h);
        } else {
          const h = !(l.start.isAtStart && l.end.isAtEnd);
          n.deleteContent(s, { leaveUnmerged: h }), u ? Bg(n, r, s.focus) : h && r.setSelection(d, 0);
        }
      })(i, t, e.selection), this.fire("afterExecute", { writer: t });
    });
  }
  refresh() {
    const i = this.editor.model, e = i.document;
    this.isEnabled = function(t, n) {
      if (n.rangeCount > 1) return !1;
      const r = n.anchor;
      if (!r || !t.checkChild(r, "softBreak")) return !1;
      const s = n.getFirstRange(), a = s.start.parent, l = s.end.parent;
      return !((vd(a, t) || vd(l, t)) && a !== l);
    }(i.schema, e.selection);
  }
}
function Bg(o, i, e) {
  const t = i.createElement("softBreak");
  o.insertContent(t, e), i.setSelection(t, "after");
}
function vd(o, i) {
  return !o.is("rootElement") && (i.isLimit(o) || vd(o.parent, i));
}
class hw extends A {
  static get pluginName() {
    return "ShiftEnter";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.model.schema, t = i.conversion, n = i.editing.view, r = n.document, s = this.editor.t;
    e.register("softBreak", { allowWhere: "$text", isInline: !0 }), t.for("upcast").elementToElement({ model: "softBreak", view: "br" }), t.for("downcast").elementToElement({ model: "softBreak", view: (a, { writer: l }) => l.createEmptyElement("br") }), n.addObserver(uw), i.commands.add("shiftEnter", new LE(i)), this.listenTo(r, "enter", (a, l) => {
      r.isComposing || l.preventDefault(), l.isSoft && (i.execute("shiftEnter"), n.scrollToTheSelection());
    }, { priority: "low" }), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: s("Insert a soft break (a <code>&lt;br&gt;</code> element)"), keystroke: "Shift+Enter" }] });
  }
}
class OE extends G {
  refresh() {
    this.value = this._getValue(), this.isEnabled = this._checkEnabled();
  }
  execute(i = {}) {
    const e = this.editor.model, t = e.schema, n = e.document.selection, r = Array.from(n.getSelectedBlocks()), s = i.forceValue === void 0 ? !this.value : i.forceValue;
    e.change((a) => {
      if (s) {
        const l = r.filter((c) => $s(c) || Fg(t, c));
        this._applyQuote(a, l);
      } else this._removeQuote(a, r.filter($s));
    });
  }
  _getValue() {
    const i = Te(this.editor.model.document.selection.getSelectedBlocks());
    return !(!i || !$s(i));
  }
  _checkEnabled() {
    if (this.value) return !0;
    const i = this.editor.model.document.selection, e = this.editor.model.schema, t = Te(i.getSelectedBlocks());
    return !!t && Fg(e, t);
  }
  _removeQuote(i, e) {
    Dg(i, e).reverse().forEach((t) => {
      if (t.start.isAtStart && t.end.isAtEnd) return void i.unwrap(t.start.parent);
      if (t.start.isAtStart) {
        const r = i.createPositionBefore(t.start.parent);
        return void i.move(t, r);
      }
      t.end.isAtEnd || i.split(t.end);
      const n = i.createPositionAfter(t.end.parent);
      i.move(t, n);
    });
  }
  _applyQuote(i, e) {
    const t = [];
    Dg(i, e).reverse().forEach((n) => {
      let r = $s(n.start);
      r || (r = i.createElement("blockQuote"), i.wrap(n, r)), t.push(r);
    }), t.reverse().reduce((n, r) => n.nextSibling == r ? (i.merge(i.createPositionAfter(n)), n) : r);
  }
}
function $s(o) {
  return o.parent.name == "blockQuote" ? o.parent : null;
}
function Dg(o, i) {
  let e, t = 0;
  const n = [];
  for (; t < i.length; ) {
    const r = i[t], s = i[t + 1];
    e || (e = o.createPositionBefore(r)), s && r.nextSibling == s || (n.push(o.createRange(e, o.createPositionAfter(r))), e = null), t++;
  }
  return n;
}
function Fg(o, i) {
  const e = o.checkChild(i.parent, "blockQuote"), t = o.checkChild(["$root", "blockQuote"], i);
  return e && t;
}
class NE extends A {
  static get pluginName() {
    return "BlockQuoteEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [_l, Di];
  }
  init() {
    const i = this.editor, e = i.model.schema;
    i.commands.add("blockQuote", new OE(i)), e.register("blockQuote", { inheritAllFrom: "$container" }), i.conversion.elementToElement({ model: "blockQuote", view: "blockquote" }), i.model.document.registerPostFixer((s) => {
      const a = i.model.document.differ.getChanges();
      for (const l of a) if (l.type == "insert") {
        const c = l.position.nodeAfter;
        if (!c) continue;
        if (c.is("element", "blockQuote") && c.isEmpty) return s.remove(c), !0;
        if (c.is("element", "blockQuote") && !e.checkChild(l.position, c)) return s.unwrap(c), !0;
        if (c.is("element")) {
          const d = s.createRangeIn(c);
          for (const u of d.getItems()) if (u.is("element", "blockQuote") && !e.checkChild(s.createPositionBefore(u), u)) return s.unwrap(u), !0;
        }
      } else if (l.type == "remove") {
        const c = l.position.parent;
        if (c.is("element", "blockQuote") && c.isEmpty) return s.remove(c), !0;
      }
      return !1;
    });
    const t = this.editor.editing.view.document, n = i.model.document.selection, r = i.commands.get("blockQuote");
    this.listenTo(t, "enter", (s, a) => {
      !n.isCollapsed || !r.value || n.getLastPosition().parent.isEmpty && (i.execute("blockQuote"), i.editing.view.scrollToTheSelection(), a.preventDefault(), s.stop());
    }, { context: "blockquote" }), this.listenTo(t, "delete", (s, a) => {
      if (a.direction != "backward" || !n.isCollapsed || !r.value) return;
      const l = n.getLastPosition().parent;
      l.isEmpty && !l.previousSibling && (i.execute("blockQuote"), i.editing.view.scrollToTheSelection(), a.preventDefault(), s.stop());
    }, { context: "blockquote" });
  }
}
class RE extends A {
  static get pluginName() {
    return "BlockQuoteUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.ui.componentFactory.add("blockQuote", () => {
      const e = this._createButton(j);
      return e.set({ tooltip: !0 }), e;
    }), i.ui.componentFactory.add("menuBar:blockQuote", () => {
      const e = this._createButton(Ie);
      return e.set({ role: "menuitemcheckbox" }), e;
    });
  }
  _createButton(i) {
    const e = this.editor, t = e.locale, n = e.commands.get("blockQuote"), r = new i(e.locale), s = t.t;
    return r.set({ label: s("Block quote"), icon: wA, isToggleable: !0 }), r.bind("isEnabled").to(n, "isEnabled"), r.bind("isOn").to(n, "value"), this.listenTo(r, "execute", () => {
      e.execute("blockQuote"), e.editing.view.focus();
    }), r;
  }
}
class zE extends A {
  static get requires() {
    return [NE, RE];
  }
  static get pluginName() {
    return "BlockQuote";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class BE extends Ae() {
  constructor() {
    super(...arguments);
    m(this, "_stack", []);
  }
  add(e, t) {
    const n = this._stack, r = n[0];
    this._insertDescriptor(e);
    const s = n[0];
    r === s || dc(r, s) || this.fire("change:top", { oldDescriptor: r, newDescriptor: s, writer: t });
  }
  remove(e, t) {
    const n = this._stack, r = n[0];
    this._removeDescriptor(e);
    const s = n[0];
    r === s || dc(r, s) || this.fire("change:top", { oldDescriptor: r, newDescriptor: s, writer: t });
  }
  _insertDescriptor(e) {
    const t = this._stack, n = t.findIndex((s) => s.id === e.id);
    if (dc(e, t[n])) return;
    n > -1 && t.splice(n, 1);
    let r = 0;
    for (; t[r] && DE(t[r], e); ) r++;
    t.splice(r, 0, e);
  }
  _removeDescriptor(e) {
    const t = this._stack, n = t.findIndex((r) => r.id === e);
    n > -1 && t.splice(n, 1);
  }
}
function dc(o, i) {
  return o && i && o.priority == i.priority && Oa(o.classes) == Oa(i.classes);
}
function DE(o, i) {
  return o.priority > i.priority || !(o.priority < i.priority) && Oa(o.classes) > Oa(i.classes);
}
function Oa(o) {
  return Array.isArray(o) ? o.sort().join(",") : o;
}
const FE = "ck-widget", jg = "ck-widget_selected";
function et(o) {
  return !!o.is("element") && !!o.getCustomProperty("widget");
}
function wl(o, i, e = {}) {
  if (!o.is("containerElement")) throw new v("widget-to-widget-wrong-element-type", null, { element: o });
  return i.setAttribute("contenteditable", "false", o), i.addClass(FE, o), i.setCustomProperty("widget", !0, o), o.getFillerOffset = qE, i.setCustomProperty("widgetLabel", [], o), e.label && $E(o, e.label), e.hasSelectionHandle && function(t, n) {
    const r = n.createUIElement("div", { class: "ck ck-widget__selection-handle" }, function(s) {
      const a = this.toDomElement(s), l = new ui();
      return l.set("content", BC), l.render(), a.appendChild(l.element), a;
    });
    n.insert(n.createPositionAt(t, 0), r), n.addClass(["ck-widget_with-selection-handle"], t);
  }(o, i), mw(o, i), o;
}
function jE(o, i, e) {
  if (i.classes && e.addClass(De(i.classes), o), i.attributes) for (const t in i.attributes) e.setAttribute(t, i.attributes[t], o);
}
function HE(o, i, e) {
  if (i.classes && e.removeClass(De(i.classes), o), i.attributes) for (const t in i.attributes) e.removeAttribute(t, o);
}
function mw(o, i, e = jE, t = HE) {
  const n = new BE();
  n.on("change:top", (r, s) => {
    s.oldDescriptor && t(o, s.oldDescriptor, s.writer), s.newDescriptor && e(o, s.newDescriptor, s.writer);
  }), i.setCustomProperty("addHighlight", (r, s, a) => n.add(s, a), o), i.setCustomProperty("removeHighlight", (r, s, a) => n.remove(s, a), o);
}
function $E(o, i) {
  o.getCustomProperty("widgetLabel").push(i);
}
function UE(o) {
  return o.getCustomProperty("widgetLabel").reduce((i, e) => typeof e == "function" ? i ? i + ". " + e() : e() : i ? i + ". " + e : e, "");
}
function gw(o, i, e = {}) {
  return i.addClass(["ck-editor__editable", "ck-editor__nested-editable"], o), e.withAriaRole !== !1 && i.setAttribute("role", "textbox", o), i.setAttribute("tabindex", "-1", o), e.label && i.setAttribute("aria-label", e.label, o), i.setAttribute("contenteditable", o.isReadOnly ? "false" : "true", o), o.on("change:isReadOnly", (t, n, r) => {
    i.setAttribute("contenteditable", r ? "false" : "true", o);
  }), o.on("change:isFocused", (t, n, r) => {
    r ? i.addClass("ck-editor__nested-editable_focused", o) : i.removeClass("ck-editor__nested-editable_focused", o);
  }), mw(o, i), o;
}
function Fu(o, i) {
  const e = o.getSelectedElement();
  if (e) {
    const t = wn(o);
    if (t) return i.createRange(i.createPositionAt(e, t));
  }
  return i.schema.findOptimalInsertionRange(o);
}
function qE() {
  return null;
}
function yd(o) {
  const i = (s) => {
    const { width: a, paddingLeft: l, paddingRight: c } = s.ownerDocument.defaultView.getComputedStyle(s);
    return parseFloat(a) - (parseFloat(l) || 0) - (parseFloat(c) || 0);
  }, e = o.parentElement;
  if (!e) return 0;
  let t = i(e), n = 0, r = e;
  for (; isNaN(t); ) {
    if (r = r.parentElement, ++n > 5) return 0;
    t = i(r);
  }
  return t;
}
function WE(o, i = new K(o)) {
  const e = yd(o);
  return e ? i.width / e * 100 : 0;
}
const Gi = "widget-type-around";
function qn(o, i, e) {
  return !!o && et(o) && !e.isInline(i);
}
function wn(o) {
  return o.getAttribute(Gi);
}
const Hg = ["before", "after"], GE = new DOMParser().parseFromString(yA, "image/svg+xml").firstChild, $g = "ck-widget__type-around_disabled";
class ZE extends A {
  constructor() {
    super(...arguments);
    m(this, "_currentFakeCaretModelElement", null);
  }
  static get pluginName() {
    return "WidgetTypeAround";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [_l, Di];
  }
  init() {
    const e = this.editor, t = e.editing.view;
    this.on("change:isEnabled", (n, r, s) => {
      t.change((a) => {
        for (const l of t.document.roots) s ? a.removeClass($g, l) : a.addClass($g, l);
      }), s || e.model.change((a) => {
        a.removeSelectionAttribute(Gi);
      });
    }), this._enableTypeAroundUIInjection(), this._enableInsertingParagraphsOnButtonClick(), this._enableInsertingParagraphsOnEnterKeypress(), this._enableInsertingParagraphsOnTypingKeystroke(), this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(), this._enableDeleteIntegration(), this._enableInsertContentIntegration(), this._enableInsertObjectIntegration(), this._enableDeleteContentIntegration();
  }
  destroy() {
    super.destroy(), this._currentFakeCaretModelElement = null;
  }
  _insertParagraph(e, t) {
    const n = this.editor, r = n.editing.view, s = n.model.schema.getAttributesWithProperty(e, "copyOnReplace", !0);
    n.execute("insertParagraph", { position: n.model.createPositionAt(e, t), attributes: s }), r.focus(), r.scrollToTheSelection();
  }
  _listenToIfEnabled(e, t, n, r) {
    this.listenTo(e, t, (...s) => {
      this.isEnabled && n(...s);
    }, r);
  }
  _insertParagraphAccordingToFakeCaretPosition() {
    const e = this.editor.model.document.selection, t = wn(e);
    if (!t) return !1;
    const n = e.getSelectedElement();
    return this._insertParagraph(n, t), !0;
  }
  _enableTypeAroundUIInjection() {
    const e = this.editor, t = e.model.schema, n = e.locale.t, r = { before: n("Insert paragraph before block"), after: n("Insert paragraph after block") };
    e.editing.downcastDispatcher.on("insert", (s, a, l) => {
      const c = l.mapper.toViewElement(a.item);
      c && qn(c, a.item, t) && (function(d, u, h) {
        const g = d.createUIElement("div", { class: "ck ck-reset_all ck-widget__type-around" }, function(p) {
          const f = this.toDomElement(p);
          return function(b, k) {
            for (const _ of Hg) {
              const w = new li({ tag: "div", attributes: { class: ["ck", "ck-widget__type-around__button", `ck-widget__type-around__button_${_}`], title: k[_], "aria-hidden": "true" }, children: [b.ownerDocument.importNode(GE, !0)] });
              b.appendChild(w.render());
            }
          }(f, u), function(b) {
            const k = new li({ tag: "div", attributes: { class: ["ck", "ck-widget__type-around__fake-caret"] } });
            b.appendChild(k.render());
          }(f), f;
        });
        d.insert(d.createPositionAt(h, "end"), g);
      }(l.writer, r, c), c.getCustomProperty("widgetLabel").push(() => this.isEnabled ? n("Press Enter to type after or press Shift + Enter to type before the widget") : ""));
    }, { priority: "low" });
  }
  _enableTypeAroundFakeCaretActivationUsingKeyboardArrows() {
    const e = this.editor, t = e.model, n = t.document.selection, r = t.schema, s = e.editing.view;
    function a(l) {
      return `ck-widget_type-around_show-fake-caret_${l}`;
    }
    this._listenToIfEnabled(s.document, "arrowKey", (l, c) => {
      this._handleArrowKeyPress(l, c);
    }, { context: [et, "$text"], priority: "high" }), this._listenToIfEnabled(n, "change:range", (l, c) => {
      c.directChange && e.model.change((d) => {
        d.removeSelectionAttribute(Gi);
      });
    }), this._listenToIfEnabled(t.document, "change:data", () => {
      const l = n.getSelectedElement();
      l && qn(e.editing.mapper.toViewElement(l), l, r) || e.model.change((c) => {
        c.removeSelectionAttribute(Gi);
      });
    }), this._listenToIfEnabled(e.editing.downcastDispatcher, "selection", (l, c, d) => {
      const u = d.writer;
      if (this._currentFakeCaretModelElement) {
        const f = d.mapper.toViewElement(this._currentFakeCaretModelElement);
        f && (u.removeClass(Hg.map(a), f), this._currentFakeCaretModelElement = null);
      }
      const h = c.selection.getSelectedElement();
      if (!h) return;
      const g = d.mapper.toViewElement(h);
      if (!qn(g, h, r)) return;
      const p = wn(c.selection);
      p && (u.addClass(a(p), g), this._currentFakeCaretModelElement = h);
    }), this._listenToIfEnabled(e.ui.focusTracker, "change:isFocused", (l, c, d) => {
      d || e.model.change((u) => {
        u.removeSelectionAttribute(Gi);
      });
    });
  }
  _handleArrowKeyPress(e, t) {
    const n = this.editor, r = n.model, s = r.document.selection, a = r.schema, l = n.editing.view, c = q2(t.keyCode, n.locale.contentLanguageDirection), d = l.document.selection.getSelectedElement();
    let u;
    qn(d, n.editing.mapper.toModelElement(d), a) ? u = this._handleArrowKeyPressOnSelectedWidget(c) : s.isCollapsed ? u = this._handleArrowKeyPressWhenSelectionNextToAWidget(c) : t.shiftKey || (u = this._handleArrowKeyPressWhenNonCollapsedSelection(c)), u && (t.preventDefault(), e.stop());
  }
  _handleArrowKeyPressOnSelectedWidget(e) {
    const t = this.editor.model, n = wn(t.document.selection);
    return t.change((r) => n ? n !== (e ? "after" : "before") ? (r.removeSelectionAttribute(Gi), !0) : !1 : (r.setSelectionAttribute(Gi, e ? "after" : "before"), !0));
  }
  _handleArrowKeyPressWhenSelectionNextToAWidget(e) {
    const t = this.editor, n = t.model, r = n.schema, s = t.plugins.get("Widget"), a = s._getObjectElementNextToSelection(e);
    return !!qn(t.editing.mapper.toViewElement(a), a, r) && (n.change((l) => {
      s._setSelectionOverElement(a), l.setSelectionAttribute(Gi, e ? "before" : "after");
    }), !0);
  }
  _handleArrowKeyPressWhenNonCollapsedSelection(e) {
    const t = this.editor, n = t.model, r = n.schema, s = t.editing.mapper, a = n.document.selection, l = e ? a.getLastPosition().nodeBefore : a.getFirstPosition().nodeAfter;
    return !!qn(s.toViewElement(l), l, r) && (n.change((c) => {
      c.setSelection(l, "on"), c.setSelectionAttribute(Gi, e ? "after" : "before");
    }), !0);
  }
  _enableInsertingParagraphsOnButtonClick() {
    const e = this.editor, t = e.editing.view;
    this._listenToIfEnabled(t.document, "mousedown", (n, r) => {
      const s = r.domTarget.closest(".ck-widget__type-around__button");
      if (!s) return;
      const a = function(d) {
        return d.classList.contains("ck-widget__type-around__button_before") ? "before" : "after";
      }(s), l = function(d, u) {
        const h = d.closest(".ck-widget");
        return u.mapDomToView(h);
      }(s, t.domConverter), c = e.editing.mapper.toModelElement(l);
      this._insertParagraph(c, a), r.preventDefault(), n.stop();
    });
  }
  _enableInsertingParagraphsOnEnterKeypress() {
    const e = this.editor, t = e.model.document.selection, n = e.editing.view;
    this._listenToIfEnabled(n.document, "enter", (r, s) => {
      if (r.eventPhase != "atTarget") return;
      const a = t.getSelectedElement(), l = e.editing.mapper.toViewElement(a), c = e.model.schema;
      let d;
      this._insertParagraphAccordingToFakeCaretPosition() ? d = !0 : qn(l, a, c) && (this._insertParagraph(a, s.isSoft ? "before" : "after"), d = !0), d && (s.preventDefault(), r.stop());
    }, { context: et });
  }
  _enableInsertingParagraphsOnTypingKeystroke() {
    const e = this.editor.editing.view.document;
    this._listenToIfEnabled(e, "insertText", (t, n) => {
      this._insertParagraphAccordingToFakeCaretPosition() && (n.selection = e.selection);
    }, { priority: "high" }), q.isAndroid ? this._listenToIfEnabled(e, "keydown", (t, n) => {
      n.keyCode == 229 && this._insertParagraphAccordingToFakeCaretPosition();
    }) : this._listenToIfEnabled(e, "compositionstart", () => {
      this._insertParagraphAccordingToFakeCaretPosition();
    }, { priority: "high" });
  }
  _enableDeleteIntegration() {
    const e = this.editor, t = e.editing.view, n = e.model, r = n.schema;
    this._listenToIfEnabled(t.document, "delete", (s, a) => {
      if (s.eventPhase != "atTarget") return;
      const l = wn(n.document.selection);
      if (!l) return;
      const c = a.direction, d = n.document.selection.getSelectedElement(), u = c == "forward";
      if (l === "before" === u) e.execute("delete", { selection: n.createSelection(d, "on") });
      else {
        const h = r.getNearestSelectionRange(n.createPositionAt(d, l), c);
        if (h) if (h.isCollapsed) {
          const g = n.createSelection(h.start);
          if (n.modifySelection(g, { direction: c }), g.focus.isEqual(h.start)) {
            const p = function(f, b) {
              let k = b;
              for (const _ of b.getAncestors({ parentFirst: !0 })) {
                if (_.childCount > 1 || f.isLimit(_)) break;
                k = _;
              }
              return k;
            }(r, h.start.parent);
            n.deleteContent(n.createSelection(p, "on"), { doNotAutoparagraph: !0 });
          } else n.change((p) => {
            p.setSelection(h), e.execute(u ? "deleteForward" : "delete");
          });
        } else n.change((g) => {
          g.setSelection(h), e.execute(u ? "deleteForward" : "delete");
        });
      }
      a.preventDefault(), s.stop();
    }, { context: et });
  }
  _enableInsertContentIntegration() {
    const e = this.editor, t = this.editor.model, n = t.document.selection;
    this._listenToIfEnabled(e.model, "insertContent", (r, [s, a]) => {
      if (a && !a.is("documentSelection")) return;
      const l = wn(n);
      return l ? (r.stop(), t.change((c) => {
        const d = n.getSelectedElement(), u = t.createPositionAt(d, l), h = c.createSelection(u), g = t.insertContent(s, h);
        return c.setSelection(h), g;
      })) : void 0;
    }, { priority: "high" });
  }
  _enableInsertObjectIntegration() {
    const e = this.editor, t = this.editor.model.document.selection;
    this._listenToIfEnabled(e.model, "insertObject", (n, r) => {
      const [, s, a = {}] = r;
      if (s && !s.is("documentSelection")) return;
      const l = wn(t);
      l && (a.findOptimalPosition = l, r[3] = a);
    }, { priority: "high" });
  }
  _enableDeleteContentIntegration() {
    const e = this.editor, t = this.editor.model.document.selection;
    this._listenToIfEnabled(e.model, "deleteContent", (n, [r]) => {
      r && !r.is("documentSelection") || wn(t) && n.stop();
    }, { priority: "high" });
  }
}
function KE(o) {
  const i = o.model;
  return (e, t) => {
    const n = t.keyCode == ne.arrowup, r = t.keyCode == ne.arrowdown, s = t.shiftKey, a = i.document.selection;
    if (!n && !r) return;
    const l = r;
    if (s && function(d, u) {
      return !d.isCollapsed && d.isBackward == u;
    }(a, l)) return;
    const c = function(d, u, h) {
      const g = d.model;
      if (h) {
        const p = u.isCollapsed ? u.focus : u.getLastPosition(), f = Ug(g, p, "forward");
        if (!f) return null;
        const b = g.createRange(p, f), k = qg(g.schema, b, "backward");
        return k ? g.createRange(p, k) : null;
      }
      {
        const p = u.isCollapsed ? u.focus : u.getFirstPosition(), f = Ug(g, p, "backward");
        if (!f) return null;
        const b = g.createRange(f, p), k = qg(g.schema, b, "forward");
        return k ? g.createRange(k, p) : null;
      }
    }(o, a, l);
    if (c) {
      if (c.isCollapsed && (a.isCollapsed || s))
        return;
      (c.isCollapsed || function(d, u, h) {
        const g = d.model, p = d.view.domConverter;
        if (h) {
          const w = g.createSelection(u.start);
          g.modifySelection(w), w.focus.isAtEnd || u.start.isEqual(w.focus) || (u = g.createRange(w.focus, u.end));
        }
        const f = d.mapper.toViewRange(u), b = p.viewRangeToDom(f), k = K.getDomRangeRects(b);
        let _;
        for (const w of k) if (_ !== void 0) {
          if (Math.round(w.top) >= _) return !1;
          _ = Math.max(_, Math.round(w.bottom));
        } else _ = Math.round(w.bottom);
        return !0;
      }(o, c, l)) && (i.change((d) => {
        const u = l ? c.end : c.start;
        if (s) {
          const h = i.createSelection(a.anchor);
          h.setFocus(u), d.setSelection(h);
        } else d.setSelection(u);
      }), e.stop(), t.preventDefault(), t.stopPropagation());
    }
  };
}
function Ug(o, i, e) {
  const t = o.schema, n = o.createRangeIn(i.root), r = e == "forward" ? "elementStart" : "elementEnd";
  for (const { previousPosition: s, item: a, type: l } of n.getWalker({ startPosition: i, direction: e })) {
    if (t.isLimit(a) && !t.isInline(a)) return s;
    if (l == r && t.isBlock(a)) return null;
  }
  return null;
}
function qg(o, i, e) {
  const t = e == "backward" ? i.end : i.start;
  if (o.checkChild(t, "$text")) return t;
  for (const { nextPosition: n } of i.getWalker({ direction: e })) if (o.checkChild(n, "$text")) return n;
  return null;
}
class dr extends A {
  constructor() {
    super(...arguments);
    m(this, "_previouslySelected", /* @__PURE__ */ new Set());
  }
  static get pluginName() {
    return "Widget";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [ZE, Di];
  }
  init() {
    const e = this.editor, t = e.editing.view, n = t.document, r = e.t;
    this.editor.editing.downcastDispatcher.on("selection", (s, a, l) => {
      const c = l.writer, d = a.selection;
      if (d.isCollapsed) return;
      const u = d.getSelectedElement();
      if (!u) return;
      const h = e.editing.mapper.toViewElement(u);
      et(h) && l.consumable.consume(d, "selection") && c.setSelection(c.createRangeOn(h), { fake: !0, label: UE(h) });
    }), this.editor.editing.downcastDispatcher.on("selection", (s, a, l) => {
      this._clearPreviouslySelectedWidgets(l.writer);
      const c = l.writer, d = c.document.selection;
      let u = null;
      for (const h of d.getRanges()) for (const g of h) {
        const p = g.item;
        et(p) && !YE(p, u) && (c.addClass(jg, p), this._previouslySelected.add(p), u = p);
      }
    }, { priority: "low" }), t.addObserver(ml), this.listenTo(n, "mousedown", (...s) => this._onMousedown(...s)), this.listenTo(n, "arrowKey", (...s) => {
      this._handleSelectionChangeOnArrowKeyPress(...s);
    }, { context: [et, "$text"] }), this.listenTo(n, "arrowKey", (...s) => {
      this._preventDefaultOnArrowKeyPress(...s);
    }, { context: "$root" }), this.listenTo(n, "arrowKey", KE(this.editor.editing), { context: "$text" }), this.listenTo(n, "delete", (s, a) => {
      this._handleDelete(a.direction == "forward") && (a.preventDefault(), s.stop());
    }, { context: "$root" }), this.listenTo(n, "tab", (s, a) => {
      s.eventPhase == "atTarget" && (a.shiftKey || this._selectFirstNestedEditable() && (a.preventDefault(), s.stop()));
    }, { context: et, priority: "low" }), this.listenTo(n, "tab", (s, a) => {
      a.shiftKey && this._selectAncestorWidget() && (a.preventDefault(), s.stop());
    }, { priority: "low" }), this.listenTo(n, "keydown", (s, a) => {
      a.keystroke == ne.esc && this._selectAncestorWidget() && (a.preventDefault(), s.stop());
    }, { priority: "low" }), e.accessibility.addKeystrokeInfoGroup({ id: "widget", label: r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"), keystrokes: [{ label: r("Move focus from an editable area back to the parent widget"), keystroke: "Esc" }, { label: r("Insert a new paragraph directly after a widget"), keystroke: "Enter" }, { label: r("Insert a new paragraph directly before a widget"), keystroke: "Shift+Enter" }, { label: r("Move the caret to allow typing directly before a widget"), keystroke: [["arrowup"], ["arrowleft"]] }, { label: r("Move the caret to allow typing directly after a widget"), keystroke: [["arrowdown"], ["arrowright"]] }] });
  }
  _onMousedown(e, t) {
    const n = this.editor, r = n.editing.view, s = r.document;
    let a = t.target;
    if (!a) return;
    if (t.domEvent.detail >= 3) return void (this._selectBlockContent(a) && t.preventDefault());
    if (!et(a)) {
      const c = function(d) {
        let u = d;
        for (; u; ) {
          if (u.is("editableElement") || et(u)) return u;
          u = u.parent;
        }
        return null;
      }(a);
      if (!c) return;
      if (et(c)) a = c;
      else {
        const d = function(u, h) {
          const g = Tk(h.domEvent);
          let p = null;
          if (p = g ? u.domConverter.domRangeToView(g) : u.createRange(u.createPositionAt(h.target, 0)), !p) return null;
          const f = p.start;
          if (!f.parent) return null;
          let b = f.parent;
          return f.parent.is("editableElement") && (f.isAtEnd && f.nodeBefore ? b = f.nodeBefore : f.isAtStart && f.nodeAfter && (b = f.nodeAfter)), b.is("$text") ? b.parent : b;
        }(r, t);
        if (!d || !et(d)) return;
        a = d;
      }
    }
    q.isAndroid && t.preventDefault(), s.isFocused || r.focus();
    const l = n.editing.mapper.toModelElement(a);
    this._setSelectionOverElement(l);
  }
  _selectBlockContent(e) {
    const t = this.editor, n = t.model, r = t.editing.mapper, s = n.schema, a = r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e, 0)), l = function(c, d) {
      for (const u of c.getAncestors({ includeSelf: !0, parentFirst: !0 })) {
        if (d.checkChild(u, "$text")) return u;
        if (d.isLimit(u) && !d.isObject(u)) break;
      }
      return null;
    }(r.toModelElement(a), n.schema);
    return !!l && (n.change((c) => {
      const d = s.isLimit(l) ? null : function(g, p) {
        const f = new Ji({ startPosition: g });
        for (const { item: b } of f) {
          if (p.isLimit(b) || !b.is("element")) return null;
          if (p.checkChild(b, "$text")) return b;
        }
        return null;
      }(c.createPositionAfter(l), s), u = c.createPositionAt(l, 0), h = d ? c.createPositionAt(d, 0) : c.createPositionAt(l, "end");
      c.setSelection(c.createRange(u, h));
    }), !0);
  }
  _handleSelectionChangeOnArrowKeyPress(e, t) {
    const n = t.keyCode, r = this.editor.model, s = r.schema, a = r.document.selection, l = a.getSelectedElement(), c = ll(n, this.editor.locale.contentLanguageDirection), d = c == "down" || c == "right", u = c == "up" || c == "down";
    if (l && s.isObject(l)) {
      const g = d ? a.getLastPosition() : a.getFirstPosition(), p = s.getNearestSelectionRange(g, d ? "forward" : "backward");
      return void (p && (r.change((f) => {
        f.setSelection(p);
      }), t.preventDefault(), e.stop()));
    }
    if (!a.isCollapsed && !t.shiftKey) {
      const g = a.getFirstPosition(), p = a.getLastPosition(), f = g.nodeAfter, b = p.nodeBefore;
      return void ((f && s.isObject(f) || b && s.isObject(b)) && (r.change((k) => {
        k.setSelection(d ? p : g);
      }), t.preventDefault(), e.stop()));
    }
    if (!a.isCollapsed) return;
    const h = this._getObjectElementNextToSelection(d);
    if (h && s.isObject(h)) {
      if (s.isInline(h) && u) return;
      this._setSelectionOverElement(h), t.preventDefault(), e.stop();
    }
  }
  _preventDefaultOnArrowKeyPress(e, t) {
    const n = this.editor.model, r = n.schema, s = n.document.selection.getSelectedElement();
    s && r.isObject(s) && (t.preventDefault(), e.stop());
  }
  _handleDelete(e) {
    const t = this.editor.model.document.selection;
    if (!this.editor.model.canEditAt(t) || !t.isCollapsed) return;
    const n = this._getObjectElementNextToSelection(e);
    return n ? (this.editor.model.change((r) => {
      let s = t.anchor.parent;
      for (; s.isEmpty; ) {
        const a = s;
        s = a.parent, r.remove(a);
      }
      this._setSelectionOverElement(n);
    }), !0) : void 0;
  }
  _setSelectionOverElement(e) {
    this.editor.model.change((t) => {
      t.setSelection(t.createRangeOn(e));
    });
  }
  _getObjectElementNextToSelection(e) {
    const t = this.editor.model, n = t.schema, r = t.document.selection, s = t.createSelection(r);
    if (t.modifySelection(s, { direction: e ? "forward" : "backward" }), s.isEqual(r)) return null;
    const a = e ? s.focus.nodeBefore : s.focus.nodeAfter;
    return a && n.isObject(a) ? a : null;
  }
  _clearPreviouslySelectedWidgets(e) {
    for (const t of this._previouslySelected) e.removeClass(jg, t);
    this._previouslySelected.clear();
  }
  _selectFirstNestedEditable() {
    const e = this.editor, t = this.editor.editing.view.document;
    for (const n of t.selection.getFirstRange().getItems()) if (n.is("editableElement")) {
      const r = e.editing.mapper.toModelElement(n);
      if (!r) continue;
      const s = e.model.createPositionAt(r, 0), a = e.model.schema.getNearestSelectionRange(s, "forward");
      return e.model.change((l) => {
        l.setSelection(a);
      }), !0;
    }
    return !1;
  }
  _selectAncestorWidget() {
    const e = this.editor, t = e.editing.mapper, n = e.editing.view.document.selection.getFirstPosition().parent, r = (n.is("$text") ? n.parent : n).findAncestor(et);
    if (!r) return !1;
    const s = t.toModelElement(r);
    return !!s && (e.model.change((a) => {
      a.setSelection(s, "on");
    }), !0);
  }
}
function YE(o, i) {
  return !!i && Array.from(o.getAncestors()).includes(i);
}
class Na extends A {
  constructor() {
    super(...arguments);
    m(this, "_toolbarDefinitions", /* @__PURE__ */ new Map());
    m(this, "_balloon");
  }
  static get requires() {
    return [Bi];
  }
  static get pluginName() {
    return "WidgetToolbarRepository";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor;
    if (e.plugins.has("BalloonToolbar")) {
      const t = e.plugins.get("BalloonToolbar");
      this.listenTo(t, "show", (n) => {
        (function(r) {
          const s = r.getSelectedElement();
          return !(!s || !et(s));
        })(e.editing.view.document.selection) && n.stop();
      }, { priority: "high" });
    }
    this._balloon = this.editor.plugins.get("ContextualBalloon"), this.on("change:isEnabled", () => {
      this._updateToolbarsVisibility();
    }), this.listenTo(e.ui, "update", () => {
      this._updateToolbarsVisibility();
    }), this.listenTo(e.ui.focusTracker, "change:isFocused", () => {
      this._updateToolbarsVisibility();
    }, { priority: "low" });
  }
  destroy() {
    super.destroy();
    for (const e of this._toolbarDefinitions.values()) e.view.destroy();
  }
  register(e, { ariaLabel: t, items: n, getRelatedElement: r, balloonClassName: s = "ck-toolbar-container", positions: a }) {
    if (!n.length) return void ce("widget-toolbar-no-items", { toolbarId: e });
    const l = this.editor, c = l.t, d = new Ts(l.locale);
    if (d.ariaLabel = t || c("Widget toolbar"), this._toolbarDefinitions.has(e)) throw new v("widget-toolbar-duplicated", this, { toolbarId: e });
    const u = { view: d, getRelatedElement: r, balloonClassName: s, itemsConfig: n, positions: a, initialized: !1 };
    l.ui.addToolbar(d, { isContextual: !0, beforeFocus: () => {
      const h = r(l.editing.view.document.selection);
      h && this._showToolbar(u, h);
    }, afterBlur: () => {
      this._hideToolbar(u);
    } }), this._toolbarDefinitions.set(e, u);
  }
  _updateToolbarsVisibility() {
    let e = 0, t = null, n = null;
    for (const r of this._toolbarDefinitions.values()) {
      const s = r.getRelatedElement(this.editor.editing.view.document.selection);
      if (this.isEnabled && s) if (this.editor.ui.focusTracker.isFocused) {
        const a = s.getAncestors().length;
        a > e && (e = a, t = s, n = r);
      } else this._isToolbarVisible(r) && this._hideToolbar(r);
      else this._isToolbarInBalloon(r) && this._hideToolbar(r);
    }
    n && this._showToolbar(n, t);
  }
  _hideToolbar(e) {
    this._balloon.remove(e.view), this.stopListening(this._balloon, "change:visibleView");
  }
  _showToolbar(e, t) {
    this._isToolbarVisible(e) ? Wg(this.editor, t, e.positions) : this._isToolbarInBalloon(e) || (e.initialized || (e.initialized = !0, e.view.fillFromConfig(e.itemsConfig, this.editor.ui.componentFactory)), this._balloon.add({ view: e.view, position: pw(this.editor, t, e.positions), balloonClassName: e.balloonClassName }), this.listenTo(this._balloon, "change:visibleView", () => {
      for (const n of this._toolbarDefinitions.values()) if (this._isToolbarVisible(n)) {
        const r = n.getRelatedElement(this.editor.editing.view.document.selection);
        Wg(this.editor, r, e.positions);
      }
    }));
  }
  _isToolbarVisible(e) {
    return this._balloon.visibleView === e.view;
  }
  _isToolbarInBalloon(e) {
    return this._balloon.hasView(e.view);
  }
}
function Wg(o, i, e) {
  const t = o.plugins.get("ContextualBalloon"), n = pw(o, i, e);
  t.updatePosition(n);
}
function pw(o, i, e) {
  const t = o.editing.view, n = lt.defaultPositions;
  return { target: t.domConverter.mapViewToDom(i), positions: e || [n.northArrowSouth, n.northArrowSouthWest, n.northArrowSouthEast, n.southArrowNorth, n.southArrowNorthWest, n.southArrowNorthEast, n.viewportStickyNorth] };
}
class QE extends xe() {
  constructor(e) {
    super();
    m(this, "_referenceCoordinates");
    m(this, "_options");
    m(this, "_originalWidth");
    m(this, "_originalHeight");
    m(this, "_originalWidthPercents");
    m(this, "_aspectRatio");
    this.set("activeHandlePosition", null), this.set("proposedWidthPercents", null), this.set("proposedWidth", null), this.set("proposedHeight", null), this.set("proposedHandleHostWidth", null), this.set("proposedHandleHostHeight", null), this._options = e, this._referenceCoordinates = null;
  }
  get originalWidth() {
    return this._originalWidth;
  }
  get originalHeight() {
    return this._originalHeight;
  }
  get originalWidthPercents() {
    return this._originalWidthPercents;
  }
  get aspectRatio() {
    return this._aspectRatio;
  }
  begin(e, t, n) {
    const r = new K(t);
    this.activeHandlePosition = function(a) {
      const l = ["top-left", "top-right", "bottom-right", "bottom-left"];
      for (const c of l) if (a.classList.contains(JE(c))) return c;
    }(e), this._referenceCoordinates = function(a, l) {
      const c = new K(a), d = l.split("-"), u = { x: d[1] == "right" ? c.right : c.left, y: d[0] == "bottom" ? c.bottom : c.top };
      return u.x += a.ownerDocument.defaultView.scrollX, u.y += a.ownerDocument.defaultView.scrollY, u;
    }(t, function(a) {
      const l = a.split("-"), c = { top: "bottom", bottom: "top", left: "right", right: "left" };
      return `${c[l[0]]}-${c[l[1]]}`;
    }(this.activeHandlePosition)), this._originalWidth = r.width, this._originalHeight = r.height, this._aspectRatio = r.width / r.height;
    const s = n.style.width;
    s && s.match(/^\d+(\.\d*)?%$/) ? this._originalWidthPercents = parseFloat(s) : this._originalWidthPercents = WE(n, r);
  }
  update(e) {
    this.proposedWidth = e.width, this.proposedHeight = e.height, this.proposedWidthPercents = e.widthPercents, this.proposedHandleHostWidth = e.handleHostWidth, this.proposedHandleHostHeight = e.handleHostHeight;
  }
}
function JE(o) {
  return `ck-widget__resizer__handle-${o}`;
}
class XE extends N {
  constructor() {
    super();
    const i = this.bindTemplate;
    this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-size-view", i.to("_viewPosition", (e) => e ? `ck-orientation-${e}` : "")], style: { display: i.if("_isVisible", "none", (e) => !e) } }, children: [{ text: i.to("_label") }] });
  }
  _bindToState(i, e) {
    this.bind("_isVisible").to(e, "proposedWidth", e, "proposedHeight", (t, n) => t !== null && n !== null), this.bind("_label").to(e, "proposedHandleHostWidth", e, "proposedHandleHostHeight", e, "proposedWidthPercents", (t, n, r) => i.unit === "px" ? `${t}×${n}` : `${r}%`), this.bind("_viewPosition").to(e, "activeHandlePosition", e, "proposedHandleHostWidth", e, "proposedHandleHostHeight", (t, n, r) => n < 50 || r < 50 ? "above-center" : t);
  }
  _dismiss() {
    this.unbind(), this._isVisible = !1;
  }
}
class Gg extends xe() {
  constructor(e) {
    super();
    m(this, "_state");
    m(this, "_sizeView");
    m(this, "_options");
    m(this, "_viewResizerWrapper", null);
    m(this, "_initialViewWidth");
    this._options = e, this.set("isEnabled", !0), this.set("isSelected", !1), this.bind("isVisible").to(this, "isEnabled", this, "isSelected", (t, n) => t && n), this.decorate("begin"), this.decorate("cancel"), this.decorate("commit"), this.decorate("updateSize"), this.on("commit", (t) => {
      this.state.proposedWidth || this.state.proposedWidthPercents || (this._cleanup(), t.stop());
    }, { priority: "high" });
  }
  get state() {
    return this._state;
  }
  show() {
    this._options.editor.editing.view.change((e) => {
      e.removeClass("ck-hidden", this._viewResizerWrapper);
    });
  }
  hide() {
    this._options.editor.editing.view.change((e) => {
      e.addClass("ck-hidden", this._viewResizerWrapper);
    });
  }
  attach() {
    const e = this, t = this._options.viewElement;
    this._options.editor.editing.view.change((n) => {
      const r = n.createUIElement("div", { class: "ck ck-reset_all ck-widget__resizer" }, function(s) {
        const a = this.toDomElement(s);
        return e._appendHandles(a), e._appendSizeUI(a), a;
      });
      n.insert(n.createPositionAt(t, "end"), r), n.addClass("ck-widget_with-resizer", t), this._viewResizerWrapper = r, this.isVisible || this.hide();
    }), this.on("change:isVisible", () => {
      this.isVisible ? (this.show(), this.redraw()) : this.hide();
    });
  }
  begin(e) {
    this._state = new QE(this._options), this._sizeView._bindToState(this._options, this.state), this._initialViewWidth = this._options.viewElement.getStyle("width"), this.state.begin(e, this._getHandleHost(), this._getResizeHost());
  }
  updateSize(e) {
    const t = this._proposeNewSize(e);
    this._options.editor.editing.view.change((c) => {
      const d = this._options.unit || "%", u = (d === "%" ? t.widthPercents : t.width) + d;
      c.setStyle("width", u, this._options.viewElement);
    });
    const n = this._getHandleHost(), r = new K(n), s = Math.round(r.width), a = Math.round(r.height), l = new K(n);
    t.width = Math.round(l.width), t.height = Math.round(l.height), this.redraw(r), this.state.update({ ...t, handleHostWidth: s, handleHostHeight: a });
  }
  commit() {
    const e = this._options.unit || "%", t = (e === "%" ? this.state.proposedWidthPercents : this.state.proposedWidth) + e;
    this._options.editor.editing.view.change(() => {
      this._cleanup(), this._options.onCommit(t);
    });
  }
  cancel() {
    this._cleanup();
  }
  destroy() {
    this.cancel();
  }
  redraw(e) {
    const t = this._domResizerWrapper;
    if (!((n = t) && n.ownerDocument && n.ownerDocument.contains(n))) return;
    var n;
    const r = t.parentElement, s = this._getHandleHost(), a = this._viewResizerWrapper, l = [a.getStyle("width"), a.getStyle("height"), a.getStyle("left"), a.getStyle("top")];
    let c;
    if (r.isSameNode(s)) {
      const d = e || new K(s);
      c = [d.width + "px", d.height + "px", void 0, void 0];
    } else c = [s.offsetWidth + "px", s.offsetHeight + "px", s.offsetLeft + "px", s.offsetTop + "px"];
    At(l, c) !== "same" && this._options.editor.editing.view.change((d) => {
      d.setStyle({ width: c[0], height: c[1], left: c[2], top: c[3] }, a);
    });
  }
  containsHandle(e) {
    return this._domResizerWrapper.contains(e);
  }
  static isResizeHandle(e) {
    return e.classList.contains("ck-widget__resizer__handle");
  }
  _cleanup() {
    this._sizeView._dismiss(), this._options.editor.editing.view.change((e) => {
      e.setStyle("width", this._initialViewWidth, this._options.viewElement);
    });
  }
  _proposeNewSize(e) {
    const t = this.state, n = { x: (r = e).pageX, y: r.pageY };
    var r;
    const s = !this._options.isCentered || this._options.isCentered(this), a = { x: t._referenceCoordinates.x - (n.x + t.originalWidth), y: n.y - t.originalHeight - t._referenceCoordinates.y };
    s && t.activeHandlePosition.endsWith("-right") && (a.x = n.x - (t._referenceCoordinates.x + t.originalWidth)), s && (a.x *= 2);
    let l = Math.abs(t.originalWidth + a.x), c = Math.abs(t.originalHeight + a.y);
    return (l / t.aspectRatio > c ? "width" : "height") == "width" ? c = l / t.aspectRatio : l = c * t.aspectRatio, { width: Math.round(l), height: Math.round(c), widthPercents: Math.min(Math.round(t.originalWidthPercents / t.originalWidth * l * 100) / 100, 100) };
  }
  _getResizeHost() {
    const e = this._domResizerWrapper.parentElement;
    return this._options.getResizeHost(e);
  }
  _getHandleHost() {
    const e = this._domResizerWrapper.parentElement;
    return this._options.getHandleHost(e);
  }
  get _domResizerWrapper() {
    return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper);
  }
  _appendHandles(e) {
    const t = ["top-left", "top-right", "bottom-right", "bottom-left"];
    for (const r of t) e.appendChild(new li({ tag: "div", attributes: { class: "ck-widget__resizer__handle " + (n = r, `ck-widget__resizer__handle-${n}`) } }).render());
    var n;
  }
  _appendSizeUI(e) {
    this._sizeView = new XE(), this._sizeView.render(), e.appendChild(this._sizeView.element);
  }
}
class uc extends A {
  constructor() {
    super(...arguments);
    m(this, "_resizers", /* @__PURE__ */ new Map());
    m(this, "_observer");
    m(this, "_redrawSelectedResizerThrottled");
  }
  static get pluginName() {
    return "WidgetResize";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor.editing, t = z.window.document;
    this.set("selectedResizer", null), this.set("_activeResizer", null), e.view.addObserver(ml), this._observer = new (Nt())(), this.listenTo(e.view.document, "mousedown", this._mouseDownListener.bind(this), { priority: "high" }), this._observer.listenTo(t, "mousemove", this._mouseMoveListener.bind(this)), this._observer.listenTo(t, "mouseup", this._mouseUpListener.bind(this)), this._redrawSelectedResizerThrottled = Xo(() => this.redrawSelectedResizer(), 200), this.editor.ui.on("update", this._redrawSelectedResizerThrottled), this.editor.model.document.on("change", () => {
      for (const [r, s] of this._resizers) r.isAttached() || (this._resizers.delete(r), s.destroy());
    }, { priority: "lowest" }), this._observer.listenTo(z.window, "resize", this._redrawSelectedResizerThrottled);
    const n = this.editor.editing.view.document.selection;
    n.on("change", () => {
      const r = n.getSelectedElement(), s = this.getResizerByViewElement(r) || null;
      s ? this.select(s) : this.deselect();
    });
  }
  redrawSelectedResizer() {
    this.selectedResizer && this.selectedResizer.isVisible && this.selectedResizer.redraw();
  }
  destroy() {
    super.destroy(), this._observer.stopListening();
    for (const e of this._resizers.values()) e.destroy();
    this._redrawSelectedResizerThrottled.cancel();
  }
  select(e) {
    this.deselect(), this.selectedResizer = e, this.selectedResizer.isSelected = !0;
  }
  deselect() {
    this.selectedResizer && (this.selectedResizer.isSelected = !1), this.selectedResizer = null;
  }
  attachTo(e) {
    const t = new Gg(e), n = this.editor.plugins;
    if (t.attach(), n.has("WidgetToolbarRepository")) {
      const s = n.get("WidgetToolbarRepository");
      t.on("begin", () => {
        s.forceDisabled("resize");
      }, { priority: "lowest" }), t.on("cancel", () => {
        s.clearForceDisabled("resize");
      }, { priority: "highest" }), t.on("commit", () => {
        s.clearForceDisabled("resize");
      }, { priority: "highest" });
    }
    this._resizers.set(e.viewElement, t);
    const r = this.editor.editing.view.document.selection.getSelectedElement();
    return this.getResizerByViewElement(r) == t && this.select(t), t;
  }
  getResizerByViewElement(e) {
    return this._resizers.get(e);
  }
  _getResizerByHandle(e) {
    for (const t of this._resizers.values()) if (t.containsHandle(e)) return t;
  }
  _mouseDownListener(e, t) {
    const n = t.domTarget;
    Gg.isResizeHandle(n) && (this._activeResizer = this._getResizerByHandle(n) || null, this._activeResizer && (this._activeResizer.begin(n), e.stop(), t.preventDefault()));
  }
  _mouseMoveListener(e, t) {
    this._activeResizer && this._activeResizer.updateSize(t);
  }
  _mouseUpListener() {
    this._activeResizer && (this._activeResizer.commit(), this._activeResizer = null);
  }
}
class ds extends Fi {
  constructor(e) {
    super(e);
    m(this, "domEventType", ["paste", "copy", "cut", "drop", "dragover", "dragstart", "dragend", "dragenter", "dragleave"]);
    const t = this.document;
    function n(r) {
      return (s, a) => {
        a.preventDefault();
        const l = a.dropRange ? [a.dropRange] : null, c = new sn(t, r);
        t.fire(c, { dataTransfer: a.dataTransfer, method: s.name, targetRanges: l, target: a.target, domEvent: a.domEvent }), c.stop.called && a.stopPropagation();
      };
    }
    this.listenTo(t, "paste", n("clipboardInput"), { priority: "low" }), this.listenTo(t, "drop", n("clipboardInput"), { priority: "low" }), this.listenTo(t, "dragover", n("dragging"), { priority: "low" });
  }
  onDomEvent(e) {
    const t = "clipboardData" in e ? e.clipboardData : e.dataTransfer, n = e.type == "drop" || e.type == "paste", r = { dataTransfer: new Kk(t, { cacheFiles: n }) };
    if (e.type == "drop" || e.type == "dragover") {
      const s = Tk(e);
      r.dropRange = s && this.view.domConverter.domRangeToView(s);
    }
    this.fire(e.type, e, r);
  }
}
function e3(o) {
  return ((o = o.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\r?\n\r?\n/g, "</p><p>").replace(/\r?\n/g, "<br>").replace(/\t/g, "&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/, "&nbsp;").replace(/\s$/, "&nbsp;").replace(/\s\s/g, " &nbsp;")).includes("</p><p>") || o.includes("<br>")) && (o = `<p>${o}</p>`), o;
}
const Zg = ["figcaption", "li"], Kg = ["ol", "ul"];
function fw(o, i) {
  if (i.is("$text") || i.is("$textProxy")) return i.data;
  if (i.is("element", "img") && i.hasAttribute("alt")) return i.getAttribute("alt");
  if (i.is("element", "br")) return `
`;
  let e = "", t = null;
  for (const n of i.getChildren()) e += t3(n, t) + fw(o, n), t = n;
  if (i.is("rawElement")) {
    const n = document.createElement("div");
    i.render(n, o), e += bw(n);
  }
  return e;
}
function bw(o) {
  let i = "";
  if (o.nodeType === Node.TEXT_NODE) return o.textContent;
  if (o.tagName === "BR") return `
`;
  for (const e of o.childNodes) i += bw(e);
  return i;
}
function t3(o, i) {
  return i ? o.is("element", "li") && !o.isEmpty && o.getChild(0).is("containerElement") || Kg.includes(o.name) && Kg.includes(i.name) ? `

` : o.is("containerElement") || i.is("containerElement") ? Zg.includes(o.name) || Zg.includes(i.name) ? `
` : o.is("element") && o.getCustomProperty("dataPipeline:transparentRendering") || i.is("element") && i.getCustomProperty("dataPipeline:transparentRendering") ? "" : `

` : "" : "";
}
class Gr extends A {
  constructor() {
    super(...arguments);
    m(this, "_markersToCopy", /* @__PURE__ */ new Map());
  }
  static get pluginName() {
    return "ClipboardMarkersUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  _registerMarkerToCopy(e, t) {
    this._markersToCopy.set(e, t);
  }
  _copySelectedFragmentWithMarkers(e, t, n = (r) => r.model.getSelectedContent(r.model.document.selection)) {
    return this.editor.model.change((r) => {
      const s = r.model.document.selection;
      r.setSelection(t);
      const a = this._insertFakeMarkersIntoSelection(r, r.model.document.selection, e), l = n(r), c = this._removeFakeMarkersInsideElement(r, l);
      for (const [d, u] of Object.entries(a)) {
        c[d] || (c[d] = r.createRangeIn(l));
        for (const h of u) r.remove(h);
      }
      l.markers.clear();
      for (const [d, u] of Object.entries(c)) l.markers.set(d, u);
      return r.setSelection(s), l;
    });
  }
  _pasteMarkersIntoTransformedElement(e, t) {
    const n = this._getPasteMarkersFromRangeMap(e);
    return this.editor.model.change((r) => {
      const s = this._insertFakeMarkersElements(r, n), a = t(r), l = this._removeFakeMarkersInsideElement(r, a);
      for (const c of Object.values(s).flat()) r.remove(c);
      for (const [c, d] of Object.entries(l)) r.model.markers.has(c) || r.addMarker(c, { usingOperation: !0, affectsData: !0, range: d });
      return a;
    });
  }
  _pasteFragmentWithMarkers(e) {
    const t = this._getPasteMarkersFromRangeMap(e.markers);
    e.markers.clear();
    for (const n of t) e.markers.set(n.name, n.range);
    return this.editor.model.insertContent(e);
  }
  _forceMarkersCopy(e, t, n = { allowedActions: "all", copyPartiallySelected: !0, duplicateOnPaste: !0 }) {
    const r = this._markersToCopy.get(e);
    this._markersToCopy.set(e, n), t(), r ? this._markersToCopy.set(e, r) : this._markersToCopy.delete(e);
  }
  _isMarkerCopyable(e, t) {
    const n = this._getMarkerClipboardConfig(e);
    if (!n) return !1;
    if (!t) return !0;
    const { allowedActions: r } = n;
    return r === "all" || r.includes(t);
  }
  _hasMarkerConfiguration(e) {
    return !!this._getMarkerClipboardConfig(e);
  }
  _getMarkerClipboardConfig(e) {
    const [t] = e.split(":");
    return this._markersToCopy.get(t) || null;
  }
  _insertFakeMarkersIntoSelection(e, t, n) {
    const r = this._getCopyableMarkersFromSelection(e, t, n);
    return this._insertFakeMarkersElements(e, r);
  }
  _getCopyableMarkersFromSelection(e, t, n) {
    const r = Array.from(t.getRanges()), s = new Set(r.flatMap((a) => Array.from(e.model.markers.getMarkersIntersectingRange(a))));
    return Array.from(s).filter((a) => {
      if (!this._isMarkerCopyable(a.name, n)) return !1;
      const { copyPartiallySelected: l } = this._getMarkerClipboardConfig(a.name);
      if (!l) {
        const c = a.getRange();
        return r.some((d) => d.containsRange(c, !0));
      }
      return !0;
    }).map((a) => ({ name: n === "dragstart" ? this._getUniqueMarkerName(a.name) : a.name, range: a.getRange() }));
  }
  _getPasteMarkersFromRangeMap(e, t = null) {
    const { model: n } = this.editor;
    return (e instanceof Map ? Array.from(e.entries()) : Object.entries(e)).flatMap(([r, s]) => {
      if (!this._hasMarkerConfiguration(r)) return [{ name: r, range: s }];
      if (this._isMarkerCopyable(r, t)) {
        const a = this._getMarkerClipboardConfig(r), l = n.markers.has(r) && n.markers.get(r).getRange().root.rootName === "$graveyard";
        return (a.duplicateOnPaste || l) && (r = this._getUniqueMarkerName(r)), [{ name: r, range: s }];
      }
      return [];
    });
  }
  _insertFakeMarkersElements(e, t) {
    const n = {}, r = t.flatMap((s) => {
      const { start: a, end: l } = s.range;
      return [{ position: a, marker: s, type: "start" }, { position: l, marker: s, type: "end" }];
    }).sort(({ position: s }, { position: a }) => s.isBefore(a) ? 1 : -1);
    for (const { position: s, marker: a, type: l } of r) {
      const c = e.createElement("$marker", { "data-name": a.name, "data-type": l });
      n[a.name] || (n[a.name] = []), n[a.name].push(c), e.insert(c, s);
    }
    return n;
  }
  _removeFakeMarkersInsideElement(e, t) {
    return E2(this._getAllFakeMarkersFromElement(e, t).reduce((n, r) => {
      const s = r.markerElement && e.createPositionBefore(r.markerElement);
      let a = n[r.name], l = !1;
      return a != null && a.start && (a != null && a.end) && (this._getMarkerClipboardConfig(r.name).duplicateOnPaste ? n[this._getUniqueMarkerName(r.name)] = n[r.name] : l = !0, a = null), l || (n[r.name] = { ...a, [r.type]: s }), r.markerElement && e.remove(r.markerElement), n;
    }, {}), (n) => new T(n.start || e.createPositionFromPath(t, [0]), n.end || e.createPositionAt(t, "end")));
  }
  _getAllFakeMarkersFromElement(e, t) {
    const n = Array.from(e.createRangeIn(t)).flatMap(({ item: a }) => {
      if (!a.is("element", "$marker")) return [];
      const l = a.getAttribute("data-name"), c = a.getAttribute("data-type");
      return [{ markerElement: a, name: l, type: c }];
    }), r = [], s = [];
    for (const a of n)
      a.type === "end" && (n.some((l) => l.name === a.name && l.type === "start") || r.push({ markerElement: null, name: a.name, type: "start" })), a.type === "start" && (n.some((l) => l.name === a.name && l.type === "end") || s.unshift({ markerElement: null, name: a.name, type: "end" }));
    return [...r, ...n, ...s];
  }
  _getUniqueMarkerName(e) {
    const t = e.split(":"), n = Tt().substring(1, 6);
    return t.length === 3 ? `${t.slice(0, 2).join(":")}:${n}` : `${t.join(":")}:${n}`;
  }
}
class Lt extends A {
  static get pluginName() {
    return "ClipboardPipeline";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Gr];
  }
  init() {
    this.editor.editing.view.addObserver(ds), this._setupPasteDrop(), this._setupCopyCut();
  }
  _fireOutputTransformationEvent(i, e, t) {
    const n = this.editor.plugins.get("ClipboardMarkersUtils");
    this.editor.model.enqueueChange({ isUndoable: t === "cut" }, () => {
      const r = n._copySelectedFragmentWithMarkers(t, e);
      this.fire("outputTransformation", { dataTransfer: i, content: r, method: t });
    });
  }
  _setupPasteDrop() {
    const i = this.editor, e = i.model, t = i.editing.view, n = t.document, r = this.editor.plugins.get("ClipboardMarkersUtils");
    this.listenTo(n, "clipboardInput", (s, a) => {
      a.method != "paste" || i.model.canEditAt(i.model.document.selection) || s.stop();
    }, { priority: "highest" }), this.listenTo(n, "clipboardInput", (s, a) => {
      const l = a.dataTransfer;
      let c;
      if (a.content) c = a.content;
      else {
        let h = "";
        l.getData("text/html") ? h = function(g) {
          return g.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, (p, f) => f.length == 1 ? " " : f).replace(/<!--[\s\S]*?-->/g, "");
        }(l.getData("text/html")) : l.getData("text/plain") && (h = e3(l.getData("text/plain"))), c = this.editor.data.htmlProcessor.toView(h);
      }
      const d = new sn(this, "inputTransformation"), u = l.getData("application/ckeditor5-editor-id") || null;
      this.fire(d, { content: c, dataTransfer: l, sourceEditorId: u, targetRanges: a.targetRanges, method: a.method }), d.stop.called && s.stop(), t.scrollToTheSelection();
    }, { priority: "low" }), this.listenTo(this, "inputTransformation", (s, a) => {
      if (a.content.isEmpty) return;
      const l = this.editor.data.toModel(a.content, "$clipboardHolder");
      l.childCount != 0 && (s.stop(), e.change(() => {
        this.fire("contentInsertion", { content: l, method: a.method, sourceEditorId: a.sourceEditorId, dataTransfer: a.dataTransfer, targetRanges: a.targetRanges });
      }));
    }, { priority: "low" }), this.listenTo(this, "contentInsertion", (s, a) => {
      a.resultRange = r._pasteFragmentWithMarkers(a.content);
    }, { priority: "low" });
  }
  _setupCopyCut() {
    const i = this.editor, e = i.model.document, t = i.editing.view.document, n = (r, s) => {
      const a = s.dataTransfer;
      s.preventDefault(), this._fireOutputTransformationEvent(a, e.selection, r.name);
    };
    this.listenTo(t, "copy", n, { priority: "low" }), this.listenTo(t, "cut", (r, s) => {
      i.model.canEditAt(i.model.document.selection) ? n(r, s) : s.preventDefault();
    }, { priority: "low" }), this.listenTo(this, "outputTransformation", (r, s) => {
      const a = i.data.toView(s.content, { isClipboardPipeline: !0 });
      t.fire("clipboardOutput", { dataTransfer: s.dataTransfer, content: a, method: s.method });
    }, { priority: "low" }), this.listenTo(t, "clipboardOutput", (r, s) => {
      s.content.isEmpty || (s.dataTransfer.setData("text/html", this.editor.data.htmlProcessor.toData(s.content)), s.dataTransfer.setData("text/plain", fw(i.data.htmlProcessor.domConverter, s.content)), s.dataTransfer.setData("application/ckeditor5-editor-id", this.editor.id)), s.method == "cut" && i.model.deleteContent(e.selection);
    }, { priority: "low" });
  }
}
const hc = Nn("px");
class i3 extends N {
  constructor() {
    super();
    const i = this.bindTemplate;
    this.set({ isVisible: !1, left: null, top: null, width: null }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-clipboard-drop-target-line", i.if("isVisible", "ck-hidden", (e) => !e)], style: { left: i.to("left", (e) => hc(e)), top: i.to("top", (e) => hc(e)), width: i.to("width", (e) => hc(e)) } } });
  }
}
class Us extends A {
  constructor() {
    super(...arguments);
    m(this, "removeDropMarkerDelayed", fu(() => this.removeDropMarker(), 40));
    m(this, "_updateDropMarkerThrottled", Xo((e) => this._updateDropMarker(e), 40));
    m(this, "_reconvertMarkerThrottled", Xo(() => {
      this.editor.model.markers.has("drop-target") && this.editor.editing.reconvertMarker("drop-target");
    }, 0));
    m(this, "_dropTargetLineView", new i3());
    m(this, "_domEmitter", new (Nt())());
    m(this, "_scrollables", /* @__PURE__ */ new Map());
  }
  static get pluginName() {
    return "DragDropTarget";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this._setupDropMarker();
  }
  destroy() {
    this._domEmitter.stopListening();
    for (const { resizeObserver: e } of this._scrollables.values()) e.destroy();
    return this._updateDropMarkerThrottled.cancel(), this.removeDropMarkerDelayed.cancel(), this._reconvertMarkerThrottled.cancel(), super.destroy();
  }
  updateDropMarker(e, t, n, r, s, a) {
    this.removeDropMarkerDelayed.cancel();
    const l = Yg(this.editor, e, t, n, r, s, a);
    if (l) return a && a.containsRange(l) ? this.removeDropMarker() : void this._updateDropMarkerThrottled(l);
  }
  getFinalDropRange(e, t, n, r, s, a) {
    const l = Yg(this.editor, e, t, n, r, s, a);
    return this.removeDropMarker(), l;
  }
  removeDropMarker() {
    const e = this.editor.model;
    this.removeDropMarkerDelayed.cancel(), this._updateDropMarkerThrottled.cancel(), this._dropTargetLineView.isVisible = !1, e.markers.has("drop-target") && e.change((t) => {
      t.removeMarker("drop-target");
    });
  }
  _setupDropMarker() {
    const e = this.editor;
    e.ui.view.body.add(this._dropTargetLineView), e.conversion.for("editingDowncast").markerToHighlight({ model: "drop-target", view: { classes: ["ck-clipboard-drop-target-range"] } }), e.conversion.for("editingDowncast").markerToElement({ model: "drop-target", view: (t, { writer: n }) => {
      if (e.model.schema.checkChild(t.markerRange.start, "$text")) return this._dropTargetLineView.isVisible = !1, this._createDropTargetPosition(n);
      t.markerRange.isCollapsed ? this._updateDropTargetLine(t.markerRange) : this._dropTargetLineView.isVisible = !1;
    } });
  }
  _updateDropMarker(e) {
    const t = this.editor, n = t.model.markers;
    t.model.change((r) => {
      n.has("drop-target") ? n.get("drop-target").getRange().isEqual(e) || r.updateMarker("drop-target", { range: e }) : r.addMarker("drop-target", { range: e, usingOperation: !1, affectsData: !1 });
    });
  }
  _createDropTargetPosition(e) {
    return e.createUIElement("span", { class: "ck ck-clipboard-drop-target-position" }, function(t) {
      const n = this.toDomElement(t);
      return n.append("⁠", t.createElement("span"), "⁠"), n;
    });
  }
  _updateDropTargetLine(e) {
    const t = this.editor.editing, n = e.start.nodeBefore, r = e.start.nodeAfter, s = e.start.parent, a = n ? t.mapper.toViewElement(n) : null, l = a ? t.view.domConverter.mapViewToDom(a) : null, c = r ? t.mapper.toViewElement(r) : null, d = c ? t.view.domConverter.mapViewToDom(c) : null, u = t.mapper.toViewElement(s);
    if (!u) return;
    const h = t.view.domConverter.mapViewToDom(u), g = this._getScrollableRect(u), { scrollX: p, scrollY: f } = z.window, b = l ? new K(l) : null, k = d ? new K(d) : null, _ = new K(h).excludeScrollbarsAndBorders(), w = b ? b.bottom : _.top, y = k ? k.top : _.bottom, x = z.window.getComputedStyle(h), C = w <= y ? (w + y) / 2 : y;
    if (g.top < C && C < g.bottom) {
      const S = _.left + parseFloat(x.paddingLeft), L = _.right - parseFloat(x.paddingRight), W = Math.max(S + p, g.left), Y = Math.min(L + p, g.right);
      this._dropTargetLineView.set({ isVisible: !0, left: W, top: C + f, width: Y - W });
    } else this._dropTargetLineView.isVisible = !1;
  }
  _getScrollableRect(e) {
    const t = e.root.rootName;
    let n;
    if (this._scrollables.has(t)) n = this._scrollables.get(t).domElement;
    else {
      n = function(s) {
        let a = s;
        do {
          a = a.parentElement;
          const l = z.window.getComputedStyle(a).overflowY;
          if (l == "auto" || l == "scroll") break;
        } while (a.tagName != "BODY");
        return a;
      }(this.editor.editing.view.domConverter.mapViewToDom(e)), this._domEmitter.listenTo(n, "scroll", this._reconvertMarkerThrottled, { usePassive: !0 });
      const r = new io(n, this._reconvertMarkerThrottled);
      this._scrollables.set(t, { domElement: n, resizeObserver: r });
    }
    return new K(n).excludeScrollbarsAndBorders();
  }
}
function Yg(o, i, e, t, n, r, s) {
  const a = o.model, l = o.editing.mapper;
  let c = Qg(o, i);
  for (; c; ) {
    if (!r) {
      if (a.schema.checkChild(c, "$text")) {
        if (e) {
          const d = e[0].start, u = l.toModelPosition(d);
          if (!s || Array.from(s.getItems({ shallow: !0 })).every((h) => a.schema.checkChild(u, h))) {
            if (a.schema.checkChild(u, "$text")) return a.createRange(u);
            if (d) return qs(o, Qg(o, d.parent), t, n);
          }
        }
      } else if (a.schema.isInline(c)) return qs(o, c, t, n);
    }
    if (a.schema.isBlock(c)) return qs(o, c, t, n);
    if (a.schema.checkChild(c, "$block")) {
      const d = Array.from(c.getChildren()).filter((g) => g.is("element") && !n3(o, g));
      let u = 0, h = d.length;
      if (h == 0) return a.createRange(a.createPositionAt(c, "end"));
      for (; u < h - 1; ) {
        const g = Math.floor((u + h) / 2);
        kw(o, d[g], t, n) == "before" ? h = g : u = g;
      }
      return qs(o, d[u], t, n);
    }
    c = c.parent;
  }
  return null;
}
function n3(o, i) {
  const e = o.editing.mapper, t = o.editing.view.domConverter, n = e.toViewElement(i);
  if (!n) return !0;
  const r = t.mapViewToDom(n);
  return z.window.getComputedStyle(r).float != "none";
}
function qs(o, i, e, t) {
  const n = o.model;
  return n.createRange(n.createPositionAt(i, kw(o, i, e, t)));
}
function kw(o, i, e, t) {
  const n = o.editing.mapper, r = o.editing.view.domConverter, s = n.toViewElement(i), a = r.mapViewToDom(s), l = new K(a);
  return o.model.schema.isInline(i) ? e < (l.left + l.right) / 2 ? "before" : "after" : t < (l.top + l.bottom) / 2 ? "before" : "after";
}
function Qg(o, i) {
  const e = o.editing.mapper, t = o.editing.view, n = e.toModelElement(i);
  if (n) return n;
  const r = t.createPositionBefore(i), s = e.findMappedViewAncestor(r);
  return e.toModelElement(s);
}
class o3 extends A {
  constructor() {
    super(...arguments);
    m(this, "_isBlockDragging", !1);
    m(this, "_domEmitter", new (Nt())());
  }
  static get pluginName() {
    return "DragDropBlockToolbar";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor;
    if (this.listenTo(e, "change:isReadOnly", (t, n, r) => {
      r ? (this.forceDisabled("readOnlyMode"), this._isBlockDragging = !1) : this.clearForceDisabled("readOnlyMode");
    }), q.isAndroid && this.forceDisabled("noAndroidSupport"), e.plugins.has("BlockToolbar")) {
      const t = e.plugins.get("BlockToolbar").buttonView.element;
      this._domEmitter.listenTo(t, "dragstart", (n, r) => this._handleBlockDragStart(r)), this._domEmitter.listenTo(z.document, "dragover", (n, r) => this._handleBlockDragging(r)), this._domEmitter.listenTo(z.document, "drop", (n, r) => this._handleBlockDragging(r)), this._domEmitter.listenTo(z.document, "dragend", () => this._handleBlockDragEnd(), { useCapture: !0 }), this.isEnabled && t.setAttribute("draggable", "true"), this.on("change:isEnabled", (n, r, s) => {
        t.setAttribute("draggable", s ? "true" : "false");
      });
    }
  }
  destroy() {
    return this._domEmitter.stopListening(), super.destroy();
  }
  _handleBlockDragStart(e) {
    if (!this.isEnabled) return;
    const t = this.editor.model, n = t.document.selection, r = this.editor.editing.view, s = Array.from(n.getSelectedBlocks()), a = t.createRange(t.createPositionBefore(s[0]), t.createPositionAfter(s[s.length - 1]));
    t.change((l) => l.setSelection(a)), this._isBlockDragging = !0, r.focus(), r.getObserver(ds).onDomEvent(e);
  }
  _handleBlockDragging(e) {
    if (!this.isEnabled || !this._isBlockDragging) return;
    const t = e.clientX + (this.editor.locale.contentLanguageDirection == "ltr" ? 100 : -100), n = e.clientY, r = document.elementFromPoint(t, n), s = this.editor.editing.view;
    r && r.closest(".ck-editor__editable") && s.getObserver(ds).onDomEvent({ ...e, type: e.type, dataTransfer: e.dataTransfer, target: r, clientX: t, clientY: n, preventDefault: () => e.preventDefault(), stopPropagation: () => e.stopPropagation() });
  }
  _handleBlockDragEnd() {
    this._isBlockDragging = !1;
  }
}
class r3 extends A {
  constructor() {
    super(...arguments);
    m(this, "_draggedRange");
    m(this, "_draggingUid");
    m(this, "_draggableElement");
    m(this, "_clearDraggableAttributesDelayed", fu(() => this._clearDraggableAttributes(), 40));
    m(this, "_blockMode", !1);
    m(this, "_domEmitter", new (Nt())());
    m(this, "_previewContainer");
  }
  static get pluginName() {
    return "DragDrop";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Lt, dr, Us, o3];
  }
  init() {
    const e = this.editor, t = e.editing.view;
    this._draggedRange = null, this._draggingUid = "", this._draggableElement = null, t.addObserver(ds), t.addObserver(ml), this._setupDragging(), this._setupContentInsertionIntegration(), this._setupClipboardInputIntegration(), this._setupDraggableAttributeHandling(), this.listenTo(e, "change:isReadOnly", (n, r, s) => {
      s ? this.forceDisabled("readOnlyMode") : this.clearForceDisabled("readOnlyMode");
    }), this.on("change:isEnabled", (n, r, s) => {
      s || this._finalizeDragging(!1);
    }), q.isAndroid && this.forceDisabled("noAndroidSupport");
  }
  destroy() {
    return this._draggedRange && (this._draggedRange.detach(), this._draggedRange = null), this._previewContainer && this._previewContainer.remove(), this._domEmitter.stopListening(), this._clearDraggableAttributesDelayed.cancel(), super.destroy();
  }
  _setupDragging() {
    const e = this.editor, t = e.model, n = e.editing.view, r = n.document, s = e.plugins.get(Us);
    this.listenTo(r, "dragstart", (a, l) => {
      var p;
      if ((p = l.target) != null && p.is("editableElement") || (this._prepareDraggedRange(l.target), !this._draggedRange)) return void l.preventDefault();
      this._draggingUid = Tt(), l.dataTransfer.effectAllowed = this.isEnabled ? "copyMove" : "copy", l.dataTransfer.setData("application/ckeditor5-dragging-uid", this._draggingUid);
      const c = t.createSelection(this._draggedRange.toRange());
      this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(l.dataTransfer, c, "dragstart");
      const { dataTransfer: d, domTarget: u, domEvent: h } = l, { clientX: g } = h;
      this._updatePreview({ dataTransfer: d, domTarget: u, clientX: g }), l.stopPropagation(), this.isEnabled || (this._draggedRange.detach(), this._draggedRange = null, this._draggingUid = "");
    }, { priority: "low" }), this.listenTo(r, "dragend", (a, l) => {
      this._finalizeDragging(!l.dataTransfer.isCanceled && l.dataTransfer.dropEffect == "move");
    }, { priority: "low" }), this._domEmitter.listenTo(z.document, "dragend", () => {
      this._blockMode = !1;
    }, { useCapture: !0 }), this.listenTo(r, "dragenter", () => {
      this.isEnabled && n.focus();
    }), this.listenTo(r, "dragleave", () => {
      s.removeDropMarkerDelayed();
    }), this.listenTo(r, "dragging", (a, l) => {
      if (!this.isEnabled) return void (l.dataTransfer.dropEffect = "none");
      const { clientX: c, clientY: d } = l.domEvent;
      s.updateDropMarker(l.target, l.targetRanges, c, d, this._blockMode, this._draggedRange), this._draggedRange || (l.dataTransfer.dropEffect = "copy"), q.isGecko || (l.dataTransfer.effectAllowed == "copy" ? l.dataTransfer.dropEffect = "copy" : ["all", "copyMove"].includes(l.dataTransfer.effectAllowed) && (l.dataTransfer.dropEffect = "move")), a.stop();
    }, { priority: "low" });
  }
  _setupClipboardInputIntegration() {
    const e = this.editor, t = e.editing.view.document, n = e.plugins.get(Us);
    this.listenTo(t, "clipboardInput", (r, s) => {
      if (s.method != "drop") return;
      const { clientX: a, clientY: l } = s.domEvent, c = n.getFinalDropRange(s.target, s.targetRanges, a, l, this._blockMode, this._draggedRange);
      if (!c) return this._finalizeDragging(!1), void r.stop();
      if (this._draggedRange && this._draggingUid != s.dataTransfer.getData("application/ckeditor5-dragging-uid") && (this._draggedRange.detach(), this._draggedRange = null, this._draggingUid = ""), Jg(s.dataTransfer) == "move" && this._draggedRange && this._draggedRange.containsRange(c, !0)) return this._finalizeDragging(!1), void r.stop();
      s.targetRanges = [e.editing.mapper.toViewRange(c)];
    }, { priority: "high" });
  }
  _setupContentInsertionIntegration() {
    const e = this.editor.plugins.get(Lt);
    e.on("contentInsertion", (t, n) => {
      if (!this.isEnabled || n.method !== "drop") return;
      const r = n.targetRanges.map((s) => this.editor.editing.mapper.toModelRange(s));
      this.editor.model.change((s) => s.setSelection(r));
    }, { priority: "high" }), e.on("contentInsertion", (t, n) => {
      if (!this.isEnabled || n.method !== "drop") return;
      const r = Jg(n.dataTransfer) == "move", s = !n.resultRange || !n.resultRange.isCollapsed;
      this._finalizeDragging(s && r);
    }, { priority: "lowest" });
  }
  _setupDraggableAttributeHandling() {
    const e = this.editor, t = e.editing.view, n = t.document;
    this.listenTo(n, "mousedown", (r, s) => {
      if (q.isAndroid || !s) return;
      this._clearDraggableAttributesDelayed.cancel();
      let a = Xg(s.target);
      if (q.isBlink && !e.isReadOnly && !a && !n.selection.isCollapsed) {
        const l = n.selection.getSelectedElement();
        l && et(l) || (a = n.selection.editableElement);
      }
      a && (t.change((l) => {
        l.setAttribute("draggable", "true", a);
      }), this._draggableElement = e.editing.mapper.toModelElement(a));
    }), this.listenTo(n, "mouseup", () => {
      q.isAndroid || this._clearDraggableAttributesDelayed();
    });
  }
  _clearDraggableAttributes() {
    const e = this.editor.editing;
    e.view.change((t) => {
      this._draggableElement && this._draggableElement.root.rootName != "$graveyard" && t.removeAttribute("draggable", e.mapper.toViewElement(this._draggableElement)), this._draggableElement = null;
    });
  }
  _finalizeDragging(e) {
    const t = this.editor, n = t.model;
    t.plugins.get(Us).removeDropMarker(), this._clearDraggableAttributes(), t.plugins.has("WidgetToolbarRepository") && t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"), this._draggingUid = "", this._previewContainer && (this._previewContainer.remove(), this._previewContainer = void 0), this._draggedRange && (e && this.isEnabled && n.change((r) => {
      const s = n.createSelection(this._draggedRange);
      n.deleteContent(s, { doNotAutoparagraph: !0 });
      const a = s.getFirstPosition().parent;
      a.isEmpty && !n.schema.checkChild(a, "$text") && n.schema.checkChild(a, "paragraph") && r.insertElement("paragraph", a, 0);
    }), this._draggedRange.detach(), this._draggedRange = null);
  }
  _prepareDraggedRange(e) {
    const t = this.editor, n = t.model, r = n.document.selection, s = e ? Xg(e) : null;
    if (s) {
      const d = t.editing.mapper.toModelElement(s);
      this._draggedRange = Mt.fromRange(n.createRangeOn(d)), this._blockMode = n.schema.isBlock(d), t.plugins.has("WidgetToolbarRepository") && t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");
      return;
    }
    if (r.isCollapsed && !r.getFirstPosition().parent.isEmpty) return;
    const a = Array.from(r.getSelectedBlocks()), l = r.getFirstRange();
    if (a.length == 0) return void (this._draggedRange = Mt.fromRange(l));
    const c = _w(n, a);
    if (a.length > 1) this._draggedRange = Mt.fromRange(c), this._blockMode = !0;
    else if (a.length == 1) {
      const d = l.start.isTouching(c.start) && l.end.isTouching(c.end);
      this._draggedRange = Mt.fromRange(d ? c : l), this._blockMode = d;
    }
    n.change((d) => d.setSelection(this._draggedRange.toRange()));
  }
  _updatePreview({ dataTransfer: e, domTarget: t, clientX: n }) {
    const r = this.editor.editing.view, s = r.document.selection.editableElement, a = r.domConverter.mapViewToDom(s), l = z.window.getComputedStyle(a);
    this._previewContainer ? this._previewContainer.firstElementChild && this._previewContainer.removeChild(this._previewContainer.firstElementChild) : (this._previewContainer = fi(z.document, "div", { style: "position: fixed; left: -999999px;" }), z.document.body.appendChild(this._previewContainer));
    const c = new K(a);
    if (a.contains(t)) return;
    const d = parseFloat(l.paddingLeft), u = fi(z.document, "div");
    u.className = "ck ck-content", u.style.width = l.width, u.style.paddingLeft = `${c.left - n + d}px`, q.isiOS && (u.style.backgroundColor = "white"), r.domConverter.setContentOf(u, e.getData("text/html")), e.setDragImage(u, 0, 0), this._previewContainer.appendChild(u);
  }
}
function Jg(o) {
  return q.isGecko ? o.dropEffect : ["all", "copyMove"].includes(o.effectAllowed) ? "move" : "copy";
}
function Xg(o) {
  if (o.is("editableElement")) return null;
  if (o.hasClass("ck-widget__selection-handle")) return o.findAncestor(et);
  if (et(o)) return o;
  const i = o.findAncestor((e) => et(e) || e.is("editableElement"));
  return et(i) ? i : null;
}
function _w(o, i) {
  const e = i[0], t = i[i.length - 1], n = e.getCommonAncestor(t), r = o.createPositionBefore(e), s = o.createPositionAfter(t);
  if (n && n.is("element") && !o.schema.isLimit(n)) {
    const a = o.createRangeOn(n), l = r.isTouching(a.start), c = s.isTouching(a.end);
    if (l && c) return _w(o, [n]);
  }
  return o.createRange(r, s);
}
class s3 extends A {
  static get pluginName() {
    return "PastePlainText";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Lt];
  }
  init() {
    const i = this.editor, e = i.model, t = i.editing.view, n = e.document.selection;
    t.addObserver(ds), i.plugins.get(Lt).on("contentInsertion", (r, s) => {
      (function(a, l) {
        let c = l.createRangeIn(a);
        if (a.childCount == 1) {
          const d = a.getChild(0);
          d.is("element") && l.schema.isBlock(d) && !l.schema.isObject(d) && !l.schema.isLimit(d) && (c = l.createRangeIn(d));
        }
        for (const d of c.getItems())
          if (!l.schema.isInline(d) || Array.from(d.getAttributeKeys()).find((u) => l.schema.getAttributeProperties(u).isFormatting)) return !1;
        return !0;
      })(s.content, e) && e.change((a) => {
        const l = Array.from(n.getAttributes()).filter(([d]) => e.schema.getAttributeProperties(d).isFormatting);
        n.isCollapsed || e.deleteContent(n, { doNotAutoparagraph: !0 }), l.push(...n.getAttributes());
        const c = a.createRangeIn(s.content);
        for (const d of c.getItems()) for (const u of l) e.schema.checkAttribute(d, u[0]) && a.setAttribute(u[0], u[1], d);
      });
    });
  }
}
class ju extends A {
  static get pluginName() {
    return "Clipboard";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Gr, Lt, r3, s3];
  }
  init() {
    const i = this.editor, e = this.editor.t;
    i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Copy selected content"), keystroke: "CTRL+C" }, { label: e("Paste content"), keystroke: "CTRL+V" }, { label: e("Paste content as plain text"), keystroke: "CTRL+SHIFT+V" }] });
  }
}
const mc = /^data:(\S*?);base64,/;
class FM extends Ae() {
  constructor(e, t, n) {
    super();
    m(this, "file");
    m(this, "xhr");
    m(this, "_token");
    m(this, "_apiAddress");
    if (!e) throw new v("fileuploader-missing-file", null);
    if (!t) throw new v("fileuploader-missing-token", null);
    if (!n) throw new v("fileuploader-missing-api-address", null);
    this.file = function(r) {
      var s;
      return typeof r != "string" ? !1 : !!((s = r.match(mc)) != null && s.length);
    }(e) ? function(r, s = 512) {
      try {
        const a = r.match(mc)[1], l = atob(r.replace(mc, "")), c = [];
        for (let d = 0; d < l.length; d += s) {
          const u = l.slice(d, d + s), h = new Array(u.length);
          for (let g = 0; g < u.length; g++) h[g] = u.charCodeAt(g);
          c.push(new Uint8Array(h));
        }
        return new Blob(c, { type: a });
      } catch {
        throw new v("fileuploader-decoding-image-data-error", null);
      }
    }(e) : e, this._token = t, this._apiAddress = n;
  }
  onProgress(e) {
    return this.on("progress", (t, n) => e(n)), this;
  }
  onError(e) {
    return this.once("error", (t, n) => e(n)), this;
  }
  abort() {
    this.xhr.abort();
  }
  send() {
    return this._prepareRequest(), this._attachXHRListeners(), this._sendRequest();
  }
  _prepareRequest() {
    const e = new XMLHttpRequest();
    e.open("POST", this._apiAddress), e.setRequestHeader("Authorization", this._token.value), e.responseType = "json", this.xhr = e;
  }
  _attachXHRListeners() {
    const e = this.xhr, t = (n) => () => this.fire("error", n);
    e.addEventListener("error", t("Network Error")), e.addEventListener("abort", t("Abort")), e.upload && e.upload.addEventListener("progress", (n) => {
      n.lengthComputable && this.fire("progress", { total: n.total, uploaded: n.loaded });
    }), e.addEventListener("load", () => {
      const n = e.status, r = e.response;
      if (n < 200 || n > 299) return this.fire("error", r.message || r.error);
    });
  }
  _sendRequest() {
    const e = new FormData(), t = this.xhr;
    return e.append("file", this.file), new Promise((n, r) => {
      t.addEventListener("load", () => {
        const s = t.status, a = t.response;
        return s < 200 || s > 299 ? a.message ? r(new v("fileuploader-uploading-data-failed", this, { message: a.message })) : r(a.error) : n(a);
      }), t.addEventListener("error", () => r(new Error("Network Error"))), t.addEventListener("abort", () => r(new Error("Abort"))), t.send(e);
    });
  }
}
function Ra(o) {
  const i = o.t, e = o.config.get("codeBlock.languages");
  for (const t of e) t.label === "Plain text" && (t.label = i("Plain text")), t.class === void 0 && (t.class = `language-${t.language}`);
  return e;
}
function za(o, i, e) {
  const t = {};
  for (const n of o) i === "class" ? t[n[i].split(" ").shift()] = n[e] : t[n[i]] = n[e];
  return t;
}
function Hu(o) {
  return o.data.match(/^(\s*)/)[0];
}
function xd(o) {
  const i = o.document.selection, e = [];
  if (i.isCollapsed) return [i.anchor];
  const t = i.getFirstRange().getWalker({ ignoreElementEnd: !0, direction: "backward" });
  for (const { item: n } of t) {
    let r = n.is("$textProxy") ? n.textNode : n;
    const s = r.parent;
    if (!s.is("element", "codeBlock") || r.is("element", "softBreak")) continue;
    for (; r.previousSibling && !r.previousSibling.is("element", "softBreak"); ) r = r.previousSibling;
    const a = r.is("$text") ? r.startOffset + Hu(r).length : r.startOffset, l = o.createPositionAt(s, a);
    e.every((c) => !c.isEqual(l)) && e.push(l);
  }
  return e;
}
function ww(o) {
  const i = Te(o.getSelectedBlocks());
  return !!i && i.is("element", "codeBlock");
}
function ep(o, i) {
  return !i.is("rootElement") && !o.isLimit(i) && o.checkChild(i.parent, "codeBlock");
}
function tp(o, i, e, t) {
  const n = za(i, "language", "label"), r = e.getAttribute("language");
  if (r in n) {
    const s = n[r];
    return o(t === "enter" ? "Entering %0 code snippet" : "Leaving %0 code snippet", s);
  }
  return o(t === "enter" ? "Entering code snippet" : "Leaving code snippet");
}
function vw(o, i) {
  for (o.textNode && (o = i.createPositionBefore(o.textNode)); o.nodeBefore && !o.nodeBefore.is("element", "softBreak"); ) o = i.createPositionBefore(o.nodeBefore);
  const e = o.nodeAfter;
  return e && e.is("$text") ? e : null;
}
class a3 extends G {
  constructor(e) {
    super(e);
    m(this, "_lastLanguage");
    this._lastLanguage = null;
  }
  refresh() {
    this.value = this._getValue(), this.isEnabled = this._checkEnabled();
  }
  execute(e = {}) {
    const t = this.editor, n = t.model, r = n.document.selection, s = Ra(t)[0], a = Array.from(r.getSelectedBlocks()), l = e.forceValue == null ? !this.value : e.forceValue, c = function(d, u, h) {
      return d.language ? d.language : d.usePreviousLanguageChoice && u ? u : h;
    }(e, this._lastLanguage, s.language);
    n.change((d) => {
      l ? this._applyCodeBlock(d, a, c) : this._removeCodeBlock(d, a);
    });
  }
  _getValue() {
    const e = Te(this.editor.model.document.selection.getSelectedBlocks());
    return !!(e != null && e.is("element", "codeBlock")) && e.getAttribute("language");
  }
  _checkEnabled() {
    if (this.value) return !0;
    const e = this.editor.model.document.selection, t = this.editor.model.schema, n = Te(e.getSelectedBlocks());
    return !!n && ep(t, n);
  }
  _applyCodeBlock(e, t, n) {
    this._lastLanguage = n;
    const r = this.editor.model.schema, s = t.filter((a) => ep(r, a));
    for (const a of s) e.rename(a, "codeBlock"), e.setAttribute("language", n, a), r.removeDisallowedAttributes([a], e), Array.from(a.getChildren()).filter((l) => !r.checkChild(a, l)).forEach((l) => e.remove(l));
    s.reverse().forEach((a, l) => {
      const c = s[l + 1];
      a.previousSibling === c && (e.appendElement("softBreak", c), e.merge(e.createPositionBefore(a)));
    });
  }
  _removeCodeBlock(e, t) {
    const n = t.filter((r) => r.is("element", "codeBlock"));
    for (const r of n) {
      const s = e.createRangeOn(r);
      for (const a of Array.from(s.getItems()).reverse()) if (a.is("element", "softBreak") && a.parent.is("element", "codeBlock")) {
        const { position: l } = e.split(e.createPositionBefore(a)), c = l.nodeAfter;
        e.rename(c, "paragraph"), e.removeAttribute("language", c), e.remove(a);
      }
      e.rename(r, "paragraph"), e.removeAttribute("language", r);
    }
  }
}
class l3 extends G {
  constructor(e) {
    super(e);
    m(this, "_indentSequence");
    this._indentSequence = e.config.get("codeBlock.indentSequence");
  }
  refresh() {
    this.isEnabled = this._checkEnabled();
  }
  execute() {
    const e = this.editor.model;
    e.change((t) => {
      const n = xd(e);
      for (const r of n) {
        const s = t.createText(this._indentSequence);
        e.insertContent(s, r);
      }
    });
  }
  _checkEnabled() {
    return !!this._indentSequence && ww(this.editor.model.document.selection);
  }
}
class c3 extends G {
  constructor(e) {
    super(e);
    m(this, "_indentSequence");
    this._indentSequence = e.config.get("codeBlock.indentSequence");
  }
  refresh() {
    this.isEnabled = this._checkEnabled();
  }
  execute() {
    const e = this.editor.model;
    e.change(() => {
      const t = xd(e);
      for (const n of t) {
        const r = ip(e, n, this._indentSequence);
        r && e.deleteContent(e.createSelection(r));
      }
    });
  }
  _checkEnabled() {
    if (!this._indentSequence) return !1;
    const e = this.editor.model;
    return !!ww(e.document.selection) && xd(e).some((t) => ip(e, t, this._indentSequence));
  }
}
function ip(o, i, e) {
  const t = vw(i, o);
  if (!t) return null;
  const n = Hu(t), r = n.lastIndexOf(e);
  if (r + e.length !== n.length || r === -1) return null;
  const { parent: s, startOffset: a } = t;
  return o.createRange(o.createPositionAt(s, a + r), o.createPositionAt(s, a + r + e.length));
}
function np(o, i, e = !1) {
  const t = za(i, "language", "class"), n = za(i, "language", "label");
  return (r, s, a) => {
    const { writer: l, mapper: c, consumable: d } = a;
    if (!d.consume(s.item, "insert")) return;
    const u = s.item.getAttribute("language"), h = c.toViewPosition(o.createPositionBefore(s.item)), g = {};
    e && (g["data-language"] = n[u], g.spellcheck = "false");
    const p = t[u] ? { class: t[u] } : void 0, f = l.createContainerElement("code", p), b = l.createContainerElement("pre", g, f);
    l.insert(h, b), c.bindElements(s.item, f);
  };
}
const op = "paragraph";
class d3 extends A {
  static get pluginName() {
    return "CodeBlockEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [hw];
  }
  constructor(i) {
    super(i), i.config.define("codeBlock", { languages: [{ language: "plaintext", label: "Plain text" }, { language: "c", label: "C" }, { language: "cs", label: "C#" }, { language: "cpp", label: "C++" }, { language: "css", label: "CSS" }, { language: "diff", label: "Diff" }, { language: "html", label: "HTML" }, { language: "java", label: "Java" }, { language: "javascript", label: "JavaScript" }, { language: "php", label: "PHP" }, { language: "python", label: "Python" }, { language: "ruby", label: "Ruby" }, { language: "typescript", label: "TypeScript" }, { language: "xml", label: "XML" }], indentSequence: "	" });
  }
  init() {
    const i = this.editor, e = i.model.schema, t = i.model, n = i.editing.view, r = Ra(i);
    i.commands.add("codeBlock", new a3(i)), i.commands.add("indentCodeBlock", new l3(i)), i.commands.add("outdentCodeBlock", new c3(i)), this.listenTo(n.document, "tab", (s, a) => {
      const l = a.shiftKey ? "outdentCodeBlock" : "indentCodeBlock";
      i.commands.get(l).isEnabled && (i.execute(l), a.stopPropagation(), a.preventDefault(), s.stop());
    }, { context: "pre" }), e.register("codeBlock", { allowWhere: "$block", allowChildren: "$text", disallowChildren: "$inlineObject", allowAttributes: ["language"], allowAttributesOf: "$listItem", isBlock: !0 }), e.addAttributeCheck((s, a) => {
      const l = s.getItem(s.length - 2);
      if (e.getAttributeProperties(a).isFormatting && l && l.name == "codeBlock") return !1;
    }), i.editing.downcastDispatcher.on("insert:codeBlock", np(t, r, !0)), i.data.downcastDispatcher.on("insert:codeBlock", np(t, r)), i.data.downcastDispatcher.on("insert:softBreak", /* @__PURE__ */ function(s) {
      return (a, l, c) => {
        if (l.item.parent.name !== "codeBlock") return;
        const { writer: d, mapper: u, consumable: h } = c;
        if (!h.consume(l.item, "insert")) return;
        const g = u.toViewPosition(s.createPositionBefore(l.item));
        d.insert(g, d.createText(`
`));
      };
    }(t), { priority: "high" }), i.data.upcastDispatcher.on("element:code", function(s, a) {
      const l = za(a, "class", "language"), c = a[0].language;
      return (d, u, h) => {
        const g = u.viewItem, p = g.parent;
        if (!p || !p.is("element", "pre") || u.modelCursor.findAncestor("codeBlock")) return;
        const { consumable: f, writer: b } = h;
        if (!f.test(g, { name: !0 })) return;
        const k = b.createElement("codeBlock"), _ = [...g.getClassNames()];
        _.length || _.push("");
        for (const w of _) {
          const y = l[w];
          if (y) {
            b.setAttribute("language", y, k);
            break;
          }
        }
        k.hasAttribute("language") || b.setAttribute("language", c, k), h.convertChildren(g, k), h.safeInsert(k, u.modelCursor) && (f.consume(g, { name: !0 }), h.updateConversionResult(k, u));
      };
    }(0, r)), i.data.upcastDispatcher.on("text", (s, a, { consumable: l, writer: c }) => {
      let d = a.modelCursor;
      if (!l.test(a.viewItem) || !d.findAncestor("codeBlock")) return;
      l.consume(a.viewItem);
      const u = a.viewItem.data.split(`
`).map((g) => c.createText(g)), h = u[u.length - 1];
      for (const g of u) if (c.insert(g, d), d = d.getShiftedBy(g.offsetSize), g !== h) {
        const p = c.createElement("softBreak");
        c.insert(p, d), d = c.createPositionAfter(p);
      }
      a.modelRange = c.createRange(a.modelCursor, d), a.modelCursor = d;
    }), i.data.upcastDispatcher.on("element:pre", (s, a, { consumable: l }) => {
      const c = a.viewItem;
      if (c.findAncestor("pre")) return;
      const d = Array.from(c.getChildren()), u = d.find((h) => h.is("element", "code"));
      if (u) for (const h of d) h !== u && h.is("$text") && l.consume(h, { name: !0 });
    }, { priority: "high" }), this.listenTo(i.editing.view.document, "clipboardInput", (s, a) => {
      let l = t.createRange(t.document.selection.anchor);
      if (a.targetRanges && (l = i.editing.mapper.toModelRange(a.targetRanges[0])), !l.start.parent.is("element", "codeBlock")) return;
      const c = a.dataTransfer.getData("text/plain"), d = new Ni(i.editing.view.document);
      a.content = function(u, h) {
        const g = u.createDocumentFragment(), p = h.split(`
`), f = p.reduce((b, k, _) => (b.push(k), _ < p.length - 1 && b.push(u.createElement("br")), b), []);
        return u.appendChild(f, g), g;
      }(d, c);
    }), i.plugins.has("ClipboardPipeline") && i.plugins.get(Lt).on("contentInsertion", (s, a) => {
      const l = i.model, c = l.document.selection;
      c.anchor.parent.is("element", "codeBlock") && l.change((d) => {
        const u = d.createRangeIn(a.content);
        for (const h of [...u.getItems()]) h.is("node") && !e.checkChild(c.anchor, h) && d.remove(h);
      });
    }), this.listenTo(t, "getSelectedContent", (s, [a]) => {
      const l = a.anchor;
      !a.isCollapsed && l.parent.is("element", "codeBlock") && l.hasSameParentAs(a.focus) && t.change((c) => {
        const d = s.return;
        if (l.parent.is("element") && (d.childCount > 1 || a.containsEntireContent(l.parent))) {
          const h = c.createElement("codeBlock", l.parent.getAttributes());
          c.append(d, h);
          const g = c.createDocumentFragment();
          return c.append(h, g), void (s.return = g);
        }
        const u = d.getChild(0);
        e.checkAttribute(u, "code") && c.setAttribute("code", !0, u);
      });
    });
  }
  afterInit() {
    const i = this.editor, e = i.commands, t = e.get("indent"), n = e.get("outdent");
    t && t.registerChildCommand(e.get("indentCodeBlock"), { priority: "highest" }), n && n.registerChildCommand(e.get("outdentCodeBlock")), this.listenTo(i.editing.view.document, "enter", (r, s) => {
      i.model.document.selection.getLastPosition().parent.is("element", "codeBlock") && (function(a, l) {
        const c = a.model, d = c.document, u = a.editing.view, h = d.selection.getLastPosition(), g = h.nodeAfter;
        return l || !d.selection.isCollapsed || !h.isAtStart || !Wn(g) ? !1 : (a.model.change((p) => {
          a.execute("enter");
          const f = d.selection.anchor.parent.previousSibling;
          p.rename(f, op), p.setSelection(f, "in"), a.model.schema.removeDisallowedAttributes([f], p), p.remove(g);
        }), u.scrollToTheSelection(), !0);
      }(i, s.isSoft) || function(a, l) {
        const c = a.model, d = c.document, u = a.editing.view, h = d.selection.getLastPosition(), g = h.nodeBefore;
        let p;
        if (l || !d.selection.isCollapsed || !h.isAtEnd || !g || !g.previousSibling) return !1;
        if (Wn(g) && Wn(g.previousSibling)) p = c.createRange(c.createPositionBefore(g.previousSibling), c.createPositionAfter(g));
        else if (gc(g) && Wn(g.previousSibling) && Wn(g.previousSibling.previousSibling)) p = c.createRange(c.createPositionBefore(g.previousSibling.previousSibling), c.createPositionAfter(g));
        else {
          if (!(gc(g) && Wn(g.previousSibling) && gc(g.previousSibling.previousSibling) && g.previousSibling.previousSibling && Wn(g.previousSibling.previousSibling.previousSibling))) return !1;
          p = c.createRange(c.createPositionBefore(g.previousSibling.previousSibling.previousSibling), c.createPositionAfter(g));
        }
        return a.model.change((f) => {
          f.remove(p), a.execute("enter");
          const b = d.selection.anchor.parent;
          f.rename(b, op), a.model.schema.removeDisallowedAttributes([b], f);
        }), u.scrollToTheSelection(), !0;
      }(i, s.isSoft) || function(a) {
        const l = a.model, c = l.document;
        let d;
        const u = vw(c.selection.getLastPosition(), l);
        u && u.is("$text") && (d = Hu(u)), a.model.change((h) => {
          a.execute("shiftEnter"), d && h.insertText(d, c.selection.anchor);
        });
      }(i), s.preventDefault(), r.stop());
    }, { context: "pre" }), this._initAriaAnnouncements();
  }
  _initAriaAnnouncements() {
    const { model: i, ui: e, t } = this.editor, n = Ra(this.editor);
    let r = null;
    i.document.selection.on("change:range", () => {
      const s = i.document.selection.focus.parent;
      e && r !== s && s.is("element") && (r && r.is("element", "codeBlock") && e.ariaLiveAnnouncer.announce(tp(t, n, r, "leave")), s.is("element", "codeBlock") && e.ariaLiveAnnouncer.announce(tp(t, n, s, "enter")), r = s);
    });
  }
}
function gc(o) {
  return o && o.is("$text") && !o.data.match(/\S/);
}
function Wn(o) {
  return o && o.is("element", "softBreak");
}
class u3 extends A {
  static get pluginName() {
    return "CodeBlockUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t, t = i.ui.componentFactory, n = Ra(i), r = this._getLanguageListItemDefinitions(n), s = i.commands.get("codeBlock");
    t.add("codeBlock", (a) => {
      const l = ft(a, po), c = l.buttonView, d = e("Insert code block");
      return c.set({ label: d, tooltip: !0, icon: Wm, isToggleable: !0 }), c.bind("isOn").to(s, "value", (u) => !!u), c.on("execute", () => {
        i.execute("codeBlock", { usePreviousLanguageChoice: !0 }), i.editing.view.focus();
      }), l.on("execute", (u) => {
        i.execute("codeBlock", { language: u.source._codeBlockLanguage, forceValue: !0 }), i.editing.view.focus();
      }), l.class = "ck-code-block-dropdown", l.bind("isEnabled").to(s), Bn(l, r, { role: "menu", ariaLabel: d }), l;
    }), t.add("menuBar:codeBlock", (a) => {
      const l = new Vt(a);
      l.buttonView.set({ role: "menuitem", label: e("Code block"), icon: Wm }), l.bind("isEnabled").to(s);
      const c = new dn(a);
      c.set({ ariaLabel: e("Insert code block") });
      for (const d of r) {
        const u = new zi(a, l), h = new Ie(a);
        h.bind(...Object.keys(d.model)).to(d.model), h.set({ isToggleable: !0, role: "menuitemcheckbox" }), h.delegate("execute").to(l), h.on("execute", () => {
          i.execute("codeBlock", { language: d.model._codeBlockLanguage, forceValue: s.value != d.model._codeBlockLanguage }), i.editing.view.focus();
        }), u.children.add(h), c.items.add(u);
      }
      return l.panelView.children.add(c), l;
    });
  }
  _getLanguageListItemDefinitions(i) {
    const e = this.editor.commands.get("codeBlock"), t = new rt();
    for (const n of i) {
      const r = { type: "button", model: new cn({ _codeBlockLanguage: n.language, label: n.label, role: "menuitemradio", withText: !0 }) };
      r.model.bind("isOn").to(e, "value", (s) => s === r.model._codeBlockLanguage), t.add(r);
    }
    return t;
  }
}
class h3 extends A {
  static get requires() {
    return [d3, u3];
  }
  static get pluginName() {
    return "CodeBlock";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class m3 extends BT {
  constructor(e, t) {
    super(e);
    m(this, "view");
    this.view = t;
  }
  get element() {
    return this.view.editable.element;
  }
  init() {
    const e = this.editor, t = this.view, n = e.editing.view, r = t.editable, s = n.document.getRoot();
    r.name = s.rootName, t.render();
    const a = r.element;
    this.setEditableElement(r.name, a), r.bind("isFocused").to(this.focusTracker), n.attachDomRoot(a), this._initPlaceholder(), this.initMenuBar(this.view.menuBarView), this.fire("ready");
  }
  destroy() {
    super.destroy();
    const e = this.view, t = this.editor.editing.view;
    t.getDomRoot(e.editable.name) && t.detachDomRoot(e.editable.name), e.destroy();
  }
  _initPlaceholder() {
    const e = this.editor, t = e.editing.view, n = t.document.getRoot(), r = e.config.get("placeholder");
    if (r) {
      const s = typeof r == "string" ? r : r[n.rootName];
      s && (n.placeholder = s);
    }
    wu({ view: t, element: n, isDirectHost: !1, keepOnFocus: !0 });
  }
}
class g3 extends DT {
  constructor(e, t, n, r) {
    super(e);
    m(this, "editable");
    m(this, "menuBarView");
    this.editable = new jT(e, t, n, { label: r }), this.menuBarView = new XT(e), this.menuBarView.extendTemplate({ attributes: { class: ["ck-reset_all", "ck-rounded-corners"], dir: e.uiLanguageDirection } });
  }
  render() {
    super.render(), this.registerChild(this.editable), this.registerChild(this.menuBarView);
  }
}
class p3 extends cd(Lo) {
  constructor(e, t = {}) {
    if (!Ws(e) && t.initialData !== void 0) throw new v("editor-create-initial-data", null);
    super(t);
    m(this, "ui");
    this.config.get("initialData") === void 0 && this.config.set("initialData", function(s) {
      return Ws(s) ? N2(s) : s;
    }(e)), Ws(e) && (this.sourceElement = e, vC(this, e));
    const n = this.config.get("plugins");
    n.push(ZT), this.config.set("plugins", n), this.config.define("balloonToolbar", this.config.get("toolbar")), this.model.document.createRoot();
    const r = new g3(this.locale, this.editing.view, this.sourceElement, this.config.get("label"));
    this.ui = new m3(this, r), wC(this);
  }
  static get editorName() {
    return "BalloonEditor";
  }
  destroy() {
    const e = this.getData();
    return this.ui.destroy(), super.destroy().then(() => {
      this.sourceElement && this.updateSourceElement(e);
    });
  }
  static create(e, t = {}) {
    return new Promise((n) => {
      if (Ws(e) && e.tagName === "TEXTAREA") throw new v("editor-wrong-element", null);
      const r = new this(e, t);
      n(r.initPlugins().then(() => r.ui.init()).then(() => r.data.init(r.config.get("initialData"))).then(() => r.fire("ready")).then(() => r));
    });
  }
}
function Ws(o) {
  return Mn(o);
}
var pc, f3 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, yw = { exports: {} };
pc = yw, ((o, i) => {
  pc.exports ? pc.exports = i() : o.fuzzysort = i();
})(f3, (o) => {
  var i = (V) => {
    typeof V == "number" ? V = "" + V : typeof V != "string" && (V = "");
    var E = p(V);
    return n(V, { _targetLower: E._lower, _targetLowerCodes: E.lowerCodes, _bitflags: E.bitflags });
  };
  class e {
    get indexes() {
      return this._indexes.slice(0, this._indexes.len).sort((E, B) => E - B);
    }
    set indexes(E) {
      return this._indexes = E;
    }
    highlight(E, B) {
      return ((X, Q = "<b>", Z = "</b>") => {
        for (var _e = typeof Q == "function" ? Q : void 0, we = X.target, oe = we.length, re = X.indexes, Ee = "", qe = 0, Fe = 0, ke = !1, Oe = [], je = 0; je < oe; ++je) {
          var st = we[je];
          if (re[Fe] === je) {
            if (++Fe, ke || (ke = !0, _e ? (Oe.push(Ee), Ee = "") : Ee += Q), Fe === re.length) {
              _e ? (Ee += st, Oe.push(_e(Ee, qe++)), Ee = "", Oe.push(we.substr(je + 1))) : Ee += st + Z + we.substr(je + 1);
              break;
            }
          } else ke && (ke = !1, _e ? (Oe.push(_e(Ee, qe++)), Ee = "") : Ee += Z);
          Ee += st;
        }
        return _e ? Oe : Ee;
      })(this, E, B);
    }
    get score() {
      return r(this._score);
    }
    set score(E) {
      this._score = s(E);
    }
  }
  class t extends Array {
    get score() {
      return r(this._score);
    }
    set score(E) {
      this._score = s(E);
    }
  }
  var n = (V, E) => {
    const B = new e();
    return B.target = V, B.obj = E.obj ?? Pe, B._score = E._score ?? ue, B._indexes = E._indexes ?? [], B._targetLower = E._targetLower ?? "", B._targetLowerCodes = E._targetLowerCodes ?? Pe, B._nextBeginningIndexes = E._nextBeginningIndexes ?? Pe, B._bitflags = E._bitflags ?? 0, B;
  }, r = (V) => V === ue ? 0 : V > 1 ? V : Math.E ** (-2 * ((1 - V) ** 0.04307 - 1)), s = (V) => V === 0 ? ue : V > 1 ? V : 1 - Math.pow(Math.log(V) / -2 + 1, 1 / 0.04307), a = (V) => {
    typeof V == "number" ? V = "" + V : typeof V != "string" && (V = ""), V = V.trim();
    var E = p(V), B = [];
    if (E.containsSpace) {
      var X = V.split(/\s+/);
      X = [...new Set(X)];
      for (var Q = 0; Q < X.length; Q++) if (X[Q] !== "") {
        var Z = p(X[Q]);
        B.push({ lowerCodes: Z.lowerCodes, _lower: X[Q].toLowerCase(), containsSpace: !1 });
      }
    }
    return { lowerCodes: E.lowerCodes, _lower: E._lower, containsSpace: E.containsSpace, bitflags: E.bitflags, spaceSearches: B };
  }, l = (V) => {
    if (V.length > 999) return i(V);
    var E = b.get(V);
    return E !== void 0 || (E = i(V), b.set(V, E)), E;
  }, c = (V) => {
    if (V.length > 999) return a(V);
    var E = k.get(V);
    return E !== void 0 || (E = a(V), k.set(V, E)), E;
  }, d = (V, E) => {
    var B = [];
    B.total = V.length;
    var X = (E == null ? void 0 : E.limit) || be;
    if (E != null && E.key) for (var Q = 0; Q < V.length; Q++) {
      var Z = V[Q];
      if ((re = W(Z, E.key)) != Pe) {
        Y(re) || (re = l(re));
        var _e = n(re.target, { _score: re._score, obj: Z });
        if (B.push(_e), B.length >= X) return B;
      }
    }
    else if (E != null && E.keys) for (Q = 0; Q < V.length; Q++) {
      Z = V[Q];
      for (var we = new t(E.keys.length), oe = E.keys.length - 1; oe >= 0; --oe) (re = W(Z, E.keys[oe])) ? (Y(re) || (re = l(re)), re._score = ue, re._indexes.len = 0, we[oe] = re) : we[oe] = gn;
      if (we.obj = Z, we._score = ue, B.push(we), B.length >= X) return B;
    }
    else for (Q = 0; Q < V.length; Q++) {
      var re;
      if ((re = V[Q]) != Pe && (Y(re) || (re = l(re)), re._score = ue, re._indexes.len = 0, B.push(re), B.length >= X)) return B;
    }
    return B;
  }, u = (V, E, B = !1, X = !1) => {
    if (B === !1 && V.containsSpace) return h(V, E, X);
    for (var Q = V._lower, Z = V.lowerCodes, _e = Z[0], we = E._targetLowerCodes, oe = Z.length, re = we.length, Ee = 0, qe = 0, Fe = 0; ; ) {
      if (_e === we[qe]) {
        if (_[Fe++] = qe, ++Ee === oe) break;
        _e = Z[Ee];
      }
      if (++qe >= re) return Pe;
    }
    Ee = 0;
    var ke = !1, Oe = 0, je = E._nextBeginningIndexes;
    je === Pe && (je = E._nextBeginningIndexes = f(E.target));
    var st = 0;
    if ((qe = _[0] === 0 ? 0 : je[_[0] - 1]) !== re) for (; ; ) if (qe >= re) {
      if (Ee <= 0 || ++st > 200) break;
      --Ee;
      var ji = w[--Oe];
      qe = je[ji];
    } else if (Z[Ee] === we[qe]) {
      if (w[Oe++] = qe, ++Ee === oe) {
        ke = !0;
        break;
      }
      ++qe;
    } else qe = je[qe];
    var He = oe <= 1 ? -1 : E._targetLower.indexOf(Q, _[0]), Xt = !!~He, ve = !!Xt && (He === 0 || E._nextBeginningIndexes[He - 1] === He);
    if (Xt && !ve) {
      for (var he = 0; he < je.length; he = je[he]) if (!(he <= He)) {
        for (var Ti = 0; Ti < oe && Z[Ti] === E._targetLowerCodes[he + Ti]; Ti++) ;
        if (Ti === oe) {
          He = he, ve = !0;
          break;
        }
      }
    }
    var We = (pn) => {
      for (var Hi = 0, ih = 0, $i = 1; $i < oe; ++$i) pn[$i] - pn[$i - 1] != 1 && (Hi -= pn[$i], ++ih);
      if (Hi -= (pn[oe - 1] - pn[0] - (oe - 1) + 12) * ih, pn[0] !== 0 && (Hi -= pn[0] * pn[0] * 0.2), ke) {
        var Cl = 1;
        for ($i = je[0]; $i < re; $i = je[$i]) ++Cl;
        Cl > 24 && (Hi *= 10 * (Cl - 24));
      } else Hi *= 1e3;
      return Hi -= (re - oe) / 2, Xt && (Hi /= 1 + oe * oe * 1), ve && (Hi /= 1 + oe * oe * 1), Hi -= (re - oe) / 2;
    };
    if (ke) if (ve) {
      for (he = 0; he < oe; ++he) _[he] = He + he;
      vt = _, Fn = We(_);
    } else vt = w, Fn = We(w);
    else {
      if (Xt) for (var he = 0; he < oe; ++he) _[he] = He + he;
      var vt, Fn = We(vt = _);
    }
    for (E._score = Fn, he = 0; he < oe; ++he) E._indexes[he] = vt[he];
    E._indexes.len = oe;
    const ie = new e();
    return ie.target = E.target, ie._score = E._score, ie._indexes = E._indexes, ie;
  }, h = (V, E, B) => {
    for (var X = /* @__PURE__ */ new Set(), Q = 0, Z = Pe, _e = 0, we = V.spaceSearches, oe = we.length, re = 0, Ee = () => {
      for (let ve = re - 1; ve >= 0; ve--) E._nextBeginningIndexes[y[2 * ve + 0]] = y[2 * ve + 1];
    }, qe = !1, Fe = 0; Fe < oe; ++Fe) {
      C[Fe] = ue;
      var ke = we[Fe];
      if (Z = u(ke, E), B) {
        if (Z === Pe) continue;
        qe = !0;
      } else if (Z === Pe) return Ee(), Pe;
      if (Fe !== oe - 1) {
        var Oe = Z._indexes, je = !0;
        for (let ve = 0; ve < Oe.len - 1; ve++) if (Oe[ve + 1] - Oe[ve] != 1) {
          je = !1;
          break;
        }
        if (je) {
          var st = Oe[Oe.len - 1] + 1, ji = E._nextBeginningIndexes[st - 1];
          for (let ve = st - 1; ve >= 0 && ji === E._nextBeginningIndexes[ve]; ve--) E._nextBeginningIndexes[ve] = st, y[2 * re + 0] = ve, y[2 * re + 1] = ji, re++;
        }
      }
      Q += Z._score / oe, C[Fe] = Z._score / oe, Z._indexes[0] < _e && (Q -= 2 * (_e - Z._indexes[0])), _e = Z._indexes[0];
      for (var He = 0; He < Z._indexes.len; ++He) X.add(Z._indexes[He]);
    }
    if (B && !qe) return Pe;
    Ee();
    var Xt = u(V, E, !0);
    if (Xt !== Pe && Xt._score > Q) {
      if (B) for (Fe = 0; Fe < oe; ++Fe) C[Fe] = Xt._score / oe;
      return Xt;
    }
    B && (Z = E), Z._score = Q, Fe = 0;
    for (let ve of X) Z._indexes[Fe++] = ve;
    return Z._indexes.len = Fe, Z;
  }, g = (V) => V.replace(new RegExp("\\p{Script=Latin}+", "gu"), (E) => E.normalize("NFD")).replace(/[\u0300-\u036f]/g, ""), p = (V) => {
    for (var E = (V = g(V)).length, B = V.toLowerCase(), X = [], Q = 0, Z = !1, _e = 0; _e < E; ++_e) {
      var we = X[_e] = B.charCodeAt(_e);
      we !== 32 ? Q |= 1 << (we >= 97 && we <= 122 ? we - 97 : we >= 48 && we <= 57 ? 26 : we <= 127 ? 30 : 31) : Z = !0;
    }
    return { lowerCodes: X, bitflags: Q, containsSpace: Z, _lower: B };
  }, f = (V) => {
    for (var E = (V = g(V)).length, B = ((we) => {
      for (var oe = we.length, re = [], Ee = 0, qe = !1, Fe = !1, ke = 0; ke < oe; ++ke) {
        var Oe = we.charCodeAt(ke), je = Oe >= 65 && Oe <= 90, st = je || Oe >= 97 && Oe <= 122 || Oe >= 48 && Oe <= 57, ji = je && !qe || !Fe || !st;
        qe = je, Fe = st, ji && (re[Ee++] = ke);
      }
      return re;
    })(V), X = [], Q = B[0], Z = 0, _e = 0; _e < E; ++_e) Q > _e ? X[_e] = Q : (Q = B[++Z], X[_e] = Q === void 0 ? E : Q);
    return X;
  }, b = /* @__PURE__ */ new Map(), k = /* @__PURE__ */ new Map(), _ = [], w = [], y = [], x = [], C = [], S = [], L = [], W = (V, E) => {
    var B = V[E];
    if (B !== void 0) return B;
    if (typeof E == "function") return E(V);
    var X = E;
    Array.isArray(E) || (X = E.split("."));
    for (var Q = X.length, Z = -1; V && ++Z < Q; ) V = V[X[Z]];
    return V;
  }, Y = (V) => typeof V == "object" && typeof V._bitflags == "number", be = 1 / 0, ue = -be, bt = [];
  bt.total = 0;
  var ae, tt, Rt, mi, Pe = null, gn = i(""), Dn = (ae = [], tt = 0, mi = (V) => {
    for (var E = 0, B = ae[E], X = 1; X < tt; ) {
      var Q = X + 1;
      E = X, Q < tt && ae[Q]._score < ae[X]._score && (E = Q), ae[E - 1 >> 1] = ae[E], X = 1 + (E << 1);
    }
    for (var Z = E - 1 >> 1; E > 0 && B._score < ae[Z]._score; Z = (E = Z) - 1 >> 1) ae[E] = ae[Z];
    ae[E] = B;
  }, (Rt = {}).add = (V) => {
    var E = tt;
    ae[tt++] = V;
    for (var B = E - 1 >> 1; E > 0 && V._score < ae[B]._score; B = (E = B) - 1 >> 1) ae[E] = ae[B];
    ae[E] = V;
  }, Rt.poll = (V) => {
    if (tt !== 0) {
      var E = ae[0];
      return ae[0] = ae[--tt], mi(), E;
    }
  }, Rt.peek = (V) => {
    if (tt !== 0) return ae[0];
  }, Rt.replaceTop = (V) => {
    ae[0] = V, mi();
  }, Rt);
  return { single: (V, E) => {
    if (!V || !E) return Pe;
    var B = c(V);
    Y(E) || (E = l(E));
    var X = B.bitflags;
    return (X & E._bitflags) !== X ? Pe : u(B, E);
  }, go: (V, E, B) => {
    if (!V) return B != null && B.all ? d(E, B) : bt;
    var X = c(V), Q = X.bitflags, Z = X.containsSpace, _e = s((B == null ? void 0 : B.threshold) || 0), we = (B == null ? void 0 : B.limit) || be, oe = 0, re = 0, Ee = E.length;
    function qe(ie) {
      oe < we ? (Dn.add(ie), ++oe) : (++re, ie._score > Dn.peek()._score && Dn.replaceTop(ie));
    }
    if (B != null && B.key) for (var Fe = B.key, ke = 0; ke < Ee; ++ke) {
      var Oe = E[ke];
      (We = W(Oe, Fe)) && (Y(We) || (We = l(We)), (Q & We._bitflags) === Q && (vt = u(X, We)) !== Pe && (vt._score < _e || (vt.obj = Oe, qe(vt))));
    }
    else if (B != null && B.keys) {
      var je = B.keys, st = je.length;
      e: for (ke = 0; ke < Ee; ++ke) {
        Oe = E[ke];
        for (var ji = 0, He = 0; He < st; ++He) Fe = je[He], (We = W(Oe, Fe)) ? (Y(We) || (We = l(We)), S[He] = We, ji |= We._bitflags) : S[He] = gn;
        if ((Q & ji) === Q) {
          if (Z) for (let ie = 0; ie < X.spaceSearches.length; ie++) x[ie] = ue;
          for (He = 0; He < st; ++He) if ((We = S[He]) !== gn) if (L[He] = u(X, We, !1, Z), L[He] !== Pe) {
            if (Z) for (let ie = 0; ie < X.spaceSearches.length; ie++) C[ie] > -1e3 && x[ie] > ue && (Ti = (x[ie] + C[ie]) / 4) > x[ie] && (x[ie] = Ti), C[ie] > x[ie] && (x[ie] = C[ie]);
          } else L[He] = gn;
          else L[He] = gn;
          if (Z) {
            for (let ie = 0; ie < X.spaceSearches.length; ie++) if (x[ie] === ue) continue e;
          } else {
            var Xt = !1;
            for (let ie = 0; ie < st; ie++) if (L[ie]._score !== ue) {
              Xt = !0;
              break;
            }
            if (!Xt) continue;
          }
          var ve = new t(st);
          for (let ie = 0; ie < st; ie++) ve[ie] = L[ie];
          if (Z) {
            var he = 0;
            for (let ie = 0; ie < X.spaceSearches.length; ie++) he += x[ie];
          } else {
            he = ue;
            for (let ie = 0; ie < st; ie++) {
              var Ti;
              (vt = ve[ie])._score > -1e3 && he > ue && (Ti = (he + vt._score) / 4) > he && (he = Ti), vt._score > he && (he = vt._score);
            }
          }
          if (ve.obj = Oe, ve._score = he, B == null ? void 0 : B.scoreFn) {
            if (!(he = B.scoreFn(ve))) continue;
            he = s(he), ve._score = he;
          }
          he < _e || qe(ve);
        }
      }
    } else for (ke = 0; ke < Ee; ++ke) {
      var We, vt;
      (We = E[ke]) && (Y(We) || (We = l(We)), (Q & We._bitflags) === Q && (vt = u(X, We)) !== Pe && (vt._score < _e || qe(vt)));
    }
    if (oe === 0) return bt;
    var Fn = new Array(oe);
    for (ke = oe - 1; ke >= 0; --ke) Fn[ke] = Dn.poll();
    return Fn.total = oe + re, Fn;
  }, prepare: i, cleanup: () => {
    b.clear(), k.clear();
  } };
});
var b3 = yw.exports;
function k3(o) {
  const i = function() {
    try {
      return document.createElement("canvas").getContext("2d", { willReadFrequently: !0 });
    } catch {
      return null;
    }
  }();
  if (!i) return !1;
  const e = 20, t = Math.floor(12.5);
  i.font = t + "px Arial, Sans-Serif", i.textBaseline = "top", i.canvas.width = 40, i.canvas.height = 25, i.clearRect(0, 0, 40, 25), i.fillStyle = "#FF0000", i.fillText(o, 0, 22), i.fillStyle = "#0000FF", i.fillText(o, e, 22);
  const n = i.getImageData(0, 0, e, 25).data, r = n.length;
  let s = 0;
  for (; s < r && !n[s + 3]; s += 4) ;
  if (s >= r) return !1;
  const a = e + s / 4 % e, l = Math.floor(s / 4 / e), c = i.getImageData(a, l, 1, 1).data;
  return n[s] === c[0] && n[s + 2] === c[2] && !(i.measureText(o).width >= e);
}
const _3 = { 0: "default", 1: "light", 2: "medium-light", 3: "medium", 4: "medium-dark", 5: "dark" }, w3 = { "🫩": 16, "🫨": 15.1, "🫠": 14, "😶‍🌫️": 13.1, "🧑‍💻": 12.1, "🥰": 11, "🤪": 5, "⚕️": 4, "🤣": 3, "👋🏽": 2, "😀": 1, "😐": 0.7, "😂": 0.6 }, Ya = class Ya extends A {
  static get pluginName() {
    return "EmojiUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  isEmojiSupported(i, e, t) {
    return i.version <= e && (!this.hasZwj(i.emoji) || this.isEmojiZwjSupported(i, t));
  }
  getEmojiSupportedVersionByOs() {
    for (const [i, e] of Object.entries(w3)) if (Ya._isEmojiSupported(i)) return e;
    return 0;
  }
  hasZwj(i) {
    return i.includes("‍");
  }
  isEmojiZwjSupported(i, e) {
    return this.getNodeWidth(e, i.emoji) < 43.2;
  }
  getNodeWidth(i, e) {
    const t = document.createElement("span");
    t.textContent = e, i.appendChild(t);
    const n = t.offsetWidth;
    return i.removeChild(t), n;
  }
  createEmojiWidthTestingContainer() {
    const i = document.createElement("div");
    return i.setAttribute("aria-hidden", "true"), i.style.position = "absolute", i.style.left = "-9999px", i.style.whiteSpace = "nowrap", i.style.fontSize = "24px", i;
  }
  normalizeEmojiSkinTone(i) {
    const e = { ...i, skins: { default: i.emoji } };
    return i.skins && i.skins.forEach((t) => {
      const n = _3[t.tone];
      e.skins[n] = t.emoji;
    }), e;
  }
  isEmojiCategoryAllowed(i) {
    return i.group !== 2;
  }
};
m(Ya, "_isEmojiSupported", k3);
let Cd = Ya;
const $o = class $o extends A {
  constructor(e) {
    super(e);
    m(this, "_items");
    m(this, "_url");
    m(this, "_repositoryPromise");
    e.config.define("emoji", { version: void 0, skinTone: "default", definitionsUrl: void 0, useCustomFont: !1 }), this._url = this._getUrl(), this._repositoryPromise = new Promise((t) => {
      this._repositoryPromiseResolveCallback = t;
    }), this._items = null;
  }
  static get requires() {
    return [Cd];
  }
  static get pluginName() {
    return "EmojiRepository";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  async init() {
    return this._warnAboutCdnUse(), await this._loadAndCacheEmoji(), this._items = this._getItems(), this._items ? this._repositoryPromiseResolveCallback(!0) : (ce("emoji-repository-empty"), this._repositoryPromiseResolveCallback(!1));
  }
  getEmojiByQuery(e) {
    return this._items ? e.split(/\s/).filter(Boolean).some((t) => t.length >= 2) ? b3.go(e, this._items, { threshold: 0.6, keys: ["emoticon", "annotation", (t) => e.split(/\s/).filter(Boolean).flatMap((n) => {
      var r;
      return (r = t.tags) == null ? void 0 : r.filter((s) => s.startsWith(n));
    }).join()] }).map((t) => t.obj) : [] : [];
  }
  getEmojiCategories() {
    const e = this._getItems();
    if (!e) return [];
    const { t } = this.editor.locale, n = [{ title: t("Smileys & Expressions"), icon: "😄", groupId: 0 }, { title: t("Gestures & People"), icon: "👋", groupId: 1 }, { title: t("Animals & Nature"), icon: "🐻", groupId: 3 }, { title: t("Food & Drinks"), icon: "🍎", groupId: 4 }, { title: t("Travel & Places"), icon: "🚘", groupId: 5 }, { title: t("Activities"), icon: "🏀", groupId: 6 }, { title: t("Objects"), icon: "💡", groupId: 7 }, { title: t("Symbols"), icon: "🔵", groupId: 8 }, { title: t("Flags"), icon: "🏁", groupId: 9 }], r = function(s, a) {
      const l = {};
      for (let c = 0; c < s.length; c++) {
        const d = s[c], u = a(d);
        Object.hasOwn(l, u) || (l[u] = []), l[u].push(d);
      }
      return l;
    }(e, (s) => s.group);
    return n.map((s) => ({ ...s, items: r[s.groupId] }));
  }
  getSkinTones() {
    const { t: e } = this.editor.locale;
    return [{ id: "default", icon: "👋", tooltip: e("Default skin tone") }, { id: "light", icon: "👋🏻", tooltip: e("Light skin tone") }, { id: "medium-light", icon: "👋🏼", tooltip: e("Medium Light skin tone") }, { id: "medium", icon: "👋🏽", tooltip: e("Medium skin tone") }, { id: "medium-dark", icon: "👋🏾", tooltip: e("Medium Dark skin tone") }, { id: "dark", icon: "👋🏿", tooltip: e("Dark skin tone") }];
  }
  isReady() {
    return this._repositoryPromise;
  }
  _getUrl() {
    const { definitionsUrl: e, version: t } = this.editor.config.get("emoji");
    if (!e || e === "cdn") {
      const n = new URL("https://cdn.ckeditor.com/ckeditor5/data/emoji/{version}/en.json".replace("{version}", (t || 16).toString()));
      return n.searchParams.set("editorVersion", qb), n;
    }
    return t && ce("emoji-repository-redundant-version"), new URL(e);
  }
  _warnAboutCdnUse() {
    const e = this.editor, t = e.config.get("emoji"), n = e.config.get("licenseKey"), r = window[Symbol.for("cke distribution")];
    n !== "GPL" && r !== "cloud" && (t && t.definitionsUrl || ce("emoji-repository-cdn-use"));
  }
  _getItems() {
    const e = $o._results[this._url.href];
    return e && e.length ? e : null;
  }
  async _loadAndCacheEmoji() {
    if ($o._results[this._url.href]) return;
    const e = await fetch(this._url, { cache: "force-cache" }).then((t) => t.ok ? t.json() : []).catch(() => []);
    $o._results[this._url.href] = this._normalizeEmoji(e);
  }
  _normalizeEmoji(e) {
    const t = this.editor, n = t.config.get("emoji.useCustomFont"), r = t.plugins.get("EmojiUtils"), s = e.filter((d) => r.isEmojiCategoryAllowed(d));
    if (n) return s.map((d) => r.normalizeEmojiSkinTone(d));
    const a = r.getEmojiSupportedVersionByOs(), l = r.createEmojiWidthTestingContainer();
    document.body.appendChild(l);
    const c = s.filter((d) => r.isEmojiSupported(d, a, l)).map((d) => r.normalizeEmojiSkinTone(d));
    return l.remove(), c;
  }
};
m($o, "_results", {});
let Ba = $o;
const Io = ":", fc = ":__EMOJI_SHOW_ALL:", bc = ":__EMOJI_HINT:";
class v3 extends A {
  constructor(e) {
    super(e);
    m(this, "_emojiDropdownLimit");
    m(this, "_skinTone");
    this.editor.config.define("emoji", { dropdownLimit: 6 }), this._emojiDropdownLimit = e.config.get("emoji.dropdownLimit"), this._skinTone = e.config.get("emoji.skinTone"), this._setupMentionConfiguration(e);
  }
  static get requires() {
    return [Ba, bl, "Mention"];
  }
  static get pluginName() {
    return "EmojiMention";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  _setupMentionConfiguration(e) {
    const t = e.config.get("mergeFields.prefix"), n = e.config.get("mention.feeds"), r = !!t && t[0] === Io;
    if (n.filter((a) => !a._isEmojiMarker).some((a) => a.marker === Io) || r) return void ce("emoji-config-marker-already-used", { marker: Io });
    if (n.some((a) => a._isEmojiMarker)) return;
    const s = { _isEmojiMarker: !0, marker: Io, dropdownLimit: this._emojiDropdownLimit, itemRenderer: this._customItemRendererFactory(this.editor.t), feed: this._queryEmojiCallbackFactory() };
    this.editor.config.set("mention.feeds", [...n, s]);
  }
  async init() {
    const e = this.editor;
    this.emojiPickerPlugin = e.plugins.has("EmojiPicker") ? e.plugins.get("EmojiPicker") : null, this.emojiRepositoryPlugin = e.plugins.get("EmojiRepository"), this._isEmojiRepositoryAvailable = await this.emojiRepositoryPlugin.isReady(), this._isEmojiRepositoryAvailable && e.once("ready", this._overrideMentionExecuteListener.bind(this));
  }
  _customItemRendererFactory(e) {
    return (t) => {
      const n = document.createElement("button");
      n.classList.add("ck"), n.classList.add("ck-button"), n.classList.add("ck-button_with-text"), n.id = `mention-list-item-id${t.id.slice(0, -1)}`, n.type = "button", n.tabIndex = -1;
      const r = document.createElement("span");
      return r.classList.add("ck"), r.classList.add("ck-button__label"), n.appendChild(r), t.id === bc ? (n.classList.add("ck-list-item-button"), n.classList.add("ck-disabled"), r.textContent = e("Keep on typing to see the emoji.")) : t.id === fc ? r.textContent = e("Show all emoji...") : r.textContent = `${t.text} ${t.id}`, n;
    };
  }
  _overrideMentionExecuteListener() {
    const e = this.editor;
    e.commands.get("mention").on("execute", (t, n) => {
      const r = n[0];
      if (r.marker === Io && (t.stop(), r.mention.id !== bc)) if (r.mention.id === fc) {
        const s = [...r.range.getItems()].filter((l) => l.is("$textProxy")).map((l) => l.data).reduce((l, c) => l + c, "");
        e.model.change((l) => {
          e.model.deleteContent(l.createSelection(r.range));
        });
        const a = this.emojiPickerPlugin;
        a.showUI(s.slice(1)), setTimeout(() => {
          a.emojiPickerView.focus();
        });
      } else e.execute("insertText", { text: r.mention.text, range: r.range });
    }, { priority: "high" });
  }
  _queryEmojiCallbackFactory() {
    return (e) => {
      if (e.startsWith(" ")) return [];
      if (e.startsWith(Io)) return [];
      if (!this._isEmojiRepositoryAvailable) return [];
      const t = this.emojiRepositoryPlugin.getEmojiByQuery(e).map((r) => {
        let s = r.skins[this._skinTone] || r.skins.default;
        return this.emojiPickerPlugin && (s = r.skins[this.emojiPickerPlugin.skinTone] || r.skins.default), { id: `:${r.annotation}:`, text: s };
      });
      if (!this.emojiPickerPlugin) return t.slice(0, this._emojiDropdownLimit);
      const n = { id: e.length > 1 ? fc : bc };
      return [...t.slice(0, this._emojiDropdownLimit - 1), n];
    };
  }
}
class y3 extends G {
  refresh() {
    const i = this.editor.model, e = i.schema, t = i.document.selection;
    this.isEnabled = e.checkChild(t.getFirstPosition(), "$text");
  }
  execute(i = "") {
    this.editor.plugins.get("EmojiPicker").showUI(i);
  }
}
class x3 extends N {
  constructor(e, { categoryName: t, emojiCategories: n, getEmojiByQuery: r, skinTone: s }) {
    super(e);
    m(this, "tiles");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "emojiCategories");
    m(this, "cachedTiles");
    m(this, "_getEmojiByQuery");
    this.set("isEmpty", !0), this.set("categoryName", t), this.set("skinTone", s), this.tiles = this.createCollection(), this.cachedTiles = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this._getEmojiByQuery = r, this.emojiCategories = n;
    const a = this.bindTemplate;
    this.setTemplate({ tag: "div", children: [{ tag: "div", attributes: { role: "grid", class: ["ck", "ck-emoji__grid"] }, children: this.tiles }], attributes: { role: "tabpanel", class: ["ck", "ck-emoji__tiles", a.if("isEmpty", "ck-hidden", (l) => l)] } }), Cs({ keystrokeHandler: this.keystrokes, focusTracker: this.focusTracker, gridItems: this.tiles, numberOfColumns: () => z.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length, uiLanguageDirection: this.locale && this.locale.uiLanguageDirection });
  }
  render() {
    super.render(), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.keystrokes.destroy(), this.focusTracker.destroy();
  }
  focus() {
    const e = this.tiles.first;
    e && e.focus();
  }
  filter(e) {
    const { matchingItems: t, allItems: n } = e ? this._getItemsByQuery(e.source) : this._getItemsByCategory();
    return this._updateGrid(t), this.set("isEmpty", t.length === 0), { resultsCount: t.length, totalItemsCount: n.length };
  }
  _getItemsByQuery(e) {
    return { matchingItems: this._getEmojiByQuery(e), allItems: this.emojiCategories.flatMap((t) => t.items) };
  }
  _getItemsByCategory() {
    const e = this.emojiCategories.find((n) => n.title === this.categoryName), { items: t } = e;
    return { matchingItems: t, allItems: t };
  }
  _updateGrid(e) {
    [...this.tiles].forEach((t) => {
      this.focusTracker.remove(t), this.tiles.remove(t);
    }), e.map((t) => {
      const n = t.skins[this.skinTone] || t.skins.default;
      return this.cachedTiles.get(n) || this._createTile(n, t.annotation);
    }).forEach((t) => {
      this.tiles.add(t), this.focusTracker.add(t);
    });
  }
  _createTile(e, t) {
    const n = new j(this.locale);
    return n.viewUid = e, n.extendTemplate({ attributes: { class: ["ck-emoji__tile"] } }), n.set({ label: e, tooltip: t, withText: !0, ariaLabel: t, ariaLabelledBy: void 0 }), n.on("execute", () => {
      this.fire("execute", { name: t, emoji: e });
    }), this.cachedTiles.add(n), n;
  }
}
class C3 extends N {
  constructor(e, { emojiCategories: t, categoryName: n }) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "focusCycler");
    m(this, "buttonViews");
    this.buttonViews = this.createCollection(t.map((r) => this._createCategoryButton(r))), this.focusTracker = new fe(), this.keystrokes = new Le(), this.focusCycler = new ut({ focusables: this.buttonViews, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "arrowleft", focusNext: "arrowright" } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-emoji__categories-list"], role: "tablist" }, children: this.buttonViews }), this.on("change:categoryName", (r, s, a, l) => {
      const c = this.buttonViews.find((d) => d.tooltip === l);
      c && (c.isOn = !1), this.buttonViews.find((d) => d.tooltip === a).isOn = !0;
    }), this.set("categoryName", n);
  }
  render() {
    super.render(), this.buttonViews.forEach((e) => {
      this.focusTracker.add(e);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy(), this.buttonViews.destroy();
  }
  focus() {
    this.buttonViews.first.focus();
  }
  enableCategories() {
    this.buttonViews.forEach((e) => {
      e.isEnabled = !0;
    });
  }
  disableCategories() {
    this.buttonViews.forEach((e) => {
      e.set({ class: "", isEnabled: !1, isOn: !1 });
    });
  }
  _createCategoryButton(e) {
    const t = new j(), n = t.bindTemplate;
    return t.extendTemplate({ attributes: { "aria-selected": n.to("isOn", (r) => r.toString()), class: ["ck-emoji__category-item"] } }), t.set({ ariaLabel: e.title, label: e.icon, role: "tab", tooltip: e.title, withText: !0, ariaLabelledBy: void 0 }), t.on("execute", () => {
      this.categoryName = e.title;
    }), t.on("change:isEnabled", () => {
      t.isEnabled && t.tooltip === this.categoryName && (t.isOn = !0);
    }), t;
  }
}
class A3 extends N {
  constructor(e, { gridView: t, resultsView: n }) {
    super(e);
    m(this, "inputView");
    m(this, "gridView");
    this.gridView = t;
    const r = e.t;
    this.inputView = new WT(this.locale, { queryView: { label: r("Find an emoji (min. 2 characters)"), creator: Ln }, filteredView: this.gridView, infoView: { instance: n } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-search"], tabindex: "-1" }, children: [this.inputView.queryView] }), this.inputView.delegate("search").to(this);
  }
  destroy() {
    super.destroy(), this.inputView.destroy();
  }
  search(e) {
    const t = e ? new RegExp(wk(e), "ig") : null, n = this.gridView.filter(t);
    this.inputView.fire("search", { query: e, ...n });
  }
  setInputValue(e) {
    e ? this.inputView.queryView.fieldView.value = e : this.inputView.queryView.fieldView.reset();
  }
  getInputValue() {
    return this.inputView.queryView.fieldView.element.value;
  }
  focus() {
    this.inputView.focus();
  }
}
class T3 extends N {
  constructor(e, { skinTone: t, skinTones: n }) {
    super(e);
    m(this, "dropdownView");
    m(this, "_skinTones");
    this.set("skinTone", t), this._skinTones = n;
    const r = (0, e.t)("Select skin tone"), s = ft(e), a = new rt();
    for (const { id: l, icon: c, tooltip: d } of this._skinTones) {
      const u = { type: "button", model: new cn({ value: l, label: c, ariaLabel: d, tooltip: d, tooltipPosition: "e", role: "menuitemradio", withText: !0, ariaLabelledBy: void 0 }) };
      u.model.bind("isOn").to(this, "skinTone", (h) => h === l), a.add(u);
    }
    Bn(s, a, { ariaLabel: r, role: "menu" }), s.buttonView.set({ label: this._getSkinTone().icon, ariaLabel: r, ariaLabelledBy: void 0, isOn: !1, withText: !0, tooltip: r }), this.dropdownView = s, this.listenTo(s, "execute", (l) => {
      this.skinTone = l.source.value;
    }), s.buttonView.bind("label").to(this, "skinTone", () => this._getSkinTone().icon), s.buttonView.bind("ariaLabel").to(this, "skinTone", () => `${this._getSkinTone().tooltip}, ${r}`), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-emoji__skin-tone"] }, children: [s] });
  }
  focus() {
    this.dropdownView.buttonView.focus();
  }
  _getSkinTone() {
    return this._skinTones.find((e) => e.id === this.skinTone);
  }
}
class E3 extends N {
  constructor(e, { emojiCategories: t, getEmojiByQuery: n, skinTone: r, skinTones: s }) {
    super(e);
    m(this, "items");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "focusCycler");
    m(this, "searchView");
    m(this, "toneView");
    m(this, "categoriesView");
    m(this, "gridView");
    m(this, "infoView");
    const a = t[0].title;
    this.gridView = new x3(e, { categoryName: a, emojiCategories: t, getEmojiByQuery: n, skinTone: r }), this.infoView = new iw(), this.searchView = new A3(e, { gridView: this.gridView, resultsView: this.infoView }), this.categoriesView = new C3(e, { emojiCategories: t, categoryName: a }), this.toneView = new T3(e, { skinTone: r, skinTones: s }), this.items = this.createCollection([this.searchView, this.toneView, this.categoriesView, this.gridView, this.infoView]), this.focusTracker = new fe(), this.keystrokes = new Le(), this.focusCycler = new ut({ focusables: this.items, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", children: [{ tag: "div", children: [this.searchView, this.toneView], attributes: { class: ["ck", "ck-emoji__search"] } }, this.categoriesView, this.gridView, { tag: "div", children: [this.infoView], attributes: { class: ["ck", "ck-search__results"] } }], attributes: { tabindex: "-1", class: ["ck", "ck-emoji", "ck-search"] } }), this._setupEventListeners();
  }
  render() {
    super.render(), this.focusTracker.add(this.searchView.element), this.focusTracker.add(this.toneView.element), this.focusTracker.add(this.categoriesView.element), this.focusTracker.add(this.gridView.element), this.focusTracker.add(this.infoView.element), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this.searchView.focus();
  }
  _setupEventListeners() {
    const e = this.locale.t;
    this.searchView.on("search", (t, n) => {
      n.query ? this.categoriesView.disableCategories() : this.categoriesView.enableCategories();
    }), this.searchView.on("search", (t, n) => {
      n.query.length === 1 ? this.infoView.set({ primaryText: e("Keep on typing to see the emoji."), secondaryText: e("The query must contain at least two characters."), isVisible: !0 }) : n.resultsCount ? this.infoView.set({ isVisible: !1 }) : this.infoView.set({ primaryText: e('No emojis were found matching "%0".', n.query), secondaryText: e("Please try a different phrase or check the spelling."), isVisible: !0 });
    }), this.searchView.on("search", () => {
      this.fire("update"), this.gridView.element.scrollTo(0, 0);
    }), this.categoriesView.on("change:categoryName", (t, n, r) => {
      this.gridView.categoryName = r, this.searchView.search("");
    }), this.toneView.on("change:skinTone", (t, n, r) => {
      this.gridView.skinTone = r, this.searchView.search(this.searchView.getInputValue());
    });
  }
}
class S3 extends N {
  constructor(e) {
    super(e);
    m(this, "backButtonView");
    m(this, "focusTracker", new fe());
    m(this, "keystrokes", new Le());
    m(this, "children");
    m(this, "_focusables", new It());
    m(this, "_focusCycler");
    this.backButtonView = this._createBackButton(), this.children = this.createCollection([this._createHeaderView()]), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-form", "ck-emoji-picker-form", "ck-responsive-form"], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), [...this.children.filter(cr), this.backButtonView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element), N_(e) && this._focusCycler.chain(e.focusCycler);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "cancel"), t;
  }
  _createHeaderView() {
    const e = this.locale.t, t = new mo(this.locale, { label: e("Emoji picker") });
    return t.children.add(this.backButtonView, 0), t;
  }
}
const kn = "emoji-picker";
class I3 extends A {
  static get requires() {
    return [Ba, Bi, oo, bl];
  }
  static get pluginName() {
    return "EmojiPicker";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  async init() {
    const i = this.editor;
    if (this.balloonPlugin = i.plugins.get("ContextualBalloon"), this.emojiRepositoryPlugin = i.plugins.get("EmojiRepository"), !await this.emojiRepositoryPlugin.isReady()) return;
    const e = new y3(i);
    i.commands.add("emoji", e), i.ui.componentFactory.add("emoji", () => {
      const t = this._createButton(j, e);
      return t.set({ tooltip: !0 }), t;
    }), i.ui.componentFactory.add("menuBar:emoji", () => this._createButton(Ie, e)), this._setupConversion();
  }
  destroy() {
    super.destroy(), this.emojiPickerView && this.emojiPickerView.destroy();
  }
  get skinTone() {
    return this.emojiPickerView ? this.emojiPickerView.gridView.skinTone : this.editor.config.get("emoji.skinTone");
  }
  showUI(i = "") {
    this._showFakeVisualSelection(), this.emojiPickerView || (this.emojiPickerView = this._createEmojiPickerView()), i && this.emojiPickerView.searchView.setInputValue(i), this.emojiPickerView.searchView.search(i), this.emojiPickerFormView || (this.emojiPickerFormView = this._createEmojiPickerFormView()), this.balloonPlugin.hasView(this.emojiPickerFormView) || (this.emojiPickerFormView.backButtonView.isVisible = !!this.balloonPlugin.visibleView, this.balloonPlugin.add({ view: this.emojiPickerFormView, position: this._getBalloonPositionData(), balloonClassName: "ck-emoji-picker-balloon" })), this.emojiPickerView.focus();
  }
  _createButton(i, e) {
    const t = new i(this.editor.locale), n = this.editor.locale.t;
    return t.bind("isEnabled").to(e, "isEnabled"), t.set({ label: n("Emoji"), icon: FC, isToggleable: !0 }), t.on("execute", () => {
      this.editor.editing.view.scrollToTheSelection(), this.showUI();
    }), t;
  }
  _createEmojiPickerView() {
    const i = new E3(this.editor.locale, { emojiCategories: this.emojiRepositoryPlugin.getEmojiCategories(), skinTone: this.editor.config.get("emoji.skinTone"), skinTones: this.emojiRepositoryPlugin.getSkinTones(), getEmojiByQuery: (e) => this.emojiRepositoryPlugin.getEmojiByQuery(e) });
    return this.listenTo(i.gridView, "execute", (e, t) => {
      const n = this.editor, r = t.emoji;
      this._hideUI(), n.execute("insertText", { text: r });
    }), i;
  }
  _createEmojiPickerFormView() {
    const i = new S3(this.editor.locale);
    return i.children.add(this.emojiPickerView), this.listenTo(this.emojiPickerView, "update", () => {
      this.balloonPlugin.visibleView === i && this.balloonPlugin.updatePosition();
    }), this.listenTo(i, "cancel", () => {
      this._hideUI();
    }), i.keystrokes.set("Esc", (e, t) => {
      this._hideUI(), t();
    }), zn({ emitter: i, contextElements: [this.balloonPlugin.view.element], callback: () => {
      this._hideUI(!1);
    }, activator: () => this.balloonPlugin.visibleView === i }), i;
  }
  _hideUI(i = !0) {
    this.balloonPlugin.remove(this.emojiPickerFormView), this.emojiPickerView.searchView.setInputValue(""), i && this.editor.editing.view.focus(), this._hideFakeVisualSelection();
  }
  _setupConversion() {
    const i = this.editor;
    i.conversion.for("editingDowncast").markerToHighlight({ model: kn, view: { classes: ["ck-fake-emoji-selection"] } }), i.conversion.for("editingDowncast").markerToElement({ model: kn, view: (e, { writer: t }) => {
      if (!e.markerRange.isCollapsed) return null;
      const n = t.createUIElement("span");
      return t.addClass(["ck-fake-emoji-selection", "ck-fake-emoji-selection_collapsed"], n), n;
    } });
  }
  _getBalloonPositionData() {
    const i = this.editor.editing.view, e = i.document;
    return { target: () => i.domConverter.viewRangeToDom(e.selection.getFirstRange()) };
  }
  _showFakeVisualSelection() {
    const i = this.editor.model;
    i.change((e) => {
      const t = i.document.selection.getFirstRange();
      if (i.markers.has(kn)) e.updateMarker(kn, { range: t });
      else if (t.start.isAtEnd) {
        const n = t.start.getLastMatchingPosition(({ item: r }) => !i.schema.isContent(r), { boundaries: t });
        e.addMarker(kn, { usingOperation: !1, affectsData: !1, range: e.createRange(n, t.end) });
      } else e.addMarker(kn, { usingOperation: !1, affectsData: !1, range: t });
    });
  }
  _hideFakeVisualSelection() {
    const i = this.editor.model;
    i.markers.has(kn) && i.change((e) => {
      e.removeMarker(kn);
    });
  }
}
class P3 extends A {
  static get requires() {
    return [v3, I3];
  }
  static get pluginName() {
    return "Emoji";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class M3 extends G {
  constructor(i) {
    super(i), this.affectsData = !1;
  }
  execute() {
    const i = this.editor.model, e = i.document.selection;
    let t = i.schema.getLimitElement(e);
    if (e.containsEntireContent(t) || !rp(i.schema, t)) do
      if (t = t.parent, !t) return;
    while (!rp(i.schema, t));
    i.change((n) => {
      n.setSelection(t, "in");
    });
  }
}
function rp(o, i) {
  return o.isLimit(i) && (o.checkChild(i, "$text") || o.checkChild(i, "paragraph"));
}
const V3 = ys("Ctrl+A");
class L3 extends A {
  static get pluginName() {
    return "SelectAllEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t, t = i.editing.view.document;
    i.commands.add("selectAll", new M3(i)), this.listenTo(t, "keydown", (n, r) => {
      no(r) === V3 && (i.execute("selectAll"), r.preventDefault());
    }), i.accessibility.addKeystrokeInfos({ keystrokes: [{ label: e("Select all"), keystroke: "CTRL+A" }] });
  }
}
class O3 extends A {
  static get pluginName() {
    return "SelectAllUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.ui.componentFactory.add("selectAll", () => {
      const e = this._createButton(j);
      return e.set({ tooltip: !0 }), e;
    }), i.ui.componentFactory.add("menuBar:selectAll", () => this._createButton(Ie));
  }
  _createButton(i) {
    const e = this.editor, t = e.locale, n = e.commands.get("selectAll"), r = new i(e.locale), s = t.t;
    return r.set({ label: s("Select all"), icon: xA, keystroke: "Ctrl+A" }), r.bind("isEnabled").to(n, "isEnabled"), this.listenTo(r, "execute", () => {
      e.execute("selectAll"), e.editing.view.focus();
    }), r;
  }
}
class N3 extends A {
  static get requires() {
    return [L3, O3];
  }
  static get pluginName() {
    return "SelectAll";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class xw extends G {
  constructor(e) {
    super(e);
    m(this, "_stack", []);
    m(this, "_createdBatches", /* @__PURE__ */ new WeakSet());
    this.refresh(), this._isEnabledBasedOnSelection = !1, this.listenTo(e.data, "set", (t, n) => {
      n[1] = { ...n[1] };
      const r = n[1];
      r.batchType || (r.batchType = { isUndoable: !1 });
    }, { priority: "high" }), this.listenTo(e.data, "set", (t, n) => {
      n[1].batchType.isUndoable || this.clearStack();
    });
  }
  refresh() {
    this.isEnabled = this._stack.length > 0;
  }
  get createdBatches() {
    return this._createdBatches;
  }
  addBatch(e) {
    const t = this.editor.model.document.selection, n = { ranges: t.hasOwnRange ? Array.from(t.getRanges()) : [], isBackward: t.isBackward };
    this._stack.push({ batch: e, selection: n }), this.refresh();
  }
  clearStack() {
    this._stack = [], this.refresh();
  }
  _restoreSelection(e, t, n) {
    const r = this.editor.model, s = r.document, a = [], l = e.map((d) => d.getTransformedByOperations(n)), c = l.flat();
    for (const d of l) {
      const u = d.filter((h) => h.root != s.graveyard).filter((h) => !z3(h, c));
      u.length && (R3(u), a.push(u[0]));
    }
    a.length && r.change((d) => {
      d.setSelection(a, { backward: t });
    });
  }
  _undo(e, t) {
    const n = this.editor.model, r = n.document;
    this._createdBatches.add(t);
    const s = e.operations.slice().filter((a) => a.isDocumentOperation);
    s.reverse();
    for (const a of s) {
      const l = a.baseVersion + 1, c = Array.from(r.history.getOperations(l)), d = g5([a.getReversed()], c, { useRelations: !0, document: this.editor.model.document, padWithNoOps: !1, forceWeakRemove: !0 }).operationsA;
      for (let u of d) {
        const h = u.affectedSelectable;
        h && !n.canEditAt(h) && (u = new at(u.baseVersion)), t.addOperation(u), n.applyOperation(u), r.history.setOperationAsUndone(a, u);
      }
    }
  }
}
function R3(o) {
  o.sort((i, e) => i.start.isBefore(e.start) ? -1 : 1);
  for (let i = 1; i < o.length; i++) {
    const e = o[i - 1].getJoined(o[i], !0);
    e && (i--, o.splice(i, 2, e));
  }
}
function z3(o, i) {
  return i.some((e) => e !== o && e.containsRange(o, !0));
}
class B3 extends xw {
  execute(i = null) {
    const e = i ? this._stack.findIndex((r) => r.batch == i) : this._stack.length - 1, t = this._stack.splice(e, 1)[0], n = this.editor.model.createBatch({ isUndo: !0 });
    this.editor.model.enqueueChange(n, () => {
      this._undo(t.batch, n);
      const r = this.editor.model.document.history.getOperations(t.batch.baseVersion);
      this._restoreSelection(t.selection.ranges, t.selection.isBackward, r);
    }), this.fire("revert", t.batch, n), this.refresh();
  }
}
class D3 extends xw {
  execute() {
    const i = this._stack.pop(), e = this.editor.model.createBatch({ isUndo: !0 });
    this.editor.model.enqueueChange(e, () => {
      const t = i.batch.operations[i.batch.operations.length - 1].baseVersion + 1, n = this.editor.model.document.history.getOperations(t);
      this._restoreSelection(i.selection.ranges, i.selection.isBackward, n), this._undo(i.batch, e);
    }), this.refresh();
  }
}
class F3 extends A {
  constructor() {
    super(...arguments);
    m(this, "_undoCommand");
    m(this, "_redoCommand");
    m(this, "_batchRegistry", /* @__PURE__ */ new WeakSet());
  }
  static get pluginName() {
    return "UndoEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.t;
    this._undoCommand = new B3(e), this._redoCommand = new D3(e), e.commands.add("undo", this._undoCommand), e.commands.add("redo", this._redoCommand), this.listenTo(e.model, "applyOperation", (n, r) => {
      const s = r[0];
      if (!s.isDocumentOperation) return;
      const a = s.batch, l = this._redoCommand.createdBatches.has(a), c = this._undoCommand.createdBatches.has(a);
      this._batchRegistry.has(a) || (this._batchRegistry.add(a), a.isUndoable && (l ? this._undoCommand.addBatch(a) : c || (this._undoCommand.addBatch(a), this._redoCommand.clearStack())));
    }, { priority: "highest" }), this.listenTo(this._undoCommand, "revert", (n, r, s) => {
      this._redoCommand.addBatch(s);
    }), e.keystrokes.set("CTRL+Z", "undo"), e.keystrokes.set("CTRL+Y", "redo"), e.keystrokes.set("CTRL+SHIFT+Z", "redo"), e.accessibility.addKeystrokeInfos({ keystrokes: [{ label: t("Undo"), keystroke: "CTRL+Z" }, { label: t("Redo"), keystroke: [["CTRL+Y"], ["CTRL+SHIFT+Z"]] }] });
  }
}
class j3 extends A {
  static get pluginName() {
    return "UndoUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale, t = i.t, n = e.uiLanguageDirection == "ltr" ? Xm : Qm, r = e.uiLanguageDirection == "ltr" ? Qm : Xm;
    this._addButtonsToFactory("undo", t("Undo"), "CTRL+Z", n), this._addButtonsToFactory("redo", t("Redo"), "CTRL+Y", r);
  }
  _addButtonsToFactory(i, e, t, n) {
    const r = this.editor;
    r.ui.componentFactory.add(i, () => {
      const s = this._createButton(j, i, e, t, n);
      return s.set({ tooltip: !0 }), s;
    }), r.ui.componentFactory.add("menuBar:" + i, () => this._createButton(Ie, i, e, t, n));
  }
  _createButton(i, e, t, n, r) {
    const s = this.editor, a = s.locale, l = s.commands.get(e), c = new i(a);
    return c.set({ label: t, icon: r, keystroke: n }), c.bind("isEnabled").to(l, "isEnabled"), this.listenTo(c, "execute", () => {
      s.execute(e), s.editing.view.focus();
    }), c;
  }
}
class $u extends A {
  static get requires() {
    return [F3, j3];
  }
  static get pluginName() {
    return "Undo";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class H3 extends A {
  static get requires() {
    return [$A, ju, _l, N3, hw, bl, $u];
  }
  static get pluginName() {
    return "Essentials";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class vl extends G {
  constructor(e, t) {
    super(e);
    m(this, "attributeKey");
    this.attributeKey = t;
  }
  refresh() {
    const e = this.editor.model, t = e.document;
    this.value = t.selection.getAttribute(this.attributeKey), this.isEnabled = e.schema.checkAttributeInSelection(t.selection, this.attributeKey);
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document.selection, r = e.value, s = e.batch, a = (l) => {
      if (n.isCollapsed) r ? l.setSelectionAttribute(this.attributeKey, r) : l.removeSelectionAttribute(this.attributeKey);
      else {
        const c = t.schema.getValidRanges(n.getRanges(), this.attributeKey);
        for (const d of c) r ? l.setAttribute(this.attributeKey, r, d) : l.removeAttribute(this.attributeKey, d);
      }
    };
    s ? t.enqueueChange(s, (l) => {
      a(l);
    }) : t.change((l) => {
      a(l);
    });
  }
}
const Bt = "fontSize", Dt = "fontFamily", Pi = "fontColor", Ki = "fontBackgroundColor";
function Cw(o, i) {
  const e = { model: { key: o, values: [] }, view: {}, upcastAlso: {} };
  for (const t of i) e.model.values.push(t.model), e.view[t.model] = t.view, t.upcastAlso && (e.upcastAlso[t.model] = t.upcastAlso);
  return e;
}
function Aw(o) {
  return (i) => i.getStyle(o).replace(/\s/g, "");
}
function Tw(o) {
  return (i, { writer: e }) => e.createAttributeElement("span", { style: `${o}:${i}` }, { priority: 7 });
}
class $3 extends vl {
  constructor(i) {
    super(i, Dt);
  }
}
function Ew(o) {
  return o.map(U3).filter((i) => i !== void 0);
}
function U3(o) {
  return typeof o == "object" ? o : o === "default" ? { title: "Default", model: void 0 } : typeof o == "string" ? function(i) {
    const e = i.replace(/"|'/g, "").split(","), t = e[0], n = e.map(q3).join(", ");
    return { title: t, model: n, view: { name: "span", styles: { "font-family": n }, priority: 7 } };
  }(o) : void 0;
}
function q3(o) {
  return (o = o.trim()).indexOf(" ") > 0 && (o = `'${o}'`), o;
}
class W3 extends A {
  static get pluginName() {
    return "FontFamilyEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define(Dt, { options: ["default", "Arial, Helvetica, sans-serif", "Courier New, Courier, monospace", "Georgia, serif", "Lucida Sans Unicode, Lucida Grande, sans-serif", "Tahoma, Geneva, sans-serif", "Times New Roman, Times, serif", "Trebuchet MS, Helvetica, sans-serif", "Verdana, Geneva, sans-serif"], supportAllValues: !1 });
  }
  init() {
    const i = this.editor;
    i.model.schema.extend("$text", { allowAttributes: Dt }), i.model.schema.setAttributeProperties(Dt, { isFormatting: !0, copyOnEnter: !0 });
    const e = Ew(i.config.get("fontFamily.options")).filter((n) => n.model), t = Cw(Dt, e);
    i.config.get("fontFamily.supportAllValues") ? (this._prepareAnyValueConverters(), this._prepareCompatibilityConverter()) : i.conversion.attributeToElement(t), i.commands.add(Dt, new $3(i));
  }
  _prepareAnyValueConverters() {
    const i = this.editor;
    i.conversion.for("downcast").attributeToElement({ model: Dt, view: (e, { writer: t }) => t.createAttributeElement("span", { style: "font-family:" + e }, { priority: 7 }) }), i.conversion.for("upcast").elementToAttribute({ model: { key: Dt, value: (e) => e.getStyle("font-family") }, view: { name: "span", styles: { "font-family": /.*/ } } });
  }
  _prepareCompatibilityConverter() {
    this.editor.conversion.for("upcast").elementToAttribute({ view: { name: "font", attributes: { face: /.*/ } }, model: { key: Dt, value: (i) => i.getAttribute("face") } });
  }
}
class G3 extends A {
  static get pluginName() {
    return "FontFamilyUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t, t = this._getLocalizedOptions(), n = i.commands.get(Dt), r = e("Font Family"), s = function(a, l) {
      const c = new rt();
      for (const d of a) {
        const u = { type: "button", model: new cn({ commandName: Dt, commandParam: d.model, label: d.title, role: "menuitemradio", withText: !0 }) };
        u.model.bind("isOn").to(l, "value", (h) => h === d.model || !(!h || !d.model) && h.split(",")[0].replace(/'/g, "").toLowerCase() === d.model.toLowerCase()), d.view && typeof d.view != "string" && d.view.styles && u.model.set("labelStyle", `font-family: ${d.view.styles["font-family"]}`), c.add(u);
      }
      return c;
    }(t, n);
    i.ui.componentFactory.add(Dt, (a) => {
      const l = ft(a);
      return Bn(l, s, { role: "menu", ariaLabel: r }), l.buttonView.set({ label: r, icon: Gm, tooltip: !0 }), l.extendTemplate({ attributes: { class: "ck-font-family-dropdown" } }), l.bind("isEnabled").to(n), this.listenTo(l, "execute", (c) => {
        i.execute(c.source.commandName, { value: c.source.commandParam }), i.editing.view.focus();
      }), l;
    }), i.ui.componentFactory.add(`menuBar:${Dt}`, (a) => {
      const l = new Vt(a);
      l.buttonView.set({ label: r, icon: Gm }), l.bind("isEnabled").to(n);
      const c = new dn(a);
      for (const d of s) {
        const u = new zi(a, l), h = new Ie(a);
        h.set({ role: "menuitemradio", isToggleable: !0 }), h.bind(...Object.keys(d.model)).to(d.model), h.delegate("execute").to(l), h.on("execute", () => {
          i.execute(d.model.commandName, { value: d.model.commandParam }), i.editing.view.focus();
        }), u.children.add(h), c.items.add(u);
      }
      return l.panelView.children.add(c), l;
    });
  }
  _getLocalizedOptions() {
    const i = this.editor, e = i.t;
    return Ew(i.config.get(Dt).options).map((t) => (t.title === "Default" && (t.title = e("Default")), t));
  }
}
class Z3 extends A {
  static get requires() {
    return [W3, G3];
  }
  static get pluginName() {
    return "FontFamily";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class K3 extends vl {
  constructor(i) {
    super(i, Bt);
  }
}
function Uu(o) {
  return o.map((i) => function(e) {
    if (typeof e == "number" && (e = String(e)), typeof e == "object" && (t = e, t.title && t.model && t.view)) return kc(e);
    var t;
    const n = function(r) {
      return typeof r == "string" ? sp[r] : sp[r.model];
    }(e);
    if (n) return kc(n);
    if (e === "default") return { model: void 0, title: "Default" };
    if (!function(r) {
      let s;
      if (typeof r == "object") {
        if (!r.model) throw new v("font-size-invalid-definition", null, r);
        s = parseFloat(r.model);
      } else s = parseFloat(r);
      return isNaN(s);
    }(e))
      return function(r) {
        return typeof r == "string" && (r = { title: r, model: `${parseFloat(r)}px` }), r.view = { name: "span", styles: { "font-size": r.model } }, kc(r);
      }(e);
  }(i)).filter((i) => i !== void 0);
}
const sp = { get tiny() {
  return { title: "Tiny", model: "tiny", view: { name: "span", classes: "text-tiny", priority: 7 } };
}, get small() {
  return { title: "Small", model: "small", view: { name: "span", classes: "text-small", priority: 7 } };
}, get big() {
  return { title: "Big", model: "big", view: { name: "span", classes: "text-big", priority: 7 } };
}, get huge() {
  return { title: "Huge", model: "huge", view: { name: "span", classes: "text-huge", priority: 7 } };
} };
function kc(o) {
  return o.view && typeof o.view != "string" && !o.view.priority && (o.view.priority = 7), o;
}
const ap = ["x-small", "x-small", "small", "medium", "large", "x-large", "xx-large", "xxx-large"];
class Y3 extends A {
  static get pluginName() {
    return "FontSizeEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define(Bt, { options: ["tiny", "small", "default", "big", "huge"], supportAllValues: !1 });
  }
  init() {
    const i = this.editor;
    i.model.schema.extend("$text", { allowAttributes: Bt }), i.model.schema.setAttributeProperties(Bt, { isFormatting: !0, copyOnEnter: !0 });
    const e = i.config.get("fontSize.supportAllValues"), t = Uu(this.editor.config.get("fontSize.options")).filter((r) => r.model), n = Cw(Bt, t);
    e ? (this._prepareAnyValueConverters(n), this._prepareCompatibilityConverter()) : i.conversion.attributeToElement(n), i.commands.add(Bt, new K3(i));
  }
  _prepareAnyValueConverters(i) {
    const e = this.editor, t = i.model.values.filter((n) => !q5(String(n)) && !G5(String(n)));
    if (t.length) throw new v("font-size-invalid-use-of-named-presets", null, { presets: t });
    e.conversion.for("downcast").attributeToElement({ model: Bt, view: (n, { writer: r }) => {
      if (n) return r.createAttributeElement("span", { style: "font-size:" + n }, { priority: 7 });
    } }), e.conversion.for("upcast").elementToAttribute({ model: { key: Bt, value: (n) => n.getStyle("font-size") }, view: { name: "span", styles: { "font-size": /.*/ } } });
  }
  _prepareCompatibilityConverter() {
    this.editor.conversion.for("upcast").elementToAttribute({ view: { name: "font", attributes: { size: /^[+-]?\d{1,3}$/ } }, model: { key: Bt, value: (i) => {
      const e = i.getAttribute("size"), t = e[0] === "-" || e[0] === "+";
      let n = parseInt(e, 10);
      t && (n = 3 + n);
      const r = ap.length - 1, s = Math.min(Math.max(n, 0), r);
      return ap[s];
    } } });
  }
}
class Q3 extends A {
  static get pluginName() {
    return "FontSizeUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t, t = this._getLocalizedOptions(), n = i.commands.get(Bt), r = e("Font Size"), s = function(a, l) {
      const c = new rt();
      for (const d of a) {
        const u = { type: "button", model: new cn({ commandName: Bt, commandParam: d.model, label: d.title, class: "ck-fontsize-option", role: "menuitemradio", withText: !0 }) };
        d.view && typeof d.view != "string" && (d.view.styles && u.model.set("labelStyle", `font-size:${d.view.styles["font-size"]}`), d.view.classes && u.model.set("class", `${u.model.class} ${d.view.classes}`)), u.model.bind("isOn").to(l, "value", (h) => h === d.model), c.add(u);
      }
      return c;
    }(t, n);
    i.ui.componentFactory.add(Bt, (a) => {
      const l = ft(a);
      return Bn(l, s, { role: "menu", ariaLabel: r }), l.buttonView.set({ label: r, icon: Zm, tooltip: !0 }), l.extendTemplate({ attributes: { class: ["ck-font-size-dropdown"] } }), l.bind("isEnabled").to(n), this.listenTo(l, "execute", (c) => {
        i.execute(c.source.commandName, { value: c.source.commandParam }), i.editing.view.focus();
      }), l;
    }), i.ui.componentFactory.add(`menuBar:${Bt}`, (a) => {
      const l = new Vt(a);
      l.buttonView.set({ label: r, icon: Zm }), l.bind("isEnabled").to(n);
      const c = new dn(a);
      for (const d of s) {
        const u = new zi(a, l), h = new Ie(a);
        h.set({ role: "menuitemradio", isToggleable: !0 }), h.bind(...Object.keys(d.model)).to(d.model), h.delegate("execute").to(l), h.on("execute", () => {
          i.execute(d.model.commandName, { value: d.model.commandParam }), i.editing.view.focus();
        }), u.children.add(h), c.items.add(u);
      }
      return l.panelView.children.add(c), l;
    });
  }
  _getLocalizedOptions() {
    const i = this.editor, e = i.t, t = { Default: e("Default"), Tiny: e("Tiny"), Small: e("Small"), Big: e("Big"), Huge: e("Huge") };
    return Uu(i.config.get(Bt).options).map((n) => {
      const r = t[n.title];
      return r && r != n.title && (n = Object.assign({}, n, { title: r })), n;
    });
  }
}
class J3 extends A {
  static get requires() {
    return [Y3, Q3];
  }
  static get pluginName() {
    return "FontSize";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  normalizeSizeOptions(i) {
    return Uu(i);
  }
}
class X3 extends vl {
  constructor(i) {
    super(i, Pi);
  }
}
class e4 extends A {
  static get pluginName() {
    return "FontColorEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define(Pi, { colors: [{ color: "hsl(0, 0%, 0%)", label: "Black" }, { color: "hsl(0, 0%, 30%)", label: "Dim grey" }, { color: "hsl(0, 0%, 60%)", label: "Grey" }, { color: "hsl(0, 0%, 90%)", label: "Light grey" }, { color: "hsl(0, 0%, 100%)", label: "White", hasBorder: !0 }, { color: "hsl(0, 75%, 60%)", label: "Red" }, { color: "hsl(30, 75%, 60%)", label: "Orange" }, { color: "hsl(60, 75%, 60%)", label: "Yellow" }, { color: "hsl(90, 75%, 60%)", label: "Light green" }, { color: "hsl(120, 75%, 60%)", label: "Green" }, { color: "hsl(150, 75%, 60%)", label: "Aquamarine" }, { color: "hsl(180, 75%, 60%)", label: "Turquoise" }, { color: "hsl(210, 75%, 60%)", label: "Light blue" }, { color: "hsl(240, 75%, 60%)", label: "Blue" }, { color: "hsl(270, 75%, 60%)", label: "Purple" }], columns: 5 }), i.conversion.for("upcast").elementToAttribute({ view: { name: "span", styles: { color: /[\s\S]+/ } }, model: { key: Pi, value: Aw("color") } }), i.conversion.for("upcast").elementToAttribute({ view: { name: "font", attributes: { color: /^#?\w+$/ } }, model: { key: Pi, value: (e) => e.getAttribute("color") } }), i.conversion.for("downcast").attributeToElement({ model: Pi, view: Tw("color") }), i.commands.add(Pi, new X3(i)), i.model.schema.extend("$text", { allowAttributes: Pi }), i.model.schema.setAttributeProperties(Pi, { isFormatting: !0, copyOnEnter: !0 });
  }
}
class Sw extends A {
  constructor(e, { commandName: t, componentName: n, icon: r, dropdownLabel: s }) {
    super(e);
    m(this, "commandName");
    m(this, "componentName");
    m(this, "icon");
    m(this, "dropdownLabel");
    m(this, "columns");
    this.commandName = t, this.componentName = n, this.icon = r, this.dropdownLabel = s, this.columns = e.config.get(`${this.componentName}.columns`);
  }
  init() {
    const e = this.editor, t = e.locale, n = t.t, r = e.commands.get(this.commandName), s = e.config.get(this.componentName), a = WA(t, GA(s.colors)), l = s.documentColors, c = s.colorPicker !== !1;
    e.ui.componentFactory.add(this.componentName, (d) => {
      const u = ft(d);
      let h = !1;
      const g = function({ dropdownView: p, colors: f, columns: b, removeButtonLabel: k, colorPickerLabel: _, documentColorsLabel: w, documentColorsCount: y, colorPickerViewConfig: x }) {
        const C = p.locale, S = new kg(C, { colors: f, columns: b, removeButtonLabel: k, colorPickerLabel: _, documentColorsLabel: w, documentColorsCount: y, colorPickerViewConfig: x });
        return p.colorSelectorView = S, p.panelView.children.add(S), S;
      }({ dropdownView: u, colors: a.map((p) => ({ label: p.label, color: p.model, options: { hasBorder: p.hasBorder } })), columns: this.columns, removeButtonLabel: n("Remove color"), colorPickerLabel: n("Color picker"), documentColorsLabel: l !== 0 ? n("Document colors") : "", documentColorsCount: l === void 0 ? this.columns : l, colorPickerViewConfig: !!c && (s.colorPicker || {}) });
      return g.bind("selectedColor").to(r, "value"), u.buttonView.set({ label: this.dropdownLabel, icon: this.icon, tooltip: !0 }), u.extendTemplate({ attributes: { class: "ck-color-ui-dropdown" } }), u.bind("isEnabled").to(r), g.on("execute", (p, f) => {
        u.isOpen && e.execute(this.commandName, { value: f.value, batch: this._undoStepBatch }), f.source !== "colorPicker" && e.editing.view.focus(), f.source === "colorPickerSaveButton" && (u.isOpen = !1);
      }), g.on("colorPicker:show", () => {
        this._undoStepBatch = e.model.createBatch();
      }), g.on("colorPicker:cancel", () => {
        this._undoStepBatch.operations.length && (u.isOpen = !1, e.execute("undo", this._undoStepBatch)), e.editing.view.focus();
      }), u.on("change:isOpen", (p, f, b) => {
        h || (h = !0, u.colorSelectorView.appendUI()), b && (l !== 0 && g.updateDocumentColors(e.model, this.componentName), g.updateSelectedColors(), g.showColorGridsFragment());
      }), fl(u, () => u.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find((p) => p.isOn)), u;
    }), e.ui.componentFactory.add(`menuBar:${this.componentName}`, (d) => {
      const u = new Vt(d);
      u.buttonView.set({ label: this.dropdownLabel, icon: this.icon }), u.bind("isEnabled").to(r);
      let h = !1;
      const g = new kg(d, { colors: a.map((p) => ({ label: p.label, color: p.model, options: { hasBorder: p.hasBorder } })), columns: this.columns, removeButtonLabel: n("Remove color"), colorPickerLabel: n("Color picker"), documentColorsLabel: l !== 0 ? n("Document colors") : "", documentColorsCount: l === void 0 ? this.columns : l, colorPickerViewConfig: !1 });
      return g.bind("selectedColor").to(r, "value"), g.delegate("execute").to(u), g.on("execute", (p, f) => {
        e.execute(this.commandName, { value: f.value, batch: this._undoStepBatch }), e.editing.view.focus();
      }), u.on("change:isOpen", (p, f, b) => {
        h || (h = !0, g.appendUI()), b && (l !== 0 && g.updateDocumentColors(e.model, this.componentName), g.updateSelectedColors(), g.showColorGridsFragment());
      }), u.panelView.children.add(g), u;
    });
  }
}
class t4 extends Sw {
  constructor(i) {
    const e = i.locale.t;
    super(i, { commandName: Pi, componentName: Pi, icon: HC, dropdownLabel: e("Font Color") });
  }
  static get pluginName() {
    return "FontColorUI";
  }
}
class i4 extends A {
  static get requires() {
    return [e4, t4];
  }
  static get pluginName() {
    return "FontColor";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class n4 extends vl {
  constructor(i) {
    super(i, Ki);
  }
}
class o4 extends A {
  static get pluginName() {
    return "FontBackgroundColorEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define(Ki, { colors: [{ color: "hsl(0, 0%, 0%)", label: "Black" }, { color: "hsl(0, 0%, 30%)", label: "Dim grey" }, { color: "hsl(0, 0%, 60%)", label: "Grey" }, { color: "hsl(0, 0%, 90%)", label: "Light grey" }, { color: "hsl(0, 0%, 100%)", label: "White", hasBorder: !0 }, { color: "hsl(0, 75%, 60%)", label: "Red" }, { color: "hsl(30, 75%, 60%)", label: "Orange" }, { color: "hsl(60, 75%, 60%)", label: "Yellow" }, { color: "hsl(90, 75%, 60%)", label: "Light green" }, { color: "hsl(120, 75%, 60%)", label: "Green" }, { color: "hsl(150, 75%, 60%)", label: "Aquamarine" }, { color: "hsl(180, 75%, 60%)", label: "Turquoise" }, { color: "hsl(210, 75%, 60%)", label: "Light blue" }, { color: "hsl(240, 75%, 60%)", label: "Blue" }, { color: "hsl(270, 75%, 60%)", label: "Purple" }], columns: 5 }), i.data.addStyleProcessorRules(sC), i.conversion.for("upcast").elementToAttribute({ view: { name: "span", styles: { "background-color": /[\s\S]+/ } }, model: { key: Ki, value: Aw("background-color") } }), i.conversion.for("downcast").attributeToElement({ model: Ki, view: Tw("background-color") }), i.commands.add(Ki, new n4(i)), i.model.schema.extend("$text", { allowAttributes: Ki }), i.model.schema.setAttributeProperties(Ki, { isFormatting: !0, copyOnEnter: !0 });
  }
}
class r4 extends Sw {
  constructor(i) {
    const e = i.locale.t;
    super(i, { commandName: Ki, componentName: Ki, icon: jC, dropdownLabel: e("Font Background Color") });
  }
  static get pluginName() {
    return "FontBackgroundColorUI";
  }
}
class s4 extends A {
  static get requires() {
    return [o4, r4];
  }
  static get pluginName() {
    return "FontBackgroundColor";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class a4 extends G {
  constructor(i) {
    super(i), this._isEnabledBasedOnSelection = !1;
  }
  refresh() {
    const i = this.editor.model, e = Te(i.document.selection.getSelectedBlocks());
    this.value = !!e && e.is("element", "paragraph"), this.isEnabled = !!e && lp(e, i.schema);
  }
  execute(i = {}) {
    const e = this.editor.model, t = e.document, n = i.selection || t.selection;
    e.canEditAt(n) && e.change((r) => {
      const s = n.getSelectedBlocks();
      for (const a of s) !a.is("element", "paragraph") && lp(a, e.schema) && r.rename(a, "paragraph");
    });
  }
}
function lp(o, i) {
  return i.checkChild(o.parent, "paragraph") && !i.isObject(o);
}
class l4 extends G {
  constructor(i) {
    super(i), this._isEnabledBasedOnSelection = !1;
  }
  execute(i) {
    const e = this.editor.model, t = i.attributes;
    let n = i.position;
    return e.canEditAt(n) ? e.change((r) => {
      if (n = this._findPositionToInsertParagraph(n, r), !n) return null;
      const s = r.createElement("paragraph");
      return t && e.schema.setAllowedAttributes(s, t, r), e.insertContent(s, n), r.setSelection(s, "in"), r.createPositionAt(s, 0);
    }) : null;
  }
  _findPositionToInsertParagraph(i, e) {
    const t = this.editor.model;
    if (t.schema.checkChild(i, "paragraph")) return i;
    const n = t.schema.findAllowedParent(i, "paragraph");
    if (!n) return null;
    const r = i.parent, s = t.schema.checkChild(r, "$text");
    return r.isEmpty || s && i.isAtEnd ? t.createPositionAfter(r) : !r.isEmpty && s && i.isAtStart ? t.createPositionBefore(r) : e.split(i, n).position;
  }
}
const Qa = class Qa extends A {
  static get pluginName() {
    return "Paragraph";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.model;
    i.commands.add("paragraph", new a4(i)), i.commands.add("insertParagraph", new l4(i)), e.schema.register("paragraph", { inheritAllFrom: "$block" }), i.conversion.elementToElement({ model: "paragraph", view: "p" }), i.conversion.for("upcast").elementToElement({ model: (t, { writer: n }) => Qa.paragraphLikeElements.has(t.name) ? t.isEmpty ? null : n.createElement("paragraph") : null, view: /.+/, converterPriority: "low" });
  }
};
m(Qa, "paragraphLikeElements", /* @__PURE__ */ new Set(["blockquote", "dd", "div", "dt", "h1", "h2", "h3", "h4", "h5", "h6", "li", "p", "td", "th"]));
let Da = Qa;
class c4 extends G {
  constructor(e, t) {
    super(e);
    m(this, "modelElements");
    this.modelElements = t;
  }
  refresh() {
    const e = Te(this.editor.model.document.selection.getSelectedBlocks());
    this.value = !!e && this.modelElements.includes(e.name) && e.name, this.isEnabled = !!e && this.modelElements.some((t) => cp(e, t, this.editor.model.schema));
  }
  execute(e) {
    const t = this.editor.model, n = t.document, r = e.value;
    t.change((s) => {
      const a = Array.from(n.selection.getSelectedBlocks()).filter((l) => cp(l, r, t.schema));
      for (const l of a) l.is("element", r) || s.rename(l, r);
    });
  }
}
function cp(o, i, e) {
  return e.checkChild(o.parent, i) && !e.isObject(o);
}
const dp = "paragraph";
class d4 extends A {
  static get pluginName() {
    return "HeadingEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define("heading", { options: [{ model: "paragraph", title: "Paragraph", class: "ck-heading_paragraph" }, { model: "heading1", view: "h2", title: "Heading 1", class: "ck-heading_heading1" }, { model: "heading2", view: "h3", title: "Heading 2", class: "ck-heading_heading2" }, { model: "heading3", view: "h4", title: "Heading 3", class: "ck-heading_heading3" }] });
  }
  static get requires() {
    return [Da];
  }
  init() {
    const i = this.editor, e = i.config.get("heading.options"), t = [];
    for (const n of e) n.model !== "paragraph" && (i.model.schema.register(n.model, { inheritAllFrom: "$block" }), i.conversion.elementToElement(n), t.push(n.model));
    this._addDefaultH1Conversion(i), i.commands.add("heading", new c4(i, t));
  }
  afterInit() {
    const i = this.editor, e = i.commands.get("enter"), t = i.config.get("heading.options");
    e && this.listenTo(e, "afterExecute", (n, r) => {
      const s = i.model.document.selection.getFirstPosition().parent;
      t.some((a) => s.is("element", a.model)) && !s.is("element", dp) && s.childCount === 0 && r.writer.rename(s, dp);
    });
  }
  _addDefaultH1Conversion(i) {
    i.conversion.for("upcast").elementToElement({ model: "heading1", view: "h1", converterPriority: Tn.low + 1 });
  }
}
function u4(o) {
  const i = o.t, e = { Paragraph: i("Paragraph"), "Heading 1": i("Heading 1"), "Heading 2": i("Heading 2"), "Heading 3": i("Heading 3"), "Heading 4": i("Heading 4"), "Heading 5": i("Heading 5"), "Heading 6": i("Heading 6") };
  return o.config.get("heading.options").map((t) => {
    const n = e[t.title];
    return n && n != t.title && (t.title = n), t;
  });
}
class h4 extends A {
  static get pluginName() {
    return "HeadingUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t, t = u4(i), n = e("Choose heading"), r = e("Heading");
    i.ui.componentFactory.add("heading", (s) => {
      const a = {}, l = new rt(), c = i.commands.get("heading"), d = i.commands.get("paragraph"), u = [c];
      for (const g of t) {
        const p = { type: "button", model: new cn({ label: g.title, class: g.class, role: "menuitemradio", withText: !0 }) };
        g.model === "paragraph" ? (p.model.bind("isOn").to(d, "value"), p.model.set("commandName", "paragraph"), u.push(d)) : (p.model.bind("isOn").to(c, "value", (f) => f === g.model), p.model.set({ commandName: "heading", commandValue: g.model })), l.add(p), a[g.model] = g.title;
      }
      const h = ft(s);
      return Bn(h, l, { ariaLabel: r, role: "menu" }), h.buttonView.set({ ariaLabel: r, ariaLabelledBy: void 0, isOn: !1, withText: !0, tooltip: r }), h.extendTemplate({ attributes: { class: ["ck-heading-dropdown"] } }), h.bind("isEnabled").toMany(u, "isEnabled", (...g) => g.some((p) => p)), h.buttonView.bind("label").to(c, "value", d, "value", (g, p) => {
        const f = p ? "paragraph" : g;
        return typeof f == "boolean" ? n : a[f] ? a[f] : n;
      }), h.buttonView.bind("ariaLabel").to(c, "value", d, "value", (g, p) => {
        const f = p ? "paragraph" : g;
        return typeof f == "boolean" ? r : a[f] ? `${a[f]}, ${r}` : r;
      }), this.listenTo(h, "execute", (g) => {
        const { commandName: p, commandValue: f } = g.source;
        i.execute(p, f ? { value: f } : void 0), i.editing.view.focus();
      }), h;
    }), i.ui.componentFactory.add("menuBar:heading", (s) => {
      const a = new Vt(s), l = i.commands.get("heading"), c = i.commands.get("paragraph"), d = [l], u = new dn(s);
      a.set({ class: "ck-heading-dropdown" }), u.set({ ariaLabel: e("Heading"), role: "menu" }), a.buttonView.set({ label: e("Heading") }), a.panelView.children.add(u);
      for (const h of t) {
        const g = new zi(s, a), p = new Ie(s);
        g.children.add(p), u.items.add(g), p.set({ isToggleable: !0, label: h.title, role: "menuitemradio", class: h.class }), p.delegate("execute").to(a), p.on("execute", () => {
          const f = h.model === "paragraph" ? "paragraph" : "heading";
          i.execute(f, { value: h.model }), i.editing.view.focus();
        }), h.model === "paragraph" ? (p.bind("isOn").to(c, "value"), d.push(c)) : p.bind("isOn").to(l, "value", (f) => f === h.model);
      }
      return a.bind("isEnabled").toMany(d, "isEnabled", (...h) => h.some((g) => g)), a;
    });
  }
}
class m4 extends A {
  static get requires() {
    return [d4, h4];
  }
  static get pluginName() {
    return "Heading";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const up = /* @__PURE__ */ new Set(["paragraph", "heading1", "heading2", "heading3", "heading4", "heading5", "heading6"]);
class g4 extends A {
  constructor() {
    super(...arguments);
    m(this, "_bodyPlaceholder", /* @__PURE__ */ new Map());
  }
  static get pluginName() {
    return "Title";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return ["Paragraph"];
  }
  init() {
    const e = this.editor, t = e.model;
    t.schema.register("title", { isBlock: !0, allowIn: "$root" }), t.schema.register("title-content", { isBlock: !0, allowIn: "title", allowAttributes: ["alignment"] }), t.schema.extend("$text", { allowIn: "title-content" }), t.schema.addAttributeCheck((n) => {
      if (n.endsWith("title-content $text")) return !1;
    }), e.editing.mapper.on("modelToViewPosition", hp(e.editing.view)), e.data.mapper.on("modelToViewPosition", hp(e.editing.view)), e.conversion.for("downcast").elementToElement({ model: "title-content", view: "h1" }), e.conversion.for("downcast").add((n) => n.on("insert:title", (r, s, a) => {
      a.consumable.consume(s.item, r.name);
    })), e.data.upcastDispatcher.on("element:h1", _c, { priority: "high" }), e.data.upcastDispatcher.on("element:h2", _c, { priority: "high" }), e.data.upcastDispatcher.on("element:h3", _c, { priority: "high" }), t.document.registerPostFixer((n) => this._fixTitleContent(n)), t.document.registerPostFixer((n) => this._fixTitleElement(n)), t.document.registerPostFixer((n) => this._fixBodyElement(n)), t.document.registerPostFixer((n) => this._fixExtraParagraph(n)), this._attachPlaceholders(), this._attachTabPressHandling();
  }
  getTitle(e = {}) {
    const t = e.rootName ? e.rootName : void 0, n = this._getTitleElement(t).getChild(0);
    return this.editor.data.stringify(n, e);
  }
  getBody(e = {}) {
    const t = this.editor, n = t.data, r = t.model, s = e.rootName ? e.rootName : void 0, a = t.model.document.getRoot(s), l = t.editing.view, c = new Cu(l.document), d = r.createRangeIn(a), u = c.createDocumentFragment(), h = r.createPositionAfter(a.getChild(0)), g = r.createRange(h, r.createPositionAt(a, "end")), p = /* @__PURE__ */ new Map();
    for (const f of r.markers) {
      const b = g.getIntersection(f.getRange());
      b && p.set(f.name, b);
    }
    return n.mapper.clearBindings(), n.mapper.bindElements(a, u), n.downcastDispatcher.convert(d, p, c, e), c.remove(c.createRangeOn(u.getChild(0))), t.data.processor.toData(u);
  }
  _getTitleElement(e) {
    const t = this.editor.model.document.getRoot(e);
    for (const n of t.getChildren()) if (mp(n)) return n;
  }
  _fixTitleContent(e) {
    let t = !1;
    for (const n of this.editor.model.document.getRootNames()) {
      const r = this._getTitleElement(n);
      if (!r || r.maxOffset === 1) continue;
      const s = Array.from(r.getChildren());
      s.shift();
      for (const a of s) e.move(e.createRangeOn(a), r, "after"), e.rename(a, "paragraph");
      t = !0;
    }
    return t;
  }
  _fixTitleElement(e) {
    let t = !1;
    const n = this.editor.model;
    for (const r of this.editor.model.document.getRoots()) {
      const s = Array.from(r.getChildren()).filter(mp), a = s[0], l = r.getChild(0);
      if (l.is("element", "title")) s.length > 1 && (gp(s, e, n), t = !0);
      else if (a || up.has(l.name)) up.has(l.name) ? p4(l, e, n) : e.move(e.createRangeOn(a), r, 0), gp(s, e, n), t = !0;
      else {
        const c = e.createElement("title");
        e.insert(c, r), e.insertElement("title-content", c), t = !0;
      }
    }
    return t;
  }
  _fixBodyElement(e) {
    let t = !1;
    for (const n of this.editor.model.document.getRootNames()) {
      const r = this.editor.model.document.getRoot(n);
      if (r.childCount < 2) {
        const s = e.createElement("paragraph");
        e.insert(s, r, 1), this._bodyPlaceholder.set(n, s), t = !0;
      }
    }
    return t;
  }
  _fixExtraParagraph(e) {
    let t = !1;
    for (const n of this.editor.model.document.getRootNames()) {
      const r = this.editor.model.document.getRoot(n), s = this._bodyPlaceholder.get(n);
      b4(s, r) && (this._bodyPlaceholder.delete(n), e.remove(s), t = !0);
    }
    return t;
  }
  _attachPlaceholders() {
    const e = this.editor, t = e.t, n = e.editing.view, r = e.sourceElement, s = e.config.get("title.placeholder") || t("Type your title"), a = e.config.get("placeholder") || r && r.tagName.toLowerCase() === "textarea" && r.getAttribute("placeholder") || t("Type or paste your content here.");
    e.editing.downcastDispatcher.on("insert:title-content", (c, d, u) => {
      const h = u.mapper.toViewElement(d.item);
      h.placeholder = s, wu({ view: n, element: h, keepOnFocus: !0 });
    });
    const l = /* @__PURE__ */ new Map();
    n.document.registerPostFixer((c) => {
      let d = !1;
      for (const u of n.document.roots) {
        if (u.isEmpty) continue;
        const h = u.getChild(1), g = l.get(u.rootName);
        h !== g && (g && (Jc(c, g), c.removeAttribute("data-placeholder", g)), c.setAttribute("data-placeholder", a, h), l.set(u.rootName, h), d = !0), d = Bk(h, !0) && u.childCount === 2 && h.name === "p" ? !!zk(c, h) || d : !!Jc(c, h) || d;
      }
      return d;
    });
  }
  _attachTabPressHandling() {
    const e = this.editor, t = e.model;
    e.keystrokes.set("TAB", (n, r) => {
      t.change((s) => {
        const a = t.document.selection, l = Array.from(a.getSelectedBlocks());
        if (l.length === 1 && l[0].is("element", "title-content")) {
          const c = a.getFirstPosition().root.getChild(1);
          s.setSelection(c, 0), r();
        }
      });
    }), e.keystrokes.set("SHIFT + TAB", (n, r) => {
      t.change((s) => {
        const a = t.document.selection;
        if (!a.isCollapsed) return;
        const l = Te(a.getSelectedBlocks()), c = a.getFirstPosition(), d = e.model.document.getRoot(c.root.rootName), u = d.getChild(0);
        l === d.getChild(1) && c.isAtStart && (s.setSelection(u.getChild(0), 0), r());
      });
    });
  }
}
function _c(o, i, e) {
  const t = i.modelCursor, n = i.viewItem;
  if (!t.isAtStart || !t.parent.is("element", "$root") || !e.consumable.consume(n, { name: !0 })) return;
  const r = e.writer, s = r.createElement("title"), a = r.createElement("title-content");
  r.append(a, s), r.insert(s, t), e.convertChildren(n, a), e.updateConversionResult(s, i);
}
function hp(o) {
  return (i, e) => {
    const t = e.modelPosition.parent;
    if (!t.is("element", "title")) return;
    const n = t.parent, r = e.mapper.toViewElement(n);
    e.viewPosition = o.createPositionAt(r, 0), i.stop();
  };
}
function mp(o) {
  return o.is("element", "title");
}
function p4(o, i, e) {
  const t = i.createElement("title");
  i.insert(t, o, "before"), i.insert(o, t, 0), i.rename(o, "title-content"), e.schema.removeDisallowedAttributes([o], i);
}
function gp(o, i, e) {
  let t = !1;
  for (const n of o) n.index !== 0 && (f4(n, i, e), t = !0);
  return t;
}
function f4(o, i, e) {
  const t = o.getChild(0);
  t.isEmpty ? i.remove(o) : (i.move(i.createRangeOn(t), o, "before"), i.rename(t, "paragraph"), i.remove(o), e.schema.removeDisallowedAttributes([t], i));
}
function b4(o, i) {
  return !(!o || !o.is("element", "paragraph") || o.childCount) && !(i.childCount <= 2 || i.getChild(i.childCount - 1) !== o);
}
class k4 extends G {
  refresh() {
    const i = this.editor.model, e = i.document;
    this.value = e.selection.getAttribute("highlight"), this.isEnabled = i.schema.checkAttributeInSelection(e.selection, "highlight");
  }
  execute(i = {}) {
    const e = this.editor.model, t = e.document.selection, n = i.value;
    e.change((r) => {
      if (t.isCollapsed) {
        const s = t.getFirstPosition();
        if (t.hasAttribute("highlight")) {
          const a = (u) => u.item.hasAttribute("highlight") && u.item.getAttribute("highlight") === this.value, l = s.getLastMatchingPosition(a, { direction: "backward" }), c = s.getLastMatchingPosition(a), d = r.createRange(l, c);
          n && this.value !== n ? (s.isEqual(c) || r.setAttribute("highlight", n, d), r.setSelectionAttribute("highlight", n)) : (s.isEqual(c) || r.removeAttribute("highlight", d), r.removeSelectionAttribute("highlight"));
        } else n && r.setSelectionAttribute("highlight", n);
      } else {
        const s = e.schema.getValidRanges(t.getRanges(), "highlight");
        for (const a of s) n ? r.setAttribute("highlight", n, a) : r.removeAttribute("highlight", a);
      }
    });
  }
}
class _4 extends A {
  static get pluginName() {
    return "HighlightEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define("highlight", { options: [{ model: "yellowMarker", class: "marker-yellow", title: "Yellow marker", color: "var(--ck-highlight-marker-yellow)", type: "marker" }, { model: "greenMarker", class: "marker-green", title: "Green marker", color: "var(--ck-highlight-marker-green)", type: "marker" }, { model: "pinkMarker", class: "marker-pink", title: "Pink marker", color: "var(--ck-highlight-marker-pink)", type: "marker" }, { model: "blueMarker", class: "marker-blue", title: "Blue marker", color: "var(--ck-highlight-marker-blue)", type: "marker" }, { model: "redPen", class: "pen-red", title: "Red pen", color: "var(--ck-highlight-pen-red)", type: "pen" }, { model: "greenPen", class: "pen-green", title: "Green pen", color: "var(--ck-highlight-pen-green)", type: "pen" }] });
  }
  init() {
    const i = this.editor;
    i.model.schema.extend("$text", { allowAttributes: "highlight" });
    const e = i.config.get("highlight.options");
    i.conversion.attributeToElement(function(t) {
      const n = { model: { key: "highlight", values: [] }, view: {} };
      for (const r of t) n.model.values.push(r.model), n.view[r.model] = { name: "mark", classes: r.class };
      return n;
    }(e)), i.commands.add("highlight", new k4(i));
  }
}
class w4 extends A {
  get localizedOptionTitles() {
    const i = this.editor.t;
    return { "Yellow marker": i("Yellow marker"), "Green marker": i("Green marker"), "Pink marker": i("Pink marker"), "Blue marker": i("Blue marker"), "Red pen": i("Red pen"), "Green pen": i("Green pen") };
  }
  static get pluginName() {
    return "HighlightUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor.config.get("highlight.options");
    for (const e of i) this._addHighlighterButton(e);
    this._addRemoveHighlightButton(), this._addDropdown(i), this._addMenuBarButton(i);
  }
  _addRemoveHighlightButton() {
    const i = this.editor.t, e = this.editor.commands.get("highlight");
    this._addButton("removeHighlight", i("Remove highlight"), dd, null, (t) => {
      t.bind("isEnabled").to(e, "isEnabled");
    });
  }
  _addHighlighterButton(i) {
    const e = this.editor.commands.get("highlight");
    this._addButton("highlight:" + i.model, i.title, Gs(i.type), i.model, function(t) {
      t.bind("isEnabled").to(e, "isEnabled"), t.bind("isOn").to(e, "value", (n) => n === i.model), t.iconView.fillColor = i.color, t.isToggleable = !0;
    });
  }
  _addButton(i, e, t, n, r) {
    const s = this.editor;
    s.ui.componentFactory.add(i, (a) => {
      const l = new j(a), c = this.localizedOptionTitles[e] ? this.localizedOptionTitles[e] : e;
      return l.set({ label: c, icon: t, tooltip: !0 }), l.on("execute", () => {
        s.execute("highlight", { value: n }), s.editing.view.focus();
      }), r(l), l;
    });
  }
  _addDropdown(i) {
    const e = this.editor, t = e.t, n = e.ui.componentFactory, r = i[0], s = i.reduce((a, l) => (a[l.model] = l, a), {});
    n.add("highlight", (a) => {
      const l = e.commands.get("highlight"), c = ft(a, po), d = c.buttonView;
      d.set({ label: t("Highlight"), tooltip: !0, lastExecuted: r.model, commandValue: r.model, isToggleable: !0 }), d.bind("icon").to(l, "value", (h) => Gs(u(h, "type"))), d.bind("color").to(l, "value", (h) => u(h, "color")), d.bind("commandValue").to(l, "value", (h) => u(h, "model")), d.bind("isOn").to(l, "value", (h) => !!h), d.delegate("execute").to(c);
      function u(h, g) {
        const p = h && h !== d.lastExecuted ? h : d.lastExecuted;
        return s[p][g];
      }
      return c.bind("isEnabled").to(l, "isEnabled"), Es(c, () => {
        const h = i.map((g) => {
          const p = n.create("highlight:" + g.model);
          return this.listenTo(p, "execute", () => {
            c.buttonView.set({ lastExecuted: g.model });
          }), p;
        });
        return h.push(new zu()), h.push(n.create("removeHighlight")), h;
      }, { enableActiveItemFocusOnDropdownOpen: !0, ariaLabel: t("Text highlight toolbar") }), function(h) {
        h.buttonView.actionView.iconView.bind("fillColor").to(h.buttonView, "color");
      }(c), d.on("execute", () => {
        e.execute("highlight", { value: d.commandValue });
      }), this.listenTo(c, "execute", () => {
        e.editing.view.focus();
      }), c;
    });
  }
  _addMenuBarButton(i) {
    const e = this.editor, t = e.t, n = e.commands.get("highlight");
    e.ui.componentFactory.add("menuBar:highlight", (r) => {
      const s = new Vt(r);
      s.buttonView.set({ label: t("Highlight"), icon: Gs("marker") }), s.bind("isEnabled").to(n), s.buttonView.iconView.fillColor = "transparent";
      const a = new dn(r);
      for (const d of i) {
        const u = new zi(r, s), h = new Ie(r);
        h.set({ label: d.title, icon: Gs(d.type), role: "menuitemradio", isToggleable: !0 }), h.iconView.fillColor = d.color, h.delegate("execute").to(s), h.bind("isOn").to(n, "value", (g) => g === d.model), h.on("execute", () => {
          e.execute("highlight", { value: d.model }), e.editing.view.focus();
        }), u.children.add(h), a.items.add(u);
      }
      a.items.add(new pl(r));
      const l = new zi(r, s), c = new Ie(r);
      return c.set({ label: t("Remove highlight"), icon: dd }), c.delegate("execute").to(s), c.on("execute", () => {
        e.execute("highlight", { value: null }), e.editing.view.focus();
      }), l.children.add(c), a.items.add(l), s.panelView.children.add(a), s;
    });
  }
}
function Gs(o) {
  return o === "marker" ? rA : fA;
}
class v4 extends A {
  static get requires() {
    return [_4, w4];
  }
  static get pluginName() {
    return "Highlight";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class y4 extends G {
  refresh() {
    const i = this.editor.model, e = i.schema, t = i.document.selection;
    this.isEnabled = function(n, r, s) {
      const a = function(l, c) {
        const d = Fu(l, c), u = d.start.parent;
        return u.isEmpty && !u.is("element", "$root") ? u.parent : u;
      }(n, s);
      return r.checkChild(a, "horizontalLine");
    }(t, e, i);
  }
  execute() {
    const i = this.editor.model;
    i.change((e) => {
      const t = e.createElement("horizontalLine");
      i.insertObject(t, null, null, { setSelection: "after" });
    });
  }
}
class x4 extends A {
  static get pluginName() {
    return "HorizontalLineEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.model.schema, t = i.t, n = i.conversion;
    e.register("horizontalLine", { inheritAllFrom: "$blockObject" }), n.for("dataDowncast").elementToElement({ model: "horizontalLine", view: (r, { writer: s }) => s.createEmptyElement("hr") }), n.for("editingDowncast").elementToStructure({ model: "horizontalLine", view: (r, { writer: s }) => {
      const a = t("Horizontal line"), l = s.createContainerElement("div", null, s.createEmptyElement("hr"));
      return s.addClass("ck-horizontal-line", l), s.setCustomProperty("hr", !0, l), function(c, d, u) {
        return d.setCustomProperty("horizontalLine", !0, c), wl(c, d, { label: u });
      }(l, s, a);
    } }), n.for("upcast").elementToElement({ view: "hr", model: "horizontalLine" }), i.commands.add("horizontalLine", new y4(i));
  }
}
class C4 extends A {
  static get pluginName() {
    return "HorizontalLineUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.ui.componentFactory.add("horizontalLine", () => {
      const e = this._createButton(j);
      return e.set({ tooltip: !0 }), e;
    }), i.ui.componentFactory.add("menuBar:horizontalLine", () => this._createButton(Ie));
  }
  _createButton(i) {
    const e = this.editor, t = e.locale, n = e.commands.get("horizontalLine"), r = new i(e.locale), s = t.t;
    return r.set({ label: s("Horizontal line"), icon: $C }), r.bind("isEnabled").to(n, "isEnabled"), this.listenTo(r, "execute", () => {
      e.execute("horizontalLine"), e.editing.view.focus();
    }), r;
  }
}
class A4 extends A {
  static get requires() {
    return [x4, C4, dr];
  }
  static get pluginName() {
    return "HorizontalLine";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function pp(o) {
  return o.createContainerElement("figure", { class: "image" }, [o.createEmptyElement("img"), o.createSlot("children")]);
}
function Iw(o, i) {
  const e = o.plugins.get("ImageUtils"), t = o.plugins.has("ImageInlineEditing") && o.plugins.has("ImageBlockEditing");
  return (r) => e.isInlineImageView(r) ? t && (r.getStyle("display") == "block" || r.findAncestor(e.isBlockImageView) ? "imageBlock" : "imageInline") !== i ? null : n(r) : null;
  function n(r) {
    const s = { name: !0 };
    return r.hasAttribute("src") && (s.attributes = ["src"]), s;
  }
}
function qu(o, i) {
  const e = Te(i.getSelectedBlocks());
  return !e || o.isObject(e) || e.isEmpty && e.name != "listItem" ? "imageBlock" : "imageInline";
}
function Fa(o) {
  return o && o.endsWith("px") ? parseInt(o) : null;
}
function ja(o) {
  const i = Fa(o.getStyle("width")), e = Fa(o.getStyle("height"));
  return !(!i || !e);
}
const T4 = /^(image|image-inline)$/;
class wt extends A {
  constructor() {
    super(...arguments);
    m(this, "_domEmitter", new (Nt())());
  }
  static get pluginName() {
    return "ImageUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  isImage(e) {
    return this.isInlineImage(e) || this.isBlockImage(e);
  }
  isInlineImageView(e) {
    return !!e && e.is("element", "img");
  }
  isBlockImageView(e) {
    return !!e && e.is("element", "figure") && e.hasClass("image");
  }
  insertImage(e = {}, t = null, n = null, r = {}) {
    const s = this.editor, a = s.model, l = a.document.selection, c = fp(s, t || l, n);
    e = { ...Object.fromEntries(l.getAttributes()), ...e };
    for (const d in e) a.schema.checkAttribute(c, d) || delete e[d];
    return a.change((d) => {
      const { setImageSizes: u = !0 } = r, h = d.createElement(c, e);
      return a.insertObject(h, t, null, { setSelection: "on", findOptimalPosition: t || c == "imageInline" ? void 0 : "auto" }), h.parent ? (u && this.setImageNaturalSizeAttributes(h), h) : null;
    });
  }
  setImageNaturalSizeAttributes(e) {
    const t = e.getAttribute("src");
    t && (e.getAttribute("width") || e.getAttribute("height") || this.editor.model.change((n) => {
      const r = new z.window.Image();
      this._domEmitter.listenTo(r, "load", () => {
        e.getAttribute("width") || e.getAttribute("height") || this.editor.model.enqueueChange(n.batch, (s) => {
          s.setAttribute("width", r.naturalWidth, e), s.setAttribute("height", r.naturalHeight, e);
        }), this._domEmitter.stopListening(r, "load");
      }), r.src = t;
    }));
  }
  getClosestSelectedImageWidget(e) {
    const t = e.getFirstPosition();
    if (!t) return null;
    const n = e.getSelectedElement();
    if (n && this.isImageWidget(n)) return n;
    let r = t.parent;
    for (; r; ) {
      if (r.is("element") && this.isImageWidget(r)) return r;
      r = r.parent;
    }
    return null;
  }
  getClosestSelectedImageElement(e) {
    const t = e.getSelectedElement();
    return this.isImage(t) ? t : e.getFirstPosition().findAncestor("imageBlock");
  }
  getImageWidgetFromImageView(e) {
    return e.findAncestor({ classes: T4 });
  }
  isImageAllowed() {
    const e = this.editor.model.document.selection;
    return function(t, n) {
      if (fp(t, n, null) == "imageBlock") {
        const s = function(a, l) {
          const c = Fu(a, l), d = c.start.parent;
          return d.isEmpty && !d.is("element", "$root") ? d.parent : d;
        }(n, t.model);
        if (t.model.schema.checkChild(s, "imageBlock")) return !0;
      } else if (t.model.schema.checkChild(n.focus, "imageInline")) return !0;
      return !1;
    }(this.editor, e) && function(t) {
      return [...t.focus.getAncestors()].every((n) => !n.is("element", "imageBlock"));
    }(e);
  }
  toImageWidget(e, t, n) {
    return t.setCustomProperty("image", !0, e), wl(e, t, { label: () => {
      const r = this.findViewImgElement(e).getAttribute("alt");
      return r ? `${r} ${n}` : n;
    } });
  }
  isImageWidget(e) {
    return !!e.getCustomProperty("image") && et(e);
  }
  isBlockImage(e) {
    return !!e && e.is("element", "imageBlock");
  }
  isInlineImage(e) {
    return !!e && e.is("element", "imageInline");
  }
  findViewImgElement(e) {
    if (this.isInlineImageView(e)) return e;
    const t = this.editor.editing.view;
    for (const { item: n } of t.createRangeIn(e)) if (this.isInlineImageView(n)) return n;
  }
  destroy() {
    return this._domEmitter.stopListening(), super.destroy();
  }
}
function fp(o, i, e) {
  const t = o.model.schema, n = o.config.get("image.insert.type");
  return o.plugins.has("ImageBlockEditing") ? o.plugins.has("ImageInlineEditing") ? e || (n === "inline" ? "imageInline" : n !== "auto" ? "imageBlock" : i.is("selection") ? qu(t, i) : t.checkChild(i, "imageInline") ? "imageInline" : "imageBlock") : "imageBlock" : "imageInline";
}
const E4 = new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source + /\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source + /(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source + /(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));
class S4 extends A {
  constructor(e) {
    super(e);
    m(this, "_timeoutId");
    m(this, "_positionToInsert");
    this._timeoutId = null, this._positionToInsert = null;
  }
  static get requires() {
    return [ju, wt, $u, Di];
  }
  static get pluginName() {
    return "AutoImage";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model.document, n = e.plugins.get("ClipboardPipeline");
    this.listenTo(n, "inputTransformation", () => {
      const r = t.selection.getFirstRange(), s = Je.fromPosition(r.start);
      s.stickiness = "toPrevious";
      const a = Je.fromPosition(r.end);
      a.stickiness = "toNext", t.once("change:data", () => {
        this._embedImageBetweenPositions(s, a), s.detach(), a.detach();
      }, { priority: "high" });
    }), e.commands.get("undo").on("execute", () => {
      this._timeoutId && (z.window.clearTimeout(this._timeoutId), this._positionToInsert.detach(), this._timeoutId = null, this._positionToInsert = null);
    }, { priority: "high" });
  }
  _embedImageBetweenPositions(e, t) {
    const n = this.editor, r = new Mt(e, t), s = r.getWalker({ ignoreElementEnd: !0 }), a = Object.fromEntries(n.model.document.selection.getAttributes()), l = this.editor.plugins.get("ImageUtils");
    let c = "";
    for (const d of s) d.item.is("$textProxy") && (c += d.item.data);
    c = c.trim(), c.match(E4) ? (this._positionToInsert = Je.fromPosition(e), this._timeoutId = setTimeout(() => {
      if (!n.commands.get("insertImage").isEnabled) return void r.detach();
      n.model.change((d) => {
        let u;
        this._timeoutId = null, d.remove(r), r.detach(), this._positionToInsert.root.rootName !== "$graveyard" && (u = this._positionToInsert.toPosition()), l.insertImage({ ...a, src: c }, u), this._positionToInsert.detach(), this._positionToInsert = null;
      }), n.plugins.get("Delete").requestUndoOnBackspace();
    }, 100)) : r.detach();
  }
}
class I4 extends G {
  refresh() {
    const i = this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);
    this.isEnabled = !!i, this.isEnabled && i.hasAttribute("alt") ? this.value = i.getAttribute("alt") : this.value = !1;
  }
  execute(i) {
    const e = this.editor, t = e.plugins.get("ImageUtils"), n = e.model, r = t.getClosestSelectedImageElement(n.document.selection);
    n.change((s) => {
      s.setAttribute("alt", i.newValue, r);
    });
  }
}
class P4 extends A {
  static get requires() {
    return [wt];
  }
  static get pluginName() {
    return "ImageTextAlternativeEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this.editor.commands.add("imageTextAlternative", new I4(this.editor));
  }
}
class M4 extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "labeledInput");
    m(this, "backButtonView");
    m(this, "saveButtonView");
    m(this, "children");
    m(this, "_focusables");
    m(this, "_focusCycler");
    this.focusTracker = new fe(), this.keystrokes = new Le(), this.backButtonView = this._createBackButton(), this.saveButtonView = this._createSaveButton(), this.labeledInput = this._createLabeledInputView(), this.children = this.createCollection([this._createHeaderView()]), this.children.add(new Va(e, { children: [this.labeledInput, this.saveButtonView], class: ["ck-form__row_with-submit", "ck-form__row_large-top-padding"] })), this._focusables = new It(), this.keystrokes.set("Esc", (t, n) => {
      this.fire("cancel"), n();
    }), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-form", "ck-text-alternative-form", "ck-responsive-form"], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), lr({ view: this }), [this.backButtonView, this.labeledInput, this.saveButtonView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "cancel"), t;
  }
  _createSaveButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ label: e("Save"), withText: !0, type: "submit", class: "ck-button-action ck-button-bold" }), t;
  }
  _createHeaderView() {
    const e = this.locale.t, t = new mo(this.locale, { label: e("Text Alternative") });
    return t.children.add(this.backButtonView, 0), t;
  }
  _createLabeledInputView() {
    const e = this.locale.t, t = new Ri(this.locale, Ln);
    return t.label = e("Text alternative"), t.class = "ck-labeled-field-view_full-width", t;
  }
}
function Ad(o) {
  const i = o.editing.view, e = lt.defaultPositions, t = o.plugins.get("ImageUtils");
  return { target: i.domConverter.mapViewToDom(t.getClosestSelectedImageWidget(i.document.selection)), positions: [e.northArrowSouth, e.northArrowSouthWest, e.northArrowSouthEast, e.southArrowNorth, e.southArrowNorthWest, e.southArrowNorthEast, e.viewportStickyNorth] };
}
class V4 extends A {
  constructor() {
    super(...arguments);
    m(this, "_balloon");
    m(this, "_form");
  }
  static get requires() {
    return [Bi];
  }
  static get pluginName() {
    return "ImageTextAlternativeUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this._createButton();
  }
  destroy() {
    super.destroy(), this._form && this._form.destroy();
  }
  _createButton() {
    const e = this.editor, t = e.t;
    e.ui.componentFactory.add("imageTextAlternative", (n) => {
      const r = e.commands.get("imageTextAlternative"), s = new j(n);
      return s.set({ label: t("Change image text alternative"), icon: VA, tooltip: !0 }), s.bind("isEnabled").to(r, "isEnabled"), s.bind("isOn").to(r, "value", (a) => !!a), this.listenTo(s, "execute", () => {
        this._showForm();
      }), s;
    });
  }
  _createForm() {
    const e = this.editor, t = e.editing.view.document, n = e.plugins.get("ImageUtils");
    this._balloon = this.editor.plugins.get("ContextualBalloon"), this._form = new (ls(M4))(e.locale), this._form.render(), this.listenTo(this._form, "submit", () => {
      e.execute("imageTextAlternative", { newValue: this._form.labeledInput.fieldView.element.value }), this._hideForm(!0);
    }), this.listenTo(this._form, "cancel", () => {
      this._hideForm(!0);
    }), this.listenTo(e.ui, "update", () => {
      n.getClosestSelectedImageWidget(t.selection) ? this._isVisible && function(r) {
        const s = r.plugins.get("ContextualBalloon");
        if (r.plugins.get("ImageUtils").getClosestSelectedImageWidget(r.editing.view.document.selection)) {
          const a = Ad(r);
          s.updatePosition(a);
        }
      }(e) : this._hideForm(!0);
    }), zn({ emitter: this._form, activator: () => this._isVisible, contextElements: () => [this._balloon.view.element], callback: () => this._hideForm() });
  }
  _showForm() {
    if (this._isVisible) return;
    this._form || this._createForm();
    const e = this.editor, t = e.commands.get("imageTextAlternative"), n = this._form.labeledInput;
    this._form.disableCssTransitions(), this._isInBalloon || this._balloon.add({ view: this._form, position: Ad(e) }), n.fieldView.value = n.fieldView.element.value = t.value || "", this._form.labeledInput.fieldView.select(), this._form.enableCssTransitions();
  }
  _hideForm(e = !1) {
    this._isInBalloon && (this._form.focusTracker.isFocused && this._form.saveButtonView.focus(), this._balloon.remove(this._form), e && this.editor.editing.view.focus());
  }
  get _isVisible() {
    return !!this._balloon && this._balloon.visibleView === this._form;
  }
  get _isInBalloon() {
    return !!this._balloon && this._balloon.hasView(this._form);
  }
}
class Wu extends A {
  static get requires() {
    return [P4, V4];
  }
  static get pluginName() {
    return "ImageTextAlternative";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function Pw(o, i) {
  const e = (t, n, r) => {
    if (!r.consumable.consume(n.item, t.name)) return;
    const s = r.writer, a = r.mapper.toViewElement(n.item), l = o.findViewImgElement(a);
    n.attributeNewValue === null ? (s.removeAttribute("srcset", l), s.removeAttribute("sizes", l)) : n.attributeNewValue && (s.setAttribute("srcset", n.attributeNewValue, l), s.setAttribute("sizes", "100vw", l));
  };
  return (t) => {
    t.on(`attribute:srcset:${i}`, e);
  };
}
function Ha(o, i, e) {
  const t = (n, r, s) => {
    if (!s.consumable.consume(r.item, n.name)) return;
    const a = s.writer, l = s.mapper.toViewElement(r.item), c = o.findViewImgElement(l);
    a.setAttribute(r.attributeKey, r.attributeNewValue || "", c);
  };
  return (n) => {
    n.on(`attribute:${e}:${i}`, t);
  };
}
class Gu extends Ai {
  observe(i) {
    this.listenTo(i, "load", (e, t) => {
      const n = t.target;
      this.checkShouldIgnoreEventFromTarget(n) || n.tagName == "IMG" && this._fireEvents(t);
    }, { useCapture: !0 });
  }
  stopObserving(i) {
    this.stopListening(i);
  }
  _fireEvents(i) {
    this.isEnabled && (this.document.fire("layoutChanged"), this.document.fire("imageLoaded", i));
  }
}
class L4 extends G {
  constructor(i) {
    super(i);
    const e = i.config.get("image.insert.type");
    i.plugins.has("ImageBlockEditing") || e === "block" && ce("image-block-plugin-required"), i.plugins.has("ImageInlineEditing") || e === "inline" && ce("image-inline-plugin-required");
  }
  refresh() {
    const i = this.editor.plugins.get("ImageUtils");
    this.isEnabled = i.isImageAllowed();
  }
  execute(i) {
    const e = De(i.source), t = this.editor.model.document.selection, n = this.editor.plugins.get("ImageUtils"), r = Object.fromEntries(t.getAttributes());
    e.forEach((s, a) => {
      const l = t.getSelectedElement();
      if (typeof s == "string" && (s = { src: s }), a && l && n.isImage(l)) {
        const c = this.editor.model.createPositionAfter(l);
        n.insertImage({ ...s, ...r }, c, i.imageType);
      } else i.breakBlock ? n.insertImage({ ...s, ...r }, t.getFirstPosition(), i.imageType) : n.insertImage({ ...s, ...r }, null, i.imageType);
    });
  }
}
class O4 extends G {
  constructor(i) {
    super(i), this.decorate("cleanupImage");
  }
  refresh() {
    const i = this.editor.plugins.get("ImageUtils"), e = this.editor.model.document.selection.getSelectedElement();
    this.isEnabled = i.isImage(e), this.value = this.isEnabled ? e.getAttribute("src") : null;
  }
  execute(i) {
    const e = this.editor.model.document.selection.getSelectedElement(), t = this.editor.plugins.get("ImageUtils");
    this.editor.model.change((n) => {
      n.setAttribute("src", i.source, e), this.cleanupImage(n, e), t.setImageNaturalSizeAttributes(e);
    });
  }
  cleanupImage(i, e) {
    i.removeAttribute("srcset", e), i.removeAttribute("sizes", e), i.removeAttribute("sources", e), i.removeAttribute("width", e), i.removeAttribute("height", e), i.removeAttribute("alt", e);
  }
}
class Mw extends A {
  static get requires() {
    return [wt];
  }
  static get pluginName() {
    return "ImageEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.conversion;
    i.editing.view.addObserver(Gu), e.for("upcast").attributeToAttribute({ view: { name: "img", key: "alt" }, model: "alt" }).attributeToAttribute({ view: { name: "img", key: "srcset" }, model: "srcset" });
    const t = new L4(i), n = new O4(i);
    i.commands.add("insertImage", t), i.commands.add("replaceImageSource", n), i.commands.add("imageInsert", t);
  }
}
class Vw extends A {
  static get requires() {
    return [wt];
  }
  static get pluginName() {
    return "ImageSizeAttributes";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    this._registerSchema(), this._registerConverters("imageBlock"), this._registerConverters("imageInline");
  }
  _registerSchema() {
    this.editor.plugins.has("ImageBlockEditing") && this.editor.model.schema.extend("imageBlock", { allowAttributes: ["width", "height"] }), this.editor.plugins.has("ImageInlineEditing") && this.editor.model.schema.extend("imageInline", { allowAttributes: ["width", "height"] });
  }
  _registerConverters(i) {
    const e = this.editor, t = e.plugins.get("ImageUtils"), n = i === "imageBlock" ? "figure" : "img";
    function r(s, a, l, c, d = !1) {
      s.on(`attribute:${a}:${i}`, (u, h, g) => {
        if (!g.consumable.consume(h.item, u.name)) return;
        const p = g.writer, f = g.mapper.toViewElement(h.item), b = t.findViewImgElement(f);
        h.attributeNewValue !== null ? p.setAttribute(l, h.attributeNewValue, b) : p.removeAttribute(l, b);
        const k = h.item.getAttribute("width"), _ = h.item.getAttribute("height"), w = k && _;
        if (w && d && p.setAttribute("loading", "lazy", b), h.item.hasAttribute("sources")) return;
        const y = h.item.hasAttribute("resizedWidth");
        (i !== "imageInline" || y || c) && w && p.setStyle("aspect-ratio", `${k}/${_}`, b);
      });
    }
    e.conversion.for("upcast").attributeToAttribute({ view: { name: n, styles: { width: /.+/ } }, model: { key: "width", value: (s) => ja(s) ? Fa(s.getStyle("width")) : null } }).attributeToAttribute({ view: { name: n, key: "width" }, model: "width" }).attributeToAttribute({ view: { name: n, styles: { height: /.+/ } }, model: { key: "height", value: (s) => ja(s) ? Fa(s.getStyle("height")) : null } }).attributeToAttribute({ view: { name: n, key: "height" }, model: "height" }), e.conversion.for("editingDowncast").add((s) => {
      r(s, "width", "width", !0, !0), r(s, "height", "height", !0, !0);
    }), e.conversion.for("dataDowncast").add((s) => {
      r(s, "width", "width", !1), r(s, "height", "height", !1);
    });
  }
}
class Lw extends G {
  constructor(e, t) {
    super(e);
    m(this, "_modelElementName");
    this._modelElementName = t;
  }
  refresh() {
    const e = this.editor.plugins.get("ImageUtils"), t = e.getClosestSelectedImageElement(this.editor.model.document.selection);
    this._modelElementName === "imageBlock" ? this.isEnabled = e.isInlineImage(t) : this.isEnabled = e.isBlockImage(t);
  }
  execute(e = {}) {
    const t = this.editor, n = this.editor.model, r = t.plugins.get("ImageUtils"), s = r.getClosestSelectedImageElement(n.document.selection), a = Object.fromEntries(s.getAttributes());
    return a.src || a.uploadId ? n.change((l) => {
      const { setImageSizes: c = !0 } = e, d = Array.from(n.markers).filter((g) => g.getRange().containsItem(s)), u = r.insertImage(a, n.createSelection(s, "on"), this._modelElementName, { setImageSizes: c });
      if (!u) return null;
      const h = l.createRangeOn(u);
      for (const g of d) {
        const p = g.getRange(), f = p.root.rootName != "$graveyard" ? p.getJoined(h, !0) : h;
        l.updateMarker(g, { range: f });
      }
      return { oldElement: s, newElement: u };
    }) : null;
  }
}
class Ow extends A {
  static get requires() {
    return [wt];
  }
  static get pluginName() {
    return "ImagePlaceholder";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    this._setupSchema(), this._setupConversion(), this._setupLoadListener();
  }
  _setupSchema() {
    const i = this.editor.model.schema;
    i.isRegistered("imageBlock") && i.extend("imageBlock", { allowAttributes: ["placeholder"] }), i.isRegistered("imageInline") && i.extend("imageInline", { allowAttributes: ["placeholder"] });
  }
  _setupConversion() {
    const i = this.editor, e = i.conversion, t = i.plugins.get("ImageUtils");
    e.for("editingDowncast").add((n) => {
      n.on("attribute:placeholder", (r, s, a) => {
        if (!a.consumable.test(s.item, r.name) || !s.item.is("element", "imageBlock") && !s.item.is("element", "imageInline")) return;
        a.consumable.consume(s.item, r.name);
        const l = a.writer, c = a.mapper.toViewElement(s.item), d = t.findViewImgElement(c);
        s.attributeNewValue ? (l.addClass("image_placeholder", d), l.setStyle("background-image", `url(${s.attributeNewValue})`, d), l.setCustomProperty("editingPipeline:doNotReuseOnce", !0, d)) : (l.removeClass("image_placeholder", d), l.removeStyle("background-image", d));
      });
    });
  }
  _setupLoadListener() {
    const i = this.editor, e = i.model, t = i.editing, n = t.view, r = i.plugins.get("ImageUtils");
    n.addObserver(Gu), this.listenTo(n.document, "imageLoaded", (s, a) => {
      const l = n.domConverter.mapDomToView(a.target);
      if (!l) return;
      const c = r.getImageWidgetFromImageView(l);
      if (!c) return;
      const d = t.mapper.toModelElement(c);
      d && d.hasAttribute("placeholder") && e.enqueueChange({ isUndoable: !1 }, (u) => {
        u.removeAttribute("placeholder", d);
      });
    });
  }
}
class Nw extends A {
  static get requires() {
    return [Mw, Vw, wt, Ow, Lt];
  }
  static get pluginName() {
    return "ImageBlockEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.model.schema.register("imageBlock", { inheritAllFrom: "$blockObject", allowAttributes: ["alt", "src", "srcset"] }), this._setupConversion(), i.plugins.has("ImageInlineEditing") && (i.commands.add("imageTypeBlock", new Lw(this.editor, "imageBlock")), this._setupClipboardIntegration());
  }
  _setupConversion() {
    const i = this.editor, e = i.t, t = i.conversion, n = i.plugins.get("ImageUtils");
    t.for("dataDowncast").elementToStructure({ model: "imageBlock", view: (r, { writer: s }) => pp(s) }), t.for("editingDowncast").elementToStructure({ model: "imageBlock", view: (r, { writer: s }) => n.toImageWidget(pp(s), s, e("image widget")) }), t.for("downcast").add(Ha(n, "imageBlock", "src")).add(Ha(n, "imageBlock", "alt")).add(Pw(n, "imageBlock")), t.for("upcast").elementToElement({ view: Iw(i, "imageBlock"), model: (r, { writer: s }) => s.createElement("imageBlock", r.hasAttribute("src") ? { src: r.getAttribute("src") } : void 0) }).add(/* @__PURE__ */ function(r) {
      const s = (a, l, c) => {
        if (!c.consumable.test(l.viewItem, { name: !0, classes: "image" })) return;
        const d = r.findViewImgElement(l.viewItem);
        if (!d || !c.consumable.test(d, { name: !0 })) return;
        c.consumable.consume(l.viewItem, { name: !0, classes: "image" });
        const u = Te(c.convertItem(d, l.modelCursor).modelRange.getItems());
        u ? (c.convertChildren(l.viewItem, u), c.updateConversionResult(u, l)) : c.consumable.revert(l.viewItem, { name: !0, classes: "image" });
      };
      return (a) => {
        a.on("element:figure", s);
      };
    }(n));
  }
  _setupClipboardIntegration() {
    const i = this.editor, e = i.model, t = i.editing.view, n = i.plugins.get("ImageUtils"), r = i.plugins.get("ClipboardPipeline");
    this.listenTo(r, "inputTransformation", (s, a) => {
      const l = Array.from(a.content.getChildren());
      let c;
      if (!l.every(n.isInlineImageView)) return;
      c = a.targetRanges ? i.editing.mapper.toModelRange(a.targetRanges[0]) : e.document.selection.getFirstRange();
      const d = e.createSelection(c);
      if (qu(e.schema, d) === "imageBlock") {
        const u = new Ni(t.document), h = l.map((g) => u.createElement("figure", { class: "image" }, g));
        a.content = u.createDocumentFragment(h);
      }
    }), this.listenTo(r, "contentInsertion", (s, a) => {
      a.method === "paste" && e.change((l) => {
        const c = l.createRangeIn(a.content);
        for (const d of c.getItems()) d.is("element", "imageBlock") && n.setImageNaturalSizeAttributes(d);
      });
    });
  }
}
class N4 extends N {
  constructor(e, t = []) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "_focusables");
    m(this, "_focusCycler");
    m(this, "children");
    this.focusTracker = new fe(), this.keystrokes = new Le(), this._focusables = new It(), this.children = this.createCollection(), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } });
    for (const n of t) this.children.add(n), this._focusables.add(n), n instanceof z_ && this._focusables.addMany(n.children);
    this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-image-insert-form"], tabindex: -1 }, children: this.children });
  }
  render() {
    super.render(), lr({ view: this });
    for (const t of this._focusables) this.focusTracker.add(t.element);
    this.keystrokes.listenTo(this.element);
    const e = (t) => t.stopPropagation();
    this.keystrokes.set("arrowright", e), this.keystrokes.set("arrowleft", e), this.keystrokes.set("arrowup", e), this.keystrokes.set("arrowdown", e);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
}
class Ss extends A {
  constructor(e) {
    super(e);
    m(this, "dropdownView");
    m(this, "_integrations", /* @__PURE__ */ new Map());
    e.config.define("image.insert.integrations", ["upload", "assetManager", "url"]);
  }
  static get pluginName() {
    return "ImageInsertUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [wt];
  }
  init() {
    const e = this.editor, t = e.model.document.selection, n = e.plugins.get("ImageUtils");
    this.set("isImageSelected", !1), this.listenTo(e.model.document, "change", () => {
      this.isImageSelected = n.isImage(t.getSelectedElement());
    });
    const r = (s) => this._createToolbarComponent(s);
    e.ui.componentFactory.add("insertImage", r), e.ui.componentFactory.add("imageInsert", r), e.ui.componentFactory.add("menuBar:insertImage", (s) => this._createMenuBarComponent(s));
  }
  registerIntegration({ name: e, observable: t, buttonViewCreator: n, formViewCreator: r, menuBarButtonViewCreator: s, requiresForm: a = !1, override: l = !1 }) {
    this._integrations.has(e) && !l && ce("image-insert-integration-exists", { name: e }), this._integrations.set(e, { observable: t, buttonViewCreator: n, menuBarButtonViewCreator: s, formViewCreator: r, requiresForm: a });
  }
  _createToolbarComponent(e) {
    const t = this.editor, n = e.t, r = this._prepareIntegrations();
    if (!r.length) return null;
    let s;
    const a = r[0];
    if (r.length == 1) {
      if (!a.requiresForm) return a.buttonViewCreator(!0);
      s = a.buttonViewCreator(!0);
    } else {
      const d = a.buttonViewCreator(!1);
      s = new po(e, d), s.tooltip = !0, s.bind("label").to(this, "isImageSelected", (u) => n(u ? "Replace image" : "Insert image"));
    }
    const l = this.dropdownView = ft(e, s), c = r.map(({ observable: d }) => typeof d == "function" ? d() : d);
    return l.bind("isEnabled").toMany(c, "isEnabled", (...d) => d.some((u) => u)), l.once("change:isOpen", () => {
      const d = r.flatMap(({ formViewCreator: h }) => h(r.length == 1)), u = new N4(t.locale, d);
      l.panelView.children.add(u);
    }), l;
  }
  _createMenuBarComponent(e) {
    const t = e.t, n = this._prepareIntegrations();
    if (!n.length) return null;
    const r = n.flatMap(({ menuBarButtonViewCreator: l }) => l(n.length == 1)), s = new Vt(e), a = new dn(e);
    s.panelView.children.add(a), s.buttonView.set({ icon: UC, label: t("Image") });
    for (const l of r) {
      const c = new zi(e, s);
      c.children.add(l), a.items.add(c), l.delegate("execute").to(s);
    }
    return s;
  }
  _prepareIntegrations() {
    const e = this.editor.config.get("image.insert.integrations"), t = [];
    if (!e.length) return ce("image-insert-integrations-not-specified"), t;
    for (const n of e) this._integrations.has(n) ? t.push(this._integrations.get(n)) : ["upload", "assetManager", "url"].includes(n) || ce("image-insert-unknown-integration", { item: n });
    return t.length || ce("image-insert-integrations-not-registered"), t;
  }
}
class R4 extends A {
  static get requires() {
    return [Nw, dr, Wu, Ss];
  }
  static get pluginName() {
    return "ImageBlock";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class z4 extends A {
  static get requires() {
    return [Mw, Vw, wt, Ow, Lt];
  }
  static get pluginName() {
    return "ImageInlineEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.model.schema.register("imageInline", { inheritAllFrom: "$inlineObject", allowAttributes: ["alt", "src", "srcset"], disallowIn: ["caption"] }), this._setupConversion(), i.plugins.has("ImageBlockEditing") && (i.commands.add("imageTypeInline", new Lw(this.editor, "imageInline")), this._setupClipboardIntegration());
  }
  _setupConversion() {
    const i = this.editor, e = i.t, t = i.conversion, n = i.plugins.get("ImageUtils");
    t.for("dataDowncast").elementToElement({ model: "imageInline", view: (r, { writer: s }) => s.createEmptyElement("img") }), t.for("editingDowncast").elementToStructure({ model: "imageInline", view: (r, { writer: s }) => n.toImageWidget(function(a) {
      return a.createContainerElement("span", { class: "image-inline" }, a.createEmptyElement("img"));
    }(s), s, e("image widget")) }), t.for("downcast").add(Ha(n, "imageInline", "src")).add(Ha(n, "imageInline", "alt")).add(Pw(n, "imageInline")), t.for("upcast").elementToElement({ view: Iw(i, "imageInline"), model: (r, { writer: s }) => s.createElement("imageInline", r.hasAttribute("src") ? { src: r.getAttribute("src") } : void 0) });
  }
  _setupClipboardIntegration() {
    const i = this.editor, e = i.model, t = i.editing.view, n = i.plugins.get("ImageUtils"), r = i.plugins.get("ClipboardPipeline");
    this.listenTo(r, "inputTransformation", (s, a) => {
      const l = Array.from(a.content.getChildren());
      let c;
      if (!l.every(n.isBlockImageView)) return;
      c = a.targetRanges ? i.editing.mapper.toModelRange(a.targetRanges[0]) : e.document.selection.getFirstRange();
      const d = e.createSelection(c);
      if (qu(e.schema, d) === "imageInline") {
        const u = new Ni(t.document), h = l.map((g) => g.childCount === 1 ? (Array.from(g.getAttributes()).forEach((p) => u.setAttribute(...p, n.findViewImgElement(g))), g.getChild(0)) : g);
        a.content = u.createDocumentFragment(h);
      }
    }), this.listenTo(r, "contentInsertion", (s, a) => {
      a.method === "paste" && e.change((l) => {
        const c = l.createRangeIn(a.content);
        for (const d of c.getItems()) d.is("element", "imageInline") && n.setImageNaturalSizeAttributes(d);
      });
    });
  }
}
class B4 extends A {
  static get requires() {
    return [z4, dr, Wu, Ss];
  }
  static get pluginName() {
    return "ImageInline";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class Rw extends A {
  static get pluginName() {
    return "ImageCaptionUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [wt];
  }
  getCaptionFromImageModelElement(i) {
    for (const e of i.getChildren()) if (e && e.is("element", "caption")) return e;
    return null;
  }
  getCaptionFromModelSelection(i) {
    const e = this.editor.plugins.get("ImageUtils"), t = i.getFirstPosition().findAncestor("caption");
    return t && e.isBlockImage(t.parent) ? t : null;
  }
  matchImageCaptionViewElement(i) {
    const e = this.editor.plugins.get("ImageUtils");
    return i.name == "figcaption" && e.isBlockImageView(i.parent) ? { name: !0 } : null;
  }
}
class D4 extends G {
  refresh() {
    const i = this.editor, e = i.plugins.get("ImageCaptionUtils"), t = i.plugins.get("ImageUtils");
    if (!i.plugins.has(Nw)) return this.isEnabled = !1, void (this.value = !1);
    const n = i.model.document.selection, r = n.getSelectedElement();
    if (!r) {
      const s = e.getCaptionFromModelSelection(n);
      return this.isEnabled = !!s, void (this.value = !!s);
    }
    this.isEnabled = t.isImage(r), this.isEnabled ? this.value = !!e.getCaptionFromImageModelElement(r) : this.value = !1;
  }
  execute(i = {}) {
    const { focusCaptionOnShow: e } = i;
    this.editor.model.change((t) => {
      this.value ? this._hideImageCaption(t) : this._showImageCaption(t, e);
    });
  }
  _showImageCaption(i, e) {
    const t = this.editor.model.document.selection, n = this.editor.plugins.get("ImageCaptionEditing"), r = this.editor.plugins.get("ImageUtils");
    let s = t.getSelectedElement();
    const a = n._getSavedCaption(s);
    r.isInlineImage(s) && (this.editor.execute("imageTypeBlock"), s = t.getSelectedElement());
    const l = a || i.createElement("caption");
    i.append(l, s), e && i.setSelection(l, "in");
  }
  _hideImageCaption(i) {
    const e = this.editor, t = e.model.document.selection, n = e.plugins.get("ImageCaptionEditing"), r = e.plugins.get("ImageCaptionUtils");
    let s, a = t.getSelectedElement();
    a ? s = r.getCaptionFromImageModelElement(a) : (s = r.getCaptionFromModelSelection(t), a = s.parent), n._saveCaption(a, s), i.setSelection(a, "on"), i.remove(s);
  }
}
class F4 extends A {
  constructor(e) {
    super(e);
    m(this, "_savedCaptionsMap");
    this._savedCaptionsMap = /* @__PURE__ */ new WeakMap();
  }
  static get requires() {
    return [wt, Rw];
  }
  static get pluginName() {
    return "ImageCaptionEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model.schema;
    t.isRegistered("caption") ? t.extend("caption", { allowIn: "imageBlock" }) : t.register("caption", { allowIn: "imageBlock", allowContentOf: "$block", isLimit: !0 }), e.commands.add("toggleImageCaption", new D4(this.editor)), this._setupConversion(), this._setupImageTypeCommandsIntegration(), this._registerCaptionReconversion();
  }
  _setupConversion() {
    const e = this.editor, t = e.editing.view, n = e.plugins.get("ImageUtils"), r = e.plugins.get("ImageCaptionUtils"), s = e.t;
    e.conversion.for("upcast").elementToElement({ view: (a) => r.matchImageCaptionViewElement(a), model: "caption" }), e.conversion.for("dataDowncast").elementToElement({ model: "caption", view: (a, { writer: l }) => n.isBlockImage(a.parent) ? l.createContainerElement("figcaption") : null }), e.conversion.for("editingDowncast").elementToElement({ model: "caption", view: (a, { writer: l }) => {
      if (!n.isBlockImage(a.parent)) return null;
      const c = l.createEditableElement("figcaption");
      l.setCustomProperty("imageCaption", !0, c), c.placeholder = s("Enter image caption"), wu({ view: t, element: c, keepOnFocus: !0 });
      const d = a.parent.getAttribute("alt");
      return gw(c, l, { label: d ? s("Caption for image: %0", [d]) : s("Caption for the image") });
    } });
  }
  _setupImageTypeCommandsIntegration() {
    const e = this.editor, t = e.plugins.get("ImageUtils"), n = e.plugins.get("ImageCaptionUtils"), r = e.commands.get("imageTypeInline"), s = e.commands.get("imageTypeBlock"), a = (l) => {
      if (!l.return) return;
      const { oldElement: c, newElement: d } = l.return;
      if (!c) return;
      if (t.isBlockImage(c)) {
        const h = n.getCaptionFromImageModelElement(c);
        if (h) return void this._saveCaption(d, h);
      }
      const u = this._getSavedCaption(c);
      u && this._saveCaption(d, u);
    };
    r && this.listenTo(r, "execute", a, { priority: "low" }), s && this.listenTo(s, "execute", a, { priority: "low" });
  }
  _getSavedCaption(e) {
    const t = this._savedCaptionsMap.get(e);
    return t ? Re.fromJSON(t) : null;
  }
  _saveCaption(e, t) {
    this._savedCaptionsMap.set(e, t.toJSON());
  }
  _registerCaptionReconversion() {
    const e = this.editor, t = e.model, n = e.plugins.get("ImageUtils"), r = e.plugins.get("ImageCaptionUtils");
    t.document.on("change:data", () => {
      const s = t.document.differ.getChanges();
      for (const a of s) {
        if (a.attributeKey !== "alt") continue;
        const l = a.range.start.nodeAfter;
        if (n.isBlockImage(l)) {
          const c = r.getCaptionFromImageModelElement(l);
          if (!c) return;
          e.editing.reconvertItem(c);
        }
      }
    });
  }
}
class j4 extends A {
  static get requires() {
    return [Rw];
  }
  static get pluginName() {
    return "ImageCaptionUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.editing.view, t = i.plugins.get("ImageCaptionUtils"), n = i.t;
    i.ui.componentFactory.add("toggleImageCaption", (r) => {
      const s = i.commands.get("toggleImageCaption"), a = new j(r);
      return a.set({ icon: OC, tooltip: !0, isToggleable: !0 }), a.bind("isOn", "isEnabled").to(s, "value", "isEnabled"), a.bind("label").to(s, "value", (l) => n(l ? "Toggle caption off" : "Toggle caption on")), this.listenTo(a, "execute", () => {
        i.execute("toggleImageCaption", { focusCaptionOnShow: !0 });
        const l = t.getCaptionFromModelSelection(i.model.document.selection);
        if (l) {
          const c = i.editing.mapper.toViewElement(l);
          e.scrollToTheSelection(), e.change((d) => {
            d.addClass("image__caption_highlighted", c);
          });
        }
        i.editing.view.focus();
      }), a;
    });
  }
}
class H4 extends A {
  static get requires() {
    return [F4, j4];
  }
  static get pluginName() {
    return "ImageCaption";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function zw(o) {
  const i = o.map((e) => e.replace("+", "\\+"));
  return new RegExp(`^image\\/(${i.join("|")})$`);
}
function $4(o) {
  return new Promise((i, e) => {
    const t = o.getAttribute("src");
    fetch(t).then((n) => n.blob()).then((n) => {
      const r = bp(n, t), s = r.replace("image/", ""), a = new File([n], `image.${s}`, { type: r });
      i(a);
    }).catch((n) => n && n.name === "TypeError" ? function(r) {
      return function(s) {
        return new Promise((a, l) => {
          const c = z.document.createElement("img");
          c.addEventListener("load", () => {
            const d = z.document.createElement("canvas");
            d.width = c.width, d.height = c.height, d.getContext("2d").drawImage(c, 0, 0), d.toBlob((u) => u ? a(u) : l());
          }), c.addEventListener("error", () => l()), c.src = s;
        });
      }(r).then((s) => {
        const a = bp(s, r), l = a.replace("image/", "");
        return new File([s], `image.${l}`, { type: a });
      });
    }(t).then(i).catch(e) : e(n));
  });
}
function bp(o, i) {
  return o.type ? o.type : i.match(/data:(image\/\w+);base64/) ? i.match(/data:(image\/\w+);base64/)[1].toLowerCase() : "image/jpeg";
}
class U4 extends A {
  static get pluginName() {
    return "ImageUploadUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.ui.componentFactory.add("uploadImage", () => this._createToolbarButton()), i.ui.componentFactory.add("imageUpload", () => this._createToolbarButton()), i.ui.componentFactory.add("menuBar:uploadImage", () => this._createMenuBarButton("standalone")), i.plugins.has("ImageInsertUI") && i.plugins.get("ImageInsertUI").registerIntegration({ name: "upload", observable: () => i.commands.get("uploadImage"), buttonViewCreator: () => this._createToolbarButton(), formViewCreator: () => this._createDropdownButton(), menuBarButtonViewCreator: (e) => this._createMenuBarButton(e ? "insertOnly" : "insertNested") });
  }
  _createButton(i) {
    const e = this.editor, t = e.locale, n = e.commands.get("uploadImage"), r = e.config.get("image.upload.types"), s = zw(r), a = new i(e.locale), l = t.t;
    return a.set({ acceptedType: r.map((c) => `image/${c}`).join(","), allowMultipleFiles: !0, label: l("Upload from computer"), icon: qC }), a.bind("isEnabled").to(n), a.on("done", (c, d) => {
      const u = Array.from(d).filter((h) => s.test(h.type));
      u.length && (e.execute("uploadImage", { file: u }), e.editing.view.focus());
    }), a;
  }
  _createToolbarButton() {
    const i = this.editor.locale.t, e = this.editor.plugins.get("ImageInsertUI"), t = this.editor.commands.get("uploadImage"), n = this._createButton(ig);
    return n.tooltip = !0, n.bind("label").to(e, "isImageSelected", t, "isAccessAllowed", (r, s) => i(s ? r ? "Replace image from computer" : "Upload image from computer" : "You have no image upload permissions.")), n;
  }
  _createDropdownButton() {
    const i = this.editor.locale.t, e = this.editor.plugins.get("ImageInsertUI"), t = this._createButton(ig);
    return t.withText = !0, t.bind("label").to(e, "isImageSelected", (n) => i(n ? "Replace from computer" : "Upload from computer")), t.on("execute", () => {
      e.dropdownView.isOpen = !1;
    }), t;
  }
  _createMenuBarButton(i) {
    const e = this.editor.locale.t, t = this._createButton(nw);
    switch (t.withText = !0, i) {
      case "standalone":
        t.label = e("Image from computer");
        break;
      case "insertOnly":
        t.label = e("Image");
        break;
      case "insertNested":
        t.label = e("From computer");
    }
    return t;
  }
}
class q4 extends A {
  constructor(e) {
    super(e);
    m(this, "placeholder");
    m(this, "uploadStatusChange", (e, t, n) => {
      const r = this.editor, s = t.item, a = s.getAttribute("uploadId");
      if (!n.consumable.consume(t.item, e.name)) return;
      const l = r.plugins.get("ImageUtils"), c = r.plugins.get(Cn), d = a ? t.attributeNewValue : null, u = this.placeholder, h = r.editing.mapper.toViewElement(s), g = n.writer;
      if (d == "reading") return kp(h, g), void _p(l, u, h, g);
      if (d == "uploading") {
        const p = c.loaders.get(a);
        return kp(h, g), void (p ? (wp(h, g), function(f, b, k, _) {
          const w = function(y) {
            const x = y.createUIElement("div", { class: "ck-progress-bar" });
            return y.setCustomProperty("progressBar", !0, x), x;
          }(b);
          b.insert(b.createPositionAt(f, "end"), w), k.on("change:uploadedPercent", (y, x, C) => {
            _.change((S) => {
              S.setStyle("width", C + "%", w);
            });
          });
        }(h, g, p, r.editing.view), function(f, b, k, _) {
          if (_.data) {
            const w = f.findViewImgElement(b);
            k.setAttribute("src", _.data, w);
          }
        }(l, h, g, p)) : _p(l, u, h, g));
      }
      d == "complete" && c.loaders.get(a) && function(p, f, b) {
        const k = f.createUIElement("div", { class: "ck-image-upload-complete-icon" });
        f.insert(f.createPositionAt(p, "end"), k), setTimeout(() => {
          b.change((_) => _.remove(_.createRangeOn(k)));
        }, 3e3);
      }(h, g, r.editing.view), function(p, f) {
        Dw(p, f, "progressBar");
      }(h, g), wp(h, g), function(p, f) {
        f.removeClass("ck-appear", p);
      }(h, g);
    });
    this.placeholder = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
  }
  static get pluginName() {
    return "ImageUploadProgress";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor;
    e.plugins.has("ImageBlockEditing") && e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock", this.uploadStatusChange), e.plugins.has("ImageInlineEditing") && e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline", this.uploadStatusChange);
  }
}
function kp(o, i) {
  o.hasClass("ck-appear") || i.addClass("ck-appear", o);
}
function _p(o, i, e, t) {
  e.hasClass("ck-image-upload-placeholder") || t.addClass("ck-image-upload-placeholder", e);
  const n = o.findViewImgElement(e);
  n.getAttribute("src") !== i && t.setAttribute("src", i, n), Bw(e, "placeholder") || t.insert(t.createPositionAfter(n), function(r) {
    const s = r.createUIElement("div", { class: "ck-upload-placeholder-loader" });
    return r.setCustomProperty("placeholder", !0, s), s;
  }(t));
}
function wp(o, i) {
  o.hasClass("ck-image-upload-placeholder") && i.removeClass("ck-image-upload-placeholder", o), Dw(o, i, "placeholder");
}
function Bw(o, i) {
  for (const e of o.getChildren()) if (e.getCustomProperty(i)) return e;
}
function Dw(o, i, e) {
  const t = Bw(o, e);
  t && i.remove(i.createRangeOn(t));
}
class W4 extends G {
  constructor(i) {
    super(i), this.set("isAccessAllowed", !0);
  }
  refresh() {
    const i = this.editor, e = i.plugins.get("ImageUtils"), t = i.model.document.selection.getSelectedElement();
    this.isEnabled = e.isImageAllowed() || e.isImage(t);
  }
  execute(i) {
    const e = De(i.file), t = this.editor.model.document.selection, n = this.editor.plugins.get("ImageUtils"), r = Object.fromEntries(t.getAttributes());
    e.forEach((s, a) => {
      const l = t.getSelectedElement();
      if (a && l && n.isImage(l)) {
        const c = this.editor.model.createPositionAfter(l);
        this._uploadImage(s, r, c);
      } else this._uploadImage(s, r);
    });
  }
  _uploadImage(i, e, t) {
    const n = this.editor, r = n.plugins.get(Cn).createLoader(i), s = n.plugins.get("ImageUtils");
    r && s.insertImage({ ...e, uploadId: r.id }, t);
  }
}
class G4 extends A {
  constructor(e) {
    super(e);
    m(this, "_uploadImageElements");
    m(this, "_uploadedImages", /* @__PURE__ */ new Map());
    e.config.define("image", { upload: { types: ["jpeg", "png", "gif", "bmp", "webp", "tiff"] } }), this._uploadImageElements = /* @__PURE__ */ new Map();
  }
  static get requires() {
    return [Cn, Tg, Lt, wt];
  }
  static get pluginName() {
    return "ImageUploadEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model.document, n = e.conversion, r = e.plugins.get(Cn), s = e.plugins.get("ImageUtils"), a = e.plugins.get("ClipboardPipeline"), l = zw(e.config.get("image.upload.types")), c = new W4(e);
    e.commands.add("uploadImage", c), e.commands.add("imageUpload", c), n.for("upcast").attributeToAttribute({ view: { name: "img", key: "uploadId" }, model: "uploadId" }).add((d) => d.on("element:img", (u, h, g) => {
      if (!g.consumable.test(h.viewItem, { attributes: ["data-ck-upload-id"] })) return;
      const p = h.viewItem.getAttribute("data-ck-upload-id");
      if (!p) return;
      const [f] = Array.from(h.modelRange.getItems({ shallow: !0 })), b = r.loaders.get(p);
      f && (g.writer.setAttribute("uploadId", p, f), g.consumable.consume(h.viewItem, { attributes: ["data-ck-upload-id"] }), b && b.data && g.writer.setAttribute("uploadStatus", b.status, f));
    }, { priority: "low" })), this.listenTo(e.editing.view.document, "clipboardInput", (d, u) => {
      if (h = u.dataTransfer, Array.from(h.types).includes("text/html") && h.getData("text/html") !== "") return;
      var h;
      const g = Array.from(u.dataTransfer.files).filter((p) => !!p && l.test(p.type));
      if (g.length && (d.stop(), e.model.change((p) => {
        u.targetRanges && p.setSelection(u.targetRanges.map((f) => e.editing.mapper.toModelRange(f))), e.execute("uploadImage", { file: g });
      }), !e.commands.get("uploadImage").isAccessAllowed)) {
        const p = e.plugins.get("Notification"), f = e.locale.t;
        p.showWarning(f("You have no image upload permissions."), { namespace: "image" });
      }
    }), this.listenTo(a, "inputTransformation", (d, u) => {
      const h = Array.from(e.editing.view.createRangeIn(u.content)).map((p) => p.item).filter((p) => function(f, b) {
        return !(!f.isInlineImageView(b) || !b.getAttribute("src") || !b.getAttribute("src").match(/^data:image\/\w+;base64,/g) && !b.getAttribute("src").match(/^blob:/g));
      }(s, p) && !p.getAttribute("uploadProcessed")).map((p) => ({ promise: $4(p), imageElement: p }));
      if (!h.length) return;
      const g = new Ni(e.editing.view.document);
      for (const p of h) {
        g.setAttribute("uploadProcessed", !0, p.imageElement);
        const f = r.createLoader(p.promise);
        f && (g.setAttribute("src", "", p.imageElement), g.setAttribute("uploadId", f.id, p.imageElement));
      }
    }), e.editing.view.document.on("dragover", (d, u) => {
      u.preventDefault();
    }), t.on("change", () => {
      const d = t.differ.getChanges({ includeChangesInGraveyard: !0 }).reverse(), u = /* @__PURE__ */ new Set();
      for (const h of d) if (h.type == "insert" && h.name != "$text") {
        const g = h.position.nodeAfter, p = h.position.root.rootName == "$graveyard";
        for (const f of Z4(e, g)) {
          const b = f.getAttribute("uploadId");
          if (!b) continue;
          const k = r.loaders.get(b);
          k ? p ? u.has(b) || Array.from(this._uploadImageElements.get(b)).every((_) => _.root.rootName == "$graveyard") && k.abort() : (u.add(b), this._uploadImageElements.has(b) ? this._uploadImageElements.get(b).add(f) : this._uploadImageElements.set(b, /* @__PURE__ */ new Set([f])), k.status == "idle" && this._readAndUpload(k)) : !p && this._uploadedImages.has(b) && e.model.enqueueChange({ isUndoable: !1 }, (_) => {
            _.setAttribute("uploadStatus", "complete", f), this.fire("uploadComplete", { data: this._uploadedImages.get(b), imageElement: f });
          });
        }
      }
    }), this.on("uploadComplete", (d, { imageElement: u, data: h }) => {
      const g = h.urls ? h.urls : h;
      this.editor.model.change((p) => {
        p.setAttribute("src", g.default, u), this._parseAndSetSrcsetAttributeOnImage(g, u, p), s.setImageNaturalSizeAttributes(u);
      });
    }, { priority: "low" });
  }
  afterInit() {
    const e = this.editor.model.schema;
    this.editor.plugins.has("ImageBlockEditing") && (e.extend("imageBlock", { allowAttributes: ["uploadId", "uploadStatus"] }), this._registerConverters("imageBlock")), this.editor.plugins.has("ImageInlineEditing") && (e.extend("imageInline", { allowAttributes: ["uploadId", "uploadStatus"] }), this._registerConverters("imageInline"));
  }
  _readAndUpload(e) {
    const t = this.editor, n = t.model, r = t.locale.t, s = t.plugins.get(Cn), a = t.plugins.get(Tg), l = t.plugins.get("ImageUtils"), c = this._uploadImageElements;
    return n.enqueueChange({ isUndoable: !1 }, (u) => {
      const h = c.get(e.id);
      for (const g of h) u.setAttribute("uploadStatus", "reading", g);
    }), e.read().then(() => {
      const u = e.upload();
      t.ui && t.ui.ariaLiveAnnouncer.announce(r("Uploading image"));
      for (const h of c.get(e.id)) {
        if (q.isSafari) {
          const g = t.editing.mapper.toViewElement(h), p = l.findViewImgElement(g);
          t.editing.view.once("render", () => {
            if (!p.parent) return;
            const f = t.editing.view.domConverter.mapViewToDom(p.parent);
            if (!f) return;
            const b = f.style.display;
            f.style.display = "none", f._ckHack = f.offsetHeight, f.style.display = b;
          });
        }
        n.enqueueChange({ isUndoable: !1 }, (g) => {
          g.setAttribute("uploadStatus", "uploading", h);
        });
      }
      return u;
    }).then((u) => {
      n.enqueueChange({ isUndoable: !1 }, (h) => {
        for (const g of c.get(e.id)) h.setAttribute("uploadStatus", "complete", g), this.fire("uploadComplete", { data: u, imageElement: g });
        t.ui && t.ui.ariaLiveAnnouncer.announce(r("Image upload complete")), this._uploadedImages.set(e.id, u);
      }), d();
    }).catch((u) => {
      if (t.ui && t.ui.ariaLiveAnnouncer.announce(r("Error during image upload")), e.status !== "error" && e.status !== "aborted") throw u;
      e.status == "error" && u && a.showWarning(u, { title: r("Upload failed"), namespace: "upload" }), n.enqueueChange({ isUndoable: !1 }, (h) => {
        for (const g of c.get(e.id)) g.root.rootName !== "$graveyard" && h.remove(g);
      }), d();
    });
    function d() {
      n.enqueueChange({ isUndoable: !1 }, (u) => {
        for (const h of c.get(e.id)) u.removeAttribute("uploadId", h), u.removeAttribute("uploadStatus", h);
        c.delete(e.id);
      }), s.destroyLoader(e);
    }
  }
  _parseAndSetSrcsetAttributeOnImage(e, t, n) {
    let r = 0;
    const s = Object.keys(e).filter((a) => {
      const l = parseInt(a, 10);
      if (!isNaN(l)) return r = Math.max(r, l), !0;
    }).map((a) => `${e[a]} ${a}w`).join(", ");
    if (s != "") {
      const a = { srcset: s };
      t.hasAttribute("width") || t.hasAttribute("height") || (a.width = r), n.setAttributes(a, t);
    }
  }
  _registerConverters(e) {
    const { conversion: t, plugins: n } = this.editor, r = n.get(Cn), s = n.get(wt);
    t.for("dataDowncast").add((a) => {
      a.on(`attribute:uploadId:${e}`, (l, c, d) => {
        if (!d.consumable.test(c.item, l.name)) return;
        const u = r.loaders.get(c.attributeNewValue);
        if (!u || !u.data) return null;
        const h = d.mapper.toViewElement(c.item), g = s.findViewImgElement(h);
        g && (d.consumable.consume(c.item, l.name), d.writer.setAttribute("data-ck-upload-id", u.id, g));
      });
    });
  }
}
function Z4(o, i) {
  const e = o.plugins.get("ImageUtils");
  return Array.from(o.model.createRangeOn(i)).filter((t) => e.isImage(t.item)).map((t) => t.item);
}
class Fw extends A {
  static get pluginName() {
    return "ImageUpload";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [G4, U4, q4];
  }
}
class K4 extends N {
  constructor(e) {
    super(e);
    m(this, "urlInputView");
    m(this, "keystrokes");
    this.set("imageURLInputValue", ""), this.set("isImageSelected", !1), this.set("isEnabled", !0), this.keystrokes = new Le(), this.urlInputView = this._createUrlInputView(), this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-image-insert-url"], tabindex: "-1" }, children: [this.urlInputView, { tag: "div", attributes: { class: ["ck", "ck-image-insert-url__action-row"] } }] });
  }
  render() {
    super.render(), lr({ view: this }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.keystrokes.destroy();
  }
  _createUrlInputView() {
    const e = this.locale, t = e.t, n = new Ri(e, Ln);
    return n.bind("label").to(this, "isImageSelected", (r) => t(r ? "Update image URL" : "Insert image via URL")), n.bind("isEnabled").to(this), n.fieldView.inputMode = "url", n.fieldView.placeholder = "https://example.com/image.png", n.fieldView.bind("value").to(this, "imageURLInputValue", (r) => r || ""), n.fieldView.on("input", () => {
      this.imageURLInputValue = n.fieldView.element.value.trim();
    }), n;
  }
  focus() {
    this.urlInputView.focus();
  }
}
class Y4 extends A {
  constructor() {
    super(...arguments);
    m(this, "_imageInsertUI");
    m(this, "_formView");
  }
  static get pluginName() {
    return "ImageInsertViaUrlUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Ss, oo];
  }
  init() {
    this.editor.ui.componentFactory.add("insertImageViaUrl", () => this._createToolbarButton()), this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl", () => this._createMenuBarButton("standalone"));
  }
  afterInit() {
    this._imageInsertUI = this.editor.plugins.get("ImageInsertUI"), this._imageInsertUI.registerIntegration({ name: "url", observable: () => this.editor.commands.get("insertImage"), buttonViewCreator: () => this._createToolbarButton(), formViewCreator: () => this._createDropdownButton(), menuBarButtonViewCreator: (e) => this._createMenuBarButton(e ? "insertOnly" : "insertNested") });
  }
  _createInsertUrlButton(e) {
    const t = new e(this.editor.locale);
    return t.icon = WC, t.on("execute", () => {
      this._showModal();
    }), t;
  }
  _createToolbarButton() {
    const e = this.editor.locale.t, t = this._createInsertUrlButton(j);
    return t.tooltip = !0, t.bind("label").to(this._imageInsertUI, "isImageSelected", (n) => e(n ? "Update image URL" : "Insert image via URL")), t;
  }
  _createDropdownButton() {
    const e = this.editor.locale.t, t = this._createInsertUrlButton(j);
    return t.withText = !0, t.bind("label").to(this._imageInsertUI, "isImageSelected", (n) => e(n ? "Update image URL" : "Insert via URL")), t;
  }
  _createMenuBarButton(e) {
    const t = this.editor.locale.t, n = this._createInsertUrlButton(Ie);
    switch (n.withText = !0, e) {
      case "standalone":
        n.label = t("Image via URL");
        break;
      case "insertOnly":
        n.label = t("Image");
        break;
      case "insertNested":
        n.label = t("Via URL");
    }
    return n;
  }
  _createInsertUrlView() {
    const e = this.editor, t = e.locale, n = e.commands.get("replaceImageSource"), r = e.commands.get("insertImage"), s = new K4(t);
    return s.bind("isImageSelected").to(this._imageInsertUI), s.bind("isEnabled").toMany([r, n], "isEnabled", (...a) => a.some((l) => l)), s;
  }
  _showModal() {
    const e = this.editor, t = e.locale.t, n = e.plugins.get("Dialog");
    this._formView || (this._formView = this._createInsertUrlView(), this._formView.on("submit", () => this._handleSave()));
    const r = e.commands.get("replaceImageSource");
    this._formView.imageURLInputValue = r.value || "", n.show({ id: "insertImageViaUrl", title: t("Image via URL"), isModal: !0, content: this._formView, actionButtons: [{ label: t("Cancel"), withText: !0, onExecute: () => n.hide() }, { label: this._imageInsertUI.isImageSelected ? t("Save") : t("Insert"), class: "ck-button-action", withText: !0, onExecute: () => this._handleSave() }] });
  }
  _handleSave() {
    this.editor.commands.get("replaceImageSource").isEnabled ? this.editor.execute("replaceImageSource", { source: this._formView.imageURLInputValue }) : this.editor.execute("insertImage", { source: this._formView.imageURLInputValue }), this.editor.plugins.get("Dialog").hide();
  }
}
class jw extends A {
  static get pluginName() {
    return "ImageInsertViaUrl";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Y4, Ss];
  }
}
class Q4 extends A {
  static get pluginName() {
    return "ImageInsert";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Fw, jw, Ss];
  }
}
class J4 extends G {
  refresh() {
    const i = this.editor, e = i.plugins.get("ImageUtils").getClosestSelectedImageElement(i.model.document.selection);
    this.isEnabled = !!e, e && e.hasAttribute("resizedWidth") ? this.value = { width: e.getAttribute("resizedWidth"), height: null } : this.value = null;
  }
  execute(i) {
    const e = this.editor, t = e.model, n = e.plugins.get("ImageUtils"), r = n.getClosestSelectedImageElement(t.document.selection);
    this.value = { width: i.width, height: null }, r && t.change((s) => {
      s.setAttribute("resizedWidth", i.width, r), s.removeAttribute("resizedHeight", r), n.setImageNaturalSizeAttributes(r);
    });
  }
}
class Hw extends A {
  static get requires() {
    return [wt];
  }
  static get pluginName() {
    return "ImageResizeEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define("image", { resizeUnit: "%", resizeOptions: [{ name: "resizeImage:original", value: null, icon: "original" }, { name: "resizeImage:custom", value: "custom", icon: "custom" }, { name: "resizeImage:25", value: "25", icon: "small" }, { name: "resizeImage:50", value: "50", icon: "medium" }, { name: "resizeImage:75", value: "75", icon: "large" }] });
  }
  init() {
    const i = this.editor, e = new J4(i);
    this._registerConverters("imageBlock"), this._registerConverters("imageInline"), i.commands.add("resizeImage", e), i.commands.add("imageResize", e);
  }
  afterInit() {
    this._registerSchema();
  }
  _registerSchema() {
    this.editor.plugins.has("ImageBlockEditing") && this.editor.model.schema.extend("imageBlock", { allowAttributes: ["resizedWidth", "resizedHeight"] }), this.editor.plugins.has("ImageInlineEditing") && this.editor.model.schema.extend("imageInline", { allowAttributes: ["resizedWidth", "resizedHeight"] });
  }
  _registerConverters(i) {
    const e = this.editor, t = e.plugins.get("ImageUtils");
    e.conversion.for("downcast").add((n) => n.on(`attribute:resizedWidth:${i}`, (r, s, a) => {
      if (!a.consumable.consume(s.item, r.name)) return;
      const l = a.writer, c = a.mapper.toViewElement(s.item);
      s.attributeNewValue !== null ? (l.setStyle("width", s.attributeNewValue, c), l.addClass("image_resized", c)) : (l.removeStyle("width", c), l.removeClass("image_resized", c));
    })), e.conversion.for("dataDowncast").attributeToAttribute({ model: { name: i, key: "resizedHeight" }, view: (n) => ({ key: "style", value: { height: n } }) }), e.conversion.for("editingDowncast").add((n) => n.on(`attribute:resizedHeight:${i}`, (r, s, a) => {
      if (!a.consumable.consume(s.item, r.name)) return;
      const l = a.writer, c = a.mapper.toViewElement(s.item), d = i === "imageInline" ? t.findViewImgElement(c) : c;
      s.attributeNewValue !== null ? l.setStyle("height", s.attributeNewValue, d) : l.removeStyle("height", d);
    })), e.conversion.for("upcast").attributeToAttribute({ view: { name: i === "imageBlock" ? "figure" : "img", styles: { width: /.+/ } }, model: { key: "resizedWidth", value: (n) => ja(n) ? null : n.getStyle("width") } }), e.conversion.for("upcast").attributeToAttribute({ view: { name: i === "imageBlock" ? "figure" : "img", styles: { height: /.+/ } }, model: { key: "resizedHeight", value: (n) => ja(n) ? null : n.getStyle("height") } });
  }
}
const wc = { small: mA, medium: hA, large: uA, custom: cA, original: dA };
class X4 extends A {
  constructor(e) {
    super(e);
    m(this, "_resizeUnit");
    this._resizeUnit = e.config.get("image.resizeUnit");
  }
  static get requires() {
    return [Hw];
  }
  static get pluginName() {
    return "ImageResizeButtons";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.config.get("image.resizeOptions"), n = e.commands.get("resizeImage");
    this.bind("isEnabled").to(n);
    for (const r of t) this._registerImageResizeButton(r);
    this._registerImageResizeDropdown(t);
  }
  _registerImageResizeButton(e) {
    const t = this.editor, { name: n, value: r, icon: s } = e;
    t.ui.componentFactory.add(n, (a) => {
      const l = new j(a), c = t.commands.get("resizeImage"), d = this._getOptionLabelValue(e, !0);
      if (!wc[s]) throw new v("imageresizebuttons-missing-icon", t, e);
      if (l.set({ label: d, icon: wc[s], tooltip: d, isToggleable: !0 }), l.bind("isEnabled").to(this), t.plugins.has("ImageCustomResizeUI") && Er(e)) {
        const u = t.plugins.get("ImageCustomResizeUI");
        this.listenTo(l, "execute", () => {
          u._showForm(this._resizeUnit);
        });
      } else {
        const u = r ? r + this._resizeUnit : null;
        l.bind("isOn").to(c, "value", c, "isEnabled", Td(u)), this.listenTo(l, "execute", () => {
          t.execute("resizeImage", { width: u });
        });
      }
      return l;
    });
  }
  _registerImageResizeDropdown(e) {
    const t = this.editor, n = t.t, r = e.find((a) => !a.value), s = (a) => {
      const l = t.commands.get("resizeImage"), c = ft(a, U_), d = c.buttonView, u = n("Resize image");
      return d.set({ tooltip: u, commandValue: r.value, icon: wc.medium, isToggleable: !0, label: this._getOptionLabelValue(r), withText: !0, class: "ck-resize-image-button", ariaLabel: u, ariaLabelledBy: void 0 }), d.bind("label").to(l, "value", (h) => h && h.width ? h.width : this._getOptionLabelValue(r)), c.bind("isEnabled").to(this), Bn(c, () => this._getResizeDropdownListItemDefinitions(e, l), { ariaLabel: n("Image resize list"), role: "menu" }), this.listenTo(c, "execute", (h) => {
        "onClick" in h.source ? h.source.onClick() : (t.execute(h.source.commandName, { width: h.source.commandValue }), t.editing.view.focus());
      }), c;
    };
    t.ui.componentFactory.add("resizeImage", s), t.ui.componentFactory.add("imageResize", s);
  }
  _getOptionLabelValue(e, t = !1) {
    const n = this.editor.t;
    return e.label ? e.label : t ? Er(e) ? n("Custom image size") : e.value ? n("Resize image to %0", e.value + this._resizeUnit) : n("Resize image to the original size") : Er(e) ? n("Custom") : e.value ? e.value + this._resizeUnit : n("Original");
  }
  _getResizeDropdownListItemDefinitions(e, t) {
    const { editor: n } = this, r = new rt(), s = e.map((a) => Er(a) ? { ...a, valueWithUnits: "custom" } : a.value ? { ...a, valueWithUnits: `${a.value}${this._resizeUnit}` } : { ...a, valueWithUnits: null });
    for (const a of s) {
      let l = null;
      if (n.plugins.has("ImageCustomResizeUI") && Er(a)) {
        const c = n.plugins.get("ImageCustomResizeUI");
        l = { type: "button", model: new cn({ label: this._getOptionLabelValue(a), role: "menuitemradio", withText: !0, icon: null, onClick: () => {
          c._showForm(this._resizeUnit);
        } }) };
        const d = Object.values(s).map((u) => u.valueWithUnits);
        l.model.bind("isOn").to(t, "value", t, "isEnabled", eS(d));
      } else l = { type: "button", model: new cn({ commandName: "resizeImage", commandValue: a.valueWithUnits, label: this._getOptionLabelValue(a), role: "menuitemradio", withText: !0, icon: null }) }, l.model.bind("isOn").to(t, "value", t, "isEnabled", Td(a.valueWithUnits));
      l.model.bind("isEnabled").to(t, "isEnabled"), r.add(l);
    }
    return r;
  }
}
function Er(o) {
  return o.value === "custom";
}
function Td(o) {
  return (i, e) => !(i === void 0 || !e) && (o === null && i === o || i !== null && i.width === o);
}
function eS(o) {
  return (i, e) => !o.some((t) => Td(t)(i, e));
}
const vc = "image_resized";
class tS extends A {
  static get requires() {
    return [uc, wt];
  }
  static get pluginName() {
    return "ImageResizeHandles";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor.commands.get("resizeImage");
    this.bind("isEnabled").to(i), this._setupResizerCreator();
  }
  _setupResizerCreator() {
    const i = this.editor, e = i.editing.view, t = i.plugins.get("ImageUtils");
    e.addObserver(Gu), this.listenTo(e.document, "imageLoaded", (n, r) => {
      if (!r.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img")) return;
      const s = i.editing.view.domConverter, a = s.domToView(r.target), l = t.getImageWidgetFromImageView(a);
      let c = this.editor.plugins.get(uc).getResizerByViewElement(l);
      if (c) return void c.redraw();
      const d = i.editing.mapper, u = d.toModelElement(l);
      c = i.plugins.get(uc).attachTo({ unit: i.config.get("image.resizeUnit"), modelElement: u, viewElement: l, editor: i, getHandleHost: (h) => h.querySelector("img"), getResizeHost: () => s.mapViewToDom(d.toViewElement(u)), isCentered: () => u.getAttribute("imageStyle") == "alignCenter", onCommit(h) {
        e.change((g) => {
          g.removeClass(vc, l);
        }), i.execute("resizeImage", { width: h });
      } }), c.on("updateSize", () => {
        l.hasClass(vc) || e.change((g) => {
          g.addClass(vc, l);
        });
        const h = u.name === "imageInline" ? a : l;
        h.getStyle("height") && e.change((g) => {
          g.removeStyle("height", h);
        });
      }), c.bind("isEnabled").to(this);
    });
  }
}
function vp(o) {
  if (!o) return null;
  const [, i, e] = o.trim().match(/([.,\d]+)(%|px)$/) || [], t = Number.parseFloat(i);
  return Number.isNaN(t) ? null : { value: t, unit: e };
}
function yp(o, i, e) {
  return e === "px" ? { value: i.value, unit: "px" } : { value: i.value / o * 100, unit: "%" };
}
function xp(o) {
  const { editing: i } = o, e = o.plugins.get("ImageUtils").getClosestSelectedImageElement(o.model.document.selection);
  if (!e) return null;
  const t = i.mapper.toViewElement(e);
  return { model: e, view: t, dom: i.view.domConverter.mapViewToDom(t) };
}
class iS extends N {
  constructor(e, t, n) {
    super(e);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "unit");
    m(this, "backButtonView");
    m(this, "saveButtonView");
    m(this, "labeledInput");
    m(this, "children");
    m(this, "_focusables");
    m(this, "_focusCycler");
    m(this, "_validators");
    this.focusTracker = new fe(), this.keystrokes = new Le(), this.unit = t, this.backButtonView = this._createBackButton(), this.saveButtonView = this._createSaveButton(), this.labeledInput = this._createLabeledInputView(), this.children = this.createCollection([this._createHeaderView()]), this.children.add(new Va(e, { children: [this.labeledInput, this.saveButtonView], class: ["ck-form__row_with-submit", "ck-form__row_large-top-padding"] })), this._focusables = new It(), this._validators = n, this.keystrokes.set("Esc", (r, s) => {
      this.fire("cancel"), s();
    }), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-form", "ck-image-custom-resize-form", "ck-responsive-form"], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), lr({ view: this }), [this.backButtonView, this.labeledInput, this.saveButtonView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "cancel"), t;
  }
  _createSaveButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ label: e("Save"), withText: !0, type: "submit", class: "ck-button-action ck-button-bold" }), t;
  }
  _createHeaderView() {
    const e = this.locale.t, t = new mo(this.locale, { label: e("Image Resize") });
    return t.children.add(this.backButtonView, 0), t;
  }
  _createLabeledInputView() {
    const e = this.locale.t, t = new Ri(this.locale, G_);
    return t.label = e("Resize image (in %0)", this.unit), t.class = "ck-labeled-field-view_full-width", t.fieldView.set({ step: 0.1 }), t;
  }
  isValid() {
    this.resetFormStatus();
    for (const e of this._validators) {
      const t = e(this);
      if (t) return this.labeledInput.errorText = t, !1;
    }
    return !0;
  }
  resetFormStatus() {
    this.labeledInput.errorText = null;
  }
  get rawSize() {
    const { element: e } = this.labeledInput.fieldView;
    return e ? e.value : null;
  }
  get parsedSize() {
    const { rawSize: e } = this;
    if (e === null) return null;
    const t = Number.parseFloat(e);
    return Number.isNaN(t) ? null : t;
  }
  get sizeWithUnits() {
    const { parsedSize: e, unit: t } = this;
    return e === null ? null : `${e}${t}`;
  }
}
class nS extends A {
  constructor() {
    super(...arguments);
    m(this, "_balloon");
    m(this, "_form");
  }
  static get requires() {
    return [Bi];
  }
  static get pluginName() {
    return "ImageCustomResizeUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  destroy() {
    super.destroy(), this._form && this._form.destroy();
  }
  _createForm(e) {
    const t = this.editor;
    this._balloon = this.editor.plugins.get("ContextualBalloon"), this._form = new (ls(iS))(t.locale, e, function(n) {
      const r = n.t;
      return [(s) => s.rawSize.trim() === "" ? r("The value must not be empty.") : s.parsedSize === null ? r("The value should be a plain number.") : void 0];
    }(t)), this._form.render(), this.listenTo(this._form, "submit", () => {
      this._form.isValid() && (t.execute("resizeImage", { width: this._form.sizeWithUnits }), this._hideForm(!0));
    }), this.listenTo(this._form.labeledInput, "change:errorText", () => {
      t.ui.update();
    }), this.listenTo(this._form, "cancel", () => {
      this._hideForm(!0);
    }), zn({ emitter: this._form, activator: () => this._isVisible, contextElements: () => [this._balloon.view.element], callback: () => this._hideForm() });
  }
  _showForm(e) {
    if (this._isVisible) return;
    this._form || this._createForm(e);
    const t = this.editor, n = this._form.labeledInput;
    this._form.disableCssTransitions(), this._form.resetFormStatus(), this._isInBalloon || this._balloon.add({ view: this._form, position: Ad(t) });
    const r = function(l, c) {
      const d = xp(l);
      if (!d) return null;
      const u = vp(d.model.getAttribute("resizedWidth") || null);
      return u ? u.unit === c ? u : yp(yd(d.dom), { value: new K(d.dom).width }, c) : null;
    }(t, e), s = r ? r.value.toFixed(1) : "", a = function(l, c) {
      const d = xp(l);
      if (!d) return null;
      const u = yd(d.dom), h = vp(window.getComputedStyle(d.dom).minWidth) || { value: 1 };
      return { unit: c, lower: Math.max(0.1, yp(u, h, c).value), upper: c === "px" ? u : 100 };
    }(t, e);
    n.fieldView.value = n.fieldView.element.value = s, a && Object.assign(n.fieldView, { min: a.lower.toFixed(1), max: Math.ceil(a.upper).toFixed(1) }), this._form.labeledInput.fieldView.select(), this._form.enableCssTransitions();
  }
  _hideForm(e = !1) {
    this._isInBalloon && (this._form.focusTracker.isFocused && this._form.saveButtonView.focus(), this._balloon.remove(this._form), e && this.editor.editing.view.focus());
  }
  get _isVisible() {
    return !!this._balloon && this._balloon.visibleView === this._form;
  }
  get _isInBalloon() {
    return !!this._balloon && this._balloon.hasView(this._form);
  }
}
class oS extends A {
  static get requires() {
    return [Hw, tS, nS, X4];
  }
  static get pluginName() {
    return "ImageResize";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class rS extends G {
  constructor(e, t) {
    super(e);
    m(this, "_defaultStyles");
    m(this, "_styles");
    this._defaultStyles = { imageBlock: !1, imageInline: !1 }, this._styles = new Map(t.map((n) => {
      if (n.isDefault) for (const r of n.modelElements) this._defaultStyles[r] = n.name;
      return [n.name, n];
    }));
  }
  refresh() {
    const e = this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);
    this.isEnabled = !!e, this.isEnabled ? e.hasAttribute("imageStyle") ? this.value = e.getAttribute("imageStyle") : this.value = this._defaultStyles[e.name] : this.value = !1;
  }
  execute(e = {}) {
    const t = this.editor, n = t.model, r = t.plugins.get("ImageUtils");
    n.change((s) => {
      const a = e.value, { setImageSizes: l = !0 } = e;
      let c = r.getClosestSelectedImageElement(n.document.selection);
      a && this.shouldConvertImageType(a, c) && (this.editor.execute(r.isBlockImage(c) ? "imageTypeInline" : "imageTypeBlock", { setImageSizes: l }), c = r.getClosestSelectedImageElement(n.document.selection)), !a || this._styles.get(a).isDefault ? s.removeAttribute("imageStyle", c) : s.setAttribute("imageStyle", a, c), l && r.setImageNaturalSizeAttributes(c);
    });
  }
  shouldConvertImageType(e, t) {
    return !this._styles.get(e).modelElements.includes(t.name);
  }
}
const Zs = { get inline() {
  return { name: "inline", title: "In line", icon: M_, modelElements: ["imageInline"], isDefault: !0 };
}, get alignLeft() {
  return { name: "alignLeft", title: "Left aligned image", icon: P_, modelElements: ["imageBlock", "imageInline"], className: "image-style-align-left" };
}, get alignBlockLeft() {
  return { name: "alignBlockLeft", title: "Left aligned image", icon: V_, modelElements: ["imageBlock"], className: "image-style-block-align-left" };
}, get alignCenter() {
  return { name: "alignCenter", title: "Centered image", icon: ud, modelElements: ["imageBlock"], className: "image-style-align-center" };
}, get alignRight() {
  return { name: "alignRight", title: "Right aligned image", icon: hd, modelElements: ["imageBlock", "imageInline"], className: "image-style-align-right" };
}, get alignBlockRight() {
  return { name: "alignBlockRight", title: "Right aligned image", icon: L_, modelElements: ["imageBlock"], className: "image-style-block-align-right" };
}, get block() {
  return { name: "block", title: "Centered image", icon: ud, modelElements: ["imageBlock"], isDefault: !0 };
}, get side() {
  return { name: "side", title: "Side image", icon: hd, modelElements: ["imageBlock"], className: "image-style-side" };
} }, Cp = { full: lA, left: V_, right: L_, center: ud, inlineLeft: P_, inlineRight: hd, inline: M_ }, Ap = [{ name: "imageStyle:wrapText", title: "Wrap text", defaultItem: "imageStyle:alignLeft", items: ["imageStyle:alignLeft", "imageStyle:alignRight"] }, { name: "imageStyle:breakText", title: "Break text", defaultItem: "imageStyle:block", items: ["imageStyle:alignBlockLeft", "imageStyle:block", "imageStyle:alignBlockRight"] }];
function Tp(o) {
  ce("image-style-configuration-definition-invalid", o);
}
var Ed = { normalizeStyles: function(o) {
  return (o.configuredStyles.options || []).map((i) => function(e) {
    return e = typeof e == "string" ? Zs[e] ? { ...Zs[e] } : { name: e } : function(t, n) {
      const r = { ...n };
      for (const s in t) Object.prototype.hasOwnProperty.call(n, s) || (r[s] = t[s]);
      return r;
    }(Zs[e.name], e), typeof e.icon == "string" && (e.icon = Cp[e.icon] || e.icon), e;
  }(i)).filter((i) => function(e, { isBlockPluginLoaded: t, isInlinePluginLoaded: n }) {
    const { modelElements: r, name: s } = e;
    if (!(r && r.length && s)) return Tp({ style: e }), !1;
    {
      const a = [t ? "imageBlock" : null, n ? "imageInline" : null];
      if (!r.some((l) => a.includes(l))) return ce("image-style-missing-dependency", { style: e, missingPlugins: r.map((l) => l === "imageBlock" ? "ImageBlockEditing" : "ImageInlineEditing") }), !1;
    }
    return !0;
  }(i, o));
}, getDefaultStylesConfiguration: function(o, i) {
  return o && i ? { options: ["inline", "alignLeft", "alignRight", "alignCenter", "alignBlockLeft", "alignBlockRight", "block", "side"] } : o ? { options: ["block", "side"] } : i ? { options: ["inline", "alignLeft", "alignRight"] } : {};
}, getDefaultDropdownDefinitions: function(o) {
  return o.has("ImageBlockEditing") && o.has("ImageInlineEditing") ? [...Ap] : [];
}, warnInvalidStyle: Tp, DEFAULT_OPTIONS: Zs, DEFAULT_ICONS: Cp, DEFAULT_DROPDOWN_DEFINITIONS: Ap };
function Ep(o, i) {
  for (const e of i) if (e.name === o) return e;
}
class $w extends A {
  constructor() {
    super(...arguments);
    m(this, "normalizedStyles");
  }
  static get pluginName() {
    return "ImageStyleEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [wt];
  }
  init() {
    const { normalizeStyles: e, getDefaultStylesConfiguration: t } = Ed, n = this.editor, r = n.plugins.has("ImageBlockEditing"), s = n.plugins.has("ImageInlineEditing");
    n.config.define("image.styles", t(r, s)), this.normalizedStyles = e({ configuredStyles: n.config.get("image.styles"), isBlockPluginLoaded: r, isInlinePluginLoaded: s }), this._setupConversion(r, s), this._setupPostFixer(), n.commands.add("imageStyle", new rS(n, this.normalizedStyles));
  }
  _setupConversion(e, t) {
    const n = this.editor, r = n.model.schema, s = (a = this.normalizedStyles, (c, d, u) => {
      if (!u.consumable.consume(d.item, c.name)) return;
      const h = Ep(d.attributeNewValue, a), g = Ep(d.attributeOldValue, a), p = u.mapper.toViewElement(d.item), f = u.writer;
      g && f.removeClass(g.className, p), h && f.addClass(h.className, p);
    });
    var a;
    const l = function(c) {
      const d = { imageInline: c.filter((u) => !u.isDefault && u.modelElements.includes("imageInline")), imageBlock: c.filter((u) => !u.isDefault && u.modelElements.includes("imageBlock")) };
      return (u, h, g) => {
        if (!h.modelRange) return;
        const p = h.viewItem, f = Te(h.modelRange.getItems());
        if (f && g.schema.checkAttribute(f, "imageStyle")) for (const b of d[f.name]) g.consumable.consume(p, { classes: b.className }) && g.writer.setAttribute("imageStyle", b.name, f);
      };
    }(this.normalizedStyles);
    n.editing.downcastDispatcher.on("attribute:imageStyle", s), n.data.downcastDispatcher.on("attribute:imageStyle", s), e && (r.extend("imageBlock", { allowAttributes: "imageStyle" }), n.data.upcastDispatcher.on("element:figure", l, { priority: "low" })), t && (r.extend("imageInline", { allowAttributes: "imageStyle" }), n.data.upcastDispatcher.on("element:img", l, { priority: "low" }));
  }
  _setupPostFixer() {
    const e = this.editor, t = e.model.document, n = e.plugins.get(wt), r = new Map(this.normalizedStyles.map((s) => [s.name, s]));
    t.registerPostFixer((s) => {
      let a = !1;
      for (const l of t.differ.getChanges()) if (l.type == "insert" || l.type == "attribute" && l.attributeKey == "imageStyle") {
        let c = l.type == "insert" ? l.position.nodeAfter : l.range.start.nodeAfter;
        if (c && c.is("element", "paragraph") && c.childCount > 0 && (c = c.getChild(0)), !n.isImage(c)) continue;
        const d = c.getAttribute("imageStyle");
        if (!d) continue;
        const u = r.get(d);
        u && u.modelElements.includes(c.name) || (s.removeAttribute("imageStyle", c), a = !0);
      }
      return a;
    });
  }
}
class sS extends A {
  static get requires() {
    return [$w];
  }
  static get pluginName() {
    return "ImageStyleUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  get localizedDefaultStylesTitles() {
    const i = this.editor.t;
    return { "Wrap text": i("Wrap text"), "Break text": i("Break text"), "In line": i("In line"), "Full size image": i("Full size image"), "Side image": i("Side image"), "Left aligned image": i("Left aligned image"), "Centered image": i("Centered image"), "Right aligned image": i("Right aligned image") };
  }
  init() {
    const i = this.editor.plugins, e = this.editor.config.get("image.toolbar") || [], t = Sp(i.get("ImageStyleEditing").normalizedStyles, this.localizedDefaultStylesTitles);
    for (const r of t) this._createButton(r);
    const n = Sp([...e.filter(wi), ...Ed.getDefaultDropdownDefinitions(i)], this.localizedDefaultStylesTitles);
    for (const r of n) this._createDropdown(r, t);
  }
  _createDropdown(i, e) {
    const t = this.editor.ui.componentFactory;
    t.add(i.name, (n) => {
      let r;
      const { defaultItem: s, items: a, title: l } = i, c = a.filter((g) => e.find(({ name: p }) => Ip(p) === g)).map((g) => {
        const p = t.create(g);
        return g === s && (r = p), p;
      });
      a.length !== c.length && Ed.warnInvalidStyle({ dropdown: i });
      const d = ft(n, po), u = d.buttonView, h = u.arrowView;
      return Es(d, c, { enableActiveItemFocusOnDropdownOpen: !0 }), u.set({ label: Pp(l, r.label), class: null, tooltip: !0 }), h.unbind("label"), h.set({ label: l }), u.bind("icon").toMany(c, "isOn", (...g) => {
        const p = g.findIndex(Mo);
        return p < 0 ? r.icon : c[p].icon;
      }), u.bind("label").toMany(c, "isOn", (...g) => {
        const p = g.findIndex(Mo);
        return Pp(l, p < 0 ? r.label : c[p].label);
      }), u.bind("isOn").toMany(c, "isOn", (...g) => g.some(Mo)), u.bind("class").toMany(c, "isOn", (...g) => g.some(Mo) ? "ck-splitbutton_flatten" : void 0), u.on("execute", () => {
        c.some(({ isOn: g }) => g) ? d.isOpen = !d.isOpen : r.fire("execute");
      }), d.bind("isEnabled").toMany(c, "isEnabled", (...g) => g.some(Mo)), this.listenTo(d, "execute", () => {
        this.editor.editing.view.focus();
      }), d;
    });
  }
  _createButton(i) {
    const e = i.name;
    this.editor.ui.componentFactory.add(Ip(e), (t) => {
      const n = this.editor.commands.get("imageStyle"), r = new j(t);
      return r.set({ label: i.title, icon: i.icon, tooltip: !0, isToggleable: !0 }), r.bind("isEnabled").to(n, "isEnabled"), r.bind("isOn").to(n, "value", (s) => s === e), r.on("execute", this._executeCommand.bind(this, e)), r;
    });
  }
  _executeCommand(i) {
    this.editor.execute("imageStyle", { value: i }), this.editor.editing.view.focus();
  }
}
function Sp(o, i) {
  for (const e of o) i[e.title] && (e.title = i[e.title]);
  return o;
}
function Ip(o) {
  return `imageStyle:${o}`;
}
function Pp(o, i) {
  return (o ? o + ": " : "") + i;
}
class aS extends A {
  static get requires() {
    return [$w, sS];
  }
  static get pluginName() {
    return "ImageStyle";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class lS extends A {
  static get requires() {
    return [Na, wt];
  }
  static get pluginName() {
    return "ImageToolbar";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    const i = this.editor, e = i.t, t = i.plugins.get(Na), n = i.plugins.get("ImageUtils");
    var r;
    t.register("image", { ariaLabel: e("Image toolbar"), items: (r = i.config.get("image.toolbar") || [], r.map((s) => wi(s) ? s.name : s)), getRelatedElement: (s) => n.getClosestSelectedImageWidget(s) });
  }
}
class cS extends A {
  static get pluginName() {
    return "IndentEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.commands.add("indent", new Uh(i)), i.commands.add("outdent", new Uh(i));
  }
}
class dS extends A {
  static get pluginName() {
    return "IndentUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale, t = i.t, n = e.uiLanguageDirection == "ltr" ? Km : Ym, r = e.uiLanguageDirection == "ltr" ? Ym : Km;
    this._defineButton("indent", t("Increase indent"), n), this._defineButton("outdent", t("Decrease indent"), r);
  }
  _defineButton(i, e, t) {
    const n = this.editor;
    n.ui.componentFactory.add(i, () => {
      const r = this._createButton(j, i, e, t);
      return r.set({ tooltip: !0 }), r;
    }), n.ui.componentFactory.add("menuBar:" + i, () => this._createButton(Ie, i, e, t));
  }
  _createButton(i, e, t, n) {
    const r = this.editor, s = r.commands.get(e), a = new i(r.locale);
    return a.set({ label: t, icon: n }), a.bind("isEnabled").to(s, "isEnabled"), this.listenTo(a, "execute", () => {
      r.execute(e), r.editing.view.focus();
    }), a;
  }
}
class uS extends A {
  static get pluginName() {
    return "Indent";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [cS, dS];
  }
}
class Ks extends G {
  constructor(e, t) {
    super(e);
    m(this, "_indentBehavior");
    this._indentBehavior = t;
  }
  refresh() {
    const e = Te(this.editor.model.document.selection.getSelectedBlocks());
    e && this._isIndentationChangeAllowed(e) ? this.isEnabled = this._indentBehavior.checkEnabled(e.getAttribute("blockIndent")) : this.isEnabled = !1;
  }
  execute() {
    const e = this.editor.model, t = this._getBlocksToChange();
    e.change((n) => {
      for (const r of t) {
        const s = r.getAttribute("blockIndent"), a = this._indentBehavior.getNextIndent(s);
        a ? n.setAttribute("blockIndent", a, r) : n.removeAttribute("blockIndent", r);
      }
    });
  }
  _getBlocksToChange() {
    const e = this.editor.model.document.selection;
    return Array.from(e.getSelectedBlocks()).filter((t) => this._isIndentationChangeAllowed(t));
  }
  _isIndentationChangeAllowed(e) {
    const t = this.editor;
    return t.model.schema.checkAttribute(e, "blockIndent") ? !t.plugins.has("ListUtils") || !this._indentBehavior.isForward ? !0 : !t.plugins.get("ListUtils").isListItemBlock(e) : !1;
  }
}
class Mp {
  constructor(i) {
    m(this, "isForward");
    m(this, "offset");
    m(this, "unit");
    this.isForward = i.direction === "forward", this.offset = i.offset, this.unit = i.unit;
  }
  checkEnabled(i) {
    const e = parseFloat(i || "0");
    return this.isForward || e > 0;
  }
  getNextIndent(i) {
    const e = parseFloat(i || "0");
    if (!(!i || i.endsWith(this.unit))) return this.isForward ? this.offset + this.unit : void 0;
    const t = e + (this.isForward ? this.offset : -this.offset);
    return t > 0 ? t + this.unit : void 0;
  }
}
class Vp {
  constructor(i) {
    m(this, "isForward");
    m(this, "classes");
    this.isForward = i.direction === "forward", this.classes = i.classes;
  }
  checkEnabled(i) {
    const e = this.classes.indexOf(i);
    return this.isForward ? e < this.classes.length - 1 : e >= 0;
  }
  getNextIndent(i) {
    const e = this.classes.indexOf(i), t = this.isForward ? 1 : -1;
    return this.classes[e + t];
  }
}
const hS = ["paragraph", "heading1", "heading2", "heading3", "heading4", "heading5", "heading6"];
class mS extends A {
  constructor(i) {
    super(i), i.config.define("indentBlock", { offset: 40, unit: "px" });
  }
  static get pluginName() {
    return "IndentBlock";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.config.get("indentBlock");
    e.classes && e.classes.length ? (this._setupConversionUsingClasses(e.classes), i.commands.add("indentBlock", new Ks(i, new Vp({ direction: "forward", classes: e.classes }))), i.commands.add("outdentBlock", new Ks(i, new Vp({ direction: "backward", classes: e.classes })))) : (i.data.addStyleProcessorRules(aC), this._setupConversionUsingOffset(), i.commands.add("indentBlock", new Ks(i, new Mp({ direction: "forward", offset: e.offset, unit: e.unit }))), i.commands.add("outdentBlock", new Ks(i, new Mp({ direction: "backward", offset: e.offset, unit: e.unit }))));
  }
  afterInit() {
    const i = this.editor, e = i.model.schema, t = i.commands.get("indent"), n = i.commands.get("outdent"), r = i.config.get("heading.options");
    (r && r.map((s) => s.model) || hS).forEach((s) => {
      e.isRegistered(s) && e.extend(s, { allowAttributes: "blockIndent" });
    }), e.setAttributeProperties("blockIndent", { isFormatting: !0 }), t.registerChildCommand(i.commands.get("indentBlock")), n.registerChildCommand(i.commands.get("outdentBlock"));
  }
  _setupConversionUsingOffset() {
    const i = this.editor.conversion, e = this.editor.locale.contentLanguageDirection === "rtl" ? "margin-right" : "margin-left";
    i.for("upcast").attributeToAttribute({ view: { styles: { [e]: /[\s\S]+/ } }, model: { key: "blockIndent", value: (t) => {
      if (!t.is("element", "li")) return t.getStyle(e);
    } } }), i.for("downcast").attributeToAttribute({ model: "blockIndent", view: (t) => ({ key: "style", value: { [e]: t } }) });
  }
  _setupConversionUsingClasses(i) {
    const e = { model: { key: "blockIndent", values: [] }, view: {} };
    for (const t of i) e.model.values.push(t), e.view[t] = { key: "class", value: [t] };
    this.editor.conversion.attributeToAttribute(e);
  }
}
class gS {
  constructor() {
    m(this, "_definitions", /* @__PURE__ */ new Set());
  }
  get length() {
    return this._definitions.size;
  }
  add(i) {
    Array.isArray(i) ? i.forEach((e) => this._definitions.add(e)) : this._definitions.add(i);
  }
  getDispatcher() {
    return (i) => {
      i.on("attribute:linkHref", (e, t, n) => {
        if (!n.consumable.test(t.item, "attribute:linkHref") || !t.item.is("selection") && !n.schema.isInline(t.item)) return;
        const r = n.writer, s = r.document.selection;
        for (const a of this._definitions) {
          const l = r.createAttributeElement("a", a.attributes, { priority: 5 });
          a.classes && r.addClass(a.classes, l);
          for (const c in a.styles) r.setStyle(c, a.styles[c], l);
          r.setCustomProperty("link", !0, l), a.callback(t.attributeNewValue) ? t.item.is("selection") ? r.wrap(s.getFirstRange(), l) : r.wrap(n.mapper.toViewRange(t.range), l) : r.unwrap(n.mapper.toViewRange(t.range), l);
        }
      }, { priority: "high" });
    };
  }
  getDispatcherForLinkedImage() {
    return (i) => {
      i.on("attribute:linkHref:imageBlock", (e, t, { writer: n, mapper: r }) => {
        const s = r.toViewElement(t.item), a = Array.from(s.getChildren()).find((l) => l.is("element", "a"));
        if (a) for (const l of this._definitions) {
          const c = yi(l.attributes);
          if (l.callback(t.attributeNewValue)) {
            for (const [d, u] of c) d === "class" ? n.addClass(u, a) : n.setAttribute(d, u, a);
            l.classes && n.addClass(l.classes, a);
            for (const d in l.styles) n.setStyle(d, l.styles[d], a);
          } else {
            for (const [d, u] of c) d === "class" ? n.removeClass(u, a) : n.removeAttribute(d, a);
            l.classes && n.removeClass(l.classes, a);
            for (const d in l.styles) n.removeStyle(d, a);
          }
        }
      });
    };
  }
}
const pS = /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g, fS = /^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i, bS = /^((\w+:(\/{2,})?)|(\W))/i, kS = ["https?", "ftps?", "mailto"], Lr = "Ctrl+K";
function Lp(o, { writer: i }) {
  const e = i.createAttributeElement("a", { href: o }, { priority: 5 });
  return i.setCustomProperty("link", !0, e), e;
}
function Uw(o, i = kS) {
  const e = String(o), t = i.join("|");
  return function(n, r) {
    return !!n.replace(pS, "").match(r);
  }(e, new RegExp(`${"^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))".replace("<protocols>", t)}`, "i")) ? e : "#";
}
function Sd(o, i) {
  return !!o && i.checkAttribute(o.name, "linkHref");
}
function Zu(o, i) {
  const e = (t = o, fS.test(t) ? "mailto:" : i);
  var t;
  const n = !!e && !qw(o);
  return o && n ? e + o : o;
}
function qw(o) {
  return bS.test(o);
}
function Id(o) {
  let i = "";
  for (const e of o.getItems()) {
    if (!e.is("$text") && !e.is("$textProxy")) return;
    i += e.data;
  }
  return i;
}
class _S extends G {
  constructor() {
    super(...arguments);
    m(this, "manualDecorators", new rt());
    m(this, "automaticDecorators", new gS());
  }
  restoreManualDecoratorStates() {
    for (const e of this.manualDecorators) e.value = this._getDecoratorStateFromModel(e.id);
  }
  refresh() {
    const e = this.editor.model, t = e.document.selection, n = t.getSelectedElement() || Te(t.getSelectedBlocks());
    Sd(n, e.schema) ? (this.value = n.getAttribute("linkHref"), this.isEnabled = e.schema.checkAttribute(n, "linkHref")) : (this.value = t.getAttribute("linkHref"), this.isEnabled = e.schema.checkAttributeInSelection(t, "linkHref"));
    for (const r of this.manualDecorators) r.value = this._getDecoratorStateFromModel(r.id);
  }
  execute(e, t = {}, n) {
    const r = this.editor.model, s = r.document.selection, a = [], l = [];
    for (const c in t) t[c] ? a.push(c) : l.push(c);
    r.change((c) => {
      const d = (g) => {
        c.setAttribute("linkHref", e, g), a.forEach((p) => c.setAttribute(p, !0, g)), l.forEach((p) => c.removeAttribute(p, g));
      }, u = (g, p) => {
        const f = Id(g);
        if (!f) return g;
        let b = n;
        if (b || (b = p && p == f ? e : f), b != f) {
          const k = function(w, y) {
            const x = Ko(w, y), C = { equal: 0, insert: 0, delete: 0 }, S = [];
            let L = "", W = "";
            for (const Y of [...x, null]) Y == "insert" ? W += y[C.equal + C.insert] : Y == "delete" ? L += w[C.equal + C.delete] : (L.length || W.length) && (S.push({ offset: C.equal, actual: L, expected: W }), L = "", W = ""), Y && C[Y]++;
            return S;
          }(f, b);
          let _ = 0;
          for (const { offset: w, actual: y, expected: x } of k) {
            const C = w + _, S = c.createRange(g.start.getShiftedBy(C), g.start.getShiftedBy(C + y.length)), L = wS(S, g).getAttributes(), W = Array.from(L).filter(([be]) => r.schema.getAttributeProperties(be).isFormatting), Y = c.createText(x, W);
            d(Y), r.insertContent(Y, S), _ += x.length;
          }
          return c.createRange(g.start, g.start.getShiftedBy(b.length));
        }
      }, h = (g) => {
        const { plugins: p } = this.editor;
        if (c.setSelection(g.end), p.has("TwoStepCaretMovement")) p.get("TwoStepCaretMovement")._handleForwardMovement();
        else for (const f of ["linkHref", ...a, ...l]) c.removeSelectionAttribute(f);
      };
      if (s.isCollapsed) {
        const g = s.getFirstPosition();
        if (s.hasAttribute("linkHref")) {
          const p = s.getAttribute("linkHref"), f = kl(g, "linkHref", p, r), b = u(f, p);
          d(b || f), b && h(b);
        } else if (e !== "") {
          const p = yi(s.getAttributes());
          p.set("linkHref", e), a.forEach((f) => {
            p.set(f, !0);
          }), h(r.insertContent(c.createText(n || e, p), g));
        }
      } else {
        const g = Array.from(s.getRanges()), p = r.schema.getValidRanges(g, "linkHref"), f = [];
        for (const _ of s.getSelectedBlocks()) r.schema.checkAttribute(_, "linkHref") && f.push(c.createRangeOn(_));
        const b = f.slice();
        for (const _ of p) this._isRangeToUpdate(_, f) && b.push(_);
        const k = g.map((_) => ({ start: Je.fromPosition(_.start, "toPrevious"), end: Je.fromPosition(_.end, "toNext") }));
        for (let _ of b)
          _ = u(_, (_.start.textNode || _.start.nodeAfter).getAttribute("linkHref")) || _, d(_);
        c.setSelection(k.map((_) => {
          const w = _.start.toPosition(), y = _.end.toPosition();
          return _.start.detach(), _.end.detach(), r.createRange(w, y);
        }));
      }
    });
  }
  _getDecoratorStateFromModel(e) {
    const t = this.editor.model, n = t.document.selection, r = n.getSelectedElement();
    return Sd(r, t.schema) ? r.getAttribute(e) : n.getAttribute(e);
  }
  _isRangeToUpdate(e, t) {
    for (const n of t) if (n.containsRange(e)) return !1;
    return !0;
  }
}
function wS(o, i) {
  if (!o.isCollapsed) return Te(o.getItems());
  const e = o.start;
  return e.textNode ? e.textNode : !e.nodeBefore || e.isEqual(i.start) ? e.nodeAfter : e.nodeBefore;
}
class vS extends G {
  refresh() {
    const i = this.editor.model, e = i.document.selection, t = e.getSelectedElement();
    Sd(t, i.schema) ? this.isEnabled = i.schema.checkAttribute(t, "linkHref") : this.isEnabled = i.schema.checkAttributeInSelection(e, "linkHref");
  }
  execute() {
    const i = this.editor, e = this.editor.model, t = e.document.selection, n = i.commands.get("link");
    e.change((r) => {
      const s = t.isCollapsed ? [kl(t.getFirstPosition(), "linkHref", t.getAttribute("linkHref"), e)] : e.schema.getValidRanges(t.getRanges(), "linkHref");
      for (const a of s) if (r.removeAttribute("linkHref", a), n) for (const l of n.manualDecorators) r.removeAttribute(l.id, a);
    });
  }
}
class yS extends xe() {
  constructor({ id: e, label: t, attributes: n, classes: r, styles: s, defaultValue: a }) {
    super();
    m(this, "id");
    m(this, "defaultValue");
    m(this, "label");
    m(this, "attributes");
    m(this, "classes");
    m(this, "styles");
    this.id = e, this.set("value", void 0), this.defaultValue = a, this.label = t, this.attributes = n, this.classes = r, this.styles = s;
  }
  _createPattern() {
    return { attributes: this.attributes, classes: this.classes, styles: this.styles };
  }
}
const Op = "automatic", xS = /^(https?:)?\/\//;
class or extends A {
  constructor(e) {
    super(e);
    m(this, "_linkOpeners", []);
    e.config.define("link", { allowCreatingEmptyLinks: !1, addTargetToExternalLinks: !1, toolbar: ["linkPreview", "|", "editLink", "linkProperties", "unlink"] });
  }
  static get pluginName() {
    return "LinkEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [La, sw, Lt];
  }
  init() {
    const e = this.editor, t = this.editor.config.get("link.allowedProtocols");
    e.model.schema.extend("$text", { allowAttributes: "linkHref" }), e.conversion.for("dataDowncast").attributeToElement({ model: "linkHref", view: Lp }), e.conversion.for("editingDowncast").attributeToElement({ model: "linkHref", view: (r, s) => Lp(Uw(r, t), s) }), e.conversion.for("upcast").elementToAttribute({ view: { name: "a", attributes: { href: !0 } }, model: { key: "linkHref", value: (r) => r.getAttribute("href") } }), e.commands.add("link", new _S(e)), e.commands.add("unlink", new vS(e));
    const n = function(r, s) {
      const a = { "Open in a new tab": r("Open in a new tab"), Downloadable: r("Downloadable") };
      return s.forEach((l) => ("label" in l && a[l.label] && (l.label = a[l.label]), l)), s;
    }(e.t, function(r) {
      const s = [];
      if (r) for (const [l, c] of Object.entries(r)) {
        const d = Object.assign({}, c, { id: `link${a = l, function(u) {
          return u.substring(0, 1).toUpperCase() + u.substring(1);
        }(hu(a))}` });
        s.push(d);
      }
      var a;
      return s;
    }(e.config.get("link.decorators")));
    this._enableAutomaticDecorators(n.filter((r) => r.mode === Op)), this._enableManualDecorators(n.filter((r) => r.mode === "manual")), e.plugins.get(La).registerAttribute("linkHref"), cw(e, "linkHref", "a", "ck-link_selected"), this._enableLinkOpen(), this._enableSelectionAttributesFixer(), this._enableClipboardIntegration();
  }
  _registerLinkOpener(e) {
    this._linkOpeners.push(e);
  }
  _enableAutomaticDecorators(e) {
    const t = this.editor, n = t.commands.get("link").automaticDecorators;
    t.config.get("link.addTargetToExternalLinks") && n.add({ id: "linkIsExternal", mode: Op, callback: (r) => !!r && xS.test(r), attributes: { target: "_blank", rel: "noopener noreferrer" } }), n.add(e), n.length && t.conversion.for("downcast").add(n.getDispatcher());
  }
  _enableManualDecorators(e) {
    if (!e.length) return;
    const t = this.editor, n = t.commands.get("link").manualDecorators;
    e.forEach((r) => {
      t.model.schema.extend("$text", { allowAttributes: r.id });
      const s = new yS(r);
      n.add(s), t.conversion.for("downcast").attributeToElement({ model: s.id, view: (a, { writer: l, schema: c }, { item: d }) => {
        if ((d.is("selection") || c.isInline(d)) && a) {
          const u = l.createAttributeElement("a", s.attributes, { priority: 5 });
          s.classes && l.addClass(s.classes, u);
          for (const h in s.styles) l.setStyle(h, s.styles[h], u);
          return l.setCustomProperty("link", !0, u), u;
        }
      } }), t.conversion.for("upcast").elementToAttribute({ view: { name: "a", ...s._createPattern() }, model: { key: s.id } });
    });
  }
  _enableLinkOpen() {
    const e = this.editor, t = e.editing.view.document, n = (r) => {
      this._linkOpeners.some((s) => s(r)) || function(s) {
        window.open(s, "_blank", "noopener");
      }(r);
    };
    this.listenTo(t, "click", (r, s) => {
      if (!(q.isMac ? s.domEvent.metaKey : s.domEvent.ctrlKey)) return;
      let a = s.domTarget;
      if (a.tagName.toLowerCase() != "a" && (a = a.closest("a")), !a) return;
      const l = a.getAttribute("href");
      l && (r.stop(), s.preventDefault(), n(l));
    }, { context: "$capture" }), this.listenTo(t, "keydown", (r, s) => {
      const a = e.commands.get("link").value;
      a && s.keyCode === ne.enter && s.altKey && (r.stop(), n(a));
    });
  }
  _enableSelectionAttributesFixer() {
    const e = this.editor.model, t = e.document.selection;
    this.listenTo(t, "change:attribute", (n, { attributeKeys: r }) => {
      r.includes("linkHref") && !t.hasAttribute("linkHref") && e.change((s) => {
        var a;
        (function(l, c) {
          l.removeSelectionAttribute("linkHref");
          for (const d of c) l.removeSelectionAttribute(d);
        })(s, (a = e.schema, a.getDefinition("$text").allowAttributes.filter((l) => l.startsWith("link"))));
      });
    });
  }
  _enableClipboardIntegration() {
    const e = this.editor, t = e.model, n = this.editor.config.get("link.defaultProtocol");
    n && this.listenTo(e.plugins.get("ClipboardPipeline"), "contentInsertion", (r, s) => {
      t.change((a) => {
        const l = a.createRangeIn(s.content);
        for (const c of l.getItems()) if (c.hasAttribute("linkHref")) {
          const d = Zu(c.getAttribute("linkHref"), n);
          a.setAttribute("linkHref", d, c);
        }
      });
    });
  }
}
class CS extends j {
  constructor(i) {
    super(i);
    const e = this.bindTemplate;
    this.set({ href: void 0, withText: !0 }), this.extendTemplate({ attributes: { class: ["ck-link-toolbar__preview"], href: e.to("href"), target: "_blank", rel: "noopener noreferrer" }, on: { click: e.to((t) => {
      if (this.href) {
        const n = () => t.preventDefault();
        this.fire("navigate", this.href, n);
      }
    }) } }), this.template.tag = "a";
  }
}
class AS extends N {
  constructor(e, t) {
    super(e);
    m(this, "focusTracker", new fe());
    m(this, "keystrokes", new Le());
    m(this, "backButtonView");
    m(this, "saveButtonView");
    m(this, "displayedTextInputView");
    m(this, "urlInputView");
    m(this, "children");
    m(this, "providersListChildren");
    m(this, "_validators");
    m(this, "_focusables", new It());
    m(this, "_focusCycler");
    this._validators = t, this.backButtonView = this._createBackButton(), this.saveButtonView = this._createSaveButton(), this.displayedTextInputView = this._createDisplayedTextInput(), this.urlInputView = this._createUrlInput(), this.providersListChildren = this.createCollection(), this.children = this.createCollection([this._createHeaderView()]), this._createFormChildren(), this.listenTo(this.providersListChildren, "add", () => {
      this.stopListening(this.providersListChildren, "add"), this.children.add(this._createProvidersListView());
    }), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-form", "ck-link-form", "ck-responsive-form"], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), lr({ view: this }), [this.urlInputView, this.saveButtonView, ...this.providersListChildren, this.backButtonView, this.displayedTextInputView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  isValid() {
    this.resetFormStatus();
    for (const e of this._validators) {
      const t = e(this);
      if (t) return this.urlInputView.errorText = t, !1;
    }
    return !0;
  }
  resetFormStatus() {
    this.urlInputView.errorText = null;
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "cancel"), t;
  }
  _createSaveButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ label: e("Insert"), tooltip: !1, withText: !0, type: "submit", class: "ck-button-action ck-button-bold" }), t;
  }
  _createHeaderView() {
    const e = this.locale.t, t = new mo(this.locale, { label: e("Link") });
    return t.children.add(this.backButtonView, 0), t;
  }
  _createProvidersListView() {
    const e = new go(this.locale);
    return e.extendTemplate({ attributes: { class: ["ck-link-form__providers-list"] } }), e.items.bindTo(this.providersListChildren).using((t) => {
      const n = new hi(this.locale);
      return n.children.add(t), n;
    }), e;
  }
  _createDisplayedTextInput() {
    const e = this.locale.t, t = new Ri(this.locale, Ln);
    return t.label = e("Displayed text"), t.class = "ck-labeled-field-view_full-width", t;
  }
  _createUrlInput() {
    const e = this.locale.t, t = new Ri(this.locale, Ln);
    return t.fieldView.inputMode = "url", t.label = e("Link URL"), t.class = "ck-labeled-field-view_full-width", t;
  }
  _createFormChildren() {
    this.children.add(new Va(this.locale, { children: [this.displayedTextInputView], class: ["ck-form__row_large-top-padding"] })), this.children.add(new Va(this.locale, { children: [this.urlInputView, this.saveButtonView], class: ["ck-form__row_with-submit", "ck-form__row_large-top-padding", "ck-form__row_large-bottom-padding"] }));
  }
  get url() {
    const { element: e } = this.urlInputView.fieldView;
    return e ? e.value.trim() : null;
  }
}
class TS extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker", new fe());
    m(this, "keystrokes", new Le());
    m(this, "backButtonView");
    m(this, "listView");
    m(this, "listChildren");
    m(this, "emptyListInformation");
    m(this, "children");
    m(this, "_focusables", new It());
    m(this, "_focusCycler");
    this.listChildren = this.createCollection(), this.backButtonView = this._createBackButton(), this.listView = this._createListView(), this.emptyListInformation = this._createEmptyLinksListItemView(), this.children = this.createCollection([this._createHeaderView(), this.emptyListInformation]), this.set("title", ""), this.set("emptyListPlaceholder", ""), this.set("hasItems", !1), this.listenTo(this.listChildren, "change", () => {
      this.hasItems = this.listChildren.length > 0;
    }), this.on("change:hasItems", (t, n, r) => {
      r ? (this.children.remove(this.emptyListInformation), this.children.add(this.listView)) : (this.children.remove(this.listView), this.children.add(this.emptyListInformation));
    }), this.keystrokes.set("Esc", (t, n) => {
      this.fire("cancel"), n();
    }), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-link-providers"], tabindex: "-1" }, children: this.children });
  }
  render() {
    super.render(), [this.listView, this.backButtonView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  _createListView() {
    const e = new go(this.locale);
    return e.extendTemplate({ attributes: { class: ["ck-link-providers__list"] } }), e.items.bindTo(this.listChildren).using((t) => {
      const n = new hi(this.locale);
      return n.children.add(t), n;
    }), e;
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "cancel"), t;
  }
  _createHeaderView() {
    const e = new mo(this.locale);
    return e.bind("label").to(this, "title"), e.children.add(this.backButtonView, 0), e;
  }
  _createEmptyLinksListItemView() {
    const e = new N(this.locale);
    return e.setTemplate({ tag: "p", attributes: { class: ["ck", "ck-link__empty-list-info"] }, children: [{ text: this.bindTemplate.to("emptyListPlaceholder") }] }), e;
  }
}
class ES extends N {
  constructor(e) {
    super(e);
    m(this, "focusTracker", new fe());
    m(this, "keystrokes", new Le());
    m(this, "backButtonView");
    m(this, "children");
    m(this, "listChildren");
    m(this, "_focusables", new It());
    m(this, "_focusCycler");
    this.backButtonView = this._createBackButton(), this.listChildren = this.createCollection(), this.children = this.createCollection([this._createHeaderView(), this._createListView()]), this._focusCycler = new ut({ focusables: this._focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-link-properties"], tabindex: "-1" }, children: this.children }), this.keystrokes.set("Esc", (t, n) => {
      this.fire("back"), n();
    });
  }
  render() {
    super.render(), [...this.listChildren, this.backButtonView].forEach((e) => {
      this._focusables.add(e), this.focusTracker.add(e.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
  _createBackButton() {
    const e = this.locale.t, t = new j(this.locale);
    return t.set({ class: "ck-button-back", label: e("Back"), icon: ho, tooltip: !0 }), t.delegate("execute").to(this, "back"), t;
  }
  _createHeaderView() {
    const e = this.locale.t, t = new mo(this.locale, { label: e("Link properties") });
    return t.children.add(this.backButtonView, 0), t;
  }
  _createListView() {
    const e = new go(this.locale);
    return e.extendTemplate({ attributes: { class: ["ck-link__list"] } }), e.items.bindTo(this.listChildren).using((t) => {
      const n = new hi(this.locale);
      return n.children.add(t), n;
    }), e;
  }
}
class SS extends j {
  constructor(e) {
    super(e);
    m(this, "arrowView");
    this.set({ withText: !0 }), this.arrowView = this._createArrowView(), this.extendTemplate({ attributes: { class: ["ck-link__button"] } });
  }
  render() {
    super.render(), this.children.add(this.arrowView);
  }
  _createArrowView() {
    const e = new ui();
    return e.content = I_, e;
  }
}
const Si = "link-ui";
class Ww extends A {
  constructor() {
    super(...arguments);
    m(this, "toolbarView", null);
    m(this, "formView", null);
    m(this, "linkProviderItemsView", null);
    m(this, "propertiesView", null);
    m(this, "_balloon");
    m(this, "_linksProviders", new rt());
  }
  static get requires() {
    return [Bi, or];
  }
  static get pluginName() {
    return "LinkUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = this.editor.t;
    this.set("selectedLinkableText", void 0), e.editing.view.addObserver(O5), this._balloon = e.plugins.get(Bi), this._registerComponents(), this._registerEditingOpeners(), this._enableBalloonActivators(), e.conversion.for("editingDowncast").markerToHighlight({ model: Si, view: { classes: ["ck-fake-link-selection"] } }), e.conversion.for("editingDowncast").markerToElement({ model: Si, view: (n, { writer: r }) => {
      if (!n.markerRange.isCollapsed) return null;
      const s = r.createUIElement("span");
      return r.addClass(["ck-fake-link-selection", "ck-fake-link-selection_collapsed"], s), s;
    } }), e.accessibility.addKeystrokeInfos({ keystrokes: [{ label: t("Create link"), keystroke: Lr }, { label: t("Move out of a link"), keystroke: [["arrowleft", "arrowleft"], ["arrowright", "arrowright"]] }] });
  }
  destroy() {
    super.destroy(), this.propertiesView && this.propertiesView.destroy(), this.formView && this.formView.destroy(), this.toolbarView && this.toolbarView.destroy(), this.linkProviderItemsView && this.linkProviderItemsView.destroy();
  }
  registerLinksListProvider(e) {
    const t = this._linksProviders.filter((n) => (n.order || 0) <= (e.order || 0)).length;
    this._linksProviders.add(e, t);
  }
  _createViews() {
    const e = this.editor.commands.get("link");
    this.toolbarView = this._createToolbarView(), this.formView = this._createFormView(), e.manualDecorators.length && (this.propertiesView = this._createPropertiesView()), this._enableUserBalloonInteractions();
  }
  _createToolbarView() {
    const e = this.editor, t = new Ts(e.locale), n = e.commands.get("link");
    t.class = "ck-link-toolbar";
    let r = e.config.get("link.toolbar");
    return n.manualDecorators.length || (r = r.filter((s) => s !== "linkProperties")), t.fillFromConfig(r, e.ui.componentFactory), t.keystrokes.set("Esc", (s, a) => {
      this._hideUI(), a();
    }), t.keystrokes.set(Lr, (s, a) => {
      this._addFormView(), a();
    }), e.ui.addToolbar(t, { isContextual: !0, beforeFocus: () => {
      this._getSelectedLinkElement() && !this._isToolbarVisible && this._showUI(!0);
    }, afterBlur: () => {
      this._hideUI(!1);
    } }), t;
  }
  _createFormView() {
    const e = this.editor, t = e.locale.t, n = e.commands.get("link"), r = e.config.get("link.defaultProtocol"), s = new (ls(AS))(e.locale, function(a) {
      const l = a.t, c = a.config.get("link.allowCreatingEmptyLinks");
      return [(d) => {
        if (!c && !d.url.length) return l("Link URL must not be empty.");
      }];
    }(e));
    return s.displayedTextInputView.bind("isEnabled").to(this, "selectedLinkableText", (a) => a !== void 0), s.urlInputView.bind("isEnabled").to(n, "isEnabled"), s.saveButtonView.bind("isEnabled").to(n, "isEnabled"), s.saveButtonView.bind("label").to(n, "value", (a) => t(a ? "Update" : "Insert")), this.listenTo(s, "submit", () => {
      if (s.isValid()) {
        const a = Zu(s.urlInputView.fieldView.element.value, r), l = s.displayedTextInputView.fieldView.element.value;
        e.execute("link", a, this._getDecoratorSwitchesState(), l !== this.selectedLinkableText ? l : void 0), this._closeFormView();
      }
    }), this.listenTo(s.urlInputView, "change:errorText", () => {
      e.ui.update();
    }), this.listenTo(s, "cancel", () => {
      this._closeFormView();
    }), s.keystrokes.set("Esc", (a, l) => {
      this._closeFormView(), l();
    }), s.providersListChildren.bindTo(this._linksProviders).using((a) => this._createLinksListProviderButton(a)), s;
  }
  _createLinkProviderListView(e) {
    return e.getListItems().map(({ href: t, label: n, icon: r }) => {
      const s = new j();
      return s.set({ label: n, icon: r, tooltip: !1, withText: !0 }), s.on("execute", () => {
        this.formView.resetFormStatus(), this.formView.urlInputView.fieldView.value = t, this.editor.editing.view.focus(), this._removeLinksProviderView(), this.formView.focus();
      }), s;
    });
  }
  _createLinkProviderItemsView(e) {
    const t = this.editor, n = t.locale.t, r = new TS(t.locale), { emptyListPlaceholder: s, label: a } = e;
    return r.emptyListPlaceholder = s || n("No links available"), r.title = a, this.listenTo(r, "cancel", () => {
      t.editing.view.focus(), this._removeLinksProviderView(), this.formView.focus();
    }), r;
  }
  _createPropertiesView() {
    const e = this.editor, t = this.editor.commands.get("link"), n = new (ls(ES))(e.locale);
    return this.listenTo(n, "back", () => {
      e.editing.view.focus(), this._removePropertiesView();
    }), n.listChildren.bindTo(t.manualDecorators).using((r) => {
      const s = new As(e.locale);
      return s.set({ label: r.label, withText: !0 }), s.bind("isOn").toMany([r, t], "value", (a, l) => l === void 0 && a === void 0 ? !!r.defaultValue : !!a), s.on("execute", () => {
        r.set("value", !s.isOn), e.execute("link", t.value, this._getDecoratorSwitchesState());
      }), s;
    }), n;
  }
  _getDecoratorSwitchesState() {
    const e = this.editor.commands.get("link");
    return Array.from(e.manualDecorators).reduce((t, n) => {
      const r = e.value === void 0 && n.value === void 0 ? n.defaultValue : n.value;
      return { ...t, [n.id]: !!r };
    }, {});
  }
  _registerEditingOpeners() {
    this.editor.plugins.get(or)._registerLinkOpener((e) => {
      const t = this._getLinkProviderLinkByHref(e);
      if (!t) return !1;
      const { item: n, provider: r } = t;
      return !!r.navigate && r.navigate(n);
    });
  }
  _registerComponents() {
    const e = this.editor;
    e.ui.componentFactory.add("link", () => {
      const t = this._createButton(j);
      return t.set({ tooltip: !0 }), t;
    }), e.ui.componentFactory.add("menuBar:link", () => {
      const t = this._createButton(Ie);
      return t.set({ role: "menuitemcheckbox" }), t;
    }), e.ui.componentFactory.add("linkPreview", (t) => {
      const n = new CS(t), r = e.config.get("link.allowedProtocols"), s = e.commands.get("link"), a = t.t;
      n.bind("isEnabled").to(s, "value", (c) => !!c), n.bind("href").to(s, "value", (c) => c && Uw(c, r));
      const l = (c) => {
        if (!c) return n.label = void 0, n.icon = void 0, void (n.tooltip = a("Open link in new tab"));
        const d = this._getLinkProviderLinkByHref(c);
        if (d) {
          const { label: u, tooltip: h, icon: g } = d.item;
          n.label = u, n.tooltip = h || !1, n.icon = g;
        } else n.label = c, n.icon = void 0, n.tooltip = a("Open link in new tab");
      };
      return l(s.value), this.listenTo(s, "change:value", (c, d, u) => {
        l(u);
      }), this.listenTo(n, "navigate", (c, d, u) => {
        const h = this._getLinkProviderLinkByHref(d);
        if (!h) return;
        const { provider: g, item: p } = h, { navigate: f } = g;
        f && f(p) && (c.stop(), u());
      }), n;
    }), e.ui.componentFactory.add("unlink", (t) => {
      const n = e.commands.get("unlink"), r = new j(t), s = t.t;
      return r.set({ label: s("Unlink"), icon: RA, tooltip: !0 }), r.bind("isEnabled").to(n), this.listenTo(r, "execute", () => {
        e.execute("unlink"), this._hideUI();
      }), r;
    }), e.ui.componentFactory.add("editLink", (t) => {
      const n = e.commands.get("link"), r = new j(t), s = t.t;
      return r.set({ label: s("Edit link"), icon: pA, tooltip: !0 }), r.bind("isEnabled").to(n), this.listenTo(r, "execute", () => {
        this._addFormView();
      }), r;
    }), e.ui.componentFactory.add("linkProperties", (t) => {
      const n = e.commands.get("link"), r = new j(t), s = t.t;
      return r.set({ label: s("Link properties"), icon: CA, tooltip: !0 }), r.bind("isEnabled").to(n, "isEnabled", n, "value", n, "manualDecorators", (a, l, c) => a && !!l && c.length > 0), this.listenTo(r, "execute", () => {
        this._addPropertiesView();
      }), r;
    });
  }
  _createLinksListProviderButton(e) {
    const t = this.editor.locale, n = new SS(t);
    return n.set({ label: e.label }), this.listenTo(n, "execute", () => {
      this._showLinksProviderView(e);
    }), n;
  }
  _createButton(e) {
    const t = this.editor, n = t.locale, r = t.commands.get("link"), s = new e(t.locale), a = n.t;
    return s.set({ label: a("Link"), icon: S_, keystroke: Lr, isToggleable: !0 }), s.bind("isEnabled").to(r, "isEnabled"), s.bind("isOn").to(r, "value", (l) => !!l), this.listenTo(s, "execute", () => {
      t.editing.view.scrollToTheSelection(), this._showUI(!0), this._getSelectedLinkElement() && this._addFormView();
    }), s;
  }
  _enableBalloonActivators() {
    const e = this.editor, t = e.editing.view.document;
    this.listenTo(t, "click", () => {
      this._getSelectedLinkElement() && this._showUI();
    }), e.keystrokes.set(Lr, (n, r) => {
      r(), e.commands.get("link").isEnabled && (e.editing.view.scrollToTheSelection(), this._showUI(!0));
    });
  }
  _enableUserBalloonInteractions() {
    this.editor.keystrokes.set("Tab", (e, t) => {
      this._isToolbarVisible && !this.toolbarView.focusTracker.isFocused && (this.toolbarView.focus(), t());
    }, { priority: "high" }), this.editor.keystrokes.set("Esc", (e, t) => {
      this._isUIVisible && (this._hideUI(), t());
    }), zn({ emitter: this.formView, activator: () => this._isUIInPanel, contextElements: () => [this._balloon.view.element], callback: () => {
      this._hideUI(!1);
    } });
  }
  _addToolbarView() {
    this.toolbarView || this._createViews(), this._isToolbarInPanel || this._balloon.add({ view: this.toolbarView, position: this._getBalloonPositionData(), balloonClassName: "ck-toolbar-container" });
  }
  _addFormView() {
    if (this.formView || this._createViews(), this._isFormInPanel) return;
    const e = this.editor.commands.get("link");
    this.formView.disableCssTransitions(), this.formView.resetFormStatus(), this.formView.backButtonView.isVisible = e.isEnabled && !!e.value, this._balloon.add({ view: this.formView, position: this._getBalloonPositionData() }), this.selectedLinkableText = this._getSelectedLinkableText(), this.formView.displayedTextInputView.fieldView.value = this.selectedLinkableText || "", this.formView.urlInputView.fieldView.value = e.value || "", this._balloon.visibleView === this.formView && this.formView.urlInputView.fieldView.select(), this.formView.enableCssTransitions();
  }
  _addPropertiesView() {
    this.propertiesView || this._createViews(), this._arePropertiesInPanel || (this.propertiesView.disableCssTransitions(), this._balloon.add({ view: this.propertiesView, position: this._getBalloonPositionData() }), this.propertiesView.enableCssTransitions(), this.propertiesView.focus());
  }
  _showLinksProviderView(e) {
    this.linkProviderItemsView && this._removeLinksProviderView(), this.linkProviderItemsView = this._createLinkProviderItemsView(e), this._addLinkProviderItemsView(e);
  }
  _addLinkProviderItemsView(e) {
    this.linkProviderItemsView.listChildren.clear(), this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)), this._balloon.add({ view: this.linkProviderItemsView, position: this._getBalloonPositionData() }), this.linkProviderItemsView.focus();
  }
  _closeFormView() {
    const e = this.editor.commands.get("link");
    this.selectedLinkableText = void 0, e.value !== void 0 ? this._removeFormView() : this._hideUI();
  }
  _removePropertiesView() {
    this._arePropertiesInPanel && this._balloon.remove(this.propertiesView);
  }
  _removeLinksProviderView() {
    this._isLinksListInPanel && this._balloon.remove(this.linkProviderItemsView);
  }
  _removeFormView(e = !0) {
    this._isFormInPanel && (this.formView.saveButtonView.focus(), this.formView.displayedTextInputView.fieldView.reset(), this.formView.urlInputView.fieldView.reset(), this._balloon.remove(this.formView), e && this.editor.editing.view.focus(), this._hideFakeVisualSelection());
  }
  _showUI(e = !1) {
    this.formView || this._createViews(), this._getSelectedLinkElement() ? (this._isToolbarVisible ? this._addFormView() : this._addToolbarView(), e && this._balloon.showStack("main")) : (this._showFakeVisualSelection(), this._addToolbarView(), e && this._balloon.showStack("main"), this._addFormView()), this._startUpdatingUI();
  }
  _hideUI(e = !0) {
    const t = this.editor;
    this._isUIInPanel && (this.stopListening(t.ui, "update"), this.stopListening(this._balloon, "change:visibleView"), e && t.editing.view.focus(), this._removeLinksProviderView(), this._removePropertiesView(), this._removeFormView(e), this._isToolbarInPanel && this._balloon.remove(this.toolbarView), this._hideFakeVisualSelection());
  }
  _startUpdatingUI() {
    const e = this.editor, t = e.editing.view.document;
    let n = this._getSelectedLinkElement(), r = a();
    const s = () => {
      const l = this._getSelectedLinkElement(), c = a();
      n && !l || !n && c !== r ? this._hideUI() : this._isUIVisible && this._balloon.updatePosition(this._getBalloonPositionData()), n = l, r = c;
    };
    function a() {
      return t.selection.focus.getAncestors().reverse().find((l) => l.is("element"));
    }
    this.listenTo(e.ui, "update", s), this.listenTo(this._balloon, "change:visibleView", s);
  }
  get _arePropertiesInPanel() {
    return !!this.propertiesView && this._balloon.hasView(this.propertiesView);
  }
  get _isLinksListInPanel() {
    return !!this.linkProviderItemsView && this._balloon.hasView(this.linkProviderItemsView);
  }
  get _isFormInPanel() {
    return !!this.formView && this._balloon.hasView(this.formView);
  }
  get _isToolbarInPanel() {
    return !!this.toolbarView && this._balloon.hasView(this.toolbarView);
  }
  get _isPropertiesVisible() {
    return !!this.propertiesView && this._balloon.visibleView === this.propertiesView;
  }
  get _isFormVisible() {
    return !!this.formView && this._balloon.visibleView == this.formView;
  }
  get _isToolbarVisible() {
    return !!this.toolbarView && this._balloon.visibleView === this.toolbarView;
  }
  get _isUIInPanel() {
    return this._arePropertiesInPanel || this._isLinksListInPanel || this._isFormInPanel || this._isToolbarInPanel;
  }
  get _isUIVisible() {
    return this._isPropertiesVisible || this._isLinksListInPanel || this._isFormVisible || this._isToolbarVisible;
  }
  _getBalloonPositionData() {
    const e = this.editor.editing.view, t = e.document;
    if (this.editor.model.markers.has(Si)) {
      const n = this.editor.editing.mapper.markerNameToElements(Si);
      if (n) {
        const r = Array.from(n), s = e.createRange(e.createPositionBefore(r[0]), e.createPositionAfter(r[r.length - 1]));
        return { target: e.domConverter.viewRangeToDom(s) };
      }
    }
    return { target: () => {
      const n = this._getSelectedLinkElement();
      return n ? e.domConverter.mapViewToDom(n) : e.domConverter.viewRangeToDom(t.selection.getFirstRange());
    } };
  }
  _getSelectedLinkElement() {
    const e = this.editor.editing.view, t = e.document.selection, n = t.getSelectedElement();
    if (t.isCollapsed || n && et(n)) return yc(t.getFirstPosition());
    {
      const r = t.getFirstRange().getTrimmed(), s = yc(r.start), a = yc(r.end);
      return s && s == a && e.createRangeIn(s).getTrimmed().isEqual(r) ? s : null;
    }
  }
  _getSelectedLinkableText() {
    const e = this.editor.model, t = this.editor.editing, n = this._getSelectedLinkElement();
    if (!n) return Id(e.document.selection.getFirstRange());
    const r = t.view.createRangeOn(n);
    return Id(t.mapper.toModelRange(r));
  }
  _getLinkProviderLinkByHref(e) {
    if (!e) return null;
    for (const t of this._linksProviders) {
      const n = t.getItem ? t.getItem(e) : t.getListItems().find((r) => r.href === e);
      if (n) return { provider: t, item: n };
    }
    return null;
  }
  _showFakeVisualSelection() {
    const e = this.editor.model;
    e.change((t) => {
      const n = e.document.selection.getFirstRange();
      if (e.markers.has(Si)) t.updateMarker(Si, { range: n });
      else if (n.start.isAtEnd) {
        const r = n.start.getLastMatchingPosition(({ item: s }) => !e.schema.isContent(s), { boundaries: n });
        t.addMarker(Si, { usingOperation: !1, affectsData: !1, range: t.createRange(r, n.end) });
      } else t.addMarker(Si, { usingOperation: !1, affectsData: !1, range: n });
    });
  }
  _hideFakeVisualSelection() {
    const e = this.editor.model;
    e.markers.has(Si) && e.change((t) => {
      t.removeMarker(Si);
    });
  }
}
function yc(o) {
  return o.getAncestors().find((i) => {
    return (e = i).is("attributeElement") && !!e.getCustomProperty("link");
    var e;
  }) || null;
}
const Gw = new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$", "i");
class Zw extends A {
  static get requires() {
    return [Di, or];
  }
  static get pluginName() {
    return "AutoLink";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor.model.document.selection;
    i.on("change:range", () => {
      this.isEnabled = !i.anchor.parent.is("element", "codeBlock");
    }), this._enableTypingHandling();
  }
  afterInit() {
    this._enableEnterHandling(), this._enableShiftEnterHandling(), this._enablePasteLinking();
  }
  _expandLinkRange(i, e) {
    return e.textNode && e.textNode.hasAttribute("linkHref") ? kl(e, "linkHref", e.textNode.getAttribute("linkHref"), i) : null;
  }
  _selectEntireLinks(i, e) {
    const t = this.editor.model, n = t.document.selection, r = n.getFirstPosition(), s = n.getLastPosition();
    let a = e.getJoined(this._expandLinkRange(t, r) || e);
    a && (a = a.getJoined(this._expandLinkRange(t, s) || e)), a && (a.start.isBefore(r) || a.end.isAfter(s)) && i.setSelection(a);
  }
  _enablePasteLinking() {
    const i = this.editor, e = i.model, t = e.document.selection, n = i.plugins.get("ClipboardPipeline"), r = i.commands.get("link");
    n.on("inputTransformation", (s, a) => {
      if (!this.isEnabled || !r.isEnabled || t.isCollapsed || a.method !== "paste" || t.rangeCount > 1) return;
      const l = t.getFirstRange(), c = a.dataTransfer.getData("text/plain");
      if (!c) return;
      const d = c.match(Gw);
      d && d[2] === c && (e.change((u) => {
        this._selectEntireLinks(u, l), r.execute(c);
      }), s.stop());
    }, { priority: "high" });
  }
  _enableTypingHandling() {
    const i = this.editor, e = new lw(i.model, (t) => {
      let n = t;
      if (!function(s) {
        return s.length > 4 && s[s.length - 1] === " " && s[s.length - 2] !== " ";
      }(n)) return;
      n = n.slice(0, -1), "!.:,;?".includes(n[n.length - 1]) && (n = n.slice(0, -1));
      const r = Np(n);
      return r ? { url: r, removedTrailingCharacters: t.length - n.length } : void 0;
    });
    e.on("matched:data", (t, n) => {
      const { batch: r, range: s, url: a, removedTrailingCharacters: l } = n;
      if (!r.isTyping) return;
      const c = s.end.getShiftedBy(-l), d = c.getShiftedBy(-a.length), u = i.model.createRange(d, c);
      this._applyAutoLink(a, u);
    }), e.bind("isEnabled").to(this);
  }
  _enableEnterHandling() {
    const i = this.editor, e = i.model, t = i.commands.get("enter");
    t && t.on("execute", () => {
      const n = e.document.selection.getFirstPosition();
      if (!n.parent.previousSibling) return;
      const r = e.createRangeIn(n.parent.previousSibling);
      this._checkAndApplyAutoLinkOnRange(r);
    });
  }
  _enableShiftEnterHandling() {
    const i = this.editor, e = i.model, t = i.commands.get("shiftEnter");
    t && t.on("execute", () => {
      const n = e.document.selection.getFirstPosition(), r = e.createRange(e.createPositionAt(n.parent, 0), n.getShiftedBy(-1));
      this._checkAndApplyAutoLinkOnRange(r);
    });
  }
  _checkAndApplyAutoLinkOnRange(i) {
    const e = this.editor.model, { text: t, range: n } = aw(i, e), r = Np(t);
    if (r) {
      const s = e.createRange(n.end.getShiftedBy(-r.length), n.end);
      this._applyAutoLink(r, s);
    }
  }
  _applyAutoLink(i, e) {
    const t = this.editor.model, n = Zu(i, this.editor.config.get("link.defaultProtocol"));
    this.isEnabled && function(r, s) {
      return s.schema.checkAttributeInSelection(s.createSelection(r), "linkHref");
    }(e, t) && qw(n) && !function(r) {
      const s = r.start.nodeAfter;
      return !!s && s.hasAttribute("linkHref");
    }(e) && this._persistAutoLink(n, e);
  }
  _persistAutoLink(i, e) {
    const t = this.editor.model, n = this.editor.plugins.get("Delete");
    t.enqueueChange((r) => {
      r.setAttribute("linkHref", i, e), t.enqueueChange(() => {
        n.requestUndoOnBackspace();
      });
    });
  }
}
function Np(o) {
  const i = Gw.exec(o);
  return i ? i[2] : null;
}
class IS extends A {
  static get requires() {
    return [or, Ww, Zw];
  }
  static get pluginName() {
    return "Link";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class PS extends A {
  static get requires() {
    return ["ImageEditing", "ImageUtils", or];
  }
  static get pluginName() {
    return "LinkImageEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    const i = this.editor, e = i.model.schema;
    i.plugins.has("ImageBlockEditing") && e.extend("imageBlock", { allowAttributes: ["linkHref"] }), i.conversion.for("upcast").add(function(t) {
      const n = t.plugins.has("ImageInlineEditing"), r = t.plugins.get("ImageUtils");
      return (s) => {
        s.on("element:a", (a, l, c) => {
          const d = l.viewItem, u = r.findViewImgElement(d);
          if (!u) return;
          const h = u.findAncestor((b) => r.isBlockImageView(b));
          if (n && !h) return;
          const g = { attributes: ["href"] };
          if (!c.consumable.consume(d, g)) return;
          const p = d.getAttribute("href");
          if (!p) return;
          let f = l.modelCursor.parent;
          if (!f.is("element", "imageBlock")) {
            const b = c.convertItem(u, l.modelCursor);
            l.modelRange = b.modelRange, l.modelCursor = b.modelCursor, f = l.modelCursor.nodeBefore;
          }
          f && f.is("element", "imageBlock") && c.writer.setAttribute("linkHref", p, f);
        }, { priority: "high" });
      };
    }(i)), i.conversion.for("downcast").add(function(t) {
      const n = t.plugins.get("ImageUtils");
      return (r) => {
        r.on("attribute:linkHref:imageBlock", (s, a, l) => {
          if (!l.consumable.consume(a.item, s.name)) return;
          const c = l.mapper.toViewElement(a.item), d = l.writer, u = Array.from(c.getChildren()).find((p) => p.is("element", "a")), h = n.findViewImgElement(c), g = h.parent.is("element", "picture") ? h.parent : h;
          if (u) a.attributeNewValue ? d.setAttribute("href", a.attributeNewValue, u) : (d.move(d.createRangeOn(g), d.createPositionAt(c, 0)), d.remove(u));
          else {
            const p = d.createContainerElement("a", { href: a.attributeNewValue });
            d.insert(d.createPositionAt(c, 0), p), d.move(d.createRangeOn(g), d.createPositionAt(p, 0));
          }
        }, { priority: "high" });
      };
    }(i)), this._enableAutomaticDecorators(), this._enableManualDecorators();
  }
  _enableAutomaticDecorators() {
    const i = this.editor, e = i.commands.get("link").automaticDecorators;
    e.length && i.conversion.for("downcast").add(e.getDispatcherForLinkedImage());
  }
  _enableManualDecorators() {
    const i = this.editor, e = i.commands.get("link");
    for (const t of e.manualDecorators) i.plugins.has("ImageBlockEditing") && i.model.schema.extend("imageBlock", { allowAttributes: t.id }), i.plugins.has("ImageInlineEditing") && i.model.schema.extend("imageInline", { allowAttributes: t.id }), i.conversion.for("downcast").add(MS(t)), i.conversion.for("upcast").add(VS(i, t));
  }
}
function MS(o) {
  return (i) => {
    i.on(`attribute:${o.id}:imageBlock`, (e, t, n) => {
      const r = n.mapper.toViewElement(t.item), s = Array.from(r.getChildren()).find((a) => a.is("element", "a"));
      if (s) if (o.value !== void 0) {
        for (const [a, l] of yi(o.attributes)) n.writer.setAttribute(a, l, s);
        o.classes && n.writer.addClass(o.classes, s);
        for (const a in o.styles) n.writer.setStyle(a, o.styles[a], s);
      } else {
        for (const a in o.attributes) n.writer.removeAttribute(a, s);
        o.classes && n.writer.removeClass(o.classes, s);
        for (const a in o.styles) n.writer.removeStyle(a, s);
      }
    });
  };
}
function VS(o, i) {
  const e = o.plugins.has("ImageInlineEditing"), t = o.plugins.get("ImageUtils");
  return (n) => {
    n.on("element:a", (r, s, a) => {
      const l = s.viewItem, c = t.findViewImgElement(l);
      if (!c) return;
      const d = c.findAncestor((g) => t.isBlockImageView(g));
      if (e && !d) return;
      const u = new Zt(i._createPattern()).match(l);
      if (!u || !a.consumable.consume(l, u.match)) return;
      const h = s.modelCursor.nodeBefore || s.modelCursor.parent;
      a.writer.setAttribute(i.id, !0, h);
    }, { priority: "high" });
  };
}
class LS extends A {
  static get requires() {
    return [or, Ww, "ImageBlockEditing"];
  }
  static get pluginName() {
    return "LinkImageUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.editing.view.document;
    this.listenTo(e, "click", (t, n) => {
      this._isSelectedLinkedImage(i.model.document.selection) && (n.preventDefault(), t.stop());
    }, { priority: "high" }), this._createToolbarLinkImageButton();
  }
  _createToolbarLinkImageButton() {
    const i = this.editor, e = i.t;
    i.ui.componentFactory.add("linkImage", (t) => {
      const n = new j(t), r = i.plugins.get("LinkUI"), s = i.commands.get("link");
      return n.set({ isEnabled: !0, label: e("Link image"), icon: S_, keystroke: Lr, tooltip: !0, isToggleable: !0 }), n.bind("isEnabled").to(s, "isEnabled"), n.bind("isOn").to(s, "value", (a) => !!a), this.listenTo(n, "execute", () => {
        this._isSelectedLinkedImage(i.model.document.selection) ? r._addToolbarView() : r._showUI(!0);
      }), n;
    });
  }
  _isSelectedLinkedImage(i) {
    const e = i.getSelectedElement();
    return this.editor.plugins.get("ImageUtils").isImage(e) && e.hasAttribute("linkHref");
  }
}
class OS extends A {
  static get requires() {
    return [PS, LS];
  }
  static get pluginName() {
    return "LinkImage";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class ci {
  constructor(i, e) {
    m(this, "_startElement");
    m(this, "_referenceIndent");
    m(this, "_isForward");
    m(this, "_includeSelf");
    m(this, "_sameAttributes");
    m(this, "_sameIndent");
    m(this, "_lowerIndent");
    m(this, "_higherIndent");
    this._startElement = i, this._referenceIndent = i.getAttribute("listIndent"), this._isForward = e.direction == "forward", this._includeSelf = !!e.includeSelf, this._sameAttributes = De(e.sameAttributes || []), this._sameIndent = !!e.sameIndent, this._lowerIndent = !!e.lowerIndent, this._higherIndent = !!e.higherIndent;
  }
  static first(i, e) {
    return Te(new this(i, e)[Symbol.iterator]());
  }
  *[Symbol.iterator]() {
    const i = [];
    for (const { node: e } of new Is(this._getStartNode(), this._isForward ? "forward" : "backward")) {
      const t = e.getAttribute("listIndent");
      if (t < this._referenceIndent) {
        if (!this._lowerIndent) break;
        this._referenceIndent = t;
      } else if (t > this._referenceIndent) {
        if (!this._higherIndent) continue;
        if (!this._isForward) {
          i.push(e);
          continue;
        }
      } else {
        if (!this._sameIndent) {
          if (this._higherIndent) {
            i.length && (yield* i, i.length = 0);
            break;
          }
          continue;
        }
        if (this._sameAttributes.some((n) => e.getAttribute(n) !== this._startElement.getAttribute(n))) break;
      }
      i.length && (yield* i, i.length = 0), yield e;
    }
  }
  _getStartNode() {
    return this._includeSelf ? this._startElement : this._isForward ? this._startElement.nextSibling : this._startElement.previousSibling;
  }
}
class Is {
  constructor(i, e = "forward") {
    m(this, "_node");
    m(this, "_isForward");
    m(this, "_previousNodesByIndent", []);
    m(this, "_previous", null);
    m(this, "_previousNodeIndent", null);
    this._node = i, this._isForward = e === "forward";
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    if (!Ve(this._node)) return { done: !0, value: void 0 };
    const i = this._node.getAttribute("listIndent");
    let e = null;
    if (this._previous) {
      const n = this._previousNodeIndent;
      i > n ? this._previousNodesByIndent[n] = this._previous : i < n ? (e = this._previousNodesByIndent[i] || null, this._previousNodesByIndent.length = i) : e = this._previous;
    }
    const t = { node: this._node, previous: this._previous, previousNodeInList: e };
    return this._previous = this._node, this._previousNodeIndent = i, this._node = this._isForward ? this._node.nextSibling : this._node.previousSibling, { value: t, done: !1 };
  }
}
class NS {
  constructor(i) {
    m(this, "_listHead");
    this._listHead = i;
  }
  [Symbol.iterator]() {
    return new Is(this._listHead);
  }
}
class Qo {
  static next() {
    return Tt();
  }
}
function Ve(o) {
  return !!o && o.is("element") && o.hasAttribute("listItemId");
}
function rr(o, i = {}) {
  return [...On(o, { ...i, direction: "backward" }), ...On(o, { ...i, direction: "forward" })];
}
function On(o, i = {}) {
  const e = i.direction == "forward", t = Array.from(new ci(o, { ...i, includeSelf: e, sameIndent: !0, sameAttributes: "listItemId" }));
  return e ? t : t.reverse();
}
function Kw(o, i) {
  const e = new ci(o, { sameIndent: !0, sameAttributes: "listType", ...i }), t = new ci(o, { sameIndent: !0, sameAttributes: "listType", includeSelf: !0, direction: "forward", ...i });
  return [...Array.from(e).reverse(), ...t];
}
function un(o) {
  return !ci.first(o, { sameIndent: !0, sameAttributes: "listItemId" });
}
function Rp(o) {
  return !ci.first(o, { direction: "forward", sameIndent: !0, sameAttributes: "listItemId" });
}
function us(o, i = {}) {
  o = De(o);
  const e = i.withNested !== !1, t = /* @__PURE__ */ new Set();
  for (const n of o) for (const r of rr(n, { higherIndent: e })) t.add(r);
  return ro(t);
}
function yl(o) {
  o = De(o);
  const i = /* @__PURE__ */ new Set();
  for (const e of o) for (const t of Kw(e)) i.add(t);
  return ro(i);
}
function Ku(o, i) {
  const e = On(o, { direction: "forward" }), t = Qo.next();
  for (const n of e) i.setAttribute("listItemId", t, n);
  return e;
}
function Pd(o, i, e) {
  const t = {};
  for (const [r, s] of i.getAttributes()) r.startsWith("list") && (t[r] = s);
  const n = On(o, { direction: "forward" });
  for (const r of n) e.setAttributes(t, r);
  return n;
}
function Md(o, i, { expand: e, indentBy: t = 1 } = {}) {
  o = De(o);
  const n = e ? us(o) : o;
  for (const r of n) {
    const s = r.getAttribute("listIndent") + t;
    s < 0 ? xl(r, i) : i.setAttribute("listIndent", s, r);
  }
  return n;
}
function xl(o, i) {
  o = De(o);
  for (const e of o) e.is("element", "listItem") && i.rename(e, "paragraph");
  for (const e of o) for (const t of e.getAttributeKeys()) t.startsWith("list") && i.removeAttribute(t, e);
  return o;
}
function hs(o) {
  if (!o.length) return !1;
  const i = o[0].getAttribute("listItemId");
  return !!i && !o.some((e) => e.getAttribute("listItemId") != i);
}
function ro(o) {
  return Array.from(o).filter((i) => i.root.rootName !== "$graveyard").sort((i, e) => i.index - e.index);
}
function ms(o) {
  const i = o.document.selection.getSelectedElement();
  return i && o.schema.isObject(i) && o.schema.isBlock(i) ? i : null;
}
function xc(o, i) {
  return i.checkChild(o.parent, "listItem") && i.checkChild(o, "$text") && !i.isObject(o);
}
function $a(o) {
  return o == "numbered" || o == "customNumbered";
}
function RS(o, i, e) {
  return On(i, { direction: "forward" }).pop().index > o.index ? Pd(o, i, e) : [];
}
class zp extends G {
  constructor(e, t) {
    super(e);
    m(this, "_direction");
    this._direction = t;
  }
  refresh() {
    this.isEnabled = this._checkEnabled();
  }
  execute() {
    const e = this.editor.model, t = Bp(e.document.selection);
    e.change((n) => {
      const r = [];
      hs(t) && !un(t[0]) ? (this._direction == "forward" && r.push(...Md(t, n)), r.push(...Ku(t[0], n))) : this._direction == "forward" ? r.push(...Md(t, n, { expand: !0 })) : r.push(...function(s, a) {
        const l = us(s = De(s)), c = /* @__PURE__ */ new Set(), d = Math.min(...l.map((h) => h.getAttribute("listIndent"))), u = /* @__PURE__ */ new Map();
        for (const h of l) u.set(h, ci.first(h, { lowerIndent: !0 }));
        for (const h of l) {
          if (c.has(h)) continue;
          c.add(h);
          const g = h.getAttribute("listIndent") - 1;
          if (g < 0) xl(h, a);
          else {
            if (h.getAttribute("listIndent") == d) {
              const p = RS(h, u.get(h), a);
              for (const f of p) c.add(f);
              if (p.length) continue;
            }
            a.setAttribute("listIndent", g, h);
          }
        }
        return ro(c);
      }(t, n));
      for (const s of r) {
        if (!s.hasAttribute("listType")) continue;
        const a = ci.first(s, { sameIndent: !0 });
        a && n.setAttribute("listType", a.getAttribute("listType"), s);
      }
      this._fireAfterExecute(r);
    });
  }
  _fireAfterExecute(e) {
    this.fire("afterExecute", ro(new Set(e)));
  }
  _checkEnabled() {
    let e = Bp(this.editor.model.document.selection), t = e[0];
    if (!t) return !1;
    if (this._direction == "backward" || hs(e) && !un(e[0])) return !0;
    e = us(e), t = e[0];
    const n = ci.first(t, { sameIndent: !0 });
    return !!n && n.getAttribute("listType") == t.getAttribute("listType");
  }
}
function Bp(o) {
  const i = Array.from(o.getSelectedBlocks()), e = i.findIndex((t) => !Ve(t));
  return e != -1 && (i.length = e), i;
}
class Or extends G {
  constructor(e, t, n = {}) {
    super(e);
    m(this, "type");
    m(this, "_listWalkerOptions");
    this.type = t, this._listWalkerOptions = n.multiLevel ? { higherIndent: !0, lowerIndent: !0, sameAttributes: [] } : void 0;
  }
  refresh() {
    this.value = this._getValue(), this.isEnabled = this._checkEnabled();
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document, r = ms(t), s = Array.from(n.selection.getSelectedBlocks()).filter((l) => t.schema.checkAttribute(l, "listType") || xc(l, t.schema)), a = e.forceValue !== void 0 ? !e.forceValue : this.value;
    t.change((l) => {
      if (a) {
        const c = s[s.length - 1], d = On(c, { direction: "forward" }), u = [];
        d.length > 1 && u.push(...Ku(d[1], l)), u.push(...xl(s, l)), u.push(...function(h, g) {
          const p = [];
          let f = Number.POSITIVE_INFINITY;
          for (const { node: b } of new Is(h.nextSibling)) {
            const k = b.getAttribute("listIndent");
            if (k == 0) break;
            k < f && (f = k);
            const _ = k - f;
            g.setAttribute("listIndent", _, b), p.push(b);
          }
          return p;
        }(c, l)), this._fireAfterExecute(u);
      } else if ((r || n.selection.isCollapsed) && Ve(s[0])) {
        const c = Kw(r || s[0], this._listWalkerOptions);
        for (const d of c) l.setAttributes({ ...e.additionalAttributes, listType: this.type }, d);
        this._fireAfterExecute(c);
      } else {
        const c = [];
        for (const d of s) if (d.hasAttribute("listType")) for (const u of us(d, { withNested: !1 })) u.getAttribute("listType") != this.type && (l.setAttributes({ ...e.additionalAttributes, listType: this.type }, u), c.push(u));
        else !d.is("element", "listItem") && xc(d, t.schema) && l.rename(d, "listItem"), l.setAttributes({ ...e.additionalAttributes, listIndent: 0, listItemId: Qo.next(), listType: this.type }, d), c.push(d);
        this._fireAfterExecute(c);
      }
    });
  }
  _fireAfterExecute(e) {
    this.fire("afterExecute", ro(new Set(e)));
  }
  _getValue() {
    const e = this.editor.model.document.selection, t = Array.from(e.getSelectedBlocks());
    if (!t.length) return !1;
    for (const n of t) if (n.getAttribute("listType") != this.type) return !1;
    return !0;
  }
  _checkEnabled() {
    const e = this.editor.model, t = e.schema, n = e.document.selection, r = Array.from(n.getSelectedBlocks());
    if (!r.length) return !1;
    if (this.value) return !0;
    for (const s of r) if (t.checkAttribute(s, "listType") || xc(s, t)) return !0;
    return !1;
  }
}
class Dp extends G {
  constructor(e, t) {
    super(e);
    m(this, "_direction");
    this._direction = t;
  }
  refresh() {
    this.isEnabled = this._checkEnabled();
  }
  execute({ shouldMergeOnBlocksContentLevel: e = !1 } = {}) {
    const t = this.editor.model, n = t.document.selection, r = [];
    t.change((s) => {
      const { firstElement: a, lastElement: l } = this._getMergeSubjectElements(n, e), c = a.getAttribute("listIndent") || 0, d = l.getAttribute("listIndent"), u = l.getAttribute("listItemId");
      if (c != d) {
        const g = (h = l, Array.from(new ci(h, { direction: "forward", higherIndent: !0 })));
        r.push(...Md([l, ...g], s, { indentBy: c - d, expand: c < d }));
      }
      var h;
      if (e) {
        let g = n;
        n.isCollapsed && (g = s.createSelection(s.createRange(s.createPositionAt(a, "end"), s.createPositionAt(l, 0)))), t.deleteContent(g, { doNotResetEntireContent: n.isCollapsed });
        const p = g.getLastPosition().parent, f = p.nextSibling;
        r.push(p), f && f !== l && f.getAttribute("listItemId") == u && r.push(...Pd(f, p, s));
      } else r.push(...Pd(l, a, s));
      this._fireAfterExecute(r);
    });
  }
  _fireAfterExecute(e) {
    this.fire("afterExecute", ro(new Set(e)));
  }
  _checkEnabled() {
    const e = this.editor.model, t = e.document.selection, n = ms(e);
    if (t.isCollapsed || n) {
      const r = n || t.getFirstPosition().parent;
      if (!Ve(r)) return !1;
      const s = this._direction == "backward" ? r.previousSibling : r.nextSibling;
      if (!s || hs([r, s])) return !1;
    } else {
      const r = t.getLastPosition(), s = t.getFirstPosition();
      if (r.parent === s.parent || !Ve(r.parent)) return !1;
    }
    return !0;
  }
  _getMergeSubjectElements(e, t) {
    const n = ms(this.editor.model);
    let r, s;
    if (e.isCollapsed || n) {
      const a = n || e.getFirstPosition().parent, l = un(a);
      this._direction == "backward" ? (s = a, r = l && !t ? ci.first(a, { sameIndent: !0, lowerIndent: !0 }) : a.previousSibling) : (r = a, s = a.nextSibling);
    } else r = e.getFirstPosition().parent, s = e.getLastPosition().parent;
    return { firstElement: r, lastElement: s };
  }
}
class Fp extends G {
  constructor(e, t) {
    super(e);
    m(this, "_direction");
    this._direction = t;
  }
  refresh() {
    this.isEnabled = this._checkEnabled();
  }
  execute() {
    this.editor.model.change((e) => {
      const t = Ku(this._getStartBlock(), e);
      this._fireAfterExecute(t);
    });
  }
  _fireAfterExecute(e) {
    this.fire("afterExecute", ro(new Set(e)));
  }
  _checkEnabled() {
    const e = this.editor.model.document.selection, t = this._getStartBlock();
    return e.isCollapsed && Ve(t) && !un(t);
  }
  _getStartBlock() {
    const e = this.editor.model.document.selection.getFirstPosition().parent;
    return this._direction == "before" ? e : e.nextSibling;
  }
}
class zS extends A {
  static get pluginName() {
    return "ListUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  expandListBlocksToCompleteList(i) {
    return yl(i);
  }
  isFirstBlockOfListItem(i) {
    return un(i);
  }
  isListItemBlock(i) {
    return Ve(i);
  }
  expandListBlocksToCompleteItems(i, e = {}) {
    return us(i, e);
  }
  isNumberedListType(i) {
    return $a(i);
  }
}
function BS(o) {
  return o.is("element", "ol") || o.is("element", "ul");
}
function Vd(o) {
  return o.is("element", "li");
}
function DS(o, i, e, t = Qw(e, i)) {
  return o.createAttributeElement(Yw(e), null, { priority: 2 * i / 100 - 100, id: t });
}
function FS(o, i, e) {
  return o.createAttributeElement("li", null, { priority: (2 * i + 1) / 100 - 100, id: e });
}
function Yw(o) {
  return o == "numbered" || o == "customNumbered" ? "ol" : "ul";
}
function Qw(o, i) {
  return `list-${o}-${i}`;
}
function gi(o, i, e) {
  const t = o.nodeBefore;
  if (Ve(t)) {
    let n = t;
    for (const { node: r } of new Is(n, "backward"))
      if (n = r, e.has(n) || (e.add(n), i.has(t))) return;
    i.add(n);
  } else {
    const n = o.nodeAfter;
    Ve(n) && i.add(n);
  }
}
function jS() {
  return (o, i, e) => {
    const { writer: t, schema: n } = e;
    if (!i.modelRange) return;
    const r = Array.from(i.modelRange.getItems({ shallow: !0 })).filter((u) => n.checkAttribute(u, "listItemId"));
    if (!r.length) return;
    const s = Qo.next(), a = function(u) {
      let h = 0, g = u.parent;
      for (; g; ) {
        if (Vd(g)) h++;
        else {
          const p = g.previousSibling;
          p && Vd(p) && h++;
        }
        g = g.parent;
      }
      return h;
    }(i.viewItem);
    let l = i.viewItem.parent && i.viewItem.parent.is("element", "ol") ? "numbered" : "bulleted";
    const c = r[0].getAttribute("listType");
    c && (l = c);
    const d = { listItemId: s, listIndent: a, listType: l };
    for (const u of r) u.hasAttribute("listItemId") || t.setAttributes(d, u);
    r.length > 1 && r[1].getAttribute("listItemId") != d.listItemId && e.keepEmptyElement(r[0]);
  };
}
function jp(o, i, e, { dataPipeline: t } = {}) {
  const n = /* @__PURE__ */ function(r) {
    return (s, a) => {
      const l = [];
      for (const c of r) s.hasAttribute(c) && l.push(`attribute:${c}`);
      return !!l.every((c) => a.test(s, c) !== !1) && (l.forEach((c) => a.consume(s, c)), !0);
    };
  }(o);
  return (r, s, a) => {
    const { writer: l, mapper: c, consumable: d } = a, u = s.item;
    if (!o.includes(s.attributeKey) || !n(u, d)) return;
    const h = function(p, f, b) {
      const k = b.createRangeOn(p);
      return f.toViewRange(k).getTrimmed().end.nodeBefore;
    }(u, c, e);
    Jw(h, l, c), function(p, f) {
      let b = p.parent;
      for (; b.is("attributeElement") && ["ul", "ol", "li"].includes(b.name); ) {
        const k = b.parent;
        f.unwrap(f.createRangeOn(p), b), b = k;
      }
    }(h, l);
    const g = function(p, f, b, k, { dataPipeline: _ }) {
      let w = k.createRangeOn(f);
      if (!un(p)) return w;
      for (const y of b) {
        if (y.scope != "itemMarker") continue;
        const x = y.createElement(k, p, { dataPipeline: _ });
        if (!x || (k.setCustomProperty("listItemMarker", !0, x), y.canInjectMarkerIntoElement && y.canInjectMarkerIntoElement(p) ? k.insert(k.createPositionAt(f, 0), x) : (k.insert(w.start, x), w = k.createRange(k.createPositionBefore(x), k.createPositionAfter(f))), !y.createWrapperElement || !y.canWrapElement)) continue;
        const C = y.createWrapperElement(k, p, { dataPipeline: _ });
        k.setCustomProperty("listItemWrapper", !0, C), y.canWrapElement(p) ? w = k.wrap(w, C) : (w = k.wrap(k.createRangeOn(x), C), w = k.createRange(w.start, k.createPositionAfter(f)));
      }
      return w;
    }(u, h, i, l, { dataPipeline: t });
    (function(p, f, b, k) {
      if (!p.hasAttribute("listIndent")) return;
      const _ = p.getAttribute("listIndent");
      let w = p;
      for (let y = _; y >= 0; y--) {
        const x = FS(k, y, w.getAttribute("listItemId")), C = DS(k, y, w.getAttribute("listType"));
        for (const S of b) S.scope != "list" && S.scope != "item" || !w.hasAttribute(S.attributeName) || S.setAttributeOnDowncast(k, w.getAttribute(S.attributeName), S.scope == "list" ? C : x);
        if (f = k.wrap(f, x), f = k.wrap(f, C), y == 0 || (w = ci.first(w, { lowerIndent: !0 }), !w)) break;
      }
    })(u, g, i, l);
  };
}
function Hp(o, { dataPipeline: i } = {}) {
  return (e, { writer: t }) => {
    if (!Xw(e, o)) return null;
    if (!i) return t.createContainerElement("span", { class: "ck-list-bogus-paragraph" });
    const n = t.createContainerElement("p");
    return t.setCustomProperty("dataPipeline:transparentRendering", !0, n), n;
  };
}
function Jw(o, i, e) {
  for (; o.parent.is("attributeElement") && o.parent.getCustomProperty("listItemWrapper"); ) i.unwrap(i.createRangeOn(o), o.parent);
  const t = [];
  n(i.createPositionBefore(o).getWalker({ direction: "backward" })), n(i.createRangeIn(o).getWalker());
  for (const r of t) i.remove(r);
  function n(r) {
    for (const { item: s } of r) {
      if (s.is("element") && e.toModelElement(s)) break;
      s.is("element") && s.getCustomProperty("listItemMarker") && t.push(s);
    }
  }
}
function Xw(o, i, e = rr(o)) {
  if (!Ve(o)) return !1;
  for (const t of o.getAttributeKeys()) if (!t.startsWith("selection:") && t != "htmlEmptyBlock" && !i.includes(t)) return !1;
  return e.length < 2;
}
const Ys = ["listType", "listIndent", "listItemId"];
class gs extends A {
  constructor(e) {
    super(e);
    m(this, "_downcastStrategies", []);
    e.config.define("list.multiBlock", !0);
  }
  static get pluginName() {
    return "ListEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [_l, Di, zS, Lt];
  }
  init() {
    const e = this.editor, t = e.model, n = e.config.get("list.multiBlock");
    if (e.plugins.has("LegacyListEditing")) throw new v("list-feature-conflict", this, { conflictPlugin: "LegacyListEditing" });
    t.schema.register("$listItem", { allowAttributes: Ys }), n ? (t.schema.extend("$container", { allowAttributesOf: "$listItem" }), t.schema.extend("$block", { allowAttributesOf: "$listItem" }), t.schema.extend("$blockObject", { allowAttributesOf: "$listItem" })) : t.schema.register("listItem", { inheritAllFrom: "$block", allowAttributesOf: "$listItem" });
    for (const r of Ys) t.schema.setAttributeProperties(r, { copyOnReplace: !0 });
    e.commands.add("numberedList", new Or(e, "numbered")), e.commands.add("bulletedList", new Or(e, "bulleted")), e.commands.add("customNumberedList", new Or(e, "customNumbered", { multiLevel: !0 })), e.commands.add("customBulletedList", new Or(e, "customBulleted", { multiLevel: !0 })), e.commands.add("indentList", new zp(e, "forward")), e.commands.add("outdentList", new zp(e, "backward")), e.commands.add("splitListItemBefore", new Fp(e, "before")), e.commands.add("splitListItemAfter", new Fp(e, "after")), n && (e.commands.add("mergeListItemBackward", new Dp(e, "backward")), e.commands.add("mergeListItemForward", new Dp(e, "forward"))), this._setupDeleteIntegration(), this._setupEnterIntegration(), this._setupTabIntegration(), this._setupClipboardIntegration(), this._setupAccessibilityIntegration();
  }
  afterInit() {
    const e = this.editor.commands, t = e.get("indent"), n = e.get("outdent");
    t && t.registerChildCommand(e.get("indentList"), { priority: "high" }), n && n.registerChildCommand(e.get("outdentList"), { priority: "lowest" }), this._setupModelPostFixing(), this._setupConversion();
  }
  registerDowncastStrategy(e) {
    this._downcastStrategies.push(e);
  }
  getListAttributeNames() {
    return [...Ys, ...this._downcastStrategies.map((e) => e.attributeName)];
  }
  _setupDeleteIntegration() {
    const e = this.editor, t = e.commands.get("mergeListItemBackward"), n = e.commands.get("mergeListItemForward");
    this.listenTo(e.editing.view.document, "delete", (r, s) => {
      const a = e.model.document.selection;
      ms(e.model) || e.model.change(() => {
        const l = a.getFirstPosition();
        if (a.isCollapsed && s.direction == "backward") {
          if (!l.isAtStart) return;
          const c = l.parent;
          if (!Ve(c)) return;
          if (ci.first(c, { sameAttributes: "listType", sameIndent: !0 }) || c.getAttribute("listIndent") !== 0) {
            if (!t || !t.isEnabled) return;
            t.execute({ shouldMergeOnBlocksContentLevel: $p(e.model, "backward") });
          } else Rp(c) || e.execute("splitListItemAfter"), e.execute("outdentList");
          s.preventDefault(), r.stop();
        } else {
          if (a.isCollapsed && !a.getLastPosition().isAtEnd || !n || !n.isEnabled) return;
          n.execute({ shouldMergeOnBlocksContentLevel: $p(e.model, "forward") }), s.preventDefault(), r.stop();
        }
      });
    }, { context: "li" });
  }
  _setupEnterIntegration() {
    const e = this.editor, t = e.model, n = e.commands, r = n.get("enter");
    this.listenTo(e.editing.view.document, "enter", (s, a) => {
      const l = t.document, c = l.selection.getFirstPosition().parent;
      if (l.selection.isCollapsed && Ve(c) && c.isEmpty && !a.isSoft) {
        const d = un(c), u = Rp(c);
        d && u ? (e.execute("outdentList"), a.preventDefault(), s.stop()) : d && !u ? (e.execute("splitListItemAfter"), a.preventDefault(), s.stop()) : u && (e.execute("splitListItemBefore"), a.preventDefault(), s.stop());
      }
    }, { context: "li" }), this.listenTo(r, "afterExecute", () => {
      const s = n.get("splitListItemBefore");
      s.refresh(), s.isEnabled && rr(e.model.document.selection.getLastPosition().parent).length === 2 && s.execute();
    });
  }
  _setupTabIntegration() {
    const e = this.editor;
    this.listenTo(e.editing.view.document, "tab", (t, n) => {
      const r = n.shiftKey ? "outdentList" : "indentList";
      this.editor.commands.get(r).isEnabled && (e.execute(r), n.stopPropagation(), n.preventDefault(), t.stop());
    }, { context: "li" });
  }
  _setupConversion() {
    const e = this.editor, t = e.model, n = this.getListAttributeNames(), r = e.config.get("list.multiBlock"), s = r ? "paragraph" : "listItem";
    e.conversion.for("upcast").elementToElement({ view: "li", model: (d, { writer: u }) => u.createElement(s, { listType: "" }) }).elementToElement({ view: "p", model: (d, { writer: u }) => d.parent && d.parent.is("element", "li") ? u.createElement(s, { listType: "" }) : null, converterPriority: "high" }).add((d) => {
      d.on("element:li", jS());
    }), r || e.conversion.for("downcast").elementToElement({ model: "listItem", view: "p" }), e.conversion.for("editingDowncast").elementToElement({ model: s, view: Hp(n), converterPriority: "high" }).add((d) => {
      var u;
      d.on("attribute", jp(n, this._downcastStrategies, t)), d.on("remove", (u = t.schema, (h, g, p) => {
        const { writer: f, mapper: b } = p, k = h.name.split(":")[1];
        if (!u.checkAttribute(k, "listItemId")) return;
        const _ = b.toViewPosition(g.position), w = g.position.getShiftedBy(g.length), y = b.toViewPosition(w, { isPhantom: !0 }), x = f.createRange(_, y).getTrimmed().end.nodeBefore;
        x && Jw(x, f, b);
      }));
    }), e.conversion.for("dataDowncast").elementToElement({ model: s, view: Hp(n, { dataPipeline: !0 }), converterPriority: "high" }).add((d) => {
      d.on("attribute", jp(n, this._downcastStrategies, t, { dataPipeline: !0 }));
    });
    const a = (l = this._downcastStrategies, c = e.editing.view, (d, u) => {
      if (u.modelPosition.offset > 0) return;
      const h = u.modelPosition.parent;
      if (!Ve(h) || !l.some((k) => k.scope == "itemMarker" && k.canInjectMarkerIntoElement && k.canInjectMarkerIntoElement(h))) return;
      const g = u.mapper.toViewElement(h), p = c.createRangeIn(g), f = p.getWalker();
      let b = p.start;
      for (const { item: k } of f) {
        if (k.is("element") && u.mapper.toModelElement(k) || k.is("$textProxy")) break;
        k.is("element") && k.getCustomProperty("listItemMarker") && (b = c.createPositionAfter(k), f.skip(({ previousPosition: _ }) => !_.isEqual(b)));
      }
      u.viewPosition = b;
    });
    var l, c;
    e.editing.mapper.on("modelToViewPosition", a), e.data.mapper.on("modelToViewPosition", a), this.listenTo(t.document, "change:data", /* @__PURE__ */ function(d, u, h, g) {
      return () => {
        const k = d.document.differ.getChanges(), _ = [], w = /* @__PURE__ */ new Set(), y = /* @__PURE__ */ new Set(), x = /* @__PURE__ */ new Set();
        for (const C of k) if (C.type == "insert" && C.name != "$text") gi(C.position, w, x), C.attributes.has("listItemId") ? y.add(C.position.nodeAfter) : gi(C.position.getShiftedBy(C.length), w, x);
        else if (C.type == "remove" && C.attributes.has("listItemId")) gi(C.position, w, x);
        else if (C.type == "attribute") {
          const S = C.range.start.nodeAfter;
          h.includes(C.attributeKey) ? (gi(C.range.start, w, x), C.attributeNewValue === null ? (gi(C.range.start.getShiftedBy(1), w, x), f(S) && _.push(S)) : y.add(S)) : Ve(S) && f(S) && _.push(S);
        }
        for (const C of w.values()) _.push(...p(C, y));
        for (const C of new Set(_)) u.reconvertItem(C);
      };
      function p(k, _) {
        const w = [], y = /* @__PURE__ */ new Set(), x = [];
        for (const { node: C, previous: S } of new Is(k)) {
          if (y.has(C)) continue;
          const L = C.getAttribute("listIndent");
          S && L < S.getAttribute("listIndent") && (x.length = L + 1), x[L] = Object.fromEntries(Array.from(C.getAttributes()).filter(([Y]) => h.includes(Y)));
          const W = On(C, { direction: "forward" });
          for (const Y of W) y.add(Y), (f(Y, W) || b(Y, x, _)) && w.push(Y);
        }
        return w;
      }
      function f(k, _) {
        const w = u.mapper.toViewElement(k);
        if (!w) return !1;
        if (g.fire("checkElement", { modelElement: k, viewElement: w })) return !0;
        if (!k.is("element", "paragraph") && !k.is("element", "listItem")) return !1;
        const y = Xw(k, h, _);
        return !(!y || !w.is("element", "p")) || !(y || !w.is("element", "span"));
      }
      function b(k, _, w) {
        if (w.has(k)) return !1;
        const y = u.mapper.toViewElement(k);
        let x = _.length - 1;
        for (let C = y.parent; !C.is("editableElement"); C = C.parent) {
          const S = Vd(C), L = BS(C);
          if (!L && !S) continue;
          const W = "checkAttributes:" + (S ? "item" : "list");
          if (g.fire(W, { viewElement: C, modelAttributes: _[x] })) break;
          if (L && (x--, x < 0)) return !1;
        }
        return !0;
      }
    }(t, e.editing, n, this), { priority: "high" }), this.on("checkAttributes:item", (d, { viewElement: u, modelAttributes: h }) => {
      u.id != h.listItemId && (d.return = !0, d.stop());
    }), this.on("checkAttributes:list", (d, { viewElement: u, modelAttributes: h }) => {
      u.name == Yw(h.listType) && u.id == Qw(h.listType, h.listIndent) || (d.return = !0, d.stop());
    });
  }
  _setupModelPostFixing() {
    const e = this.editor.model, t = this.getListAttributeNames();
    e.document.registerPostFixer((n) => function(r, s, a, l) {
      const c = r.document.differ.getChanges(), d = /* @__PURE__ */ new Set(), u = /* @__PURE__ */ new Set(), h = l.editor.config.get("list.multiBlock");
      let g = !1;
      for (const f of c) {
        if (f.type == "insert" && f.name != "$text") {
          const b = f.position.nodeAfter;
          if (!r.schema.checkAttribute(b, "listItemId")) for (const k of Array.from(b.getAttributeKeys())) a.includes(k) && (s.removeAttribute(k, b), g = !0);
          gi(f.position, u, d), f.attributes.has("listItemId") || gi(f.position.getShiftedBy(f.length), u, d);
          for (const { item: k, previousPosition: _ } of r.createRangeIn(b)) Ve(k) && gi(_, u, d);
        } else f.type == "remove" ? gi(f.position, u, d) : f.type == "attribute" && a.includes(f.attributeKey) && (gi(f.range.start, u, d), f.attributeNewValue === null && gi(f.range.start.getShiftedBy(1), u, d));
        if (!h && f.type == "attribute" && Ys.includes(f.attributeKey)) {
          const b = f.range.start.nodeAfter;
          f.attributeNewValue === null && b && b.is("element", "listItem") ? (s.rename(b, "paragraph"), g = !0) : f.attributeOldValue === null && b && b.is("element") && b.name != "listItem" && (s.rename(b, "listItem"), g = !0);
        }
      }
      const p = /* @__PURE__ */ new Set();
      for (const f of u.values()) g = l.fire("postFixer", { listNodes: new NS(f), listHead: f, writer: s, seenIds: p }) || g;
      return g;
    }(e, n, t, this)), this.on("postFixer", (n, { listNodes: r, writer: s }) => {
      n.return = function(a, l) {
        let c = 0, d = -1, u = null, h = !1;
        for (const { node: g } of a) {
          const p = g.getAttribute("listIndent");
          if (p > c) {
            let f;
            u === null ? (u = p - c, f = c) : (u > p && (u = p), f = p - u), f > d + 1 && (f = d + 1), l.setAttribute("listIndent", f, g), h = !0, d = f;
          } else u = null, c = p + 1, d = p;
        }
        return h;
      }(r, s) || n.return;
    }, { priority: "high" }), this.on("postFixer", (n, { listNodes: r, writer: s, seenIds: a }) => {
      n.return = function(l, c, d) {
        const u = /* @__PURE__ */ new Set();
        let h = !1;
        for (const { node: g } of l) {
          if (u.has(g)) continue;
          let p = g.getAttribute("listType"), f = g.getAttribute("listItemId");
          if (c.has(f) && (f = Qo.next()), c.add(f), g.is("element", "listItem")) g.getAttribute("listItemId") != f && (d.setAttribute("listItemId", f, g), h = !0);
          else for (const b of On(g, { direction: "forward" })) u.add(b), b.getAttribute("listType") != p && (f = Qo.next(), p = b.getAttribute("listType")), b.getAttribute("listItemId") != f && (d.setAttribute("listItemId", f, b), h = !0);
        }
        return h;
      }(r, a, s) || n.return;
    }, { priority: "high" });
  }
  _setupClipboardIntegration() {
    const e = this.editor.model, t = this.editor.plugins.get("ClipboardPipeline");
    this.listenTo(e, "insertContent", /* @__PURE__ */ function(n) {
      return (r, [s, a]) => {
        const l = s.is("documentFragment") ? Array.from(s.getChildren()) : [s];
        if (!l.length) return;
        const c = (a ? n.createSelection(a) : n.document.selection).getFirstPosition();
        let d;
        if (Ve(c.parent)) d = c.parent;
        else {
          if (!Ve(c.nodeBefore) || !Ve(c.nodeAfter)) return;
          d = c.nodeBefore;
        }
        n.change((u) => {
          const h = d.getAttribute("listType"), g = d.getAttribute("listIndent"), p = l[0].getAttribute("listIndent") || 0, f = Math.max(g - p, 0);
          for (const b of l) {
            const k = Ve(b);
            d.is("element", "listItem") && b.is("element", "paragraph") && u.rename(b, "listItem"), u.setAttributes({ listIndent: (k ? b.getAttribute("listIndent") : 0) + f, listItemId: k ? b.getAttribute("listItemId") : Qo.next(), listType: h }, b);
          }
        });
      };
    }(e), { priority: "high" }), this.listenTo(t, "outputTransformation", (n, r) => {
      e.change((s) => {
        const a = Array.from(r.content.getChildren()), l = a[a.length - 1];
        if (a.length > 1 && l.is("element") && l.isEmpty && a.slice(0, -1).every(Ve) && s.remove(l), r.method == "copy" || r.method == "cut") {
          const c = Array.from(r.content.getChildren());
          hs(c) && xl(c, s);
        }
      });
    });
  }
  _setupAccessibilityIntegration() {
    const e = this.editor, t = e.t;
    e.accessibility.addKeystrokeInfoGroup({ id: "list", label: t("Keystrokes that can be used in a list"), keystrokes: [{ label: t("Increase list item indent"), keystroke: "Tab" }, { label: t("Decrease list item indent"), keystroke: "Shift+Tab" }] });
  }
}
function $p(o, i) {
  const e = o.document.selection;
  if (!e.isCollapsed) return !ms(o);
  if (i === "forward") return !0;
  const t = e.getFirstPosition().parent, n = t.previousSibling;
  return !o.schema.isObject(n) && (!!n.isEmpty || hs([t, n]));
}
function Ld(o, i, e, t) {
  o.ui.componentFactory.add(i, () => {
    const n = Up(j, o, i, e, t);
    return n.set({ tooltip: !0, isToggleable: !0 }), n;
  }), o.ui.componentFactory.add(`menuBar:${i}`, () => {
    const n = Up(Ie, o, i, e, t);
    return n.set({ role: "menuitemcheckbox", isToggleable: !0 }), n;
  });
}
function Up(o, i, e, t, n) {
  const r = i.commands.get(e), s = new o(i.locale);
  return s.set({ label: t, icon: n }), s.bind("isOn", "isEnabled").to(r, "value", "isEnabled"), s.on("execute", () => {
    i.execute(e), i.editing.view.focus();
  }), s;
}
class HS extends A {
  static get pluginName() {
    return "ListUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor.t;
    this.editor.ui.componentFactory.has("numberedList") || Ld(this.editor, "numberedList", i("Numbered List"), Ou), this.editor.ui.componentFactory.has("bulletedList") || Ld(this.editor, "bulletedList", i("Bulleted List"), Vu);
  }
}
class $S extends A {
  static get requires() {
    return [gs, HS];
  }
  static get pluginName() {
    return "List";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class US extends G {
  refresh() {
    const i = this._getValue();
    this.value = i, this.isEnabled = i != null;
  }
  execute({ startIndex: i = 1 } = {}) {
    const e = this.editor.model, t = e.document;
    let n = Array.from(t.selection.getSelectedBlocks()).filter((r) => Ve(r) && $a(r.getAttribute("listType")));
    n = yl(n), e.change((r) => {
      for (const s of n) r.setAttribute("listStart", i >= 0 ? i : 1, s);
    });
  }
  _getValue() {
    const i = Te(this.editor.model.document.selection.getSelectedBlocks());
    return i && Ve(i) && $a(i.getAttribute("listType")) ? i.getAttribute("listStart") : null;
  }
}
const e0 = {}, t0 = {}, i0 = {}, n0 = [{ listStyle: "disc", typeAttribute: "disc", listType: "bulleted" }, { listStyle: "circle", typeAttribute: "circle", listType: "bulleted" }, { listStyle: "square", typeAttribute: "square", listType: "bulleted" }, { listStyle: "decimal", typeAttribute: "1", listType: "numbered" }, { listStyle: "decimal-leading-zero", typeAttribute: null, listType: "numbered" }, { listStyle: "lower-roman", typeAttribute: "i", listType: "numbered" }, { listStyle: "upper-roman", typeAttribute: "I", listType: "numbered" }, { listStyle: "lower-alpha", typeAttribute: "a", listType: "numbered" }, { listStyle: "upper-alpha", typeAttribute: "A", listType: "numbered" }, { listStyle: "lower-latin", typeAttribute: "a", listType: "numbered" }, { listStyle: "upper-latin", typeAttribute: "A", listType: "numbered" }];
for (const { listStyle: o, typeAttribute: i, listType: e } of n0) e0[o] = e, t0[o] = i, i && (i0[i] = o);
function o0() {
  return n0.map((o) => o.listStyle);
}
function Yu(o) {
  return e0[o] || null;
}
function r0(o) {
  return i0[o] || null;
}
function Od(o) {
  return t0[o] || null;
}
function qS(o) {
  switch (o) {
    case "lower-alpha":
      return "lower-latin";
    case "upper-alpha":
      return "upper-latin";
    default:
      return o;
  }
}
class WS extends G {
  constructor(e, t, n) {
    super(e);
    m(this, "defaultType");
    m(this, "_supportedTypes");
    this.defaultType = t, this._supportedTypes = n;
  }
  refresh() {
    this.value = this._getValue(), this.isEnabled = this._checkEnabled();
  }
  execute(e = {}) {
    const t = this.editor.model, n = t.document;
    t.change((r) => {
      this._tryToConvertItemsToList(e);
      let s = Array.from(n.selection.getSelectedBlocks()).filter((a) => a.hasAttribute("listType"));
      if (s.length) {
        s = yl(s);
        for (const a of s) r.setAttribute("listStyle", e.type || this.defaultType, a);
      }
    });
  }
  isStyleTypeSupported(e) {
    return !this._supportedTypes || this._supportedTypes.includes(e);
  }
  _getValue() {
    const e = Te(this.editor.model.document.selection.getSelectedBlocks());
    return Ve(e) ? e.getAttribute("listStyle") : null;
  }
  _checkEnabled() {
    const e = this.editor, t = e.commands.get("numberedList"), n = e.commands.get("bulletedList");
    return t.isEnabled || n.isEnabled;
  }
  _tryToConvertItemsToList(e) {
    if (!e.type) return;
    const t = Yu(e.type);
    if (!t) return;
    const n = this.editor, r = `${t}List`;
    n.commands.get(r).value || n.execute(r);
  }
}
class GS extends G {
  refresh() {
    const i = this._getValue();
    this.value = i, this.isEnabled = i != null;
  }
  execute(i = {}) {
    const e = this.editor.model, t = e.document;
    let n = Array.from(t.selection.getSelectedBlocks()).filter((r) => Ve(r) && r.getAttribute("listType") == "numbered");
    n = yl(n), e.change((r) => {
      for (const s of n) r.setAttribute("listReversed", !!i.reversed, s);
    });
  }
  _getValue() {
    const i = Te(this.editor.model.document.selection.getSelectedBlocks());
    return Ve(i) && i.getAttribute("listType") == "numbered" ? i.getAttribute("listReversed") : null;
  }
}
function qp(o) {
  return (i, e, t) => {
    const { writer: n, schema: r, consumable: s } = t;
    if (s.test(e.viewItem, o.viewConsumables) === !1) return;
    e.modelRange || Object.assign(e, t.convertChildren(e.viewItem, e.modelCursor));
    let a = !1;
    for (const l of e.modelRange.getItems({ shallow: !0 })) r.checkAttribute(l, o.attributeName) && o.appliesToListItem(l) && (l.hasAttribute(o.attributeName) || (n.setAttribute(o.attributeName, o.getAttributeOnUpcast(e.viewItem), l), a = !0));
    a && s.consume(e.viewItem, o.viewConsumables);
  };
}
class ZS extends A {
  static get pluginName() {
    return "ListPropertiesUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  getAllSupportedStyleTypes() {
    return o0();
  }
  getListTypeFromListStyleType(i) {
    return Yu(i);
  }
  getListStyleTypeFromTypeAttribute(i) {
    return r0(i);
  }
  getTypeAttributeFromListStyleType(i) {
    return Od(i);
  }
}
function s0(o) {
  const { startIndex: i, reversed: e, styles: t } = o;
  return { styles: KS(t), startIndex: i || !1, reversed: e || !1 };
}
function KS(o) {
  const i = { listTypes: ["bulleted", "numbered"], useAttribute: !1 };
  return o === !0 || (o ? Array.isArray(o) || typeof o == "string" ? i.listTypes = De(o) : (i.listTypes = o.listTypes ? De(o.listTypes) : i.listTypes, i.useAttribute = !!o.useAttribute, o.listStyleTypes && (i.listStyleTypes = o.listStyleTypes)) : i.listTypes = []), i;
}
const Sr = "default";
class YS extends A {
  static get requires() {
    return [gs, ZS];
  }
  static get pluginName() {
    return "ListPropertiesEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  constructor(i) {
    super(i), i.config.define("list.properties", { styles: !0, startIndex: !1, reversed: !1 });
  }
  init() {
    const i = this.editor, e = i.model, t = i.plugins.get(gs), n = function(r) {
      const s = [], a = s0(r);
      if (r.styles) {
        const l = a.styles.useAttribute;
        s.push({ attributeName: "listStyle", defaultValue: Sr, viewConsumables: { styles: "list-style-type" }, addCommand(c) {
          let d = o0();
          l && (d = d.filter((u) => !!Od(u))), c.commands.add("listStyle", new WS(c, Sr, d));
        }, appliesToListItem: (c) => c.getAttribute("listType") == "numbered" || c.getAttribute("listType") == "bulleted", hasValidAttribute(c) {
          if (!this.appliesToListItem(c)) return !c.hasAttribute("listStyle");
          if (!c.hasAttribute("listStyle")) return !1;
          const d = c.getAttribute("listStyle");
          return d == Sr || Yu(d) == c.getAttribute("listType");
        }, setAttributeOnDowncast(c, d, u) {
          if (d && d !== Sr) {
            if (!l) return void c.setStyle("list-style-type", d, u);
            {
              const h = Od(d);
              if (h) return void c.setAttribute("type", h, u);
            }
          }
          c.removeStyle("list-style-type", u), c.removeAttribute("type", u);
        }, getAttributeOnUpcast(c) {
          const d = c.getStyle("list-style-type");
          if (d) return qS(d);
          const u = c.getAttribute("type");
          return u ? r0(u) : Sr;
        } });
      }
      return r.reversed && s.push({ attributeName: "listReversed", defaultValue: !1, viewConsumables: { attributes: "reversed" }, addCommand(l) {
        l.commands.add("listReversed", new GS(l));
      }, appliesToListItem: (l) => l.getAttribute("listType") == "numbered", hasValidAttribute(l) {
        return this.appliesToListItem(l) == l.hasAttribute("listReversed");
      }, setAttributeOnDowncast(l, c, d) {
        c ? l.setAttribute("reversed", "reversed", d) : l.removeAttribute("reversed", d);
      }, getAttributeOnUpcast: (l) => l.hasAttribute("reversed") }), r.startIndex && s.push({ attributeName: "listStart", defaultValue: 1, viewConsumables: { attributes: "start" }, addCommand(l) {
        l.commands.add("listStart", new US(l));
      }, appliesToListItem: (l) => $a(l.getAttribute("listType")), hasValidAttribute(l) {
        return this.appliesToListItem(l) == l.hasAttribute("listStart");
      }, setAttributeOnDowncast(l, c, d) {
        c == 0 || c > 1 ? l.setAttribute("start", c, d) : l.removeAttribute("start", d);
      }, getAttributeOnUpcast(l) {
        const c = l.getAttribute("start");
        return c >= 0 ? c : 1;
      } }), s;
    }(i.config.get("list.properties"));
    for (const r of n) r.addCommand(i), e.schema.extend("$listItem", { allowAttributes: r.attributeName }), t.registerDowncastStrategy({ scope: "list", attributeName: r.attributeName, setAttributeOnDowncast(s, a, l) {
      r.setAttributeOnDowncast(s, a, l);
    } });
    i.conversion.for("upcast").add((r) => {
      for (const s of n) r.on("element:ol", qp(s)), r.on("element:ul", qp(s));
    }), t.on("checkAttributes:list", (r, { viewElement: s, modelAttributes: a }) => {
      for (const l of n) l.getAttributeOnUpcast(s) != a[l.attributeName] && (r.return = !0, r.stop());
    }), this.listenTo(i.commands.get("indentList"), "afterExecute", (r, s) => {
      e.change((a) => {
        for (const l of s) for (const c of n) c.appliesToListItem(l) && a.setAttribute(c.attributeName, c.defaultValue, l);
      });
    }), t.on("postFixer", (r, { listNodes: s, writer: a }) => {
      for (const { node: l } of s) for (const c of n) c.hasValidAttribute(l) || (c.appliesToListItem(l) ? a.setAttribute(c.attributeName, c.defaultValue, l) : a.removeAttribute(c.attributeName, l), r.return = !0);
    }), t.on("postFixer", (r, { listNodes: s, writer: a }) => {
      for (const { node: l, previousNodeInList: c } of s) if (c && c.getAttribute("listType") == l.getAttribute("listType")) for (const d of n) {
        const { attributeName: u } = d;
        if (!d.appliesToListItem(l)) continue;
        const h = c.getAttribute(u);
        l.getAttribute(u) != h && (a.setAttribute(u, h, l), r.return = !0);
      }
    });
  }
}
class a0 extends N {
  constructor(e, { enabledProperties: t, styleButtonViews: n, styleGridAriaLabel: r }) {
    super(e);
    m(this, "children");
    m(this, "stylesView", null);
    m(this, "additionalPropertiesCollapsibleView", null);
    m(this, "startIndexFieldView", null);
    m(this, "reversedSwitchButtonView", null);
    m(this, "focusTracker", new fe());
    m(this, "keystrokes", new Le());
    m(this, "focusables", new It());
    m(this, "focusCycler");
    const s = ["ck", "ck-list-properties"];
    this.children = this.createCollection(), this.focusCycler = new ut({ focusables: this.focusables, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), n && n.length ? (this.stylesView = this._createStylesView(n, r), this.children.add(this.stylesView)) : s.push("ck-list-properties_without-styles"), (t.startIndex || t.reversed) && (this._addNumberedListPropertyViews(t), s.push("ck-list-properties_with-numbered-properties")), this.setTemplate({ tag: "div", attributes: { class: s }, children: this.children });
  }
  render() {
    if (super.render(), this.stylesView) {
      this.focusables.add(this.stylesView), this.focusTracker.add(this.stylesView.element), (this.startIndexFieldView || this.reversedSwitchButtonView) && (this.focusables.add(this.children.last.buttonView), this.focusTracker.add(this.children.last.buttonView.element));
      for (const e of this.stylesView.children) this.stylesView.focusTracker.add(e.element);
      Cs({ keystrokeHandler: this.stylesView.keystrokes, focusTracker: this.stylesView.focusTracker, gridItems: this.stylesView.children, numberOfColumns: () => z.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length, uiLanguageDirection: this.locale && this.locale.uiLanguageDirection });
    }
    if (this.startIndexFieldView) {
      this.focusables.add(this.startIndexFieldView), this.focusTracker.add(this.startIndexFieldView.element);
      const e = (t) => t.stopPropagation();
      this.keystrokes.set("arrowright", e), this.keystrokes.set("arrowleft", e), this.keystrokes.set("arrowup", e), this.keystrokes.set("arrowdown", e);
    }
    this.reversedSwitchButtonView && (this.focusables.add(this.reversedSwitchButtonView), this.focusTracker.add(this.reversedSwitchButtonView.element)), this.keystrokes.listenTo(this.element);
  }
  focus() {
    this.focusCycler.focusFirst();
  }
  focusLast() {
    this.focusCycler.focusLast();
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  _createStylesView(e, t) {
    const n = new N(this.locale);
    return n.children = n.createCollection(), n.children.addMany(e), n.setTemplate({ tag: "div", attributes: { "aria-label": t, class: ["ck", "ck-list-styles-list"] }, children: n.children }), n.children.delegate("execute").to(this), n.focus = function() {
      for (const r of this.children) if (r instanceof j && r.isOn) return void r.focus();
      this.children.first.focus();
    }, n.focusTracker = new fe(), n.keystrokes = new Le(), n.render(), n.keystrokes.listenTo(n.element), n;
  }
  _addNumberedListPropertyViews(e) {
    const t = this.locale.t, n = [];
    e.startIndex && (this.startIndexFieldView = this._createStartIndexField(), n.push(this.startIndexFieldView)), e.reversed && (this.reversedSwitchButtonView = this._createReversedSwitchButton(), n.push(this.reversedSwitchButtonView)), this.stylesView ? (this.additionalPropertiesCollapsibleView = new z_(this.locale, n), this.additionalPropertiesCollapsibleView.set({ label: t("List properties"), isCollapsed: !0 }), this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n, "isEnabled", (...r) => r.some((s) => s)), this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled", (r, s, a) => {
      a || (this.additionalPropertiesCollapsibleView.isCollapsed = !0);
    }), this.children.add(this.additionalPropertiesCollapsibleView)) : this.children.addMany(n);
  }
  _createStartIndexField() {
    const e = this.locale.t, t = new Ri(this.locale, G_);
    return t.set({ label: e("Start at"), class: "ck-numbered-list-properties__start-index" }), t.fieldView.set({ min: 0, step: 1, value: 1, inputMode: "numeric" }), t.fieldView.on("input", () => {
      const n = t.fieldView.element, r = n.valueAsNumber;
      Number.isNaN(r) ? t.errorText = e("Invalid start index value.") : n.checkValidity() ? this.fire("listStart", { startIndex: r }) : t.errorText = e("Start index must be greater than 0.");
    }), t;
  }
  _createReversedSwitchButton() {
    const e = this.locale.t, t = new As(this.locale);
    return t.set({ withText: !0, label: e("Reversed order"), class: "ck-numbered-list-properties__reversed-order" }), t.delegate("execute").to(this, "listReversed"), t;
  }
}
class QS extends A {
  static get pluginName() {
    return "ListPropertiesUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.locale.t, t = i.config.get("list.properties"), n = s0(t), r = n.styles.listTypes;
    if (r.includes("bulleted")) {
      const s = [{ label: e("Toggle the disc list style"), tooltip: e("Disc"), type: "disc", icon: JC }, { label: e("Toggle the circle list style"), tooltip: e("Circle"), type: "circle", icon: KC }, { label: e("Toggle the square list style"), tooltip: e("Square"), type: "square", icon: tA }], a = e("Bulleted List"), l = e("Bulleted list styles toolbar"), c = "bulletedList";
      i.ui.componentFactory.add(c, Wp({ editor: i, normalizedConfig: n, parentCommandName: c, buttonLabel: a, buttonIcon: Vu, styleGridAriaLabel: l, styleDefinitions: s })), i.ui.componentFactory.add(`menuBar:${c}`, Gp({ editor: i, normalizedConfig: n, parentCommandName: c, buttonLabel: a, styleGridAriaLabel: l, styleDefinitions: s }));
    }
    if (r.includes("numbered") || t.startIndex || t.reversed) {
      const s = [{ label: e("Toggle the decimal list style"), tooltip: e("Decimal"), type: "decimal", icon: QC }, { label: e("Toggle the decimal with leading zero list style"), tooltip: e("Decimal with leading zero"), type: "decimal-leading-zero", icon: YC }, { label: e("Toggle the lower–roman list style"), tooltip: e("Lower–roman"), type: "lower-roman", icon: eA }, { label: e("Toggle the upper–roman list style"), tooltip: e("Upper-roman"), type: "upper-roman", icon: nA }, { label: e("Toggle the lower–latin list style"), tooltip: e("Lower-latin"), type: "lower-latin", icon: XC }, { label: e("Toggle the upper–latin list style"), tooltip: e("Upper-latin"), type: "upper-latin", icon: iA }], a = e("Numbered List"), l = e("Numbered list styles toolbar"), c = "numberedList";
      i.ui.componentFactory.add(c, Wp({ editor: i, normalizedConfig: n, parentCommandName: c, buttonLabel: a, buttonIcon: Ou, styleGridAriaLabel: l, styleDefinitions: s })), r.includes("numbered") && i.ui.componentFactory.add(`menuBar:${c}`, Gp({ editor: i, normalizedConfig: n, parentCommandName: c, buttonLabel: a, styleGridAriaLabel: l, styleDefinitions: s }));
    }
  }
}
function Wp({ editor: o, normalizedConfig: i, parentCommandName: e, buttonLabel: t, buttonIcon: n, styleGridAriaLabel: r, styleDefinitions: s }) {
  const a = o.commands.get(e);
  return (l) => {
    const c = ft(l, po), d = c.buttonView;
    return c.bind("isEnabled").to(a), c.class = "ck-list-styles-dropdown", d.on("execute", () => {
      o.execute(e), o.editing.view.focus();
    }), d.set({ label: t, icon: n, tooltip: !0, isToggleable: !0 }), d.bind("isOn").to(a, "value", (u) => !!u), c.once("change:isOpen", () => {
      const u = function({ editor: h, normalizedConfig: g, dropdownView: p, parentCommandName: f, styleDefinitions: b, styleGridAriaLabel: k }) {
        const _ = h.locale, w = { ...g, ...f != "numberedList" ? { startIndex: !1, reversed: !1 } : null }, y = f.replace("List", "");
        let x = null;
        if (g.styles.listTypes.includes(y)) {
          const S = h.commands.get("listStyle"), L = l0({ editor: h, parentCommandName: f, listStyleCommand: S }), W = g.styles.listStyleTypes;
          let Y = b;
          if (W) {
            const ue = W[y];
            ue && (Y = b.filter((bt) => ue.includes(bt.type)));
          }
          const be = c0(S);
          x = Y.filter(be).map(L);
        }
        const C = new a0(_, { styleGridAriaLabel: k, enabledProperties: w, styleButtonViews: x });
        if (g.styles.listTypes.includes(y) && fl(p, () => C.stylesView.children.find((S) => S.isOn)), w.startIndex) {
          const S = h.commands.get("listStart");
          C.startIndexFieldView.bind("isEnabled").to(S), C.startIndexFieldView.fieldView.bind("value").to(S), C.on("listStart", (L, W) => h.execute("listStart", W));
        }
        if (w.reversed) {
          const S = h.commands.get("listReversed");
          C.reversedSwitchButtonView.bind("isEnabled").to(S), C.reversedSwitchButtonView.bind("isOn").to(S, "value", (L) => !!L), C.on("listReversed", () => {
            const L = S.value;
            h.execute("listReversed", { reversed: !L });
          });
        }
        return C.delegate("execute").to(p), C;
      }({ editor: o, normalizedConfig: i, dropdownView: c, parentCommandName: e, styleGridAriaLabel: r, styleDefinitions: s });
      c.panelView.children.add(u);
    }), c.on("execute", () => {
      o.editing.view.focus();
    }), c;
  };
}
function l0({ editor: o, listStyleCommand: i, parentCommandName: e }) {
  const t = o.locale, n = o.commands.get(e);
  return ({ label: r, type: s, icon: a, tooltip: l }) => {
    const c = new j(t);
    return c.set({ label: r, icon: a, tooltip: l }), c.bind("isOn").to(i, "value", (d) => d === s), c.on("execute", () => {
      n.value ? i.value === s ? o.execute(e) : i.value !== s && o.execute("listStyle", { type: s }) : o.model.change(() => {
        o.execute("listStyle", { type: s });
      });
    }), c;
  };
}
function Gp({ editor: o, normalizedConfig: i, parentCommandName: e, buttonLabel: t, styleGridAriaLabel: n, styleDefinitions: r }) {
  return (s) => {
    const a = new Vt(s), l = o.commands.get(e), c = o.commands.get("listStyle"), d = c0(c), u = l0({ editor: o, parentCommandName: e, listStyleCommand: c }), h = i.styles.listStyleTypes;
    let g = r;
    if (h) {
      const b = h[l.type];
      b && (g = r.filter((k) => b.includes(k.type)));
    }
    const p = g.filter(d).map(u), f = new a0(s, { styleGridAriaLabel: n, enabledProperties: { ...i, startIndex: !1, reversed: !1 }, styleButtonViews: p });
    return f.delegate("execute").to(a), a.buttonView.set({ label: t, icon: e === "bulletedList" ? Vu : Ou }), a.panelView.children.add(f), a.bind("isEnabled").to(l, "isEnabled"), a.on("execute", () => {
      o.editing.view.focus();
    }), a;
  };
}
function c0(o) {
  return typeof o.isStyleTypeSupported == "function" ? (i) => o.isStyleTypeSupported(i.type) : () => !0;
}
class JS extends A {
  static get requires() {
    return [YS, QS];
  }
  static get pluginName() {
    return "ListProperties";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class XS extends G {
  constructor(i) {
    super(i), this.on("execute", () => {
      this.refresh();
    }, { priority: "highest" });
  }
  refresh() {
    const i = this._getSelectedItems();
    this.value = this._getValue(i), this.isEnabled = !!i.length;
  }
  execute(i = {}) {
    this.editor.model.change((e) => {
      const t = this._getSelectedItems(), n = i.forceValue === void 0 ? !this._getValue(t) : i.forceValue;
      for (const r of t) n ? e.setAttribute("todoListChecked", !0, r) : e.removeAttribute("todoListChecked", r);
    });
  }
  _getValue(i) {
    return i.every((e) => e.getAttribute("todoListChecked"));
  }
  _getSelectedItems() {
    const i = this.editor.model, e = i.schema, t = i.document.selection.getFirstRange(), n = t.start.parent, r = [];
    e.checkAttribute(n, "todoListChecked") && r.push(...rr(n));
    for (const s of t.getItems({ shallow: !0 })) e.checkAttribute(s, "todoListChecked") && !r.includes(s) && r.push(...rr(s));
    return r;
  }
}
class eI extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", ["change"]);
  }
  onDomEvent(e) {
    if (e.target) {
      const t = this.view.domConverter.mapDomToView(e.target);
      t && t.is("element", "input") && t.getAttribute("type") == "checkbox" && t.findAncestor({ classes: "todo-list__label" }) && this.fire("todoCheckboxChange", e);
    }
  }
}
const tI = ys("Ctrl+Enter");
class iI extends A {
  static get pluginName() {
    return "TodoListEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [gs];
  }
  init() {
    const i = this.editor, e = i.model, t = i.editing, n = i.plugins.get(gs), r = i.config.get("list.multiBlock") ? "paragraph" : "listItem";
    i.commands.add("todoList", new Or(i, "todo")), i.commands.add("checkTodoList", new XS(i)), t.view.addObserver(eI), e.schema.extend("$listItem", { allowAttributes: "todoListChecked" }), e.schema.addAttributeCheck((s) => {
      const a = s.last;
      if (!a.getAttribute("listItemId") || a.getAttribute("listType") != "todo") return !1;
    }, "todoListChecked"), i.conversion.for("upcast").add((s) => {
      s.on("element:input", (a, l, c) => {
        const d = l.modelCursor, u = d.parent, h = l.viewItem;
        if (!c.consumable.test(h, { name: !0 }) || h.getAttribute("type") != "checkbox" || !d.isAtStart || !u.hasAttribute("listType")) return;
        c.consumable.consume(h, { name: !0 });
        const g = c.writer;
        g.setAttribute("listType", "todo", u), l.viewItem.hasAttribute("checked") && g.setAttribute("todoListChecked", !0, u), l.modelRange = g.createRange(d);
      }), s.on("element:li", (a, l, c) => {
        const { writer: d, schema: u } = c;
        if (!l.modelRange) return;
        const h = Array.from(l.modelRange.getItems({ shallow: !0 })).filter((g) => g.getAttribute("listType") === "todo" && u.checkAttribute(g, "listItemId")).reduce((g, p) => {
          const f = p.getAttribute("listItemId");
          return g.has(f) || g.set(f, rr(p)), g;
        }, /* @__PURE__ */ new Map());
        for (const [, g] of h.entries()) if (g.some((p) => p.getAttribute("todoListChecked"))) for (const p of g) d.setAttribute("todoListChecked", !0, p);
      }, { priority: "low" }), s.on("element:label", Cc({ name: "label", classes: "todo-list__label" })), s.on("element:label", Cc({ name: "label", classes: ["todo-list__label", "todo-list__label_without-description"] })), s.on("element:span", Cc({ name: "span", classes: "todo-list__label__description" })), s.on("element:ul", function(a) {
        const l = new Zt(a);
        return (c, d, u) => {
          const h = l.match(d.viewItem);
          if (!h) return;
          const g = h.match;
          g.name = !1, u.consumable.consume(d.viewItem, g);
        };
      }({ name: "ul", classes: "todo-list" }));
    }), i.conversion.for("downcast").elementToElement({ model: r, view: (s, { writer: a }) => {
      if (Qs(s, n.getListAttributeNames())) return a.createContainerElement("span", { class: "todo-list__label__description" });
    }, converterPriority: "highest" }), n.registerDowncastStrategy({ scope: "list", attributeName: "listType", setAttributeOnDowncast(s, a, l) {
      a == "todo" ? s.addClass("todo-list", l) : s.removeClass("todo-list", l);
    } }), n.registerDowncastStrategy({ scope: "itemMarker", attributeName: "todoListChecked", createElement(s, a, { dataPipeline: l }) {
      if (a.getAttribute("listType") != "todo") return null;
      const c = s.createUIElement("input", { type: "checkbox", ...a.getAttribute("todoListChecked") ? { checked: "checked" } : null, ...l ? { disabled: "disabled" } : { tabindex: "-1" } });
      if (l) return c;
      const d = s.createContainerElement("span", { contenteditable: "false" }, c);
      return d.getFillerOffset = () => null, d;
    }, canWrapElement: (s) => Qs(s, n.getListAttributeNames()), createWrapperElement(s, a, { dataPipeline: l }) {
      const c = ["todo-list__label"];
      return Qs(a, n.getListAttributeNames()) || c.push("todo-list__label_without-description"), s.createAttributeElement(l ? "label" : "span", { class: c.join(" ") });
    } }), n.on("checkElement", (s, { modelElement: a, viewElement: l }) => {
      const c = Qs(a, n.getListAttributeNames());
      l.hasClass("todo-list__label__description") != c && (s.return = !0, s.stop());
    }), n.on("checkElement", (s, { modelElement: a, viewElement: l }) => {
      const c = a.getAttribute("listType") == "todo" && un(a);
      let d = !1;
      const u = i.editing.view.createPositionBefore(l).getWalker({ direction: "backward" });
      for (const { item: h } of u) {
        if (h.is("element") && i.editing.mapper.toModelElement(h)) break;
        h.is("element", "input") && h.getAttribute("type") == "checkbox" && (d = !0);
      }
      d != c && (s.return = !0, s.stop());
    }), n.on("postFixer", (s, { listNodes: a, writer: l }) => {
      for (const { node: c, previousNodeInList: d } of a) {
        if (!d || d.getAttribute("listItemId") != c.getAttribute("listItemId")) continue;
        const u = d.hasAttribute("todoListChecked"), h = c.hasAttribute("todoListChecked");
        h && !u ? (l.removeAttribute("todoListChecked", c), s.return = !0) : !h && u && (l.setAttribute("todoListChecked", !0, c), s.return = !0);
      }
    }), e.document.registerPostFixer((s) => {
      const a = e.document.differ.getChanges();
      let l = !1;
      for (const c of a) if (c.type == "attribute" && c.attributeKey == "listType") {
        const d = c.range.start.nodeAfter;
        c.attributeOldValue == "todo" && d.hasAttribute("todoListChecked") && (s.removeAttribute("todoListChecked", d), l = !0);
      } else if (c.type == "insert" && c.name != "$text") for (const { item: d } of s.createRangeOn(c.position.nodeAfter)) d.is("element") && d.getAttribute("listType") != "todo" && d.hasAttribute("todoListChecked") && (s.removeAttribute("todoListChecked", d), l = !0);
      return l;
    }), this.listenTo(t.view.document, "keydown", (s, a) => {
      no(a) === tI && (i.execute("checkTodoList"), s.stop());
    }, { priority: "high" }), this.listenTo(t.view.document, "todoCheckboxChange", (s, a) => {
      const l = a.target;
      if (!l || !l.is("element", "input")) return;
      const c = t.view.createPositionAfter(l), d = t.mapper.toModelPosition(c).parent;
      d && Ve(d) && d.getAttribute("listType") == "todo" && this._handleCheckmarkChange(d);
    }), this.listenTo(t.view.document, "arrowKey", /* @__PURE__ */ function(s, a) {
      return (l, c) => {
        const d = ll(c.keyCode, a.contentLanguageDirection), u = s.schema, h = s.document.selection;
        if (!h.isCollapsed) return;
        const g = h.getFirstPosition(), p = g.parent;
        if (d == "right" && g.isAtEnd) {
          const f = u.getNearestSelectionRange(s.createPositionAfter(p), "forward");
          if (!f) return;
          const b = f.start.parent;
          b && Ve(b) && b.getAttribute("listType") == "todo" && (s.change((k) => k.setSelection(f)), c.preventDefault(), c.stopPropagation(), l.stop());
        } else if (d == "left" && g.isAtStart && Ve(p) && p.getAttribute("listType") == "todo") {
          const f = u.getNearestSelectionRange(s.createPositionBefore(p), "backward");
          if (!f) return;
          s.change((b) => b.setSelection(f)), c.preventDefault(), c.stopPropagation(), l.stop();
        }
      };
    }(e, i.locale), { context: "$text" }), this.listenTo(t.mapper, "viewToModelPosition", (s, a) => {
      const l = a.viewPosition.parent, c = l.is("attributeElement", "li") && a.viewPosition.offset == 0, d = Zp(l) && a.viewPosition.offset <= 1, u = l.is("element", "span") && l.getAttribute("contenteditable") == "false" && Zp(l.parent);
      if (!c && !d && !u) return;
      const h = a.modelPosition.nodeAfter;
      h && h.getAttribute("listType") == "todo" && (a.modelPosition = e.createPositionAt(h, 0));
    }, { priority: "low" }), this._initAriaAnnouncements();
  }
  _handleCheckmarkChange(i) {
    const e = this.editor, t = e.model, n = Array.from(t.document.selection.getRanges());
    t.change((r) => {
      r.setSelection(i, "end"), e.execute("checkTodoList"), r.setSelection(n);
    });
  }
  _initAriaAnnouncements() {
    const { model: i, ui: e, t } = this.editor;
    let n = null;
    e && i.document.selection.on("change:range", () => {
      const r = i.document.selection.focus.parent, s = Kp(n), a = Kp(r);
      s && !a ? e.ariaLiveAnnouncer.announce(t("Leaving a to-do list")) : !s && a && e.ariaLiveAnnouncer.announce(t("Entering a to-do list")), n = r;
    });
  }
}
function Cc(o) {
  const i = new Zt(o);
  return (e, t, n) => {
    const r = i.match(t.viewItem);
    r && n.consumable.consume(t.viewItem, r.match) && Object.assign(t, n.convertChildren(t.viewItem, t.modelCursor));
  };
}
function Qs(o, i) {
  return (o.is("element", "paragraph") || o.is("element", "listItem")) && o.getAttribute("listType") == "todo" && un(o) && function(e, t) {
    for (const n of e.getAttributeKeys()) if (!n.startsWith("selection:") && !t.includes(n)) return !1;
    return !0;
  }(o, i);
}
function Zp(o) {
  return !!o && o.is("attributeElement") && o.hasClass("todo-list__label");
}
function Kp(o) {
  return !!o && !(!o.is("element", "paragraph") && !o.is("element", "listItem")) && o.getAttribute("listType") == "todo";
}
class nI extends A {
  static get pluginName() {
    return "TodoListUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor.t;
    Ld(this.editor, "todoList", i("To-do List"), OA);
  }
}
class oI extends A {
  static get requires() {
    return [iI, nI];
  }
  static get pluginName() {
    return "TodoList";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
ys("Ctrl+Enter");
function rI() {
  return { baseUrl: null, breaks: !1, extensions: null, gfm: !0, headerIds: !0, headerPrefix: "", highlight: null, langPrefix: "language-", mangle: !0, pedantic: !1, renderer: null, sanitize: !1, sanitizer: null, silent: !1, smartLists: !1, smartypants: !1, tokenizer: null, walkTokens: null, xhtml: !1 };
}
let sr = { baseUrl: null, breaks: !1, extensions: null, gfm: !0, headerIds: !0, headerPrefix: "", highlight: null, langPrefix: "language-", mangle: !0, pedantic: !1, renderer: null, sanitize: !1, sanitizer: null, silent: !1, smartLists: !1, smartypants: !1, tokenizer: null, walkTokens: null, xhtml: !1 };
const sI = /[&<>"']/, aI = /[&<>"']/g, lI = /[<>"']|&(?!#?\w+;)/, cI = /[<>"']|&(?!#?\w+;)/g, dI = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, Yp = (o) => dI[o];
function gt(o, i) {
  if (i) {
    if (sI.test(o)) return o.replace(aI, Yp);
  } else if (lI.test(o)) return o.replace(cI, Yp);
  return o;
}
const uI = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;
function d0(o) {
  return o.replace(uI, (i, e) => (e = e.toLowerCase()) === "colon" ? ":" : e.charAt(0) === "#" ? e.charAt(1) === "x" ? String.fromCharCode(parseInt(e.substring(2), 16)) : String.fromCharCode(+e.substring(1)) : "");
}
const hI = /(^|[^\[])\^/g;
function Ne(o, i) {
  o = o.source || o, i = i || "";
  const e = { replace: (t, n) => (n = (n = n.source || n).replace(hI, "$1"), o = o.replace(t, n), e), getRegex: () => new RegExp(o, i) };
  return e;
}
const mI = /[^\w:]/g, gI = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function Qp(o, i, e) {
  if (o) {
    let t;
    try {
      t = decodeURIComponent(d0(e)).replace(mI, "").toLowerCase();
    } catch {
      return null;
    }
    if (t.indexOf("javascript:") === 0 || t.indexOf("vbscript:") === 0 || t.indexOf("data:") === 0) return null;
  }
  i && !gI.test(e) && (e = function(t, n) {
    Js[" " + t] || (pI.test(t) ? Js[" " + t] = t + "/" : Js[" " + t] = la(t, "/", !0)), t = Js[" " + t];
    const r = t.indexOf(":") === -1;
    return n.substring(0, 2) === "//" ? r ? n : t.replace(fI, "$1") + n : n.charAt(0) === "/" ? r ? n : t.replace(bI, "$1") + n : t + n;
  }(i, e));
  try {
    e = encodeURI(e).replace(/%25/g, "%");
  } catch {
    return null;
  }
  return e;
}
const Js = {}, pI = /^[^:]+:\/*[^/]*$/, fI = /^([^:]+:)[\s\S]*$/, bI = /^([^:]+:\/*[^/]*)[\s\S]*$/, Ua = { exec: function() {
} };
function ki(o) {
  let i, e, t = 1;
  for (; t < arguments.length; t++) for (e in i = arguments[t], i) Object.prototype.hasOwnProperty.call(i, e) && (o[e] = i[e]);
  return o;
}
function Jp(o, i) {
  const e = o.replace(/\|/g, (n, r, s) => {
    let a = !1, l = r;
    for (; --l >= 0 && s[l] === "\\"; ) a = !a;
    return a ? "|" : " |";
  }).split(/ \|/);
  let t = 0;
  if (e[0].trim() || e.shift(), e.length > 0 && !e[e.length - 1].trim() && e.pop(), e.length > i) e.splice(i);
  else for (; e.length < i; ) e.push("");
  for (; t < e.length; t++) e[t] = e[t].trim().replace(/\\\|/g, "|");
  return e;
}
function la(o, i, e) {
  const t = o.length;
  if (t === 0) return "";
  let n = 0;
  for (; n < t; ) {
    const r = o.charAt(t - n - 1);
    if (r !== i || e) {
      if (r === i || !e) break;
      n++;
    } else n++;
  }
  return o.substr(0, t - n);
}
function u0(o) {
  o && o.sanitize && !o.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
}
function Xp(o, i) {
  if (i < 1) return "";
  let e = "";
  for (; i > 1; ) 1 & i && (e += o), i >>= 1, o += o;
  return e + o;
}
function ef(o, i, e, t) {
  const n = i.href, r = i.title ? gt(i.title) : null, s = o[1].replace(/\\([\[\]])/g, "$1");
  if (o[0].charAt(0) !== "!") {
    t.state.inLink = !0;
    const a = { type: "link", raw: e, href: n, title: r, text: s, tokens: t.inlineTokens(s, []) };
    return t.state.inLink = !1, a;
  }
  return { type: "image", raw: e, href: n, title: r, text: gt(s) };
}
class Nd {
  constructor(i) {
    this.options = i || sr;
  }
  space(i) {
    const e = this.rules.block.newline.exec(i);
    if (e && e[0].length > 0) return { type: "space", raw: e[0] };
  }
  code(i) {
    const e = this.rules.block.code.exec(i);
    if (e) {
      const t = e[0].replace(/^ {1,4}/gm, "");
      return { type: "code", raw: e[0], codeBlockStyle: "indented", text: this.options.pedantic ? t : la(t, `
`) };
    }
  }
  fences(i) {
    const e = this.rules.block.fences.exec(i);
    if (e) {
      const t = e[0], n = function(r, s) {
        const a = r.match(/^(\s+)(?:```)/);
        if (a === null) return s;
        const l = a[1];
        return s.split(`
`).map((c) => {
          const d = c.match(/^\s+/);
          if (d === null) return c;
          const [u] = d;
          return u.length >= l.length ? c.slice(l.length) : c;
        }).join(`
`);
      }(t, e[3] || "");
      return { type: "code", raw: t, lang: e[2] ? e[2].trim() : e[2], text: n };
    }
  }
  heading(i) {
    const e = this.rules.block.heading.exec(i);
    if (e) {
      let t = e[2].trim();
      if (/#$/.test(t)) {
        const r = la(t, "#");
        this.options.pedantic ? t = r.trim() : r && !/ $/.test(r) || (t = r.trim());
      }
      const n = { type: "heading", raw: e[0], depth: e[1].length, text: t, tokens: [] };
      return this.lexer.inline(n.text, n.tokens), n;
    }
  }
  hr(i) {
    const e = this.rules.block.hr.exec(i);
    if (e) return { type: "hr", raw: e[0] };
  }
  blockquote(i) {
    const e = this.rules.block.blockquote.exec(i);
    if (e) {
      const t = e[0].replace(/^ *> ?/gm, "");
      return { type: "blockquote", raw: e[0], tokens: this.lexer.blockTokens(t, []), text: t };
    }
  }
  list(i) {
    let e = this.rules.block.list.exec(i);
    if (e) {
      let t, n, r, s, a, l, c, d, u, h, g, p, f = e[1].trim();
      const b = f.length > 1, k = { type: "list", raw: "", ordered: b, start: b ? +f.slice(0, -1) : "", loose: !1, items: [] };
      f = b ? `\\d{1,9}\\${f.slice(-1)}` : `\\${f}`, this.options.pedantic && (f = b ? f : "[*+-]");
      const _ = new RegExp(`^( {0,3}${f})((?: [^\\n]*)?(?:\\n|$))`);
      for (; i && (p = !1, e = _.exec(i)) && !this.rules.block.hr.test(i); ) {
        if (t = e[0], i = i.substring(t.length), d = e[2].split(`
`, 1)[0], u = i.split(`
`, 1)[0], this.options.pedantic ? (s = 2, g = d.trimLeft()) : (s = e[2].search(/[^ ]/), s = s > 4 ? 1 : s, g = d.slice(s), s += e[1].length), l = !1, !d && /^ *$/.test(u) && (t += u + `
`, i = i.substring(u.length + 1), p = !0), !p) {
          const y = new RegExp(`^ {0,${Math.min(3, s - 1)}}(?:[*+-]|\\d{1,9}[.)])`);
          for (; i && (h = i.split(`
`, 1)[0], d = h, this.options.pedantic && (d = d.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ")), !y.test(d)); ) {
            if (d.search(/[^ ]/) >= s || !d.trim()) g += `
` + d.slice(s);
            else {
              if (l) break;
              g += `
` + d;
            }
            l || d.trim() || (l = !0), t += h + `
`, i = i.substring(h.length + 1);
          }
        }
        k.loose || (c ? k.loose = !0 : /\n *\n *$/.test(t) && (c = !0)), this.options.gfm && (n = /^\[[ xX]\] /.exec(g), n && (r = n[0] !== "[ ] ", g = g.replace(/^\[[ xX]\] +/, ""))), k.items.push({ type: "list_item", raw: t, task: !!n, checked: r, loose: !1, text: g }), k.raw += t;
      }
      k.items[k.items.length - 1].raw = t.trimRight(), k.items[k.items.length - 1].text = g.trimRight(), k.raw = k.raw.trimRight();
      const w = k.items.length;
      for (a = 0; a < w; a++) {
        this.lexer.state.top = !1, k.items[a].tokens = this.lexer.blockTokens(k.items[a].text, []);
        const y = k.items[a].tokens.filter((C) => C.type === "space"), x = y.every((C) => {
          const S = C.raw.split("");
          let L = 0;
          for (const W of S) if (W === `
` && (L += 1), L > 1) return !0;
          return !1;
        });
        !k.loose && y.length && x && (k.loose = !0, k.items[a].loose = !0);
      }
      return k;
    }
  }
  html(i) {
    const e = this.rules.block.html.exec(i);
    if (e) {
      const t = { type: "html", raw: e[0], pre: !this.options.sanitizer && (e[1] === "pre" || e[1] === "script" || e[1] === "style"), text: e[0] };
      return this.options.sanitize && (t.type = "paragraph", t.text = this.options.sanitizer ? this.options.sanitizer(e[0]) : gt(e[0]), t.tokens = [], this.lexer.inline(t.text, t.tokens)), t;
    }
  }
  def(i) {
    const e = this.rules.block.def.exec(i);
    if (e)
      return e[3] && (e[3] = e[3].substring(1, e[3].length - 1)), { type: "def", tag: e[1].toLowerCase().replace(/\s+/g, " "), raw: e[0], href: e[2], title: e[3] };
  }
  table(i) {
    const e = this.rules.block.table.exec(i);
    if (e) {
      const t = { type: "table", header: Jp(e[1]).map((n) => ({ text: n })), align: e[2].replace(/^ *|\| *$/g, "").split(/ *\| */), rows: e[3] && e[3].trim() ? e[3].replace(/\n[ \t]*$/, "").split(`
`) : [] };
      if (t.header.length === t.align.length) {
        t.raw = e[0];
        let n, r, s, a, l = t.align.length;
        for (n = 0; n < l; n++) /^ *-+: *$/.test(t.align[n]) ? t.align[n] = "right" : /^ *:-+: *$/.test(t.align[n]) ? t.align[n] = "center" : /^ *:-+ *$/.test(t.align[n]) ? t.align[n] = "left" : t.align[n] = null;
        for (l = t.rows.length, n = 0; n < l; n++) t.rows[n] = Jp(t.rows[n], t.header.length).map((c) => ({ text: c }));
        for (l = t.header.length, r = 0; r < l; r++) t.header[r].tokens = [], this.lexer.inlineTokens(t.header[r].text, t.header[r].tokens);
        for (l = t.rows.length, r = 0; r < l; r++) for (a = t.rows[r], s = 0; s < a.length; s++) a[s].tokens = [], this.lexer.inlineTokens(a[s].text, a[s].tokens);
        return t;
      }
    }
  }
  lheading(i) {
    const e = this.rules.block.lheading.exec(i);
    if (e) {
      const t = { type: "heading", raw: e[0], depth: e[2].charAt(0) === "=" ? 1 : 2, text: e[1], tokens: [] };
      return this.lexer.inline(t.text, t.tokens), t;
    }
  }
  paragraph(i) {
    const e = this.rules.block.paragraph.exec(i);
    if (e) {
      const t = { type: "paragraph", raw: e[0], text: e[1].charAt(e[1].length - 1) === `
` ? e[1].slice(0, -1) : e[1], tokens: [] };
      return this.lexer.inline(t.text, t.tokens), t;
    }
  }
  text(i) {
    const e = this.rules.block.text.exec(i);
    if (e) {
      const t = { type: "text", raw: e[0], text: e[0], tokens: [] };
      return this.lexer.inline(t.text, t.tokens), t;
    }
  }
  escape(i) {
    const e = this.rules.inline.escape.exec(i);
    if (e) return { type: "escape", raw: e[0], text: gt(e[1]) };
  }
  tag(i) {
    const e = this.rules.inline.tag.exec(i);
    if (e) return !this.lexer.state.inLink && /^<a /i.test(e[0]) ? this.lexer.state.inLink = !0 : this.lexer.state.inLink && /^<\/a>/i.test(e[0]) && (this.lexer.state.inLink = !1), !this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(e[0]) ? this.lexer.state.inRawBlock = !0 : this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0]) && (this.lexer.state.inRawBlock = !1), { type: this.options.sanitize ? "text" : "html", raw: e[0], inLink: this.lexer.state.inLink, inRawBlock: this.lexer.state.inRawBlock, text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(e[0]) : gt(e[0]) : e[0] };
  }
  link(i) {
    const e = this.rules.inline.link.exec(i);
    if (e) {
      const t = e[2].trim();
      if (!this.options.pedantic && /^</.test(t)) {
        if (!/>$/.test(t)) return;
        const s = la(t.slice(0, -1), "\\");
        if ((t.length - s.length) % 2 == 0) return;
      } else {
        const s = function(a, l) {
          if (a.indexOf(l[1]) === -1) return -1;
          const c = a.length;
          let d = 0, u = 0;
          for (; u < c; u++) if (a[u] === "\\") u++;
          else if (a[u] === l[0]) d++;
          else if (a[u] === l[1] && (d--, d < 0)) return u;
          return -1;
        }(e[2], "()");
        if (s > -1) {
          const a = (e[0].indexOf("!") === 0 ? 5 : 4) + e[1].length + s;
          e[2] = e[2].substring(0, s), e[0] = e[0].substring(0, a).trim(), e[3] = "";
        }
      }
      let n = e[2], r = "";
      if (this.options.pedantic) {
        const s = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);
        s && (n = s[1], r = s[3]);
      } else r = e[3] ? e[3].slice(1, -1) : "";
      return n = n.trim(), /^</.test(n) && (n = this.options.pedantic && !/>$/.test(t) ? n.slice(1) : n.slice(1, -1)), ef(e, { href: n && n.replace(this.rules.inline._escapes, "$1"), title: r && r.replace(this.rules.inline._escapes, "$1") }, e[0], this.lexer);
    }
  }
  reflink(i, e) {
    let t;
    if ((t = this.rules.inline.reflink.exec(i)) || (t = this.rules.inline.nolink.exec(i))) {
      let n = (t[2] || t[1]).replace(/\s+/g, " ");
      if (n = e[n.toLowerCase()], !n || !n.href) {
        const r = t[0].charAt(0);
        return { type: "text", raw: r, text: r };
      }
      return ef(t, n, t[0], this.lexer);
    }
  }
  emStrong(i, e, t = "") {
    let n = this.rules.inline.emStrong.lDelim.exec(i);
    if (!n || n[3] && t.match(/[\p{L}\p{N}]/u)) return;
    const r = n[1] || n[2] || "";
    if (!r || r && (t === "" || this.rules.inline.punctuation.exec(t))) {
      const s = n[0].length - 1;
      let a, l, c = s, d = 0;
      const u = n[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      for (u.lastIndex = 0, e = e.slice(-1 * i.length + s); (n = u.exec(e)) != null; ) {
        if (a = n[1] || n[2] || n[3] || n[4] || n[5] || n[6], !a) continue;
        if (l = a.length, n[3] || n[4]) {
          c += l;
          continue;
        }
        if ((n[5] || n[6]) && s % 3 && !((s + l) % 3)) {
          d += l;
          continue;
        }
        if (c -= l, c > 0) continue;
        if (l = Math.min(l, l + c + d), Math.min(s, l) % 2) {
          const g = i.slice(1, s + n.index + l);
          return { type: "em", raw: i.slice(0, s + n.index + l + 1), text: g, tokens: this.lexer.inlineTokens(g, []) };
        }
        const h = i.slice(2, s + n.index + l - 1);
        return { type: "strong", raw: i.slice(0, s + n.index + l + 1), text: h, tokens: this.lexer.inlineTokens(h, []) };
      }
    }
  }
  codespan(i) {
    const e = this.rules.inline.code.exec(i);
    if (e) {
      let t = e[2].replace(/\n/g, " ");
      const n = /[^ ]/.test(t), r = /^ /.test(t) && / $/.test(t);
      return n && r && (t = t.substring(1, t.length - 1)), t = gt(t, !0), { type: "codespan", raw: e[0], text: t };
    }
  }
  br(i) {
    const e = this.rules.inline.br.exec(i);
    if (e) return { type: "br", raw: e[0] };
  }
  del(i) {
    const e = this.rules.inline.del.exec(i);
    if (e) return { type: "del", raw: e[0], text: e[2], tokens: this.lexer.inlineTokens(e[2], []) };
  }
  autolink(i, e) {
    const t = this.rules.inline.autolink.exec(i);
    if (t) {
      let n, r;
      return t[2] === "@" ? (n = gt(this.options.mangle ? e(t[1]) : t[1]), r = "mailto:" + n) : (n = gt(t[1]), r = n), { type: "link", raw: t[0], text: n, href: r, tokens: [{ type: "text", raw: n, text: n }] };
    }
  }
  url(i, e) {
    let t;
    if (t = this.rules.inline.url.exec(i)) {
      let n, r;
      if (t[2] === "@") n = gt(this.options.mangle ? e(t[0]) : t[0]), r = "mailto:" + n;
      else {
        let s;
        do
          s = t[0], t[0] = this.rules.inline._backpedal.exec(t[0])[0];
        while (s !== t[0]);
        n = gt(t[0]), r = t[1] === "www." ? "http://" + n : n;
      }
      return { type: "link", raw: t[0], text: n, href: r, tokens: [{ type: "text", raw: n, text: n }] };
    }
  }
  inlineText(i, e) {
    const t = this.rules.inline.text.exec(i);
    if (t) {
      let n;
      return n = this.lexer.state.inRawBlock ? this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(t[0]) : gt(t[0]) : t[0] : gt(this.options.smartypants ? e(t[0]) : t[0]), { type: "text", raw: t[0], text: n };
    }
  }
}
const J = { newline: /^(?: *(?:\n|$))+/, code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/, fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/, hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/, heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/, blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/, list: /^( {0,3}bull)( [^\n]+?)?(?:\n|$)/, html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))", def: /^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/, table: Ua, lheading: /^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/, _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/, text: /^[^\n]+/, _label: /(?!\s*\])(?:\\.|[^\[\]\\])+/, _title: /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/ };
J.def = Ne(J.def).replace("label", J._label).replace("title", J._title).getRegex(), J.bullet = /(?:[*+-]|\d{1,9}[.)])/, J.listItemStart = Ne(/^( *)(bull) */).replace("bull", J.bullet).getRegex(), J.list = Ne(J.list).replace(/bull/g, J.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + J.def.source + ")").getRegex(), J._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul", J._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/, J.html = Ne(J.html, "i").replace("comment", J._comment).replace("tag", J._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(), J.paragraph = Ne(J._paragraph).replace("hr", J.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", J._tag).getRegex(), J.blockquote = Ne(J.blockquote).replace("paragraph", J.paragraph).getRegex(), J.normal = ki({}, J), J.gfm = ki({}, J.normal, { table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)" }), J.gfm.table = Ne(J.gfm.table).replace("hr", J.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", J._tag).getRegex(), J.gfm.paragraph = Ne(J._paragraph).replace("hr", J.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", J.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", J._tag).getRegex(), J.pedantic = ki({}, J.normal, { html: Ne(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment", J._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(), def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/, heading: /^(#{1,6})(.*)(?:\n+|$)/, fences: Ua, paragraph: Ne(J.normal._paragraph).replace("hr", J.hr).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", J.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex() });
const H = { escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/, autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/, url: Ua, tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>", link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/, reflink: /^!?\[(label)\]\[(ref)\]/, nolink: /^!?\[(ref)\](?:\[\])?/, reflinkSearch: "reflink|nolink(?!\\()", emStrong: { lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/, rDelimAst: /^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/, rDelimUnd: /^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/ }, code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/, br: /^( {2,}|\\)\n(?!\s*$)/, del: Ua, text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/, punctuation: /^([\spunctuation])/ };
function kI(o) {
  return o.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…");
}
function tf(o) {
  let i, e, t = "";
  const n = o.length;
  for (i = 0; i < n; i++) e = o.charCodeAt(i), Math.random() > 0.5 && (e = "x" + e.toString(16)), t += "&#" + e + ";";
  return t;
}
H._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~", H.punctuation = Ne(H.punctuation).replace(/punctuation/g, H._punctuation).getRegex(), H.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g, H.escapedEmSt = /\\\*|\\_/g, H._comment = Ne(J._comment).replace("(?:-->|$)", "-->").getRegex(), H.emStrong.lDelim = Ne(H.emStrong.lDelim).replace(/punct/g, H._punctuation).getRegex(), H.emStrong.rDelimAst = Ne(H.emStrong.rDelimAst, "g").replace(/punct/g, H._punctuation).getRegex(), H.emStrong.rDelimUnd = Ne(H.emStrong.rDelimUnd, "g").replace(/punct/g, H._punctuation).getRegex(), H._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g, H._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/, H._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/, H.autolink = Ne(H.autolink).replace("scheme", H._scheme).replace("email", H._email).getRegex(), H._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/, H.tag = Ne(H.tag).replace("comment", H._comment).replace("attribute", H._attribute).getRegex(), H._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/, H._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/, H._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/, H.link = Ne(H.link).replace("label", H._label).replace("href", H._href).replace("title", H._title).getRegex(), H.reflink = Ne(H.reflink).replace("label", H._label).replace("ref", J._label).getRegex(), H.nolink = Ne(H.nolink).replace("ref", J._label).getRegex(), H.reflinkSearch = Ne(H.reflinkSearch, "g").replace("reflink", H.reflink).replace("nolink", H.nolink).getRegex(), H.normal = ki({}, H), H.pedantic = ki({}, H.normal, { strong: { start: /^__|\*\*/, middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/, endAst: /\*\*(?!\*)/g, endUnd: /__(?!_)/g }, em: { start: /^_|\*/, middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/, endAst: /\*(?!\*)/g, endUnd: /_(?!_)/g }, link: Ne(/^!?\[(label)\]\((.*?)\)/).replace("label", H._label).getRegex(), reflink: Ne(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", H._label).getRegex() }), H.gfm = ki({}, H.normal, { escape: Ne(H.escape).replace("])", "~|])").getRegex(), _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/, url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/, _backpedal: /(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/, del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/, text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/ }), H.gfm.url = Ne(H.gfm.url, "i").replace("email", H.gfm._extended_email).getRegex(), H.breaks = ki({}, H.gfm, { br: Ne(H.br).replace("{2,}", "*").getRegex(), text: Ne(H.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex() });
class Xi {
  constructor(i) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = i || sr, this.options.tokenizer = this.options.tokenizer || new Nd(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = { inLink: !1, inRawBlock: !1, top: !0 };
    const e = { block: J.normal, inline: H.normal };
    this.options.pedantic ? (e.block = J.pedantic, e.inline = H.pedantic) : this.options.gfm && (e.block = J.gfm, this.options.breaks ? e.inline = H.breaks : e.inline = H.gfm), this.tokenizer.rules = e;
  }
  static get rules() {
    return { block: J, inline: H };
  }
  static lex(i, e) {
    return new Xi(e).lex(i);
  }
  static lexInline(i, e) {
    return new Xi(e).inlineTokens(i);
  }
  lex(i) {
    let e;
    for (i = i.replace(/\r\n|\r/g, `
`).replace(/\t/g, "    "), this.blockTokens(i, this.tokens); e = this.inlineQueue.shift(); ) this.inlineTokens(e.src, e.tokens);
    return this.tokens;
  }
  blockTokens(i, e = []) {
    let t, n, r, s;
    for (this.options.pedantic && (i = i.replace(/^ +$/gm, "")); i; ) if (!(this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((a) => !!(t = a.call({ lexer: this }, i, e)) && (i = i.substring(t.raw.length), e.push(t), !0)))) if (t = this.tokenizer.space(i)) i = i.substring(t.raw.length), t.raw.length === 1 && e.length > 0 ? e[e.length - 1].raw += `
` : e.push(t);
    else if (t = this.tokenizer.code(i)) i = i.substring(t.raw.length), n = e[e.length - 1], !n || n.type !== "paragraph" && n.type !== "text" ? e.push(t) : (n.raw += `
` + t.raw, n.text += `
` + t.text, this.inlineQueue[this.inlineQueue.length - 1].src = n.text);
    else if (t = this.tokenizer.fences(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.heading(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.hr(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.blockquote(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.list(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.html(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.def(i)) i = i.substring(t.raw.length), n = e[e.length - 1], !n || n.type !== "paragraph" && n.type !== "text" ? this.tokens.links[t.tag] || (this.tokens.links[t.tag] = { href: t.href, title: t.title }) : (n.raw += `
` + t.raw, n.text += `
` + t.raw, this.inlineQueue[this.inlineQueue.length - 1].src = n.text);
    else if (t = this.tokenizer.table(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.lheading(i)) i = i.substring(t.raw.length), e.push(t);
    else {
      if (r = i, this.options.extensions && this.options.extensions.startBlock) {
        let a = 1 / 0;
        const l = i.slice(1);
        let c;
        this.options.extensions.startBlock.forEach(function(d) {
          c = d.call({ lexer: this }, l), typeof c == "number" && c >= 0 && (a = Math.min(a, c));
        }), a < 1 / 0 && a >= 0 && (r = i.substring(0, a + 1));
      }
      if (this.state.top && (t = this.tokenizer.paragraph(r))) n = e[e.length - 1], s && n.type === "paragraph" ? (n.raw += `
` + t.raw, n.text += `
` + t.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = n.text) : e.push(t), s = r.length !== i.length, i = i.substring(t.raw.length);
      else if (t = this.tokenizer.text(i)) i = i.substring(t.raw.length), n = e[e.length - 1], n && n.type === "text" ? (n.raw += `
` + t.raw, n.text += `
` + t.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = n.text) : e.push(t);
      else if (i) {
        const a = "Infinite loop on byte: " + i.charCodeAt(0);
        if (this.options.silent) {
          console.error(a);
          break;
        }
        throw new Error(a);
      }
    }
    return this.state.top = !0, e;
  }
  inline(i, e) {
    this.inlineQueue.push({ src: i, tokens: e });
  }
  inlineTokens(i, e = []) {
    let t, n, r, s, a, l, c = i;
    if (this.tokens.links) {
      const d = Object.keys(this.tokens.links);
      if (d.length > 0) for (; (s = this.tokenizer.rules.inline.reflinkSearch.exec(c)) != null; ) d.includes(s[0].slice(s[0].lastIndexOf("[") + 1, -1)) && (c = c.slice(0, s.index) + "[" + Xp("a", s[0].length - 2) + "]" + c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (s = this.tokenizer.rules.inline.blockSkip.exec(c)) != null; ) c = c.slice(0, s.index) + "[" + Xp("a", s[0].length - 2) + "]" + c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    for (; (s = this.tokenizer.rules.inline.escapedEmSt.exec(c)) != null; ) c = c.slice(0, s.index) + "++" + c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);
    for (; i; ) if (a || (l = ""), a = !1, !(this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((d) => !!(t = d.call({ lexer: this }, i, e)) && (i = i.substring(t.raw.length), e.push(t), !0)))) if (t = this.tokenizer.escape(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.tag(i)) i = i.substring(t.raw.length), n = e[e.length - 1], n && t.type === "text" && n.type === "text" ? (n.raw += t.raw, n.text += t.text) : e.push(t);
    else if (t = this.tokenizer.link(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.reflink(i, this.tokens.links)) i = i.substring(t.raw.length), n = e[e.length - 1], n && t.type === "text" && n.type === "text" ? (n.raw += t.raw, n.text += t.text) : e.push(t);
    else if (t = this.tokenizer.emStrong(i, c, l)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.codespan(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.br(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.del(i)) i = i.substring(t.raw.length), e.push(t);
    else if (t = this.tokenizer.autolink(i, tf)) i = i.substring(t.raw.length), e.push(t);
    else if (this.state.inLink || !(t = this.tokenizer.url(i, tf))) {
      if (r = i, this.options.extensions && this.options.extensions.startInline) {
        let d = 1 / 0;
        const u = i.slice(1);
        let h;
        this.options.extensions.startInline.forEach(function(g) {
          h = g.call({ lexer: this }, u), typeof h == "number" && h >= 0 && (d = Math.min(d, h));
        }), d < 1 / 0 && d >= 0 && (r = i.substring(0, d + 1));
      }
      if (t = this.tokenizer.inlineText(r, kI)) i = i.substring(t.raw.length), t.raw.slice(-1) !== "_" && (l = t.raw.slice(-1)), a = !0, n = e[e.length - 1], n && n.type === "text" ? (n.raw += t.raw, n.text += t.text) : e.push(t);
      else if (i) {
        const d = "Infinite loop on byte: " + i.charCodeAt(0);
        if (this.options.silent) {
          console.error(d);
          break;
        }
        throw new Error(d);
      }
    } else i = i.substring(t.raw.length), e.push(t);
    return e;
  }
}
class Rd {
  constructor(i) {
    this.options = i || sr;
  }
  code(i, e, t) {
    const n = (e || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const r = this.options.highlight(i, n);
      r != null && r !== i && (t = !0, i = r);
    }
    return i = i.replace(/\n$/, "") + `
`, n ? '<pre><code class="' + this.options.langPrefix + gt(n, !0) + '">' + (t ? i : gt(i, !0)) + `</code></pre>
` : "<pre><code>" + (t ? i : gt(i, !0)) + `</code></pre>
`;
  }
  blockquote(i) {
    return `<blockquote>
` + i + `</blockquote>
`;
  }
  html(i) {
    return i;
  }
  heading(i, e, t, n) {
    return this.options.headerIds ? "<h" + e + ' id="' + this.options.headerPrefix + n.slug(t) + '">' + i + "</h" + e + `>
` : "<h" + e + ">" + i + "</h" + e + `>
`;
  }
  hr() {
    return this.options.xhtml ? `<hr/>
` : `<hr>
`;
  }
  list(i, e, t) {
    const n = e ? "ol" : "ul";
    return "<" + n + (e && t !== 1 ? ' start="' + t + '"' : "") + `>
` + i + "</" + n + `>
`;
  }
  listitem(i) {
    return "<li>" + i + `</li>
`;
  }
  checkbox(i) {
    return "<input " + (i ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  paragraph(i) {
    return "<p>" + i + `</p>
`;
  }
  table(i, e) {
    return e && (e = "<tbody>" + e + "</tbody>"), `<table>
<thead>
` + i + `</thead>
` + e + `</table>
`;
  }
  tablerow(i) {
    return `<tr>
` + i + `</tr>
`;
  }
  tablecell(i, e) {
    const t = e.header ? "th" : "td";
    return (e.align ? "<" + t + ' align="' + e.align + '">' : "<" + t + ">") + i + "</" + t + `>
`;
  }
  strong(i) {
    return "<strong>" + i + "</strong>";
  }
  em(i) {
    return "<em>" + i + "</em>";
  }
  codespan(i) {
    return "<code>" + i + "</code>";
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  del(i) {
    return "<del>" + i + "</del>";
  }
  link(i, e, t) {
    if ((i = Qp(this.options.sanitize, this.options.baseUrl, i)) === null) return t;
    let n = '<a href="' + gt(i) + '"';
    return e && (n += ' title="' + e + '"'), n += ">" + t + "</a>", n;
  }
  image(i, e, t) {
    if ((i = Qp(this.options.sanitize, this.options.baseUrl, i)) === null) return t;
    let n = '<img src="' + i + '" alt="' + t + '"';
    return e && (n += ' title="' + e + '"'), n += this.options.xhtml ? "/>" : ">", n;
  }
  text(i) {
    return i;
  }
}
class h0 {
  strong(i) {
    return i;
  }
  em(i) {
    return i;
  }
  codespan(i) {
    return i;
  }
  del(i) {
    return i;
  }
  html(i) {
    return i;
  }
  text(i) {
    return i;
  }
  link(i, e, t) {
    return "" + t;
  }
  image(i, e, t) {
    return "" + t;
  }
  br() {
    return "";
  }
}
class m0 {
  constructor() {
    this.seen = {};
  }
  serialize(i) {
    return i.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  getNextSafeSlug(i, e) {
    let t = i, n = 0;
    if (this.seen.hasOwnProperty(t)) {
      n = this.seen[i];
      do
        n++, t = i + "-" + n;
      while (this.seen.hasOwnProperty(t));
    }
    return e || (this.seen[i] = n, this.seen[t] = 0), t;
  }
  slug(i, e = {}) {
    const t = this.serialize(i);
    return this.getNextSafeSlug(t, e.dryrun);
  }
}
class en {
  constructor(i) {
    this.options = i || sr, this.options.renderer = this.options.renderer || new Rd(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new h0(), this.slugger = new m0();
  }
  static parse(i, e) {
    return new en(e).parse(i);
  }
  static parseInline(i, e) {
    return new en(e).parseInline(i);
  }
  parse(i, e = !0) {
    let t, n, r, s, a, l, c, d, u, h, g, p, f, b, k, _, w, y, x, C = "";
    const S = i.length;
    for (t = 0; t < S; t++) if (h = i[t], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[h.type] && (x = this.options.extensions.renderers[h.type].call({ parser: this }, h), x !== !1 || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(h.type))) C += x || "";
    else switch (h.type) {
      case "space":
        continue;
      case "hr":
        C += this.renderer.hr();
        continue;
      case "heading":
        C += this.renderer.heading(this.parseInline(h.tokens), h.depth, d0(this.parseInline(h.tokens, this.textRenderer)), this.slugger);
        continue;
      case "code":
        C += this.renderer.code(h.text, h.lang, h.escaped);
        continue;
      case "table":
        for (d = "", c = "", s = h.header.length, n = 0; n < s; n++) c += this.renderer.tablecell(this.parseInline(h.header[n].tokens), { header: !0, align: h.align[n] });
        for (d += this.renderer.tablerow(c), u = "", s = h.rows.length, n = 0; n < s; n++) {
          for (l = h.rows[n], c = "", a = l.length, r = 0; r < a; r++) c += this.renderer.tablecell(this.parseInline(l[r].tokens), { header: !1, align: h.align[r] });
          u += this.renderer.tablerow(c);
        }
        C += this.renderer.table(d, u);
        continue;
      case "blockquote":
        u = this.parse(h.tokens), C += this.renderer.blockquote(u);
        continue;
      case "list":
        for (g = h.ordered, p = h.start, f = h.loose, s = h.items.length, u = "", n = 0; n < s; n++) k = h.items[n], _ = k.checked, w = k.task, b = "", k.task && (y = this.renderer.checkbox(_), f ? k.tokens.length > 0 && k.tokens[0].type === "paragraph" ? (k.tokens[0].text = y + " " + k.tokens[0].text, k.tokens[0].tokens && k.tokens[0].tokens.length > 0 && k.tokens[0].tokens[0].type === "text" && (k.tokens[0].tokens[0].text = y + " " + k.tokens[0].tokens[0].text)) : k.tokens.unshift({ type: "text", text: y }) : b += y), b += this.parse(k.tokens, f), u += this.renderer.listitem(b, w, _);
        C += this.renderer.list(u, g, p);
        continue;
      case "html":
        C += this.renderer.html(h.text);
        continue;
      case "paragraph":
        C += this.renderer.paragraph(this.parseInline(h.tokens));
        continue;
      case "text":
        for (u = h.tokens ? this.parseInline(h.tokens) : h.text; t + 1 < S && i[t + 1].type === "text"; ) h = i[++t], u += `
` + (h.tokens ? this.parseInline(h.tokens) : h.text);
        C += e ? this.renderer.paragraph(u) : u;
        continue;
      default: {
        const L = 'Token with "' + h.type + '" type was not found.';
        if (this.options.silent) return void console.error(L);
        throw new Error(L);
      }
    }
    return C;
  }
  parseInline(i, e) {
    e = e || this.renderer;
    let t, n, r, s = "";
    const a = i.length;
    for (t = 0; t < a; t++) if (n = i[t], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[n.type] && (r = this.options.extensions.renderers[n.type].call({ parser: this }, n), r !== !1 || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(n.type))) s += r || "";
    else switch (n.type) {
      case "escape":
      case "text":
        s += e.text(n.text);
        break;
      case "html":
        s += e.html(n.text);
        break;
      case "link":
        s += e.link(n.href, n.title, this.parseInline(n.tokens, e));
        break;
      case "image":
        s += e.image(n.href, n.title, n.text);
        break;
      case "strong":
        s += e.strong(this.parseInline(n.tokens, e));
        break;
      case "em":
        s += e.em(this.parseInline(n.tokens, e));
        break;
      case "codespan":
        s += e.codespan(n.text);
        break;
      case "br":
        s += e.br();
        break;
      case "del":
        s += e.del(this.parseInline(n.tokens, e));
        break;
      default: {
        const l = 'Token with "' + n.type + '" type was not found.';
        if (this.options.silent) return void console.error(l);
        throw new Error(l);
      }
    }
    return s;
  }
}
function ee(o, i, e) {
  if (o == null) throw new Error("marked(): input parameter is undefined or null");
  if (typeof o != "string") throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(o) + ", string expected");
  if (typeof i == "function" && (e = i, i = null), u0(i = ki({}, ee.defaults, i || {})), e) {
    const t = i.highlight;
    let n;
    try {
      n = Xi.lex(o, i);
    } catch (a) {
      return e(a);
    }
    const r = function(a) {
      let l;
      if (!a) try {
        i.walkTokens && ee.walkTokens(n, i.walkTokens), l = en.parse(n, i);
      } catch (c) {
        a = c;
      }
      return i.highlight = t, a ? e(a) : e(null, l);
    };
    if (!t || t.length < 3 || (delete i.highlight, !n.length)) return r();
    let s = 0;
    return ee.walkTokens(n, function(a) {
      a.type === "code" && (s++, setTimeout(() => {
        t(a.text, a.lang, function(l, c) {
          if (l) return r(l);
          c != null && c !== a.text && (a.text = c, a.escaped = !0), s--, s === 0 && r();
        });
      }, 0));
    }), void (s === 0 && r());
  }
  try {
    const t = Xi.lex(o, i);
    return i.walkTokens && ee.walkTokens(t, i.walkTokens), en.parse(t, i);
  } catch (t) {
    if (t.message += `
Please report this to https://github.com/markedjs/marked.`, i.silent) return "<p>An error occurred:</p><pre>" + gt(t.message + "", !0) + "</pre>";
    throw t;
  }
}
ee.options = ee.setOptions = function(o) {
  var i;
  return ki(ee.defaults, o), i = ee.defaults, sr = i, ee;
}, ee.getDefaults = rI, ee.defaults = sr, ee.use = function(...o) {
  const i = ki({}, ...o), e = ee.defaults.extensions || { renderers: {}, childTokens: {} };
  let t;
  o.forEach((n) => {
    if (n.extensions && (t = !0, n.extensions.forEach((r) => {
      if (!r.name) throw new Error("extension name required");
      if (r.renderer) {
        const s = e.renderers ? e.renderers[r.name] : null;
        e.renderers[r.name] = s ? function(...a) {
          let l = r.renderer.apply(this, a);
          return l === !1 && (l = s.apply(this, a)), l;
        } : r.renderer;
      }
      if (r.tokenizer) {
        if (!r.level || r.level !== "block" && r.level !== "inline") throw new Error("extension level must be 'block' or 'inline'");
        e[r.level] ? e[r.level].unshift(r.tokenizer) : e[r.level] = [r.tokenizer], r.start && (r.level === "block" ? e.startBlock ? e.startBlock.push(r.start) : e.startBlock = [r.start] : r.level === "inline" && (e.startInline ? e.startInline.push(r.start) : e.startInline = [r.start]));
      }
      r.childTokens && (e.childTokens[r.name] = r.childTokens);
    })), n.renderer) {
      const r = ee.defaults.renderer || new Rd();
      for (const s in n.renderer) {
        const a = r[s];
        r[s] = (...l) => {
          let c = n.renderer[s].apply(r, l);
          return c === !1 && (c = a.apply(r, l)), c;
        };
      }
      i.renderer = r;
    }
    if (n.tokenizer) {
      const r = ee.defaults.tokenizer || new Nd();
      for (const s in n.tokenizer) {
        const a = r[s];
        r[s] = (...l) => {
          let c = n.tokenizer[s].apply(r, l);
          return c === !1 && (c = a.apply(r, l)), c;
        };
      }
      i.tokenizer = r;
    }
    if (n.walkTokens) {
      const r = ee.defaults.walkTokens;
      i.walkTokens = function(s) {
        n.walkTokens.call(this, s), r && r.call(this, s);
      };
    }
    t && (i.extensions = e), ee.setOptions(i);
  });
}, ee.walkTokens = function(o, i) {
  for (const e of o) switch (i.call(ee, e), e.type) {
    case "table":
      for (const t of e.header) ee.walkTokens(t.tokens, i);
      for (const t of e.rows) for (const n of t) ee.walkTokens(n.tokens, i);
      break;
    case "list":
      ee.walkTokens(e.items, i);
      break;
    default:
      ee.defaults.extensions && ee.defaults.extensions.childTokens && ee.defaults.extensions.childTokens[e.type] ? ee.defaults.extensions.childTokens[e.type].forEach(function(t) {
        ee.walkTokens(e[t], i);
      }) : e.tokens && ee.walkTokens(e.tokens, i);
  }
}, ee.parseInline = function(o, i) {
  if (o == null) throw new Error("marked.parseInline(): input parameter is undefined or null");
  if (typeof o != "string") throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(o) + ", string expected");
  u0(i = ki({}, ee.defaults, i || {}));
  try {
    const e = Xi.lexInline(o, i);
    return i.walkTokens && ee.walkTokens(e, i.walkTokens), en.parseInline(e, i);
  } catch (e) {
    if (e.message += `
Please report this to https://github.com/markedjs/marked.`, i.silent) return "<p>An error occurred:</p><pre>" + gt(e.message + "", !0) + "</pre>";
    throw e;
  }
}, ee.Parser = en, ee.parser = en.parse, ee.Renderer = Rd, ee.TextRenderer = h0, ee.Lexer = Xi, ee.lexer = Xi.lex, ee.Tokenizer = Nd, ee.Slugger = m0, ee.parse = ee, ee.options, ee.setOptions, ee.use, ee.walkTokens, ee.parseInline, en.parse, Xi.lex;
class _I {
  constructor() {
    m(this, "_parser");
    m(this, "_options", { gfm: !0, breaks: !0, tables: !0, xhtml: !0, headerIds: !1 });
    ee.use({ tokenizer: { autolink: () => null, url: () => null }, renderer: { checkbox(...i) {
      return Object.getPrototypeOf(this).checkbox.call(this, ...i).trimRight();
    }, code(...i) {
      return Object.getPrototypeOf(this).code.call(this, ...i).replace(`
</code>`, "</code>");
    } } }), this._parser = ee;
  }
  parse(i) {
    return this._parser.parse(i, this._options);
  }
}
function Ac(o, i) {
  return Array(i + 1).join(o);
}
var wI = ["ADDRESS", "ARTICLE", "ASIDE", "AUDIO", "BLOCKQUOTE", "BODY", "CANVAS", "CENTER", "DD", "DIR", "DIV", "DL", "DT", "FIELDSET", "FIGCAPTION", "FIGURE", "FOOTER", "FORM", "FRAMESET", "H1", "H2", "H3", "H4", "H5", "H6", "HEADER", "HGROUP", "HR", "HTML", "ISINDEX", "LI", "MAIN", "MENU", "NAV", "NOFRAMES", "NOSCRIPT", "OL", "OUTPUT", "P", "PRE", "SECTION", "TABLE", "TBODY", "TD", "TFOOT", "TH", "THEAD", "TR", "UL"];
function Qu(o) {
  return Ju(o, wI);
}
var g0 = ["AREA", "BASE", "BR", "COL", "COMMAND", "EMBED", "HR", "IMG", "INPUT", "KEYGEN", "LINK", "META", "PARAM", "SOURCE", "TRACK", "WBR"];
function p0(o) {
  return Ju(o, g0);
}
var nf = ["A", "TABLE", "THEAD", "TBODY", "TFOOT", "TH", "TD", "IFRAME", "SCRIPT", "AUDIO", "VIDEO"];
function Ju(o, i) {
  return i.indexOf(o.nodeName) >= 0;
}
function of(o, i) {
  return o.getElementsByTagName && i.some(function(e) {
    return o.getElementsByTagName(e).length;
  });
}
var xt = {};
function Xs(o) {
  return o ? o.replace(/(\n+\s*)+/g, `
`) : "";
}
function f0(o) {
  for (var i in this.options = o, this._keep = [], this._remove = [], this.blankRule = { replacement: o.blankReplacement }, this.keepReplacement = o.keepReplacement, this.defaultRule = { replacement: o.defaultReplacement }, this.array = [], o.rules) this.array.push(o.rules[i]);
}
function Tc(o, i, e) {
  for (var t = 0; t < o.length; t++) {
    var n = o[t];
    if (vI(n, i, e)) return n;
  }
}
function vI(o, i, e) {
  var t = o.filter;
  if (typeof t == "string") {
    if (t === i.nodeName.toLowerCase()) return !0;
  } else if (Array.isArray(t)) {
    if (t.indexOf(i.nodeName.toLowerCase()) > -1) return !0;
  } else {
    if (typeof t != "function") throw new TypeError("`filter` needs to be a string, array, or function");
    if (t.call(o, i, e)) return !0;
  }
}
function Ec(o) {
  var i = o.nextSibling || o.parentNode;
  return o.parentNode.removeChild(o), i;
}
function rf(o, i, e) {
  return o && o.parentNode === i || e(i) ? i.nextSibling || i.parentNode : i.firstChild || i.nextSibling || i.parentNode;
}
xt.paragraph = { filter: "p", replacement: function(o) {
  return `

` + o + `

`;
} }, xt.lineBreak = { filter: "br", replacement: function(o, i, e) {
  return e.br + `
`;
} }, xt.heading = { filter: ["h1", "h2", "h3", "h4", "h5", "h6"], replacement: function(o, i, e) {
  var t = Number(i.nodeName.charAt(1));
  return e.headingStyle === "setext" && t < 3 ? `

` + o + `
` + Ac(t === 1 ? "=" : "-", o.length) + `

` : `

` + Ac("#", t) + " " + o + `

`;
} }, xt.blockquote = { filter: "blockquote", replacement: function(o) {
  return `

` + (o = (o = o.replace(/^\n+|\n+$/g, "")).replace(/^/gm, "> ")) + `

`;
} }, xt.list = { filter: ["ul", "ol"], replacement: function(o, i) {
  var e = i.parentNode;
  return e.nodeName === "LI" && e.lastElementChild === i ? `
` + o : `

` + o + `

`;
} }, xt.listItem = { filter: "li", replacement: function(o, i, e) {
  o = o.replace(/^\n+/, "").replace(/\n+$/, `
`).replace(/\n/gm, `
    `);
  var t = e.bulletListMarker + "   ", n = i.parentNode;
  if (n.nodeName === "OL") {
    var r = n.getAttribute("start"), s = Array.prototype.indexOf.call(n.children, i);
    t = (r ? Number(r) + s : s + 1) + ".  ";
  }
  return t + o + (i.nextSibling && !/\n$/.test(o) ? `
` : "");
} }, xt.indentedCodeBlock = { filter: function(o, i) {
  return i.codeBlockStyle === "indented" && o.nodeName === "PRE" && o.firstChild && o.firstChild.nodeName === "CODE";
}, replacement: function(o, i, e) {
  return `

    ` + i.firstChild.textContent.replace(/\n/g, `
    `) + `

`;
} }, xt.fencedCodeBlock = { filter: function(o, i) {
  return i.codeBlockStyle === "fenced" && o.nodeName === "PRE" && o.firstChild && o.firstChild.nodeName === "CODE";
}, replacement: function(o, i, e) {
  for (var t, n = ((i.firstChild.getAttribute("class") || "").match(/language-(\S+)/) || [null, ""])[1], r = i.firstChild.textContent, s = e.fence.charAt(0), a = 3, l = new RegExp("^" + s + "{3,}", "gm"); t = l.exec(r); ) t[0].length >= a && (a = t[0].length + 1);
  var c = Ac(s, a);
  return `

` + c + n + `
` + r.replace(/\n$/, "") + `
` + c + `

`;
} }, xt.horizontalRule = { filter: "hr", replacement: function(o, i, e) {
  return `

` + e.hr + `

`;
} }, xt.inlineLink = { filter: function(o, i) {
  return i.linkStyle === "inlined" && o.nodeName === "A" && o.getAttribute("href");
}, replacement: function(o, i) {
  var e = i.getAttribute("href");
  e && (e = e.replace(/([()])/g, "\\$1"));
  var t = Xs(i.getAttribute("title"));
  return t && (t = ' "' + t.replace(/"/g, '\\"') + '"'), "[" + o + "](" + e + t + ")";
} }, xt.referenceLink = { filter: function(o, i) {
  return i.linkStyle === "referenced" && o.nodeName === "A" && o.getAttribute("href");
}, replacement: function(o, i, e) {
  var t, n, r = i.getAttribute("href"), s = Xs(i.getAttribute("title"));
  switch (s && (s = ' "' + s + '"'), e.linkReferenceStyle) {
    case "collapsed":
      t = "[" + o + "][]", n = "[" + o + "]: " + r + s;
      break;
    case "shortcut":
      t = "[" + o + "]", n = "[" + o + "]: " + r + s;
      break;
    default:
      var a = this.references.length + 1;
      t = "[" + o + "][" + a + "]", n = "[" + a + "]: " + r + s;
  }
  return this.references.push(n), t;
}, references: [], append: function(o) {
  var i = "";
  return this.references.length && (i = `

` + this.references.join(`
`) + `

`, this.references = []), i;
} }, xt.emphasis = { filter: ["em", "i"], replacement: function(o, i, e) {
  return o.trim() ? e.emDelimiter + o + e.emDelimiter : "";
} }, xt.strong = { filter: ["strong", "b"], replacement: function(o, i, e) {
  return o.trim() ? e.strongDelimiter + o + e.strongDelimiter : "";
} }, xt.code = { filter: function(o) {
  var i = o.previousSibling || o.nextSibling, e = o.parentNode.nodeName === "PRE" && !i;
  return o.nodeName === "CODE" && !e;
}, replacement: function(o) {
  if (!o) return "";
  o = o.replace(/\r?\n|\r/g, " ");
  for (var i = /^`|^ .*?[^ ].* $|`$/.test(o) ? " " : "", e = "`", t = o.match(/`+/gm) || []; t.indexOf(e) !== -1; ) e += "`";
  return e + i + o + i + e;
} }, xt.image = { filter: "img", replacement: function(o, i) {
  var e = Xs(i.getAttribute("alt")), t = i.getAttribute("src") || "", n = Xs(i.getAttribute("title"));
  return t ? "![" + e + "](" + t + (n ? ' "' + n + '"' : "") + ")" : "";
} }, f0.prototype = { add: function(o, i) {
  this.array.unshift(i);
}, keep: function(o) {
  this._keep.unshift({ filter: o, replacement: this.keepReplacement });
}, remove: function(o) {
  this._remove.unshift({ filter: o, replacement: function() {
    return "";
  } });
}, forNode: function(o) {
  return o.isBlank ? this.blankRule : (i = Tc(this.array, o, this.options)) || (i = Tc(this._keep, o, this.options)) || (i = Tc(this._remove, o, this.options)) ? i : this.defaultRule;
  var i;
}, forEach: function(o) {
  for (var i = 0; i < this.array.length; i++) o(this.array[i], i);
} };
var Sc = typeof window < "u" ? window : {}, sf, yI = function() {
  var o = Sc.DOMParser, i = !1;
  try {
    new o().parseFromString("", "text/html") && (i = !0);
  } catch {
  }
  return i;
}() ? Sc.DOMParser : function() {
  var o = function() {
  };
  return function() {
    var i = !1;
    try {
      document.implementation.createHTMLDocument("").open();
    } catch {
      Sc.ActiveXObject && (i = !0);
    }
    return i;
  }() ? o.prototype.parseFromString = function(i) {
    var e = new window.ActiveXObject("htmlfile");
    return e.designMode = "on", e.open(), e.write(i), e.close(), e;
  } : o.prototype.parseFromString = function(i) {
    var e = document.implementation.createHTMLDocument("");
    return e.open(), e.write(i), e.close(), e;
  }, o;
}();
function xI(o, i) {
  var e;
  return typeof o == "string" ? e = (sf = sf || new yI()).parseFromString('<x-turndown id="turndown-root">' + o + "</x-turndown>", "text/html").getElementById("turndown-root") : e = o.cloneNode(!0), function(t) {
    var n = t.element, r = t.isBlock, s = t.isVoid, a = t.isPre || function(p) {
      return p.nodeName === "PRE";
    };
    if (n.firstChild && !a(n)) {
      for (var l = null, c = !1, d = null, u = rf(d, n, a); u !== n; ) {
        if (u.nodeType === 3 || u.nodeType === 4) {
          var h = u.data.replace(/[ \r\n\t]+/g, " ");
          if (l && !/ $/.test(l.data) || c || h[0] !== " " || (h = h.substr(1)), !h) {
            u = Ec(u);
            continue;
          }
          u.data = h, l = u;
        } else {
          if (u.nodeType !== 1) {
            u = Ec(u);
            continue;
          }
          r(u) || u.nodeName === "BR" ? (l && (l.data = l.data.replace(/ $/, "")), l = null, c = !1) : s(u) || a(u) ? (l = null, c = !0) : l && (c = !1);
        }
        var g = rf(d, u, a);
        d = u, u = g;
      }
      l && (l.data = l.data.replace(/ $/, ""), l.data || Ec(l));
    }
  }({ element: e, isBlock: Qu, isVoid: p0, isPre: i.preformattedCode ? CI : null }), e;
}
function CI(o) {
  return o.nodeName === "PRE" || o.nodeName === "CODE";
}
function AI(o, i) {
  return o.isBlock = Qu(o), o.isCode = o.nodeName === "CODE" || o.parentNode.isCode, o.isBlank = function(e) {
    return !p0(e) && !function(t) {
      return Ju(t, nf);
    }(e) && /^\s*$/i.test(e.textContent) && !function(t) {
      return of(t, g0);
    }(e) && !function(t) {
      return of(t, nf);
    }(e);
  }(o), o.flankingWhitespace = function(e, t) {
    if (e.isBlock || t.preformattedCode && e.isCode) return { leading: "", trailing: "" };
    var n = (r = e.textContent, s = r.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/), { leading: s[1], leadingAscii: s[2], leadingNonAscii: s[3], trailing: s[4], trailingNonAscii: s[5], trailingAscii: s[6] }), r, s;
    return n.leadingAscii && af("left", e, t) && (n.leading = n.leadingNonAscii), n.trailingAscii && af("right", e, t) && (n.trailing = n.trailingNonAscii), { leading: n.leading, trailing: n.trailing };
  }(o, i), o;
}
function af(o, i, e) {
  var t, n, r;
  return o === "left" ? (t = i.previousSibling, n = / $/) : (t = i.nextSibling, n = /^ /), t && (t.nodeType === 3 ? r = n.test(t.nodeValue) : e.preformattedCode && t.nodeName === "CODE" ? r = !1 : t.nodeType !== 1 || Qu(t) || (r = n.test(t.textContent))), r;
}
var TI = Array.prototype.reduce, EI = [[/\\/g, "\\\\"], [/\*/g, "\\*"], [/^-/g, "\\-"], [/^\+ /g, "\\+ "], [/^(=+)/g, "\\$1"], [/^(#{1,6}) /g, "\\$1 "], [/`/g, "\\`"], [/^~~~/g, "\\~~~"], [/\[/g, "\\["], [/\]/g, "\\]"], [/^>/g, "\\>"], [/_/g, "\\_"], [/^(\d+)\. /g, "$1\\. "]];
function qa(o) {
  if (!(this instanceof qa)) return new qa(o);
  var i = { rules: xt, headingStyle: "setext", hr: "* * *", bulletListMarker: "*", codeBlockStyle: "indented", fence: "```", emDelimiter: "_", strongDelimiter: "**", linkStyle: "inlined", linkReferenceStyle: "full", br: "  ", preformattedCode: !1, blankReplacement: function(e, t) {
    return t.isBlock ? `

` : "";
  }, keepReplacement: function(e, t) {
    return t.isBlock ? `

` + t.outerHTML + `

` : t.outerHTML;
  }, defaultReplacement: function(e, t) {
    return t.isBlock ? `

` + e + `

` : e;
  } };
  this.options = function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var r in n) n.hasOwnProperty(r) && (e[r] = n[r]);
    }
    return e;
  }({}, i, o), this.rules = new f0(this.options);
}
function b0(o) {
  var i = this;
  return TI.call(o.childNodes, function(e, t) {
    var n = "";
    return (t = new AI(t, i.options)).nodeType === 3 ? n = t.isCode ? t.nodeValue : i.escape(t.nodeValue) : t.nodeType === 1 && (n = II.call(i, t)), k0(e, n);
  }, "");
}
function SI(o) {
  var i = this;
  return this.rules.forEach(function(e) {
    typeof e.append == "function" && (o = k0(o, e.append(i.options)));
  }), o.replace(/^[\t\r\n]+/, "").replace(/[\t\r\n\s]+$/, "");
}
function II(o) {
  var i = this.rules.forNode(o), e = b0.call(this, o), t = o.flankingWhitespace;
  return (t.leading || t.trailing) && (e = e.trim()), t.leading + i.replacement(e, o, this.options) + t.trailing;
}
function k0(o, i) {
  var e = function(r) {
    for (var s = r.length; s > 0 && r[s - 1] === `
`; ) s--;
    return r.substring(0, s);
  }(o), t = i.replace(/^\n*/, ""), n = Math.max(o.length - e.length, i.length - t.length);
  return e + `

`.substring(0, n) + t;
}
qa.prototype = { turndown: function(o) {
  if (!function(e) {
    return e != null && (typeof e == "string" || e.nodeType && (e.nodeType === 1 || e.nodeType === 9 || e.nodeType === 11));
  }(o)) throw new TypeError(o + " is not a string, or an element/document/fragment node.");
  if (o === "") return "";
  var i = b0.call(this, new xI(o, this.options));
  return SI.call(this, i);
}, use: function(o) {
  if (Array.isArray(o)) for (var i = 0; i < o.length; i++) this.use(o[i]);
  else {
    if (typeof o != "function") throw new TypeError("plugin must be a Function or an Array of Functions");
    o(this);
  }
  return this;
}, addRule: function(o, i) {
  return this.rules.add(o, i), this;
}, keep: function(o) {
  return this.rules.keep(o), this;
}, remove: function(o) {
  return this.rules.remove(o), this;
}, escape: function(o) {
  return EI.reduce(function(i, e) {
    return i.replace(e[0], e[1]);
  }, o);
} };
var lf = /highlight-(?:text|source)-([a-z0-9]+)/;
function PI(o) {
  o.addRule("highlightedCodeBlock", { filter: function(i) {
    var e = i.firstChild;
    return i.nodeName === "DIV" && lf.test(i.className) && e && e.nodeName === "PRE";
  }, replacement: function(i, e, t) {
    var n = ((e.className || "").match(lf) || [null, ""])[1];
    return `

` + t.fence + n + `
` + e.firstChild.textContent + `
` + t.fence + `

`;
  } });
}
function MI(o) {
  o.addRule("strikethrough", { filter: ["del", "s", "strike"], replacement: function(i) {
    return "~" + i + "~";
  } });
}
var VI = Array.prototype.indexOf, LI = Array.prototype.every, jo = {};
function zd(o) {
  var i, e, t = o.parentNode;
  return t.nodeName === "THEAD" || t.firstChild === o && (t.nodeName === "TABLE" || (e = (i = t).previousSibling, i.nodeName === "TBODY" && (!e || e.nodeName === "THEAD" && /^\s*$/i.test(e.textContent)))) && LI.call(o.childNodes, function(n) {
    return n.nodeName === "TH";
  });
}
function cf(o, i) {
  var e = " ";
  return VI.call(i.parentNode.childNodes, i) === 0 && (e = "| "), e + o + " |";
}
function OI(o) {
  for (var i in o.keep(function(e) {
    return e.nodeName === "TABLE" && !zd(e.rows[0]);
  }), jo) o.addRule(i, jo[i]);
}
function NI(o) {
  o.addRule("taskListItems", { filter: function(i) {
    return i.type === "checkbox" && i.parentNode.nodeName === "LI";
  }, replacement: function(i, e) {
    return (e.checked ? "[x]" : "[ ]") + " ";
  } });
}
function RI(o) {
  o.use([PI, MI, OI, NI]);
}
jo.tableCell = { filter: ["th", "td"], replacement: function(o, i) {
  return cf(o, i);
} }, jo.tableRow = { filter: "tr", replacement: function(o, i) {
  var e = "", t = { left: ":--", right: "--:", center: ":-:" };
  if (zd(i)) for (var n = 0; n < i.childNodes.length; n++) {
    var r = "---", s = (i.childNodes[n].getAttribute("align") || "").toLowerCase();
    s && (r = t[s] || r), e += cf(r, i.childNodes[n]);
  }
  return `
` + o + (e ? `
` + e : "");
} }, jo.table = { filter: function(o) {
  return o.nodeName === "TABLE" && zd(o.rows[0]);
}, replacement: function(o) {
  return `

` + (o = o.replace(`

`, `
`)) + `

`;
} }, jo.tableSection = { filter: ["thead", "tbody", "tfoot"], replacement: function(o) {
  return o;
} };
const zI = new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source + /(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source + /(?:[^\s<>]*)/.source, "gi");
class BI extends qa {
  escape(i) {
    const e = super.escape;
    function t(s) {
      return s = (s = e(s)).replace(/</g, "\\<");
    }
    let n = "", r = 0;
    for (const s of this._matchAutolink(i)) {
      const a = s.index;
      a > r && (n += t(i.substring(r, a)));
      const l = s[0];
      n += l, r = a + l.length;
    }
    return r < i.length && (n += t(i.substring(r, i.length))), n;
  }
  *_matchAutolink(i) {
    for (const e of i.matchAll(zI)) {
      const t = e[0], n = this._autolinkFindEnd(t);
      yield Object.assign([t.substring(0, n)], { index: e.index });
    }
  }
  _autolinkFindEnd(i) {
    let e = i.length;
    for (; e > 0; ) {
      const t = i[e - 1];
      if (`?!.,:*_~'"`.includes(t)) e--;
      else {
        if (t != ")") break;
        {
          let n = 0;
          for (let r = 0; r < e; r++) i[r] == "(" ? n++ : i[r] == ")" && n--;
          if (!(n < 0)) break;
          e--;
        }
      }
    }
    return e;
  }
}
class DI {
  constructor() {
    m(this, "_parser");
    this._parser = this._createParser();
  }
  parse(i) {
    return this._parser.turndown(i);
  }
  keep(i) {
    this._parser.keep(i);
  }
  _createParser() {
    const i = new BI({ codeBlockStyle: "fenced", hr: "---", headingStyle: "atx" });
    return i.use([RI, this._todoList]), i;
  }
  _todoList(i) {
    i.addRule("taskListItems", { filter: (e) => e.type === "checkbox" && (e.parentNode.nodeName === "LI" || e.parentNode.parentNode.nodeName === "LI"), replacement: (e, t) => (t.checked ? "[x]" : "[ ]") + " " });
  }
}
class _0 {
  constructor(i) {
    m(this, "_htmlDP");
    m(this, "_markdown2html");
    m(this, "_html2markdown");
    this._htmlDP = new a_(i), this._markdown2html = new _I(), this._html2markdown = new DI();
  }
  keepHtml(i) {
    this._html2markdown.keep([i]);
  }
  toView(i) {
    const e = this._markdown2html.parse(i);
    return this._htmlDP.toView(e);
  }
  toData(i) {
    const e = this._htmlDP.toData(i);
    return this._html2markdown.parse(e);
  }
  registerRawContentMatcher(i) {
    this._htmlDP.registerRawContentMatcher(i);
  }
  useFillerType() {
  }
}
class FI extends A {
  constructor(i) {
    super(i), i.data.processor = new _0(i.data.viewDocument);
  }
  static get pluginName() {
    return "Markdown";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const jI = ["SPAN", "BR", "PRE", "CODE"];
class HI extends A {
  constructor(e) {
    super(e);
    m(this, "_gfmDataProcessor");
    this._gfmDataProcessor = new _0(e.data.viewDocument);
  }
  static get pluginName() {
    return "PasteFromMarkdownExperimental";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Lt];
  }
  init() {
    const e = this.editor, t = e.editing.view.document, n = e.plugins.get("ClipboardPipeline");
    let r = !1;
    this.listenTo(t, "keydown", (s, a) => {
      r = a.shiftKey;
    }), this.listenTo(n, "inputTransformation", (s, a) => {
      if (r) return;
      const l = a.dataTransfer.getData("text/html");
      if (!l) {
        const d = a.dataTransfer.getData("text/plain");
        return void (a.content = this._gfmDataProcessor.toView(d));
      }
      const c = this._parseMarkdownFromHtml(l);
      c && (a.content = this._gfmDataProcessor.toView(c));
    });
  }
  _parseMarkdownFromHtml(e) {
    const t = this._removeOsSpecificTags(e);
    if (!this._containsOnlyAllowedFirstLevelTags(t)) return null;
    const n = this._removeFirstLevelWrapperTagsAndBrs(t);
    return this._containsAnyRemainingHtmlTags(n) ? null : this._replaceHtmlReservedEntitiesWithCharacters(n);
  }
  _removeOsSpecificTags(e) {
    return e.replace(/^<meta\b[^>]*>/, "").trim().replace(/^<html>/, "").replace(/<\/html>$/, "").trim().replace(/^<body>/, "").replace(/<\/body>$/, "").trim().replace(/^<!--StartFragment-->/, "").replace(/<!--EndFragment-->$/, "").trim();
  }
  _containsOnlyAllowedFirstLevelTags(e) {
    const t = new DOMParser(), { body: n } = t.parseFromString(e, "text/html");
    return Array.from(n.children).map((r) => r.tagName).every((r) => jI.includes(r));
  }
  _removeFirstLevelWrapperTagsAndBrs(e) {
    const t = new DOMParser(), { body: n } = t.parseFromString(e, "text/html"), r = n.querySelectorAll("br");
    for (const a of r) a.replaceWith(`
`);
    const s = n.querySelectorAll(":scope > *");
    for (const a of s) {
      const l = a.cloneNode(!0);
      a.replaceWith(...l.childNodes);
    }
    return n.innerHTML;
  }
  _containsAnyRemainingHtmlTags(e) {
    return e.includes("<");
  }
  _replaceHtmlReservedEntitiesWithCharacters(e) {
    return e.replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&nbsp;/g, " ");
  }
}
function df(o, i) {
  const e = (t, n, r) => {
    if (!r.consumable.consume(n.item, t.name)) return;
    const s = n.attributeNewValue, a = r.writer, l = r.mapper.toViewElement(n.item), c = [...l.getChildren()].find((u) => u.getCustomProperty("media-content"));
    a.remove(c);
    const d = o.getMediaViewElement(a, s, i);
    a.insert(a.createPositionAt(l, 0), d);
  };
  return (t) => {
    t.on("attribute:url:media", e);
  };
}
function uf(o, i, e, t) {
  return o.createContainerElement("figure", { class: "media" }, [i.getMediaViewElement(o, e, t), o.createSlot()]);
}
function hf(o) {
  const i = o.getSelectedElement();
  return i && i.is("element", "media") ? i : null;
}
function w0(o, i, e, t) {
  o.change((n) => {
    const r = n.createElement("media", { url: i });
    o.insertObject(r, e, null, { setSelection: "on", findOptimalPosition: t ? "auto" : void 0 });
  });
}
class $I extends G {
  refresh() {
    const i = this.editor.model, e = i.document.selection, t = hf(e);
    this.value = t ? t.getAttribute("url") : void 0, this.isEnabled = function(n) {
      const r = n.getSelectedElement();
      return !!r && r.name === "media";
    }(e) || function(n, r) {
      let a = Fu(n, r).start.parent;
      return a.isEmpty && !r.schema.isLimit(a) && (a = a.parent), r.schema.checkChild(a, "media");
    }(e, i);
  }
  execute(i) {
    const e = this.editor.model, t = e.document.selection, n = hf(t);
    n ? e.change((r) => {
      r.setAttribute("url", i, n);
    }) : w0(e, i, t, !0);
  }
}
class UI {
  constructor(i, e) {
    m(this, "locale");
    m(this, "providerDefinitions");
    const t = e.providers, n = e.extraProviders || [], r = new Set(e.removeProviders), s = t.concat(n).filter((a) => {
      const l = a.name;
      return l ? !r.has(l) : (ce("media-embed-no-provider-name", { provider: a }), !1);
    });
    this.locale = i, this.providerDefinitions = s;
  }
  hasMedia(i) {
    return !!this._getMedia(i);
  }
  getMediaViewElement(i, e, t) {
    return this._getMedia(e).getViewElement(i, t);
  }
  _getMedia(i) {
    if (!i) return new mf(this.locale);
    i = i.trim();
    for (const e of this.providerDefinitions) {
      const t = e.html, n = De(e.url);
      for (const r of n) {
        const s = this._getUrlMatches(i, r);
        if (s) return new mf(this.locale, i, s, t);
      }
    }
    return null;
  }
  _getUrlMatches(i, e) {
    let t = i.match(e);
    if (t) return t;
    let n = i.replace(/^https?:\/\//, "");
    return t = n.match(e), t || (n = n.replace(/^www\./, ""), t = n.match(e), t || null);
  }
}
class mf {
  constructor(i, e, t, n) {
    m(this, "url");
    m(this, "_locale");
    m(this, "_match");
    m(this, "_previewRenderer");
    this.url = this._getValidUrl(e), this._locale = i, this._match = t, this._previewRenderer = n;
  }
  getViewElement(i, e) {
    const t = {};
    let n;
    if (e.renderForEditingView || e.renderMediaPreview && this.url && this._previewRenderer) {
      this.url && (t["data-oembed-url"] = this.url), e.renderForEditingView && (t.class = "ck-media__wrapper");
      const r = this._getPreviewHtml(e);
      n = i.createRawElement("div", t, (s, a) => {
        a.setContentOf(s, r);
      });
    } else this.url && (t.url = this.url), n = i.createEmptyElement(e.elementName, t);
    return i.setCustomProperty("media-content", !0, n), n;
  }
  _getPreviewHtml(i) {
    return this._previewRenderer ? this._previewRenderer(this._match) : this.url && i.renderForEditingView ? this._getPlaceholderHtml() : "";
  }
  _getPlaceholderHtml() {
    const i = new ui(), e = this._locale.t;
    return i.content = sA, i.viewBox = "0 0 64 42", new li({ tag: "div", attributes: { class: "ck ck-reset_all ck-media__placeholder" }, children: [{ tag: "div", attributes: { class: "ck-media__placeholder__icon" }, children: [i] }, { tag: "a", attributes: { class: "ck-media__placeholder__url", target: "_blank", rel: "noopener noreferrer", href: this.url, "data-cke-tooltip-text": e("Open media in new tab") }, children: [{ tag: "span", attributes: { class: "ck-media__placeholder__url__text" }, children: [this.url] }] }] }).render().outerHTML;
  }
  _getValidUrl(i) {
    return i ? i.match(/^https?/) ? i : "https://" + i : null;
  }
}
class Wa extends A {
  constructor(e) {
    super(e);
    m(this, "registry");
    e.config.define("mediaEmbed", { elementName: "oembed", providers: [{ name: "dailymotion", url: [/^dailymotion\.com\/video\/(\w+)/, /^dai.ly\/(\w+)/], html: (t) => `<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>` }, { name: "spotify", url: [/^open\.spotify\.com\/(artist\/\w+)/, /^open\.spotify\.com\/(album\/\w+)/, /^open\.spotify\.com\/(track\/\w+)/], html: (t) => `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>` }, { name: "youtube", url: [/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/, /^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/, /^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/, /^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/, /^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/], html: (t) => {
      const n = t[1], r = t[2];
      return `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${n}${r ? `?start=${r}` : ""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`;
    } }, { name: "vimeo", url: [/^vimeo\.com\/(\d+)/, /^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/album\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/channels\/[^/]+\/(\d+)/, /^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/, /^vimeo\.com\/ondemand\/[^/]+\/(\d+)/, /^player\.vimeo\.com\/video\/(\d+)/], html: (t) => `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>` }, { name: "instagram", url: [/^instagram\.com\/p\/(\w+)/, /^instagram\.com\/reel\/(\w+)/] }, { name: "twitter", url: [/^twitter\.com/, /^x\.com/] }, { name: "googleMaps", url: [/^google\.com\/maps/, /^goo\.gl\/maps/, /^maps\.google\.com/, /^maps\.app\.goo\.gl/] }, { name: "flickr", url: /^flickr\.com/ }, { name: "facebook", url: /^facebook\.com/ }] }), this.registry = new UI(e.locale, e.config.get("mediaEmbed"));
  }
  static get pluginName() {
    return "MediaEmbedEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model.schema, n = e.t, r = e.conversion, s = e.config.get("mediaEmbed.previewsInData"), a = e.config.get("mediaEmbed.elementName"), l = this.registry;
    e.commands.add("mediaEmbed", new $I(e)), t.register("media", { inheritAllFrom: "$blockObject", allowAttributes: ["url"] }), r.for("dataDowncast").elementToStructure({ model: "media", view: (c, { writer: d }) => {
      const u = c.getAttribute("url");
      return uf(d, l, u, { elementName: a, renderMediaPreview: !!u && s });
    } }), r.for("dataDowncast").add(df(l, { elementName: a, renderMediaPreview: s })), r.for("editingDowncast").elementToStructure({ model: "media", view: (c, { writer: d }) => {
      const u = c.getAttribute("url");
      return function(h, g, p) {
        return g.setCustomProperty("media", !0, h), wl(h, g, { label: p });
      }(uf(d, l, u, { elementName: a, renderForEditingView: !0 }), d, n("media widget"));
    } }), r.for("editingDowncast").add(df(l, { elementName: a, renderForEditingView: !0 })), r.for("upcast").elementToElement({ view: (c) => ["oembed", a].includes(c.name) && c.getAttribute("url") ? { name: !0 } : null, model: (c, { writer: d }) => {
      const u = c.getAttribute("url");
      return l.hasMedia(u) ? d.createElement("media", { url: u }) : null;
    } }).elementToElement({ view: { name: "div", attributes: { "data-oembed-url": !0 } }, model: (c, { writer: d }) => {
      const u = c.getAttribute("data-oembed-url");
      return l.hasMedia(u) ? d.createElement("media", { url: u }) : null;
    } }).add((c) => {
      c.on("element:figure", (d, u, h) => {
        if (!h.consumable.consume(u.viewItem, { name: !0, classes: "media" })) return;
        const { modelRange: g, modelCursor: p } = h.convertChildren(u.viewItem, u.modelCursor);
        u.modelRange = g, u.modelCursor = p, Te(g.getItems()) || h.consumable.revert(u.viewItem, { name: !0, classes: "media" });
      });
    });
  }
}
const qI = /^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;
class WI extends A {
  constructor(e) {
    super(e);
    m(this, "_timeoutId");
    m(this, "_positionToInsert");
    this._timeoutId = null, this._positionToInsert = null;
  }
  static get requires() {
    return [ju, Di, $u];
  }
  static get pluginName() {
    return "AutoMediaEmbed";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor, t = e.model.document, n = e.plugins.get("ClipboardPipeline");
    this.listenTo(n, "inputTransformation", () => {
      const r = t.selection.getFirstRange(), s = Je.fromPosition(r.start);
      s.stickiness = "toPrevious";
      const a = Je.fromPosition(r.end);
      a.stickiness = "toNext", t.once("change:data", () => {
        this._embedMediaBetweenPositions(s, a), s.detach(), a.detach();
      }, { priority: "high" });
    }), e.commands.get("undo").on("execute", () => {
      this._timeoutId && (z.window.clearTimeout(this._timeoutId), this._positionToInsert.detach(), this._timeoutId = null, this._positionToInsert = null);
    }, { priority: "high" });
  }
  _embedMediaBetweenPositions(e, t) {
    const n = this.editor, r = n.plugins.get(Wa).registry, s = new Mt(e, t), a = s.getWalker({ ignoreElementEnd: !0 });
    let l = "";
    for (const c of a) c.item.is("$textProxy") && (l += c.item.data);
    if (l = l.trim(), !l.match(qI) || !r.hasMedia(l)) return void s.detach();
    n.commands.get("mediaEmbed").isEnabled ? (this._positionToInsert = Je.fromPosition(e), this._timeoutId = z.window.setTimeout(() => {
      n.model.change((c) => {
        this._timeoutId = null, c.remove(s), s.detach();
        let d = null;
        this._positionToInsert.root.rootName !== "$graveyard" && (d = this._positionToInsert), w0(n.model, l, d, !1), this._positionToInsert.detach(), this._positionToInsert = null;
      }), n.plugins.get(Di).requestUndoOnBackspace();
    }, 100)) : s.detach();
  }
}
class GI extends N {
  constructor(e, t) {
    super(t);
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "urlInputView");
    m(this, "_validators");
    m(this, "_urlInputViewInfoDefault");
    m(this, "_urlInputViewInfoTip");
    this.focusTracker = new fe(), this.keystrokes = new Le(), this.set("mediaURLInputValue", ""), this.urlInputView = this._createUrlInput(), this._validators = e, this.setTemplate({ tag: "form", attributes: { class: ["ck", "ck-media-form", "ck-responsive-form"], tabindex: "-1" }, children: [this.urlInputView] });
  }
  render() {
    super.render(), lr({ view: this }), this.focusTracker.add(this.urlInputView.element), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this.urlInputView.focus();
  }
  get url() {
    return this.urlInputView.fieldView.element.value.trim();
  }
  set url(e) {
    this.urlInputView.fieldView.value = e.trim();
  }
  isValid() {
    this.resetFormStatus();
    for (const e of this._validators) {
      const t = e(this);
      if (t) return this.urlInputView.errorText = t, !1;
    }
    return !0;
  }
  resetFormStatus() {
    this.urlInputView.errorText = null, this.urlInputView.infoText = this._urlInputViewInfoDefault;
  }
  _createUrlInput() {
    const e = this.locale.t, t = new Ri(this.locale, Ln), n = t.fieldView;
    return this._urlInputViewInfoDefault = e("Paste the media URL in the input."), this._urlInputViewInfoTip = e("Tip: Paste the URL into the content to embed faster."), t.label = e("Media URL"), t.infoText = this._urlInputViewInfoDefault, n.inputMode = "url", n.on("input", () => {
      t.infoText = n.element.value ? this._urlInputViewInfoTip : this._urlInputViewInfoDefault, this.mediaURLInputValue = n.element.value.trim();
    }), t;
  }
}
class ZI extends A {
  constructor() {
    super(...arguments);
    m(this, "_formView");
  }
  static get requires() {
    return [Wa, oo];
  }
  static get pluginName() {
    return "MediaEmbedUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor;
    e.ui.componentFactory.add("mediaEmbed", () => {
      const t = this.editor.locale.t, n = this._createDialogButton(j);
      return n.tooltip = !0, n.label = t("Insert media"), n;
    }), e.ui.componentFactory.add("menuBar:mediaEmbed", () => {
      const t = this.editor.locale.t, n = this._createDialogButton(Ie);
      return n.label = t("Media"), n;
    });
  }
  _createDialogButton(e) {
    const t = this.editor, n = new e(t.locale), r = t.commands.get("mediaEmbed"), s = this.editor.plugins.get("Dialog");
    return n.icon = aA, n.bind("isEnabled").to(r, "isEnabled"), n.on("execute", () => {
      s.id === "mediaEmbed" ? s.hide() : this._showDialog();
    }), n;
  }
  _showDialog() {
    const e = this.editor, t = e.plugins.get("Dialog"), n = e.commands.get("mediaEmbed"), r = e.locale.t, s = n.value !== void 0;
    if (!this._formView) {
      const a = e.plugins.get(Wa).registry;
      this._formView = new (ls(GI))(/* @__PURE__ */ function(l, c) {
        return [(d) => {
          if (!d.url.length) return l("The URL must not be empty.");
        }, (d) => {
          if (!c.hasMedia(d.url)) return l("This media URL is not supported.");
        }];
      }(e.t, a), e.locale), this._formView.on("submit", () => this._handleSubmitForm());
    }
    t.show({ id: "mediaEmbed", title: r("Media embed"), content: this._formView, isModal: !0, onShow: () => {
      this._formView.url = n.value || "", this._formView.resetFormStatus(), this._formView.urlInputView.fieldView.select();
    }, actionButtons: [{ label: r("Cancel"), withText: !0, onExecute: () => t.hide() }, { label: r(s ? "Save" : "Insert"), class: "ck-button-action", withText: !0, onExecute: () => this._handleSubmitForm() }] });
  }
  _handleSubmitForm() {
    const e = this.editor, t = e.plugins.get("Dialog");
    this._formView.isValid() && (e.execute("mediaEmbed", this._formView.url), t.hide(), e.editing.view.focus());
  }
}
class KI extends A {
  static get requires() {
    return [Wa, ZI, WI, dr];
  }
  static get pluginName() {
    return "MediaEmbed";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const gf = { "(": ")", "[": "]", "{": "}" };
class YI extends G {
  constructor(i) {
    super(i), this._isEnabledBasedOnSelection = !1;
  }
  refresh() {
    const i = this.editor.model, e = i.document;
    this.isEnabled = i.schema.checkAttributeInSelection(e.selection, "mention");
  }
  execute(i) {
    const e = this.editor.model, t = e.document.selection, n = typeof i.mention == "string" ? { id: i.mention } : i.mention, r = n.id, s = i.range || t.getFirstRange();
    if (!e.canEditAt(s)) return;
    const a = i.text || r, l = v0({ _text: a, id: r }, n);
    if (!r.startsWith(i.marker)) throw new v("mentioncommand-incorrect-id", this);
    e.change((c) => {
      const d = yi(t.getAttributes()), u = new Map(d.entries());
      u.set("mention", l);
      const h = e.insertContent(c.createText(a, u), s), g = h.start.nodeBefore, p = h.end.nodeAfter, f = p && p.is("$text") && p.data.startsWith(" ");
      let b = !1;
      if (g && p && g.is("$text") && p.is("$text")) {
        const k = g.data.slice(-1), _ = k in gf, w = _ && p.data.startsWith(gf[k]);
        b = _ && w;
      }
      b || f || e.insertContent(c.createText(" ", d), s.start.getShiftedBy(a.length));
    });
  }
}
class QI extends A {
  static get pluginName() {
    return "MentionEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.model, t = e.document;
    e.schema.extend("$text", { allowAttributes: "mention" }), i.conversion.for("upcast").elementToAttribute({ view: { name: "span", attributes: "data-mention", classes: "mention" }, model: { key: "mention", value: (n) => y0(n) } }), i.conversion.for("downcast").attributeToElement({ model: "mention", view: XI }), i.conversion.for("downcast").add(JI), t.registerPostFixer((n) => function(r, s, a) {
      const l = s.differ.getChanges();
      let c = !1;
      for (const d of l) {
        if (d.type == "attribute") continue;
        const u = d.position;
        if (d.name == "$text") {
          const h = u.textNode && u.textNode.nextSibling;
          c = Gn(u.textNode, r) || c, c = Gn(h, r) || c, c = Gn(u.nodeBefore, r) || c, c = Gn(u.nodeAfter, r) || c;
        }
        if (d.name != "$text" && d.type == "insert") {
          const h = u.nodeAfter;
          for (const g of r.createRangeIn(h).getItems()) c = Gn(g, r) || c;
        }
        if (d.type == "insert" && a.isInline(d.name)) {
          const h = u.nodeAfter && u.nodeAfter.nextSibling;
          c = Gn(u.nodeBefore, r) || c, c = Gn(h, r) || c;
        }
      }
      return c;
    }(n, t, e.schema)), t.registerPostFixer((n) => function(r, s) {
      const a = s.differ.getChanges();
      let l = !1;
      for (const c of a) if (c.type === "attribute" && c.attributeKey != "mention") {
        const d = c.range.start.nodeBefore, u = c.range.end.nodeAfter;
        for (const h of [d, u]) x0(h) && h.getAttribute(c.attributeKey) != c.attributeNewValue && (r.setAttribute(c.attributeKey, c.attributeNewValue, h), l = !0);
      }
      return l;
    }(n, t)), t.registerPostFixer((n) => function(r, s) {
      const a = s.selection, l = a.focus;
      return a.isCollapsed && a.hasAttribute("mention") && function(c) {
        const d = c.isAtStart;
        return c.nodeBefore && c.nodeBefore.is("$text") || d;
      }(l) ? (r.removeSelectionAttribute("mention"), !0) : !1;
    }(n, t)), i.commands.add("mention", new YI(i));
  }
}
function v0(o, i) {
  return Object.assign({ uid: Tt() }, o, i || {});
}
function y0(o, i) {
  const e = o.getAttribute("data-mention"), t = o.getChild(0);
  if (t)
    return v0({ id: e, _text: t.data }, i);
}
function JI(o) {
  o.on("attribute:mention", (i, e, t) => {
    const n = e.attributeNewValue;
    if (!e.item.is("$textProxy") || !n) return;
    const r = e.range.start;
    (r.textNode || r.nodeAfter).data != n._text && t.consumable.consume(e.item, i.name);
  }, { priority: "highest" });
}
function XI(o, { writer: i }) {
  if (!o) return;
  const e = { class: "mention", "data-mention": o.id }, t = { id: o.uid, priority: 20 };
  return i.createAttributeElement("span", e, t);
}
function x0(o) {
  return !o || !o.is("$text") && !o.is("$textProxy") || !o.hasAttribute("mention") ? !1 : o.data != o.getAttribute("mention")._text;
}
function Gn(o, i) {
  return !!x0(o) && (i.removeAttribute("mention", o), !0);
}
class eP extends go {
  constructor(e) {
    super(e);
    m(this, "selected");
    m(this, "position");
    this.extendTemplate({ attributes: { class: ["ck-mentions"], tabindex: "-1" } });
  }
  selectFirst() {
    this.select(0);
  }
  selectNext() {
    const e = this.selected, t = this.items.getIndex(e);
    this.select(t + 1);
  }
  selectPrevious() {
    const e = this.selected, t = this.items.getIndex(e);
    this.select(t - 1);
  }
  select(e) {
    let t = 0;
    e > 0 && e < this.items.length ? t = e : e < 0 && (t = this.items.length - 1);
    const n = this.items.get(t);
    this.selected !== n && (this.selected && this.selected.removeHighlight(), n.highlight(), this.selected = n, this._isItemVisibleInScrolledArea(n) || (this.element.scrollTop = n.element.offsetTop));
  }
  executeSelected() {
    this.selected.fire("execute");
  }
  _isItemVisibleInScrolledArea(e) {
    return new K(this.element).contains(new K(e.element));
  }
}
class tP extends N {
  constructor(e, t) {
    super(e);
    m(this, "domElement");
    this.template = void 0, this.domElement = t, this.domElement.classList.add("ck-button"), this.set("isOn", !1), this.on("change:isOn", (n, r, s) => {
      s ? (this.domElement.classList.add("ck-on"), this.domElement.classList.remove("ck-off")) : (this.domElement.classList.add("ck-off"), this.domElement.classList.remove("ck-on"));
    }), this.listenTo(this.domElement, "click", () => {
      this.fire("execute");
    });
  }
  render() {
    super.render(), this.element = this.domElement;
  }
  focus() {
    this.domElement.focus();
  }
}
class iP extends hi {
  constructor() {
    super(...arguments);
    m(this, "item");
    m(this, "marker");
  }
  highlight() {
    this.children.first.isOn = !0;
  }
  removeHighlight() {
    this.children.first.isOn = !1;
  }
}
const nP = [ne.arrowup, ne.arrowdown, ne.esc], oP = [ne.enter, ne.tab];
class rP extends A {
  constructor(e) {
    super(e);
    m(this, "_mentionsView");
    m(this, "_mentionsConfigurations");
    m(this, "_balloon");
    m(this, "_items", new rt());
    m(this, "_lastRequested");
    m(this, "_requestFeedDebounced");
    this._mentionsView = this._createMentionView(), this._mentionsConfigurations = /* @__PURE__ */ new Map(), this._requestFeedDebounced = vi(this._requestFeed, 100), e.config.define("mention", { feeds: [] });
  }
  static get pluginName() {
    return "MentionUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Bi];
  }
  init() {
    const e = this.editor, t = e.config.get("mention.commitKeys") || oP, n = nP.concat(t);
    this._balloon = e.plugins.get(Bi), e.editing.view.document.on("keydown", (s, a) => {
      var l;
      l = a.keyCode, n.includes(l) && this._isUIVisible && (a.preventDefault(), s.stop(), a.keyCode == ne.arrowdown && this._mentionsView.selectNext(), a.keyCode == ne.arrowup && this._mentionsView.selectPrevious(), t.includes(a.keyCode) && this._mentionsView.executeSelected(), a.keyCode == ne.esc && this._hideUIAndRemoveMarker());
    }, { priority: "highest" }), zn({ emitter: this._mentionsView, activator: () => this._isUIVisible, contextElements: () => [this._balloon.view.element], callback: () => this._hideUIAndRemoveMarker() });
    const r = e.config.get("mention.feeds");
    for (const s of r) {
      const { feed: a, marker: l, dropdownLimit: c } = s;
      if (!lP(l)) throw new v("mentionconfig-incorrect-marker", null, { marker: l });
      const d = { marker: l, feedCallback: typeof a == "function" ? a.bind(this.editor) : aP(a), itemRenderer: s.itemRenderer, dropdownLimit: c };
      this._mentionsConfigurations.set(l, d);
    }
    this._setupTextWatcher(r), this.listenTo(e, "change:isReadOnly", () => {
      this._hideUIAndRemoveMarker();
    }), this.on("requestFeed:response", (s, a) => this._handleFeedResponse(a)), this.on("requestFeed:error", () => this._hideUIAndRemoveMarker());
  }
  destroy() {
    super.destroy(), this._mentionsView.destroy();
  }
  get _isUIVisible() {
    return this._balloon.visibleView === this._mentionsView;
  }
  _createMentionView() {
    const e = this.editor.locale, t = new eP(e);
    return t.items.bindTo(this._items).using((n) => {
      const { item: r, marker: s } = n, { dropdownLimit: a } = this._mentionsConfigurations.get(s), l = a || this.editor.config.get("mention.dropdownLimit") || 10;
      if (t.items.length >= l) return null;
      const c = new iP(e), d = this._renderItem(r, s);
      return d.delegate("execute").to(c), c.children.add(d), c.item = r, c.marker = s, c.on("execute", () => {
        t.fire("execute", { item: r, marker: s });
      }), c;
    }), t.on("execute", (n, r) => {
      const s = this.editor, a = s.model, l = r.item, c = r.marker, d = s.model.markers.get("mention"), u = a.createPositionAt(a.document.selection.focus), h = a.createPositionAt(d.getStart()), g = a.createRange(h, u);
      this._hideUIAndRemoveMarker(), s.execute("mention", { mention: l, text: l.text, marker: c, range: g }), s.editing.view.focus();
    }), t;
  }
  _getItemRenderer(e) {
    const { itemRenderer: t } = this._mentionsConfigurations.get(e);
    return t;
  }
  _requestFeed(e, t) {
    this._lastRequested = t;
    const { feedCallback: n } = this._mentionsConfigurations.get(e), r = n(t);
    r instanceof Promise ? r.then((s) => {
      this._lastRequested == t ? this.fire("requestFeed:response", { feed: s, marker: e, feedText: t }) : this.fire("requestFeed:discarded", { feed: s, marker: e, feedText: t });
    }).catch((s) => {
      this.fire("requestFeed:error", { error: s }), ce("mention-feed-callback-error", { marker: e });
    }) : this.fire("requestFeed:response", { feed: r, marker: e, feedText: t });
  }
  _setupTextWatcher(e) {
    const t = this.editor, n = e.map((a) => ({ ...a, pattern: ff(a.marker, a.minimumCharacters || 0) })), r = new lw(t.model, /* @__PURE__ */ function(a) {
      return (c) => {
        const d = pf(a, c);
        if (!d) return !1;
        let u = 0;
        d.position !== 0 && (u = d.position - 1);
        const h = c.substring(u);
        return d.pattern.test(h);
      };
    }(n));
    r.on("matched", (a, l) => {
      const c = pf(n, l.text), d = t.model.document.selection.focus, u = t.model.createPositionAt(d.parent, c.position);
      if (function(k) {
        const _ = k.textNode && k.textNode.hasAttribute("mention"), w = k.nodeBefore;
        return _ || w && w.is("$text") && w.hasAttribute("mention");
      }(d) || function(k) {
        const _ = k.nodeAfter;
        return _ && _.is("$text") && _.hasAttribute("mention");
      }(u)) return void this._hideUIAndRemoveMarker();
      const h = function(k, _) {
        let w = 0;
        k.position !== 0 && (w = k.position - 1);
        const y = ff(k.marker, 0);
        return _.substring(w).match(y)[2];
      }(c, l.text), g = c.marker.length + h.length, p = d.getShiftedBy(-g), f = d.getShiftedBy(-h.length), b = t.model.createRange(p, f);
      if (Ic(t)) {
        const k = t.model.markers.get("mention");
        t.model.change((_) => {
          _.updateMarker(k, { range: b });
        });
      } else t.model.change((k) => {
        k.addMarker("mention", { range: b, usingOperation: !1, affectsData: !1 });
      });
      this._requestFeedDebounced(c.marker, h);
    }), r.on("unmatched", () => {
      this._hideUIAndRemoveMarker();
    });
    const s = t.commands.get("mention");
    return r.bind("isEnabled").to(s), r;
  }
  _handleFeedResponse(e) {
    const { feed: t, marker: n } = e;
    if (!Ic(this.editor)) return;
    this._items.clear();
    for (const s of t) {
      const a = typeof s != "object" ? { id: s, text: s } : s;
      this._items.add({ item: a, marker: n });
    }
    const r = this.editor.model.markers.get("mention");
    this._items.length ? this._showOrUpdateUI(r) : this._hideUIAndRemoveMarker();
  }
  _showOrUpdateUI(e) {
    this._isUIVisible ? this._balloon.updatePosition(this._getBalloonPanelPositionData(e, this._mentionsView.position)) : this._balloon.add({ view: this._mentionsView, position: this._getBalloonPanelPositionData(e, this._mentionsView.position), singleViewMode: !0, balloonClassName: "ck-mention-balloon" }), this._mentionsView.position = this._balloon.view.position, this._mentionsView.selectFirst();
  }
  _hideUIAndRemoveMarker() {
    this._balloon.hasView(this._mentionsView) && this._balloon.remove(this._mentionsView), Ic(this.editor) && this.editor.model.change((e) => e.removeMarker("mention")), this._mentionsView.position = void 0;
  }
  _renderItem(e, t) {
    const n = this.editor;
    let r, s = e.id;
    const a = this._getItemRenderer(t);
    if (a) {
      const l = a(e);
      typeof l != "string" ? r = new tP(n.locale, l) : s = l;
    }
    if (!r) {
      const l = new j(n.locale);
      l.label = s, l.withText = !0, r = l;
    }
    return r;
  }
  _getBalloonPanelPositionData(e, t) {
    const n = this.editor, r = n.editing, s = r.view.domConverter, a = r.mapper;
    return { target: () => {
      let l = e.getRange();
      l.start.root.rootName == "$graveyard" && (l = n.model.document.selection.getFirstRange());
      const c = a.toViewRange(l);
      return K.getDomRangeRects(s.viewRangeToDom(c)).pop();
    }, limiter: () => {
      const l = this.editor.editing.view, c = l.document.selection.editableElement;
      return c ? l.domConverter.mapViewToDom(c.root) : null;
    }, positions: sP(t, n.locale.uiLanguageDirection) };
  }
}
function sP(o, i) {
  const e = { caret_se: (t) => ({ top: t.bottom + 3, left: t.right, name: "caret_se", config: { withArrow: !1 } }), caret_ne: (t, n) => ({ top: t.top - n.height - 3, left: t.right, name: "caret_ne", config: { withArrow: !1 } }), caret_sw: (t, n) => ({ top: t.bottom + 3, left: t.right - n.width, name: "caret_sw", config: { withArrow: !1 } }), caret_nw: (t, n) => ({ top: t.top - n.height - 3, left: t.right - n.width, name: "caret_nw", config: { withArrow: !1 } }) };
  return Object.prototype.hasOwnProperty.call(e, o) ? [e[o]] : i !== "rtl" ? [e.caret_se, e.caret_sw, e.caret_ne, e.caret_nw] : [e.caret_sw, e.caret_se, e.caret_nw, e.caret_ne];
}
function pf(o, i) {
  let e;
  for (const t of o) {
    const n = i.lastIndexOf(t.marker);
    n > 0 && !i.substring(n - 1).match(t.pattern) || (!e || n >= e.position) && (e = { marker: t.marker, position: n, minimumCharacters: t.minimumCharacters, pattern: t.pattern });
  }
  return e;
}
function ff(o, i) {
  const e = i == 0 ? "*" : `{${i},}`, t = q.features.isRegExpUnicodePropertySupported ? `\\p{Ps}\\p{Pi}"'` : `\\(\\[{"'`;
  return o = o.replace(/[.*+?^${}()\-|[\]\\]/g, "\\$&"), new RegExp(`(?:^|[ ${t}])(${o})(.${e})$`, "u");
}
function aP(o) {
  return (i) => o.filter((e) => (typeof e == "string" ? e : String(e.id)).toLowerCase().includes(i.toLowerCase()));
}
function lP(o) {
  return !!o;
}
function Ic(o) {
  return o.model.markers.has("mention");
}
class cP extends A {
  toMentionAttribute(i, e) {
    return y0(i, e);
  }
  static get pluginName() {
    return "Mention";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [QI, rP];
  }
}
function bf(o) {
  return o !== void 0 && o.endsWith("px");
}
function No(o) {
  return o.toFixed(2).replace(/\.?0+$/, "") + "px";
}
function dP(o, i, e) {
  if (!o.childCount) return;
  const t = new Ni(o.document), n = function(a, l) {
    const c = l.createRangeIn(a), d = [], u = /* @__PURE__ */ new Set();
    for (const h of c.getItems()) {
      if (!h.is("element") || !h.name.match(/^(p|h\d+|li|div)$/)) continue;
      let g = kP(h);
      if (g === void 0 || parseFloat(g) != 0 || Array.from(h.getClassNames()).find((p) => p.startsWith("MsoList")) || (g = void 0), h.hasStyle("mso-list") || g !== void 0 && u.has(g)) {
        const p = fP(h);
        d.push({ element: h, id: p.id, order: p.order, indent: p.indent, marginLeft: g }), g !== void 0 && u.add(g);
      } else u.clear();
    }
    return d;
  }(o, t);
  if (!n.length) return;
  const r = {}, s = [];
  for (const a of n) if (a.indent !== void 0) {
    uP(a) || (s.length = 0);
    const l = `${a.id}:${a.indent}`, c = Math.min(a.indent - 1, s.length);
    if (c < s.length && s[c].id !== a.id && (s.length = c), c < s.length - 1) s.length = c + 1;
    else {
      const u = mP(a, i);
      if (c > s.length - 1 || s[c].listElement.name != u.type) {
        c == 0 && u.type == "ol" && a.id !== void 0 && r[l] && (u.startIndex = r[l]);
        const h = pP(u, t, e);
        if (bf(a.marginLeft) && (c == 0 || bf(s[c - 1].marginLeft))) {
          let g = a.marginLeft;
          c > 0 && (g = No(parseFloat(g) - parseFloat(s[c - 1].marginLeft))), t.setStyle("padding-left", g, h);
        }
        if (s.length == 0) {
          const g = a.element.parent, p = g.getChildIndex(a.element) + 1;
          t.insertChild(p, h, g);
        } else {
          const g = s[c - 1].listItemElements;
          t.appendChild(h, g[g.length - 1]);
        }
        s[c] = { ...a, listElement: h, listItemElements: [] }, c == 0 && a.id !== void 0 && (r[l] = u.startIndex || 1);
      }
    }
    const d = a.element.name == "li" ? a.element : t.createElement("li");
    t.appendChild(d, s[c].listElement), s[c].listItemElements.push(d), c == 0 && a.id !== void 0 && r[l]++, a.element != d && t.appendChild(a.element, d), bP(a.element, t), t.removeStyle("text-indent", a.element), t.removeStyle("margin-left", a.element);
  } else {
    const l = s.find((c) => c.marginLeft == a.marginLeft);
    if (l) {
      const c = l.listItemElements;
      t.appendChild(a.element, c[c.length - 1]), t.removeStyle("margin-left", a.element);
    } else s.length = 0;
  }
}
function uP(o) {
  const i = o.element.previousSibling;
  return hP(i || o.element.parent);
}
function hP(o) {
  return o.is("element", "ol") || o.is("element", "ul");
}
function mP(o, i) {
  const e = new RegExp(`@list l${o.id}:level${o.indent}\\s*({[^}]*)`, "gi"), t = /mso-level-number-format:([^;]{0,100});/gi, n = /mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi, r = new RegExp(`@list\\s+l${o.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`, "gi"), s = new RegExp(`@list l${o.id}:level\\d\\s*{[^{]*mso-level-number-format:`, "gi"), a = r.exec(i), l = s.exec(i), c = a && !l, d = e.exec(i);
  let u = "decimal", h = "ol", g = null;
  if (d && d[1]) {
    const p = t.exec(d[1]);
    if (p && p[1] && (u = p[1].trim(), h = u !== "bullet" && u !== "image" ? "ol" : "ul"), u === "bullet") {
      const f = function(b) {
        if (b.name == "li" && b.parent.name == "ul" && b.parent.hasAttribute("type")) return b.parent.getAttribute("type");
        const k = function(w) {
          if (w.getChild(0).is("$text")) return null;
          for (const y of w.getChildren()) {
            if (!y.is("element", "span")) continue;
            const x = y.getChild(0);
            if (x) return x.is("$text") ? x : x.getChild(0);
          }
          return null;
        }(b);
        if (!k) return null;
        const _ = k._data;
        return _ === "o" ? "circle" : _ === "·" ? "disc" : _ === "§" ? "square" : null;
      }(o.element);
      f && (u = f);
    } else {
      const f = n.exec(d[1]);
      f && f[1] && (g = parseInt(f[1]));
    }
    c && (h = "ol");
  }
  return { type: h, startIndex: g, style: gP(u), isLegalStyleList: c };
}
function gP(o) {
  if (o.startsWith("arabic-leading-zero")) return "decimal-leading-zero";
  switch (o) {
    case "alpha-upper":
      return "upper-alpha";
    case "alpha-lower":
      return "lower-alpha";
    case "roman-upper":
      return "upper-roman";
    case "roman-lower":
      return "lower-roman";
    case "circle":
    case "disc":
    case "square":
      return o;
    default:
      return null;
  }
}
function pP(o, i, e) {
  const t = i.createElement(o.type);
  return o.style && i.setStyle("list-style-type", o.style, t), o.startIndex && o.startIndex > 1 && i.setAttribute("start", o.startIndex, t), o.isLegalStyleList && e && i.addClass("legal-list", t), t;
}
function fP(o) {
  const i = o.getStyle("mso-list");
  if (i === void 0) return {};
  const e = i.match(/(^|\s{1,100})l(\d+)/i), t = i.match(/\s{0,100}lfo(\d+)/i), n = i.match(/\s{0,100}level(\d+)/i);
  return e && t && n ? { id: e[2], order: t[1], indent: parseInt(n[1]) } : { indent: 1 };
}
function bP(o, i) {
  const e = new Zt({ name: "span", styles: { "mso-list": "Ignore" } }), t = i.createRangeIn(o);
  for (const n of t) n.type === "elementStart" && e.match(n.item) && i.remove(n.item);
}
function kP(o) {
  const i = o.getStyle("margin-left");
  return i === void 0 || i.endsWith("px") ? i : function(e) {
    const t = parseFloat(e);
    return e.endsWith("pt") ? No(96 * t / 72) : e.endsWith("pc") ? No(12 * t * 96 / 72) : e.endsWith("in") ? No(96 * t) : e.endsWith("cm") ? No(96 * t / 2.54) : e.endsWith("mm") ? No(t / 10 * 96 / 2.54) : e;
  }(i);
}
function _P(o, i) {
  if (!o.childCount) return;
  const e = new Ni(o.document), t = function(r, s) {
    const a = s.createRangeIn(r), l = new Zt({ name: /v:(.+)/ }), c = [];
    for (const d of a) {
      if (d.type != "elementStart") continue;
      const u = d.item, h = u.previousSibling, g = h && h.is("element") ? h.name : null, p = ["Chart"], f = l.match(u), b = u.getAttribute("o:gfxdata"), k = g === "v:shapetype", _ = b && p.some((w) => u.getAttribute("id").includes(w));
      f && b && !k && !_ && c.push(d.item.getAttribute("id"));
    }
    return c;
  }(o, e);
  (function(r, s, a) {
    const l = a.createRangeIn(s), c = new Zt({ name: "img" }), d = [];
    for (const u of l) if (u.item.is("element") && c.match(u.item)) {
      const h = u.item, g = h.getAttribute("v:shapes") ? h.getAttribute("v:shapes").split(" ") : [];
      g.length && g.every((p) => r.indexOf(p) > -1) ? d.push(h) : h.getAttribute("src") || d.push(h);
    }
    for (const u of d) a.remove(u);
  })(t, o, e), function(r, s, a) {
    const l = a.createRangeIn(s), c = [];
    for (const h of l) if (h.type == "elementStart" && h.item.is("element", "v:shape")) {
      const g = h.item.getAttribute("id");
      if (r.includes(g)) continue;
      d(h.item.parent.getChildren(), g) || c.push(h.item);
    }
    for (const h of c) {
      const g = { src: u(h) };
      h.hasAttribute("alt") && (g.alt = h.getAttribute("alt"));
      const p = a.createElement("img", g);
      a.insertChild(h.index + 1, p, h.parent);
    }
    function d(h, g) {
      for (const p of h) if (p.is("element") && (p.name == "img" && p.getAttribute("v:shapes") == g || d(p.getChildren(), g)))
        return !0;
      return !1;
    }
    function u(h) {
      for (const g of h.getChildren()) if (g.is("element") && g.getAttribute("src")) return g.getAttribute("src");
    }
  }(t, o, e), function(r, s) {
    const a = s.createRangeIn(r), l = new Zt({ name: /v:(.+)/ }), c = [];
    for (const d of a) d.type == "elementStart" && l.match(d.item) && c.push(d.item);
    for (const d of c) s.remove(d);
  }(o, e);
  const n = function(r, s) {
    const a = s.createRangeIn(r), l = new Zt({ name: "img" }), c = [];
    for (const d of a) d.item.is("element") && l.match(d.item) && d.item.getAttribute("src").startsWith("file://") && c.push(d.item);
    return c;
  }(o, e);
  n.length && function(r, s, a) {
    if (r.length === s.length) for (let l = 0; l < r.length; l++) {
      const c = `data:${s[l].type};base64,${wP(s[l].hex)}`;
      a.setAttribute("src", c, r[l]);
    }
  }(n, function(r) {
    if (!r) return [];
    const s = /{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/, a = new RegExp("(?:(" + s.source + "))([\\da-fA-F\\s]+)\\}", "g"), l = r.match(a), c = [];
    if (l) for (const d of l) {
      let u = !1;
      d.includes("\\pngblip") ? u = "image/png" : d.includes("\\jpegblip") && (u = "image/jpeg"), u && c.push({ hex: d.replace(s, "").replace(/[^\da-fA-F]/g, ""), type: u });
    }
    return c;
  }(i), e);
}
function wP(o) {
  return btoa(o.match(/\w{2}/g).map((i) => String.fromCharCode(parseInt(i, 16))).join(""));
}
const vP = /<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i, yP = /xmlns:o="urn:schemas-microsoft-com/i;
class xP {
  constructor(i, e = !1) {
    m(this, "document");
    m(this, "hasMultiLevelListPlugin");
    this.document = i, this.hasMultiLevelListPlugin = e;
  }
  isActive(i) {
    return vP.test(i) || yP.test(i);
  }
  execute(i) {
    const e = new Ni(this.document), { body: t, stylesString: n } = i._parsedData;
    (function(r, s) {
      const a = [];
      for (const l of s.createRangeIn(r)) {
        const c = l.item;
        c.is("element", "a") && !c.hasAttribute("href") && (c.hasAttribute("id") || c.hasAttribute("name")) && a.push(c);
      }
      for (const l of a) {
        const c = l.parent.getChildIndex(l) + 1, d = l.getChildren();
        s.insertChild(c, d, l.parent);
      }
    })(t, e), dP(t, n, this.hasMultiLevelListPlugin), _P(t, i.dataTransfer.getData("text/rtf")), function(r) {
      const s = [], a = new Ni(r.document);
      for (const { item: l } of a.createRangeIn(r)) if (l.is("element")) {
        for (const c of l.getClassNames()) /\bmso/gi.exec(c) && a.removeClass(c, l);
        for (const c of l.getStyleNames()) /\bmso/gi.exec(c) && a.removeStyle(c, l);
        (l.is("element", "w:sdt") || l.is("element", "w:sdtpr") && l.isEmpty || l.is("element", "o:p") && l.isEmpty) && s.push(l);
      }
      for (const l of s) {
        const c = l.parent, d = c.getChildIndex(l);
        a.insertChild(d, l.getChildren(), c), a.remove(l);
      }
    }(t), i.content = t;
  }
}
function kf(o, i, e, { blockElements: t, inlineObjectElements: n }) {
  let r = e.createPositionAt(o, i == "forward" ? "after" : "before");
  return r = r.getLastMatchingPosition(({ item: s }) => s.is("element") && !t.includes(s.name) && !n.includes(s.name), { direction: i }), i == "forward" ? r.nodeAfter : r.nodeBefore;
}
function _f(o, i) {
  return !!o && o.is("element") && i.includes(o.name);
}
const CP = /id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;
class AP {
  constructor(i) {
    m(this, "document");
    this.document = i;
  }
  isActive(i) {
    return CP.test(i);
  }
  execute(i) {
    const e = new Ni(this.document), { body: t } = i._parsedData;
    (function(n, r) {
      for (const s of n.getChildren()) if (s.is("element", "b") && s.getStyle("font-weight") === "normal") {
        const a = n.getChildIndex(s);
        r.remove(s), r.insertChild(a, s.getChildren(), n);
      }
    })(t, e), function(n, r) {
      for (const s of r.createRangeIn(n)) {
        const a = s.item;
        if (a.is("element", "li")) {
          const l = a.getChild(0);
          l && l.is("element", "p") && r.unwrapElement(l);
        }
      }
    }(t, e), function(n, r) {
      const s = new dl(r.document.stylesProcessor), a = new hl(s, { renderingMode: "data" }), l = a.blockElements, c = a.inlineObjectElements, d = [];
      for (const u of r.createRangeIn(n)) {
        const h = u.item;
        if (h.is("element", "br")) {
          const g = kf(h, "forward", r, { blockElements: l, inlineObjectElements: c }), p = kf(h, "backward", r, { blockElements: l, inlineObjectElements: c }), f = _f(g, l);
          (_f(p, l) || f) && d.push(h);
        }
      }
      for (const u of d) u.hasClass("Apple-interchange-newline") ? r.remove(u) : r.replace(u, r.createElement("p"));
    }(t, e), i.content = t;
  }
}
const TP = /<google-sheets-html-origin/i;
class EP {
  constructor(i) {
    m(this, "document");
    this.document = i;
  }
  isActive(i) {
    return TP.test(i);
  }
  execute(i) {
    const e = new Ni(this.document), { body: t } = i._parsedData;
    (function(n, r) {
      for (const s of n.getChildren()) if (s.is("element", "google-sheets-html-origin")) {
        const a = n.getChildIndex(s);
        r.remove(s), r.insertChild(a, s.getChildren(), n);
      }
    })(t, e), function(n, r) {
      for (const s of n.getChildren()) s.is("element", "table") && s.hasAttribute("xmlns") && r.removeAttribute("xmlns", s);
    }(t, e), function(n, r) {
      for (const s of n.getChildren()) s.is("element", "table") && s.getStyle("width") === "0px" && r.removeStyle("width", s);
    }(t, e), function(n, r) {
      for (const s of Array.from(n.getChildren())) s.is("element", "style") && r.remove(s);
    }(t, e), i.content = t;
  }
}
function wf(o) {
  return o.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, (i, e) => e.length === 1 ? " " : Array(e.length + 1).join("  ").substr(0, e.length));
}
function SP(o, i) {
  const e = new DOMParser(), t = function(l) {
    return wf(wf(l)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g, "$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g, "").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g, "$1 $2").replace(/ <\//g, " </").replace(/ <o:p><\/o:p>/g, " <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g, "").replace(/>([^\S\r\n]*[\r\n]\s*)</g, "><");
  }(function(l) {
    const c = "</body>", d = "</html>", u = l.indexOf(c);
    if (u < 0) return l;
    const h = l.indexOf(d, u + c.length);
    return l.substring(0, u + c.length) + (h >= 0 ? l.substring(h) : "");
  }(o = (o = o.replace(/<!--\[if gte vml 1]>/g, "")).replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi, ""))), n = e.parseFromString(t, "text/html");
  (function(l) {
    l.querySelectorAll("span[style*=spacerun]").forEach((c) => {
      const d = c, u = d.innerText.length || 0;
      d.innerText = Array(u + 1).join("  ").substr(0, u);
    });
  })(n);
  const r = n.body.innerHTML, s = function(l, c) {
    const d = new dl(c), u = new hl(d, { renderingMode: "data" }), h = l.createDocumentFragment(), g = l.body.childNodes;
    for (; g.length > 0; ) h.appendChild(g[0]);
    return u.domToView(h, { skipComments: !0 });
  }(n, i), a = function(l) {
    const c = [], d = [], u = Array.from(l.getElementsByTagName("style"));
    for (const h of u) h.sheet && h.sheet.cssRules && h.sheet.cssRules.length && (c.push(h.sheet), d.push(h.innerHTML));
    return { styles: c, stylesString: d.join(" ") };
  }(n);
  return { body: s, bodyString: r, styles: a.styles, stylesString: a.stylesString };
}
class IP extends A {
  static get pluginName() {
    return "PasteFromOffice";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Lt];
  }
  init() {
    const i = this.editor, e = i.plugins.get("ClipboardPipeline"), t = i.editing.view.document, n = [], r = this.editor.plugins.has("MultiLevelList");
    n.push(new xP(t, r)), n.push(new AP(t)), n.push(new EP(t)), e.on("inputTransformation", (s, a) => {
      if (a._isTransformedWithPasteFromOffice || i.model.document.selection.getFirstPosition().parent.is("element", "codeBlock")) return;
      const l = a.dataTransfer.getData("text/html"), c = n.find((d) => d.isActive(l));
      c && (a._parsedData || (a._parsedData = SP(l, t.stylesProcessor)), c.execute(a), a._isTransformedWithPasteFromOffice = !0);
    }, { priority: "high" });
  }
}
const ea = "removeFormat";
class PP extends A {
  static get pluginName() {
    return "RemoveFormatUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.ui.componentFactory.add(ea, () => {
      const e = this._createButton(j);
      return e.set({ tooltip: !0 }), e;
    }), i.ui.componentFactory.add(`menuBar:${ea}`, () => this._createButton(Ie));
  }
  _createButton(i) {
    const e = this.editor, t = e.locale, n = e.commands.get(ea), r = new i(e.locale), s = t.t;
    return r.set({ label: s("Remove Format"), icon: vA }), r.bind("isEnabled").to(n, "isEnabled"), this.listenTo(r, "execute", () => {
      e.execute(ea), e.editing.view.focus();
    }), r;
  }
}
class MP extends G {
  refresh() {
    const i = this.editor.model;
    this.isEnabled = !!Te(this._getFormattingItems(i.document.selection, i.schema));
  }
  execute() {
    const i = this.editor.model, e = i.schema;
    i.change((t) => {
      for (const n of this._getFormattingItems(i.document.selection, e)) if (n.is("selection")) for (const r of this._getFormattingAttributes(n, e)) t.removeSelectionAttribute(r);
      else {
        const r = t.createRangeOn(n);
        for (const s of this._getFormattingAttributes(n, e)) t.removeAttribute(s, r);
      }
    });
  }
  *_getFormattingItems(i, e) {
    const t = (n) => !!Te(this._getFormattingAttributes(n, e));
    for (const n of i.getRanges()) for (const r of n.getItems()) !e.isBlock(r) && t(r) && (yield r);
    for (const n of i.getSelectedBlocks()) t(n) && (yield n);
    t(i) && (yield i);
  }
  *_getFormattingAttributes(i, e) {
    for (const [t] of i.getAttributes()) {
      const n = e.getAttributeProperties(t);
      n && n.isFormatting && (yield t);
    }
  }
}
class VP extends A {
  static get pluginName() {
    return "RemoveFormatEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor;
    i.commands.add("removeFormat", new MP(i));
  }
}
class LP extends A {
  static get requires() {
    return [VP, PP];
  }
  static get pluginName() {
    return "RemoveFormat";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
class OP extends N {
  constructor(e) {
    super(e);
    m(this, "tiles");
    m(this, "focusTracker");
    m(this, "keystrokes");
    this.tiles = this.createCollection(), this.setTemplate({ tag: "div", children: [{ tag: "div", attributes: { class: ["ck", "ck-character-grid__tiles"] }, children: this.tiles }], attributes: { class: ["ck", "ck-character-grid"] } }), this.focusTracker = new fe(), this.keystrokes = new Le(), Cs({ keystrokeHandler: this.keystrokes, focusTracker: this.focusTracker, gridItems: this.tiles, numberOfColumns: () => z.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length, uiLanguageDirection: this.locale && this.locale.uiLanguageDirection });
  }
  createTile(e, t) {
    const n = new j(this.locale);
    return n.set({ label: e, withText: !0, class: "ck-character-grid__tile" }), n.extendTemplate({ attributes: { title: t }, on: { mouseover: n.bindTemplate.to("mouseover"), focus: n.bindTemplate.to("focus") } }), n.on("mouseover", () => {
      this.fire("tileHover", { name: t, character: e });
    }), n.on("focus", () => {
      this.fire("tileFocus", { name: t, character: e });
    }), n.on("execute", () => {
      this.fire("execute", { name: t, character: e });
    }), n;
  }
  render() {
    super.render();
    for (const e of this.tiles) this.focusTracker.add(e.element);
    this.tiles.on("change", (e, { added: t, removed: n }) => {
      if (t.length > 0) for (const r of t) this.focusTracker.add(r.element);
      if (n.length > 0) for (const r of n) this.focusTracker.remove(r.element);
    }), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this.tiles.first.focus();
  }
}
class NP extends N {
  constructor(i) {
    super(i);
    const e = this.bindTemplate;
    this.set("character", null), this.set("name", null), this.bind("code").to(this, "character", RP), this.setTemplate({ tag: "div", children: [{ tag: "span", attributes: { class: ["ck-character-info__name"] }, children: [{ text: e.to("name", (t) => t || "​") }] }, { tag: "span", attributes: { class: ["ck-character-info__code"] }, children: [{ text: e.to("code") }] }], attributes: { class: ["ck", "ck-character-info"] } });
  }
}
function RP(o) {
  return o === null ? "" : "U+" + ("0000" + o.codePointAt(0).toString(16)).slice(-4);
}
class zP extends N {
  constructor(e, t, n, r) {
    super(e);
    m(this, "items");
    m(this, "focusTracker");
    m(this, "keystrokes");
    m(this, "_focusCycler");
    m(this, "categoriesView");
    m(this, "gridView");
    m(this, "infoView");
    this.categoriesView = t, this.gridView = n, this.infoView = r, this.items = this.createCollection(), this.focusTracker = new fe(), this.keystrokes = new Le(), this._focusCycler = new ut({ focusables: this.items, focusTracker: this.focusTracker, keystrokeHandler: this.keystrokes, actions: { focusPrevious: "shift + tab", focusNext: "tab" } }), this.setTemplate({ tag: "div", children: [this.categoriesView, this.gridView, this.infoView], attributes: { tabindex: "-1" } }), this.items.add(this.categoriesView), this.items.add(this.gridView);
  }
  render() {
    super.render(), this.focusTracker.add(this.categoriesView.element), this.focusTracker.add(this.gridView.element), this.keystrokes.listenTo(this.element);
  }
  destroy() {
    super.destroy(), this.focusTracker.destroy(), this.keystrokes.destroy();
  }
  focus() {
    this._focusCycler.focusFirst();
  }
}
class BP extends N {
  constructor(e, t) {
    super(e);
    m(this, "_groupNames");
    m(this, "_dropdownView");
    this.set("currentGroupName", Array.from(t.entries())[0][0]), this._groupNames = t, this._dropdownView = new Ri(e, aT), this.setTemplate({ tag: "div", attributes: { class: ["ck", "ck-character-categories"] }, children: [this._dropdownView] });
  }
  render() {
    super.render(), this._setupDropdown();
  }
  focus() {
    this._dropdownView.focus();
  }
  _setupDropdown() {
    const e = new rt();
    for (const [n, r] of this._groupNames) {
      const s = { type: "button", model: new cn({ name: n, label: r, role: "menuitemradio", withText: !0 }) };
      s.model.bind("isOn").to(this, "currentGroupName", (a) => a === n), e.add(s);
    }
    const t = (0, this.locale.t)("Category");
    this._dropdownView.set({ label: t, isEmpty: !1 }), this._dropdownView.fieldView.panelPosition = this.locale.uiLanguageDirection === "rtl" ? "se" : "sw", this._dropdownView.fieldView.buttonView.set({ withText: !0, tooltip: t, ariaLabel: t, ariaLabelledBy: void 0, isOn: !1 }), this._dropdownView.fieldView.buttonView.bind("label").to(this, "currentGroupName", (n) => this._groupNames.get(n)), this._dropdownView.fieldView.on("execute", ({ source: n }) => {
      this.currentGroupName = n.name;
    }), Bn(this._dropdownView.fieldView, e, { ariaLabel: t, role: "menu" });
  }
}
const Pc = "All";
class DP extends A {
  constructor(e) {
    super(e);
    m(this, "_characters");
    m(this, "_groups");
    m(this, "_allSpecialCharactersGroupLabel");
    const t = e.t;
    this._characters = /* @__PURE__ */ new Map(), this._groups = /* @__PURE__ */ new Map(), this._allSpecialCharactersGroupLabel = t("All");
  }
  static get requires() {
    return [bl, oo];
  }
  static get pluginName() {
    return "SpecialCharacters";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const e = this.editor;
    e.ui.componentFactory.add("specialCharacters", () => {
      const t = this._createDialogButton(j);
      return t.set({ tooltip: !0 }), t;
    }), e.ui.componentFactory.add("menuBar:specialCharacters", () => this._createDialogButton(Ie));
  }
  addItems(e, t, n = { label: e }) {
    if (e === Pc) throw new v("special-character-invalid-group-name", null);
    const r = this._getGroup(e, n.label);
    for (const s of t) r.items.add(s.title), this._characters.set(s.title, s.character);
  }
  getGroups() {
    const e = Array.from(this._groups.keys()), t = this.editor.config.get("specialCharacters.order") || [], n = t.find((r) => !e.includes(r));
    if (n) throw new v("special-character-invalid-order-group-name", null, { invalidGroup: n });
    return /* @__PURE__ */ new Set([...t, ...e]);
  }
  getCharactersForGroup(e) {
    if (e === Pc) return new Set(this._characters.keys());
    const t = this._groups.get(e);
    return t ? t.items : void 0;
  }
  getCharacter(e) {
    return this._characters.get(e);
  }
  _getGroup(e, t) {
    return this._groups.has(e) || this._groups.set(e, { items: /* @__PURE__ */ new Set(), label: t }), this._groups.get(e);
  }
  _updateGrid(e, t) {
    t.tiles.clear();
    const n = this.getCharactersForGroup(e);
    for (const r of n) {
      const s = this.getCharacter(r);
      t.tiles.add(t.createTile(s, r));
    }
  }
  _createDropdownPanelContent(e) {
    const t = Array.from(this.getGroups()).map((l) => [l, this._groups.get(l).label]), n = new Map([[Pc, this._allSpecialCharactersGroupLabel], ...t]), r = new BP(e, n), s = new OP(e), a = new NP(e);
    return s.on("tileHover", (l, c) => {
      a.set(c);
    }), s.on("tileFocus", (l, c) => {
      a.set(c);
    }), r.on("change:currentGroupName", (l, c, d) => {
      this._updateGrid(d, s);
    }), this._updateGrid(r.currentGroupName, s), { categoriesView: r, gridView: s, infoView: a };
  }
  _createDialogButton(e) {
    const t = this.editor, n = t.locale, r = new e(t.locale), s = t.commands.get("insertText"), a = n.t, l = this.editor.plugins.get("Dialog");
    return r.set({ label: a("Special characters"), icon: AA, isToggleable: !0 }), r.bind("isOn").to(l, "id", (c) => c === "specialCharacters"), r.bind("isEnabled").to(s, "isEnabled"), r.on("execute", () => {
      l.id !== "specialCharacters" ? this._showDialog() : l.hide();
    }), r;
  }
  _showDialog() {
    const e = this.editor, t = e.plugins.get("Dialog"), n = e.locale, r = n.t, { categoriesView: s, gridView: a, infoView: l } = this._createDropdownPanelContent(n), c = new zP(n, s, a, l);
    a.on("execute", (d, u) => {
      e.execute("insertText", { text: u.character });
    }), t.show({ id: "specialCharacters", title: r("Special characters"), className: "ck-special-characters", content: c, position: ni.EDITOR_TOP_SIDE });
  }
}
class C0 extends A {
  static get pluginName() {
    return "SpecialCharactersArrows";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t;
    i.plugins.get("SpecialCharacters").addItems("Arrows", [{ title: e("leftwards simple arrow"), character: "←" }, { title: e("rightwards simple arrow"), character: "→" }, { title: e("upwards simple arrow"), character: "↑" }, { title: e("downwards simple arrow"), character: "↓" }, { title: e("leftwards double arrow"), character: "⇐" }, { title: e("rightwards double arrow"), character: "⇒" }, { title: e("upwards double arrow"), character: "⇑" }, { title: e("downwards double arrow"), character: "⇓" }, { title: e("leftwards dashed arrow"), character: "⇠" }, { title: e("rightwards dashed arrow"), character: "⇢" }, { title: e("upwards dashed arrow"), character: "⇡" }, { title: e("downwards dashed arrow"), character: "⇣" }, { title: e("leftwards arrow to bar"), character: "⇤" }, { title: e("rightwards arrow to bar"), character: "⇥" }, { title: e("upwards arrow to bar"), character: "⤒" }, { title: e("downwards arrow to bar"), character: "⤓" }, { title: e("up down arrow with base"), character: "↨" }, { title: e("back with leftwards arrow above"), character: "🔙" }, { title: e("end with leftwards arrow above"), character: "🔚" }, { title: e("on with exclamation mark with left right arrow above"), character: "🔛" }, { title: e("soon with rightwards arrow above"), character: "🔜" }, { title: e("top with upwards arrow above"), character: "🔝" }], { label: e("Arrows") });
  }
}
class A0 extends A {
  static get pluginName() {
    return "SpecialCharactersText";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t;
    i.plugins.get("SpecialCharacters").addItems("Text", [{ character: "‹", title: e("Single left-pointing angle quotation mark") }, { character: "›", title: e("Single right-pointing angle quotation mark") }, { character: "«", title: e("Left-pointing double angle quotation mark") }, { character: "»", title: e("Right-pointing double angle quotation mark") }, { character: "‘", title: e("Left single quotation mark") }, { character: "’", title: e("Right single quotation mark") }, { character: "“", title: e("Left double quotation mark") }, { character: "”", title: e("Right double quotation mark") }, { character: "‚", title: e("Single low-9 quotation mark") }, { character: "„", title: e("Double low-9 quotation mark") }, { character: "¡", title: e("Inverted exclamation mark") }, { character: "¿", title: e("Inverted question mark") }, { character: "‥", title: e("Two dot leader") }, { character: "…", title: e("Horizontal ellipsis") }, { character: "‡", title: e("Double dagger") }, { character: "‰", title: e("Per mille sign") }, { character: "‱", title: e("Per ten thousand sign") }, { character: "‼", title: e("Double exclamation mark") }, { character: "⁈", title: e("Question exclamation mark") }, { character: "⁉", title: e("Exclamation question mark") }, { character: "⁇", title: e("Double question mark") }, { character: "©", title: e("Copyright sign") }, { character: "®", title: e("Registered sign") }, { character: "™", title: e("Trade mark sign") }, { character: "§", title: e("Section sign") }, { character: "¶", title: e("Paragraph sign") }, { character: "⁋", title: e("Reversed paragraph sign") }], { label: e("Text") });
  }
}
class T0 extends A {
  static get pluginName() {
    return "SpecialCharactersMathematical";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t;
    i.plugins.get("SpecialCharacters").addItems("Mathematical", [{ character: "<", title: e("Less-than sign") }, { character: ">", title: e("Greater-than sign") }, { character: "≤", title: e("Less-than or equal to") }, { character: "≥", title: e("Greater-than or equal to") }, { character: "–", title: e("En dash") }, { character: "—", title: e("Em dash") }, { character: "¯", title: e("Macron") }, { character: "‾", title: e("Overline") }, { character: "°", title: e("Degree sign") }, { character: "−", title: e("Minus sign") }, { character: "±", title: e("Plus-minus sign") }, { character: "÷", title: e("Division sign") }, { character: "⁄", title: e("Fraction slash") }, { character: "×", title: e("Multiplication sign") }, { character: "ƒ", title: e("Latin small letter f with hook") }, { character: "∫", title: e("Integral") }, { character: "∑", title: e("N-ary summation") }, { character: "∞", title: e("Infinity") }, { character: "√", title: e("Square root") }, { character: "∼", title: e("Tilde operator") }, { character: "≅", title: e("Approximately equal to") }, { character: "≈", title: e("Almost equal to") }, { character: "≠", title: e("Not equal to") }, { character: "≡", title: e("Identical to") }, { character: "∈", title: e("Element of") }, { character: "∉", title: e("Not an element of") }, { character: "∋", title: e("Contains as member") }, { character: "∏", title: e("N-ary product") }, { character: "∧", title: e("Logical and") }, { character: "∨", title: e("Logical or") }, { character: "¬", title: e("Not sign") }, { character: "∩", title: e("Intersection") }, { character: "∪", title: e("Union") }, { character: "∂", title: e("Partial differential") }, { character: "∀", title: e("For all") }, { character: "∃", title: e("There exists") }, { character: "∅", title: e("Empty set") }, { character: "∇", title: e("Nabla") }, { character: "∗", title: e("Asterisk operator") }, { character: "∝", title: e("Proportional to") }, { character: "∠", title: e("Angle") }, { character: "¼", title: e("Vulgar fraction one quarter") }, { character: "½", title: e("Vulgar fraction one half") }, { character: "¾", title: e("Vulgar fraction three quarters") }], { label: e("Mathematical") });
  }
}
class E0 extends A {
  static get pluginName() {
    return "SpecialCharactersLatin";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t;
    i.plugins.get("SpecialCharacters").addItems("Latin", [{ character: "Ā", title: e("Latin capital letter a with macron") }, { character: "ā", title: e("Latin small letter a with macron") }, { character: "Ă", title: e("Latin capital letter a with breve") }, { character: "ă", title: e("Latin small letter a with breve") }, { character: "Ą", title: e("Latin capital letter a with ogonek") }, { character: "ą", title: e("Latin small letter a with ogonek") }, { character: "Ć", title: e("Latin capital letter c with acute") }, { character: "ć", title: e("Latin small letter c with acute") }, { character: "Ĉ", title: e("Latin capital letter c with circumflex") }, { character: "ĉ", title: e("Latin small letter c with circumflex") }, { character: "Ċ", title: e("Latin capital letter c with dot above") }, { character: "ċ", title: e("Latin small letter c with dot above") }, { character: "Č", title: e("Latin capital letter c with caron") }, { character: "č", title: e("Latin small letter c with caron") }, { character: "Ď", title: e("Latin capital letter d with caron") }, { character: "ď", title: e("Latin small letter d with caron") }, { character: "Đ", title: e("Latin capital letter d with stroke") }, { character: "đ", title: e("Latin small letter d with stroke") }, { character: "Ē", title: e("Latin capital letter e with macron") }, { character: "ē", title: e("Latin small letter e with macron") }, { character: "Ĕ", title: e("Latin capital letter e with breve") }, { character: "ĕ", title: e("Latin small letter e with breve") }, { character: "Ė", title: e("Latin capital letter e with dot above") }, { character: "ė", title: e("Latin small letter e with dot above") }, { character: "Ę", title: e("Latin capital letter e with ogonek") }, { character: "ę", title: e("Latin small letter e with ogonek") }, { character: "Ě", title: e("Latin capital letter e with caron") }, { character: "ě", title: e("Latin small letter e with caron") }, { character: "Ĝ", title: e("Latin capital letter g with circumflex") }, { character: "ĝ", title: e("Latin small letter g with circumflex") }, { character: "Ğ", title: e("Latin capital letter g with breve") }, { character: "ğ", title: e("Latin small letter g with breve") }, { character: "Ġ", title: e("Latin capital letter g with dot above") }, { character: "ġ", title: e("Latin small letter g with dot above") }, { character: "Ģ", title: e("Latin capital letter g with cedilla") }, { character: "ģ", title: e("Latin small letter g with cedilla") }, { character: "Ĥ", title: e("Latin capital letter h with circumflex") }, { character: "ĥ", title: e("Latin small letter h with circumflex") }, { character: "Ħ", title: e("Latin capital letter h with stroke") }, { character: "ħ", title: e("Latin small letter h with stroke") }, { character: "Ĩ", title: e("Latin capital letter i with tilde") }, { character: "ĩ", title: e("Latin small letter i with tilde") }, { character: "Ī", title: e("Latin capital letter i with macron") }, { character: "ī", title: e("Latin small letter i with macron") }, { character: "Ĭ", title: e("Latin capital letter i with breve") }, { character: "ĭ", title: e("Latin small letter i with breve") }, { character: "Į", title: e("Latin capital letter i with ogonek") }, { character: "į", title: e("Latin small letter i with ogonek") }, { character: "İ", title: e("Latin capital letter i with dot above") }, { character: "ı", title: e("Latin small letter dotless i") }, { character: "Ĳ", title: e("Latin capital ligature ij") }, { character: "ĳ", title: e("Latin small ligature ij") }, { character: "Ĵ", title: e("Latin capital letter j with circumflex") }, { character: "ĵ", title: e("Latin small letter j with circumflex") }, { character: "Ķ", title: e("Latin capital letter k with cedilla") }, { character: "ķ", title: e("Latin small letter k with cedilla") }, { character: "ĸ", title: e("Latin small letter kra") }, { character: "Ĺ", title: e("Latin capital letter l with acute") }, { character: "ĺ", title: e("Latin small letter l with acute") }, { character: "Ļ", title: e("Latin capital letter l with cedilla") }, { character: "ļ", title: e("Latin small letter l with cedilla") }, { character: "Ľ", title: e("Latin capital letter l with caron") }, { character: "ľ", title: e("Latin small letter l with caron") }, { character: "Ŀ", title: e("Latin capital letter l with middle dot") }, { character: "ŀ", title: e("Latin small letter l with middle dot") }, { character: "Ł", title: e("Latin capital letter l with stroke") }, { character: "ł", title: e("Latin small letter l with stroke") }, { character: "Ń", title: e("Latin capital letter n with acute") }, { character: "ń", title: e("Latin small letter n with acute") }, { character: "Ņ", title: e("Latin capital letter n with cedilla") }, { character: "ņ", title: e("Latin small letter n with cedilla") }, { character: "Ň", title: e("Latin capital letter n with caron") }, { character: "ň", title: e("Latin small letter n with caron") }, { character: "ŉ", title: e("Latin small letter n preceded by apostrophe") }, { character: "Ŋ", title: e("Latin capital letter eng") }, { character: "ŋ", title: e("Latin small letter eng") }, { character: "Ō", title: e("Latin capital letter o with macron") }, { character: "ō", title: e("Latin small letter o with macron") }, { character: "Ŏ", title: e("Latin capital letter o with breve") }, { character: "ŏ", title: e("Latin small letter o with breve") }, { character: "Ő", title: e("Latin capital letter o with double acute") }, { character: "ő", title: e("Latin small letter o with double acute") }, { character: "Œ", title: e("Latin capital ligature oe") }, { character: "œ", title: e("Latin small ligature oe") }, { character: "Ŕ", title: e("Latin capital letter r with acute") }, { character: "ŕ", title: e("Latin small letter r with acute") }, { character: "Ŗ", title: e("Latin capital letter r with cedilla") }, { character: "ŗ", title: e("Latin small letter r with cedilla") }, { character: "Ř", title: e("Latin capital letter r with caron") }, { character: "ř", title: e("Latin small letter r with caron") }, { character: "Ś", title: e("Latin capital letter s with acute") }, { character: "ś", title: e("Latin small letter s with acute") }, { character: "Ŝ", title: e("Latin capital letter s with circumflex") }, { character: "ŝ", title: e("Latin small letter s with circumflex") }, { character: "Ş", title: e("Latin capital letter s with cedilla") }, { character: "ş", title: e("Latin small letter s with cedilla") }, { character: "Š", title: e("Latin capital letter s with caron") }, { character: "š", title: e("Latin small letter s with caron") }, { character: "Ţ", title: e("Latin capital letter t with cedilla") }, { character: "ţ", title: e("Latin small letter t with cedilla") }, { character: "Ť", title: e("Latin capital letter t with caron") }, { character: "ť", title: e("Latin small letter t with caron") }, { character: "Ŧ", title: e("Latin capital letter t with stroke") }, { character: "ŧ", title: e("Latin small letter t with stroke") }, { character: "Ũ", title: e("Latin capital letter u with tilde") }, { character: "ũ", title: e("Latin small letter u with tilde") }, { character: "Ū", title: e("Latin capital letter u with macron") }, { character: "ū", title: e("Latin small letter u with macron") }, { character: "Ŭ", title: e("Latin capital letter u with breve") }, { character: "ŭ", title: e("Latin small letter u with breve") }, { character: "Ů", title: e("Latin capital letter u with ring above") }, { character: "ů", title: e("Latin small letter u with ring above") }, { character: "Ű", title: e("Latin capital letter u with double acute") }, { character: "ű", title: e("Latin small letter u with double acute") }, { character: "Ų", title: e("Latin capital letter u with ogonek") }, { character: "ų", title: e("Latin small letter u with ogonek") }, { character: "Ŵ", title: e("Latin capital letter w with circumflex") }, { character: "ŵ", title: e("Latin small letter w with circumflex") }, { character: "Ŷ", title: e("Latin capital letter y with circumflex") }, { character: "ŷ", title: e("Latin small letter y with circumflex") }, { character: "Ÿ", title: e("Latin capital letter y with diaeresis") }, { character: "Ź", title: e("Latin capital letter z with acute") }, { character: "ź", title: e("Latin small letter z with acute") }, { character: "Ż", title: e("Latin capital letter z with dot above") }, { character: "ż", title: e("Latin small letter z with dot above") }, { character: "Ž", title: e("Latin capital letter z with caron") }, { character: "ž", title: e("Latin small letter z with caron") }, { character: "ſ", title: e("Latin small letter long s") }], { label: e("Latin") });
  }
}
class S0 extends A {
  static get pluginName() {
    return "SpecialCharactersCurrency";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = i.t;
    i.plugins.get("SpecialCharacters").addItems("Currency", [{ character: "$", title: e("Dollar sign") }, { character: "€", title: e("Euro sign") }, { character: "¥", title: e("Yen sign") }, { character: "£", title: e("Pound sign") }, { character: "¢", title: e("Cent sign") }, { character: "₠", title: e("Euro-currency sign") }, { character: "₡", title: e("Colon sign") }, { character: "₢", title: e("Cruzeiro sign") }, { character: "₣", title: e("French franc sign") }, { character: "₤", title: e("Lira sign") }, { character: "¤", title: e("Currency sign") }, { character: "₿", title: e("Bitcoin sign") }, { character: "₥", title: e("Mill sign") }, { character: "₦", title: e("Naira sign") }, { character: "₧", title: e("Peseta sign") }, { character: "₨", title: e("Rupee sign") }, { character: "₩", title: e("Won sign") }, { character: "₪", title: e("New sheqel sign") }, { character: "₫", title: e("Dong sign") }, { character: "₭", title: e("Kip sign") }, { character: "₮", title: e("Tugrik sign") }, { character: "₯", title: e("Drachma sign") }, { character: "₰", title: e("German penny sign") }, { character: "₱", title: e("Peso sign") }, { character: "₲", title: e("Guarani sign") }, { character: "₳", title: e("Austral sign") }, { character: "₴", title: e("Hryvnia sign") }, { character: "₵", title: e("Cedi sign") }, { character: "₶", title: e("Livre tournois sign") }, { character: "₷", title: e("Spesmilo sign") }, { character: "₸", title: e("Tenge sign") }, { character: "₹", title: e("Indian rupee sign") }, { character: "₺", title: e("Turkish lira sign") }, { character: "₻", title: e("Nordic mark sign") }, { character: "₼", title: e("Manat sign") }, { character: "₽", title: e("Ruble sign") }], { label: e("Currency") });
  }
}
class FP extends A {
  static get pluginName() {
    return "SpecialCharactersEssentials";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [S0, A0, T0, C0, E0];
  }
}
function jP(o, i) {
  const { modelAttribute: e, styleName: t, viewElement: n, defaultValue: r, reduceBoxSides: s = !1, shouldUpcast: a = () => !0 } = i;
  o.for("upcast").attributeToAttribute({ view: { name: n, styles: { [t]: /[\s\S]+/ } }, model: { key: e, value: (l, c, d) => {
    if (!a(l)) return;
    const u = $P(r, "", d), h = l.getNormalizedStyle(t), g = s ? UP(h) : h;
    return u !== g ? g : void 0;
  } } });
}
function HP(o, i) {
  const { modelElement: e, modelAttribute: t, styleName: n } = i;
  o.for("downcast").attributeToAttribute({ model: { name: e, key: t }, view: (r) => ({ key: "style", value: { [n]: r } }) });
}
function $P(o, i, e) {
  const t = e.modelRange && Te(e.modelRange.getItems({ shallow: !0 })), n = t && t.is("element") && t.findAncestor("table", { includeSelf: !0 });
  return n && n.getAttribute("tableType") === "layout" ? i : o;
}
function UP(o) {
  if (!o) return;
  const i = ["top", "right", "bottom", "left"];
  if (!i.every((t) => o[t])) return o;
  const e = o.top;
  return i.every((t) => o[t] === e) ? e : o;
}
function Xe(o, i, e, t, n = 1) {
  i != null && n != null && i > n ? t.setAttribute(o, i, e) : t.removeAttribute(o, e);
}
function ko(o, i, e = {}) {
  const t = o.createElement("tableCell", e);
  return o.insertElement("paragraph", t), o.insert(t, i), t;
}
function Bd(o, i) {
  const e = i.parent.parent, t = parseInt(e.getAttribute("headingColumns") || "0"), { column: n } = o.getCellLocation(i);
  return !!t && n < t;
}
function qP(o, i, e) {
  const { modelAttribute: t } = e;
  o.extend("tableCell", { allowAttributes: [t] }), jP(i, { viewElement: /^(td|th)$/, ...e }), HP(i, { modelElement: "tableCell", ...e });
}
function WP(o) {
  const i = o.getSelectedElement();
  return i && i.is("element", "table") ? i : o.getFirstPosition().findAncestor("table");
}
function GP() {
  return (o) => {
    o.on("element:table", (i, e, t) => {
      const n = e.viewItem;
      if (!t.consumable.test(n, { name: !0 })) return;
      const { rows: r, headingRows: s, headingColumns: a } = function(d) {
        let u, h = 0;
        const g = [], p = [];
        let f;
        for (const b of Array.from(d.getChildren())) {
          if (b.name !== "tbody" && b.name !== "thead" && b.name !== "tfoot") continue;
          b.name !== "thead" || f || (f = b);
          const k = Array.from(b.getChildren()).filter((w) => w.is("element", "tr"));
          let _ = null;
          for (const w of k) {
            const y = Array.from(w.getChildren()).filter((x) => x.is("element", "td") || x.is("element", "th"));
            if (f && b === f || b.name === "tbody" && y.length > 0 && (_ === null || y.length === _) && y.every((x) => x.is("element", "th"))) h++, g.push(w);
            else {
              p.push(w);
              const x = ZP(w);
              (!u || x < u) && (u = x);
            }
            _ = Math.max(_ || 0, y.length);
          }
        }
        return { headingRows: h, headingColumns: u || 0, rows: [...g, ...p] };
      }(n), l = {};
      a && (l.headingColumns = a), s && (l.headingRows = s);
      const c = t.writer.createElement("table", l);
      if (t.safeInsert(c, e.modelCursor)) {
        if (t.consumable.consume(n, { name: !0 }), r.forEach((d) => t.convertItem(d, t.writer.createPositionAt(c, "end"))), t.convertChildren(n, t.writer.createPositionAt(c, "end")), c.isEmpty) {
          const d = t.writer.createElement("tableRow");
          t.writer.insert(d, t.writer.createPositionAt(c, "end")), ko(t.writer, t.writer.createPositionAt(d, "end"));
        }
        t.updateConversionResult(c, e);
      }
    });
  };
}
function vf(o) {
  return (i) => {
    i.on(`element:${o}`, (e, t, { writer: n }) => {
      if (!t.modelRange) return;
      const r = t.modelRange.start.nodeAfter, s = n.createPositionAt(r, 0);
      if (t.viewItem.isEmpty) return void n.insertElement("paragraph", s);
      const a = Array.from(r.getChildren());
      if (a.every((l) => l.is("element", "$marker"))) {
        const l = n.createElement("paragraph");
        n.insert(l, n.createPositionAt(r, 0));
        for (const c of a) n.move(n.createRangeOn(c), n.createPositionAt(l, "end"));
      }
    }, { priority: "low" });
  };
}
function ZP(o) {
  let i = 0, e = 0;
  const t = Array.from(o.getChildren()).filter((n) => n.name === "th" || n.name === "td");
  for (; e < t.length && t[e].name === "th"; ) {
    const n = t[e];
    i += parseInt(n.getAttribute("colspan") || "1"), e++;
  }
  return i;
}
class ye {
  constructor(i, e = {}) {
    m(this, "_table");
    m(this, "_startRow");
    m(this, "_endRow");
    m(this, "_startColumn");
    m(this, "_endColumn");
    m(this, "_includeAllSlots");
    m(this, "_skipRows");
    m(this, "_row");
    m(this, "_rowIndex");
    m(this, "_column");
    m(this, "_cellIndex");
    m(this, "_spannedCells");
    m(this, "_nextCellAtColumn");
    m(this, "_jumpedToStartRow", !1);
    this._table = i, this._startRow = e.row !== void 0 ? e.row : e.startRow || 0, this._endRow = e.row !== void 0 ? e.row : e.endRow, this._startColumn = e.column !== void 0 ? e.column : e.startColumn || 0, this._endColumn = e.column !== void 0 ? e.column : e.endColumn, this._includeAllSlots = !!e.includeAllSlots, this._skipRows = /* @__PURE__ */ new Set(), this._row = 0, this._rowIndex = 0, this._column = 0, this._cellIndex = 0, this._spannedCells = /* @__PURE__ */ new Map(), this._nextCellAtColumn = -1;
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    this._canJumpToStartRow() && this._jumpToNonSpannedRowClosestToStartRow();
    const i = this._table.getChild(this._rowIndex);
    if (!i || this._isOverEndRow()) return { done: !0, value: void 0 };
    if (!i.is("element", "tableRow")) return this._rowIndex++, this.next();
    if (this._isOverEndColumn()) return this._advanceToNextRow();
    let e = null;
    const t = this._getSpanned();
    if (t) this._includeAllSlots && !this._shouldSkipSlot() && (e = this._formatOutValue(t.cell, t.row, t.column));
    else {
      const n = i.getChild(this._cellIndex);
      if (!n) return this._advanceToNextRow();
      const r = parseInt(n.getAttribute("colspan") || "1"), s = parseInt(n.getAttribute("rowspan") || "1");
      (r > 1 || s > 1) && this._recordSpans(n, s, r), this._shouldSkipSlot() || (e = this._formatOutValue(n)), this._nextCellAtColumn = this._column + r;
    }
    return this._column++, this._column == this._nextCellAtColumn && this._cellIndex++, e || this.next();
  }
  skipRow(i) {
    this._skipRows.add(i);
  }
  _advanceToNextRow() {
    return this._row++, this._rowIndex++, this._column = 0, this._cellIndex = 0, this._nextCellAtColumn = -1, this.next();
  }
  _isOverEndRow() {
    return this._endRow !== void 0 && this._row > this._endRow;
  }
  _isOverEndColumn() {
    return this._endColumn !== void 0 && this._column > this._endColumn;
  }
  _formatOutValue(i, e = this._row, t = this._column) {
    return { done: !1, value: new KP(this, i, e, t) };
  }
  _shouldSkipSlot() {
    const i = this._skipRows.has(this._row), e = this._row < this._startRow, t = this._column < this._startColumn, n = this._endColumn !== void 0 && this._column > this._endColumn;
    return i || e || t || n;
  }
  _getSpanned() {
    const i = this._spannedCells.get(this._row);
    return i && i.get(this._column) || null;
  }
  _recordSpans(i, e, t) {
    const n = { cell: i, row: this._row, column: this._column };
    for (let r = this._row; r < this._row + e; r++) for (let s = this._column; s < this._column + t; s++) r == this._row && s == this._column || this._markSpannedCell(r, s, n);
  }
  _markSpannedCell(i, e, t) {
    this._spannedCells.has(i) || this._spannedCells.set(i, /* @__PURE__ */ new Map()), this._spannedCells.get(i).set(e, t);
  }
  _canJumpToStartRow() {
    return !!this._startRow && this._startRow > 0 && !this._jumpedToStartRow;
  }
  _jumpToNonSpannedRowClosestToStartRow() {
    const i = this._getRowLength(0);
    for (let e = this._startRow; !this._jumpedToStartRow; e--) i === this._getRowLength(e) && (this._row = e, this._rowIndex = e, this._jumpedToStartRow = !0);
  }
  _getRowLength(i) {
    return [...this._table.getChild(i).getChildren()].reduce((e, t) => e + parseInt(t.getAttribute("colspan") || "1"), 0);
  }
}
class KP {
  constructor(i, e, t, n) {
    m(this, "cell");
    m(this, "row");
    m(this, "column");
    m(this, "cellAnchorRow");
    m(this, "cellAnchorColumn");
    m(this, "_cellIndex");
    m(this, "_rowIndex");
    m(this, "_table");
    this.cell = e, this.row = i._row, this.column = i._column, this.cellAnchorRow = t, this.cellAnchorColumn = n, this._cellIndex = i._cellIndex, this._rowIndex = i._rowIndex, this._table = i._table;
  }
  get isAnchor() {
    return this.row === this.cellAnchorRow && this.column === this.cellAnchorColumn;
  }
  get cellWidth() {
    return parseInt(this.cell.getAttribute("colspan") || "1");
  }
  get cellHeight() {
    return parseInt(this.cell.getAttribute("rowspan") || "1");
  }
  get rowIndex() {
    return this._rowIndex;
  }
  getPositionBefore() {
    return this._table.root.document.model.createPositionAt(this._table.getChild(this.row), this._cellIndex);
  }
}
function yf(o, i) {
  return (e, { writer: t }) => {
    const n = e.getAttribute("headingRows") || 0, r = t.createContainerElement("table", null, []), s = t.createContainerElement("figure", { class: "table" }, r);
    n > 0 && t.insert(t.createPositionAt(r, "end"), t.createContainerElement("thead", null, t.createSlot((a) => a.is("element", "tableRow") && a.index < n))), n < o.getRows(e) && t.insert(t.createPositionAt(r, "end"), t.createContainerElement("tbody", null, t.createSlot((a) => a.is("element", "tableRow") && a.index >= n)));
    for (const { positionOffset: a, filter: l } of i.additionalSlots) t.insert(t.createPositionAt(r, a), t.createSlot(l));
    return t.insert(t.createPositionAt(r, "after"), t.createSlot((a) => !a.is("element", "tableRow") && !i.additionalSlots.some(({ filter: l }) => l(a)))), i.asWidget ? function(a, l) {
      return l.setCustomProperty("table", !0, a), wl(a, l, { hasSelectionHandle: !0 });
    }(s, t) : s;
  };
}
function xf(o = {}) {
  return (i, { writer: e }) => {
    const t = i.parent, n = t.parent, r = n.getChildIndex(t), s = new ye(n, { row: r }), a = n.getAttribute("headingRows") || 0, l = n.getAttribute("headingColumns") || 0;
    let c = null;
    for (const d of s) if (d.cell == i) {
      const u = d.row < a || d.column < l ? "th" : "td";
      c = o.asWidget ? gw(e.createEditableElement(u), e, { withAriaRole: !1 }) : e.createContainerElement(u);
      break;
    }
    return c;
  };
}
function Cf(o = {}) {
  return (i, { writer: e }) => {
    if (!i.parent.is("element", "tableCell") || !I0(i)) return null;
    if (o.asWidget) return e.createContainerElement("span", { class: "ck-table-bogus-paragraph" });
    {
      const t = e.createContainerElement("p");
      return e.setCustomProperty("dataPipeline:transparentRendering", !0, t), t;
    }
  };
}
function I0(o) {
  return o.parent.childCount == 1 && !function(i) {
    for (const e of i.getAttributeKeys()) if (!e.startsWith("selection:") && e != "htmlEmptyBlock") return !0;
    return !1;
  }(o);
}
class YP extends G {
  refresh() {
    const i = this.editor.model, e = i.document.selection, t = i.schema;
    this.isEnabled = function(n, r) {
      const s = n.getFirstPosition().parent, a = s === s.root ? s : s.parent;
      return r.checkChild(a, "table");
    }(e, t);
  }
  execute(i = {}) {
    const e = this.editor, t = e.model, n = e.plugins.get("TableUtils"), r = e.config.get("table.defaultHeadings.rows"), s = e.config.get("table.defaultHeadings.columns");
    i.headingRows === void 0 && r && (i.headingRows = r), i.headingColumns === void 0 && s && (i.headingColumns = s), t.change((a) => {
      const l = n.createTable(a, i);
      t.insertObject(l, null, null, { findOptimalPosition: "auto" }), a.setSelection(a.createPositionAt(l.getNodeByPath([0, 0, 0]), 0));
    });
  }
}
class Af extends G {
  constructor(e, t = {}) {
    super(e);
    m(this, "order");
    this.order = t.order || "below";
  }
  refresh() {
    const e = this.editor.model.document.selection, t = !!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;
    this.isEnabled = t;
  }
  execute() {
    const e = this.editor, t = e.model.document.selection, n = e.plugins.get("TableUtils"), r = this.order === "above", s = n.getSelectionAffectedTableCells(t), a = n.getRowIndexes(s), l = r ? a.first : a.last, c = s[0].findAncestor("table");
    n.insertRows(c, { at: r ? l : l + 1, copyStructureFromAbove: !r });
  }
}
class Tf extends G {
  constructor(e, t = {}) {
    super(e);
    m(this, "order");
    this.order = t.order || "right";
  }
  refresh() {
    const e = this.editor.model.document.selection, t = !!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;
    this.isEnabled = t;
  }
  execute() {
    const e = this.editor, t = e.model.document.selection, n = e.plugins.get("TableUtils"), r = this.order === "left", s = n.getSelectionAffectedTableCells(t), a = n.getColumnIndexes(s), l = r ? a.first : a.last, c = s[0].findAncestor("table");
    n.insertColumns(c, { columns: 1, at: r ? l : l + 1 });
  }
}
class Ef extends G {
  constructor(e, t = {}) {
    super(e);
    m(this, "direction");
    this.direction = t.direction || "horizontally";
  }
  refresh() {
    const e = this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);
    this.isEnabled = e.length === 1;
  }
  execute() {
    const e = this.editor.plugins.get("TableUtils"), t = e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];
    this.direction === "horizontally" ? e.splitCellHorizontally(t, 2) : e.splitCellVertically(t, 2);
  }
}
function P0(o, i, e) {
  const { startRow: t, startColumn: n, endRow: r, endColumn: s } = i, a = e.createElement("table"), l = o.getAttribute("tableType");
  l && e.setAttribute("tableType", l, a);
  const c = r - t + 1;
  for (let u = 0; u < c; u++) e.insertElement("tableRow", a, "end");
  const d = [...new ye(o, { startRow: t, endRow: r, startColumn: n, endColumn: s, includeAllSlots: !0 })];
  for (const { row: u, column: h, cell: g, isAnchor: p, cellAnchorRow: f, cellAnchorColumn: b } of d) {
    const k = u - t, _ = a.getChild(k);
    if (p) {
      const w = e.cloneElement(g);
      e.append(w, _), N0(w, u, h, r, s, e);
    } else (f < t || b < n) && ko(e, e.createPositionAt(_, "end"));
  }
  return function(u, h, g, p, f) {
    const b = parseInt(h.getAttribute("headingRows") || "0");
    b > 0 && Xe("headingRows", b - g, u, f, 0);
    const k = parseInt(h.getAttribute("headingColumns") || "0");
    k > 0 && Xe("headingColumns", k - p, u, f, 0);
  }(a, o, t, n, e), a;
}
function M0(o, i, e = 0) {
  const t = [], n = new ye(o, { startRow: e, endRow: i - 1 });
  for (const r of n) {
    const { row: s, cellHeight: a } = r;
    s < i && i <= s + a - 1 && t.push(r);
  }
  return t;
}
function V0(o, i, e) {
  const t = o.parent, n = t.parent, r = t.index, s = i - r, a = {}, l = parseInt(o.getAttribute("rowspan")) - s;
  l > 1 && (a.rowspan = l);
  const c = parseInt(o.getAttribute("colspan") || "1");
  c > 1 && (a.colspan = c);
  const d = r + s, u = [...new ye(n, { startRow: r, endRow: d, includeAllSlots: !0 })];
  let h, g = null;
  for (const p of u) {
    const { row: f, column: b, cell: k } = p;
    k === o && h === void 0 && (h = b), h !== void 0 && h === b && f === d && (g = ko(e, p.getPositionBefore(), a));
  }
  return Xe("rowspan", s, o, e), g;
}
function L0(o, i) {
  const e = [], t = new ye(o);
  for (const n of t) {
    const { column: r, cellWidth: s } = n;
    r < i && i <= r + s - 1 && e.push(n);
  }
  return e;
}
function O0(o, i, e, t) {
  const n = e - i, r = {}, s = parseInt(o.getAttribute("colspan")) - n;
  s > 1 && (r.colspan = s);
  const a = parseInt(o.getAttribute("rowspan") || "1");
  a > 1 && (r.rowspan = a);
  const l = ko(t, t.createPositionAfter(o), r);
  return Xe("colspan", n, o, t), l;
}
function N0(o, i, e, t, n, r) {
  const s = parseInt(o.getAttribute("colspan") || "1"), a = parseInt(o.getAttribute("rowspan") || "1");
  e + s - 1 > n && Xe("colspan", n - e + 1, o, r, 1), i + a - 1 > t && Xe("rowspan", t - i + 1, o, r, 1);
}
function Dd(o, i) {
  const e = i.getColumns(o), t = new Array(e).fill(0);
  for (const { column: r } of new ye(o)) t[r]++;
  const n = t.reduce((r, s, a) => s ? r : [...r, a], []);
  if (n.length > 0) {
    const r = n[n.length - 1];
    return i.removeColumns(o, { at: r }), !0;
  }
  return !1;
}
function Fd(o, i) {
  const e = [], t = i.getRows(o);
  for (let n = 0; n < t; n++)
    o.getChild(n).isEmpty && e.push(n);
  if (e.length > 0) {
    const n = e[e.length - 1];
    return i.removeRows(o, { at: n }), !0;
  }
  return !1;
}
function Xu(o, i) {
  Dd(o, i) || Fd(o, i);
}
function R0(o, i) {
  const e = Array.from(new ye(o, { startColumn: i.firstColumn, endColumn: i.lastColumn, row: i.lastRow }));
  if (e.every(({ cellHeight: n }) => n === 1)) return i.lastRow;
  const t = e[0].cellHeight - 1;
  return i.lastRow + t;
}
function z0(o, i) {
  const e = Array.from(new ye(o, { startRow: i.firstRow, endRow: i.lastRow, column: i.lastColumn }));
  if (e.every(({ cellWidth: n }) => n === 1)) return i.lastColumn;
  const t = e[0].cellWidth - 1;
  return i.lastColumn + t;
}
class ta extends G {
  constructor(e, t) {
    super(e);
    m(this, "direction");
    m(this, "isHorizontal");
    this.direction = t.direction, this.isHorizontal = this.direction == "right" || this.direction == "left";
  }
  refresh() {
    const e = this._getMergeableCell();
    this.value = e, this.isEnabled = !!e;
  }
  execute() {
    const e = this.editor.model, t = e.document, n = this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0], r = this.value, s = this.direction;
    e.change((a) => {
      const l = s == "right" || s == "down", c = l ? n : r, d = l ? r : n, u = d.parent;
      (function(b, k, _) {
        Sf(b) || (Sf(k) && _.remove(_.createRangeIn(k)), _.move(_.createRangeIn(b), _.createPositionAt(k, "end"))), _.remove(b);
      })(d, c, a);
      const h = this.isHorizontal ? "colspan" : "rowspan", g = parseInt(n.getAttribute(h) || "1"), p = parseInt(r.getAttribute(h) || "1");
      a.setAttribute(h, g + p, c), a.setSelection(a.createRangeIn(c));
      const f = this.editor.plugins.get("TableUtils");
      Xu(u.findAncestor("table"), f);
    });
  }
  _getMergeableCell() {
    const e = this.editor.model.document, t = this.editor.plugins.get("TableUtils"), n = t.getTableCellsContainingSelection(e.selection)[0];
    if (!n) return;
    const r = this.isHorizontal ? function(l, c, d) {
      const u = l.parent, h = u.parent, g = c == "right" ? l.nextSibling : l.previousSibling, p = (h.getAttribute("headingColumns") || 0) > 0;
      if (!g) return;
      const f = c == "right" ? l : g, b = c == "right" ? g : l, { column: k } = d.getCellLocation(f), { column: _ } = d.getCellLocation(b), w = parseInt(f.getAttribute("colspan") || "1"), y = Bd(d, f), x = Bd(d, b);
      if (!(p && y != x))
        return k + w === _ ? g : void 0;
    }(n, this.direction, t) : function(l, c, d) {
      const u = l.parent, h = u.parent, g = h.getChildIndex(u);
      if (c == "down" && g === d.getRows(h) - 1 || c == "up" && g === 0) return null;
      const p = parseInt(l.getAttribute("rowspan") || "1"), f = h.getAttribute("headingRows") || 0, b = c == "down" && g + p === f, k = c == "up" && g === f;
      if (f && (b || k)) return null;
      const _ = parseInt(l.getAttribute("rowspan") || "1"), w = c == "down" ? g + _ : g, y = [...new ye(h, { endRow: w })], x = y.find((L) => L.cell === l), C = x.column, S = y.find(({ row: L, cellHeight: W, column: Y }) => Y === C && (c == "down" ? L === w : w === L + W));
      return S && S.cell ? S.cell : null;
    }(n, this.direction, t);
    if (!r) return;
    const s = this.isHorizontal ? "rowspan" : "colspan", a = parseInt(n.getAttribute(s) || "1");
    return parseInt(r.getAttribute(s) || "1") === a ? r : void 0;
  }
}
function Sf(o) {
  const i = o.getChild(0);
  return o.childCount == 1 && i.is("element", "paragraph") && i.isEmpty;
}
class QP extends G {
  refresh() {
    const i = this.editor.plugins.get("TableUtils"), e = i.getSelectionAffectedTableCells(this.editor.model.document.selection), t = e[0];
    if (t) {
      const n = t.findAncestor("table"), r = i.getRows(n) - 1, s = i.getRowIndexes(e), a = s.first === 0 && s.last === r;
      this.isEnabled = !a;
    } else this.isEnabled = !1;
  }
  execute() {
    const i = this.editor.model, e = this.editor.plugins.get("TableUtils"), t = e.getSelectionAffectedTableCells(i.document.selection), n = e.getRowIndexes(t), r = t[0], s = r.findAncestor("table"), a = e.getCellLocation(r).column;
    i.change((l) => {
      const c = n.last - n.first + 1;
      e.removeRows(s, { at: n.first, rows: c });
      const d = function(u, h, g, p) {
        const f = u.getChild(Math.min(h, p - 1));
        let b = f.getChild(0), k = 0;
        for (const _ of f.getChildren()) {
          if (k > g) return b;
          b = _, k += parseInt(_.getAttribute("colspan") || "1");
        }
        return b;
      }(s, n.first, a, e.getRows(s));
      l.setSelection(l.createPositionAt(d, 0));
    });
  }
}
class JP extends G {
  refresh() {
    const i = this.editor.plugins.get("TableUtils"), e = i.getSelectionAffectedTableCells(this.editor.model.document.selection), t = e[0];
    if (t) {
      const n = t.findAncestor("table"), r = i.getColumns(n), { first: s, last: a } = i.getColumnIndexes(e);
      this.isEnabled = a - s < r - 1;
    } else this.isEnabled = !1;
  }
  execute() {
    const i = this.editor.plugins.get("TableUtils"), [e, t] = function(l, c) {
      const d = c.getSelectionAffectedTableCells(l), u = d[0], h = d.pop(), g = [u, h];
      return u.isBefore(h) ? g : g.reverse();
    }(this.editor.model.document.selection, i), n = e.parent.parent, r = [...new ye(n)], s = { first: r.find((l) => l.cell === e).column, last: r.find((l) => l.cell === t).column }, a = function(l, c, d, u) {
      return parseInt(d.getAttribute("colspan") || "1") > 1 ? d : c.previousSibling || d.nextSibling ? d.nextSibling || c.previousSibling : u.first ? l.reverse().find(({ column: g }) => g < u.first).cell : l.reverse().find(({ column: g }) => g > u.last).cell;
    }(r, e, t, s);
    this.editor.model.change((l) => {
      const c = s.last - s.first + 1;
      i.removeColumns(n, { at: s.first, columns: c }), l.setSelection(l.createPositionAt(a, 0));
    });
  }
}
class XP extends G {
  refresh() {
    const i = this.editor.plugins.get("TableUtils"), e = this.editor.model, t = i.getSelectionAffectedTableCells(e.document.selection);
    if (t.length === 0) return this.isEnabled = !1, void (this.value = !1);
    const n = t[0].findAncestor("table");
    this.isEnabled = e.schema.checkAttribute(n, "headingRows"), this.value = t.every((r) => this._isInHeading(r, r.parent.parent));
  }
  execute(i = {}) {
    if (i.forceValue === this.value) return;
    const e = this.editor.plugins.get("TableUtils"), t = this.editor.model, n = e.getSelectionAffectedTableCells(t.document.selection), r = n[0].findAncestor("table"), { first: s, last: a } = e.getRowIndexes(n), l = this.value ? s : a + 1, c = r.getAttribute("headingRows") || 0;
    t.change((d) => {
      if (l) {
        const u = M0(r, l, l > c ? c : 0);
        for (const { cell: h } of u) V0(h, l, d);
      }
      Xe("headingRows", l, r, d, 0);
    });
  }
  _isInHeading(i, e) {
    const t = parseInt(e.getAttribute("headingRows") || "0");
    return !!t && i.parent.index < t;
  }
}
class eM extends G {
  refresh() {
    const i = this.editor.plugins.get("TableUtils"), e = this.editor.model, t = i.getSelectionAffectedTableCells(e.document.selection);
    if (t.length === 0) return this.isEnabled = !1, void (this.value = !1);
    const n = t[0].findAncestor("table");
    this.isEnabled = e.schema.checkAttribute(n, "headingColumns"), this.value = t.every((r) => Bd(i, r));
  }
  execute(i = {}) {
    if (i.forceValue === this.value) return;
    const e = this.editor.plugins.get("TableUtils"), t = this.editor.model, n = e.getSelectionAffectedTableCells(t.document.selection), r = n[0].findAncestor("table"), { first: s, last: a } = e.getColumnIndexes(n), l = this.value ? s : a + 1;
    t.change((c) => {
      if (l) {
        const d = L0(r, l);
        for (const { cell: u, column: h } of d) O0(u, h, l, c);
      }
      Xe("headingColumns", l, r, c, 0);
    });
  }
}
function tM(o, i) {
  return 4e3 / B0(o, i);
}
function B0(o, i) {
  const e = If(o, "tbody", i) || If(o, "thead", i);
  return jd(i.editing.view.domConverter.mapViewToDom(e));
}
function If(o, i, e) {
  return [...[...e.editing.mapper.toViewElement(o).getChildren()].find((t) => t.is("element", "table")).getChildren()].find((t) => t.is("element", i));
}
function jd(o) {
  const i = z.window.getComputedStyle(o);
  return i.boxSizing === "border-box" ? parseFloat(i.width) - parseFloat(i.paddingLeft) - parseFloat(i.paddingRight) - parseFloat(i.borderLeftWidth) - parseFloat(i.borderRightWidth) : parseFloat(i.width);
}
function si(o) {
  const i = Math.pow(10, 2), e = typeof o == "number" ? o : parseFloat(o);
  return Math.round(e * i) / i;
}
function Zr(o) {
  return o.map((i) => typeof i == "number" ? i : parseFloat(i)).filter((i) => !Number.isNaN(i)).reduce((i, e) => i + e, 0);
}
function eh(o) {
  let i = function(t) {
    const n = t.filter((a) => a === "auto").length;
    if (n === 0) return t.map((a) => si(a));
    const r = Zr(t), s = Math.max((100 - r) / n, 5);
    return t.map((a) => a === "auto" ? s : a).map((a) => si(a));
  }(o.map((t) => t === "auto" ? t : parseFloat(t.replace("%", ""))));
  const e = Zr(i);
  return e !== 100 && (i = i.map((t) => si(100 * t / e)).map((t, n, r) => n !== r.length - 1 ? t : si(t + 100 - Zr(r)))), i.map((t) => t + "%");
}
function iM(o) {
  const i = z.window.getComputedStyle(o);
  return i.boxSizing === "border-box" ? parseInt(i.width) : parseFloat(i.width) + parseFloat(i.paddingLeft) + parseFloat(i.paddingRight) + parseFloat(i.borderWidth);
}
function D0(o, i, e, t) {
  for (let n = 0; n < Math.max(e.length, o.length); n++) {
    const r = o[n], s = e[n];
    s ? r ? t.setAttribute("columnWidth", s, r) : t.appendElement("tableColumn", { columnWidth: s }, i) : t.remove(r);
  }
}
function Kr(o) {
  if (o.is("element", "tableColumnGroup")) return o;
  const i = o.getChildren();
  return Array.from(i).find((e) => e.is("element", "tableColumnGroup"));
}
function ps(o) {
  const i = Kr(o);
  return i ? Array.from(i.getChildren()) : [];
}
class pt extends A {
  static get pluginName() {
    return "TableUtils";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this.decorate("insertColumns"), this.decorate("insertRows");
  }
  getCellLocation(i) {
    const e = i.parent, t = e.parent, n = t.getChildIndex(e), r = new ye(t, { row: n });
    for (const { cell: s, row: a, column: l } of r) if (s === i) return { row: a, column: l };
  }
  createTable(i, e) {
    const t = i.createElement("table"), n = e.rows || 2, r = e.columns || 2;
    return Mc(i, t, 0, n, r), e.headingRows && Xe("headingRows", Math.min(e.headingRows, n), t, i, 0), e.headingColumns && Xe("headingColumns", Math.min(e.headingColumns, r), t, i, 0), t;
  }
  insertRows(i, e = {}) {
    const t = this.editor.model, n = e.at || 0, r = e.rows || 1, s = e.copyStructureFromAbove !== void 0, a = e.copyStructureFromAbove ? n - 1 : n, l = this.getRows(i), c = this.getColumns(i);
    if (n > l) throw new v("tableutils-insertrows-insert-out-of-range", this, { options: e });
    t.change((d) => {
      const u = i.getAttribute("headingRows") || 0;
      if (u > n && Xe("headingRows", u + r, i, d, 0), !s && (n === 0 || n === l)) return void Mc(d, i, n, r, c);
      const h = s ? Math.max(n, a) : n, g = new ye(i, { endRow: h }), p = new Array(c).fill(1);
      for (const { row: f, column: b, cellHeight: k, cellWidth: _, cell: w } of g) {
        const y = f + k - 1, x = f <= a && a <= y;
        f < n && n <= y ? (d.setAttribute("rowspan", k + r, w), p[b] = -_) : s && x && (p[b] = _);
      }
      for (let f = 0; f < r; f++) {
        const b = d.createElement("tableRow");
        d.insert(b, i, n);
        for (let k = 0; k < p.length; k++) {
          const _ = p[k], w = d.createPositionAt(b, "end");
          _ > 0 && ko(d, w, _ > 1 ? { colspan: _ } : void 0), k += Math.abs(_) - 1;
        }
      }
    });
  }
  insertColumns(i, e = {}) {
    const t = this.editor.model, n = e.at || 0, r = e.columns || 1;
    t.change((s) => {
      const a = i.getAttribute("headingColumns");
      n < a && s.setAttribute("headingColumns", a + r, i);
      const l = this.getColumns(i);
      if (n === 0 || l === n) {
        for (const d of i.getChildren()) d.is("element", "tableRow") && Ro(r, s, s.createPositionAt(d, n ? "end" : 0));
        return;
      }
      const c = new ye(i, { column: n, includeAllSlots: !0 });
      for (const d of c) {
        const { row: u, cell: h, cellAnchorColumn: g, cellAnchorRow: p, cellWidth: f, cellHeight: b } = d;
        if (g < n) {
          s.setAttribute("colspan", f + r, h);
          const k = p + b - 1;
          for (let _ = u; _ <= k; _++) c.skipRow(_);
        } else Ro(r, s, d.getPositionBefore());
      }
    });
  }
  removeRows(i, e) {
    const t = this.editor.model, n = e.rows || 1, r = this.getRows(i), s = e.at, a = s + n - 1;
    if (a > r - 1) throw new v("tableutils-removerows-row-index-out-of-range", this, { table: i, options: e });
    t.change((l) => {
      const c = { first: s, last: a }, { cellsToMove: d, cellsToTrim: u } = function(h, { first: g, last: p }) {
        const f = /* @__PURE__ */ new Map(), b = [];
        for (const { row: k, column: _, cellHeight: w, cell: y } of new ye(h, { endRow: p })) {
          const x = k + w - 1;
          if (k >= g && k <= p && x > p) {
            const C = w - (p - k + 1);
            f.set(_, { cell: y, rowspan: C });
          }
          if (k < g && x >= g) {
            let C;
            C = x >= p ? p - g + 1 : x - g + 1, b.push({ cell: y, rowspan: w - C });
          }
        }
        return { cellsToMove: f, cellsToTrim: b };
      }(i, c);
      d.size && function(h, g, p, f) {
        const b = new ye(h, { includeAllSlots: !0, row: g }), k = [...b], _ = h.getChild(g);
        let w;
        for (const { column: y, cell: x, isAnchor: C } of k) if (p.has(y)) {
          const { cell: S, rowspan: L } = p.get(y), W = w ? f.createPositionAfter(w) : f.createPositionAt(_, 0);
          f.move(f.createRangeOn(S), W), Xe("rowspan", L, S, f), w = S;
        } else C && (w = x);
      }(i, a + 1, d, l);
      for (let h = a; h >= s; h--) l.remove(i.getChild(h));
      for (const { rowspan: h, cell: g } of u) Xe("rowspan", h, g, l);
      (function(h, { first: g, last: p }, f) {
        const b = h.getAttribute("headingRows") || 0;
        g < b && Xe("headingRows", p < b ? b - (p - g + 1) : g, h, f, 0);
      })(i, c, l), Dd(i, this) || Fd(i, this);
    });
  }
  removeColumns(i, e) {
    const t = this.editor.model, n = e.at, r = e.columns || 1, s = e.at + r - 1;
    t.change((a) => {
      (function(c, d, u) {
        const h = c.getAttribute("headingColumns") || 0;
        if (h && d.first < h) {
          const g = Math.min(h - 1, d.last) - d.first + 1;
          u.setAttribute("headingColumns", h - g, c);
        }
      })(i, { first: n, last: s }, a);
      const l = ps(i);
      for (let c = s; c >= n; c--) {
        for (const { cell: d, column: u, cellWidth: h } of [...new ye(i)]) u <= c && h > 1 && u + h > c ? Xe("colspan", h - 1, d, a) : u === c && a.remove(d);
        if (l[c]) {
          const d = c === 0 ? l[1] : l[c - 1], u = parseFloat(l[c].getAttribute("columnWidth")), h = parseFloat(d.getAttribute("columnWidth"));
          a.remove(l[c]), a.setAttribute("columnWidth", u + h + "%", d);
        }
      }
      Fd(i, this) || Dd(i, this);
    });
  }
  splitCellVertically(i, e = 2) {
    const t = this.editor.model, n = i.parent.parent, r = parseInt(i.getAttribute("rowspan") || "1"), s = parseInt(i.getAttribute("colspan") || "1");
    t.change((a) => {
      if (s > 1) {
        const { newCellsSpan: l, updatedSpan: c } = Pf(s, e);
        Xe("colspan", c, i, a);
        const d = {};
        l > 1 && (d.colspan = l), r > 1 && (d.rowspan = r), Ro(s > e ? e - 1 : s - 1, a, a.createPositionAfter(i), d);
      }
      if (s < e) {
        const l = e - s, c = [...new ye(n)], { column: d } = c.find(({ cell: p }) => p === i), u = c.filter(({ cell: p, cellWidth: f, column: b }) => p !== i && b === d || b < d && b + f > d);
        for (const { cell: p, cellWidth: f } of u) a.setAttribute("colspan", f + l, p);
        const h = {};
        r > 1 && (h.rowspan = r), Ro(l, a, a.createPositionAfter(i), h);
        const g = n.getAttribute("headingColumns") || 0;
        g > d && Xe("headingColumns", g + l, n, a);
      }
    });
  }
  splitCellHorizontally(i, e = 2) {
    const t = this.editor.model, n = i.parent, r = n.parent, s = r.getChildIndex(n), a = parseInt(i.getAttribute("rowspan") || "1"), l = parseInt(i.getAttribute("colspan") || "1");
    t.change((c) => {
      if (a > 1) {
        const d = [...new ye(r, { startRow: s, endRow: s + a - 1, includeAllSlots: !0 })], { newCellsSpan: u, updatedSpan: h } = Pf(a, e);
        Xe("rowspan", h, i, c);
        const { column: g } = d.find(({ cell: b }) => b === i), p = {};
        u > 1 && (p.rowspan = u), l > 1 && (p.colspan = l);
        let f = 0;
        for (const b of d) {
          const { column: k, row: _ } = b, w = k === g;
          f >= u && w && (f = 0), _ >= s + h && w && (f || Ro(1, c, b.getPositionBefore(), p), f++);
        }
      }
      if (a < e) {
        const d = e - a, u = [...new ye(r, { startRow: 0, endRow: s })];
        for (const { cell: p, cellHeight: f, row: b } of u) if (p !== i && b + f > s) {
          const k = f + d;
          c.setAttribute("rowspan", k, p);
        }
        const h = {};
        l > 1 && (h.colspan = l), Mc(c, r, s + 1, d, 1, h);
        const g = r.getAttribute("headingRows") || 0;
        g > s && Xe("headingRows", g + d, r, c);
      }
    });
  }
  getColumns(i) {
    return [...i.getChild(0).getChildren()].filter((e) => e.is("element", "tableCell")).reduce((e, t) => e + parseInt(t.getAttribute("colspan") || "1"), 0);
  }
  getRows(i) {
    return Array.from(i.getChildren()).reduce((e, t) => t.is("element", "tableRow") ? e + 1 : e, 0);
  }
  createTableWalker(i, e = {}) {
    return new ye(i, e);
  }
  getSelectedTableCells(i) {
    const e = [];
    for (const t of this.sortRanges(i.getRanges())) {
      const n = t.getContainedElement();
      n && n.is("element", "tableCell") && e.push(n);
    }
    return e;
  }
  getTableCellsContainingSelection(i) {
    const e = [];
    for (const t of i.getRanges()) {
      const n = t.start.findAncestor("tableCell");
      n && e.push(n);
    }
    return e;
  }
  getSelectionAffectedTableCells(i) {
    const e = this.getSelectedTableCells(i);
    return e.length ? e : this.getTableCellsContainingSelection(i);
  }
  getRowIndexes(i) {
    const e = i.map((t) => t.parent.index);
    return this._getFirstLastIndexesObject(e);
  }
  getColumnIndexes(i) {
    const e = i[0].findAncestor("table"), t = [...new ye(e)].filter((n) => i.includes(n.cell)).map((n) => n.column);
    return this._getFirstLastIndexesObject(t);
  }
  isSelectionRectangular(i) {
    if (i.length < 2 || !this._areCellInTheSameTableSection(i)) return !1;
    const e = /* @__PURE__ */ new Set(), t = /* @__PURE__ */ new Set();
    let n = 0;
    for (const s of i) {
      const { row: a, column: l } = this.getCellLocation(s), c = parseInt(s.getAttribute("rowspan")) || 1, d = parseInt(s.getAttribute("colspan")) || 1;
      e.add(a), t.add(l), c > 1 && e.add(a + c - 1), d > 1 && t.add(l + d - 1), n += c * d;
    }
    return function(s, a) {
      const l = Array.from(s.values()), c = Array.from(a.values()), d = Math.max(...l), u = Math.min(...l), h = Math.max(...c), g = Math.min(...c);
      return (d - u + 1) * (h - g + 1);
    }(e, t) == n;
  }
  sortRanges(i) {
    return Array.from(i).sort(nM);
  }
  _getFirstLastIndexesObject(i) {
    const e = i.sort((t, n) => t - n);
    return { first: e[0], last: e[e.length - 1] };
  }
  _areCellInTheSameTableSection(i) {
    const e = i[0].findAncestor("table"), t = this.getRowIndexes(i), n = parseInt(e.getAttribute("headingRows")) || 0;
    if (!this._areIndexesInSameSection(t, n)) return !1;
    const r = this.getColumnIndexes(i), s = parseInt(e.getAttribute("headingColumns")) || 0;
    return this._areIndexesInSameSection(r, s);
  }
  _areIndexesInSameSection({ first: i, last: e }, t) {
    return i < t == e < t;
  }
}
function Mc(o, i, e, t, n, r = {}) {
  for (let s = 0; s < t; s++) {
    const a = o.createElement("tableRow");
    o.insert(a, i, e), Ro(n, o, o.createPositionAt(a, "end"), r);
  }
}
function Ro(o, i, e, t = {}) {
  for (let n = 0; n < o; n++) ko(i, e, t);
}
function Pf(o, i) {
  if (o < i) return { newCellsSpan: 1, updatedSpan: 1 };
  const e = Math.floor(o / i);
  return { newCellsSpan: e, updatedSpan: o - e * i + e };
}
function nM(o, i) {
  const e = o.start, t = i.start;
  return e.isBefore(t) ? -1 : 1;
}
class oM extends G {
  refresh() {
    const i = this.editor.plugins.get(pt), e = i.getSelectedTableCells(this.editor.model.document.selection);
    this.isEnabled = i.isSelectionRectangular(e);
  }
  execute() {
    const i = this.editor.model, e = this.editor.plugins.get(pt);
    i.change((t) => {
      const n = e.getSelectedTableCells(i.document.selection), r = n.shift(), { mergeWidth: s, mergeHeight: a } = function(l, c, d) {
        let u = 0, h = 0;
        for (const k of c) {
          const { row: _, column: w } = d.getCellLocation(k);
          u = Vf(k, w, u, "colspan"), h = Vf(k, _, h, "rowspan");
        }
        const { row: g, column: p } = d.getCellLocation(l), f = u - p, b = h - g;
        return { mergeWidth: f, mergeHeight: b };
      }(r, n, e);
      Xe("colspan", s, r, t), Xe("rowspan", a, r, t);
      for (const l of n) rM(l, r, t);
      Xu(r.findAncestor("table"), e), t.setSelection(r, "in");
    });
  }
}
function rM(o, i, e) {
  Mf(o) || (Mf(i) && e.remove(e.createRangeIn(i)), e.move(e.createRangeIn(o), e.createPositionAt(i, "end"))), e.remove(o);
}
function Mf(o) {
  const i = o.getChild(0);
  return o.childCount == 1 && i.is("element", "paragraph") && i.isEmpty;
}
function Vf(o, i, e, t) {
  const n = parseInt(o.getAttribute(t) || "1");
  return Math.max(e, i + n);
}
class sM extends G {
  constructor(i) {
    super(i), this.affectsData = !1;
  }
  refresh() {
    const i = this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);
    this.isEnabled = i.length > 0;
  }
  execute() {
    const i = this.editor.model, e = this.editor.plugins.get("TableUtils"), t = e.getSelectionAffectedTableCells(i.document.selection), n = e.getRowIndexes(t), r = t[0].findAncestor("table"), s = [];
    for (let a = n.first; a <= n.last; a++) for (const l of r.getChild(a).getChildren()) s.push(i.createRangeOn(l));
    i.change((a) => {
      a.setSelection(s);
    });
  }
}
class aM extends G {
  constructor(i) {
    super(i), this.affectsData = !1;
  }
  refresh() {
    const i = this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);
    this.isEnabled = i.length > 0;
  }
  execute() {
    const i = this.editor.plugins.get("TableUtils"), e = this.editor.model, t = i.getSelectionAffectedTableCells(e.document.selection), n = t[0], r = t.pop(), s = n.findAncestor("table"), a = i.getCellLocation(n), l = i.getCellLocation(r), c = Math.min(a.column, l.column), d = Math.max(a.column, l.column), u = [];
    for (const h of new ye(s, { startColumn: c, endColumn: d })) u.push(e.createRangeOn(h.cell));
    e.change((h) => {
      h.setSelection(u);
    });
  }
}
function lM(o) {
  o.document.registerPostFixer((i) => function(e, t) {
    const n = t.document.differ.getChanges();
    let r = !1;
    const s = /* @__PURE__ */ new Set();
    for (const a of n) {
      let l = null;
      a.type == "insert" && a.name == "table" && (l = a.position.nodeAfter), a.type != "insert" && a.type != "remove" || a.name != "tableRow" && a.name != "tableCell" || (l = a.position.findAncestor("table")), uM(a) && (l = a.range.start.findAncestor("table")), l && !s.has(l) && (r = cM(l, e) || r, r = dM(l, e) || r, s.add(l));
    }
    return r;
  }(i, o));
}
function cM(o, i) {
  let e = !1;
  const t = function(n) {
    const r = parseInt(n.getAttribute("headingRows") || "0"), s = Array.from(n.getChildren()).reduce((l, c) => c.is("element", "tableRow") ? l + 1 : l, 0), a = [];
    for (const { row: l, cell: c, cellHeight: d } of new ye(n)) {
      if (d < 2) continue;
      const u = l < r ? r : s;
      if (l + d > u) {
        const h = u - l;
        a.push({ cell: c, rowspan: h });
      }
    }
    return a;
  }(o);
  if (t.length) {
    e = !0;
    for (const n of t) Xe("rowspan", n.rowspan, n.cell, i, 1);
  }
  return e;
}
function dM(o, i) {
  let e = !1;
  const t = function(a) {
    const l = new Array(a.childCount).fill(0);
    for (const { rowIndex: c } of new ye(a, { includeAllSlots: !0 })) l[c]++;
    return l;
  }(o), n = [];
  for (const [a, l] of t.entries()) !l && o.getChild(a).is("element", "tableRow") && n.push(a);
  if (n.length) {
    e = !0;
    for (const a of n.reverse()) i.remove(o.getChild(a)), t.splice(a, 1);
  }
  const r = t.filter((a, l) => o.getChild(l).is("element", "tableRow")), s = r[0];
  if (!r.every((a) => a === s)) {
    const a = r.reduce((l, c) => c > l ? c : l, 0);
    for (const [l, c] of r.entries()) {
      const d = a - c;
      if (d) {
        for (let u = 0; u < d; u++) ko(i, i.createPositionAt(o.getChild(l), "end"));
        e = !0;
      }
    }
  }
  return e;
}
function uM(o) {
  if (o.type !== "attribute") return !1;
  const i = o.attributeKey;
  return i === "headingRows" || i === "colspan" || i === "rowspan";
}
function hM(o) {
  o.document.registerPostFixer((i) => function(e, t) {
    const n = t.document.differ.getChanges();
    let r = !1;
    for (const s of n) s.type == "insert" && s.name == "table" && (r = mM(s.position.nodeAfter, e) || r), s.type == "insert" && s.name == "tableRow" && (r = F0(s.position.nodeAfter, e) || r), s.type == "insert" && s.name == "tableCell" && (r = Hd(s.position.nodeAfter, e) || r), s.type != "remove" && s.type != "insert" || !gM(s) || (r = Hd(s.position.parent, e) || r);
    return r;
  }(i, o));
}
function mM(o, i) {
  let e = !1;
  for (const t of o.getChildren()) t.is("element", "tableRow") && (e = F0(t, i) || e);
  return e;
}
function F0(o, i) {
  let e = !1;
  for (const t of o.getChildren()) e = Hd(t, i) || e;
  return e;
}
function Hd(o, i) {
  if (o.childCount == 0) return i.insertElement("paragraph", o), !0;
  const e = Array.from(o.getChildren()).filter((t) => t.is("$text"));
  for (const t of e) i.wrap(i.createRangeOn(t), "paragraph");
  return !!e.length;
}
function gM(o) {
  return !!o.position.parent.is("element", "tableCell") && (o.type == "insert" && o.name == "$text" || o.type == "remove");
}
function pM(o, i) {
  if (!o.is("element", "paragraph")) return !1;
  const e = i.toViewElement(o);
  return !!e && I0(o) !== e.is("element", "span");
}
class th extends A {
  constructor(e) {
    super(e);
    m(this, "_additionalSlots");
    this._additionalSlots = [];
  }
  static get pluginName() {
    return "TableEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [pt];
  }
  init() {
    const e = this.editor, t = e.model, n = t.schema, r = e.conversion, s = e.plugins.get(pt);
    n.register("table", { inheritAllFrom: "$blockObject", allowAttributes: ["headingRows", "headingColumns"] }), n.register("tableRow", { allowIn: "table", isLimit: !0 }), n.register("tableCell", { allowContentOf: "$container", allowIn: "tableRow", allowAttributes: ["colspan", "rowspan"], isLimit: !0, isSelectable: !0 }), r.for("upcast").add((a) => {
      a.on("element:figure", (l, c, d) => {
        if (!d.consumable.test(c.viewItem, { name: !0, classes: "table" })) return;
        const u = function(g) {
          for (const p of g.getChildren()) if (p.is("element", "table")) return p;
        }(c.viewItem);
        if (!u || !d.consumable.test(u, { name: !0 })) return;
        d.consumable.consume(c.viewItem, { name: !0, classes: "table" });
        const h = Te(d.convertItem(u, c.modelCursor).modelRange.getItems());
        h ? (d.convertChildren(c.viewItem, d.writer.createPositionAt(h, "end")), d.updateConversionResult(h, c)) : d.consumable.revert(c.viewItem, { name: !0, classes: "table" });
      });
    }), r.for("upcast").add(GP()), r.for("editingDowncast").elementToStructure({ model: { name: "table", attributes: ["headingRows"] }, view: yf(s, { asWidget: !0, additionalSlots: this._additionalSlots }) }), r.for("dataDowncast").elementToStructure({ model: { name: "table", attributes: ["headingRows"] }, view: yf(s, { additionalSlots: this._additionalSlots }) }), r.for("upcast").elementToElement({ model: "tableRow", view: "tr" }), r.for("upcast").add((a) => {
      a.on("element:tr", (l, c) => {
        c.viewItem.isEmpty && c.modelCursor.index == 0 && l.stop();
      }, { priority: "high" });
    }), r.for("downcast").elementToElement({ model: "tableRow", view: (a, { writer: l }) => a.isEmpty ? l.createEmptyElement("tr") : l.createContainerElement("tr") }), r.for("upcast").elementToElement({ model: "tableCell", view: "td" }), r.for("upcast").elementToElement({ model: "tableCell", view: "th" }), r.for("upcast").add(vf("td")), r.for("upcast").add(vf("th")), r.for("editingDowncast").elementToElement({ model: "tableCell", view: xf({ asWidget: !0 }) }), r.for("dataDowncast").elementToElement({ model: "tableCell", view: xf() }), r.for("editingDowncast").elementToElement({ model: "paragraph", view: Cf({ asWidget: !0 }), converterPriority: "high" }), r.for("dataDowncast").elementToElement({ model: "paragraph", view: Cf(), converterPriority: "high" }), r.for("downcast").attributeToAttribute({ model: "colspan", view: "colspan" }), r.for("upcast").attributeToAttribute({ model: { key: "colspan", value: Lf("colspan") }, view: "colspan" }), r.for("downcast").attributeToAttribute({ model: "rowspan", view: "rowspan" }), r.for("upcast").attributeToAttribute({ model: { key: "rowspan", value: Lf("rowspan") }, view: "rowspan" }), e.config.define("table.defaultHeadings.rows", 0), e.config.define("table.defaultHeadings.columns", 0), e.commands.add("insertTable", new YP(e)), e.commands.add("insertTableRowAbove", new Af(e, { order: "above" })), e.commands.add("insertTableRowBelow", new Af(e, { order: "below" })), e.commands.add("insertTableColumnLeft", new Tf(e, { order: "left" })), e.commands.add("insertTableColumnRight", new Tf(e, { order: "right" })), e.commands.add("removeTableRow", new QP(e)), e.commands.add("removeTableColumn", new JP(e)), e.commands.add("splitTableCellVertically", new Ef(e, { direction: "vertically" })), e.commands.add("splitTableCellHorizontally", new Ef(e, { direction: "horizontally" })), e.commands.add("mergeTableCells", new oM(e)), e.commands.add("mergeTableCellRight", new ta(e, { direction: "right" })), e.commands.add("mergeTableCellLeft", new ta(e, { direction: "left" })), e.commands.add("mergeTableCellDown", new ta(e, { direction: "down" })), e.commands.add("mergeTableCellUp", new ta(e, { direction: "up" })), e.commands.add("setTableColumnHeader", new eM(e)), e.commands.add("setTableRowHeader", new XP(e)), e.commands.add("selectTableRow", new sM(e)), e.commands.add("selectTableColumn", new aM(e)), lM(t), hM(t), this.listenTo(t.document, "change:data", () => {
      (function(a, l) {
        const c = a.document.differ;
        for (const d of c.getChanges()) {
          let u, h = !1;
          if (d.type == "attribute") {
            const b = d.range.start.nodeAfter;
            if (!b || !b.is("element", "table") || d.attributeKey != "headingRows" && d.attributeKey != "headingColumns") continue;
            u = b, h = d.attributeKey == "headingRows";
          } else d.name != "tableRow" && d.name != "tableCell" || (u = d.position.findAncestor("table"), h = d.name == "tableRow");
          if (!u) continue;
          const g = u.getAttribute("headingRows") || 0, p = u.getAttribute("headingColumns") || 0, f = new ye(u);
          for (const b of f) {
            const k = b.row < g || b.column < p ? "th" : "td", _ = l.mapper.toViewElement(b.cell);
            _ && _.is("element") && _.name != k && l.reconvertItem(h ? b.cell.parent : b.cell);
          }
        }
      })(t, e.editing), function(a, l) {
        const c = a.document.differ, d = /* @__PURE__ */ new Set();
        for (const u of c.getChanges()) {
          const h = u.type == "attribute" ? u.range.start.parent : u.position.parent;
          h.is("element", "tableCell") && d.add(h);
        }
        for (const u of d.values()) {
          const h = Array.from(u.getChildren()).filter((g) => pM(g, l.mapper));
          for (const g of h) l.reconvertItem(g);
        }
      }(t, e.editing);
    });
  }
  registerAdditionalSlot(e) {
    this._additionalSlots.push(e);
  }
}
function Lf(o) {
  return (i) => {
    const e = parseInt(i.getAttribute(o));
    return Number.isNaN(e) || e <= 0 ? null : e;
  };
}
class Of extends N {
  constructor(e) {
    super(e);
    m(this, "items");
    m(this, "keystrokes");
    m(this, "focusTracker");
    const t = this.bindTemplate;
    this.items = this._createGridCollection(), this.keystrokes = new Le(), this.focusTracker = new fe(), this.set("rows", 0), this.set("columns", 0), this.bind("label").to(this, "columns", this, "rows", (n, r) => `${r} × ${n}`), this.setTemplate({ tag: "div", attributes: { class: ["ck"] }, children: [{ tag: "div", attributes: { class: ["ck-insert-table-dropdown__grid"] }, on: { "mouseover@.ck-insert-table-dropdown-grid-box": t.to("boxover") }, children: this.items }, { tag: "div", attributes: { class: ["ck", "ck-insert-table-dropdown__label"], "aria-hidden": !0 }, children: [{ text: t.to("label") }] }], on: { mousedown: t.to((n) => {
      n.preventDefault();
    }), click: t.to(() => {
      this.fire("execute");
    }) } }), this.on("boxover", (n, r) => {
      const { row: s, column: a } = r.target.dataset;
      this.items.get(10 * (parseInt(s, 10) - 1) + (parseInt(a, 10) - 1)).focus();
    }), this.focusTracker.on("change:focusedElement", (n, r, s) => {
      if (!s) return;
      const { row: a, column: l } = s.dataset;
      this.set({ rows: parseInt(a), columns: parseInt(l) });
    }), this.on("change:columns", () => this._highlightGridBoxes()), this.on("change:rows", () => this._highlightGridBoxes());
  }
  render() {
    super.render(), Cs({ keystrokeHandler: this.keystrokes, focusTracker: this.focusTracker, gridItems: this.items, numberOfColumns: 10, uiLanguageDirection: this.locale && this.locale.uiLanguageDirection });
    for (const e of this.items) this.focusTracker.add(e.element);
    this.keystrokes.listenTo(this.element);
  }
  reset() {
    this.set({ rows: 1, columns: 1 });
  }
  focus() {
    this.items.get(0).focus();
  }
  focusLast() {
    this.items.get(0).focus();
  }
  _highlightGridBoxes() {
    const e = this.rows, t = this.columns;
    this.items.map((n, r) => {
      const s = Math.floor(r / 10) < e && r % 10 < t;
      n.set("isOn", s);
    });
  }
  _createGridButton(e, t, n, r) {
    const s = new j(e);
    return s.set({ label: r, class: "ck-insert-table-dropdown-grid-box" }), s.extendTemplate({ attributes: { "data-row": t, "data-column": n } }), s;
  }
  _createGridCollection() {
    const e = [];
    for (let t = 0; t < 100; t++) {
      const n = Math.floor(t / 10), r = t % 10, s = `${n + 1} × ${r + 1}`;
      e.push(this._createGridButton(this.locale, n + 1, r + 1, s));
    }
    return this.createCollection(e);
  }
}
class fM extends A {
  static get pluginName() {
    return "TableUI";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    const i = this.editor, e = this.editor.t, t = i.locale.contentLanguageDirection === "ltr";
    i.ui.componentFactory.add("insertTable", (n) => {
      const r = i.commands.get("insertTable"), s = ft(n);
      let a;
      return s.bind("isEnabled").to(r), s.buttonView.set({ icon: Jm, label: e("Insert table"), tooltip: !0 }), s.on("change:isOpen", () => {
        a || (a = new Of(n), s.panelView.children.add(a), a.delegate("execute").to(s), s.on("execute", () => {
          i.execute("insertTable", { rows: a.rows, columns: a.columns }), i.editing.view.focus();
        }));
      }), s;
    }), i.ui.componentFactory.add("menuBar:insertTable", (n) => {
      const r = i.commands.get("insertTable"), s = new Vt(n), a = new Of(n);
      return a.delegate("execute").to(s), s.on("change:isOpen", (l, c, d) => {
        d || a.reset();
      }), a.on("execute", () => {
        i.execute("insertTable", { rows: a.rows, columns: a.columns }), i.editing.view.focus();
      }), s.buttonView.set({ label: e("Table"), icon: Jm }), s.panelView.children.add(a), s.bind("isEnabled").to(r), s;
    }), i.ui.componentFactory.add("tableColumn", (n) => {
      const r = [{ type: "switchbutton", model: { commandName: "setTableColumnHeader", label: e("Header column"), bindIsOn: !0 } }, { type: "separator" }, { type: "button", model: { commandName: t ? "insertTableColumnLeft" : "insertTableColumnRight", label: e("Insert column left") } }, { type: "button", model: { commandName: t ? "insertTableColumnRight" : "insertTableColumnLeft", label: e("Insert column right") } }, { type: "button", model: { commandName: "removeTableColumn", label: e("Delete column") } }, { type: "button", model: { commandName: "selectTableColumn", label: e("Select column") } }];
      return this._prepareDropdown(e("Column"), IA, r, n);
    }), i.ui.componentFactory.add("tableRow", (n) => {
      const r = [{ type: "switchbutton", model: { commandName: "setTableRowHeader", label: e("Header row"), bindIsOn: !0 } }, { type: "separator" }, { type: "button", model: { commandName: "insertTableRowAbove", label: e("Insert row above") } }, { type: "button", model: { commandName: "insertTableRowBelow", label: e("Insert row below") } }, { type: "button", model: { commandName: "removeTableRow", label: e("Delete row") } }, { type: "button", model: { commandName: "selectTableRow", label: e("Select row") } }];
      return this._prepareDropdown(e("Row"), MA, r, n);
    }), i.ui.componentFactory.add("mergeTableCells", (n) => {
      const r = [{ type: "button", model: { commandName: "mergeTableCellUp", label: e("Merge cell up") } }, { type: "button", model: { commandName: t ? "mergeTableCellRight" : "mergeTableCellLeft", label: e("Merge cell right") } }, { type: "button", model: { commandName: "mergeTableCellDown", label: e("Merge cell down") } }, { type: "button", model: { commandName: t ? "mergeTableCellLeft" : "mergeTableCellRight", label: e("Merge cell left") } }, { type: "separator" }, { type: "button", model: { commandName: "splitTableCellVertically", label: e("Split cell vertically") } }, { type: "button", model: { commandName: "splitTableCellHorizontally", label: e("Split cell horizontally") } }];
      return this._prepareMergeSplitButtonDropdown(e("Merge cells"), PA, r, n);
    });
  }
  _prepareDropdown(i, e, t, n) {
    const r = this.editor, s = ft(n), a = this._fillDropdownWithListOptions(s, t);
    return s.buttonView.set({ label: i, icon: e, tooltip: !0 }), s.bind("isEnabled").toMany(a, "isEnabled", (...l) => l.some((c) => c)), this.listenTo(s, "execute", (l) => {
      r.execute(l.source.commandName), l.source instanceof As || r.editing.view.focus();
    }), s;
  }
  _prepareMergeSplitButtonDropdown(i, e, t, n) {
    const r = this.editor, s = ft(n, po), a = "mergeTableCells", l = r.commands.get(a), c = this._fillDropdownWithListOptions(s, t);
    return s.buttonView.set({ label: i, icon: e, tooltip: !0, isEnabled: !0 }), s.bind("isEnabled").toMany([l, ...c], "isEnabled", (...d) => d.some((u) => u)), this.listenTo(s.buttonView, "execute", () => {
      r.execute(a), r.editing.view.focus();
    }), this.listenTo(s, "execute", (d) => {
      r.execute(d.source.commandName), r.editing.view.focus();
    }), s;
  }
  _fillDropdownWithListOptions(i, e) {
    const t = this.editor, n = [], r = new rt();
    for (const s of e) bM(s, t, n, r);
    return Bn(i, r), n;
  }
}
function bM(o, i, e, t) {
  if (o.type === "button" || o.type === "switchbutton") {
    const n = o.model = new cn(o.model), { commandName: r, bindIsOn: s } = o.model, a = i.commands.get(r);
    e.push(a), n.set({ commandName: r }), n.bind("isEnabled").to(a), s && n.bind("isOn").to(a, "value"), n.set({ withText: !0 });
  }
  t.add(o);
}
class Sn extends A {
  static get pluginName() {
    return "TableSelection";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [pt, pt];
  }
  init() {
    const i = this.editor, e = i.model, t = i.editing.view;
    this.listenTo(e, "deleteContent", (n, r) => this._handleDeleteContent(n, r), { priority: "high" }), this.listenTo(t.document, "insertText", (n, r) => this._handleInsertTextEvent(n, r), { priority: "high" }), this._defineSelectionConverter(), this._enablePluginDisabling();
  }
  getSelectedTableCells() {
    const i = this.editor.plugins.get(pt), e = this.editor.model.document.selection, t = i.getSelectedTableCells(e);
    return t.length == 0 ? null : t;
  }
  getSelectionAsFragment() {
    const i = this.editor.plugins.get(pt), e = this.getSelectedTableCells();
    return e ? this.editor.model.change((t) => {
      const n = t.createDocumentFragment(), { first: r, last: s } = i.getColumnIndexes(e), { first: a, last: l } = i.getRowIndexes(e), c = e[0].findAncestor("table");
      let d = l, u = s;
      if (i.isSelectionRectangular(e)) {
        const g = { firstColumn: r, lastColumn: s, firstRow: a, lastRow: l };
        d = R0(c, g), u = z0(c, g);
      }
      const h = P0(c, { startRow: a, startColumn: r, endRow: d, endColumn: u }, t);
      return t.insert(h, n, 0), n;
    }) : null;
  }
  setCellSelection(i, e) {
    const t = this._getCellsToSelect(i, e);
    this.editor.model.change((n) => {
      n.setSelection(t.cells.map((r) => n.createRangeOn(r)), { backward: t.backward });
    });
  }
  getFocusCell() {
    const i = [...this.editor.model.document.selection.getRanges()].pop().getContainedElement();
    return i && i.is("element", "tableCell") ? i : null;
  }
  getAnchorCell() {
    const i = Te(this.editor.model.document.selection.getRanges()).getContainedElement();
    return i && i.is("element", "tableCell") ? i : null;
  }
  _defineSelectionConverter() {
    const i = this.editor, e = /* @__PURE__ */ new Set();
    i.conversion.for("editingDowncast").add((t) => t.on("selection", (n, r, s) => {
      const a = s.writer;
      (function(d) {
        for (const u of e) d.removeClass("ck-editor__editable_selected", u);
        e.clear();
      })(a);
      const l = this.getSelectedTableCells();
      if (!l) return;
      for (const d of l) {
        const u = s.mapper.toViewElement(d);
        a.addClass("ck-editor__editable_selected", u), e.add(u);
      }
      const c = s.mapper.toViewElement(l[l.length - 1]);
      a.setSelection(c, 0);
    }, { priority: "lowest" }));
  }
  _enablePluginDisabling() {
    const i = this.editor;
    this.on("change:isEnabled", () => {
      if (!this.isEnabled) {
        const e = this.getSelectedTableCells();
        if (!e) return;
        i.model.change((t) => {
          const n = t.createPositionAt(e[0], 0), r = i.model.schema.getNearestSelectionRange(n);
          t.setSelection(r);
        });
      }
    });
  }
  _handleDeleteContent(i, e) {
    const t = this.editor.plugins.get(pt), n = e[0], r = e[1], s = this.editor.model, a = !r || r.direction == "backward", l = t.getSelectedTableCells(n);
    l.length && (i.stop(), s.change((c) => {
      const d = l[a ? l.length - 1 : 0];
      s.change((h) => {
        for (const g of l) s.deleteContent(h.createSelection(g, "in"));
      });
      const u = s.schema.getNearestSelectionRange(c.createPositionAt(d, 0));
      n.is("documentSelection") ? c.setSelection(u) : n.setTo(u);
    }));
  }
  _handleInsertTextEvent(i, e) {
    const t = this.editor, n = this.getSelectedTableCells();
    if (!n) return;
    const r = t.editing.view, s = t.editing.mapper, a = n.map((l) => r.createRangeOn(s.toViewElement(l)));
    e.selection = r.createSelection(a);
  }
  _getCellsToSelect(i, e) {
    const t = this.editor.plugins.get("TableUtils"), n = t.getCellLocation(i), r = t.getCellLocation(e), s = Math.min(n.row, r.row), a = Math.max(n.row, r.row), l = Math.min(n.column, r.column), c = parseInt(e.getAttribute("colspan") || "1") - 1, d = Math.max(n.column, r.column + c), u = new Array(a - s + 1).fill(null).map(() => []), h = { startRow: s, endRow: a, startColumn: l, endColumn: d };
    for (const { row: f, cell: b } of new ye(i.findAncestor("table"), h)) u[f - s].push(b);
    const g = r.row < n.row, p = r.column < n.column;
    return g && u.reverse(), p && u.forEach((f) => f.reverse()), { cells: u.flat(), backward: g || p };
  }
}
class kM extends A {
  static get pluginName() {
    return "TableClipboard";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Gr, Lt, Sn, pt];
  }
  init() {
    const i = this.editor.editing.view.document;
    this.listenTo(i, "copy", (e, t) => this._onCopyCut(e, t)), this.listenTo(i, "cut", (e, t) => this._onCopyCut(e, t)), this._listenToContentInsertion(), this.decorate("_replaceTableSlotCell");
  }
  _listenToContentInsertion() {
    const { editor: i } = this, e = i.plugins.get(Lt), t = i.plugins.get(Sn);
    let n = !1;
    e.on("contentInsertion", (r, s) => {
      n = s.method === "paste";
    }), this.listenTo(i.model, "insertContent", (r, [s, a]) => {
      (n || t.getSelectedTableCells() !== null) && this._onInsertContent(r, s, a);
    }, { priority: "high" }), e.on("contentInsertion", () => {
      n = !1;
    }, { priority: "lowest" });
  }
  _onCopyCut(i, e) {
    const t = this.editor.editing.view, n = this.editor.plugins.get(Sn), r = this.editor.plugins.get(Gr);
    n.getSelectedTableCells() && (i.name != "cut" || this.editor.model.canEditAt(this.editor.model.document.selection)) && (e.preventDefault(), i.stop(), this.editor.model.enqueueChange({ isUndoable: i.name === "cut" }, () => {
      const s = r._copySelectedFragmentWithMarkers(i.name, this.editor.model.document.selection, () => n.getSelectionAsFragment());
      t.document.fire("clipboardOutput", { dataTransfer: e.dataTransfer, content: this.editor.data.toView(s), method: i.name });
    }));
  }
  _onInsertContent(i, e, t) {
    if (t && !t.is("documentSelection")) return;
    const n = this.editor.model, r = this.editor.plugins.get(pt), s = this.editor.plugins.get(Gr), a = this.getTableIfOnlyTableInContent(e, n);
    if (!a) return;
    const l = r.getSelectionAffectedTableCells(n.document.selection);
    l.length ? (i.stop(), e.is("documentFragment") ? s._pasteMarkersIntoTransformedElement(e.markers, (c) => this._replaceSelectedCells(a, l, c)) : this.editor.model.change((c) => {
      this._replaceSelectedCells(a, l, c);
    })) : Xu(a, r);
  }
  _replaceSelectedCells(i, e, t) {
    const n = this.editor.plugins.get(pt), r = { width: n.getColumns(i), height: n.getRows(i) }, s = function(u, h, g, p) {
      const f = u[0].findAncestor("table"), b = p.getColumnIndexes(u), k = p.getRowIndexes(u), _ = { firstColumn: b.first, lastColumn: b.last, firstRow: k.first, lastRow: k.last }, w = u.length === 1;
      return w && (_.lastRow += h.height - 1, _.lastColumn += h.width - 1, function(y, x, C, S) {
        const L = S.getColumns(y), W = S.getRows(y);
        C > L && S.insertColumns(y, { at: L, columns: C - L }), x > W && S.insertRows(y, { at: W, rows: x - W });
      }(f, _.lastRow + 1, _.lastColumn + 1, p)), w || !p.isSelectionRectangular(u) ? function(y, x, C) {
        const { firstRow: S, lastRow: L, firstColumn: W, lastColumn: Y } = x, be = { first: S, last: L }, ue = { first: W, last: Y };
        Lc(y, W, be, C), Lc(y, Y + 1, be, C), Vc(y, S, ue, C), Vc(y, L + 1, ue, C, S);
      }(f, _, g) : (_.lastRow = R0(f, _), _.lastColumn = z0(f, _)), _;
    }(e, r, t, n), a = s.lastRow - s.firstRow + 1, l = s.lastColumn - s.firstColumn + 1;
    i = P0(i, { startRow: 0, startColumn: 0, endRow: Math.min(a, r.height) - 1, endColumn: Math.min(l, r.width) - 1 }, t);
    const c = e[0].findAncestor("table"), d = this._replaceSelectedCellsWithPasted(i, r, c, s, t);
    if (this.editor.plugins.get("TableSelection").isEnabled) {
      const u = n.sortRanges(d.map((h) => t.createRangeOn(h)));
      t.setSelection(u);
    } else t.setSelection(d[0], 0);
    return c;
  }
  _replaceSelectedCellsWithPasted(i, e, t, n, r) {
    const { width: s, height: a } = e, l = function(b, k, _) {
      const w = new Array(_).fill(null).map(() => new Array(k).fill(null));
      for (const { column: y, row: x, cell: C } of new ye(b)) w[x][y] = C;
      return w;
    }(i, s, a), c = [...new ye(t, { startRow: n.firstRow, endRow: n.lastRow, startColumn: n.firstColumn, endColumn: n.lastColumn, includeAllSlots: !0 })], d = [];
    let u;
    for (const b of c) {
      const { row: k, column: _ } = b;
      _ === n.firstColumn && (u = b.getPositionBefore());
      const w = k - n.firstRow, y = _ - n.firstColumn, x = l[w % a][y % s], C = x ? r.cloneElement(x) : null, S = this._replaceTableSlotCell(b, C, u, r);
      S && (N0(S, k, _, n.lastRow, n.lastColumn, r), d.push(S), u = r.createPositionAfter(S));
    }
    const h = parseInt(t.getAttribute("headingRows") || "0"), g = parseInt(t.getAttribute("headingColumns") || "0"), p = n.firstRow < h && h <= n.lastRow, f = n.firstColumn < g && g <= n.lastColumn;
    if (p) {
      const b = Vc(t, h, { first: n.firstColumn, last: n.lastColumn }, r, n.firstRow);
      d.push(...b);
    }
    if (f) {
      const b = Lc(t, g, { first: n.firstRow, last: n.lastRow }, r);
      d.push(...b);
    }
    return d;
  }
  _replaceTableSlotCell(i, e, t, n) {
    const { cell: r, isAnchor: s } = i;
    return s && n.remove(r), e ? (n.insert(e, t), e) : null;
  }
  getTableIfOnlyTableInContent(i, e) {
    if (!i.is("documentFragment") && !i.is("element")) return null;
    if (i.is("element", "table")) return i;
    if (i.childCount == 1 && i.getChild(0).is("element", "table")) return i.getChild(0);
    const t = e.createRangeIn(i);
    for (const n of t.getItems()) if (n.is("element", "table")) {
      const r = e.createRange(t.start, e.createPositionBefore(n));
      if (e.hasContent(r, { ignoreWhitespaces: !0 })) return null;
      const s = e.createRange(e.createPositionAfter(n), t.end);
      return e.hasContent(s, { ignoreWhitespaces: !0 }) ? null : n;
    }
    return null;
  }
}
function Vc(o, i, e, t, n = 0) {
  if (!(i < 1))
    return M0(o, i, n).filter(({ column: r, cellWidth: s }) => j0(r, s, e)).map(({ cell: r }) => V0(r, i, t));
}
function Lc(o, i, e, t) {
  if (!(i < 1))
    return L0(o, i).filter(({ row: n, cellHeight: r }) => j0(n, r, e)).map(({ cell: n, column: r }) => O0(n, r, i, t));
}
function j0(o, i, e) {
  const t = o + i - 1, { first: n, last: r } = e;
  return o >= n && o <= r || o < n && t >= n;
}
class _M extends A {
  static get pluginName() {
    return "TableKeyboard";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Sn, pt];
  }
  init() {
    const i = this.editor, e = i.editing.view.document, t = i.t;
    this.listenTo(e, "arrowKey", (...n) => this._onArrowKey(...n), { context: "table" }), this.listenTo(e, "tab", (...n) => this._handleTabOnSelectedTable(...n), { context: "figure" }), this.listenTo(e, "tab", (...n) => this._handleTab(...n), { context: ["th", "td"] }), i.accessibility.addKeystrokeInfoGroup({ id: "table", label: t("Keystrokes that can be used in a table cell"), keystrokes: [{ label: t("Move the selection to the next cell"), keystroke: "Tab" }, { label: t("Move the selection to the previous cell"), keystroke: "Shift+Tab" }, { label: t("Insert a new table row (when in the last cell of a table)"), keystroke: "Tab" }, { label: t("Navigate through the table"), keystroke: [["arrowup"], ["arrowright"], ["arrowdown"], ["arrowleft"]] }] });
  }
  _handleTabOnSelectedTable(i, e) {
    const t = this.editor, n = t.model.document.selection.getSelectedElement();
    n && n.is("element", "table") && (e.preventDefault(), e.stopPropagation(), i.stop(), t.model.change((r) => {
      r.setSelection(r.createRangeIn(n.getChild(0).getChild(0)));
    }));
  }
  _handleTab(i, e) {
    const t = this.editor, n = this.editor.plugins.get(pt), r = this.editor.plugins.get("TableSelection"), s = t.model.document.selection, a = !e.shiftKey;
    let l = n.getTableCellsContainingSelection(s)[0];
    if (l || (l = r.getFocusCell()), !l) return;
    e.preventDefault(), e.stopPropagation(), i.stop();
    const c = l.parent, d = c.parent, u = d.getChildIndex(c), h = c.getChildIndex(l), g = h === 0;
    if (!a && g && u === 0) return void t.model.change((k) => {
      k.setSelection(k.createRangeOn(d));
    });
    const p = h === c.childCount - 1, f = u === n.getRows(d) - 1;
    if (a && f && p && (t.execute("insertTableRowBelow"), u === n.getRows(d) - 1)) return void t.model.change((k) => {
      k.setSelection(k.createRangeOn(d));
    });
    let b;
    if (a && p)
      b = d.getChild(u + 1).getChild(0);
    else if (!a && g) {
      const k = d.getChild(u - 1);
      b = k.getChild(k.childCount - 1);
    } else b = c.getChild(h + (a ? 1 : -1));
    t.model.change((k) => {
      k.setSelection(k.createRangeIn(b));
    });
  }
  _onArrowKey(i, e) {
    const t = this.editor, n = ll(e.keyCode, t.locale.contentLanguageDirection);
    this._handleArrowKeys(n, e.shiftKey) && (e.preventDefault(), e.stopPropagation(), i.stop());
  }
  _handleArrowKeys(i, e) {
    const t = this.editor.plugins.get(pt), n = this.editor.plugins.get("TableSelection"), r = this.editor.model, s = r.document.selection, a = ["right", "down"].includes(i), l = t.getSelectedTableCells(s);
    if (l.length) {
      let d;
      return d = e ? n.getFocusCell() : a ? l[l.length - 1] : l[0], this._navigateFromCellInDirection(d, i, e), !0;
    }
    const c = s.focus.findAncestor("tableCell");
    if (!c) return !1;
    if (!s.isCollapsed) if (e) {
      if (s.isBackward == a && !s.containsEntireContent(c)) return !1;
    } else {
      const d = s.getSelectedElement();
      if (!d || !r.schema.isObject(d)) return !1;
    }
    return !!this._isSelectionAtCellEdge(s, c, a) && (this._navigateFromCellInDirection(c, i, e), !0);
  }
  _isSelectionAtCellEdge(i, e, t) {
    const n = this.editor.model, r = this.editor.model.schema, s = t ? i.getLastPosition() : i.getFirstPosition();
    if (!r.getLimitElement(s).is("element", "tableCell"))
      return n.createPositionAt(e, t ? "end" : 0).isTouching(s);
    const a = n.createSelection(s);
    return n.modifySelection(a, { direction: t ? "forward" : "backward" }), s.isEqual(a.focus);
  }
  _navigateFromCellInDirection(i, e, t = !1) {
    const n = this.editor.model, r = i.findAncestor("table"), s = [...new ye(r, { includeAllSlots: !0 })], { row: a, column: l } = s[s.length - 1], c = s.find(({ cell: f }) => f == i);
    let { row: d, column: u } = c;
    switch (e) {
      case "left":
        u--;
        break;
      case "up":
        d--;
        break;
      case "right":
        u += c.cellWidth;
        break;
      case "down":
        d += c.cellHeight;
    }
    if (d < 0 || d > a || u < 0 && d <= 0 || u > l && d >= a) return void n.change((f) => {
      f.setSelection(f.createRangeOn(r));
    });
    u < 0 ? (u = t ? 0 : l, d--) : u > l && (u = t ? l : 0, d++);
    const h = s.find((f) => f.row == d && f.column == u).cell, g = ["right", "down"].includes(e), p = this.editor.plugins.get("TableSelection");
    if (t && p.isEnabled) {
      const f = p.getAnchorCell() || i;
      p.setCellSelection(f, h);
    } else {
      const f = n.createPositionAt(h, g ? 0 : "end");
      n.change((b) => {
        b.setSelection(f);
      });
    }
  }
}
class H0 extends Fi {
  constructor() {
    super(...arguments);
    m(this, "domEventType", ["mousemove", "mouseleave"]);
  }
  onDomEvent(e) {
    this.fire(e.type, e);
  }
}
class wM extends A {
  static get pluginName() {
    return "TableMouse";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [Sn, pt];
  }
  init() {
    this.editor.editing.view.addObserver(H0), this._enableShiftClickSelection(), this._enableMouseDragSelection();
  }
  _enableShiftClickSelection() {
    const i = this.editor, e = i.plugins.get(pt);
    let t = !1;
    const n = i.plugins.get(Sn);
    this.listenTo(i.editing.view.document, "mousedown", (r, s) => {
      const a = i.model.document.selection;
      if (!this.isEnabled || !n.isEnabled || !s.domEvent.shiftKey) return;
      const l = n.getAnchorCell() || e.getTableCellsContainingSelection(a)[0];
      if (!l) return;
      const c = this._getModelTableCellFromDomEvent(s);
      c && Nf(l, c) && (t = !0, n.setCellSelection(l, c), s.preventDefault());
    }), this.listenTo(i.editing.view.document, "mouseup", () => {
      t = !1;
    }), this.listenTo(i.editing.view.document, "selectionChange", (r) => {
      t && r.stop();
    }, { priority: "highest" });
  }
  _enableMouseDragSelection() {
    const i = this.editor;
    let e, t, n = !1, r = !1;
    const s = i.plugins.get(Sn);
    this.listenTo(i.editing.view.document, "mousedown", (a, l) => {
      this.isEnabled && s.isEnabled && (l.domEvent.shiftKey || l.domEvent.ctrlKey || l.domEvent.altKey || (e = this._getModelTableCellFromDomEvent(l)));
    }), this.listenTo(i.editing.view.document, "mousemove", (a, l) => {
      if (!l.domEvent.buttons || !e) return;
      const c = this._getModelTableCellFromDomEvent(l);
      c && Nf(e, c) && (t = c, n || t == e || (n = !0)), n && (r = !0, s.setCellSelection(e, t), l.preventDefault());
    }), this.listenTo(i.editing.view.document, "mouseup", () => {
      n = !1, r = !1, e = null, t = null;
    }), this.listenTo(i.editing.view.document, "selectionChange", (a) => {
      r && a.stop();
    }, { priority: "highest" });
  }
  _getModelTableCellFromDomEvent(i) {
    const e = i.target, t = this.editor.editing.view.createPositionAt(e, 0);
    return this.editor.editing.mapper.toModelPosition(t).parent.findAncestor("tableCell", { includeSelf: !0 });
  }
}
function Nf(o, i) {
  return o.parent.parent == i.parent.parent;
}
class vM extends A {
  static get requires() {
    return [th, fM, Sn, wM, _M, kM, dr];
  }
  static get pluginName() {
    return "Table";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
function yM(o) {
  const i = o.getSelectedElement();
  return i && $0(i) ? i : null;
}
function xM(o) {
  const i = o.getFirstPosition();
  if (!i) return null;
  let e = i.parent;
  for (; e; ) {
    if (e.is("element") && $0(e)) return e;
    e = e.parent;
  }
  return null;
}
function $0(o) {
  return !!o.getCustomProperty("table") && et(o);
}
class CM extends A {
  static get requires() {
    return [Na];
  }
  static get pluginName() {
    return "TableToolbar";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  afterInit() {
    const i = this.editor, e = i.t, t = i.plugins.get(Na), n = i.config.get("table.contentToolbar"), r = i.config.get("table.tableToolbar");
    n && t.register("tableContent", { ariaLabel: e("Table toolbar"), items: n, getRelatedElement: xM }), r && t.register("table", { ariaLabel: e("Table toolbar"), items: r, getRelatedElement: yM });
  }
}
[lt.defaultPositions.northArrowSouth, lt.defaultPositions.northArrowSouthWest, lt.defaultPositions.northArrowSouthEast, lt.defaultPositions.southArrowNorth, lt.defaultPositions.southArrowNorthWest, lt.defaultPositions.southArrowNorthEast, lt.defaultPositions.viewportStickyNorth];
function AM(o, i) {
  const e = parseFloat(o);
  return Number.isNaN(e) || String(e) !== String(o) ? o : `${e}${i}`;
}
function TM(o, i = {}) {
  const e = { borderStyle: "none", borderWidth: "", borderColor: "", backgroundColor: "", width: "", height: "", ...o };
  return i.includeAlignmentProperty && !e.alignment && (e.alignment = "center"), i.includePaddingProperty && !e.padding && (e.padding = ""), i.includeVerticalAlignmentProperty && !e.verticalAlignment && (e.verticalAlignment = "middle"), i.includeHorizontalAlignmentProperty && !e.horizontalAlignment && (e.horizontalAlignment = i.isRightToLeftContent ? "right" : "left"), e;
}
function EM(o, i) {
  return TM({ borderStyle: "solid", borderColor: "hsl(0, 0%, 75%)", borderWidth: "1px", ...o }, i);
}
class SM extends G {
  constructor(e, t, n) {
    super(e);
    m(this, "attributeName");
    m(this, "_defaultValue");
    m(this, "_defaultContentTableValue");
    m(this, "_defaultLayoutTableValue");
    switch (this.attributeName = t, this._defaultContentTableValue = n, t) {
      case "tableCellBorderStyle":
        this._defaultLayoutTableValue = "none";
        break;
      case "tableCellHorizontalAlignment":
        this._defaultLayoutTableValue = "left";
        break;
      case "tableCellVerticalAlignment":
        this._defaultLayoutTableValue = "middle";
        break;
      default:
        this._defaultLayoutTableValue = void 0;
    }
  }
  refresh() {
    const e = this.editor.model.document.selection, t = this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e), n = WP(e);
    this._defaultValue = n && n.getAttribute("tableType") === "layout" ? this._defaultLayoutTableValue : this._defaultContentTableValue, this.isEnabled = !!t.length, this.value = this._getSingleValue(t);
  }
  execute(e = {}) {
    const { value: t, batch: n } = e, r = this.editor.model, s = this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection), a = this._getValueToSet(t);
    r.enqueueChange(n, (l) => {
      a ? s.forEach((c) => l.setAttribute(this.attributeName, a, c)) : s.forEach((c) => l.removeAttribute(this.attributeName, c));
    });
  }
  _getAttribute(e) {
    if (!e) return;
    const t = e.getAttribute(this.attributeName);
    return t !== this._defaultValue ? t : void 0;
  }
  _getValueToSet(e) {
    if (e !== this._defaultValue) return e;
  }
  _getSingleValue(e) {
    const t = this._getAttribute(e[0]);
    return e.every((n) => this._getAttribute(n) === t) ? t : void 0;
  }
}
class IM extends SM {
  constructor(i, e) {
    super(i, "tableCellWidth", e);
  }
  _getValueToSet(i) {
    if ((i = AM(i, "px")) !== this._defaultValue) return i;
  }
}
class PM extends A {
  static get pluginName() {
    return "TableCellWidthEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  static get requires() {
    return [th];
  }
  init() {
    const i = this.editor, e = EM(i.config.get("table.tableCellProperties.defaultProperties"));
    qP(i.model.schema, i.conversion, { modelAttribute: "tableCellWidth", styleName: "width", defaultValue: e.width }), i.commands.add("tableCellWidth", new IM(i, e.width));
  }
}
class MM extends G {
  refresh() {
    this.isEnabled = !0;
  }
  execute(i = {}) {
    const { model: e, plugins: t } = this.editor;
    let { table: n = e.document.selection.getSelectedElement(), columnWidths: r, tableWidth: s } = i;
    r && (r = Array.isArray(r) ? r : r.split(",")), e.change((a) => {
      s ? a.setAttribute("tableWidth", s, n) : a.removeAttribute("tableWidth", n);
      const l = t.get("TableColumnResizeEditing").getColumnGroupElement(n);
      if (!r && !l) return;
      if (!r) return a.remove(l);
      const c = eh(r);
      if (l) Array.from(l.getChildren()).forEach((d, u) => a.setAttribute("columnWidth", c[u], d));
      else {
        const d = a.createElement("tableColumnGroup");
        c.forEach((u) => a.appendElement("tableColumn", { columnWidth: u }, d)), a.append(d, n);
      }
    });
  }
}
function VM(o) {
  return (i) => i.on("element:colgroup", (e, t, n) => {
    const r = t.modelCursor.findAncestor("table"), s = Kr(r);
    if (!s) return;
    const a = ps(s), l = o.getColumns(r);
    let c = (d = s, u = n.writer, ps(d).reduce((h, g) => {
      const p = g.getAttribute("columnWidth"), f = g.getAttribute("colSpan");
      if (!f) return h.push(p), h;
      for (let b = 0; b < f; b++) h.push(p);
      return u.removeAttribute("colSpan", g), h;
    }, []));
    var d, u;
    c = Array.from({ length: l }, (h, g) => c[g] || "auto"), (c.length != a.length || c.includes("auto")) && D0(a, s, eh(c), n.writer);
  }, { priority: "low" });
}
const Rf = Nn("px");
class LM extends A {
  constructor(e) {
    super(e);
    m(this, "_isResizingActive");
    m(this, "_resizingData");
    m(this, "_domEmitter");
    m(this, "_tableUtilsPlugin");
    m(this, "_initialMouseEventData", null);
    this._isResizingActive = !1, this.set("_isResizingAllowed", !0), this._resizingData = null, this._domEmitter = new (Nt())(), this._tableUtilsPlugin = e.plugins.get("TableUtils"), this.on("change:_isResizingAllowed", (t, n, r) => {
      const s = r ? "removeClass" : "addClass";
      e.editing.view.change((a) => {
        for (const l of e.editing.view.document.roots) a[s]("ck-column-resize_disabled", e.editing.view.document.getRoot(l.rootName));
      });
    });
  }
  static get requires() {
    return [th, pt];
  }
  static get pluginName() {
    return "TableColumnResizeEditing";
  }
  static get isOfficialPlugin() {
    return !0;
  }
  init() {
    this._extendSchema(), this._registerPostFixer(), this._registerConverters(), this._registerResizingListeners(), this._registerResizerInserter();
    const e = this.editor, t = e.plugins.get("TableColumnResize");
    e.plugins.get("TableEditing").registerAdditionalSlot({ filter: (r) => r.is("element", "tableColumnGroup"), positionOffset: 0 });
    const n = new MM(e);
    e.commands.add("resizeTableWidth", n), e.commands.add("resizeColumnWidths", n), this.bind("_isResizingAllowed").to(e, "isReadOnly", t, "isEnabled", n, "isEnabled", (r, s, a) => !r && s && a);
  }
  destroy() {
    this._domEmitter.stopListening(), super.destroy();
  }
  getColumnGroupElement(e) {
    return Kr(e);
  }
  getTableColumnElements(e) {
    return ps(e);
  }
  getTableColumnsWidths(e) {
    return function(t) {
      return ps(t).map((n) => n.getAttribute("columnWidth"));
    }(e);
  }
  _extendSchema() {
    this.editor.model.schema.extend("table", { allowAttributes: ["tableWidth"] }), this.editor.model.schema.register("tableColumnGroup", { allowIn: "table", isLimit: !0 }), this.editor.model.schema.register("tableColumn", { allowIn: "tableColumnGroup", allowAttributes: ["columnWidth", "colSpan"], isLimit: !0 });
  }
  _registerPostFixer() {
    const e = this.editor.model;
    function t(n, r, s) {
      const a = s._tableUtilsPlugin.getColumns(r);
      if (a - n.length === 0) return n;
      const l = n.map((u) => Number(u.replace("%", ""))), c = function(u, h) {
        const g = /* @__PURE__ */ new Set();
        for (const p of u.getChanges()) if (p.type == "insert" && p.position.nodeAfter && p.position.nodeAfter.name == "tableCell" && p.position.nodeAfter.getAncestors().includes(h)) g.add(p.position.nodeAfter);
        else if (p.type == "remove") {
          const f = p.position.nodeBefore || p.position.nodeAfter;
          f.name == "tableCell" && f.getAncestors().includes(h) && g.add(f);
        }
        return g;
      }(s.editor.model.document.differ, r);
      for (const u of c) {
        const h = a - l.length;
        if (h === 0) continue;
        const g = h > 0, p = s._tableUtilsPlugin.getCellLocation(u).column;
        if (g) {
          const f = tM(r, s.editor), b = (d = f, Array(h).fill(d));
          l.splice(p, 0, ...b);
        } else {
          const f = l.splice(p, Math.abs(h));
          l[p] += Zr(f);
        }
      }
      var d;
      return l.map((u) => u + "%");
    }
    e.document.registerPostFixer((n) => {
      let r = !1;
      for (const s of function(a) {
        const l = /* @__PURE__ */ new Set();
        for (const c of a.document.differ.getChanges()) {
          let d = null;
          switch (c.type) {
            case "insert":
              d = ["table", "tableRow", "tableCell"].includes(c.name) ? c.position : null;
              break;
            case "remove":
              d = ["tableRow", "tableCell"].includes(c.name) ? c.position : null;
              break;
            case "attribute":
              c.range.start.nodeAfter && (d = ["table", "tableRow", "tableCell"].includes(c.range.start.nodeAfter.name) ? c.range.start : null);
          }
          if (!d) continue;
          const u = d.nodeAfter && d.nodeAfter.is("element", "table") ? d.nodeAfter : d.findAncestor("table");
          for (const h of a.createRangeOn(u).getItems()) h.is("element", "table") && Kr(h) && l.add(h);
        }
        return l;
      }(e)) {
        const a = this.getColumnGroupElement(s), l = this.getTableColumnElements(a), c = this.getTableColumnsWidths(a);
        let d = eh(c);
        d = t(d, s, this), _a(c, d) || (D0(l, a, d, n), r = !0);
      }
      return r;
    });
  }
  _registerConverters() {
    const e = this.editor.conversion;
    e.for("upcast").attributeToAttribute({ view: { name: /^(figure|table)$/, styles: { width: /[\s\S]+/ } }, model: { name: "table", key: "tableWidth", value: (t) => t.getStyle("width") } }), e.for("downcast").attributeToAttribute({ model: { name: "table", key: "tableWidth" }, view: (t) => ({ name: "figure", key: "style", value: { width: t } }) }), e.elementToElement({ model: "tableColumnGroup", view: "colgroup" }), e.elementToElement({ model: "tableColumn", view: "col" }), e.for("downcast").add((t) => t.on("insert:table", (n, r, s) => {
      const a = s.writer, l = r.item, c = s.mapper.toViewElement(l), d = c.is("element", "table") ? c : Array.from(c.getChildren()).find((u) => u.is("element", "table"));
      Kr(l) ? a.addClass("ck-table-resized", d) : a.removeClass("ck-table-resized", d);
    }, { priority: "low" })), e.for("upcast").add(VM(this._tableUtilsPlugin)), e.for("upcast").attributeToAttribute({ view: { name: "col", styles: { width: /.*/ } }, model: { key: "columnWidth", value: (t) => {
      const n = t.getStyle("width");
      return n && (n.endsWith("%") || n.endsWith("pt")) ? n : "auto";
    } } }), e.for("upcast").attributeToAttribute({ view: { name: "col", key: "span" }, model: "colSpan" }), e.for("downcast").attributeToAttribute({ model: { name: "tableColumn", key: "columnWidth" }, view: (t) => ({ key: "style", value: { width: t } }) });
  }
  _registerResizingListeners() {
    const e = this.editor.editing.view;
    e.addObserver(H0), e.document.on("mouseover", this._onMouseOverHandler.bind(this), { priority: "high" }), e.document.on("mousedown", this._onMouseDownHandler.bind(this), { priority: "high" }), e.document.on("mouseout", this._onMouseOutHandler.bind(this), { priority: "high" }), this._domEmitter.listenTo(z.window.document, "mousemove", Xo(this._onMouseMoveHandler.bind(this), 50)), this._domEmitter.listenTo(z.window.document, "mouseup", this._onMouseUpHandler.bind(this));
  }
  _recalculateResizerElement(e) {
    const t = this.editor, n = t.editing.view.domConverter, r = n.mapViewToDom(e.findAncestor("table")), s = n.mapViewToDom(e.findAncestor((u) => ["td", "th"].includes(u.name))), a = new K(r), l = new K(s), c = Rf(Number((a.top - l.top).toFixed(4))), d = Rf(Number((l.bottom - a.bottom).toFixed(4)));
    t.editing.view.change((u) => {
      u.setStyle("top", c, e), u.setStyle("bottom", d, e);
    });
  }
  _resetResizerStyles(e) {
    this.editor.editing.view.change((t) => {
      t.removeStyle("top", e), t.removeStyle("bottom", e);
    });
  }
  _onMouseOverHandler(e, t) {
    const n = t.target;
    n.hasClass("ck-table-column-resizer") && this._isResizingAllowed && this._recalculateResizerElement(n);
  }
  _onMouseOutHandler(e, t) {
    const n = t.target;
    n.hasClass("ck-table-column-resizer") && this._isResizingAllowed && (this._isResizingActive || this._resetResizerStyles(n));
  }
  _onMouseDownHandler(e, t) {
    const n = t.target;
    if (!n.hasClass("ck-table-column-resizer") || !this._isResizingAllowed) return;
    const r = this.editor, s = r.editing.mapper.toModelElement(n.findAncestor("figure"));
    r.model.canEditAt(s) && (t.preventDefault(), e.stop(), this._initialMouseEventData = t);
  }
  _startResizingAfterThreshold() {
    const e = this._initialMouseEventData, { target: t } = e, n = this.editor.editing.mapper.toModelElement(t.findAncestor("figure")), r = t.findAncestor("table"), s = function(a, l, c) {
      const d = Array(l.getColumns(a)), u = new ye(a);
      for (const h of u) {
        const g = c.editing.mapper.toViewElement(h.cell), p = iM(c.editing.view.domConverter.mapViewToDom(g));
        (!d[h.column] || p < d[h.column]) && (d[h.column] = si(p));
      }
      return d;
    }(n, this._tableUtilsPlugin, this.editor);
    Array.from(r.getChildren()).find((a) => a.is("element", "colgroup")) || this.editor.editing.view.change((a) => {
      (function(l, c, d) {
        const u = l.createContainerElement("colgroup");
        for (let h = 0; h < c.length; h++) {
          const g = l.createEmptyElement("col"), p = `${si(c[h] / Zr(c) * 100)}%`;
          l.setStyle("width", p, g), l.insert(l.createPositionAt(u, "end"), g);
        }
        l.insert(l.createPositionAt(d, 0), u);
      })(a, s, r);
    }), this._isResizingActive = !0, this._resizingData = this._getResizingData(e, s), this.editor.editing.view.change((a) => function(l, c, d) {
      const u = d.widths.viewFigureWidth / d.widths.viewFigureParentWidth;
      l.addClass("ck-table-resized", c), l.addClass("ck-table-column-resizer__active", d.elements.viewResizer), l.setStyle("width", `${si(100 * u)}%`, c.findAncestor("figure"));
    }(a, r, this._resizingData));
  }
  _onMouseMoveHandler(e, t) {
    if (this._initialMouseEventData) {
      const S = this._initialMouseEventData.domEvent;
      if (!(Math.abs(t.clientX - S.clientX) >= 3)) return;
      this._startResizingAfterThreshold(), this._initialMouseEventData = null;
    }
    if (!this._isResizingActive) return;
    if (!this._isResizingAllowed) return void this._onMouseUpHandler();
    const { columnPosition: n, flags: { isRightEdge: r, isTableCentered: s, isLtrContent: a }, elements: { viewFigure: l, viewLeftColumn: c, viewRightColumn: d, viewResizer: u }, widths: { viewFigureParentWidth: h, tableWidth: g, leftColumnWidth: p, rightColumnWidth: f } } = this._resizingData, b = 40 - p, k = r ? h - g : f - 40, _ = (a ? 1 : -1) * (r && s ? 2 : 1), w = (y = (t.clientX - n) * _, x = Math.min(b, 0), C = Math.max(k, 0), si(y <= x ? x : y >= C ? C : y));
    var y, x, C;
    w !== 0 && (this.editor.editing.view.change((S) => {
      const L = si(100 * (p + w) / g);
      if (S.setStyle("width", `${L}%`, c), r) {
        const W = si(100 * (g + w) / h);
        S.setStyle("width", `${W}%`, l);
      } else {
        const W = si(100 * (f - w) / g);
        S.setStyle("width", `${W}%`, d);
      }
    }), this._recalculateResizerElement(u));
  }
  _onMouseUpHandler() {
    if (this._initialMouseEventData = null, !this._isResizingActive) return;
    const { viewResizer: e, modelTable: t, viewFigure: n, viewColgroup: r } = this._resizingData.elements, s = this.editor, a = s.editing.view, l = this.getColumnGroupElement(t), c = Array.from(r.getChildren()).filter((b) => b.is("view:element")), d = l ? this.getTableColumnsWidths(l) : null, u = c.map((b) => b.getStyle("width")), h = !_a(d, u), g = t.getAttribute("tableWidth"), p = n.getStyle("width"), f = g !== p;
    (h || f) && (this._isResizingAllowed ? s.execute("resizeTableWidth", { table: t, tableWidth: `${si(p)}%`, columnWidths: u }) : a.change((b) => {
      if (d) for (const k of c) b.setStyle("width", d.shift(), k);
      else b.remove(r);
      f && (g ? b.setStyle("width", g, n) : b.removeStyle("width", n)), d || g || b.removeClass("ck-table-resized", [...n.getChildren()].find((k) => k.name === "table"));
    })), a.change((b) => {
      b.removeClass("ck-table-column-resizer__active", e);
    }), a.domConverter.mapViewToDom(e).matches(":hover") || this._resetResizerStyles(e), this._isResizingActive = !1, this._resizingData = null;
  }
  _getResizingData(e, t) {
    const n = this.editor, r = e.domEvent.clientX, s = e.target, a = s.findAncestor("td") || s.findAncestor("th"), l = n.editing.mapper.toModelElement(a), c = l.findAncestor("table"), d = function(w, y) {
      const x = y.getCellLocation(w).column;
      return { leftEdge: x, rightEdge: x + (w.getAttribute("colspan") || 1) - 1 };
    }(l, this._tableUtilsPlugin).rightEdge, u = d === this._tableUtilsPlugin.getColumns(c) - 1, h = !c.hasAttribute("tableAlignment"), g = n.locale.contentLanguageDirection !== "rtl", p = a.findAncestor("table"), f = p.findAncestor("figure"), b = [...p.getChildren()].find((w) => w.is("element", "colgroup")), k = b.getChild(d), _ = u ? void 0 : b.getChild(d + 1);
    return { columnPosition: r, flags: { isRightEdge: u, isTableCentered: h, isLtrContent: g }, elements: { viewResizer: s, modelTable: c, viewFigure: f, viewColgroup: b, viewLeftColumn: k, viewRightColumn: _ }, widths: { viewFigureParentWidth: jd(n.editing.view.domConverter.mapViewToDom(f.parent)), viewFigureWidth: jd(n.editing.view.domConverter.mapViewToDom(f)), tableWidth: B0(c, n), leftColumnWidth: t[d], rightColumnWidth: u ? void 0 : t[d + 1] } };
  }
  _registerResizerInserter() {
    this.editor.conversion.for("editingDowncast").add((e) => {
      e.on("insert:tableCell", (t, n, r) => {
        const s = n.item, a = r.mapper.toViewElement(s), l = r.writer;
        l.insert(l.createPositionAt(a, "end"), l.createUIElement("div", { class: "ck-table-column-resizer" }));
      }, { priority: "lowest" });
    });
  }
}
class OM extends A {
  static get requires() {
    return [LM, PM];
  }
  static get pluginName() {
    return "TableColumnResize";
  }
  static get isOfficialPlugin() {
    return !0;
  }
}
const NM = `:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-dialog-background:var(--ck-custom-background);--ck-color-dialog-form-header-border:var(--ck-custom-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-color-light-red:#fcc;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;box-sizing:border-box;height:auto;margin:0;padding:0;position:static;text-decoration:none;transition:none;vertical-align:middle;width:auto}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}.ck.ck-autocomplete>.ck-search__results{background:var(--ck-color-base-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;max-height:200px;min-width:auto;overflow-y:auto}.ck-rounded-corners .ck.ck-autocomplete>.ck-search__results,.ck.ck-autocomplete>.ck-search__results.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-autocomplete>.ck-search__results{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{border-top-left-radius:0;border-top-right-radius:0;margin-top:-1px}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;background:var(--ck-color-button-default-background);border:1px solid transparent;border-radius:0;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion:reduce){.ck.ck-button,a.ck.ck-button{transition:none}}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit;opacity:.5}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-medium)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background);color:var(--ck-color-button-on-color)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background);color:var(--ck-color-button-action-text)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;border-radius:0;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);border-radius:0;height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}@media (prefers-reduced-motion:reduce){.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{transition:none}}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}.ck.ck-button.ck-list-item-button{padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2)}.ck.ck-button.ck-list-item-button,.ck.ck-button.ck-list-item-button.ck-on{background:var(--ck-color-list-background);color:var(--ck-color-text)}[dir=ltr] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-right:var(--ck-spacing-small)}.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable),.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable):not(.ck-disabled),.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled):not(.ck-disabled){color:var(--ck-color-text)}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{transition:box-shadow .2s ease}@media (forced-colors:none){.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}}@media (forced-colors:active){.ck.ck-color-grid__tile{height:unset;min-height:unset;min-width:unset;padding:0 var(--ck-spacing-small);width:unset}.ck.ck-color-grid__tile .ck-button__label{display:inline-block}}@media (prefers-reduced-motion:reduce){.ck.ck-color-grid__tile{transition:none}}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer){height:15px;width:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}:root{--ck-dialog-overlay-background-color:rgba(0,0,0,.5);--ck-dialog-drop-shadow:0px 0px 6px 2px rgba(0,0,0,.15);--ck-dialog-max-width:100vw;--ck-dialog-max-height:90vh;--ck-color-dialog-background:var(--ck-color-base-background);--ck-color-dialog-form-header-border:var(--ck-color-base-border)}.ck.ck-dialog-overlay{animation:ck-dialog-fade-in .3s;background:var(--ck-dialog-overlay-background-color);z-index:var(--ck-z-dialog)}.ck.ck-dialog{--ck-drop-shadow:var(--ck-dialog-drop-shadow);background:var(--ck-color-dialog-background);border:1px solid var(--ck-color-base-border);border-radius:0;max-height:var(--ck-dialog-max-height);max-width:var(--ck-dialog-max-width);overscroll-behavior:contain}.ck-rounded-corners .ck.ck-dialog,.ck.ck-dialog.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dialog{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dialog .ck.ck-form__header{border-bottom:1px solid var(--ck-color-dialog-form-header-border)}.ck-dialog-scroll-locked{overflow:hidden}@keyframes ck-dialog-fade-in{0%{background:transparent}to{background:var(--ck-dialog-overlay-background-color)}}.ck.ck-dialog .ck.ck-dialog__actions{padding:var(--ck-spacing-large)}.ck.ck-dialog .ck.ck-dialog__actions>*+*{margin-left:var(--ck-spacing-large)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;bottom:0;min-width:100%}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button{border-radius:0;padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2);width:100%}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus{border-color:transparent;box-shadow:none}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-icon-spacing:not(:has(.ck-button__icon))>.ck-button__label{margin-left:calc(var(--ck-icon-size) - var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-right:calc(var(--ck-spacing-small)*-1);transform:rotate(-90deg)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-left:calc(var(--ck-spacing-small)*-1);transform:rotate(90deg)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-dropdown-menu-list__nested-menu__button__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}:root{--ck-dropdown-menu-menu-item-min-width:18em}.ck.ck-dropdown-menu-list__nested-menu__item{min-width:var(--ck-dropdown-menu-menu-item-min-width)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button{border-radius:0}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container,.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size:20px}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus{border-color:transparent;box-shadow:none}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}:root{--ck-dropdown-menu-menu-panel-max-width:75vw}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;height:fit-content;max-width:var(--ck-dropdown-menu-menu-panel-max-width)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:after,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:before{display:none}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_es,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_se{border-top-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_sw,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ws{border-top-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_en,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ne{border-bottom-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_nw,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_wn{border-bottom-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:focus{outline:none}:root{--ck-accessibility-help-dialog-max-width:600px;--ck-accessibility-help-dialog-max-height:400px;--ck-accessibility-help-dialog-border-color:#ccced1;--ck-accessibility-help-dialog-code-background-color:#ededed;--ck-accessibility-help-dialog-kbd-shadow-color:#9c9c9c}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{border:1px solid transparent;max-height:var(--ck-accessibility-help-dialog-max-height);max-width:var(--ck-accessibility-help-dialog-max-width);overflow:auto;padding:var(--ck-spacing-large);user-select:text}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content *{white-space:normal}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label{display:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3{font-size:1.2em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4{font-size:1em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table{margin:1em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl{border-bottom:none;border-top:1px solid var(--ck-accessibility-help-dialog-border-color);display:grid;grid-template-columns:2fr 1fr}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{border-bottom:1px solid var(--ck-accessibility-help-dialog-border-color);padding:.4em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{grid-column-start:1}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{grid-column-start:2;text-align:right}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{background:var(--ck-accessibility-help-dialog-code-background-color);border-radius:2px;display:inline-block;font-size:.9em;line-height:1;padding:.4em;text-align:center;vertical-align:middle}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{font-family:monospace}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{box-shadow:0 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);margin:0 1px;min-width:1.8em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd+kbd{margin-left:2px}:root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}:root{--ck-form-header-height:44px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}[dir=ltr] .ck.ck-form__header>.ck-icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-form__header>.ck-icon{margin-left:var(--ck-spacing-medium)}.ck.ck-form__header .ck-form__header__label{--ck-font-size-base:15px;font-weight:700}.ck.ck-form__header:has(.ck-button-back.ck-hidden){padding-inline:var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-form__header:has(.ck-button-back:not(.ck-hidden)){padding-inline:var(--ck-spacing-small) var(--ck-spacing-small)}.ck.ck-form__header>.ck-button-back{margin-inline-end:var(--ck-spacing-small)}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal));--ck-icon-font-size:.8333350694em}.ck.ck-icon{font-size:var(--ck-icon-font-size);height:var(--ck-icon-size);width:var(--ck-icon-size)}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}:root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);border-radius:0;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion:reduce){.ck.ck-input{transition:none}}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}@media (prefers-reduced-motion:reduce){.ck.ck-input.ck-error{animation:none}}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}.ck.ck-label{font-weight:700}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;top:0;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0;transform:translate(calc(var(--ck-spacing-medium)*-1),-6px) scale(.75);transform-origin:100% 0}@media (prefers-reduced-motion:reduce){.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transition:none}}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}.ck.ck-labeled-field-view.ck-labeled-field-view_full-width{flex-grow:1}.ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}.ck.ck-list{background:var(--ck-color-list-background);border-radius:0;list-style-type:none;padding:var(--ck-spacing-small) 0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list__item{cursor:default;min-width:15em}.ck.ck-list__item>.ck-button:not(.ck-list-item-button){border-radius:0;min-height:unset;padding:var(--ck-spacing-tiny) calc(var(--ck-spacing-standard)*2);width:100%}[dir=ltr] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:left}[dir=rtl] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:right}.ck.ck-list__item>.ck-button:not(.ck-list-item-button) .ck-button__label{line-height:calc(var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button){background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck-list .ck-list__group{padding-top:var(--ck-spacing-medium)}.ck-list .ck-list__group:first-child{padding-top:0}:not(.ck-hidden)~.ck-list .ck-list__group{border-top:1px solid var(--ck-color-base-border)}.ck-list .ck-list__group>.ck-label{font-size:11px;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large) 0}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;margin:var(--ck-spacing-small) 0;width:100%}.ck.ck-menu-bar{background:var(--ck-color-base-background);border:1px solid var(--ck-color-toolbar-border);display:flex;flex-wrap:wrap;gap:var(--ck-spacing-small);justify-content:flex-start;padding:var(--ck-spacing-small);width:100%}.ck.ck-menu-bar__menu{font-size:inherit}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level{max-width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button{width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button{min-height:unset;padding:var(--ck-spacing-small) var(--ck-spacing-medium)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-button__label{line-height:unset;overflow:visible;width:unset}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-icon{display:none}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button{border-radius:0}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{margin-left:var(--ck-spacing-standard);margin-right:calc(var(--ck-spacing-small)*-1);transform:rotate(-90deg)}[dir=rtl] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{left:var(--ck-spacing-standard);margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small);transform:rotate(90deg)}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button.ck-disabled>.ck-menu-bar__menu__button__arrow{opacity:var(--ck-disabled-opacity)}:root{--ck-menu-bar-menu-item-min-width:18em}.ck.ck-menu-bar__menu .ck.ck-menu-bar__menu__item{min-width:var(--ck-menu-bar-menu-item-min-width)}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button{border-radius:0}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container,.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size:20px}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{font-size:var(--ck-icon-font-size)}[dir=ltr] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-left:var(--ck-spacing-medium)}:root{--ck-menu-bar-menu-panel-max-width:75vw}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);border-radius:0;bottom:0;height:fit-content;max-width:var(--ck-menu-bar-menu-panel-max-width)}.ck-rounded-corners .ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{border-top-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{border-top-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne{border-bottom-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{border-bottom-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel:focus{outline:none}.ck.ck-menu-bar .ck-list-item-button:active,.ck.ck-menu-bar .ck-list-item-button:focus{border-color:transparent;box-shadow:none}.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:active,.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none;position:relative;z-index:2}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);border-radius:0;min-height:15px}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number,.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}:root{--ck-search-field-view-horizontal-spacing:calc(var(--ck-icon-size) + var(--ck-spacing-medium))}.ck.ck-search>.ck-labeled-field-view .ck-input{width:100%}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon{--ck-labeled-field-label-default-position-x:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon>.ck-labeled-field-view__input-wrapper>.ck-icon{opacity:.5;pointer-events:none}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input,[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty){padding-left:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset{--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty{--ck-labeled-field-empty-unfocused-max-width:100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{background:none;min-height:auto;min-width:auto;opacity:.5;padding:0}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{left:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover{opacity:1}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty),[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{padding-right:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-search__results{min-width:100%}.ck.ck-search>.ck-search__results>.ck-search__info{padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-search>.ck-search__results>.ck-search__info *{white-space:normal}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{font-weight:700}.ck.ck-search>.ck-search__results>.ck-search__info>span:last-child{margin-top:var(--ck-spacing-medium)}.ck.ck-spinner-container{animation:ck-spinner-rotate 1.5s linear infinite;height:var(--ck-toolbar-spinner-size);width:var(--ck-toolbar-spinner-size)}@media (prefers-reduced-motion:reduce){.ck.ck-spinner-container{animation-duration:3s}}.ck.ck-spinner{border:2px solid var(--ck-color-text);border-radius:50%;border-top:2px solid transparent;height:var(--ck-toolbar-spinner-size);width:var(--ck-toolbar-spinner-size)}@keyframes ck-spinner-rotate{to{transform:rotate(1turn)}}.ck-textarea{overflow-x:hidden}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);border-radius:0;padding:0 var(--ck-spacing-small)}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar .ck.ck-toolbar__separator{background:var(--ck-color-toolbar-border);height:var(--ck-icon-size);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-tooltip-text-padding:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);box-shadow:none;padding:0 var(--ck-spacing-medium)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text{display:inline-block;max-width:200px;padding:var(--ck-tooltip-text-padding) 0;white-space:break-spaces}.ck.ck-balloon-panel.ck-tooltip:before{display:none}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{border:solid var(--ck-color-base-border);border-radius:0;border-width:1px 1px 0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky{border-bottom-width:1px}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-menu-bar{border:0;border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar{border:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}:root{--ck-bookmark-icon-hover-fill-color:var(--ck-color-widget-hover-border);--ck-bookmark-icon-selected-fill-color:var(--ck-color-focus-border);--ck-bookmark-icon-animation-duration:var(--ck-widget-handler-animation-duration);--ck-bookmark-icon-animation-curve:var(--ck-widget-handler-animation-curve)}.ck .ck-bookmark.ck-widget{display:inline-block;outline:none}.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon__fill{transition:fill var(--ck-bookmark-icon-animation-duration) var(--ck-bookmark-icon-animation-curve)}.ck .ck-bookmark.ck-widget:hover .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-hover-fill-color)}.ck .ck-bookmark.ck-widget.ck-widget_selected .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-selected-fill-color)}.ck .ck-bookmark.ck-widget.ck-widget_selected,.ck .ck-bookmark.ck-widget.ck-widget_selected:hover{outline:none}.ck .ck-bookmark.ck-widget .ck-bookmark__icon{display:block;position:relative;top:-.1em}.ck .ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon{height:1.2em;vertical-align:middle;width:auto}.ck .ck-fake-bookmark-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-bookmark-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}:root{--ck-bookmark-form-width:340px}@media screen and (max-width:600px){:root{--ck-bookmark-form-width:300px}}.ck.ck-bookmark-form{width:var(--ck-bookmark-form-width)}.ck.ck-bookmark-balloon .ck.ck-toolbar>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-bookmark-toolbar__preview{cursor:default;font-weight:400;max-width:var(--ck-input-width);min-width:3em;overflow:hidden;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);height:0;margin-top:-1px}.ck.ck-clipboard-drop-target-line:before{border-style:solid;content:"";height:0;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-width)*-.5);width:0}[dir=ltr] .ck.ck-clipboard-drop-target-line:before{border-color:transparent transparent transparent var(--ck-clipboard-drop-target-color);border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height);left:-1px}[dir=rtl] .ck.ck-clipboard-drop-target-line:before{border-color:transparent var(--ck-clipboard-drop-target-color) transparent transparent;border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0;right:-1px}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{background:var(--ck-color-code-block-label-background);color:#fff;font-family:var(--ck-font-face);font-size:10px;line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);right:10px;top:-1px;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media (forced-colors:active){.ck .ck-placeholder,.ck.ck-placeholder{forced-color-adjust:preserve-parent-color}}.ck .ck-placeholder:before,.ck.ck-placeholder:before{cursor:text}@media (forced-colors:none){.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text)}}@media (forced-colors:active){.ck .ck-placeholder:before,.ck.ck-placeholder:before{font-style:italic;margin-left:1px}}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-content:stretch;align-items:center;flex:1 1 auto;flex-direction:row;flex-wrap:wrap;margin:0;padding:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*,[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*,[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view .ck-input,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view .ck-input{min-width:50px;width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-items:flex-start}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{color:var(--ck-color-base-border);top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{flex:0 0 100%;padding-top:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-right:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(var(--ck-spacing-large)*-1)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-switchbutton{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;width:100%}@media screen and (max-width:600px){.ck.ck-find-and-replace-form{max-width:100%;width:300px}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input{flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input .ck-labeled-field-view{flex:1 0 auto;margin-bottom:var(--ck-spacing-standard);width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type .ck-button__label{text-align:center;width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view){flex:1 1 auto;flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button .ck-button__label{text-align:center;width:100%}}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}:root{--ck-html-embed-content-width:calc(100% - var(--ck-icon-size)*1.5);--ck-html-embed-source-height:10em;--ck-html-embed-unfocused-outline-width:1px;--ck-html-embed-content-min-height:calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background:var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color:#737373}.ck-widget.raw-html-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);top:calc(var(--ck-html-embed-unfocused-outline-width)*-1);transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{background:var(--ck-color-focus-border);padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{right:var(--ck-spacing-standard);top:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;direction:ltr;font-family:monospace;font-size:var(--ck-font-size-base);height:var(--ck-html-embed-source-height);min-width:0;padding:var(--ck-spacing-standard);resize:none;tab-size:4;text-align:left;white-space:pre-wrap;width:var(--ck-html-embed-content-width)}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{background-color:var(--ck-color-base-foreground);box-sizing:border-box}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}:root{--ck-image-insert-insert-by-url-width:250px}.ck.ck-image-insert-url{--ck-input-width:100%}.ck.ck-image-insert-url .ck-image-insert-url__action-row{grid-column-gap:var(--ck-spacing-large);margin-top:var(--ck-spacing-large)}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-cancel,.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-save{justify-content:center;min-width:auto}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}.ck.ck-image-insert-form>.ck.ck-button{display:block;width:100%}[dir=ltr] .ck.ck-image-insert-form>.ck.ck-button{text-align:left}[dir=rtl] .ck.ck-image-insert-form>.ck.ck-button{text-align:right}.ck.ck-image-insert-form>.ck.ck-collapsible{min-width:var(--ck-image-insert-insert-by-url-width)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:first-child){border-top:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:last-child){border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-image-insert-url{min-width:var(--ck-image-insert-insert-by-url-width);padding:var(--ck-spacing-large)}.ck.ck-image-insert-form:focus{outline:none}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{animation-delay:0ms,3s;animation-duration:.5s,.5s;animation-fill-mode:forwards,forwards;animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;background:var(--ck-color-image-upload-icon-background);font-size:calc(1px*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));opacity:0;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{animation-delay:.5s;animation-duration:.5s;animation-fill-mode:forwards;animation-name:ck-upload-complete-icon-check;border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);box-sizing:border-box;height:0;left:25%;opacity:0;top:50%;transform:scaleX(-1) rotate(135deg);transform-origin:left top;width:0}@media (prefers-reduced-motion:reduce){.ck-image-upload-complete-icon{animation-duration:0ms}.ck-image-upload-complete-icon:after{animation:none;height:.45em;opacity:1;width:.3em}}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{height:0;opacity:1;width:0}33%{height:0;width:.3em}to{height:.45em;opacity:1;width:.3em}}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px;--ck-upload-placeholder-image-aspect-ratio:2.8}.ck .ck-image-upload-placeholder{margin:0;width:100%}.ck .ck-image-upload-placeholder.image-inline{width:calc(var(--ck-upload-placeholder-loader-size)*2*var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{height:100%;width:100%}.ck .ck-upload-placeholder-loader:before{animation:ck-upload-placeholder-loader 1s linear infinite;border-radius:50%;border-right:2px solid transparent;border-top:3px solid var(--ck-color-upload-placeholder-loader);height:var(--ck-upload-placeholder-loader-size);width:var(--ck-upload-placeholder-loader-size)}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}@media (prefers-reduced-motion:reduce){.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:none;opacity:1}}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{background:var(--ck-color-upload-bar-background);height:2px;transition:width .1s;width:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}:root{--ck-text-alternative-form-width:340px}@media screen and (max-width:600px){:root{--ck-text-alternative-form-width:300px}}.ck.ck-text-alternative-form.ck-responsive-form{width:var(--ck-text-alternative-form-width)}:root{--ck-image-custom-resize-form-width:340px}@media screen and (max-width:600px){:root{--ck-image-custom-resize-form-width:300px}}.ck.ck-image-custom-resize-form.ck-responsive-form{width:var(--ck-image-custom-resize-form-width)}.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}:root{--ck-link-bookmark-icon-size:calc(var(--ck-icon-size)*0.7)}.ck.ck-toolbar.ck-link-toolbar>.ck-toolbar__items{flex-wrap:nowrap}a.ck.ck-button.ck-link-toolbar__preview{color:var(--ck-color-link-default);cursor:pointer;justify-content:center;padding:0 var(--ck-spacing-medium)}a.ck.ck-button.ck-link-toolbar__preview .ck.ck-button__label{max-width:var(--ck-input-width);text-overflow:ellipsis}a.ck.ck-button.ck-link-toolbar__preview,a.ck.ck-button.ck-link-toolbar__preview:active,a.ck.ck-button.ck-link-toolbar__preview:focus,a.ck.ck-button.ck-link-toolbar__preview:hover{background:none}a.ck.ck-button.ck-link-toolbar__preview:active{box-shadow:none}a.ck.ck-button.ck-link-toolbar__preview:focus,a.ck.ck-button.ck-link-toolbar__preview:hover{text-decoration:underline}a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{height:var(--ck-link-bookmark-icon-size);width:var(--ck-link-bookmark-icon-size)}[dir=ltr] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-tiny)}[dir=rtl] a.ck.ck-button.ck-link-toolbar__preview.ck-button_with-text .ck.ck-icon.ck-button__icon{margin-left:var(--ck-spacing-tiny);margin-right:var(--ck-spacing-small)}a.ck.ck-button.ck-link-toolbar__preview:has(.ck-icon){padding-left:var(--ck-spacing-extra-tiny )}:root{--ck-link-panel-width:340px;--ck-link-provider-list-item-text-height:calc(var(--ck-line-height-base)*var(--ck-font-size-base));--ck-link-provider-list-item-height:calc(var(--ck-link-provider-list-item-text-height) + var(--ck-spacing-small) + var(--ck-spacing-small))}@media screen and (max-width:600px){:root{--ck-link-panel-width:300px}}.ck.ck-form.ck-link-form{padding-bottom:0;width:var(--ck-link-panel-width)}@media screen and (max-width:600px){.ck.ck-form.ck-link-form.ck-responsive-form .ck-labeled-field-view{margin:0}}.ck.ck-form.ck-link-form .ck-link-form__providers-list{border-top:1px solid var(--ck-color-base-border)}.ck.ck-form.ck-link-form .ck-link-form__providers-list:has(.ck-list__item:nth-child(n+5)){max-height:calc(var(--ck-link-provider-list-item-height)*4 + var(--ck-spacing-large) + 1px);overflow:auto}.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button{border-radius:0;padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-form.ck-link-form .ck-link-form__providers-list .ck-link__button>.ck-button__label{overflow:hidden;text-overflow:ellipsis}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:"";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}:root{--ck-link-properties-width:340px}@media screen and (max-width:600px){:root{--ck-link-properties-width:300px}}.ck.ck-link-properties{width:var(--ck-link-properties-width)}:root{--ck-link-providers-width:340px;--ck-link-list-view-max-height:240px;--ck-link-list-view-icon-size:calc(var(--ck-icon-size)*0.8)}@media screen and (max-width:600px){:root{--ck-link-providers-width:300px}}.ck.ck-link-providers{width:var(--ck-link-providers-width)}.ck.ck-link-providers .ck-form__header__label{overflow:hidden;text-overflow:ellipsis}.ck.ck-link-providers>.ck-link-providers__list{max-height:min(var(--ck-link-list-view-max-height),40vh)}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-icon{height:var(--ck-link-list-view-icon-size);width:var(--ck-link-list-view-icon-size)}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-button__label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck.ck-link-providers .ck-link__empty-list-info{font-style:italic;padding:calc(var(--ck-spacing-large)*2) var(--ck-spacing-medium);text-align:center}.ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;margin-bottom:calc(var(--ck-spacing-tiny)*-1);padding-left:0;padding-right:0}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{background:none;border-color:transparent;box-shadow:none}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-list{column-gap:var(--ck-spacing-medium);grid-template-columns:repeat(3,auto);padding:var(--ck-spacing-large);row-gap:var(--ck-spacing-medium)}.ck.ck-list-styles-list .ck-button{box-sizing:content-box;margin:0;padding:0}.ck.ck-list-styles-list .ck-button,.ck.ck-list-styles-list .ck-button .ck-icon{height:var(--ck-list-style-button-size);width:var(--ck-list-style-button-size)}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{background:var(--ck-color-base-foreground);padding:calc(var(--ck-spacing-standard)*3)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{background-position:50%;background-size:cover;height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);min-width:var(--ck-media-embed-placeholder-icon-size)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{height:100%;width:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);font-style:italic;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-height:380px;max-width:300px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Im0yMDYuNDc3IDI2MC45LTI4Ljk4NyAyOC45ODdhNS4yMTggNS4yMTggMCAwIDAgMy43OCAxLjYxaDQ5LjYyMWMxLjY5NCAwIDMuMTktLjc5OCA0LjE0Ni0yLjAzN3oiIGZpbGw9IiM1Yzg4YzUiLz48cGF0aCBkPSJNMjI2Ljc0MiAyMjIuOTg4Yy05LjI2NiAwLTE2Ljc3NyA3LjE3LTE2Ljc3NyAxNi4wMTQuMDA3IDIuNzYyLjY2MyA1LjQ3NCAyLjA5MyA3Ljg3NS40My43MDMuODMgMS40MDggMS4xOSAyLjEwNy4zMzMuNTAyLjY1IDEuMDA1Ljk1IDEuNTA4LjM0My40NzcuNjczLjk1Ny45ODggMS40NCAxLjMxIDEuNzY5IDIuNSAzLjUwMiAzLjYzNyA1LjE2OC43OTMgMS4yNzUgMS42ODMgMi42NCAyLjQ2NiAzLjk5IDIuMzYzIDQuMDk0IDQuMDA3IDguMDkyIDQuNiAxMy45MTR2LjAxMmMuMTgyLjQxMi41MTYuNjY2Ljg3OS42NjcuNDAzLS4wMDEuNzY4LS4zMTQuOTMtLjc5OS42MDMtNS43NTYgMi4yMzgtOS43MjkgNC41ODUtMTMuNzk0Ljc4Mi0xLjM1IDEuNjczLTIuNzE1IDIuNDY1LTMuOTkgMS4xMzctMS42NjYgMi4zMjgtMy40IDMuNjM4LTUuMTY5LjMxNS0uNDgyLjY0NS0uOTYyLjk4OC0xLjQzOS4zLS41MDMuNjE3LTEuMDA2Ljk1LTEuNTA4LjM1OS0uNy43Ni0xLjQwNCAxLjE5LTIuMTA3IDEuNDI2LTIuNDAyIDItNS4xMTQgMi4wMDQtNy44NzUgMC04Ljg0NC03LjUxMS0xNi4wMTQtMTYuNzc2LTE2LjAxNHoiIGZpbGw9IiNkZDRiM2UiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PGVsbGlwc2Ugcnk9IjUuNTY0IiByeD0iNS44MjgiIGN5PSIyMzkuMDAyIiBjeD0iMjI2Ljc0MiIgZmlsbD0iIzgwMmQyNyIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMTkwLjMwMSAyMzcuMjgzYy00LjY3IDAtOC40NTcgMy44NTMtOC40NTcgOC42MDZzMy43ODYgOC42MDcgOC40NTcgOC42MDdjMy4wNDMgMCA0LjgwNi0uOTU4IDYuMzM3LTIuNTE2IDEuNTMtMS41NTcgMi4wODctMy45MTMgMi4wODctNi4yOSAwLS4zNjItLjAyMy0uNzIyLS4wNjQtMS4wNzloLTguMjU3djMuMDQzaDQuODVjLS4xOTcuNzU5LS41MzEgMS40NS0xLjA1OCAxLjk4Ni0uOTQyLjk1OC0yLjAyOCAxLjU0OC0zLjkwMSAxLjU0OC0yLjg3NiAwLTUuMjA4LTIuMzcyLTUuMjA4LTUuMjk5IDAtMi45MjYgMi4zMzItNS4yOTkgNS4yMDgtNS4yOTkgMS4zOTkgMCAyLjYxOC40MDcgMy41ODQgMS4yOTNsMi4zODEtMi4zOGMwLS4wMDItLjAwMy0uMDA0LS4wMDQtLjAwNS0xLjU4OC0xLjUyNC0zLjYyLTIuMjE1LTUuOTU1LTIuMjE1em00LjQzIDUuNjYuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0ibTIxNS4xODQgMjUxLjkyOS03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVhNS4yMzMgNS4yMzMgMCAwIDAgLjQ0OS0yLjEyM3YtMzEuMTY1Yy0uNDY5LjY3NS0uOTM0IDEuMzQ5LTEuMzgyIDIuMDA1LS43OTIgMS4yNzUtMS42ODIgMi42NC0yLjQ2NSAzLjk5LTIuMzQ3IDQuMDY1LTMuOTgyIDguMDM4LTQuNTg1IDEzLjc5NC0uMTYyLjQ4NS0uNTI3Ljc5OC0uOTMuNzk5LS4zNjMtLjAwMS0uNjk3LS4yNTUtLjg3OS0uNjY3di0uMDEyYy0uNTkzLTUuODIyLTIuMjM3LTkuODItNC42LTEzLjkxNC0uNzgzLTEuMzUtMS42NzMtMi43MTUtMi40NjYtMy45OS0xLjEzNy0xLjY2Ni0yLjMyNy0zLjQtMy42MzctNS4xNjlsLS4wMDItLjAwM3oiIGZpbGw9IiNjM2MzYzMiLz48cGF0aCBkPSJtMjEyLjk4MyAyNDguNDk1LTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOCA1LjIzOGgxLjAxNWwzNS42NjYtMzUuNjY2YTEzNi4yNzUgMTM2LjI3NSAwIDAgMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAgMC0uOTg5LTEuNDQgMzUuMTI3IDM1LjEyNyAwIDAgMC0uOTUtMS41MDhjLS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJtMjExLjk5OCAyNjEuMDgzLTYuMTUyIDYuMTUxIDI0LjI2NCAyNC4yNjRoLjc4MWE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OVptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OVoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzNabTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1Wm0xNjQuNzA2LTUuMTExYzAgMTYuNjk2LTEzLjUzNSAzMC4yMy0zMC4yMzEgMzAuMjMtMTYuNjk1IDAtMzAuMjMtMTMuNTM0LTMwLjIzLTMwLjIzIDAtMTYuNjk2IDEzLjUzNS0zMC4yMzEgMzAuMjMtMzAuMjMxIDE2LjY5NiAwIDMwLjIzMSAxMy41MzUgMzAuMjMxIDMwLjIzMSIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}:root{--ck-color-mention-background:rgba(153,0,48,.1);--ck-color-mention-text:#990030}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}:root{--ck-color-restricted-editing-exception-background:rgba(255,169,77,.2);--ck-color-restricted-editing-exception-hover-background:rgba(255,169,77,.35);--ck-color-restricted-editing-exception-brackets:rgba(204,105,0,.4);--ck-color-restricted-editing-selected-exception-background:rgba(255,169,77,.5);--ck-color-restricted-editing-selected-exception-brackets:rgba(204,105,0,.6)}.ck-editor__editable .restricted-editing-exception{background-color:var(--ck-color-restricted-editing-exception-background);border:1px solid;border-image:linear-gradient(to right,var(--ck-color-restricted-editing-exception-brackets) 0,var(--ck-color-restricted-editing-exception-brackets) 5px,transparent 6px,transparent calc(100% - 6px),var(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-exception-brackets) 100%) 1;transition:background .2s ease-in-out}@media (prefers-reduced-motion:reduce){.ck-editor__editable .restricted-editing-exception{transition:none}}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected{background-color:var(--ck-color-restricted-editing-selected-exception-background);border-image:linear-gradient(to right,var(--ck-color-restricted-editing-selected-exception-brackets) 0,var(--ck-color-restricted-editing-selected-exception-brackets) 5px,var(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-selected-exception-brackets) 100%) 1}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed{padding-left:1ch}.ck-restricted-editing_mode_restricted,.ck-restricted-editing_mode_restricted *{cursor:default}.ck-restricted-editing_mode_restricted .restricted-editing-exception,.ck-restricted-editing_mode_restricted .restricted-editing-exception *{cursor:text}.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover{background:var(--ck-color-restricted-editing-exception-hover-background)}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{overflow-x:hidden;overflow-y:auto}.ck.ck-character-grid .ck-character-grid__tiles{grid-gap:var(--ck-spacing-standard);grid-template-columns:repeat(auto-fill,minmax(var(--ck-character-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-character-grid .ck-character-grid__tile{border:0;font-size:1.5em;height:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-character-grid-tile-size)}@media (prefers-reduced-motion:reduce){.ck.ck-character-grid .ck-character-grid__tile{transition:none}}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);text-align:center;width:100%}.ck.ck-character-info{border-top:1px solid var(--ck-color-base-border);padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-character-info>*{font-size:var(--ck-font-size-small);text-transform:uppercase}.ck.ck-character-info .ck-character-info__name{max-width:280px;overflow:hidden;text-overflow:ellipsis}.ck.ck-character-info .ck-character-info__code{opacity:.6}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;overflow:hidden;text-overflow:ellipsis}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media screen and (max-width:600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{overflow:hidden;text-overflow:ellipsis}}.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}:root{--ck-style-panel-button-width:120px;--ck-style-panel-button-height:80px;--ck-style-panel-button-label-background:#f0f0f0;--ck-style-panel-button-hover-label-background:#ebebeb;--ck-style-panel-button-hover-border-color:#b3b3b3}.ck.ck-style-panel .ck-style-grid{column-gap:var(--ck-spacing-large);row-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background:var(--ck-color-base-background);--ck-color-button-default-active-background:var(--ck-color-base-background);height:var(--ck-style-panel-button-height);padding:0;width:var(--ck-style-panel-button-width)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{flex-shrink:0;height:22px;line-height:22px;overflow:hidden;padding:0 var(--ck-spacing-medium);text-overflow:ellipsis;width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background);opacity:.9;overflow:hidden;padding:var(--ck-spacing-medium);width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background:var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{border-color:var(--ck-color-base-foreground);filter:saturate(.3);opacity:.4}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}.ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}:root{--ck-style-panel-max-height:470px}.ck.ck-style-panel{max-height:var(--ck-style-panel-max-height);overflow-y:auto;padding:var(--ck-spacing-large)}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);border-radius:0;height:20px;width:20px}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}.ck.ck-form__row>:not(.ck-label)+*{margin-inline-start:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}@media (prefers-reduced-motion:reduce){.ck .ck-insert-table-dropdown-grid-box{transition:none}}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}:root{--ck-color-selector-focused-cell-background:rgba(158,201,250,.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-selector-focused-cell-background);outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both;background:var(--ck-color-base-error);border-radius:0;color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}@media (prefers-reduced-motion:reduce){.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}:root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;outline:unset;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}:root{--ck-table-layout-widget-type-around-button-size:16px;--ck-table-layout-widget-type-around-icon-width:10px;--ck-table-layout-widget-type-around-icon-height:8px;--ck-table-layout-widget-handler-icon-size:10px;--ck-table-layout-default-border-color:#d4d4d4}.ck-editor__editable .table.layout-table>table{border-collapse:revert;height:100%;width:100%}.ck-editor__editable .table.layout-table>table:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:none}.ck-editor__editable .table.layout-table>table>tbody>tr>td{box-shadow:revert;min-width:2em;padding:revert;text-indent:1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=" width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*="'width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=";width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style^="width:"]{min-width:auto}.ck-editor__editable .table.layout-table>table>tbody>tr>td:focus{background-color:transparent}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:var(--ck-table-layout-default-border-color) 1px dashed;outline-offset:-1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]):focus{outline:var(--ck-color-focus-border) 1px solid}.ck-editor__editable .table.layout-table>table>tbody>tr>td>.ck-table-bogus-paragraph{text-indent:0;width:calc(100% - 1px)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around{--ck-widget-type-around-button-size:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{transform:translateY(0);z-index:2}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{border-radius:0 0 100px 100px;left:min(10%,30px);margin-left:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before:after{border-radius:0 0 100px 100px}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after:after{border-radius:100px 100px 0 0}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button svg{height:var(--ck-table-layout-widget-type-around-icon-height);width:var(--ck-table-layout-widget-type-around-icon-width)}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_with-selection-handle>.ck-widget__selection-handle{--ck-widget-handler-icon-size:var(--ck-table-layout-widget-handler-icon-size);transform:translateY(calc(0px - var(--ck-widget-outline-thickness)));z-index:3}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:0}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:0}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget{transition:none}}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{box-shadow:var(--ck-inner-shadow),0 0}@media (forced-colors:none){.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background)}}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused:not(td,th),.ck .ck-editor__nested-editable:focus:not(td,th){border:var(--ck-focus-ring);outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion:reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck .ck-widget:has(.ck-widget.table:hover){outline-color:transparent}.ck .ck-widget.ck-widget_with-selection-handle:has(.ck-widget.table:hover)>.ck-widget__selection-handle{opacity:0;visibility:hidden}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button svg{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}@media (prefers-reduced-motion:reduce){.ck .ck-widget .ck-widget__type-around__button:hover,.ck .ck-widget .ck-widget__type-around__button:hover svg line,.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:none}}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget:has(.ck-widget.table:hover)>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}.ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}.ck-content blockquote{border-left:5px solid #ccc;font-style:italic;margin-left:0;margin-right:0;overflow:hidden;padding-left:1.5em;padding-right:1.5em}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}:root{--ck-image-processing-highlight-color:#f9fafa;--ck-image-processing-background-color:#e3e5e8}.ck.ck-editor__editable .image.image-processing{position:relative}.ck.ck-editor__editable .image.image-processing:before{animation:ck-image-processing-animation 2s linear infinite;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;content:"";height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}.ck.ck-editor__editable .image.image-processing img{height:100%}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{pointer-events:none;position:absolute}.ck-content pre{background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;color:#353535;direction:ltr;font-style:normal;min-width:200px;padding:1em;tab-size:4;text-align:left;white-space:pre-wrap}.ck-content pre code{background:unset;border-radius:0;padding:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-panel)}.ck.ck-menu-bar{border:none;border-bottom:1px solid var(--ck-color-toolbar-border)}:root{--ck-emoji-grid-tile-size:27px}.ck.ck-emoji .ck.ck-emoji__tiles{border-top:1px solid var(--ck-color-base-border);max-height:min(265px,40vh);max-width:100%;overflow-x:hidden;overflow-y:auto}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__grid{grid-gap:var(--ck-spacing-small);display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--ck-emoji-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{border:0;font-size:1.5em;height:var(--ck-emoji-grid-tile-size);min-height:var(--ck-emoji-grid-tile-size);min-width:var(--ck-emoji-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-emoji-grid-tile-size)}@media (prefers-reduced-motion:reduce){.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{transition:none}}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:focus:not(.ck-disabled),.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile .ck-button__label{line-height:var(--ck-emoji-grid-tile-size);text-align:center;width:100%}.ck.ck-emoji__categories-list{display:flex;justify-content:space-between;margin:0 var(--ck-spacing-large)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text{border-width:0;border-bottom:2px solid transparent;font-size:var(--ck-font-size-big);min-height:var(--ck-font-size-big);min-width:var(--ck-font-size-big);padding:0}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text.ck-emoji__category-item.ck-on{border-bottom-color:var(--ck-color-base-active)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text>span{margin:auto}.ck.ck-emoji__skin-tone{margin-left:var(--ck-spacing-standard)}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck.ck-list__item{min-width:1em}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:auto}.ck.ck-form.ck-emoji-picker-form{padding-bottom:0}.ck.ck-form.ck-emoji-picker-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border-color:transparent}.ck.ck-emoji{width:320px}.ck .ck.ck-emoji__search{align-items:center;display:flex;justify-content:space-between;padding:var(--ck-spacing-large);padding-bottom:var(--ck-spacing-medium)}.ck .ck.ck-emoji__search>.ck.ck-search{flex:1}.ck .ck-fake-emoji-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-emoji-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}div.ck.ck-balloon-panel.ck-emoji-picker-balloon{z-index:calc(var( --ck-z-dialog ) + 1)}.ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}.ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}.ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{display:flex}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions.ck-find-and-replace-form__inputs .ck-results-counter,.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs.ck-find-and-replace-form__inputs .ck-results-counter{position:absolute}.ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}body.ck-fullscreen,html.ck-fullscreen{--ck-z-fullscreen:10000;--ck-z-default:calc(var(--ck-z-fullscreen) + 1);--ck-z-panel:calc(var(--ck-z-default) + 999);--ck-z-dialog:100000;overflow:hidden}body.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog,html.ck-fullscreen .ckbox-reset:not(#n)>.ckbox--dialog{--ckbox-z-index-root:calc(var(--ck-z-dialog) + 1)}body.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor,html.ck-fullscreen .ckbox:not(#n) .ckbox-img-editor{--ckbox-z-index-preview:calc(var(--ck-z-dialog) + 1)}body.ck-fullscreen .ck-pagination-view-line,html.ck-fullscreen .ck-pagination-view-line{z-index:calc(var(--ck-z-fullscreen) + 1)}body.ck-fullscreen .page-break__label,html.ck-fullscreen .page-break__label{z-index:calc(var(--ck-z-fullscreen) + 2)}.ck.ck-fullscreen__main-wrapper{background:var(--ck-color-base-foreground);display:flex;flex-direction:column;height:100%;left:0;position:fixed;top:0;width:100%;z-index:var(--ck-z-fullscreen)}.ck.ck-fullscreen__main-wrapper .ck.ck-revision-history-ui__changes-navigation{margin-bottom:0;margin-top:0}:not(body>.ck-fullscreen__main-wrapper).ck-fullscreen__main-wrapper{position:absolute}.ck-fullscreen__menu-bar .ck.ck-menu-bar{border:none}.ck-fullscreen__main-wrapper .ck-fullscreen__editable-wrapper{--ck-fullscreen-editor-top-margin:28px;--ck-fullscreen-editor-bottom-margin:28px;display:flex;justify-content:flex-start;max-height:100%;overflow:auto}.ck-fullscreen__sidebar{flex-shrink:0;margin-left:10px;margin-top:var(--ck-fullscreen-editor-top-margin);width:300px}.ck-fullscreen__sidebar[data-ck-fullscreen=right-sidebar]{margin-right:auto}.ck-fullscreen__main-wrapper .ck-fullscreen__editable{height:100%;margin-bottom:56px;margin-left:auto;margin-top:var(--ck-fullscreen-editor-top-margin)}.ck-fullscreen__main-wrapper .ck-fullscreen__editable:after{content:"";display:block;height:var(--ck-fullscreen-editor-bottom-margin)}.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck.ck-editor__editable:not(.ck-editor__nested-editable){background:#fff;border:1px solid var(--ck-color-base-border);box-shadow:0 2px 3px rgba(0,0,0,.078);box-sizing:border-box;height:fit-content;min-height:297mm;padding:20mm 12mm;width:210.52917mm}.ck-fullscreen__main-wrapper .ck-fullscreen__editable .ck-source-editing-area{width:210.52917mm}.ck-fullscreen__left-sidebar{--ck-user-avatar-size:28px;align-self:flex-start;background-color:transparent;box-sizing:border-box;display:flex;flex-direction:column;font-family:Helvetica,Arial,sans-serif;height:100%;margin-top:0;position:sticky;top:0}.ck-fullscreen__left-sidebar .ck.ck-presence-list--collapsed{--ck-user-avatar-size:32px}.ck-fullscreen__left-sidebar>:first-child{padding-top:var(--ck-fullscreen-editor-top-margin)}.ck-fullscreen__left-sidebar .ck-presence-list__users-counter__text,.ck-fullscreen__left-sidebar .ck-user{font-size:.85em}.ck-fullscreen__left-sidebar-item{margin-bottom:var(--ck-spacing-medium);padding:var(--ck-spacing-medium)}.ck-fullscreen__left-sidebar-item:last-child{margin-bottom:0}.ck-fullscreen__left-sidebar-header{--ck-fullscreen-presence-list-header-font-size:0.875em;color:var(--ck-document-outline-item-default-color);font-size:var(--ck-fullscreen-presence-list-header-font-size);font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck-fullscreen__left-sidebar--sticky{position:sticky;top:0}.ck-fullscreen__left-sidebar--sticky>:first-child{padding-top:0}.ck-fullscreen__presence-list{margin-top:var(--ck-spacing-medium)}.ck-fullscreen__left-sidebar-item--no-margin{margin:0}.ck-fullscreen__left-sidebar .ck.ck-document-outline{padding-left:0;padding-right:0;padding-top:0}.ck-fullscreen__document-outline-wrapper{overflow-y:auto;padding-top:0}.ck.ck-heading_heading1 .ck-button__label{font-size:20px}.ck.ck-heading_heading2 .ck-button__label{font-size:17px}.ck.ck-heading_heading3 .ck-button__label{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}:root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{background-color:transparent;color:var(--ck-highlight-pen-red)}.ck-content .pen-green{background-color:transparent;color:var(--ck-highlight-pen-green)}.ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{background:#dedede;border:0;height:4px;margin:15px 0}.ck-widget.raw-html-embed{display:flow-root;font-style:normal;margin:.9em auto;min-width:15em;position:relative}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{display:flex;flex-direction:column;position:absolute}.ck-widget.raw-html-embed .raw-html-embed__preview{display:flex;overflow:hidden;position:relative}.ck-widget.raw-html-embed .raw-html-embed__preview-content{border-collapse:separate;border-spacing:7px;display:table;margin:auto;position:relative;width:100%}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}:root{--ck-html-object-embed-unfocused-outline-width:1px}.ck-widget.html-object-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base);min-width:calc(76px + var(--ck-spacing-standard));padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-object-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);font-style:normal;font-weight:400;left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);position:absolute;top:0;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}:root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highlighted-background:#fd0}.ck-content .image>figcaption{background-color:var(--ck-color-image-caption-background);caption-side:bottom;color:var(--ck-color-image-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;word-break:break-word}@media (forced-colors:active){.ck-content .image>figcaption{background-color:unset;color:unset}}@media (forced-colors:none){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}}@media (prefers-reduced-motion:reduce){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:none}}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highlighted-background)}to{background-color:var(--ck-color-image-caption-background)}}.ck.ck-image-insert-url{padding:var(--ck-spacing-large) var(--ck-spacing-large) 0;width:400px}.ck.ck-image-insert-url .ck-image-insert-url__action-row{display:grid;grid-template-columns:repeat(2,1fr)}.ck-content img.image_resized{height:auto}.ck-content .image.image_resized{box-sizing:border-box;display:block;max-width:100%}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}:root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image.image-style-block-align-left,.ck-content .image.image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image.image-style-align-left,.ck-content .image.image-style-align-right{clear:none}.ck-content .image.image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image.image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image.image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image.image-style-block-align-right{margin-left:auto;margin-right:0}.ck-content .image.image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content p+.image.image-style-align-left,.ck-content p+.image.image-style-align-right,.ck-content p+.image.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-bottom:var(--ck-inline-image-style-spacing);margin-top:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}.ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{left:0;position:absolute;top:0}.ck-image-upload-complete-icon{border-radius:50%;display:block;position:absolute;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}.ck .ck-upload-placeholder-loader{align-items:center;display:flex;justify-content:center;left:0;position:absolute;top:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}.ck-content .image{clear:both;display:table;margin:.9em auto;min-width:50px;text-align:center}.ck-content .image img{display:block;height:auto;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{align-items:flex-start;display:inline-flex;max-width:100%}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}.ck.ck-editor__editable .image{z-index:1}.ck.ck-editor__editable .image.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable .image-inline img{height:auto}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}.ck.ck-editor__editable img.image_placeholder{background-size:100% 100%}.ck.ck-link-providers>.ck-link-providers__list{overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-link-providers>.ck-link-providers__list .ck-button>.ck-icon{flex-shrink:0}.ck.ck-link-toolbar__preview{display:inline-block}.ck.ck-link-toolbar__preview .ck-button__label{overflow:hidden}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}.ck.ck-link-form .ck-link-form__providers-list{display:flex;flex-direction:column}.ck.ck-link-form .ck-link-form__providers-list .ck-link__button>.ck-button__label{flex-grow:1}.ck.ck-link-form .ck-link__items:empty{display:none}.ck-editor__editable .ck-list-bogus-paragraph{display:block}.ck.ck-list-styles-list{display:grid}.ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}:root{--ck-todo-list-checkmark-size:16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{margin-bottom:5px;position:relative}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-content[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-content .todo-list .todo-list__label>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out;width:100%}@media (prefers-reduced-motion:reduce){.ck-content .todo-list .todo-list__label>input:before{transition:none}}.ck-content .todo-list .todo-list__label>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-editor__editable.ck-content .todo-list .todo-list__label>input,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{cursor:pointer}.ck-editor__editable.ck-content .todo-list .todo-list__label>input:hover:before,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:hover:before{box-shadow:0 0 0 5px rgba(0,0,0,.1)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-editor__editable.ck-content[dir=rtl] .todo-list .todo-list__label>span[contenteditable=false]>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out;width:100%}@media (prefers-reduced-motion:reduce){.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{transition:none}}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:after{border-color:#fff}.ck-editor__editable.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-content .media{clear:both;display:block;margin:.9em 0;min-width:15em}.ck-media__wrapper .ck-media__placeholder{align-items:center;display:flex;flex-direction:column}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{display:block;overflow:hidden}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck.ck-media-form{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:nowrap;width:400px}.ck.ck-media-form .ck-labeled-field-view{display:inline-block;width:100%}.ck.ck-media-form .ck-label{display:none}.ck.ck-media-form .ck-input{width:100%}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}:root{--ck-mention-list-max-height:300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{flex-shrink:0;overflow:hidden}div.ck.ck-balloon-panel.ck-mention-balloon{z-index:calc(var( --ck-z-dialog ) + 1)}:root{--ck-color-minimap-tracker-background:208,0%,51%;--ck-color-minimap-iframe-outline:#bfbfbf;--ck-color-minimap-iframe-shadow:rgba(0,0,0,.11);--ck-color-minimap-progress-background:#666}.ck.ck-minimap{background:var(--ck-color-base-background);position:absolute;user-select:none}.ck.ck-minimap,.ck.ck-minimap iframe{height:100%;width:100%}.ck.ck-minimap iframe{border:0;box-shadow:0 2px 5px var(--ck-color-minimap-iframe-shadow);margin:0;outline:1px solid var(--ck-color-minimap-iframe-outline);pointer-events:none;position:relative}.ck.ck-minimap .ck.ck-minimap__position-tracker{background:hsla(var(--ck-color-minimap-tracker-background),.2);position:absolute;top:0;transition:background .1s ease-in-out;width:100%;z-index:1}@media (prefers-reduced-motion:reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker{transition:none}}.ck.ck-minimap .ck.ck-minimap__position-tracker:hover{background:hsla(var(--ck-color-minimap-tracker-background),.3)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover{background:hsla(var(--ck-color-minimap-tracker-background),.4)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:after,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover:after{opacity:1}.ck.ck-minimap .ck.ck-minimap__position-tracker:after{background:var(--ck-color-minimap-progress-background);border:1px solid var(--ck-color-base-background);border-radius:3px;color:var(--ck-color-base-background);content:attr(data-progress) "%";font-size:10px;opacity:0;padding:2px 4px;position:absolute;right:5px;top:5px;transition:opacity .1s ease-in-out}@media (prefers-reduced-motion:reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker:after{transition:none}}.ck-content .page-break{align-items:center;clear:both;display:flex;justify-content:center;padding:5px 0;position:relative}.ck-content .page-break:after{border-bottom:2px dashed #c4c4c4;content:"";position:absolute;width:100%}.ck-content .page-break__label{background:#fff;border:1px solid #c4c4c4;border-radius:2px;box-shadow:2px 2px 1px rgba(0,0,0,.15);color:#333;display:block;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;padding:.3em .6em;position:relative;text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}.ck-content :has(+.page-break){margin-bottom:0}}:root{--ck-show-blocks-border-color:#757575}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *):not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-repeat:no-repeat;padding-top:15px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck-source-editing-area{overflow:hidden;position:relative}.ck-source-editing-area textarea,.ck-source-editing-area:after{border:1px solid transparent;font-family:monospace;font-size:var(--ck-font-size-normal);line-height:var(--ck-line-height-base);margin:0;padding:var(--ck-spacing-large);white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) " ";display:block;visibility:hidden}.ck-source-editing-area textarea{border-color:var(--ck-color-base-border);border-radius:0;box-sizing:border-box;height:100%;outline:none;overflow:hidden;position:absolute;resize:none;width:100%}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}.ck.ck-character-info{display:flex;justify-content:space-between}.ck.ck-special-characters>.ck-dialog__content>div{grid-column-gap:0;grid-row-gap:0;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr auto;height:100%;max-width:100%;width:350px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories{grid-area:1/1/2/2;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view{padding-top:var(--ck-spacing-standard);width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both;background:var(--ck-color-base-error);color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}@media (prefers-reduced-motion:reduce){.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown{display:block;width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button>span{width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-grid{grid-area:2/1/3/2;max-height:200px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-info{grid-area:3/1/4/2}:root{--ck-style-panel-columns:3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;flex-direction:column;justify-content:space-between}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{align-content:center;align-items:center;display:flex;flex-basis:100%;flex-grow:1;justify-content:flex-start}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-content figure.table:not(.layout-table){display:table}.ck-content figure.table:not(.layout-table)>table{height:100%;width:100%}.ck-content figure.table:not(.layout-table),.ck-content table.table:not(.layout-table){margin:.9em auto}.ck-content figure.table:not(.layout-table)>table,.ck-content table.table:not(.layout-table){border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0}.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>th{background:rgba(0,0,0,.05);font-weight:700}.ck-content figure.table:not(.layout-table)>table>tbody>tr>td,.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>td,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>td,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>td,.ck-content table.table:not(.layout-table)>thead>tr>th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}@media print{.ck-content figure.table>table{height:auto}}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:first-child{margin-top:var(--ck-spacing-large)}.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:last-child,.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:nth-last-child(2):has(+.ck-fake-selection-container){margin-bottom:var(--ck-spacing-large)}.ck-editor__editable .table.layout-table{display:table;margin:0}.ck-editor__editable .table.layout-table.ck-widget:hover{z-index:var(--ck-z-default)}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle{opacity:.75;visibility:visible}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle:hover{opacity:1}.ck-editor__editable .table.layout-table.ck-widget:has(.ck-widget.table:hover)>.ck-widget__selection-handle{opacity:0;visibility:hidden}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_selected{z-index:var(--ck-z-default)}.ck-content figure.table.layout-table,.ck-content table.table.layout-table{margin-bottom:0;margin-top:0}.ck-content figure.table.layout-table>table,.ck-content table.table.layout-table{border-spacing:0}:root{--ck-form-default-width:340px}.ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form.ck-form_default-width{width:var(--ck-form-default-width)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-number,.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}@media screen and (max-width:600px){.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit{align-items:stretch;flex-direction:column;padding:0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit>.ck{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit .ck-button_with-text{justify-content:center}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_large-bottom-padding{padding-bottom:var(--ck-spacing-large)}}[dir=ltr] .ck.ck-form.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-form.ck-responsive-form>:not(:last-child){margin-left:0}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck-form__row>:not(.ck-label,.ck-table-form__dimension-operator){flex-grow:1}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}:root{--ck-color-selector-caption-background:#f7f7f7;--ck-color-selector-caption-text:#333;--ck-color-selector-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-selector-caption-background);caption-side:top;color:var(--ck-color-selector-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}@media (forced-colors:active){.ck-content .table>figcaption{background-color:unset;color:unset}}@media (forced-colors:none){.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-selector-caption-highlighted-background)}to{background-color:var(--ck-color-selector-caption-background)}}:root{--ck-color-selector-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word}.ck.ck-editor__editable .table td,.ck.ck-editor__editable .table th{position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:0;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:0;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-selector-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}.ck-hidden{display:none!important}:root{--ck-z-default:1;--ck-z-panel:calc(var(--ck-z-default) + 999);--ck-z-dialog:9999}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-font-size:calc(var(--ck-font-size-base)*7.5/13);--ck-powered-by-line-height:calc(var(--ck-font-size-base)*10/13);--ck-powered-by-letter-spacing:calc(var(--ck-font-size-base)*-0.2/13);--ck-powered-by-padding-vertical:2px;--ck-powered-by-padding-horizontal:4px;--ck-powered-by-text-color:#4f4f4f;--ck-powered-by-border-radius:var(--ck-border-radius);--ck-powered-by-background:#fff;--ck-powered-by-border-color:var(--ck-color-focus-border);--ck-powered-by-svg-width:53;--ck-powered-by-svg-height:10;--ck-powered-by-icon-width:calc(var(--ck-font-size-base)*var(--ck-powered-by-svg-width)/13);--ck-powered-by-icon-height:calc(var(--ck-font-size-base)*var(--ck-powered-by-svg-height)/13)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius:var(--ck-powered-by-border-radius);background:var(--ck-powered-by-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{align-items:center;cursor:pointer;display:flex;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);opacity:.66;padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{color:var(--ck-powered-by-text-color);cursor:pointer;font-size:var(--ck-powered-by-font-size);font-weight:700;letter-spacing:var(--ck-powered-by-letter-spacing);line-height:normal;margin-right:4px;padding-left:2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{cursor:pointer;display:block;height:var(--ck-powered-by-icon-height);width:var(--ck-powered-by-icon-width)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-evaluation-badge-font-size:calc(var(--ck-font-size-base)*7.5/13);--ck-evaluation-badge-line-height:calc(var(--ck-font-size-base)*7.5/13);--ck-evaluation-badge-letter-spacing:calc(var(--ck-font-size-base)*-0.2/13);--ck-evaluation-badge-padding-vertical:2px;--ck-evaluation-badge-padding-horizontal:4px;--ck-evaluation-badge-text-color:#4f4f4f;--ck-evaluation-badge-border-radius:var(--ck-border-radius);--ck-evaluation-badge-background:#fff;--ck-evaluation-badge-border-color:var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon{--ck-border-radius:var(--ck-evaluation-badge-border-radius);background:var(--ck-evaluation-badge-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge{line-height:var(--ck-evaluation-badge-line-height);padding:var(--ck-evaluation-badge-padding-vertical) var(--ck-evaluation-badge-padding-horizontal)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge .ck-evaluation-badge__label{color:var(--ck-evaluation-badge-text-color);display:block;font-size:var(--ck-evaluation-badge-font-size);font-weight:700;letter-spacing:var(--ck-evaluation-badge-letter-spacing);line-height:normal;padding:0 2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-evaluation-badge-border-color)}.ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}[dir=ltr] .ck.ck-button,[dir=ltr] a.ck.ck-button{justify-content:left}[dir=rtl] .ck.ck-button,[dir=rtl] a.ck.ck-button{justify-content:right}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}.ck.ck-list-item-button{border-radius:0;min-height:unset;width:100%}[dir=ltr] .ck.ck-list-item-button{text-align:left}[dir=rtl] .ck.ck-list-item-button{text-align:right}[dir=ltr] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-right:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-holder{display:inline-flex;height:.9em;width:.9em}[dir=ltr] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-left:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-icon{height:100%}.ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}.ck.ck-color-grid{display:grid}.color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-right:var(--ck-spacing-medium);padding-top:var(--ck-spacing-tiny)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{align-items:center;display:flex}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save{flex:1}.ck.ck-dialog .ck.ck-dialog__actions{display:flex;justify-content:flex-end}.ck.ck-dialog-overlay{bottom:0;left:0;overscroll-behavior:none;position:fixed;right:0;top:0;user-select:none}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent{animation:none;background:none;pointer-events:none}.ck.ck-dialog{overscroll-behavior:none;position:absolute;width:fit-content}.ck.ck-dialog .ck.ck-form__header{flex-shrink:0}.ck.ck-dialog:not(.ck-dialog_modal) .ck.ck-form__header .ck-form__header__label{cursor:grab}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog{pointer-events:all}:root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-panel)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{max-height:314px;overflow-y:auto;position:absolute;z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-dropdown-menu-list__nested-menu{display:block}.ck.ck-aria-live-announcer{left:-10000px;position:absolute;top:-10000px}.ck.ck-aria-live-region-list{list-style-type:none}.ck.ck-form__row{align-items:flex-start;display:flex;flex-direction:row;justify-content:space-between;padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}.ck.ck-form__row.ck-form__row_large-top-padding{padding-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-form__row_large-bottom-padding{padding-bottom:var(--ck-spacing-large)}.ck.ck-form__row.ck-form__row_with-submit{flex-wrap:nowrap}.ck.ck-form__row.ck-form__row_with-submit>:not(:first-child){margin-inline-start:var(--ck-spacing-standard)}.ck.ck-form__row>.ck.ck-form__row{padding:0}.ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__header h2.ck-form__header__label{flex-grow:1}.ck.ck-icon{vertical-align:middle}.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}.ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}:root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-panel)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}.ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-panel) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-panel)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-autocomplete{position:relative}.ck.ck-autocomplete>.ck-search__results{position:absolute;z-index:var(--ck-z-panel)}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{bottom:100%}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{bottom:auto;top:100%}.ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{left:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{right:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view .ck-search__reset{position:absolute;top:50%;transform:translateY(-50%)}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{display:block}.ck.ck-search>.ck-search__results>.ck-search__info:not(.ck-hidden)~*{display:none}.ck.ck-highlighted-text mark{background:var(--ck-color-highlight-background);font-size:inherit;font-weight:inherit;line-height:inherit;vertical-align:initial}.ck.ck-balloon-panel.ck-tooltip{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:calc(var(--ck-z-dialog) + 100)}:root{--ck-toolbar-spinner-size:18px}.ck.ck-spinner-container{display:block;position:relative}.ck.ck-spinner{left:0;margin:0 auto;position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:1}.ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}:root{--ck-menu-bar-menu-max-width:75vw;--ck-menu-bar-nested-menu-horizontal-offset:5px}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{max-width:var(--ck-menu-bar-menu-max-width);position:absolute;z-index:var(--ck-z-panel)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{bottom:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{bottom:auto;top:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{left:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{right:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{left:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{bottom:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{right:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{bottom:0}.ck.ck-menu-bar__menu{display:block;position:relative}:root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}`;
var RM = /* @__PURE__ */ $('<div class="editor-container editor-container_balloon-editor editor-container_include-block-toolbar" id="editor-container" style="margin: 0px 34px; min-height: 34px;"><div class="editor-container__editor"><div id="editorContent"></div></div></div>');
const zM = { hash: "svelte-32ttx", code: "" };
function BM(o, i) {
  Et(i, !0), nt(o, zM);
  let e = D(i, "editorContent", 11, ""), t;
  iv(() => {
    const s = document.createElement("style");
    s.textContent = NM, document.head.appendChild(s), n();
  });
  function n() {
    let s = document.getElementById("editorContent");
    p3.create(s, {
      toolbar: {
        items: [
          "heading",
          "|",
          "fontSize",
          "fontFamily",
          "fontColor",
          "fontBackgroundColor",
          "|",
          "bold",
          "italic",
          "underline",
          "strikethrough",
          "subscript",
          "superscript",
          "code",
          "removeFormat",
          "|",
          "emoji",
          "specialCharacters",
          "horizontalLine",
          "link",
          "insertImage",
          "mediaEmbed",
          "insertTable",
          "highlight",
          "blockQuote",
          "codeBlock",
          "|",
          "alignment",
          "|",
          "bulletedList",
          "numberedList",
          "todoList",
          "outdent",
          "indent"
        ],
        shouldNotGroupWhenFull: !1
      },
      plugins: [
        tE,
        lE,
        S4,
        Zw,
        cE,
        xC,
        zE,
        YT,
        hE,
        pE,
        h3,
        P3,
        H3,
        s4,
        i4,
        Z3,
        J3,
        m4,
        v4,
        A4,
        R4,
        H4,
        B4,
        Q4,
        jw,
        oS,
        aS,
        Wu,
        lS,
        Fw,
        uS,
        mS,
        kE,
        IS,
        OS,
        $S,
        JS,
        FI,
        KI,
        cP,
        Da,
        HI,
        IP,
        LP,
        DP,
        C0,
        S0,
        FP,
        E0,
        T0,
        A0,
        vE,
        CE,
        EE,
        vM,
        OM,
        CM,
        g4,
        oI,
        PE
      ],
      blockToolbar: [
        "fontSize",
        "fontColor",
        "fontBackgroundColor",
        "|",
        "bold",
        "italic",
        "|",
        "link",
        "insertImage",
        "insertTable",
        "|",
        "bulletedList",
        "numberedList",
        "outdent",
        "indent"
      ],
      fontFamily: { supportAllValues: !0 },
      fontSize: {
        options: [10, 12, 14, "default", 18, 20, 22],
        supportAllValues: !0
      },
      heading: {
        options: [
          {
            model: "paragraph",
            title: "Paragraph",
            class: "ck-heading_paragraph"
          },
          {
            model: "heading1",
            view: "h1",
            title: "Heading 1",
            class: "ck-heading_heading1"
          },
          {
            model: "heading2",
            view: "h2",
            title: "Heading 2",
            class: "ck-heading_heading2"
          },
          {
            model: "heading3",
            view: "h3",
            title: "Heading 3",
            class: "ck-heading_heading3"
          },
          {
            model: "heading4",
            view: "h4",
            title: "Heading 4",
            class: "ck-heading_heading4"
          },
          {
            model: "heading5",
            view: "h5",
            title: "Heading 5",
            class: "ck-heading_heading5"
          },
          {
            model: "heading6",
            view: "h6",
            title: "Heading 6",
            class: "ck-heading_heading6"
          }
        ]
      },
      image: {
        toolbar: [
          "toggleImageCaption",
          "imageTextAlternative",
          "|",
          "imageStyle:inline",
          "imageStyle:wrapText",
          "imageStyle:breakText",
          "|",
          "resizeImage"
        ]
      },
      initialData: e(),
      licenseKey: "GPL",
      link: {
        addTargetToExternalLinks: !0,
        defaultProtocol: "https://",
        decorators: {
          toggleDownloadable: {
            mode: "manual",
            label: "Downloadable",
            attributes: { download: "file" }
          }
        }
      },
      list: {
        properties: {
          styles: !0,
          startIndex: !0,
          reversed: !0
        }
      },
      mention: {
        feeds: [
          {
            marker: "@",
            feed: []
            /* See: https://ckeditor.com/docs/ckeditor5/latest/features/mentions.html */
          }
        ]
      },
      placeholder: "Type or paste your content here!",
      table: {
        contentToolbar: ["tableColumn", "tableRow", "mergeTableCells"]
      },
      autosave: {
        save(a) {
          let l = a.getData();
          document.dispatchEvent(new CustomEvent("GenEditorContentChangedEvent", {
            detail: { id: i.$$host.id, content: l }
          }));
        }
      }
    }).then((a) => {
      t = a, e() && (console.log("Setting loaded to true in editor create"), t.setData(e()));
    });
  }
  var r = RM();
  F(o, r), St();
}
customElements.define("gen-editor", ot(BM, { editorContent: { reflect: !0 } }, [], [], !1));
export {
  o2 as ElegantBuffet,
  Mb as ElegantHeader,
  Lb as ElegantHeroSearch,
  Vb as ElegantSearch,
  a2 as ElegantSpinner,
  Db as ElegantTable,
  BM as GenEditor,
  Uv as IngBuffet,
  dv as IngButton,
  mv as IngButtonGray,
  ey as IngForm,
  Ib as IngHeaderLite,
  nu as IngInput,
  Pb as IngSelect,
  ay as IngTable
};
